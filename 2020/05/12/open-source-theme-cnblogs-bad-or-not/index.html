<!doctype html><html lang=zh dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>博客园某开源主题暗藏私货？ | Akkuman 的博客</title>
<meta name=keywords content="前端,生活">
<meta name=description content="2020/05/13 14:50更新
在评论的驱使下我仔细去看了下，有几处确实用到了后端接口
1 2 3  loadBlogTalk: (page) => { return forwardXmlJsonp(&#34;https://ing.cnblogs.com/u/&#34; + blogConst.blogAcc + &#34;/&#34; + page, parseTalkList); },   1 2 3  loadBlogSearch: (keyword) => { return forwardXmlJsonp(&#34;https://zzk.cnblogs.com/s/blogpost?w=&#34; + encodeURI(&#34;blog:&#34; + blogConst.blogAcc + &#34; &#34; + keyword), parseSearchKeyWord); },   1 2 3 4 5 6 7  loadFollowers: (page) => { let url = &#34;https://home.cnblogs.com/u/&#34; + blogConst.blogAcc + &#34;/relation/followers/&#34;; if (page && page > 1) { url += &#34;?">
<meta name=author content>
<link rel=canonical href=//hacktech.cn/2020/05/12/open-source-theme-cnblogs-bad-or-not/>
<link crossorigin=anonymous href=https://cdn.jsdelivr.net/gh/akkuman/akkuman.github.io@master/assets/css/stylesheet.min.2d7d75b9e2169b339e3eb6eaf518b7e5473045f05605aa42ea980b993db2ceae.css integrity="sha256-LX11ueIWmzOePrbq9Ri35UcwRfBWBapC6pgLmT2yzq4=" rel="preload stylesheet" as=style>
<link rel=icon href=//hacktech.cn/images/avatar.webp>
<link rel=icon type=image/png sizes=16x16 href=//hacktech.cn/favicon-16x16.png>
<link rel=icon type=image/png sizes=32x32 href=//hacktech.cn/favicon-32x32.png>
<link rel=apple-touch-icon href=//hacktech.cn/apple-touch-icon.png>
<link rel=mask-icon href=//hacktech.cn/safari-pinned-tab.svg>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.87.0">
<link rel=alternate hreflang=zh href=//hacktech.cn/2020/05/12/open-source-theme-cnblogs-bad-or-not/>
<link rel=preconnect href=https://fonts.googleapis.cnpmjs.org>
<link rel=preconnect href=https://fonts.gstatic.cnpmjs.org crossorigin>
<link href="https://fonts.googleapis.cnpmjs.org/css2?family=Noto+Serif+SC&family=Source+Code+Pro&display=swap" rel=stylesheet>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<meta property="og:title" content="博客园某开源主题暗藏私货？">
<meta property="og:description" content="2020/05/13 14:50更新
在评论的驱使下我仔细去看了下，有几处确实用到了后端接口
1 2 3  loadBlogTalk: (page) => { return forwardXmlJsonp(&#34;https://ing.cnblogs.com/u/&#34; + blogConst.blogAcc + &#34;/&#34; + page, parseTalkList); },   1 2 3  loadBlogSearch: (keyword) => { return forwardXmlJsonp(&#34;https://zzk.cnblogs.com/s/blogpost?w=&#34; + encodeURI(&#34;blog:&#34; + blogConst.blogAcc + &#34; &#34; + keyword), parseSearchKeyWord); },   1 2 3 4 5 6 7  loadFollowers: (page) => { let url = &#34;https://home.cnblogs.com/u/&#34; + blogConst.blogAcc + &#34;/relation/followers/&#34;; if (page && page > 1) { url += &#34;?">
<meta property="og:type" content="article">
<meta property="og:url" content="//hacktech.cn/2020/05/12/open-source-theme-cnblogs-bad-or-not/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-05-12T22:14:00+00:00">
<meta property="article:modified_time" content="2020-05-12T22:14:00+00:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="博客园某开源主题暗藏私货？">
<meta name=twitter:description content="2020/05/13 14:50更新
在评论的驱使下我仔细去看了下，有几处确实用到了后端接口
1 2 3  loadBlogTalk: (page) => { return forwardXmlJsonp(&#34;https://ing.cnblogs.com/u/&#34; + blogConst.blogAcc + &#34;/&#34; + page, parseTalkList); },   1 2 3  loadBlogSearch: (keyword) => { return forwardXmlJsonp(&#34;https://zzk.cnblogs.com/s/blogpost?w=&#34; + encodeURI(&#34;blog:&#34; + blogConst.blogAcc + &#34; &#34; + keyword), parseSearchKeyWord); },   1 2 3 4 5 6 7  loadFollowers: (page) => { let url = &#34;https://home.cnblogs.com/u/&#34; + blogConst.blogAcc + &#34;/relation/followers/&#34;; if (page && page > 1) { url += &#34;?">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"//hacktech.cn/posts/"},{"@type":"ListItem","position":2,"name":"博客园某开源主题暗藏私货？","item":"//hacktech.cn/2020/05/12/open-source-theme-cnblogs-bad-or-not/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"博客园某开源主题暗藏私货？","name":"博客园某开源主题暗藏私货？","description":"2020/05/13 14:50更新\n在评论的驱使下我仔细去看了下，有几处确实用到了后端接口\n1 2 3  loadBlogTalk: (page) =\u0026gt; { return forwardXmlJsonp(\u0026#34;https://ing.cnblogs.com/u/\u0026#34; + blogConst.blogAcc + \u0026#34;/\u0026#34; + page, parseTalkList); },   1 2 3  loadBlogSearch: (keyword) =\u0026gt; { return forwardXmlJsonp(\u0026#34;https://zzk.cnblogs.com/s/blogpost?w=\u0026#34; + encodeURI(\u0026#34;blog:\u0026#34; + blogConst.blogAcc + \u0026#34; \u0026#34; + keyword), parseSearchKeyWord); },   1 2 3 4 5 6 7  loadFollowers: (page) =\u0026gt; { let url = \u0026#34;https://home.cnblogs.com/u/\u0026#34; + blogConst.blogAcc + \u0026#34;/relation/followers/\u0026#34;; if (page \u0026amp;\u0026amp; page \u0026gt; 1) { url += \u0026#34;?","keywords":["前端","生活"],"articleBody":"2020/05/13 14:50更新\n在评论的驱使下我仔细去看了下，有几处确实用到了后端接口\n1 2 3  loadBlogTalk: (page) = { return forwardXmlJsonp(\"https://ing.cnblogs.com/u/\" + blogConst.blogAcc + \"/\" + page, parseTalkList); },   1 2 3  loadBlogSearch: (keyword) = { return forwardXmlJsonp(\"https://zzk.cnblogs.com/s/blogpost?w=\" + encodeURI(\"blog:\" + blogConst.blogAcc + \" \" + keyword), parseSearchKeyWord); },   1 2 3 4 5 6 7  loadFollowers: (page) = { let url = \"https://home.cnblogs.com/u/\" + blogConst.blogAcc + \"/relation/followers/\"; if (page \u0026\u0026 page  1) { url += \"?page=\" + page; } return forwardXmlJsonp(url, parseFollowers); },   这三个接口是走的php后端的api，理由是能自洽的，因为涉及到不同子域了，存在跨站请求，所以需要第三方后端来进行处理\n不过百度统计我还是不太能理解\n 2020/05/12 22:14\n首先说好本文只是我个人的猜测，如果有不对的地方请及时指正\n背景 前些天朋友介绍，看到一个博客园主题，主题的思路很棒，具体怎么棒不表，只是后来看了看源码，发现了一些秘密的东西。\n源码地址https://github.com/cjunn/cnblog_theme_atum\n发现 神秘的后端请求 首先是这个主题会向主题作者的php服务器发送请求\n这里我们可以看到是返回一个callback，这一般是解决跨域所采用的jsonp技术\n那么jsonp的具体原理是啥？\njsonp原理 因为浏览器跨域机制的存在，如果在对方接口服务器上面并没有做cors相关的操作，那么是请求不到ajax接口数据的，jsonp技术应运而生\n浏览器是可以引入外域的js的，并且外域上不需要做任何跨域相关的设置，引入外域js后就可以调用该js里面的函数，所以在接口上传递一个callback，比如\n1     然后那边返回一个js，js的内容为\n1  ttt({'a': 1, 'b': 2})   那么调用ttt函数即可获得这个json数据\n后端请求问题点 是不是到现在为止你还是觉得，好像没什么问题啊，他返回一下好像也没问题啊？\n但是试想一个，这个callback他是可以在后端任意替换的，比如给你加个js获取你的一些信息，甚至还可以控制你的浏览器一些行为，比如帮他点击一个啥啥啥，可以了解一下Beef\n神秘的加密字符串 我看了这个主题占用cpu和内存比较低，所以花了几分钟时间翻了下源码，发现了一些奇怪的东西\n我在找上面所说的php请求的时候发现了这个\n然后跟进去\n继续跟\n有一串加密的东西\n看名称像是百度统计，但是你为什么加个密，跟进这个加密函数看看\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145  /** * * Base64 encode / decode * http://www.webtoolkit.info * **/ // private property let _keyStr = \"\" _keyStr += \"AByz0r4wxs\"; // public method for encoding let encode = function (input) { var output = \"\"; var chr1, chr2, chr3, enc1, enc2, enc3, enc4; var i = 0; input = _utf8_encode(input); while (i  2; enc2 = ((chr1 \u0026 3)  4); enc3 = ((chr2 \u0026 15)  6); enc4 = chr3 \u0026 63; if (isNaN(chr2)) { enc3 = enc4 = 64; } else if (isNaN(chr3)) { enc4 = 64; } output = output + _keyStr.charAt(enc1) + _keyStr.charAt(enc2) + _keyStr.charAt(enc3) + _keyStr.charAt(enc4); } // Whend return output; } // End Function encode _keyStr += \"KLMCDEtuTUVWX12NOPQk\"; // public method for decoding let decode = function (input) { var output = \"\"; var chr1, chr2, chr3; var enc1, enc2, enc3, enc4; var i = 0; input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \"\"); while (i  4); chr2 = ((enc2 \u0026 15)  2); chr3 = ((enc3 \u0026 3) 127) \u0026\u0026 (c  6) | 192); utftext += String.fromCharCode((c \u0026 63) | 128); } else { utftext += String.fromCharCode((c  12) | 224); utftext += String.fromCharCode(((c  6) \u0026 63) | 128); utftext += String.fromCharCode((c \u0026 63) | 128); } } // Next n return utftext; } // End Function _utf8_encode _keyStr += \"35RSJFGHIvgh\"; // private method for UTF-8 decoding let _utf8_decode = function (utftext) { var string = \"\"; var i = 0; var c, c1, c2, c3; c = c1 = c2 = 0; while (i 191) \u0026\u0026 (c { return encode(message); }, o: (ciphertext) = { return decode(ciphertext); }, }   这个函数自己跑一下，跑出来是 https://hm.baidu.com/hm.js?ae80cc662109a34c868ba6cbe3431c8d 这个百度统计地址\n然后在初始化的时候，也就是你每次进网站的时候\n每次进网站调用这个函数 initBaiduCount()\n并且加了个路由守卫调用 pushBaiduCount()\n可能有的人不理解路由守卫是什么，路由守卫就是一个hook钩子，在你每次进入或离开路由，或者说该网站的页面时调用，比如这里是进入一个新路由的时候就调用一下，跟进去看看\n这里是插入了百度统计代码\n我的疑惑点 我不太懂百度统计是什么东西，一直认为就是一个管站点流量和访问量的，也不知道有啥其他东西\n我说下我觉得可疑的点\n我姑且认为是为了给自己的博客进行统计，但是这其中为什么大费周章去加密解密，这个我不太理解\n还有的是这个加密的js去掉了后缀js，这样github就没法检索分析代码了，不把代码down下来应该是只能硬找\n我看了下，其实并没有用到自建php服务器上的东西，最开始以为是反代博客园转化为接口，但是我看了下请求，全都是只有callback，返回的一个字符串，我实在想不到是有什么必要进行这个操作，目前看起来是没有价值的\n所以问题来了：\n 添加了百度统计，但是大费周章加解密，看起来并不是让用户可自定义的项或者不是大大方方给人看的东西？ 这个php服务器主要用处是什么？目前的callback看起来是毫无意义的，还是真像我所想的，方便以后做一些事情？  ","wordCount":"787","inLanguage":"zh","datePublished":"2020-05-12T22:14:00Z","dateModified":"2020-05-12T22:14:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"//hacktech.cn/2020/05/12/open-source-theme-cnblogs-bad-or-not/"},"publisher":{"@type":"Organization","name":"Akkuman 的博客","logo":{"@type":"ImageObject","url":"//hacktech.cn/images/avatar.webp"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<noscript>
<style type=text/css>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=//hacktech.cn/ accesskey=h title="Akkuman 的博客 (Alt + H)">Akkuman 的博客</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
<ul class=lang-switch><li>|</li>
<li>
<a href=//hacktech.cn/en/ title=English aria-label=English>En</a>
</li>
</ul>
</span>
</div>
<ul id=menu>
<li>
<a href=//hacktech.cn/archives/ title=归档>
<span>归档</span>
</a>
</li>
<li>
<a href=//hacktech.cn/categories/ title=分类>
<span>分类</span>
</a>
</li>
<li>
<a href=//hacktech.cn/search/ title=搜索>
<span>搜索</span>
</a>
</li>
<li>
<a href=//hacktech.cn/tags/ title=标签>
<span>标签</span>
</a>
</li>
<li>
<a href=//hacktech.cn/links/ title=链接>
<span>链接</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<div class=breadcrumbs><a href=//hacktech.cn/>主页</a>&nbsp;»&nbsp;<a href=//hacktech.cn/posts/>Posts</a></div>
<h1 class=post-title>
博客园某开源主题暗藏私货？
</h1>
<div class=post-meta>May 12, 2020&nbsp;·&nbsp;4 分钟&nbsp;|&nbsp;<a href="mailto://akkumans@qq.com?subject=Suggesting%20changes%20for%20/posts/open-source-theme-cnblogs-bad-or-not.md" rel="noopener noreferrer" target=_blank>给我邮件</a>
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<div class=details>目录</div>
</summary>
<div class=inner><ul>
<li>
<a href=#%e8%83%8c%e6%99%af aria-label=背景>背景</a></li>
<li>
<a href=#%e5%8f%91%e7%8e%b0 aria-label=发现>发现</a><ul>
<li>
<a href=#%e7%a5%9e%e7%a7%98%e7%9a%84%e5%90%8e%e7%ab%af%e8%af%b7%e6%b1%82 aria-label=神秘的后端请求>神秘的后端请求</a><ul>
<li>
<a href=#jsonp%e5%8e%9f%e7%90%86 aria-label=jsonp原理>jsonp原理</a></li></ul>
</li>
<li>
<a href=#%e5%90%8e%e7%ab%af%e8%af%b7%e6%b1%82%e9%97%ae%e9%a2%98%e7%82%b9 aria-label=后端请求问题点>后端请求问题点</a></li>
<li>
<a href=#%e7%a5%9e%e7%a7%98%e7%9a%84%e5%8a%a0%e5%af%86%e5%ad%97%e7%ac%a6%e4%b8%b2 aria-label=神秘的加密字符串>神秘的加密字符串</a></li>
<li>
<a href=#%e6%88%91%e7%9a%84%e7%96%91%e6%83%91%e7%82%b9 aria-label=我的疑惑点>我的疑惑点</a>
</li>
</ul>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>2020/05/13 14:50更新</p>
<p>在评论的驱使下我仔细去看了下，有几处确实用到了后端接口</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>  <span style=color:#a6e22e>loadBlogTalk</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>page</span>) =&gt; {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>forwardXmlJsonp</span>(<span style=color:#e6db74>&#34;https://ing.cnblogs.com/u/&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>blogConst</span>.<span style=color:#a6e22e>blogAcc</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>page</span>, <span style=color:#a6e22e>parseTalkList</span>);
  },
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>  <span style=color:#a6e22e>loadBlogSearch</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>keyword</span>) =&gt; {
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>forwardXmlJsonp</span>(<span style=color:#e6db74>&#34;https://zzk.cnblogs.com/s/blogpost?w=&#34;</span> <span style=color:#f92672>+</span> encodeURI(<span style=color:#e6db74>&#34;blog:&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>blogConst</span>.<span style=color:#a6e22e>blogAcc</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>keyword</span>), <span style=color:#a6e22e>parseSearchKeyWord</span>);
  },
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js>  <span style=color:#a6e22e>loadFollowers</span><span style=color:#f92672>:</span> (<span style=color:#a6e22e>page</span>) =&gt; {
    <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;https://home.cnblogs.com/u/&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>blogConst</span>.<span style=color:#a6e22e>blogAcc</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/relation/followers/&#34;</span>;
    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>page</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>page</span> <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>1</span>) {
      <span style=color:#a6e22e>url</span> <span style=color:#f92672>+=</span> <span style=color:#e6db74>&#34;?page=&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>page</span>;
    }
    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>forwardXmlJsonp</span>(<span style=color:#a6e22e>url</span>, <span style=color:#a6e22e>parseFollowers</span>);
  },
</code></pre></td></tr></table>
</div>
</div><p>这三个接口是走的php后端的api，理由是能自洽的，因为涉及到不同子域了，存在跨站请求，所以需要第三方后端来进行处理</p>
<p>不过百度统计我还是不太能理解</p>
<hr>
<p>2020/05/12 22:14</p>
<p><strong>首先说好本文只是我个人的猜测，如果有不对的地方请及时指正</strong></p>
<h2 id=背景>背景<a hidden class=anchor aria-hidden=true href=#背景>#</a></h2>
<p>前些天朋友介绍，看到一个博客园主题，主题的思路很棒，具体怎么棒不表，只是后来看了看源码，发现了一些秘密的东西。</p>
<p>源码地址<a href=https://github.com/cjunn/cnblog_theme_atum>https://github.com/cjunn/cnblog_theme_atum</a></p>
<h2 id=发现>发现<a hidden class=anchor aria-hidden=true href=#发现>#</a></h2>
<h3 id=神秘的后端请求>神秘的后端请求<a hidden class=anchor aria-hidden=true href=#神秘的后端请求>#</a></h3>
<p>首先是这个主题会向主题作者的php服务器发送请求</p>
<p><img loading=lazy src=https://raw.githubusercontents.com/akkuman/pic/master/pic/2021/8/e6d962c441b46203d9ff44042a72091c..png alt="enter description here">
</p>
<p>这里我们可以看到是返回一个callback，这一般是解决跨域所采用的jsonp技术</p>
<p>那么jsonp的具体原理是啥？</p>
<h4 id=jsonp原理>jsonp原理<a hidden class=anchor aria-hidden=true href=#jsonp原理>#</a></h4>
<p>因为浏览器跨域机制的存在，如果在对方接口服务器上面并没有做cors相关的操作，那么是请求不到ajax接口数据的，jsonp技术应运而生</p>
<p>浏览器是可以引入外域的js的，并且外域上不需要做任何跨域相关的设置，引入外域js后就可以调用该js里面的函数，所以在接口上传递一个callback，比如</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>&lt;script src=&#34;http://a.com/a.php?callback=ttt&#34;&gt;&lt;/script&gt;
</code></pre></td></tr></table>
</div>
</div><p>然后那边返回一个js，js的内容为</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>ttt({&#39;a&#39;: 1, &#39;b&#39;: 2})
</code></pre></td></tr></table>
</div>
</div><p>那么调用ttt函数即可获得这个json数据</p>
<h3 id=后端请求问题点>后端请求问题点<a hidden class=anchor aria-hidden=true href=#后端请求问题点>#</a></h3>
<p>是不是到现在为止你还是觉得，好像没什么问题啊，他返回一下好像也没问题啊？</p>
<p>但是试想一个，这个callback他是可以在后端任意替换的，比如给你加个js获取你的一些信息，甚至还可以控制你的浏览器一些行为，比如帮他点击一个啥啥啥，可以了解一下Beef</p>
<h3 id=神秘的加密字符串>神秘的加密字符串<a hidden class=anchor aria-hidden=true href=#神秘的加密字符串>#</a></h3>
<p>我看了这个主题占用cpu和内存比较低，所以花了几分钟时间翻了下源码，发现了一些奇怪的东西</p>
<p>我在找上面所说的php请求的时候发现了这个</p>
<p><img loading=lazy src=https://raw.githubusercontents.com/akkuman/pic/master/pic/2021/8/a9e0c0780f708158affbf79440bd7837..png alt="enter description here">
</p>
<p>然后跟进去</p>
<p><img loading=lazy src=https://raw.githubusercontents.com/akkuman/pic/master/pic/2021/8/9f5b327e371f102cf1c031dfe815c28e..png alt="enter description here">
</p>
<p>继续跟</p>
<p><img loading=lazy src=https://raw.githubusercontents.com/akkuman/pic/master/pic/2021/8/df9a7160eb303f31236c171286aabf79..png alt="enter description here">
</p>
<p>有一串加密的东西</p>
<p>看名称像是百度统计，但是你为什么加个密，跟进这个加密函数看看</p>
<div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">143
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">144
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">145
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>/**
 *
 *  Base64 encode / decode
 *  http://www.webtoolkit.info
 *
 **/


  // private property
let _keyStr = &#34;&#34;
_keyStr += &#34;AByz0r4wxs&#34;;

// public method for encoding
let encode = function (input) {
  var output = &#34;&#34;;
  var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
  var i = 0;

  input = _utf8_encode(input);

  while (i &lt; input.length) {
    chr1 = input.charCodeAt(i++);
    chr2 = input.charCodeAt(i++);
    chr3 = input.charCodeAt(i++);

    enc1 = chr1 &gt;&gt; 2;
    enc2 = ((chr1 &amp; 3) &lt;&lt; 4) | (chr2 &gt;&gt; 4);
    enc3 = ((chr2 &amp; 15) &lt;&lt; 2) | (chr3 &gt;&gt; 6);
    enc4 = chr3 &amp; 63;

    if (isNaN(chr2)) {
      enc3 = enc4 = 64;
    } else if (isNaN(chr3)) {
      enc4 = 64;
    }

    output = output +
      _keyStr.charAt(enc1) + _keyStr.charAt(enc2) +
      _keyStr.charAt(enc3) + _keyStr.charAt(enc4);
  } // Whend

  return output;
} // End Function encode
_keyStr += &#34;KLMCDEtuTUVWX12NOPQk&#34;;


// public method for decoding
let decode = function (input) {
  var output = &#34;&#34;;
  var chr1, chr2, chr3;
  var enc1, enc2, enc3, enc4;
  var i = 0;

  input = input.replace(/[^A-Za-z0-9\+\/\=]/g, &#34;&#34;);
  while (i &lt; input.length) {
    enc1 = _keyStr.indexOf(input.charAt(i++));
    enc2 = _keyStr.indexOf(input.charAt(i++));
    enc3 = _keyStr.indexOf(input.charAt(i++));
    enc4 = _keyStr.indexOf(input.charAt(i++));

    chr1 = (enc1 &lt;&lt; 2) | (enc2 &gt;&gt; 4);
    chr2 = ((enc2 &amp; 15) &lt;&lt; 4) | (enc3 &gt;&gt; 2);
    chr3 = ((enc3 &amp; 3) &lt;&lt; 6) | enc4;

    output = output + String.fromCharCode(chr1);

    if (enc3 != 64) {
      output = output + String.fromCharCode(chr2);
    }

    if (enc4 != 64) {
      output = output + String.fromCharCode(chr3);
    }

  } // Whend

  output = _utf8_decode(output);

  return output;
} // End Function decode
_keyStr += &#34;lmnopqYZabcdef&#34;;


// private method for UTF-8 encoding
let _utf8_encode = function (string) {
  var utftext = &#34;&#34;;
  string = string.replace(/\r\n/g, &#34;\n&#34;);

  for (var n = 0; n &lt; string.length; n++) {
    var c = string.charCodeAt(n);

    if (c &lt; 128) {
      utftext += String.fromCharCode(c);
    } else if ((c &gt; 127) &amp;&amp; (c &lt; 2048)) {
      utftext += String.fromCharCode((c &gt;&gt; 6) | 192);
      utftext += String.fromCharCode((c &amp; 63) | 128);
    } else {
      utftext += String.fromCharCode((c &gt;&gt; 12) | 224);
      utftext += String.fromCharCode(((c &gt;&gt; 6) &amp; 63) | 128);
      utftext += String.fromCharCode((c &amp; 63) | 128);
    }

  } // Next n

  return utftext;
} // End Function _utf8_encode
_keyStr += &#34;35RSJFGHIvgh&#34;;
// private method for UTF-8 decoding
let _utf8_decode = function (utftext) {
  var string = &#34;&#34;;
  var i = 0;
  var c, c1, c2, c3;
  c = c1 = c2 = 0;

  while (i &lt; utftext.length) {
    c = utftext.charCodeAt(i);

    if (c &lt; 128) {
      string += String.fromCharCode(c);
      i++;
    } else if ((c &gt; 191) &amp;&amp; (c &lt; 224)) {
      c2 = utftext.charCodeAt(i + 1);
      string += String.fromCharCode(((c &amp; 31) &lt;&lt; 6) | (c2 &amp; 63));
      i += 2;
    } else {
      c2 = utftext.charCodeAt(i + 1);
      c3 = utftext.charCodeAt(i + 2);
      string += String.fromCharCode(((c &amp; 15) &lt;&lt; 12) | ((c2 &amp; 63) &lt;&lt; 6) | (c3 &amp; 63));
      i += 3;
    }

  } // Whend

  return string;
} // End Function _utf8_decode
_keyStr += &#34;ij6789+/=&#34;;

export default {
  i: (message) =&gt; {
    return encode(message);
  },
  o: (ciphertext) =&gt; {
    return decode(ciphertext);
  },
}
</code></pre></td></tr></table>
</div>
</div><p>这个函数自己跑一下，跑出来是 <code>https://hm.baidu.com/hm.js?ae80cc662109a34c868ba6cbe3431c8d</code> 这个百度统计地址</p>
<p>然后在初始化的时候，也就是你每次进网站的时候</p>
<p><img loading=lazy src=https://raw.githubusercontents.com/akkuman/pic/master/pic/2021/8/aa69a015753464ad0ee3d37295d2e813..png alt="enter description here">
</p>
<p>每次进网站调用这个函数 initBaiduCount()</p>
<p>并且加了个路由守卫调用 pushBaiduCount()</p>
<p>可能有的人不理解路由守卫是什么，路由守卫就是一个hook钩子，在你每次进入或离开路由，或者说该网站的页面时调用，比如这里是进入一个新路由的时候就调用一下，跟进去看看</p>
<p><img loading=lazy src=https://raw.githubusercontents.com/akkuman/pic/master/pic/2021/8/39be8918530f841982360988881746ce..png alt="enter description here">
</p>
<p>这里是插入了百度统计代码</p>
<h3 id=我的疑惑点>我的疑惑点<a hidden class=anchor aria-hidden=true href=#我的疑惑点>#</a></h3>
<p>我不太懂百度统计是什么东西，一直认为就是一个管站点流量和访问量的，也不知道有啥其他东西</p>
<p>我说下我觉得可疑的点</p>
<p>我姑且认为是为了给自己的博客进行统计，但是这其中为什么大费周章去加密解密，这个我不太理解</p>
<p>还有的是这个加密的js去掉了后缀js，这样github就没法检索分析代码了，不把代码down下来应该是只能硬找</p>
<p>我看了下，其实并没有用到自建php服务器上的东西，最开始以为是反代博客园转化为接口，但是我看了下请求，全都是只有callback，返回的一个字符串，我实在想不到是有什么必要进行这个操作，目前看起来是没有价值的</p>
<p>所以问题来了：</p>
<ol>
<li>添加了百度统计，但是大费周章加解密，看起来并不是让用户可自定义的项或者不是大大方方给人看的东西？</li>
<li>这个php服务器主要用处是什么？目前的callback看起来是毫无意义的，还是真像我所想的，方便以后做一些事情？</li>
</ol>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=//hacktech.cn/tags/%E5%89%8D%E7%AB%AF/>前端</a></li>
<li><a href=//hacktech.cn/tags/%E7%94%9F%E6%B4%BB/>生活</a></li>
</ul>
<nav class=paginav>
<a class=prev href=//hacktech.cn/2020/06/23/msf-stagers-develop-1/>
<span class=title>« 上一页</span>
<br>
<span>msf stagers开发不完全指北(一)</span>
</a>
<a class=next href=//hacktech.cn/2020/05/09/what-is-sockedi-call-convention-in-msf/>
<span class=title>下一页 »</span>
<br>
<span>metasploit payload运行原理浅析(sockedi调用约定是什么)</span>
</a>
</nav>
<div class=share-buttons>
<a target=_blank rel="noopener noreferrer" aria-label="share 博客园某开源主题暗藏私货？ on twitter" href="https://twitter.com/intent/tweet/?text=%e5%8d%9a%e5%ae%a2%e5%9b%ad%e6%9f%90%e5%bc%80%e6%ba%90%e4%b8%bb%e9%a2%98%e6%9a%97%e8%97%8f%e7%a7%81%e8%b4%a7%ef%bc%9f&url=%2f%2fhacktech.cn%2f2020%2f05%2f12%2fopen-source-theme-cnblogs-bad-or-not%2f&hashtags=%e5%89%8d%e7%ab%af%2c%e7%94%9f%e6%b4%bb"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM195.519 424.544c135.939.0 210.268-112.643 210.268-210.268.0-3.218.0-6.437-.153-9.502 14.406-10.421 26.973-23.448 36.935-38.314-13.18 5.824-27.433 9.809-42.452 11.648 15.326-9.196 26.973-23.602 32.49-40.92-14.252 8.429-30.038 14.56-46.896 17.931-13.487-14.406-32.644-23.295-53.946-23.295-40.767.0-73.87 33.104-73.87 73.87.0 5.824.613 11.494 1.992 16.858-61.456-3.065-115.862-32.49-152.337-77.241-6.284 10.881-9.962 23.601-9.962 37.088.0 25.594 13.027 48.276 32.95 61.456-12.107-.307-23.448-3.678-33.41-9.196v.92c0 35.862 25.441 65.594 59.311 72.49-6.13 1.686-12.72 2.606-19.464 2.606-4.751.0-9.348-.46-13.946-1.38 9.349 29.426 36.628 50.728 68.965 51.341-25.287 19.771-57.164 31.571-91.8 31.571-5.977.0-11.801-.306-17.625-1.073 32.337 21.15 71.264 33.41 112.95 33.41z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 博客园某开源主题暗藏私货？ on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=%2f%2fhacktech.cn%2f2020%2f05%2f12%2fopen-source-theme-cnblogs-bad-or-not%2f&title=%e5%8d%9a%e5%ae%a2%e5%9b%ad%e6%9f%90%e5%bc%80%e6%ba%90%e4%b8%bb%e9%a2%98%e6%9a%97%e8%97%8f%e7%a7%81%e8%b4%a7%ef%bc%9f&summary=%e5%8d%9a%e5%ae%a2%e5%9b%ad%e6%9f%90%e5%bc%80%e6%ba%90%e4%b8%bb%e9%a2%98%e6%9a%97%e8%97%8f%e7%a7%81%e8%b4%a7%ef%bc%9f&source=%2f%2fhacktech.cn%2f2020%2f05%2f12%2fopen-source-theme-cnblogs-bad-or-not%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 博客园某开源主题暗藏私货？ on reddit" href="https://reddit.com/submit?url=%2f%2fhacktech.cn%2f2020%2f05%2f12%2fopen-source-theme-cnblogs-bad-or-not%2f&title=%e5%8d%9a%e5%ae%a2%e5%9b%ad%e6%9f%90%e5%bc%80%e6%ba%90%e4%b8%bb%e9%a2%98%e6%9a%97%e8%97%8f%e7%a7%81%e8%b4%a7%ef%bc%9f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 博客园某开源主题暗藏私货？ on facebook" href="https://facebook.com/sharer/sharer.php?u=%2f%2fhacktech.cn%2f2020%2f05%2f12%2fopen-source-theme-cnblogs-bad-or-not%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 博客园某开源主题暗藏私货？ on whatsapp" href="https://api.whatsapp.com/send?text=%e5%8d%9a%e5%ae%a2%e5%9b%ad%e6%9f%90%e5%bc%80%e6%ba%90%e4%b8%bb%e9%a2%98%e6%9a%97%e8%97%8f%e7%a7%81%e8%b4%a7%ef%bc%9f%20-%20%2f%2fhacktech.cn%2f2020%2f05%2f12%2fopen-source-theme-cnblogs-bad-or-not%2f"><svg viewBox="0 0 512 512"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a>
<a target=_blank rel="noopener noreferrer" aria-label="share 博客园某开源主题暗藏私货？ on telegram" href="https://telegram.me/share/url?text=%e5%8d%9a%e5%ae%a2%e5%9b%ad%e6%9f%90%e5%bc%80%e6%ba%90%e4%b8%bb%e9%a2%98%e6%9a%97%e8%97%8f%e7%a7%81%e8%b4%a7%ef%bc%9f&url=%2f%2fhacktech.cn%2f2020%2f05%2f12%2fopen-source-theme-cnblogs-bad-or-not%2f"><svg viewBox="2 2 28 28"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a>
</div>
</footer>
</article>
</main>
<footer class=footer>
<span>&copy; 2021 <a href=//hacktech.cn/>Akkuman 的博客</a></span>
<span>
Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a>
</span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)">
<button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</button>
</a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
</body>
</html>