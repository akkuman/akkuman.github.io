<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta http-equiv="Cache-Control" content="no-siteapp">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=1">
<meta name="renderer" content="webkit">
<meta name="google" value="notranslate">
<meta name="robots" content="index,follow">


<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Akkuman">
<meta name="twitter:description" content="Akkuman的技术博客">
<meta name="twitter:image:src" content="hacktech.cn/images/avatar.png">

<meta property="og:url" content="hacktech.cn">
<meta property="og:title" content="Akkuman">
<meta property="og:description" content="Akkuman的技术博客">
<meta property="og:site_name" content="Akkuman">
<meta property="og:image" content="hacktech.cn/images/avatar.png">
<meta property="og:type" content="website">
<meta name="robots" content="noodp">

<meta itemprop="name" content="Akkuman">
<meta itemprop="description" content="Akkuman的技术博客">
<meta itemprop="image" content="hacktech.cn/images/avatar.png">

<link rel="canonical" href="hacktech.cn">

<link rel="shortcut icon" href="/favicon.png">
<link rel="apple-itouch-icon" href="/favicon.png">

<link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/4.0.0/css/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="/bundle/css/prism.css">
<link type="text/css" rel="stylesheet" href="/bundle/css/zoom.css">
<link type="text/css" rel="stylesheet" href="/bundle/css/main.css">
<script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>



<script>var cPlayers = [];var cPlayerOptions = [];</script>


<script type="text/javascript">
    var timeSinceLang = {
        year: '年前',
        month: '个月前',
        day: '天前',
        hour: '小时前',
        minute: '分钟前',
        second: '秒前'
    };
    var root = '';
</script>


        <meta name="keywords" content="Python,">
        <meta name="description" content="Python之Requests的安装与基本使用">
        <meta name="author" content="Akkuman">
        <title>Python之Requests的安装与基本使用</title>
    </head>
    <body>
        
        <header id="header" class="clearfix">
  <div class="container-fluid">
      <div class="row">
          <div class="logo">
              <div class="header-logo">
                <script>
                  var getwbclass = function() {
                    var wbclass = ['b', 'w'];
                    return wbclass[Math.floor(Math.random()*wbclass.length)];
                  }
                  var sitetitle = "Akkuman";
                  for (i in sitetitle) {
                    document.write('<a href="/"><span class="' + getwbclass() + ' titlechar">' + sitetitle.charAt(i) + '</span></a>');
                  }          
                  
                </script>
                
                <a id="btn-menu" href="javascript:isMenu();">
                    <span class="b">·</span>
                </a>
                <a href="javascript:isMenu1();">
                    <span id="menu-1" class="bf">1</span>
                </a>
                <a href="javascript:isMenu2();">
                    <span id="menu-2" class="bf">2</span>
                </a>
                <a href="javascript:isMenu3();">
                    <span id="menu-3" class="bf">3</span>
                </a>
              </div>
              <div id="menu-page">
                <a href="/archive.html"><li>归档</li></a>
                <a href="/tag.html"><li>标签</li></a>
                
                <a href="/atom.xml"><li>订阅</li></a>
                
                <a href="/about.html"><li>关于</li></a>
              </div>
              <div id="search-box">
                  <div id="search">
                      <input autocomplete="off" type="text" name="s" id="menu-search" placeholder="搜索..." data-root="" />
                  </div>
              </div>
          </div>
      </div>
  </div>
  </header>
        <div id="body" class="clearfix">
            <div class="container-fluid">
                <div class="row">
                    <div id="main" class="col-12 clearfix" role="main">
                        <article class="posti" itemscope itemtype="http://schema.org/BlogPosting">
                            <h1 class="post-title" itemprop="name headline">Python之Requests的安装与基本使用</h1>
                            <div class="post-meta">
                                <p>
                                    Written by <a itemprop="name" href="/about.me.html" rel="author">Akkuman</a> with ♥ on <time datetime="1465485816" itemprop="datePublished"></time> in <a href="/tag/Python/index.html">Python </a>
                                </p>
                            </div>
                            <div class="post-content" itemprop="articleBody">
                                <hr />

<h1>安装</h1>

<hr />

<p>使用 pip 安装Requests非常简单</p>

<pre><code class="language-bash">pip install requests
</code></pre>

<p>或者使用 easy_install 安装</p>

<pre><code class="language-bash">easy_install requests
</code></pre>

<hr />

<h1>获得源码</h1>

<hr />

<p>Requests 一直在Github上被积极的开发着</p>

<p>你可以克隆公共版本库:</p>

<pre><code class="language-bash">git clone git://github.com/kennethreitz/requests.git
</code></pre>

<p>下载 源码:</p>

<pre><code class="language-bash">curl -OL https://github.com/kennethreitz/requests/tarball/master
</code></pre>

<p>或者下载 zipball:</p>

<pre><code class="language-bash">curl -OL https://github.com/kennethreitz/requests/zipball/master
</code></pre>

<p>一旦你获得了复本，你就可以轻松的将它嵌入到你的python包里或者安装到你的site-packages:</p>

<pre><code class="language-bash">python setup.py install
</code></pre>

<hr />

<h1>快速上手</h1>

<hr />

<hr />

<h2>发送请求</h2>

<hr />

<p>使用Requests发送网络请求非常简单。</p>

<p>一开始要导入Requests模块:</p>

<pre><code class="language-python">&gt;&gt;&gt; import requests
</code></pre>

<p>然后，尝试获取某个网页。本例子中，我们来获取Github的公共时间线</p>

<pre><code class="language-python">&gt;&gt;&gt; r = requests.get('https://github.com/timeline.json')
</code></pre>

<p>现在，我们有一个名为 r 的 Response 对象。可以从这个对象中获取所有我们想要的信息。</p>

<p>Requests简便的API意味着所有HTTP请求类型都是显而易见的。例如，你可以这样发送一个HTTP POST请求:</p>

<pre><code class="language-python">&gt;&gt;&gt; r = requests.post(&quot;http://httpbin.org/post&quot;)
</code></pre>

<p>漂亮，对吧？那么其他HTTP请求类型：PUT， DELETE， HEAD以及OPTIONS又是如何的呢？都是一样的简单:</p>

<pre><code class="language-python">&gt;&gt;&gt; r = requests.put(&quot;http://httpbin.org/put&quot;)
&gt;&gt;&gt; r = requests.delete(&quot;http://httpbin.org/delete&quot;)
&gt;&gt;&gt; r = requests.head(&quot;http://httpbin.org/get&quot;)
&gt;&gt;&gt; r = requests.options(&quot;http://httpbin.org/get&quot;)
</code></pre>

<p>都很不错吧，但这也仅是Requests的冰山一角呢。</p>

<hr />

<h2>为URL传递参数</h2>

<hr />

<p>你也许经常想为URL的查询字符串(query string)传递某种数据。如果你是手工构建URL，那么数据会以键/值 对的形式置于URL中，跟在一个问号的后面。例如， httpbin.org/get?key=val 。 Requests允许你使用 params 关键字参数，以一个字典来提供这些参数。举例来说，如果你想传递 key1=value1 和 key2=value2 到 httpbin.org/get ，那么你可以使用如下代码:</p>

<pre><code class="language-python">&gt;&gt;&gt; payload = {'key1': 'value1', 'key2': 'value2'}
&gt;&gt;&gt; r = requests.get(&quot;http://httpbin.org/get&quot;, params=payload)
</code></pre>

<p>通过打印输出该URL，你能看到URL已被正确编码:</p>

<pre><code class="language-python">&gt;&gt;&gt; print(r.url)
http://httpbin.org/get?key2=value2&amp;key1=value1
</code></pre>

<p>注意字典里值为 None 的键都不会被添加到 URL 的查询字符串里。</p>

<hr />

<h2>响应内容</h2>

<hr />

<p>我们能读取服务器响应的内容。再次以Github时间线为例:</p>

<pre><code class="language-python">&gt;&gt;&gt; import requests
&gt;&gt;&gt; r = requests.get('https://github.com/timeline.json')
&gt;&gt;&gt; r.text
u'[{&quot;repository&quot;:{&quot;open_issues&quot;:0,&quot;url&quot;:&quot;https://github.com/...
</code></pre>

<p>Requests会自动解码来自服务器的内容。大多数unicode字符集都能被无缝地解码。</p>

<p>请求发出后，Requests会基于HTTP头部对响应的编码作出有根据的推测。当你访问 r.text 之时，Requests会使用其推测的文本编码。你可以找出Requests使用了什么编码，并且能够使用 r.encoding 属性来改变它:</p>

<pre><code class="language-python">&gt;&gt;&gt; r.encoding
'utf-8'
&gt;&gt;&gt; r.encoding = 'ISO-8859-1'
</code></pre>

<p>如果你改变了编码，每当你访问 r.text ，Request都将会使用 r.encoding 的新值。你可能希望在使用特殊逻辑计算出文本的编码的情况下来修改编码。比如 HTTP 和 XML 自身可以指定编码。这样的话，你应该使用 r.content 来找到编码，然后设置 r.encoding 为相应的编码。这样就能使用正确的编码解析 r.text 了。</p>

<p>在你需要的情况下，Requests也可以使用定制的编码。如果你创建了自己的编码，并使用 codecs 模块进行注册，你就可以轻松地使用这个解码器名称作为 r.encoding 的值， 然后由Requests来为你处理编码。</p>

<hr />

<h2>二进制响应内容</h2>

<hr />

<p>你也能以字节的方式访问请求响应体，对于非文本请求:</p>

<pre><code class="language-python">&gt;&gt;&gt; r.content
b'[{&quot;repository&quot;:{&quot;open_issues&quot;:0,&quot;url&quot;:&quot;https://github.com/...
</code></pre>

<p>Requests会自动为你解码 <strong>gzip</strong> 和 <strong>deflate</strong> 传输编码的响应数据。</p>

<p>例如，以请求返回的二进制数据创建一张图片，你可以使用如下代码:</p>

<pre><code class="language-python">&gt;&gt;&gt; from PIL import Image
&gt;&gt;&gt; from StringIO import StringIO
&gt;&gt;&gt; i = Image.open(StringIO(r.content))
</code></pre>

<hr />

<h2>JSON响应内容</h2>

<hr />

<p>Requests中也有一个内置的JSON解码器，助你处理JSON数据:</p>

<pre><code class="language-python">&gt;&gt;&gt; import requests
&gt;&gt;&gt; r = requests.get('https://github.com/timeline.json')
&gt;&gt;&gt; r.json()
[{u'repository': {u'open_issues': 0, u'url': 'https://github.com/...
</code></pre>

<p>如果JSON解码失败， r.json 就会抛出一个异常。例如，相应内容是 401 (Unauthorized) ，尝试访问 r.json 将会抛出 ValueError: No JSON object could be decoded 异常。</p>

<hr />

<h2>原始响应内容</h2>

<hr />

<p>在罕见的情况下你可能想获取来自服务器的原始套接字响应，那么你可以访问 r.raw 。 如果你确实想这么干，那请你确保在初始请求中设置了 <strong>stream=True</strong> 。具体的你可以这么做:</p>

<pre><code class="language-python">&gt;&gt;&gt; r = requests.get('https://github.com/timeline.json', stream=True)
&gt;&gt;&gt; r.raw
&lt;requests.packages.urllib3.response.HTTPResponse object at 0x101194810&gt;
&gt;&gt;&gt; r.raw.read(10)
'\x1f\x8b\x08\x00\x00\x00\x00\x00\x00\x03'
</code></pre>

<p>但一般情况下，你应该以下面的模式将文本流保存到文件:</p>

<pre><code class="language-python">with open(filename, 'wb') as fd:
    for chunk in r.iter_content(chunk_size):
        fd.write(chunk)
</code></pre>

<p>使用 Response.iter_content 将会处理大量你直接使用 Response.raw 不得不处理的。 当流下载时，上面是<strong>优先推荐</strong>的获取内容方式。</p>

<hr />

<h2>定制请求头</h2>

<hr />

<p>如果你想为请求添加HTTP头部，只要简单地传递一个 dict 给 headers 参数就可以了。</p>

<p>例如，在前一个示例中我们没有指定content-type:</p>

<pre><code class="language-python">&gt;&gt;&gt; import json
&gt;&gt;&gt; url = 'https://api.github.com/some/endpoint'
&gt;&gt;&gt; payload = {'some': 'data'}
&gt;&gt;&gt; headers = {'content-type': 'application/json'}

&gt;&gt;&gt; r = requests.post(url, data=json.dumps(payload), headers=headers)
</code></pre>

<hr />

<h2>更加复杂的POST请求</h2>

<hr />

<p>通常，你想要发送一些编码为表单形式的数据—非常像一个HTML表单。 要实现这个，只需简单地传递一个字典给 <em>data</em> 参数。你的数据字典 在发出请求时会自动编码为表单形式:</p>

<pre><code class="language-python">&gt;&gt;&gt; payload = {'key1': 'value1', 'key2': 'value2'}
&gt;&gt;&gt; r = requests.post(&quot;http://httpbin.org/post&quot;, data=payload)
&gt;&gt;&gt; print r.text
{
  ...
  &quot;form&quot;: {
    &quot;key2&quot;: &quot;value2&quot;,
    &quot;key1&quot;: &quot;value1&quot;
  },
  ...
}
</code></pre>

<p>很多时候你想要发送的数据并非编码为表单形式的。如果你传递一个 string 而不是一个 dict ，那么数据会被直接发布出去。</p>

<p>例如，Github API v3接受编码为JSON的POST/PATCH数据:</p>

<pre><code class="language-python">&gt;&gt;&gt; import json
&gt;&gt;&gt; url = 'https://api.github.com/some/endpoint'
&gt;&gt;&gt; payload = {'some': 'data'}

&gt;&gt;&gt; r = requests.post(url, data=json.dumps(payload))
</code></pre>

<hr />

<h2>POST一个多部分编码(Multipart-Encoded)的文件</h2>

<hr />

<p>Requests使得上传多部分编码文件变得很简单:</p>

<pre><code class="language-python">&gt;&gt;&gt; url = 'http://httpbin.org/post'
&gt;&gt;&gt; files = {'file': open('report.xls', 'rb')}

&gt;&gt;&gt; r = requests.post(url, files=files)
&gt;&gt;&gt; r.text
{
  ...
  &quot;files&quot;: {
    &quot;file&quot;: &quot;&lt;censored...binary...data&gt;&quot;
  },
  ...
}
</code></pre>

<p>你可以显式地设置文件名，文件类型和请求头:</p>

<pre><code class="language-python">&gt;&gt;&gt; url = 'http://httpbin.org/post'
&gt;&gt;&gt; files = {'file': ('report.xls', open('report.xls', 'rb'), 'application/vnd.ms-excel', {'Expires': '0'})}

&gt;&gt;&gt; r = requests.post(url, files=files)
&gt;&gt;&gt; r.text
{
  ...
  &quot;files&quot;: {
    &quot;file&quot;: &quot;&lt;censored...binary...data&gt;&quot;
  },
  ...
}
</code></pre>

<p>如果你想，你也可以发送作为文件来接收的字符串:</p>

<pre><code class="language-python">&gt;&gt;&gt; url = 'http://httpbin.org/post'
&gt;&gt;&gt; files = {'file': ('report.csv', 'some,data,to,send\nanother,row,to,send\n')}

&gt;&gt;&gt; r = requests.post(url, files=files)
&gt;&gt;&gt; r.text
{
  ...
  &quot;files&quot;: {
    &quot;file&quot;: &quot;some,data,to,send\\nanother,row,to,send\\n&quot;
  },
  ...
}
</code></pre>

<p>如果你发送一个非常大的文件作为 multipart/form-data 请求，你可能希望流请求(?)。默认下 requests 不支持, 但有个第三方包支持 - requests-toolbelt. 你可以阅读 toolbelt 文档 来了解使用方法。</p>

<p>在一个请求中发送多文件参考 高级用法 一节.</p>

<hr />

<h2>响应状态码</h2>

<hr />

<p>我们可以检测响应状态码:</p>

<pre><code class="language-python">&gt;&gt;&gt; r = requests.get('http://httpbin.org/get')
&gt;&gt;&gt; r.status_code
200
</code></pre>

<p>为方便引用，Requests还附带了一个内置的状态码查询对象:</p>

<pre><code class="language-python">&gt;&gt;&gt; r.status_code == requests.codes.ok
True
</code></pre>

<p>如果发送了一个失败请求(非200响应)，我们可以通过 Response.raise_for_status() 来抛出异常:</p>

<pre><code class="language-python">&gt;&gt;&gt; bad_r = requests.get('http://httpbin.org/status/404')
&gt;&gt;&gt; bad_r.status_code
404

&gt;&gt;&gt; bad_r.raise_for_status()
Traceback (most recent call last):
  File &quot;requests/models.py&quot;, line 832, in raise_for_status
    raise http_error
requests.exceptions.HTTPError: 404 Client Error
</code></pre>

<p>但是，由于我们的例子中 r 的 status_code 是 200 ，当我们调用 raise_for_status() 时，得到的是:</p>

<pre><code class="language-python">&gt;&gt;&gt; r.raise_for_status()
None
</code></pre>

<p>一切都挺和谐哈。</p>

<hr />

<h2>响应头</h2>

<hr />

<p>我们可以查看以一个Python字典形式展示的服务器响应头:</p>

<pre><code class="language-python">&gt;&gt;&gt; r.headers
{
    'content-encoding': 'gzip',
    'transfer-encoding': 'chunked',
    'connection': 'close',
    'server': 'nginx/1.0.4',
    'x-runtime': '148ms',
    'etag': '&quot;e1ca502697e5c9317743dc078f67693f&quot;',
    'content-type': 'application/json'
}
</code></pre>

<p>但是这个字典比较特殊：它是仅为HTTP头部而生的。根据 RFC 2616 ， HTTP头部是大小写不敏感的。</p>

<p>因此，我们可以使用任意大写形式来访问这些响应头字段:</p>

<pre><code class="language-python">&gt;&gt;&gt; r.headers['Content-Type']
'application/json'

&gt;&gt;&gt; r.headers.get('content-type')
'application/json'
</code></pre>

<hr />

<h2>Cookies</h2>

<hr />

<p>如果某个响应中包含一些Cookie，你可以快速访问它们:</p>

<pre><code class="language-python">&gt;&gt;&gt; url = 'http://example.com/some/cookie/setting/url'
&gt;&gt;&gt; r = requests.get(url)

&gt;&gt;&gt; r.cookies['example_cookie_name']
'example_cookie_value'
</code></pre>

<p>要想发送你的cookies到服务器，可以使用 cookies 参数:</p>

<pre><code class="language-python">&gt;&gt;&gt; url = 'http://httpbin.org/cookies'
&gt;&gt;&gt; cookies = dict(cookies_are='working')

&gt;&gt;&gt; r = requests.get(url, cookies=cookies)
&gt;&gt;&gt; r.text
'{&quot;cookies&quot;: {&quot;cookies_are&quot;: &quot;working&quot;}}'
</code></pre>

<hr />

<h2>重定向与请求历史</h2>

<hr />

<p>默认情况下，除了 HEAD, Requests会自动处理所有重定向。</p>

<p>可以使用响应对象的 history 方法来追踪重定向。</p>

<p><strong>Response.history</strong> 是一个:<em>class:Response&lt;requests.Response&gt;</em> 对象的列表，为了完成请求而创建了这些对象。这个对象列表按照从最老到最近的请求进行排序。</p>

<p>例如，Github将所有的HTTP请求重定向到HTTPS。:</p>

<pre><code class="language-pythn">&gt;&gt;&gt; r = requests.get('http://github.com')
&gt;&gt;&gt; r.url
'https://github.com/'
&gt;&gt;&gt; r.status_code
200
&gt;&gt;&gt; r.history
[&lt;Response [301]&gt;]
</code></pre>

<p>如果你使用的是GET, OPTIONS, POST, PUT, PATCH 或者 DELETE,，那么你可以通过 allow_redirects 参数禁用重定向处理:</p>

<pre><code class="language-python">&gt;&gt;&gt; r = requests.get('http://github.com', allow_redirects=False)
&gt;&gt;&gt; r.status_code
301
&gt;&gt;&gt; r.history
[]
</code></pre>

<p>如果你使用的是HEAD，你也可以启用重定向:</p>

<pre><code class="language-python">&gt;&gt;&gt; r = requests.head('http://github.com', allow_redirects=True)
&gt;&gt;&gt; r.url
'https://github.com/'
&gt;&gt;&gt; r.history
[&lt;Response [301]&gt;]
</code></pre>

<hr />

<h2>超时</h2>

<hr />

<p>你可以告诉requests在经过以 timeout 参数设定的秒数时间之后停止等待响应:</p>

<pre><code class="language-python">
&gt;&gt;&gt; requests.get('http://github.com', timeout=0.001)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
requests.exceptions.Timeout: HTTPConnectionPool(host='github.com', port=80): Request timed out. (timeout=0.001)
</code></pre>

<blockquote>
<p><strong>注::</strong>
timeout 仅对连接过程有效，与响应体的下载无关。timeout并不是整个下载响应的时间限制，而是如果服务器在<code>timeout</code>秒内没有应答，将会引发一个异常（更精确地说，是在<code>timeout</code>秒内没有从基础套接字上接收到任何字节的数据时）</p>
</blockquote>

<hr />

<h2>错误与异常</h2>

<hr />

<p>遇到网络问题（如：DNS查询失败、拒绝连接等）时，Requests会抛出一个 <strong>ConnectionError</strong> 异常。</p>

<p>遇到罕见的无效HTTP响应时，Requests则会抛出一个 <strong>HTTPError</strong> 异常。</p>

<p>若请求超时，则抛出一个 <strong>Timeout</strong> 异常。</p>

<p>若请求超过了设定的最大重定向次数，则会抛出一个 <strong>TooManyRedirects</strong> 异常。</p>

<p>所有Requests显式抛出的异常都继承自 <strong>requests.exceptions.RequestException</strong> 。</p>

                            </div>
                            <div style="display:block;" class="clearfix">
                                <section style="float:left;">
                                    <span itemprop="keywords" class="tags">
                                        tag(s): <a href="/tag/Python/index.html">Python </a>
                                    </span>
                                </section>
                                <section style="float:right;">
                                    <span><a id="btn-comments" href="javascript:isComments();">show comments</a></span> · <span><a href="javascript:goBack();">back</a></span> · 
                                    <span><a href="/">home</a></span>
                                </section>
                            </div>
                            






<noscript>为正常使用Disqus评论功能请激活JavaScript</noscript>
<div id="comments" class="gen">
    <script>
        
        document.write('<section id="disqus_thread"></section>');
        var site_comment_load = function disqus() {
            var d = document, s = d.createElement('script');
            s.src = '//Akkum4n.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        }
    </script>
</div>


                        </article>
                    </div>
                </div>
            </div>
        </div>
        <footer id="footer" role="contentinfo">
    <div class="container-fluid">
        <div class="row">
        <div class="col-12">
            &copy; 
            <script type="text/javascript">
                document.write(new Date().getFullYear());
            </script>
            <a href="/">Akkuman</a>.
            Using <a target="_blank" href="http://www.chole.io/">Ink</a> & <a target="_blank" href="/">Story</a>.
        </div>
        </div>
    </div>
</footer>

<script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="/bundle/js/prism.js"></script>
<script src="/bundle/js/zoom-vanilla.min.js"></script>
<script src="/bundle/js/main.js"></script>

<script>
    window.onload=function(){
        var b = document.getElementsByClassName('b');
        var w =  document.getElementsByClassName('w');
        var menupgMargin = (b.length+w.length)*28;
        var srhboxMargin = (b.length+w.length+3)*28;
        var menusrhWidth = (b.length+w.length-1)*28;
        document.getElementById('menu-page').style['margin-left'] = menupgMargin+'px';
        document.getElementById('search-box').style['margin-left'] = srhboxMargin+'px';
        document.getElementById('menu-search').style['width'] = menusrhWidth+'px';
        if (window.location.hash!='') {
          var i=window.location.hash.indexOf('#comment');
          var ii=window.location.hash.indexOf('#respond-post');
          if (i != '-1' || ii != '-1') {
            document.getElementById('btn-comments').innerText='hide comments';
            document.getElementById('comments').style.display='block';
          }
        }
    }

    function isMenu(){
        if(document.getElementById('menu-1').style.display=='inline'||document.getElementById('menu-1').style.display=='block'){
            $('#search-box').fadeOut(200);
            $('#menu-page').fadeOut(200);
            $('#menu-1').fadeOut(500);
            $('#menu-2').fadeOut(400);
            $('#menu-3').fadeOut(300);
        } else {
            $('#menu-1').fadeIn(150);
            $('#menu-2').fadeIn(150);
            $('#menu-3').fadeIn(150);
        }
    }

    function isMenu1(){
        if(document.getElementById('menu-page').style.display=='block'){
            $('#menu-page').fadeOut(300);
        } else {
            $('#menu-page').fadeIn(300);
        }
    }

    function isMenu2(){
        if(document.getElementById('torTree')){
            if(document.getElementById('torTree').style.display=='block'){
                $('#torTree').fadeOut(300);
            } else {
                $('#torTree').fadeIn(300);
            }
        }
    }

    function isMenu3(){
        if($('#search-box').css('display')!='none'){
            $('#search-box').fadeOut(300);
        } else {
            $('#search-box').fadeIn(300);
        }
    }

    function isComments(){
        if(document.getElementById('btn-comments').innerText=='show comments'){
            document.getElementById('btn-comments').innerText='hide comments';
            document.getElementById('comments').style.display='block';
            site_comment_load();
        } else {
            document.getElementById('btn-comments').innerText='show comments';
            document.getElementById('comments').style.display='none';
        }
    }

    function Search404(){
        $('#menu-1').fadeIn(150);
        $('#menu-2').fadeIn(150);
        $('#menu-3').fadeIn(150);
        $('#search-box').fadeIn(300);
    }

    function goBack(){
        window.history.back();
    }
</script>


<script async>
"use strict";
(function(){
var cp = function(){
    var len = cPlayerOptions.length;
    for(var i=0;i<len;i++){
        var element = document.getElementById('player' + cPlayerOptions[i]['id'])
        while (element.hasChildNodes()) {
            element.removeChild(element.firstChild);
        };
        cPlayers[i] = new cPlayer({
            element: element,
            list: cPlayerOptions[i]['list'],
            });
    };
    cPlayers = [];cPlayerOptions = [];
};
var script = document.createElement('script');
script.type = "text/javascript";
script.src = "https://cdn.bootcss.com/cplayer/3.2.1/cplayer.js";
script.async = true;
if(script.readyState){  
    script.onreadystatechange = function(){
        if (script.readyState == "loaded" ||
            script.readyState == "complete"){
            script.onreadystatechange = null;
            cp();
        }
    };
}else{  
    script.onload = function(){
        cp();
    };
}
document.head.appendChild(script);
})();
</script>

    </body>
</html>
