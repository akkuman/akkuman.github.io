<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Win32汇编学习(9)：窗口控件 | Akkuman 的技术博客</title><meta name=keywords content="笔记,逆向"><meta name=description content="这次我们将探讨控件，这些控件是我们程序主要的输入输出设备。"><meta name=author content><link rel=canonical href=https://www.hacktech.cn/post/2018/02/win32-asm-study-9/><link crossorigin=anonymous href=https://cdn.jsdmirror.com/gh/akkuman/akkuman.github.io@master/assets/css/stylesheet.2824803599022172c5df03c979b2556dc526917d1f5a5d792793d0907875bfd9.css integrity="sha256-KCSANZkCIXLF3wPJebJVbcUmkX0fWl15J5PQkHh1v9k=" rel="preload stylesheet" as=style><link rel=icon href=https://www.hacktech.cn/images/avatar.webp><link rel=icon type=image/png sizes=16x16 href=https://www.hacktech.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.hacktech.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://www.hacktech.cn/apple-touch-icon.png><link rel=mask-icon href=https://www.hacktech.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://www.hacktech.cn/post/2018/02/win32-asm-study-9/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC&family=Source+Code+Pro&display=swap" rel=stylesheet><script async src=https://cn.vercount.one/js></script><meta property="og:url" content="https://www.hacktech.cn/post/2018/02/win32-asm-study-9/"><meta property="og:site_name" content="Akkuman 的技术博客"><meta property="og:title" content="Win32汇编学习(9)：窗口控件"><meta property="og:description" content="这次我们将探讨控件，这些控件是我们程序主要的输入输出设备。"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-02-12T22:49:00+00:00"><meta property="article:modified_time" content="2018-02-12T22:49:00+00:00"><meta property="article:tag" content="笔记"><meta property="article:tag" content="逆向"><meta name=twitter:card content="summary"><meta name=twitter:title content="Win32汇编学习(9)：窗口控件"><meta name=twitter:description content="这次我们将探讨控件，这些控件是我们程序主要的输入输出设备。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.hacktech.cn/post/"},{"@type":"ListItem","position":3,"name":"Win32汇编学习(9)：窗口控件","item":"https://www.hacktech.cn/post/2018/02/win32-asm-study-9/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Win32汇编学习(9)：窗口控件","name":"Win32汇编学习(9)：窗口控件","description":"这次我们将探讨控件，这些控件是我们程序主要的输入输出设备。\n","keywords":["笔记","逆向"],"articleBody":"这次我们将探讨控件，这些控件是我们程序主要的输入输出设备。\n理论： WINDOWS 提供了几个预定义的窗口类以方便我们的使用。大多数时间内，我们把它们用在对话框中，所以我们一般就它们叫做子窗口控件。子窗口控件会自己处理消息，并在自己状态发生改变时通知父窗口。这样就大大地减轻了我们的编程工作，所以我们应尽可能地利用它们。本课中我们把这些控件放在窗口中以简化程序，但是大多数时间内子窗口控件都是放在对话框中的。我们示例中演示的子窗口控件包括：按钮、下拉菜单、检查框、单选按钮、编辑框等。使用子窗口控件时，先调用CreateWindow 或 CreateWindowEx。在这里由于WINDOWS 已经注册了这些子控件，所以无须我们再注册。当然我们不能改变它们的类名称。譬如：如果您想产生一个按钮，在调用上述两个函数时就必须指定类名为\"button\"。其他必须指定的参数还有父窗口的句柄和将要产生的子控件的ID号。子控件的ID号是用来标识子控件的，故也必须是唯一 的。子控件产生后，当其状态改变时将会向父窗口发送消息。一般我们应在父窗口的WM_CREATE消息中产生子控件。子控件向父窗口发送的消息是WM_COMMAND，并在传递的参数wPara的低位中包括控件的ID号，消息号在wParam的高位，lParam中则包括了子控件的窗口的句柄。各类控件有不同的消息代码集，详情请参见WIN32 API参考手册。父窗口也可以通过调用函数SendMessage向子控件发送消息，其中第一个参数是子控件的窗口句柄，第二个参数是要发送的消息号，附加的参数可以在wParam和lParam中传递，其实只要知道了某个窗口的句柄就可以用该函数向其发送相关消息。所以产生了子窗口后必须处理WM_COMMAND消息以便可以接收到子控件的消息。\n例子： 我们将写一个窗口，在该窗口中有一个编辑框和一个按钮。当您按下按钮时 ，会弹出一个对话框其中显示了您在编辑框中输入的内容。另外，该应用程序还有一个菜单，其中有四个菜单项：\nSay Hello – 把一个字符串输入编辑控件； Clear Edit Box – 清除编辑控件中的字符串； Get Text – 弹出对话框显示编辑控件中的字符串； Exit – 退出应用程序。 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 .386 .model flat,stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include \\masm32\\include\\windows.inc include \\masm32\\include\\user32.inc include \\masm32\\include\\kernel32.inc includelib \\masm32\\lib\\user32.lib includelib \\masm32\\lib\\kernel32.lib .data ClassName db \"SimpleWinClass\",0 AppName db \"Our First Window\",0 MenuName db \"FirstMenu\",0 ButtonClassName db \"button\",0 ButtonText db \"My First Button\",0 EditClassName db \"edit\",0 TestString db \"Wow! I'm in an edit box now\",0 .data? hInstance HINSTANCE ? CommandLine LPSTR ? hwndButton HWND ? hwndEdit HWND ? buffer db 512 dup(?) ; buffer to store the text retrieved from the edit box .const ButtonID equ 1 ; The control ID of the button control EditID equ 2 ; The control ID of the edit control IDM_HELLO equ 1 IDM_CLEAR equ 2 IDM_GETTEXT equ 3 IDM_EXIT equ 4 .code start: invoke GetModuleHandle, NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style, CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc, OFFSET WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_BTNFACE+1 mov wc.lpszMenuName,OFFSET MenuName mov wc.lpszClassName,OFFSET ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx, addr wc invoke CreateWindowEx,WS_EX_CLIENTEDGE,ADDR ClassName, \\ ADDR AppName, WS_OVERLAPPEDWINDOW,\\ CW_USEDEFAULT, CW_USEDEFAULT,\\ 300,200,NULL,NULL, hInst,NULL mov hwnd,eax invoke ShowWindow, hwnd,SW_SHOWNORMAL invoke UpdateWindow, hwnd .WHILE TRUE invoke GetMessage, ADDR msg,NULL,0,0 .BREAK .IF (!eax) invoke TranslateMessage, ADDR msg invoke DispatchMessage, ADDR msg .ENDW mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM .IF uMsg==WM_DESTROY invoke PostQuitMessage,NULL .ELSEIF uMsg==WM_CREATE invoke CreateWindowEx,WS_EX_CLIENTEDGE, ADDR EditClassName,NULL,\\ WS_CHILD or WS_VISIBLE or WS_BORDER or ES_LEFT or\\ ES_AUTOHSCROLL,\\ 50,35,200,25,hWnd,8,hInstance,NULL mov hwndEdit,eax invoke SetFocus, hwndEdit invoke CreateWindowEx,NULL, ADDR ButtonClassName,ADDR ButtonText,\\ WS_CHILD or WS_VISIBLE or BS_DEFPUSHBUTTON,\\ 75,70,140,25,hWnd,ButtonID,hInstance,NULL mov hwndButton,eax .ELSEIF uMsg==WM_COMMAND mov eax,wParam .IF lParam==0 .IF ax==IDM_HELLO invoke SetWindowText,hwndEdit,ADDR TestString .ELSEIF ax==IDM_CLEAR invoke SetWindowText,hwndEdit,NULL .ELSEIF ax==IDM_GETTEXT invoke GetWindowText,hwndEdit,ADDR buffer,512 invoke MessageBox,NULL,ADDR buffer,ADDR AppName,MB_OK .ELSE invoke DestroyWindow,hWnd .ENDIF .ELSE .IF ax==ButtonID shr eax,16 .IF ax==BN_CLICKED invoke SendMessage,hWnd,WM_COMMAND,IDM_GETTEXT,0 .ENDIF .ENDIF .ENDIF .ELSE invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .ENDIF xor eax,eax ret WndProc endp end start menu.rc\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #define IDM_HELLO 1 #define IDM_CLEAR 2 #define IDM_GETTEXT 3 #define IDM_EXIT 4 SecondMenu MENU { POPUP \"\u0026PopUp\" { MENUITEM \"\u0026Say Hello\",IDM_HELLO MENUITEM \"\u0026Clear\", IDM_CLEAR MENUITEM SEPARATOR MENUITEM \"E\u0026xit\",IDM_EXIT } MENUITEM \"\u0026Text\",IDM_GETTEXT } 分析： 我们现在开始分析，\n1 2 3 4 5 6 7 8 9 10 11 12 13 .ELSEIF uMsg==WM_CREATE invoke CreateWindowEx,WS_EX_CLIENTEDGE, \\ ADDR EditClassName,NULL,\\ WS_CHILD or WS_VISIBLE or WS_BORDER or ES_LEFT\\ or ES_AUTOHSCROLL,\\ 50,35,200,25,hWnd,EditID,hInstance,NULL mov hwndEdit,eax invoke SetFocus, hwndEdit invoke CreateWindowEx,NULL, ADDR ButtonClassName,\\ ADDR ButtonText,\\ WS_CHILD or WS_VISIBLE or BS_DEFPUSHBUTTON,\\ 75,70,140,25,hWnd,ButtonID,hInstance,NULL mov hwndButton,eax 我们在WM_CREATE中产生子控件，其中在函数CreateWindowEx中给子控件窗口一个WS_EX_CLIENTEDGE风格，它使得子控件窗口看上去边界下凹，具有立体感。每一个子控件的类名都是预定义的，譬如：按钮的预定义类名是\"button\"，编辑框是\"edit\"。接下来的参数是窗口风格，除了通常的窗口风格外，每一个控件都有自己的扩展风格，譬如：按钮类的扩展风格前面加有BS_，编辑框类则是：ES_，WIN32 API 参考中有所有的扩展风格的描述。注意：您在CreateWindowsEx函数中本来要传递菜单句柄的地方传入子窗口空间的ID号不会有什么副作用，因为子窗口控件本身不能有菜单。产生控件后，我们保存它们的句柄，然后调用SetFocus把焦点设到编辑控件上以便用户立即可以输入。接下来的是如何处理控件发送的通知消息WM_COMMAND：\n1 2 3 .ELSEIF uMsg==WM_COMMAND mov eax,wParam .IF lParam==0 我们以前讲过选择菜单项也会发送WM_COMMAND消息，那我们应如何区分呢？看了下表您就会一目了然：\n1 2 3 4 5 6 7 /---------+--------------------+--------------------+---------------------\\ | | Low word of wParam |High word of wParam | lParam | +---------+--------------------+--------------------+---------------------+ | Menu | Menu ID | 0 | 0 | +---------+ -------------------+--------------------+---------------------+ | Control | Control ID | Notification code | Child Window Handle | \\---------+--------------------+--------------------+---------------------/ 其中我们可以看到不能用wParam来区分，因为菜单和控件的ID号可能相同，而且子窗口空间的消息号也有可能为0。\n1 2 3 4 5 6 7 .IF ax==IDM_HELLO invoke SetWindowText,hwndEdit,ADDR TestString .ELSEIF ax==IDM_CLEAR invoke SetWindowText,hwndEdit,NULL .ELSEIF ax==IDM_GETTEXT invoke GetWindowText,hwndEdit,ADDR buffer,512 invoke MessageBox,NULL,ADDR buffer,ADDR AppName,MB_OK 您可以调用SetWindowText函数把一字符串复制到编辑控件中去，为了清空，传入NULL值。SetWindowText是一个通用函数，即可以用它来设定一个窗口的标题，也可以用它来改变一个按钮上的文字。如果是要得到按钮上的文字，则调用GetWindowText。\n1 2 3 4 5 6 .IF ax==ButtonID shr eax,16 .IF ax==BN_CLICKED invoke SendMessage,hWnd,WM_COMMAND,IDM_GETTEXT,0 .ENDIF .ENDIF 上面的片段是处理用户按钮事件的。他首先检查wParam的高字节看是否是按钮的ID 号，若是则检查低字节看发送的消息号是否BN_CLICKED，该消息是在按钮按下时发送的，如果一切都对，则转入处理该消息，我们可以从处理消息IDM_GETTEXT处复制全部的代码，但是更专业的办法是在发送一条IDM_GETTEXT消息让主窗口过程处理，这只要把传送的消息设置为WM_COMMAND，再把wParam的低字节中设置为IDM_GETTEXT即可。这样一来您的代码就简洁了许多，所以尽可能利用该技巧。最后，当然不是或有或无，必须在消息循环中调用函数TranslateMessage，因为您的应用程序需要在编辑框中输入可读的文字。如果省略了该函数，就不能在编辑框中输入任何东西。\n","wordCount":"677","inLanguage":"zh","datePublished":"2018-02-12T22:49:00Z","dateModified":"2018-02-12T22:49:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.hacktech.cn/post/2018/02/win32-asm-study-9/"},"publisher":{"@type":"Organization","name":"Akkuman 的技术博客","logo":{"@type":"ImageObject","url":"https://www.hacktech.cn/images/avatar.webp"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.hacktech.cn/ accesskey=h title="Akkuman 的技术博客 (Alt + H)">Akkuman 的技术博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.hacktech.cn/archives/ title=归档><span>归档</span></a></li><li><a href=https://www.hacktech.cn/categories/ title=分类><span>分类</span></a></li><li><a href=https://www.hacktech.cn/search/ title=搜索><span>搜索</span></a></li><li><a href=https://www.hacktech.cn/tags/ title=标签><span>标签</span></a></li><li><a href=https://www.hacktech.cn/links/ title=友情链接><span>友情链接</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.hacktech.cn/>主页</a>&nbsp;»&nbsp;<a href=https://www.hacktech.cn/post/>Posts</a></div><h1 class="post-title entry-hint-parent">Win32汇编学习(9)：窗口控件</h1><div class=post-meta><span title='2018-02-12 22:49:00 +0000 UTC'>二月 12, 2018</span>&nbsp;·&nbsp;4 分钟&nbsp;|&nbsp;<a href="mailto://akkumans@qq.com?subject=Suggesting%20changes%20for%20/post/win32-asm-study-9.md" rel="noopener noreferrer edit" target=_blank>给我邮件</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#理论>理论：</a></li><li><a href=#例子>例子：</a></li><li><a href=#分析>分析：</a></li></ul></nav></div></details></div><div class=post-content><p>这次我们将探讨控件，这些控件是我们程序主要的输入输出设备。</p><h2 id=理论>理论：<a hidden class=anchor aria-hidden=true href=#理论>#</a></h2><p>WINDOWS 提供了几个预定义的窗口类以方便我们的使用。大多数时间内，我们把它们用在对话框中，所以我们一般就它们叫做子窗口控件。子窗口控件会自己处理消息，并在自己状态发生改变时通知父窗口。这样就大大地减轻了我们的编程工作，所以我们应尽可能地利用它们。本课中我们把这些控件放在窗口中以简化程序，但是大多数时间内子窗口控件都是放在对话框中的。我们示例中演示的子窗口控件包括：按钮、下拉菜单、检查框、单选按钮、编辑框等。使用子窗口控件时，先调用<code>CreateWindow</code> 或 <code>CreateWindowEx</code>。在这里由于WINDOWS 已经注册了这些子控件，所以无须我们再注册。当然我们不能改变它们的类名称。譬如：如果您想产生一个按钮，在调用上述两个函数时就必须指定类名为"button"。其他必须指定的参数还有父窗口的句柄和将要产生的子控件的ID号。子控件的ID号是用来标识子控件的，故也必须是唯一 的。<strong>子控件产生后，当其状态改变时将会向父窗口发送消息</strong>。一般我们应在父窗口的<code>WM_CREATE</code>消息中产生子控件。<strong>子控件向父窗口发送的消息是<code>WM_COMMAND</code>，并在传递的参数<code>wPara</code>的低位中包括控件的ID号，消息号在<code>wParam</code>的高位，<code>lParam</code>中则包括了子控件的窗口的句柄</strong>。各类控件有不同的消息代码集，详情请参见WIN32 API参考手册。<strong>父窗口也可以通过调用函数<code>SendMessage</code>向子控件发送消息，其中第一个参数是子控件的窗口句柄，第二个参数是要发送的消息号，附加的参数可以在wParam和lParam中传递</strong>，其实只要知道了某个窗口的句柄就可以用该函数向其发送相关消息。所以产生了子窗口后必须处理<code>WM_COMMAND</code>消息以便可以接收到子控件的消息。</p><h2 id=例子>例子：<a hidden class=anchor aria-hidden=true href=#例子>#</a></h2><p>我们将写一个窗口，在该窗口中有一个编辑框和一个按钮。当您按下按钮时 ，会弹出一个对话框其中显示了您在编辑框中输入的内容。另外，该应用程序还有一个菜单，其中有四个菜单项：</p><ol><li><code>Say Hello</code> &ndash; 把一个字符串输入编辑控件；</li><li><code>Clear Edit Box</code> &ndash; 清除编辑控件中的字符串；</li><li><code>Get Text</code> &ndash; 弹出对话框显示编辑控件中的字符串；</li><li><code>Exit</code> &ndash; 退出应用程序。</li></ol><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-gdscript3 data-lang=gdscript3><span style=display:flex><span><span style=color:#f92672>.</span><span style=color:#ae81ff>386</span> 
</span></span><span style=display:flex><span><span style=color:#f92672>.</span>model flat,stdcall 
</span></span><span style=display:flex><span>option casemap:none 
</span></span><span style=display:flex><span>WinMain proto :DWORD,:DWORD,:DWORD,:DWORD 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>include \masm32\include\windows<span style=color:#f92672>.</span>inc 
</span></span><span style=display:flex><span>include \masm32\include\user32<span style=color:#f92672>.</span>inc 
</span></span><span style=display:flex><span>include \masm32\include\kernel32<span style=color:#f92672>.</span>inc 
</span></span><span style=display:flex><span>includelib \masm32\lib\user32<span style=color:#f92672>.</span>lib 
</span></span><span style=display:flex><span>includelib \masm32\lib\kernel32<span style=color:#f92672>.</span>lib 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>.</span>data 
</span></span><span style=display:flex><span>ClassName db <span style=color:#e6db74>&#34;SimpleWinClass&#34;</span>,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>AppName  db <span style=color:#e6db74>&#34;Our First Window&#34;</span>,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>MenuName db <span style=color:#e6db74>&#34;FirstMenu&#34;</span>,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>ButtonClassName db <span style=color:#e6db74>&#34;button&#34;</span>,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>ButtonText db <span style=color:#e6db74>&#34;My First Button&#34;</span>,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>EditClassName db <span style=color:#e6db74>&#34;edit&#34;</span>,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>TestString db <span style=color:#e6db74>&#34;Wow! I&#39;m in an edit box now&#34;</span>,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>.</span>data<span style=color:#960050;background-color:#1e0010>?</span> 
</span></span><span style=display:flex><span>hInstance HINSTANCE <span style=color:#960050;background-color:#1e0010>?</span> 
</span></span><span style=display:flex><span>CommandLine LPSTR <span style=color:#960050;background-color:#1e0010>?</span> 
</span></span><span style=display:flex><span>hwndButton HWND <span style=color:#960050;background-color:#1e0010>?</span> 
</span></span><span style=display:flex><span>hwndEdit HWND <span style=color:#960050;background-color:#1e0010>?</span> 
</span></span><span style=display:flex><span>buffer db <span style=color:#ae81ff>512</span> dup(<span style=color:#960050;background-color:#1e0010>?</span>)                    ; buffer to store the text retrieved from the edit box 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>.</span><span style=color:#66d9ef>const</span> 
</span></span><span style=display:flex><span>ButtonID equ <span style=color:#ae81ff>1</span>                                ; The control ID of the button control 
</span></span><span style=display:flex><span>EditID equ <span style=color:#ae81ff>2</span>                                    ; The control ID of the edit control 
</span></span><span style=display:flex><span>IDM_HELLO equ <span style=color:#ae81ff>1</span> 
</span></span><span style=display:flex><span>IDM_CLEAR equ <span style=color:#ae81ff>2</span> 
</span></span><span style=display:flex><span>IDM_GETTEXT equ <span style=color:#ae81ff>3</span> 
</span></span><span style=display:flex><span>IDM_EXIT equ <span style=color:#ae81ff>4</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>.</span>code 
</span></span><span style=display:flex><span>start: 
</span></span><span style=display:flex><span>    invoke GetModuleHandle, NULL 
</span></span><span style=display:flex><span>    mov    hInstance,eax 
</span></span><span style=display:flex><span>    invoke GetCommandLine
</span></span><span style=display:flex><span>    mov CommandLine,eax 
</span></span><span style=display:flex><span>    invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT 
</span></span><span style=display:flex><span>    invoke ExitProcess,eax 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD 
</span></span><span style=display:flex><span>    LOCAL wc:WNDCLASSEX 
</span></span><span style=display:flex><span>    LOCAL msg:MSG 
</span></span><span style=display:flex><span>    LOCAL hwnd:HWND 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>cbSize,SIZEOF WNDCLASSEX 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>style, CS_HREDRAW <span style=color:#f92672>or</span> CS_VREDRAW 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>lpfnWndProc, OFFSET WndProc 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>cbClsExtra,NULL 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>cbWndExtra,NULL 
</span></span><span style=display:flex><span>    push  hInst 
</span></span><span style=display:flex><span>    pop   wc<span style=color:#f92672>.</span>hInstance 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>hbrBackground,COLOR_BTNFACE<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span> 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>lpszMenuName,OFFSET MenuName 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>lpszClassName,OFFSET ClassName 
</span></span><span style=display:flex><span>    invoke LoadIcon,NULL,IDI_APPLICATION 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>hIcon,eax 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>hIconSm,eax 
</span></span><span style=display:flex><span>    invoke LoadCursor,NULL,IDC_ARROW 
</span></span><span style=display:flex><span>    mov   wc<span style=color:#f92672>.</span>hCursor,eax 
</span></span><span style=display:flex><span>    invoke RegisterClassEx, addr wc 
</span></span><span style=display:flex><span>    invoke CreateWindowEx,WS_EX_CLIENTEDGE,ADDR ClassName, \ 
</span></span><span style=display:flex><span>                        ADDR AppName, WS_OVERLAPPEDWINDOW,\ 
</span></span><span style=display:flex><span>                        CW_USEDEFAULT, CW_USEDEFAULT,\ 
</span></span><span style=display:flex><span>                        <span style=color:#ae81ff>300</span>,<span style=color:#ae81ff>200</span>,NULL,NULL, hInst,NULL 
</span></span><span style=display:flex><span>    mov   hwnd,eax 
</span></span><span style=display:flex><span>    invoke ShowWindow, hwnd,SW_SHOWNORMAL 
</span></span><span style=display:flex><span>    invoke UpdateWindow, hwnd 
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>WHILE TRUE 
</span></span><span style=display:flex><span>        invoke GetMessage, ADDR msg,NULL,<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>        <span style=color:#f92672>.</span>BREAK <span style=color:#f92672>.</span>IF (<span style=color:#f92672>!</span>eax) 
</span></span><span style=display:flex><span>        invoke TranslateMessage, ADDR msg 
</span></span><span style=display:flex><span>        invoke DispatchMessage, ADDR msg 
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>ENDW 
</span></span><span style=display:flex><span>    mov     eax,msg<span style=color:#f92672>.</span>wParam 
</span></span><span style=display:flex><span>    ret 
</span></span><span style=display:flex><span>WinMain endp 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM 
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>IF uMsg<span style=color:#f92672>==</span>WM_DESTROY 
</span></span><span style=display:flex><span>        invoke PostQuitMessage,NULL 
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>ELSEIF uMsg<span style=color:#f92672>==</span>WM_CREATE 
</span></span><span style=display:flex><span>        invoke CreateWindowEx,WS_EX_CLIENTEDGE, ADDR EditClassName,NULL,\ 
</span></span><span style=display:flex><span>                        WS_CHILD <span style=color:#f92672>or</span> WS_VISIBLE <span style=color:#f92672>or</span> WS_BORDER <span style=color:#f92672>or</span> ES_LEFT <span style=color:#f92672>or</span>\ 
</span></span><span style=display:flex><span>                        ES_AUTOHSCROLL,\ 
</span></span><span style=display:flex><span>                        <span style=color:#ae81ff>50</span>,<span style=color:#ae81ff>35</span>,<span style=color:#ae81ff>200</span>,<span style=color:#ae81ff>25</span>,hWnd,<span style=color:#ae81ff>8</span>,hInstance,NULL 
</span></span><span style=display:flex><span>        mov  hwndEdit,eax 
</span></span><span style=display:flex><span>        invoke SetFocus, hwndEdit 
</span></span><span style=display:flex><span>        invoke CreateWindowEx,NULL, ADDR ButtonClassName,ADDR ButtonText,\ 
</span></span><span style=display:flex><span>                        WS_CHILD <span style=color:#f92672>or</span> WS_VISIBLE <span style=color:#f92672>or</span> BS_DEFPUSHBUTTON,\ 
</span></span><span style=display:flex><span>                        <span style=color:#ae81ff>75</span>,<span style=color:#ae81ff>70</span>,<span style=color:#ae81ff>140</span>,<span style=color:#ae81ff>25</span>,hWnd,ButtonID,hInstance,NULL 
</span></span><span style=display:flex><span>        mov  hwndButton,eax 
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>ELSEIF uMsg<span style=color:#f92672>==</span>WM_COMMAND 
</span></span><span style=display:flex><span>        mov eax,wParam 
</span></span><span style=display:flex><span>        <span style=color:#f92672>.</span>IF lParam<span style=color:#f92672>==</span><span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>IF ax<span style=color:#f92672>==</span>IDM_HELLO 
</span></span><span style=display:flex><span>                invoke SetWindowText,hwndEdit,ADDR TestString 
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>ELSEIF ax<span style=color:#f92672>==</span>IDM_CLEAR 
</span></span><span style=display:flex><span>                invoke SetWindowText,hwndEdit,NULL 
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>ELSEIF  ax<span style=color:#f92672>==</span>IDM_GETTEXT 
</span></span><span style=display:flex><span>                invoke GetWindowText,hwndEdit,ADDR buffer,<span style=color:#ae81ff>512</span> 
</span></span><span style=display:flex><span>                invoke MessageBox,NULL,ADDR buffer,ADDR AppName,MB_OK 
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>ELSE 
</span></span><span style=display:flex><span>                invoke DestroyWindow,hWnd 
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>ENDIF 
</span></span><span style=display:flex><span>        <span style=color:#f92672>.</span>ELSE 
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>IF ax<span style=color:#f92672>==</span>ButtonID 
</span></span><span style=display:flex><span>                shr eax,<span style=color:#ae81ff>16</span> 
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span>IF ax<span style=color:#f92672>==</span>BN_CLICKED 
</span></span><span style=display:flex><span>                    invoke SendMessage,hWnd,WM_COMMAND,IDM_GETTEXT,<span style=color:#ae81ff>0</span> 
</span></span><span style=display:flex><span>                <span style=color:#f92672>.</span>ENDIF 
</span></span><span style=display:flex><span>            <span style=color:#f92672>.</span>ENDIF 
</span></span><span style=display:flex><span>        <span style=color:#f92672>.</span>ENDIF 
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>ELSE 
</span></span><span style=display:flex><span>        invoke DefWindowProc,hWnd,uMsg,wParam,lParam 
</span></span><span style=display:flex><span>        ret 
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>ENDIF 
</span></span><span style=display:flex><span>     xor    eax,eax 
</span></span><span style=display:flex><span>    ret 
</span></span><span style=display:flex><span>WndProc endp 
</span></span><span style=display:flex><span>end start 
</span></span></code></pre></td></tr></table></div></div><p>menu.rc</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>#define IDM_HELLO 1
</span></span><span style=display:flex><span>#define IDM_CLEAR 2
</span></span><span style=display:flex><span>#define IDM_GETTEXT 3
</span></span><span style=display:flex><span>#define IDM_EXIT 4
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SecondMenu MENU
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>POPUP &#34;&amp;PopUp&#34;
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>	MENUITEM &#34;&amp;Say Hello&#34;,IDM_HELLO
</span></span><span style=display:flex><span>    MENUITEM &#34;&amp;Clear&#34;, IDM_CLEAR
</span></span><span style=display:flex><span>    MENUITEM SEPARATOR
</span></span><span style=display:flex><span>    MENUITEM &#34;E&amp;xit&#34;,IDM_EXIT
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>MENUITEM &#34;&amp;Text&#34;,IDM_GETTEXT
</span></span><span style=display:flex><span>}
</span></span></code></pre></td></tr></table></div></div><h2 id=分析>分析：<a hidden class=anchor aria-hidden=true href=#分析>#</a></h2><p>我们现在开始分析，</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>    .ELSEIF uMsg==WM_CREATE 
</span></span><span style=display:flex><span>        invoke CreateWindowEx,WS_EX_CLIENTEDGE, \ 
</span></span><span style=display:flex><span>                        ADDR EditClassName,NULL,\ 
</span></span><span style=display:flex><span>                        WS_CHILD or WS_VISIBLE or WS_BORDER or ES_LEFT\ 
</span></span><span style=display:flex><span>                        or ES_AUTOHSCROLL,\ 
</span></span><span style=display:flex><span>                        50,35,200,25,hWnd,EditID,hInstance,NULL 
</span></span><span style=display:flex><span>        mov  hwndEdit,eax 
</span></span><span style=display:flex><span>        invoke SetFocus, hwndEdit 
</span></span><span style=display:flex><span>        invoke CreateWindowEx,NULL, ADDR ButtonClassName,\ 
</span></span><span style=display:flex><span>                        ADDR ButtonText,\ 
</span></span><span style=display:flex><span>                        WS_CHILD or WS_VISIBLE or BS_DEFPUSHBUTTON,\ 
</span></span><span style=display:flex><span>                        75,70,140,25,hWnd,ButtonID,hInstance,NULL 
</span></span><span style=display:flex><span>        mov  hwndButton,eax 
</span></span></code></pre></td></tr></table></div></div><p>我们在<code>WM_CREATE</code>中产生子控件，其中在函数<code>CreateWindowEx</code>中给子控件窗口一个<code>WS_EX_CLIENTEDGE</code>风格，它使得子控件窗口看上去边界下凹，具有立体感。每一个子控件的类名都是预定义的，譬如：按钮的预定义类名是"button"，编辑框是"edit"。接下来的参数是窗口风格，除了通常的窗口风格外，每一个控件都有自己的扩展风格，譬如：按钮类的扩展风格前面加有<code>BS_</code>，编辑框类则是：<code>ES_</code>，WIN32 API 参考中有所有的扩展风格的描述。注意：您在<code>CreateWindowsEx</code>函数中本来要传递菜单句柄的地方传入子窗口空间的ID号不会有什么副作用，因为子窗口控件本身不能有菜单。产生控件后，我们保存它们的句柄，然后调用<code>SetFocus</code>把焦点设到编辑控件上以便用户立即可以输入。接下来的是如何处理控件发送的通知消息<code>WM_COMMAND</code>：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>    .ELSEIF uMsg==WM_COMMAND 
</span></span><span style=display:flex><span>        mov eax,wParam 
</span></span><span style=display:flex><span>        .IF lParam==0 
</span></span></code></pre></td></tr></table></div></div><p>我们以前讲过选择菜单项也会发送<code>WM_COMMAND</code>消息，那我们应如何区分呢？看了下表您就会一目了然：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/---------+--------------------+--------------------+---------------------\
</span></span><span style=display:flex><span>|         | Low word of wParam |High word of wParam |        lParam       |
</span></span><span style=display:flex><span>+---------+--------------------+--------------------+---------------------+
</span></span><span style=display:flex><span>|  Menu   |       Menu ID      |          0         |          0          |
</span></span><span style=display:flex><span>+---------+ -------------------+--------------------+---------------------+
</span></span><span style=display:flex><span>| Control |     Control ID     |  Notification code | Child Window Handle |
</span></span><span style=display:flex><span>\---------+--------------------+--------------------+---------------------/
</span></span></code></pre></td></tr></table></div></div><p>其中我们可以看到不能用<code>wParam</code>来区分，因为菜单和控件的ID号可能相同，而且子窗口空间的消息号也有可能为0。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>            .IF ax==IDM_HELLO 
</span></span><span style=display:flex><span>                invoke SetWindowText,hwndEdit,ADDR TestString 
</span></span><span style=display:flex><span>            .ELSEIF ax==IDM_CLEAR 
</span></span><span style=display:flex><span>                invoke SetWindowText,hwndEdit,NULL 
</span></span><span style=display:flex><span>            .ELSEIF  ax==IDM_GETTEXT 
</span></span><span style=display:flex><span>                invoke GetWindowText,hwndEdit,ADDR buffer,512 
</span></span><span style=display:flex><span>                invoke MessageBox,NULL,ADDR buffer,ADDR AppName,MB_OK 
</span></span></code></pre></td></tr></table></div></div><p>您可以调用<code>SetWindowText</code>函数把一字符串复制到编辑控件中去，为了清空，传入NULL值。<code>SetWindowText</code>是一个通用函数，即可以用它来设定一个窗口的标题，也可以用它来改变一个按钮上的文字。如果是要得到按钮上的文字，则调用<code>GetWindowText</code>。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>            .IF ax==ButtonID 
</span></span><span style=display:flex><span>                shr eax,16 
</span></span><span style=display:flex><span>                .IF ax==BN_CLICKED 
</span></span><span style=display:flex><span>                    invoke SendMessage,hWnd,WM_COMMAND,IDM_GETTEXT,0 
</span></span><span style=display:flex><span>                .ENDIF 
</span></span><span style=display:flex><span>            .ENDIF 
</span></span></code></pre></td></tr></table></div></div><p>上面的片段是处理用户按钮事件的。他首先检查wParam的高字节看是否是按钮的ID 号，若是则检查低字节看发送的消息号是否BN_CLICKED，该消息是在按钮按下时发送的，如果一切都对，则转入处理该消息，我们可以从处理消息<code>IDM_GETTEXT</code>处复制全部的代码，但是更专业的办法是在发送一条<code>IDM_GETTEXT</code>消息让主窗口过程处理，这只要把传送的消息设置为<code>WM_COMMAND</code>，再把<code>wParam</code>的低字节中设置为<code>IDM_GETTEXT</code>即可。这样一来您的代码就简洁了许多，所以尽可能利用该技巧。最后，当然不是或有或无，必须在消息循环中调用函数<code>TranslateMessage</code>，因为您的应用程序需要在编辑框中输入可读的文字。如果省略了该函数，就不能在编辑框中输入任何东西。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.hacktech.cn/tags/%E7%AC%94%E8%AE%B0/>笔记</a></li><li><a href=https://www.hacktech.cn/tags/%E9%80%86%E5%90%91/>逆向</a></li></ul><nav class=paginav><a class=prev href=https://www.hacktech.cn/post/2018/02/win32-asm-study-10/><span class=title>« 上一页</span><br><span>Win32汇编学习(10)：对话框(1)</span>
</a><a class=next href=https://www.hacktech.cn/post/2018/02/win32-asm-study-8/><span class=title>下一页 »</span><br><span>Win32汇编学习(8)：菜单</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Win32汇编学习(9)：窗口控件 on x" href="https://x.com/intent/tweet/?text=Win32%e6%b1%87%e7%bc%96%e5%ad%a6%e4%b9%a0%289%29%ef%bc%9a%e7%aa%97%e5%8f%a3%e6%8e%a7%e4%bb%b6&amp;url=https%3a%2f%2fwww.hacktech.cn%2fpost%2f2018%2f02%2fwin32-asm-study-9%2f&amp;hashtags=%e7%ac%94%e8%ae%b0%2c%e9%80%86%e5%90%91"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Win32汇编学习(9)：窗口控件 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.hacktech.cn%2fpost%2f2018%2f02%2fwin32-asm-study-9%2f&amp;title=Win32%e6%b1%87%e7%bc%96%e5%ad%a6%e4%b9%a0%289%29%ef%bc%9a%e7%aa%97%e5%8f%a3%e6%8e%a7%e4%bb%b6&amp;summary=Win32%e6%b1%87%e7%bc%96%e5%ad%a6%e4%b9%a0%289%29%ef%bc%9a%e7%aa%97%e5%8f%a3%e6%8e%a7%e4%bb%b6&amp;source=https%3a%2f%2fwww.hacktech.cn%2fpost%2f2018%2f02%2fwin32-asm-study-9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Win32汇编学习(9)：窗口控件 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.hacktech.cn%2fpost%2f2018%2f02%2fwin32-asm-study-9%2f&title=Win32%e6%b1%87%e7%bc%96%e5%ad%a6%e4%b9%a0%289%29%ef%bc%9a%e7%aa%97%e5%8f%a3%e6%8e%a7%e4%bb%b6"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Win32汇编学习(9)：窗口控件 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.hacktech.cn%2fpost%2f2018%2f02%2fwin32-asm-study-9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Win32汇编学习(9)：窗口控件 on whatsapp" href="https://api.whatsapp.com/send?text=Win32%e6%b1%87%e7%bc%96%e5%ad%a6%e4%b9%a0%289%29%ef%bc%9a%e7%aa%97%e5%8f%a3%e6%8e%a7%e4%bb%b6%20-%20https%3a%2f%2fwww.hacktech.cn%2fpost%2f2018%2f02%2fwin32-asm-study-9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Win32汇编学习(9)：窗口控件 on telegram" href="https://telegram.me/share/url?text=Win32%e6%b1%87%e7%bc%96%e5%ad%a6%e4%b9%a0%289%29%ef%bc%9a%e7%aa%97%e5%8f%a3%e6%8e%a7%e4%bb%b6&amp;url=https%3a%2f%2fwww.hacktech.cn%2fpost%2f2018%2f02%2fwin32-asm-study-9%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Win32汇编学习(9)：窗口控件 on ycombinator" href="https://news.ycombinator.com/submitlink?t=Win32%e6%b1%87%e7%bc%96%e5%ad%a6%e4%b9%a0%289%29%ef%bc%9a%e7%aa%97%e5%8f%a3%e6%8e%a7%e4%bb%b6&u=https%3a%2f%2fwww.hacktech.cn%2fpost%2f2018%2f02%2fwin32-asm-study-9%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://cdn.jsdelivr.net/npm/@waline/client></script><div id=waline></div><script>new Waline({el:"#waline",serverURL:"https://blog-waline-api-d1lk7kqu8-akkum4n.vercel.app",visitor:!0,dark:"body.dark",requiredMeta:["nick","mail"],uploadImage:!1,copyright:!0,locale:{placeholder:"欢迎评论"}})</script></article></main><footer class=footer><span>&copy; 2025 <a href=https://www.hacktech.cn/>Akkuman 的技术博客</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script defer src=https://umm.wodewo.win/script.js data-website-id=d14cc524-4c14-40da-876c-437d65176899></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>